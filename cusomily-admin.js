(function(e) {
    function t(t) {
        for (var n, a, s = t[0], l = t[1], c = t[2], d = 0, p = []; d < s.length; d++)
            a = s[d],
            Object.prototype.hasOwnProperty.call(o, a) && o[a] && p.push(o[a][0]),
            o[a] = 0;
        for (n in l)
            Object.prototype.hasOwnProperty.call(l, n) && (e[n] = l[n]);
        u && u(t);
        while (p.length)
            p.shift()();
        return r.push.apply(r, c || []),
        i()
    }
    function i() {
        for (var e, t = 0; t < r.length; t++) {
            for (var i = r[t], n = !0, a = 1; a < i.length; a++) {
                var l = i[a];
                0 !== o[l] && (n = !1)
            }
            n && (r.splice(t--, 1),
            e = s(s.s = i[0]))
        }
        return e
    }
    var n = {}
      , o = {
        scripts: 0
    }
      , r = [];
    function a(e) {
        return s.p + "js/" + ({
            pdfjsWorker: "pdfjsWorker"
        }[e] || e) + "." + {
            pdfjsWorker: "dbc92620"
        }[e] + ".js"
    }
    function s(t) {
        if (n[t])
            return n[t].exports;
        var i = n[t] = {
            i: t,
            l: !1,
            exports: {}
        };
        return e[t].call(i.exports, i, i.exports, s),
        i.l = !0,
        i.exports
    }
    s.e = function(e) {
        var t = []
          , i = o[e];
        if (0 !== i)
            if (i)
                t.push(i[2]);
            else {
                var n = new Promise((function(t, n) {
                    i = o[e] = [t, n]
                }
                ));
                t.push(i[2] = n);
                var r, l = document.createElement("script");
                l.charset = "utf-8",
                l.timeout = 120,
                s.nc && l.setAttribute("nonce", s.nc),
                l.src = a(e);
                var c = new Error;
                r = function(t) {
                    l.onerror = l.onload = null,
                    clearTimeout(d);
                    var i = o[e];
                    if (0 !== i) {
                        if (i) {
                            var n = t && ("load" === t.type ? "missing" : t.type)
                              , r = t && t.target && t.target.src;
                            c.message = "Loading chunk " + e + " failed.\n(" + n + ": " + r + ")",
                            c.name = "ChunkLoadError",
                            c.type = n,
                            c.request = r,
                            i[1](c)
                        }
                        o[e] = void 0
                    }
                }
                ;
                var d = setTimeout((function() {
                    r({
                        type: "timeout",
                        target: l
                    })
                }
                ), 12e4);
                l.onerror = l.onload = r,
                document.head.appendChild(l)
            }
        return Promise.all(t)
    }
    ,
    s.m = e,
    s.c = n,
    s.d = function(e, t, i) {
        s.o(e, t) || Object.defineProperty(e, t, {
            enumerable: !0,
            get: i
        })
    }
    ,
    s.r = function(e) {
        "undefined" !== typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }),
        Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }
    ,
    s.t = function(e, t) {
        if (1 & t && (e = s(e)),
        8 & t)
            return e;
        if (4 & t && "object" === typeof e && e && e.__esModule)
            return e;
        var i = Object.create(null);
        if (s.r(i),
        Object.defineProperty(i, "default", {
            enumerable: !0,
            value: e
        }),
        2 & t && "string" != typeof e)
            for (var n in e)
                s.d(i, n, function(t) {
                    return e[t]
                }
                .bind(null, n));
        return i
    }
    ,
    s.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e["default"]
        }
        : function() {
            return e
        }
        ;
        return s.d(t, "a", t),
        t
    }
    ,
    s.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }
    ,
    s.p = "https://cdn.customily.com/app/",
    s.oe = function(e) {
        throw console.error(e),
        e
    }
    ;
    var l = window["webpackJsonp"] = window["webpackJsonp"] || []
      , c = l.push.bind(l);
    l.push = t,
    l = l.slice();
    for (var d = 0; d < l.length; d++)
        t(l[d]);
    var u = c;
    r.push([2, "chunk-vendors"]),
    i()
}
)({
    0: function(e, t) {},
    "00dd": function(e, t, i) {},
    "00f3": function(e, t) {
        var i = '<md-dialog class="color-library-dialog" run-on-enter="create()"> <form name="resolutionForm"> <md-toolbar> <div class="md-toolbar-tools"> <h2>Add color to library</h2> <span flex></span> </div> </md-toolbar> <md-dialog-content style="max-width:500px"> <md-content class="md-padding"> <div class="row" style="margin-right:15px;margin-left:15px"> <p ng-show="errorMessage" style="margin-bottom:30px;color:red">{{ errorMessage }}</p> <md-input-container class="md-block col-xs-3 col-xs-offset-4" style="margin-bottom:0"> <md-tooltip md-direction="bottom"> The position for retrieving the color through the API </md-tooltip> <label>Color Option</label> <input required type="number" step="any" ng-model="colorOption" min="1" max="9999999" ng-disabled="element !== null"/> </md-input-container> <div class="col-xs-1 color-swatch" ng-style="{\'background-color\': toRgba(\'#\' + currentColor.HEX, currentColor.alpha) }"></div> <div id="pickerContainer" class="col-xs-12" style="display:flex;justify-content:center"> <customily-color-picker start-opened="true" on-change="pickerColorChange" ctrl-methods="pickerCtrlMethods" color-mode="colorMode" on-ready="pickerReady" disable-save="true" style="display:none"></customily-color-picker> </div> </div> </md-content> </md-dialog-content> <md-dialog-actions layout="row"> <md-button class="md-primary" ng-click="create()"> {{ element === null ? \'Create Color\' : \'Update Color\' }} </md-button> <md-button ng-click="cancel()"> Cancel </md-button> </md-dialog-actions> </form> </md-dialog> ';
        e.exports = i
    },
    "01d2": function(e, t, i) {},
    "01d5": function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i) {
                e.libraryName = "My library",
                e.colorMode = "rgb",
                e.libraryTypeString = i,
                e.createLibrary = function() {
                    t.hide({
                        name: e.libraryName,
                        colorMode: e.colorMode
                    })
                }
                ,
                e.cancel = function() {
                    t.cancel()
                }
            }
            e.$inject = ["$scope", "$mdDialog", "libraryTypeString"],
            angular.module("app.ctrls").controller("NewLibraryCtrl", e)
        }
        )()
    },
    "01ee": function(e, t, i) {},
    "02d1": function(e, t, i) {},
    "02f0": function(e, t, i) {},
    "0481": function(e, t, i) {
        e.exports = i.p + "img/jcb-colored.01faefc4.svg?x-request=html"
    },
    "055f": function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("576f");
        (function() {
            function e(e, t, i, o, r, a, s, l, c, d) {
                e.libraryType = l.Type,
                e.category = c,
                e.thumbnailOnly = d,
                e.categoryName = "My category",
                e.errorMessage = "",
                e.filePath = "",
                e.thumbnailPath = "",
                e.createBtnDisabled = !1,
                null != c && (e.categoryName = c.Name,
                2 !== l.Type && 3 !== l.Type || (e.filePath = c.Path,
                e.thumbnailPath = c.ThumbnailPath)),
                2 !== l.Type && 3 !== l.Type || (e.createBtnDisabled = !e.categoryName && !e.filePath),
                e.create = async function() {
                    if (e.categoryName && (2 !== l.Type && 3 !== l.Type || e.filePath)) {
                        var i = {
                            Name: e.categoryName
                        };
                        2 !== l.Type && 3 !== l.Type || (i.Path = e.filePath,
                        i.ThumbnailPath = e.thumbnailPath),
                        null === c ? o.addCategory(l.LibraryId, i).then((function() {
                            s.reset(),
                            t.hide()
                        }
                        )).catch((function(t) {
                            window.rumReportError(t),
                            s.reset(),
                            e.errorMessage = "Error creating category!"
                        }
                        )) : (s.start("Updating category"),
                        o.updateCategory(l.LibraryId, c.CategoryId, i).then((function() {
                            s.reset(),
                            t.hide()
                        }
                        )).catch((function(t) {
                            s.reset(),
                            window.rumReportError(t),
                            e.errorMessage = "Error updating category!"
                        }
                        )))
                    }
                }
                ,
                e.uploadImage = async function(t) {
                    const o = t.target.files;
                    if (o && o[0])
                        try {
                            e.errorMessage = "",
                            s.start("Uploading Image");
                            const t = await Object(n["d"])("library-categories", o[0], (function(e) {
                                s.message(`Uploading Image ${parseInt(e)}%`)
                            }
                            ))
                              , a = await r.generateImageThumbnail(t.Name, "library-categories");
                            console.log("Success on image upload!"),
                            e.filePath = t.Path,
                            e.thumbnailPath = a.Path,
                            s.stop(),
                            i(()=>e.$apply())
                        } catch (error) {
                            window.rumReportError(error),
                            console.error(error),
                            e.errorMessage = "Error uploading image",
                            s.stop(),
                            i(()=>e.$apply())
                        }
                    e.createBtnDisabled = !e.categoryName && !e.filePath
                }
                ,
                e.uploadEPS = async function(t) {
                    const n = t.target.files;
                    if (n && n[0])
                        try {
                            e.uploadingVectorEPS = !0,
                            e.vectorEPSUploadPercent = 0,
                            s.start("Uploading EPS");
                            const t = await a.uploadVectorToS3(n[0], "vector", !1, !0, (t,n)=>{
                                "upload" === t ? (s.message(`Uploading EPS: ${parseInt(n)}%`),
                                i(()=>e.$apply())) : s.message("Processing")
                            }
                            );
                            console.log("Success on EPS upload!"),
                            e.errorMessage = "",
                            e.filePath = t.SVG,
                            e.thumbnailPath = t.ThumbnailPath,
                            s.stop(),
                            e.uploadingVectorEPS = !1,
                            i(()=>e.$apply())
                        } catch (error) {
                            console.error(error),
                            s.stop(),
                            e.uploadingVectorEPS = !1,
                            e.errorMessage = error,
                            i(()=>e.$apply())
                        }
                    e.createBtnDisabled = !e.categoryName && !e.filePath
                }
                ,
                e.cancel = function() {
                    t.cancel()
                }
            }
            e.$inject = ["$scope", "$mdDialog", "$timeout", "LibrariesAPIService", "ImageAPIService", "VectorUtilService", "blockUI", "library", "category", "thumbnailOnly"],
            angular.module("app.ctrls").controller("CategoryDialogCtrl", e)
        }
        )()
    },
    "05f05": function(e, t, i) {
        "use strict";
        i.r(t);
        const n = e=>document.cookie.split(";").some(t=>t.trim().startsWith(e + "="))
          , o = (e,t,i)=>{
            n(e) && (document.cookie = e + "=" + (t ? ";path=" + t : "") + (i ? ";domain=" + i : "") + ";expires=Thu, 01 Jan 1970 00:00:01 GMT")
        }
        ;
        (function() {
            function e(e) {
                async function t() {
                    var t = "/Users/GetMe";
                    const i = await e.get(t);
                    return i.UserImpersonatedFromId ? window.rumStopRecording() : window.rumStartRecording(),
                    rumSetUser({
                        id: i.Id,
                        name: i.Username,
                        impersonatedFrom: i.UserImpersonatedFromId
                    }),
                    i
                }
                function i() {
                    return e.get("/Users/Logout")
                }
                function n() {
                    var t = "/Users";
                    return e.get(t)
                }
                function r(t) {
                    var i = {
                        username: t
                    }
                      , n = "/Users/Impersonate?" + $.param(i);
                    return o("_dd_s", "/", ".customily.com"),
                    o("_dd_s", "/", "app.customily.com"),
                    e.get(n)
                }
                function a() {
                    var t = "/Users/ParentAccessRoles";
                    return e.get(t)
                }
                function s(t) {
                    var i = "/Users/RemoveBg?key=" + t;
                    return e.post(i)
                }
                const l = t=>e.post("/Users/VanceAi?key=" + t)
                  , c = t=>e.post("/Users/CutoutPro?key=" + t);
                function d(t, i, n, o, r, a, s, l, c) {
                    const d = {
                        Name: t,
                        Username: i,
                        Email: n,
                        Password: o,
                        ConfirmationPassword: r,
                        ManagedBy: a,
                        StoreType: s,
                        StoreUrl: l,
                        Captcha: c
                    };
                    return e.post("/Users", d)
                }
                function u(t) {
                    var i = {
                        token: t
                    }
                      , n = "/Users/Verify?" + $.param(i);
                    return e.post(n)
                }
                function p(t) {
                    var i = {
                        email: t
                    }
                      , n = "/Users/Resend?" + $.param(i);
                    return e.post(n)
                }
                function h(t) {
                    var i = {
                        email: t
                    }
                      , n = "/Users/PasswordResetEmail?" + $.param(i);
                    return e.post(n)
                }
                function m(t, i, n, o) {
                    var r = {
                        Username: n,
                        Password: t,
                        ConfirmationPassword: i,
                        ResetToken: o
                    }
                      , a = "/Users/ResetPassword";
                    return e.post(a, r)
                }
                function g(t) {
                    var i = "/Users/CreateTemplate/Shopify?productId=" + t;
                    return e.post(i)
                }
                function f() {
                    const t = "/Users/Review/Showed";
                    return e.post(t)
                }
                async function v(t) {
                    const i = "/Users/Billing/Billings"
                      , n = await e.get(i)
                      , o = n.filter(e=>1 == e.storeType)
                      , r = o.length > 0 && o.every(e=>"shopify" == e.storeBilling.Type)
                      , a = t.Stores.every(e=>1 != e.Type)
                      , s = r || a
                      , l = !a;
                    return {
                        planIncludesFeature: s,
                        showCustomily2: l
                    }
                }
                function b(t) {
                    const i = {
                        Feedback: t
                    }
                      , n = "/Users/Review/Feedback";
                    return e.post(n, i)
                }
                return {
                    logout: i,
                    getMe: t,
                    getAllUsernames: n,
                    impersonate: r,
                    getParentAccessRoles: a,
                    registerUser: d,
                    verifyUser: u,
                    resendEmail: p,
                    sendPasswordResetEmail: h,
                    resetPassword: m,
                    setRemoveBgAPIKey: s,
                    createTemplate: g,
                    userReviewShowed: f,
                    userReviewFeedback: b,
                    setVanceAiAPIKey: l,
                    getStoresPlan: v,
                    setCutoutProAPIKey: c
                }
            }
            e.$inject = ["HttpService"],
            angular.module("app.shared.services").factory("UsersAPIService", e)
        }
        )()
    },
    "0613": function(e, t, i) {
        "use strict";
        var n = i("2b0e")
          , o = i("2f62");
        n["default"].use(o["a"]);
        const r = {
            user: null,
            subscriptions: [],
            stripePublicKey: "pk_live_yCFqcL8TXwEAiWFw4YU2zTsE00MctQk3v6"
        }
          , a = new o["a"].Store({
            state: r,
            mutations: {
                user: (e,t)=>{
                    e.user = t
                }
                ,
                subscriptions: (e,t)=>{
                    e.subscriptions = t
                }
            },
            actions: {},
            modules: {}
        });
        t["a"] = a
    },
    "06bd": function(e, t, i) {
        var n = i("4719")
          , o = i("a5b6")
          , r = i("ac6e")
          , a = i("9ba6")
          , s = i("299b")
          , l = i("a6a9")
          , c = i("8880")
          , d = i("56ea")
          , u = i("11f6")
          , p = i("ff7e")
          , h = i("cf51")
          , m = i("e59f")
          , g = i("c007")
          , f = i("c2a1")
          , v = n(o)
          , b = n(r)
          , y = n(a)
          , w = n(s)
          , C = n(l)
          , x = n(c)
          , S = n(d)
          , P = n(u)
          , k = n(p)
          , _ = n(h)
          , A = n(m)
          , T = n(g)
          , E = n(f)
          , O = '<span class="sidebar-container" ng-controller="SideBarCtrl"> <div class="nav-head vertical-align" style="height:35px"> <a ng-click="navigate(\'/\')" class="site-logo text-uppercase" href=""> <img src="' + v + '" class="logo"/> <span class="title text" style="top:6px">Customily</span> </a> </div> <nav class="site-nav clearfix" role="navigation" style="margin-top:35px"> <div class="profile clearfix mb15 vertical-align" style="padding-left:10px;cursor:pointer" ng-click="navigate(\'/\')"> <ng-avatar initials="{{ userInitials }}" bind="true" max-length="2" bg-color="#7157e0" text-color="white" round-shape="true"></ng-avatar> <div class="group" style="position:absolute;margin-left:55px"> <div class="name" style="overflow:hidden;text-overflow:ellipsis;padding-right:10px;margin:0;font-weight:700"> {{ user.Name || user.Username }} </div> </div> </div> <ul class="list-unstyled clearfix nav-list mb15" collapse-nav-accordion> <li ng-if="showCustomily2"> <a ng-class=" {\'item-disabled\': !planIncludesFeature }" ng-click="navigate(\'/store/podSelection\')" md-ink-ripple href=""> <md-icon md-svg-src="' + b + '" ng-class="{ \'selected\': currentRoute === \'/store/podSelection/\' }"></md-icon> <span class="text icon-label">Start</span> </a> <md-tooltip ng-if="!planIncludesFeature" md-delay="200" md-direction="right"> Your current plan doesn\'t include this feature. Please check your upgrade options with our supoport team :) </md-tooltip> </li> <li ng-if="showCustomily2"> <a ng-class="{\'item-disabled\': !planIncludesFeature }" ng-click="navigate(\'/designs\')" md-ink-ripple href=""> <md-icon md-svg-src="' + y + '" ng-class="{ \'selected\': (currentRoute === \'/designs\' || inMyDesign) }"></md-icon> <span class="text icon-label">My designs</span> </a> <md-tooltip ng-if="!planIncludesFeature" md-delay="200" md-direction="right"> Your current plan doesn\'t include this feature. Please check your upgrade options with our supoport team :) </md-tooltip> </li> <li ng-if="showCustomily2"> <a ng-class="{\'item-disabled\': !planIncludesFeature }" ng-click="navigate(\'/MyProductBases\')" md-ink-ripple href=""> <md-icon md-svg-src="' + w + '" ng-class="currentRoute === \'/MyProductBases\' || isMyProductBases ? \'selected\' : \'\'"></md-icon> <span class="text icon-label">My product bases</span> </a> <md-tooltip ng-if="!planIncludesFeature" md-delay="200" md-direction="right"> Your current plan doesn\'t include this feature. Please check your upgrade options with our supoport team :) </md-tooltip> </li> <li> <a ng-click="navigate(\'/home\')" md-ink-ripple href=""> <md-icon md-svg-src="' + C + '" ng-class="(currentRoute === \'/home\' || (currentRoute.indexOf(\'createProduct\') > -1 && !inMyDesign && !isMyProductBases))  ? \'selected\' : \'\'"></md-icon> <span class="text icon-label">Templates</span> </a> </li> <li ng-if="user.ShowLibraries"> <a ng-click="navigate(\'/libraries\')" md-ink-ripple href=""> <md-icon md-svg-src="' + x + '" ng-class="(currentRoute === \'/libraries\' || currentRoute === \'/editLibrary\') ? \'selected\' : \'\'"></md-icon> <span class="text icon-label">Libraries</span> </a> </li> <li ng-if="user.ShowCustomilyOptions"> <a ng-click="navigate(\'/options\')" md-ink-ripple href=""> <md-icon md-svg-src="' + S + '" ng-class="currentRoute === \'/options\' ? \'selected\' : \'\'"></md-icon> <span class="text icon-label">Manage Options</span> </a> </li> <li ng-if="showStoresApp"> <a ng-click="navigate(\'/store\')" md-ink-ripple href=""> <md-icon md-svg-src="' + P + '" ng-class="currentRoute === \'/store\' ? \'selected\' : \'\'"></md-icon> <span class="text icon-label">Store</span> </a> </li> <li ng-if="user.AccessRoles.Serialized.split(\',\').includes(\'hangfire\')"> <a ng-click="goToHangfire()" md-ink-ripple href=""> <md-icon md-svg-src="' + k + '"></md-icon> <span class="text icon-label">Hangfire Jobs</span> </a> </li> <li ng-if="user.AccessRoles.Serialized.split(\',\').includes(\'hangfire\')"> <a md-ink-ripple href="{{ bullMqJobsUrl }}" target="_blank"> <md-icon md-svg-src="' + k + '"></md-icon> <span class="text icon-label">BullMq Jobs</span> </a> </li> <li ng-if="user.AccessRoles.Serialized.split(\',\').includes(\'admin\') && user.AccessRoles.Serialized.split(\',\').includes(\'admin-ui\')"> <a ng-click="goToAdmin()" md-ink-ripple href=""> <md-icon md-svg-src="' + _ + '" ng-class="currentRoute.startsWith(\'/admin\') ? \'selected\' : \'\'"></md-icon> <span class="text icon-label">Admin</span> </a> </li> <div class="bottom-icons"> <li> <a ng-click="goToAccount()" md-ink-ripple href=""> <md-icon md-svg-src="' + A + '" ng-class="currentRoute === \'/account\' ? \'selected\' : \'\'"></md-icon> <span class="text icon-label">Account</span> </a> </li> <li> <a ng-click="openHelpCenter()" md-ink-ripple href=""> <md-icon md-svg-src="' + T + '"></md-icon> <span class="text icon-label">Support</span> </a> </li> <li> <a ng-click="logOut()" md-ink-ripple href=""> <md-icon md-svg-src="' + E + '"></md-icon> <span class="text icon-label">Logout</span> </a> </li> </div> </ul> </nav> </span> ';
        e.exports = O
    },
    "073d": function(e, t, i) {},
    "07ad": function(e, t, i) {
        "use strict";
        i("9e65")
    },
    "0921": function(e, t, i) {
        e.exports = i.p + "img/align-bottom.403c0c56.svg?x-request=html"
    },
    "0af1": function(e, t, i) {
        e.exports = i.p + "img/product-colors.dd51ec30.svg?x-request=html"
    },
    "0b48": function(e, t, i) {
        e.exports = i.p + "img/groupArrowClosed.e099052e.svg?x-request=html"
    },
    "0bad": function(e, t, i) {
        "use strict";
        i.d(t, "a", (function() {
            return c
        }
        ));
        var n = i("5364")
          , o = i("9bd1")
          , r = i("9c73")
          , a = i.n(r);
        const s = new a.a;
        var l = new WeakMap;
        class c {
            constructor(e=!0) {
                l.set(this, {
                    writable: !0,
                    value: void 0
                }),
                Object(o["a"])(this, l, e ? s : new a.a)
            }
            add(e, t, i, o) {
                const r = {
                    redo: t,
                    undo: o
                };
                Object(n["a"])(this, l).add({
                    redo: function() {
                        e(...r.redo)
                    },
                    undo: function() {
                        i(...r.undo)
                    }
                })
            }
            undo() {
                try {
                    Object(n["a"])(this, l).undo()
                } catch (error) {
                    console.error(error)
                }
            }
            redo() {
                try {
                    Object(n["a"])(this, l).redo()
                } catch (error) {
                    console.error(error)
                }
            }
            clear() {
                Object(n["a"])(this, l).clear()
            }
            canUndo() {
                return Object(n["a"])(this, l).hasUndo()
            }
            canRedo() {
                return Object(n["a"])(this, l).hasRedo()
            }
            getStackLength() {
                return Object(n["a"])(this, l).getIndex() + 1
            }
        }
    },
    "0ccd": function(e, t, i) {
        "use strict";
        i.r(t),
        function() {
            function e(e, t, i, n, o, r, a) {
                var s;
                const l = {
                    COUPLE_MUG: 1,
                    PHONE: 2,
                    DOG_MUG: 3,
                    FAMILY_CANVAS: 4,
                    METAL_SIGN: 5,
                    TOTE: 6,
                    NOTEBOOK: 7
                };
                e.loading = !0,
                a.start("Creating Template"),
                r.createTemplate(o.search().productId).then(e=>{
                    a.stop(),
                    t.shopifyProductUrl = e.ProductUrl;
                    const i = parseInt(o.search().productId);
                    l.COUPLE_MUG === i ? o.path("/createdProduct/couplemug") : l.PHONE === i ? o.path("/createdProduct/phone") : l.DOG_MUG === i ? o.path("/createdProduct/dogmug") : l.FAMILY_CANVAS === i ? o.path("/createdProduct/familycanvas") : l.METAL_SIGN === i ? o.path("/createdProduct/metalsign") : l.TOTE === i ? o.path("/createdProduct/tote") : l.NOTEBOOK === i && o.path("/createdProduct/notebook")
                }
                ).catch(t=>{
                    window.rumReportError(t),
                    i(()=>e.$apply()),
                    a.stop(),
                    n.show(n.alert().parent(document.body).clickOutsideToClose(!0).title("Error creating template: " + t.statusText).ok("Ok"))
                }
                ),
                null === (s = window.Appcues) || void 0 === s || s.on("flow_completed", (function(e) {
                    t.shopifyProductUrl && window.open(t.shopifyProductUrl, "_blank")
                }
                ))
            }
            e.$inject = ["$scope", "$rootScope", "$timeout", "$mdDialog", "$location", "UsersAPIService", "blockUI"],
            angular.module("app.ctrls").controller("CreateTemplateCtrl", e)
        }()
    },
    "0e4a": function(e, t, i) {},
    "0e68": function(e, t) {
        (function() {
            function e(e, t, i, n, o, r) {
                let a = null;
                function s(t) {
                    return !(e.user && !e.user.ImpersonatedFromAdminUser && e.user.IsDisabled && "/account" !== t && "/home" !== t && "/signin" !== t)
                }
                function l(i, n) {
                    return t((t,r)=>{
                        o.getPasswordToken(i, n).then(i=>{
                            e.$broadcast("user:signin"),
                            t(i)
                        }
                        ).catch(e=>{
                            r(e)
                        }
                        )
                    }
                    )
                }
                async function c() {
                    try {
                        void 0 == e.user && (e.user = await n.getMe());
                        const t = e.user;
                        if (void 0 == e.planIncludesFeature) {
                            const {planIncludesFeature: i, showCustomily2: o} = await n.getStoresPlan(t);
                            e.planIncludesFeature = i,
                            e.showCustomily2 = o
                        }
                        if (void 0 == e.enableGroups && (e.enableGroups = e.user.AccessRoles.Serialized.split(",").includes("admin") || e.user.AccessRoles.Serialized.split(",").includes("dstudiogroups") || e.planIncludesFeature),
                        !t)
                            return;
                        if (e.isManagedUser = t.AccessRoles.Serialized.split(",").includes("managed"),
                        e.isManagedUser) {
                            const i = t.User_Id ? await n.getParentAccessRoles() : "";
                            i && i.split(",").includes("restricts-children") && (e.childRestrictedAccess = !0)
                        }
                        return t
                    } catch (t) {
                        return null
                    }
                }
                function d() {
                    return t((t,o)=>{
                        n.logout().then(()=>{
                            e.isManagedUser = !1,
                            e.childRestrictedAccess = !1,
                            i.path("/signin"),
                            t()
                        }
                        ).catch(e=>{
                            o(e)
                        }
                        )
                    }
                    )
                }
                function u(e) {
                    r.openRoutes.includes(e) || (a = e)
                }
                function p() {
                    return a
                }
                return e.isManagedUser = !1,
                e.childRestrictedAccess = !1,
                {
                    passwordLogin: l,
                    getSession: c,
                    logout: d,
                    setSignInReturnPath: u,
                    getSignInReturnPath: p,
                    isRouteAllowed: s
                }
            }
            e.$inject = ["$rootScope", "$q", "$location", "UsersAPIService", "TokenAPIService", "ConfigService"],
            angular.module("app.shared.services").factory("AuthService", e)
        }
        )()
    },
    "0f56": function(e, t, i) {
        i("c5e5"),
        i("bb95"),
        i("a604"),
        fabric.IMAGE_MODE_SINGLE_COLOR = "single color",
        fabric.IMAGE_MODE_FULL_COLOR = "full color",
        fabric.IMAGE_MODE_GRADING = "grading",
        fabric.filterBackend = new fabric.Canvas2dFilterBackend,
        fabric.ImagePlaceholder = fabric.util.createClass(fabric.Group, {
            type: "image-placeholder",
            cacheProperties: fabric.Group.prototype.cacheProperties.concat("imageColor", "threshold", "imageMode", "stroke"),
            imageMode: fabric.IMAGE_MODE_FULL_COLOR,
            originalElement: null,
            lockUniScalingWithSkew: !1,
            lockMouseMovement: !1,
            originalMaskElement: null,
            maskingColor: "#000000",
            coverMaskArea: !1,
            hasMask: !1,
            preventEditMode: !1,
            threshold: 150,
            imageColor: "#000000",
            silentEditMode: !1,
            _emptyImage: !1,
            _editMode: !1,
            _noMaskScaleX: 1,
            _noMaskScaleY: 1,
            _noMaskOriginalImgScale: 1,
            _originalStroke: null,
            _originalStrokeWidth: null,
            _originalCanvasSelection: !0,
            _originalLockX: !1,
            _originalLockY: !1,
            _initialMouseX: 0,
            _initialMouseY: 0,
            _forcedEditMode: !1,
            rotationStep: 1,
            _maskBoundsRectangle: null,
            _boundingBoxOffsetX: 0,
            _boundingBoxOffsetY: 0,
            _relationshipMatrix: null,
            removeWhiteBackground: !1,
            enableClipPath: !0,
            initialize: function(e, t, i) {
                const n = this
                  , o = !!t.isMobile
                  , r = new fabric.MaskedImage(e,{
                    originX: "center",
                    originY: "center",
                    width: t.width || 300,
                    height: t.height || 300
                },i)
                  , a = new fabric.Rect({
                    strokeDashArray: t.strokeDashArray,
                    originX: "center",
                    originY: "center",
                    stroke: t.stroke || "#000000",
                    strokeWidth: "undefined" != typeof t.strokeWidth ? t.strokeWidth : 5,
                    width: t.width || 300,
                    height: t.height || 300,
                    fill: "rgba(0, 0, 0, 0)",
                    id: t.id
                });
                this._maskBoundsRectangle = new fabric.Rect({
                    originX: "center",
                    originY: "center",
                    strokeWidth: 3,
                    stroke: "rgba(0, 0, 0, 0)",
                    width: t.width || 300,
                    height: t.height || 300,
                    fill: "rgba(0, 0, 0, 0)",
                    lockSkewingX: !0,
                    lockSkewingY: !0
                }),
                this._maskBoundsRectangle.setControlsVisibility({
                    tl: !o,
                    tr: !o,
                    br: !o,
                    bl: !o,
                    mtr: !o,
                    ml: !1,
                    mb: !1,
                    mr: !1,
                    mt: !1
                }),
                this.enableClipPath = "undefined" !== typeof t.enableClipPath ? t.enableClipPath : this.enableClipPath,
                this.callSuper("initialize", [r, a], t),
                this._adjustClippingPath(),
                this._resetFakeBoundingBox(),
                this.setElement(e),
                this.setMode(this.imageMode),
                this._maskBoundsRectangle._initialMaskOffsetX = 0,
                this._maskBoundsRectangle._initialMaskOffsetY = 0,
                this._maskBoundsRectangle.on({
                    mousedown: function(e) {
                        n.canvas.fire("object:placeholder:mousedown")
                    },
                    mouseup: function(e) {
                        n.canvas.fire("object:placeholder:mouseup")
                    },
                    selected: function(e) {
                        n.canvas.fire("object:placeholder:maskSelected")
                    },
                    deselected: function(e) {
                        n.fire("deselected", e)
                    },
                    rotating: function() {
                        this.angle = Math.ceil(this.angle / n.rotationStep) * n.rotationStep,
                        n._updateMaskAngle(this.angle - n.angle),
                        n._updateRelationshipMatrix(),
                        n.canvas && n.canvas.fire("object:placeholder:maskModified", {
                            object: n,
                            parameters: n.getEditModeImageParameters()
                        })
                    },
                    scaling: function() {
                        const e = this.width * this.scaleX
                          , t = this.height * this.scaleY;
                        this.set("width", e),
                        this.set("height", t),
                        this.scaleX = 1,
                        this.scaleY = 1;
                        const i = this.width / (n.item(0).width * n._noMaskOriginalImgScale)
                          , o = this.height / (n.item(0).height * n._noMaskOriginalImgScale);
                        n._updateMaskScale(i, o),
                        n._updateRelationshipMatrix(),
                        n.canvas && n.canvas.fire("object:placeholder:maskModified", {
                            object: n,
                            parameters: n.getEditModeImageParameters()
                        })
                    },
                    moving: function() {
                        n._boundingBoxOffsetX = this.left - n.left,
                        n._boundingBoxOffsetY = this.top - n.top;
                        const e = (this.left - n.left) / n.item(0).scaleX
                          , t = (this.top - n.top) / n.item(0).scaleY;
                        this._lastDistanceX = e,
                        this._lastDistanceY = t,
                        n._updateMaskPosition(e, t),
                        n._updateRelationshipMatrix(),
                        n.canvas && n.canvas.fire("object:placeholder:maskModified", {
                            object: n,
                            parameters: n.getEditModeImageParameters()
                        })
                    }
                }),
                this.on({
                    scaling: function(e) {
                        if (this.lockUniScalingWithSkew) {
                            let t = 1;
                            t = "scaleX" === e.transform.action ? this.scaleX : this.scaleY,
                            this.scaleX = t,
                            this.scaleY = t
                        }
                    },
                    scaled: function() {
                        this.setScale(this.width, this.height, !0)
                    },
                    added: function() {
                        this.cornerSize = .025 * this.canvas.width,
                        this.transparentCorners = !1
                    },
                    removed: function() {
                        this.canvas.remove(this._maskBoundsRectangle)
                    },
                    "object:dblclick": function() {
                        if (!this.preventEditMode && (this._forcedEditMode || !this._emptyImage)) {
                            this._editMode = !0,
                            this._enablingEditMode = !0,
                            this._originalCanvasSelection = this.canvas.selection,
                            this.canvas.selection = !1,
                            this._controlsVisibilityBackup = JSON.parse(JSON.stringify(this._getControlsVisibility())),
                            this.setControlsVisibility({
                                bl: !1,
                                br: !1,
                                mb: !1,
                                ml: !1,
                                mr: !1,
                                mt: !1,
                                mtr: !1,
                                tl: !1,
                                tr: !1
                            }),
                            this._maskBoundsRectangle.set("cornerSize", this.cornerSize),
                            this._maskBoundsRectangle.set("transparentCorners", this.transparentCorners),
                            this._maskBoundsRectangle.set("centeredScaling", !0),
                            this._maskBoundsRectangle.set("centeredRotation", !0),
                            this._maskBoundsRectangle.set("skewX", this.skewX),
                            this._maskBoundsRectangle.set("skewY", this.skewY);
                            const e = this.hasMask ? this._maskBoundsRectangle._lastDistanceX * this.item(0).scaleX : this._boundingBoxOffsetX
                              , t = this.hasMask ? this._maskBoundsRectangle._lastDistanceY * this.item(0).scaleY : this._boundingBoxOffsetY;
                            this._maskBoundsRectangle.set("left", this.left + e),
                            this._maskBoundsRectangle.set("top", this.top + t),
                            this._maskBoundsRectangle.setCoords(),
                            this.canvas.add(this._maskBoundsRectangle),
                            this.canvas.setActiveObject(this._maskBoundsRectangle),
                            this._updateMaskBoundsPosition(),
                            this._updateRelationshipMatrix(),
                            this._originalLockX = this.lockMovementX,
                            this._originalLockY = this.lockMovementY,
                            this.lockMovementX = this.lockMovementY = !0,
                            this._initialMouseX = null,
                            this._initialMouseY = null,
                            this.silentEditMode || (this._originalStroke = this.item(1).stroke,
                            this._originalStrokeWidth = this.item(1).strokeWidth,
                            this.item(1).set("stroke", "red"),
                            this.item(1).set("strokeWidth", 5)),
                            this._enablingEditMode = !1,
                            this.canvas.renderAll()
                        }
                    },
                    deselected: function() {
                        !this._editMode || this._forcedEditMode || this._enablingEditMode || (this._editMode = !1,
                        this.canvas.selection = this._originalCanvasSelection,
                        this.canvas.remove(this._maskBoundsRectangle),
                        this.setControlsVisibility(this._controlsVisibilityBackup),
                        this.lockMovementX = this._originalLockX,
                        this.lockMovementY = this._originalLockY,
                        this.silentEditMode || (this.item(1).set("stroke", this._originalStroke),
                        this.item(1).set("strokeWidth", this._originalStrokeWidth),
                        this.set("dirty", !0)),
                        this.canvas.renderAll())
                    },
                    rotating: function() {
                        this._maskBoundsRectangle.set("angle", this.angle)
                    },
                    rotated: function() {
                        this._updateMaskBoundsPosition(),
                        this._updateRelationshipMatrix()
                    }
                })
            },
            _set: function(e, t) {
                if ("id" === e)
                    this._maskBoundsRectangle && (this._maskBoundsRectangle.id = t);
                else if ("lockMouseMovement" === e)
                    t ? (this._maskBoundsRectangle.lockMovementX = !0,
                    this._maskBoundsRectangle.lockMovementY = !0) : (this._maskBoundsRectangle.lockMovementX = !1,
                    this._maskBoundsRectangle.lockMovementY = !1);
                else if ("imageColor" === e)
                    this.item(0).filters[0] && "KMeans" === this.item(0).filters[0].type && (this.item(0).filters[0].setFgColor(t),
                    this.item(0).applyFilters());
                else if ("width" === e || "height" === e)
                    this.callSuper("_set", e, t),
                    this._adjustImage(),
                    this._adjustClippingPath(),
                    this._resetFakeBoundingBox(),
                    this.setMask(this.originalMaskElement);
                else if ("rotationStep" === e)
                    "undefined" === typeof t ? t = this.rotationStep : (t < 0 || 0 == t) && (t = 1);
                else if ("evented" === e) {
                    if (this._maskBoundsRectangle.set("evented", t),
                    this._forcedEditMode || this._editMode)
                        return
                } else
                    "imageMode" === e ? (this.callSuper("_set", e, t),
                    this.originalElement && this.setMode(this.imageMode)) : "stroke" === e || "strokeWidth" === e ? this.item(1).set(e, t) : "angle" === e ? this._updateMaskBoundsPosition() : "hasControls" === e ? this._maskBoundsRectangle.set("hasControls", t) : "enableClipPath" === e && (this.callSuper("_set", e, t),
                    this._adjustClippingPath());
                this.callSuper("_set", e, t)
            },
            updateFromGroupScaling: function() {
                this.setScale(this.width, this.height, !1)
            },
            enableEditMode: function() {
                this._forcedEditMode = !0,
                this.fire("object:dblclick")
            },
            disableEditMode: function() {
                this.fire("deselected")
            },
            setEditModeImageScale: function(e) {
                this._editMode && this._updateMaskScale(e, e)
            },
            setEditModeImageRotation: function(e) {
                this._editMode && this._updateMaskAngle(e)
            },
            setEditModeImageOffset: function(e, t) {
                this._editMode && this._updateMaskPosition(e, t)
            },
            getEditModeImageParameters: function() {
                return this.hasMask ? {
                    offsetX: this._maskBoundsRectangle._lastDistanceX || 0,
                    offsetY: this._maskBoundsRectangle._lastDistanceY || 0,
                    scaleX: this.item(0).maskScaleX || 1,
                    scaleY: this.item(0).maskScaleY || 1,
                    angle: this.item(0).maskAngle || 0,
                    threshold: this.threshold
                } : {
                    offsetX: this._maskBoundsRectangle._lastDistanceX || 0,
                    offsetY: this._maskBoundsRectangle._lastDistanceY || 0,
                    scaleX: this._noMaskScaleX || 1,
                    scaleY: this._noMaskScaleY || 1,
                    angle: this.item(0).angle || 0,
                    threshold: this.threshold
                }
            },
            setOpacity: function(e) {
                this.item(0).set("opacity", e)
            },
            getOpacity: function() {
                return this.item(0).opacity
            },
            getWidth: function() {
                return this.width * this.scaleX
            },
            setWidth: function(e) {
                e || (e = 0),
                this.item(1).set("width", e),
                this.set("width", e)
            },
            getHeight: function() {
                return this.height * this.scaleY
            },
            setHeight: function(e) {
                e || (e = 0),
                this.item(1).set("height", e),
                this.set("height", e)
            },
            setScale: function(e, t, i) {
                const n = e * this.scaleX
                  , o = t * this.scaleY;
                i && this._resetFakeBoundingBox(),
                this.scaleX = 1,
                this.scaleY = 1,
                this.setWidth(n),
                this.setHeight(o),
                i && this._updateRelationshipMatrix()
            },
            getColor: function() {
                return this.imageColor
            },
            _getInitialBoundsRectangleSize: function() {
                let e = 0
                  , t = 0;
                if (this.originalElement && this.originalElement.width > 0 && this.originalElement.width > 0) {
                    const i = this._computeImageScaling();
                    e = this.item(0).width * i,
                    t = this.item(0).height * i
                }
                return {
                    width: e,
                    height: t
                }
            },
            _resetFakeBoundingBox: function() {
                this._boundingBoxOffsetX = this._boundingBoxOffsetY = 0,
                this._maskBoundsRectangle._lastDistanceX = this._maskBoundsRectangle._lastDistanceY = 0,
                this._noMaskScaleX = this._noMaskScaleY = 1;
                const e = this._getInitialBoundsRectangleSize();
                this._maskBoundsRectangle.set("width", e.width),
                this._maskBoundsRectangle.set("height", e.height),
                this._maskBoundsRectangle.set("angle", this.angle),
                this._maskBoundsRectangle.set("left", this.left),
                this._maskBoundsRectangle.set("top", this.top),
                this._maskBoundsRectangle.setCoords(),
                this.item(0).set("left", 0),
                this.item(0).set("top", 0),
                this.item(0).set("angle", 0)
            },
            setElement: function(e) {
                e ? this._emptyImage = !1 : (e = new Image,
                e.width = e.height = 1,
                this._emptyImage = !0),
                this.originalElement = e,
                this.item(0).setElement(e),
                this.setMask(this.originalMaskElement),
                this.set("dirty", !0)
            },
            setMask: function(e) {
                const t = this.item(0);
                if (this.originalMaskElement = e,
                e) {
                    if (this.hasMask = !0,
                    this.originalElement) {
                        let i, n;
                        this.originalElement.width > this.originalElement.height ? (i = this.originalElement.width,
                        n = this.getHeight() * this.originalElement.width / this.getWidth(),
                        n < this.originalElement.height && (n = this.originalElement.height,
                        i = this.getWidth() * this.originalElement.height / this.getHeight())) : (n = this.originalElement.height,
                        i = this.getWidth() * this.originalElement.height / this.getHeight(),
                        i < this.originalElement.width && (i = this.originalElement.width,
                        n = this.getHeight() * this.originalElement.width / this.getWidth())),
                        t.set("maskElement", e),
                        t.set("maskScaleX", 1),
                        t.set("maskScaleY", 1),
                        t.set("maskOffsetX", 0),
                        t.set("maskOffsetY", 0),
                        t.set("maskAngle", 0),
                        t.set("maskHeight", n),
                        t.set("maskWidth", i)
                    }
                } else
                    this.hasMask = !1,
                    t.set("maskElement", null);
                if (this._adjustImage(!0),
                this._resetFakeBoundingBox(),
                this.coverMaskArea) {
                    let e = 1;
                    if (this.hasMask) {
                        const t = this.width / (this.item(0).width * this.item(0).scaleX)
                          , i = this.height / (this.item(0).height * this.item(0).scaleY);
                        e = Math.max(t, i)
                    } else {
                        const t = this.width / (this.item(0).width * this.item(0).scaleX)
                          , i = this.height / (this.item(0).height * this.item(0).scaleY);
                        e = Math.max(t, i)
                    }
                    this._updateMaskScale(e, e)
                }
            },
            _updateRelationshipMatrix: function() {
                const e = this._maskBoundsRectangle
                  , t = this.calcTransformMatrix()
                  , i = fabric.util.invertTransform(t);
                this._relationshipMatrix = fabric.util.multiplyTransformMatrices(i, e.calcTransformMatrix())
            },
            _updateMaskBoundsPosition: function() {
                if (this._relationshipMatrix) {
                    const e = this._relationshipMatrix
                      , t = fabric.util.multiplyTransformMatrices(this.calcTransformMatrix(), e)
                      , i = fabric.util.qrDecompose(t);
                    this._maskBoundsRectangle.set({
                        flipX: !1,
                        flipY: !1
                    }),
                    this._maskBoundsRectangle.setPositionByOrigin({
                        x: i.translateX,
                        y: i.translateY
                    }, "center", "center"),
                    this._maskBoundsRectangle.set(i),
                    this._maskBoundsRectangle.setCoords()
                }
            },
            _correctOffset: function(e, t) {
                const i = this.calcTransformMatrix(!0)
                  , n = fabric.iMatrix
                  , o = fabric.util.multiplyTransformMatrices(i, n)
                  , r = fabric.util.invertTransform(o)
                  , a = fabric.util.transformPoint(new fabric.Point(this.left + e,this.top + t), r);
                return a
            },
            _inverseCorrectOffset: function(e, t) {
                const i = this.calcTransformMatrix(!0)
                  , n = fabric.iMatrix
                  , o = fabric.util.multiplyTransformMatrices(i, n)
                  , r = fabric.util.transformPoint(new fabric.Point(e,t), o);
                return {
                    x: r.x - this.left,
                    y: r.y - this.top
                }
            },
            _updateMaskPosition: function(e, t) {
                const i = this.item(0)
                  , n = this._correctOffset(e, t);
                this._maskBoundsRectangle._lastDistanceX = e,
                this._maskBoundsRectangle._lastDistanceY = t,
                this.hasMask ? (i.set("maskOffsetX", n.x),
                i.set("maskOffsetY", n.y),
                this._maskBoundsRectangle.set("left", this.left + e * i.scaleX),
                this._maskBoundsRectangle.set("top", this.top + t * i.scaleY)) : (i.set("left", n.x * i.scaleX),
                i.set("top", n.y * i.scaleY),
                this._maskBoundsRectangle.set("left", this.left + e * i.scaleX),
                this._maskBoundsRectangle.set("top", this.top + t * i.scaleX)),
                this._maskBoundsRectangle.setCoords()
            },
            _updateMaskAngle: function(e) {
                this.hasMask ? this.item(0).set("maskAngle", e) : this.item(0).set("angle", e),
                this._maskBoundsRectangle.set("angle", e + this.angle),
                this._maskBoundsRectangle.setCoords()
            },
            _updateMaskScale: function(e, t) {
                this.hasMask ? (this.item(0).set("maskScaleX", e),
                this.item(0).set("maskScaleY", t)) : (this._noMaskScaleX = e,
                this._noMaskScaleY = t,
                this._adjustImage());
                const i = this._getInitialBoundsRectangleSize();
                if (this._maskBoundsRectangle.set("width", i.width * e),
                this._maskBoundsRectangle.set("height", i.height * t),
                !this.hasMask) {
                    const e = this._inverseCorrectOffset(this.item(0).left / this.item(0).scaleX, this.item(0).top / this.item(0).scaleY);
                    this._updateMaskPosition(e.x, e.y)
                }
                this._maskBoundsRectangle.setCoords()
            },
            setMode: function(e) {
                const t = this.item(0);
                if (e === fabric.IMAGE_MODE_SINGLE_COLOR) {
                    this.imageMode = e;
                    const i = new fabric.Image.filters.KMeans({
                        threshold: this.threshold,
                        fgColor: this.imageColor,
                        bgColor: "rgba(0,0,0,0)"
                    });
                    t.filters[0] = i
                } else
                    e === fabric.IMAGE_MODE_FULL_COLOR ? (this.imageMode = e,
                    this.removeWhiteBackground ? t.filters[0] = new fabric.Image.filters.FloodFill({
                        replacementColor: "rgba(0, 0, 0, 0)",
                        tolerance: 200
                    }) : t.filters[0] = null) : e === fabric.IMAGE_MODE_GRADING && (this.imageMode = e,
                    t.filters[0] = new fabric.Image.filters.Grayscale);
                t.set("dirty", !0),
                this.set("dirty", !0),
                t.applyFilters()
            },
            _computeImageScaling: function() {
                let e = 1;
                return this.originalElement && 0 != this.originalElement.width && 0 != this.originalElement.height && (this.originalElement.width > this.originalElement.height ? (e = this.getWidth() / this.originalElement.width,
                this.originalElement.height * e > this.item(1).height && (e = this.getHeight() / this.originalElement.height)) : this.originalElement.height > this.originalElement.width ? (e = this.getHeight() / this.originalElement.height,
                this.originalElement.width * e > this.item(1).width && (e = this.getWidth() / this.originalElement.width)) : e = Math.min(this.getWidth() / this.originalElement.width, this.getHeight() / this.originalElement.height)),
                e
            },
            _adjustImage: function(e) {
                if (this.originalElement && 0 != this.originalElement.width && 0 != this.originalElement.height) {
                    const t = this._computeImageScaling();
                    this._noMaskOriginalImgScale = t;
                    let i = t
                      , n = t;
                    e || (i = t * this._noMaskScaleX,
                    n = t * this._noMaskScaleY),
                    this.item(0).set("scaleX", i),
                    this.item(0).set("scaleY", n),
                    this.item(0).setCoords()
                }
            },
            _adjustClippingPath: function() {
                this.enableClipPath ? (this.clipPath || this.set("clipPath", new fabric.Rect({
                    originX: "center",
                    originY: "center"
                })),
                this.clipPath.set("width", this.width),
                this.clipPath.set("height", this.height)) : this.set("clipPath", null)
            },
            _drawControl: function(e, t, i, n, o, r) {
                this._editMode || this.callSuper("_drawControl", e, t, i, n, o, r)
            },
            drawBorders: function(e, t) {
                this._editMode || this.callSuper("drawBorders", e, t)
            },
            toObject: function(e) {
                const t = ["id", "uuid", "strokeWidth", "strokeDashArray", "stroke", "centeredRotation", "skewX", "skewY", "lockSkewingX", "lockSkewingY", "lockScalingFlip", "coverMaskArea", "fullColor", "grading", "zIndex", "color", "hasStaticImage", "maskPath", "dynamicImagesPath", "dynamicImageVariation", "selectedColorPosition", "imageColor", "imageLibraryId", "colorLibraryId", "colors", "selectedColorPosition", "rotationStep", "removeWhiteBackground", "preventEditMode", "evented", "selectable", "visible", "locked", "name", "maskPath", "imageMode", "RemoveBackground", "groupId", "mapConfig", "cartoonize", "CutoutFace", "RemoveBGCOP"].concat(e)
                  , i = this.originalMaskElement ? this.originalMaskElement.src : this.maskImageSrc
                  , n = this.originalElement ? this.originalElement.src : void 0;
                return fabric.util.object.extend(this.callSuper("toObject", t), {
                    maskImageSrc: i,
                    imageSrc: n
                })
            }
        }),
        fabric.ImagePlaceholder.fromObject = function(e, t) {
            const i = e.maskImageSrc
              , n = e.imageSrc;
            e.maskImageSrc = void 0,
            e.clipPath = void 0;
            const o = function() {
                return new Promise(e=>{
                    if (newObject.maskPath || i) {
                        const t = new Image;
                        t.onload = function() {
                            newObject.setMask(t),
                            e()
                        }
                        ,
                        t.onerror = function() {
                            e()
                        }
                        ,
                        t.crossOrigin = "Anonymous",
                        t.src = i
                    } else
                        e()
                }
                )
            }
              , r = function() {
                return new Promise(e=>{
                    if (n) {
                        const t = new Image;
                        t.onload = function() {
                            newObject.setElement(t),
                            e()
                        }
                        ,
                        t.onerror = function() {
                            e()
                        }
                        ,
                        t.crossOrigin = "Anonymous",
                        t.src = n
                    } else
                        e()
                }
                )
            };
            newObject = new fabric.ImagePlaceholder(null,e),
            o().then(()=>r()).then(()=>{
                t(newObject)
            }
            )
        }
    },
    10: function(e, t) {},
    "10a3": function(e, t, i) {
        "use strict";
        i.d(t, "a", (function() {
            return r
        }
        )),
        i.d(t, "b", (function() {
            return a
        }
        ));
        var n = i("9bed")
          , o = i("777b");
        const r = async(e,t)=>{
            if ("printify" === e.podService && e.printProviderId) {
                const i = await Object(n["c"])(Number(e.productId), Number(e.printProviderId), t, !0)
                  , o = i.variants.find(t=>t.id === Number(e.variantId));
                if (o) {
                    const t = o.placeholders.find(t=>t.position === e.placeholderId);
                    if (t)
                        return {
                            width: Number(t.width),
                            height: Number(t.height)
                        }
                }
            }
            return null
        }
          , a = async(e,t)=>{
            if ("printify" === e.podService) {
                const i = await Object(n["a"])(Number(e.productId), t);
                return i
            }
            if ("printful" === e.podService) {
                const i = await Object(o["b"])(e.productId, t);
                return i
            }
            return null
        }
    },
    "10e3": function(e, t, i) {},
    11: function(e, t) {},
    "113e": function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i, n, o, r) {
                e.showHeader = !1,
                t.email = "",
                t.sendResetEmail = function() {
                    o.start(),
                    n.sendPasswordResetEmail(t.email).then(()=>{
                        o.stop(),
                        r.show(r.alert().parent(document.body).clickOutsideToClose(!0).title("Password reset").textContent("A link for password reset was sent to your email").ok("OK!")).finally(()=>{
                            i.path("/signin")
                        }
                        )
                    }
                    ).catch(e=>{
                        o.stop(),
                        r.show(r.alert().parent(document.body).clickOutsideToClose(!0).title("User creation").textContent(e.data.Message).ok("OK!"))
                    }
                    )
                }
            }
            e.$inject = ["$rootScope", "$scope", "$location", "UsersAPIService", "blockUI", "$mdDialog"],
            angular.module("app.ctrls").controller("ForgotPasswordCtrl", e)
        }
        )()
    },
    "11f6": function(e, t, i) {
        e.exports = i.p + "img/store.268c1a66.svg?x-request=html"
    },
    12: function(e, t) {},
    1255: function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i, n, o) {
                e.color_variants = i || "",
                e.color_name = "Color",
                e.title = n ? "Add Variants" : "Add Variants and Description",
                e.forMyProductBases = n,
                e.description = "",
                e.childTemplateProduct = o.getChildTemplateProduct(),
                e.isChildTemplateProduct = e.childTemplateProduct && e.childTemplateProduct.parentId,
                e.onSubmit = function() {
                    e.getChildTemplateProductData(!0, e.childTemplateProduct.forChildTemplateProductCreation),
                    t.hide(e.gettingFormData())
                }
                ,
                e.saveAndAddChildTemplateProduct = function() {
                    e.getChildTemplateProductData(!1, !0),
                    t.hide(e.gettingFormData())
                }
                ,
                e.gettingFormData = function() {
                    let t = []
                      , i = {};
                    return e.color_name && e.color_variants && t.push({
                        name: e.color_name,
                        value: e.color_variants
                    }),
                    e.custom_variant_name && e.custom_variant_value && t.push({
                        name: e.custom_variant_name,
                        value: e.custom_variant_value
                    }),
                    e.custom_description && (i["description"] = e.custom_description),
                    i["variants"] = t,
                    i
                }
                ,
                e.getChildTemplateProductData = function(t, i) {
                    if (e.isChildTemplateProduct || i) {
                        var n, r, a;
                        const {width: s, height: l, unit: c} = e.childTemplateProduct.currentTemplate.dimension
                          , d = `${s} x ${l} ${c}`;
                        console.log(d);
                        const u = "Size";
                        o.setChildTemplateProduct({
                            ...e.childTemplateProduct,
                            oldPrintVariantName: null !== (n = e.childTemplateProduct.newPrintVariantName) && void 0 !== n ? n : u,
                            newPrintVariantName: null !== (r = e.childTemplateProduct.newPrintVariantName) && void 0 !== r ? r : u,
                            currentTemplate: {
                                ...e.childTemplateProduct.currentTemplate,
                                oldVariant: d,
                                newVariant: null !== (a = e.childTemplateProduct.currentTemplate.newVariant) && void 0 !== a ? a : d
                            },
                            forChildTemplateProductCreation: i,
                            isCompleted: t
                        })
                    }
                }
            }
            e.$inject = ["$scope", "$mdDialog", "initialColorVariants", "forMyProductBases", "ProductService"],
            angular.module("app.ctrls").controller("TemplateProductVariantsModalCtrl", e)
        }
        )()
    },
    13: function(e, t) {},
    "132b": function(e, t) {
        var i = '<md-dialog> <form novalidate name="libraryForm" ng-submit="libraryForm.$valid && createLibrary()"> <md-toolbar> <div class="md-toolbar-tools"> <h2>Creating {{ libraryTypeString }} library</h2> <span flex></span> </div> </md-toolbar> <md-dialog-content style="max-width:800px;max-height:810px"> <md-content class="md-padding"> <div class="row" style="margin-right:15px;margin-left:15px"> <md-input-container class="md-block"> <label>Library Name</label> <input required name="name" ng-model="libraryName"/> <div ng-messages="libraryForm.name.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">Please enter a name!</div> </div> </md-input-container> <div class="clearfix"></div> <md-input-container class="md-block" ng-show="libraryTypeString.toLowerCase() === \'color\'"> <label>Color Mode</label> <md-select ng-model="colorMode"> <md-option ng-value="\'rgb\'"> RGB </md-option> <md-option ng-value="\'cmyk\'"> CMYK </md-option> </md-select> </md-input-container> </div> </md-content> </md-dialog-content> <md-dialog-actions layout="row"> <md-button type="submit" name="submit"> Create </md-button> <md-button ng-click="cancel()"> Cancel </md-button> </md-dialog-actions> </form> </md-dialog> ';
        e.exports = i
    },
    "13c1": function(e, t, i) {
        "use strict";
        i.d(t, "g", (function() {
            return o
        }
        )),
        i.d(t, "e", (function() {
            return r
        }
        )),
        i.d(t, "d", (function() {
            return a
        }
        )),
        i.d(t, "c", (function() {
            return s
        }
        )),
        i.d(t, "a", (function() {
            return l
        }
        )),
        i.d(t, "b", (function() {
            return c
        }
        )),
        i.d(t, "f", (function() {
            return d
        }
        ));
        var n = i("406d");
        const o = async(e,t)=>{
            const i = t ? "/TemplateProducts/" + t : "/TemplateProducts"
              , o = await n["a"].put(i, e);
            return o.data
        }
          , r = async(e,t,i,o,r)=>{
            const a = await n["a"].get("/TemplateProducts/ListMyProductBases", {
                params: {
                    from: e,
                    count: t,
                    sortBy: o,
                    sortMode: r,
                    search: null === i || void 0 === i ? void 0 : i.toLocaleLowerCase()
                }
            });
            return a.data
        }
          , a = async e=>{
            const t = await n["a"].get("/TemplateProducts/" + e);
            return t.data
        }
          , s = async e=>{
            const t = await n["a"].get("/TemplateProducts/" + e);
            return t.data
        }
          , l = async e=>{
            const t = await n["a"].post(`/TemplateProducts/${e}/Clone`);
            return t.data
        }
          , c = async e=>{
            const t = await n["a"].delete("/TemplateProducts/" + e);
            return t.data
        }
          , d = (e,t)=>n["a"].put("/TemplateProducts/Rename/" + e, null, {
            params: {
                name: t
            }
        })
    },
    "13c7": function(e, t, i) {
        "use strict";
        i.r(t),
        i.d(t, "isSpaceChar", (function() {
            return o
        }
        )),
        i.d(t, "splitWords", (function() {
            return r
        }
        )),
        i.d(t, "drawPaths", (function() {
            return a
        }
        )),
        i.d(t, "computeStroke", (function() {
            return s
        }
        )),
        i.d(t, "reverseText", (function() {
            return l
        }
        ));
        const n = i("e546")
          , o = function(e) {
            return ["\r", "\n", "\t", "\f", "\v", " "].indexOf(e) > -1
        }
          , r = function(e) {
            const t = [];
            let i = "";
            if (!e)
                return [""];
            for (const n of e)
                o(n) ? (i && t.push(i),
                t.push(n),
                i = "") : i += n;
            return i && t.push(i),
            t
        }
          , a = function(e, t, i, n) {
            if (n || i) {
                t.beginPath();
                for (var o = 0; o < e.length; ++o)
                    for (var r = e[o], a = r.offsetX, s = r.offsetY, l = 0; l < r.commands.length; l += 1) {
                        var c = r.commands[l];
                        "M" === c.type ? t.moveTo(c.x + a, c.y + s) : "L" === c.type ? t.lineTo(c.x + a, c.y + s) : "C" === c.type ? t.bezierCurveTo(c.x1 + a, c.y1 + s, c.x2 + a, c.y2 + s, c.x + a, c.y + s) : "Q" === c.type ? t.quadraticCurveTo(c.x1 + a, c.y1 + s, c.x + a, c.y + s) : "Z" === c.type && t.closePath()
                    }
                t.closePath(),
                t.lineWidth && i && t.stroke(),
                t.fillStyle && n && (t.fill(),
                t._fillPattern && (t.save(),
                t.fillStyle = t._fillPattern,
                t.transform(t._fillPatternImage.scaleX || 1, 0, 0, t._fillPatternImage.scaleY || 1, -t._fillPatternImage.source.width / 2, -t._fillPatternImage.source.height / 2),
                t.fill(),
                t.restore()))
            }
        }
          , s = function(e, t, i, n, o, r, s, l, c) {
            var d = "#000000"
              , u = "#ff0000"
              , p = t.getPath(e, 0, 0, i, {
                kerning: r,
                tracking: s,
                features: {
                    liga: l,
                    rlig: l
                }
            })
              , h = p.getBoundingBox();
            n.width = h.x2 - h.x1 + 3 * o + 2,
            n.height = h.y2 - h.y1 + 3 * o + 2;
            var m = n.getContext("2d");
            m.lineJoin = "round",
            m.clearRect(0, 0, n.width, n.height),
            m.save(),
            m.fillStyle = d,
            m.strokeStyle = o > 0 ? u : null,
            m.lineWidth = o,
            p.offsetX = 2 * o,
            "right" === c && (p.offsetX = 0),
            p.offsetY = n.height - o,
            a([p], m, !0, !0);
            var g = m.getImageData(0, 0, n.width, n.height)
              , f = g.data
              , v = -1
              , b = -1
              , y = fabric.Color.sourceFromHex(d)
              , w = 0;
            if ("left" === c)
                for (var C = 0; C < n.width; ++C)
                    for (var x = 0; x < n.height; ++x) {
                        var S = x * (4 * n.width) + 4 * C
                          , P = f[S]
                          , k = f[S + 1]
                          , _ = f[S + 2]
                          , A = f[S + 3];
                        if (0 === P && 0 === k && 0 === _ && 0 === A)
                            ;
                        else {
                            if (0 !== A && P === y[0] && k === y[1] && _ === y[2]) {
                                b = C,
                                w = -1 === v ? 0 : b - v + 1,
                                C = n.width;
                                break
                            }
                            -1 === v && (v = C)
                        }
                    }
            else
                for (C = n.width - 1; C >= 0; --C)
                    for (x = 0; x < n.height; ++x) {
                        S = x * (4 * n.width) + 4 * C,
                        P = f[S],
                        k = f[S + 1],
                        _ = f[S + 2],
                        A = f[S + 3];
                        if (0 === P && 0 === k && 0 === _ && 0 === A)
                            ;
                        else {
                            if (0 !== A && P === y[0] && k === y[1] && _ === y[2]) {
                                b = C,
                                w = -1 === v ? 0 : v - b + 1,
                                C = -1;
                                break
                            }
                            -1 === v && (v = C)
                        }
                    }
            return w
        }
          , l = function(e) {
            if (e.indexOf("\n") > -1) {
                const t = e.split("\n");
                let i = "";
                return t.forEach((function(e) {
                    i += n.reverse(e) + "\n"
                }
                )),
                i.slice(0, -1)
            }
            return n.reverse(e)
        }
    },
    14: function(e, t) {},
    1424: function(e, t, i) {
        "use strict";
        i.d(t, "d", (function() {
            return o
        }
        )),
        i.d(t, "e", (function() {
            return r
        }
        )),
        i.d(t, "h", (function() {
            return a
        }
        )),
        i.d(t, "n", (function() {
            return s
        }
        )),
        i.d(t, "o", (function() {
            return l
        }
        )),
        i.d(t, "j", (function() {
            return d
        }
        )),
        i.d(t, "m", (function() {
            return p
        }
        )),
        i.d(t, "l", (function() {
            return h
        }
        )),
        i.d(t, "k", (function() {
            return m
        }
        )),
        i.d(t, "i", (function() {
            return g
        }
        )),
        i.d(t, "c", (function() {
            return f
        }
        )),
        i.d(t, "a", (function() {
            return v
        }
        )),
        i.d(t, "b", (function() {
            return b
        }
        )),
        i.d(t, "g", (function() {
            return y
        }
        )),
        i.d(t, "f", (function() {
            return w
        }
        ));
        var n = i("c46f");
        const o = e=>{
            e.eventContainer && $("#" + e.eventContainer).focus()
        }
          , r = e=>{
            if (e && e.type) {
                if ("bounded-text" === e.type)
                    return "Text " + e.id;
                if ("path-itext" === e.type)
                    return "Curved Text " + e.id;
                if ("image" === e.type || "image-placeholder" === e.type)
                    return e.mapConfig ? "Map " + e.id : e.dynamicImagesPath ? "Image Selection " + e.id : "Image Upload " + e.id;
                if ("vector-placeholder" === e.type)
                    return e.allowUserUpload ? "Vector Upload " + e.id : "Vector Selection " + e.id
            }
            return ""
        }
          , a = (e,t,i=!1)=>{
            if (e && e.length)
                if (1 === e.length)
                    (!e[0].locked && !e[0].lockedByGroup || i) && t.setActiveObject(e[0]);
                else {
                    t.discardActiveObject();
                    const n = i ? e : e.filter(e=>!e.locked)
                      , o = new window.fabric.ActiveSelection(n,{
                        canvas: t
                    });
                    o.set("lockUniScaling", !0),
                    t.setActiveObject(o)
                }
            else
                t.discardActiveObject();
            o(t),
            t.renderAll()
        }
          , s = e=>{
            const t = e.getActiveObject();
            if (t) {
                if ("activeSelection" === t.type) {
                    const i = t.getObjects();
                    e.discardActiveObject();
                    const n = new window.fabric.ActiveSelection(i.filter(e=>!e.locked),{
                        canvas: e
                    });
                    n.set("lockUniScaling", !0),
                    e.setActiveObject(n)
                } else
                    t.locked && e.discardActiveObject();
                e.renderAll()
            }
        }
          , l = (e,t)=>{
            let i = []
              , o = [];
            i = e instanceof Array ? e : e._objects,
            t ? o = t : e instanceof Array || (o = e.getElementsGroups());
            let r = [...o, ...i.filter(e=>!e.groupId)];
            r = n["default"].sortBy(r, e=>e instanceof window.fabric.Object && !e.groupId && e.isOverlay ? 2e32 : e.zIndex || 0);
            for (let a = 0; a < r.length; ++a) {
                const e = r[a];
                if (!(e instanceof window.fabric.Object)) {
                    const t = n["default"].sortBy(i.filter(t=>t.groupId === e.id), e=>e.zIndex || 0);
                    r.splice(a, 0, ...t),
                    a += t.length
                }
            }
            return r.forEach((t,i)=>{
                const n = t.zIndex || 0;
                t.zIndex = i,
                n === i || e instanceof Array || e.fire("object:modified", {
                    target: t
                })
            }
            ),
            i = r.filter(e=>e instanceof window.fabric.Object),
            e instanceof Array || (e._objects = i,
            e.requestRenderAll()),
            i
        }
          , c = (e,t,i)=>{
            e && (e.set("locked", i),
            t.fire("object:modified", {
                target: e
            }),
            t.renderAll())
        }
          , d = (e,t)=>{
            e && (t.getActiveObject() === e && t.discardActiveObject(),
            c(e, t, !e.locked))
        }
          , u = (e,t,i)=>{
            e && (e.set("visible", i),
            t.fire("object:modified", {
                target: e
            }),
            t.renderAll())
        }
          , p = (e,t)=>{
            e && (t.getActiveObject() === e && t.discardActiveObject(),
            u(e, t, !e.visible))
        }
          , h = (e,t)=>{
            e && (t.getActiveObject() === e && t.discardActiveObject(),
            e.set("isPrintArea", !e.isPrintArea),
            e.setEditedProp("isPrintArea"),
            t.fire("object:modified", {
                target: e
            }),
            e.isPrintArea && t.getObjects().filter(t=>t !== e).forEach(e=>{
                e.isPrintArea && (e.set("isPrintArea", !1),
                e.setEditedProp("isPrintArea"),
                t.fire("object:modified", {
                    target: e
                }))
            }
            ),
            t.renderAll())
        }
          , m = (e,t)=>{
            e && (t.getActiveObject() === e && t.discardActiveObject(),
            e.set("isOverlay", !e.isOverlay),
            e.setEditedProp("isOverlay"),
            e.isOverlay && (t.getObjects().filter(t=>t !== e).forEach(e=>{
                e.isOverlay && (e.set("isOverlay", !1),
                e.setEditedProp("isOverlay"),
                t.fire("object:modified", {
                    target: e
                }))
            }
            ),
            e.zIndex = 2e32,
            l(t)),
            t.fire("object:modified", {
                target: e
            }),
            t.renderAll())
        }
          , g = (e,t)=>{
            if (e) {
                t.getActiveObject() === e && t.discardActiveObject();
                const i = "image-placeholder" === e.type && e.dynamicImagesPath;
                if (i) {
                    const i = e;
                    return i.set("isColorOptions", !i.isColorOptions),
                    i.setEditedProp("isColorOptions"),
                    t.fire("object:modified", {
                        target: i
                    }),
                    i.isColorOptions && t.getObjects().filter(e=>e !== i).forEach(e=>{
                        "image-placeholder" === e.type && e.dynamicImagesPath && e.isColorOptions && (e.set("isColorOptions", !1),
                        e.setEditedProp("isColorOptions"),
                        t.fire("object:modified", {
                            target: e
                        }))
                    }
                    ),
                    t.renderAll(),
                    i.isColorOptions
                }
            }
            return !1
        }
          , f = e=>{
            "path-itext" === e.type ? e.set("pathWidth", 0) : "bounded-text" === e.type ? e.setStrokeWidth(0) : e.set("strokeWidth", 0)
        }
          , v = e=>!!e.length && e.every(e=>!e.groupId)
          , b = e=>!!e.length && e.some(e=>e.groupId)
          , y = (e,t,i=e.getObjects())=>{
            const n = new Set(t)
              , o = [];
            for (const r of n)
                if (!i.some(e=>e.groupId === r)) {
                    const t = e.removeGroup(r);
                    o.push(t)
                }
            return o
        }
          , w = (e,t)=>{
            const i = e.getObjects()
              , n = i.filter(e=>t.some(t=>t.uuid == e.uuid))
              , o = [];
            e.discardActiveObject();
            for (const r of n)
                r.groupId && o.push(r.groupId),
                e.remove(r);
            y(e, o, i)
        }
    },
    "149d": function(e, t, i) {
        "use strict";
        i("00dd")
    },
    15: function(e, t) {},
    16: function(e, t) {},
    17: function(e, t) {},
    18: function(e, t) {},
    1898: function(e, t, i) {
        "use strict";
        i("4118")
    },
    19: function(e, t) {},
    "199f": function(e, t, i) {
        "use strict";
        i.r(t),
        function(e) {
            var t = i("afd9")
              , n = i("ec26");
            (function() {
                function i(i, o, r) {
                    function a(e, t, i) {
                        var n = function(t, o, r, a) {
                            if (a) {
                                for (var s = t; s < t + o && s < r.length; ++s)
                                    r[s].set("text", e);
                                i.renderAll(),
                                t += o
                            }
                            t < r.length && (a = !a,
                            requestAnimationFrame(()=>n(t, o, r, a)))
                        };
                        requestAnimationFrame(()=>n(0, 5, t, !1))
                    }
                    const s = e.debounce(a, 500);
                    function l(e, t, i) {
                        t.set("text", e),
                        i.renderAll();
                        const n = i.getObjects().filter((function(e) {
                            if (e.get("id") === t.id && e !== t)
                                return e
                        }
                        ));
                        n.length > 40 ? s(e, n, i) : a(e, n, i)
                    }
                    function c(e) {
                        const {canvasWidth: t, canvasHeight: o, strokeDashArray: a, fontsMap: s, fontColorsMap: l, id: c, zIndex: d, Itext: u} = e;
                        return new fabric.BoundedText({
                            width: .3 * t,
                            height: .3 * o,
                            originX: "center",
                            originY: "center",
                            left: t / 2,
                            top: o / 2,
                            strokeDashArray: a,
                            centeredRotation: !0,
                            lockScalingFlip: !0,
                            minSizePx: fabric.util.parseUnit("15pt"),
                            maxSizePx: fabric.util.parseUnit("50pt"),
                            multiline: !1,
                            caps: !1,
                            fontPath: r.getDefaultFont().Path,
                            fontName: r.getDefaultFont().Name + "_" + r.getDefaultFont().Style,
                            fontOption: 1,
                            color: l.get(1),
                            outlineColor: i.createColorObj({
                                hex: "#000000",
                                cmyk: "0,0,0,1"
                            }),
                            id: c,
                            uuid: Object(n["a"])(),
                            zIndex: d,
                            fontsMap: s,
                            fontColorsMap: l,
                            Itext: u,
                            prefix: "",
                            suffix: "",
                            ligatures: !0,
                            referenceId: null,
                            isOverlay: !1,
                            isPrintArea: !1
                        })
                    }
                    function d(e) {
                        const {canvasWidth: t, canvasHeight: i, fontsMap: o, fontColorsMap: a, id: s, zIndex: l, pathWidth: c} = e;
                        return new fabric.PathIText("A",{
                            pathWidth: c,
                            width: .2 * t,
                            height: .2 * t,
                            originX: "center",
                            originY: "center",
                            left: t / 2,
                            top: i / 2,
                            centeredRotation: !0,
                            lockSkewingX: !0,
                            lockSkewingY: !0,
                            lockScalingFlip: !0,
                            verticalDiameter: .3 * t,
                            horizontalDiameter: .3 * t,
                            fill: "#000000",
                            color: a.get(1),
                            fontPath: r.getDefaultFont().Path,
                            fontName: r.getDefaultFont().Name + "_" + r.getDefaultFont().Style,
                            fontFamily: r.getDefaultFont().Name + "_" + r.getDefaultFont().Style,
                            fontSize: fabric.util.parseUnit("10pt"),
                            fontOption: 1,
                            id: s,
                            uuid: Object(n["a"])(),
                            fontsMap: o,
                            fontColorsMap: a,
                            zIndex: l,
                            prefix: "",
                            suffix: "",
                            referenceId: null,
                            isOverlay: !1,
                            isPrintArea: !1
                        })
                    }
                    function u(e, n) {
                        e.textSelected && (e.selectedTextProperties.text = e.textSelected.getText(),
                        e.selectedTextProperties.centerX = Object(t["c"])(e.textSelected.left, e.DPI),
                        e.selectedTextProperties.centerY = Object(t["c"])(e.textSelected.top, e.DPI),
                        e.selectedTextProperties.rotation = e.textSelected.angle,
                        e.selectedTextProperties.width = Object(t["c"])(e.textSelected.getWidth(), e.DPI),
                        e.selectedTextProperties.height = Object(t["c"])(e.textSelected.getHeight(), e.DPI),
                        e.selectedTextProperties.minSizePx = fabric.util.pxToPt(e.textSelected.minSizePx),
                        e.selectedTextProperties.maxSizePx = fabric.util.pxToPt(e.textSelected.maxSizePx),
                        e.selectedTextProperties.multiline = e.textSelected.multiline,
                        e.selectedTextProperties.caps = e.textSelected.caps,
                        e.selectedTextProperties.fontPath = e.textSelected.fontPath,
                        e.selectedTextProperties.id = e.textSelected.id,
                        e.selectedTextProperties.skewX = e.textSelected.skewX,
                        e.selectedTextProperties.skewY = e.textSelected.skewY,
                        e.selectedTextProperties.currentFontSize = fabric.util.pxToPt(e.textSelected.getFontSize()),
                        e.selectedTextProperties.textAlign = e.textSelected.getTextAlign(),
                        e.selectedTextProperties.outlineWidth = e.textSelected.getOutlineWidth(),
                        e.selectedTextProperties.fontOption = e.textSelected.fontOption || 1,
                        e.selectedTextProperties.fontColorOption = e.textSelected.fontColorOption || 1,
                        e.selectedTextProperties.Itext = e.textSelected.Itext,
                        e.selectedTextProperties.editedSize = e.textSelected.editedSize,
                        e.selectedTextProperties.tracking = e.textSelected.getTrackingAmount(),
                        e.selectedTextProperties.lineSpacing = 100 * e.textSelected.lineSpacing,
                        e.selectedTextProperties.locked = e.textSelected.locked,
                        e.selectedTextProperties.prefix = e.textSelected.prefix,
                        e.selectedTextProperties.suffix = e.textSelected.suffix,
                        e.selectedTextProperties.referenceId = e.textSelected.referenceId,
                        i.changeFontColorOption(e.textFillColorPicker, e.textSelected, e.selectedTextProperties.fontColorOption, n),
                        e.textOutlineColorPicker.setColor(e.textSelected.outlineColor),
                        e.textOutlineColorPicker.enable(),
                        e.textSelected.Itext && e.textOutlineColorPicker.disable())
                    }
                    function p(e, n) {
                        e.textSelected && (e.selectedTextProperties.text = e.textSelected.text,
                        e.selectedTextProperties.centerX = Object(t["c"])(e.textSelected.left, e.DPI),
                        e.selectedTextProperties.centerY = Object(t["c"])(e.textSelected.top, e.DPI),
                        e.selectedTextProperties.rotation = e.textSelected.angle,
                        e.selectedTextProperties.verticalDiameter = Object(t["c"])(e.textSelected.verticalDiameter, e.DPI),
                        e.selectedTextProperties.horizontalDiameter = Object(t["c"])(e.textSelected.horizontalDiameter, e.DPI),
                        e.selectedTextProperties.startAngle = e.textSelected.startAngle,
                        e.selectedTextProperties.endAngle = e.textSelected.endAngle,
                        e.selectedTextProperties.caps = e.textSelected.caps,
                        e.selectedTextProperties.fontPath = e.textSelected.fontPath,
                        e.selectedTextProperties.id = e.textSelected.id,
                        e.selectedTextProperties.fontSize = fabric.util.pxToPt(e.textSelected.fontSize),
                        e.selectedTextProperties.textAlign = e.textSelected.textAlign,
                        e.selectedTextProperties.outlineWidth = e.textSelected.strokeWidth,
                        e.selectedTextProperties.textSide = e.textSelected.convex ? "convex" : "concave",
                        e.selectedTextProperties.fontOption = e.textSelected.fontOption || 1,
                        e.selectedTextProperties.fontColorOption = e.textSelected.fontColorOption || 1,
                        e.selectedTextProperties.locked = e.textSelected.locked,
                        e.selectedTextProperties.prefix = e.textSelected.prefix,
                        e.selectedTextProperties.suffix = e.textSelected.suffix,
                        e.selectedTextProperties.referenceId = e.textSelected.referenceId,
                        i.changeFontColorOption(e.textCircularFillColorPicker, e.textSelected, e.selectedTextProperties.fontColorOption, n))
                    }
                    function h(e, t, n, r=!1) {
                        if (e.textSelected.setOutlineColor(o.colorToWeb(n)),
                        r) {
                            const t = i.createColorObj({
                                alpha: n.alpha,
                                hex: "#" + n.HEX,
                                cmyk: n.cmyk.c + "," + n.cmyk.m + "," + n.cmyk.y + "," + n.cmyk.k
                            });
                            e.textSelected.outlineColor = t
                        }
                        t.renderAll()
                    }
                    function m(e, t, n, r=!1) {
                        e.textSelected.setColor(o.colorToWeb(n)),
                        t.renderAll(),
                        r && i.saveFontColorToOption(n, t.getActiveObject(), e.editMode)
                    }
                    function g(e, t, n, r=!1) {
                        e.textSelected.set("fill", o.colorToWeb(n)),
                        t.renderAll(),
                        r && i.saveFontColorToOption(n, t.getActiveObject(), e.editMode)
                    }
                    return {
                        updateTexts: l,
                        loadTextData: u,
                        loadCircularTextData: p,
                        textCircularColorFill: g,
                        textFillColor: m,
                        textOutlineColor: h,
                        generateBoundedText: c,
                        generatePathIText: d
                    }
                }
                i.$inject = ["MultipleFontService", "ElementsColorService", "FontManagerService"],
                angular.module("app.shared.services").factory("TextService", i)
            }
            )()
        }
        .call(this, i("c46f"))
    },
    "19d3": function(e, t, i) {
        "use strict";
        i("7b5f")
    },
    "1b3c": function(e, t, i) {
        e.exports = i.p + "img/text.928250d0.svg?x-request=html"
    },
    "1b4e": function(e, t, i) {},
    "1bef": function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i, n, o, r, a, s, l, c) {
                e.element = c,
                e.fontOption = s,
                e.categoryId = n.search().categoryId,
                e.errorMessage = "",
                e.fonts = r.getLoadedFonts(),
                e.fonts.length && (e.currentFontPath = e.fonts.find((function(e) {
                    return "arial" === e.Name.toLowerCase()
                }
                )).Path),
                null != c && (e.fontOption = c.position,
                e.currentFontPath = c.Path),
                e.create = function() {
                    null === c ? (a.start("Saving font"),
                    o.addElement(l.LibraryId, e.fontOption, {
                        path: e.currentFontPath,
                        LibraryCategoryId: e.categoryId
                    }, "font").then((function() {
                        a.stop(),
                        t.hide()
                    }
                    )).catch((function(t) {
                        a.stop(),
                        409 === t.status && (e.errorMessage = "There's already an element at position " + e.fontOption)
                    }
                    ))) : (c.path = e.currentFontPath,
                    c.LibraryCategoryId = e.categoryId,
                    a.start("Updating font"),
                    o.updateElement(l.LibraryId, c.FontId, c, "font").then((function() {
                        a.stop(),
                        t.hide()
                    }
                    )).catch((function(t) {
                        a.stop(),
                        e.errorMessage = "Error updating font!"
                    }
                    )))
                }
                ,
                e.uploadFont = function(n) {
                    const o = n.target.files;
                    o && o[0] && (e.uploadingFont = !0,
                    e.fontUploadPercent = 0,
                    a.start("Uploading font"),
                    r.uploadFont(o[0], (function(t) {
                        e.fontUploadPercent = t
                    }
                    )).then((function() {
                        e.uploadingFont = !1,
                        r.getAllFonts().then((function(t) {
                            e.fonts = t,
                            a.stop(),
                            i(()=>e.$apply())
                        }
                        )).catch((function(t) {
                            a.stop(),
                            i(()=>e.$apply())
                        }
                        ))
                    }
                    )).catch((function(n) {
                        a.stop(),
                        t.show(t.alert().parent(document.body).clickOutsideToClose(!0).multiple(!0).title("Invalid Font!").textContent(n).ok("OK!")),
                        i(()=>e.$apply()),
                        e.uploadingFont = !1
                    }
                    )))
                }
                ,
                e.deleteFont = function(t) {
                    var n = e.currentFontPath;
                    r.deleteFont(t).then((function(t) {
                        t && r.getAllFonts().then((function(t) {
                            e.fonts = t,
                            a.stop(),
                            i(()=>e.$apply())
                        }
                        )).catch((function(t) {
                            a.stop(),
                            i(()=>e.$apply())
                        }
                        )),
                        e.currentFontPath = n
                    }
                    ))
                }
                ,
                e.cancel = function() {
                    t.cancel()
                }
            }
            e.$inject = ["$scope", "$mdDialog", "$timeout", "$location", "LibrariesAPIService", "FontManagerService", "blockUI", "initialPosition", "library", "element"],
            angular.module("app.ctrls").controller("FontDialogCtrl", e)
        }
        )()
    },
    "1d2a": function(e, t, i) {
        "use strict";
        i("f15f")
    },
    "1d61": function(e, t, i) {
        "use strict";
        i.d(t, "a", (function() {
            return o
        }
        ));
        var n = i("3af5");
        const o = async e=>{
            const t = await n["a"].get("settings/private", {
                params: {
                    shop: e
                }
            });
            return t.data
        }
    },
    "1dac": function(e, t, i) {
        (function(e) {
            (function() {
                var t, i, n, o, r, a, s, l, c = [].slice, d = {}.hasOwnProperty, u = function(e, t) {
                    for (var i in t)
                        d.call(t, i) && (e[i] = t[i]);
                    function n() {
                        this.constructor = e
                    }
                    return n.prototype = t.prototype,
                    e.prototype = new n,
                    e.__super__ = t.prototype,
                    e
                };
                s = function() {}
                ,
                i = function() {
                    function e() {}
                    return e.prototype.addEventListener = e.prototype.on,
                    e.prototype.on = function(e, t) {
                        return this._callbacks = this._callbacks || {},
                        this._callbacks[e] || (this._callbacks[e] = []),
                        this._callbacks[e].push(t),
                        this
                    }
                    ,
                    e.prototype.emit = function() {
                        var e, t, i, n, o, r;
                        if (n = arguments[0],
                        e = 2 <= arguments.length ? c.call(arguments, 1) : [],
                        this._callbacks = this._callbacks || {},
                        i = this._callbacks[n],
                        i)
                            for (o = 0,
                            r = i.length; o < r; o++)
                                t = i[o],
                                t.apply(this, e);
                        return this
                    }
                    ,
                    e.prototype.removeListener = e.prototype.off,
                    e.prototype.removeAllListeners = e.prototype.off,
                    e.prototype.removeEventListener = e.prototype.off,
                    e.prototype.off = function(e, t) {
                        var i, n, o, r, a;
                        if (!this._callbacks || 0 === arguments.length)
                            return this._callbacks = {},
                            this;
                        if (n = this._callbacks[e],
                        !n)
                            return this;
                        if (1 === arguments.length)
                            return delete this._callbacks[e],
                            this;
                        for (o = r = 0,
                        a = n.length; r < a; o = ++r)
                            if (i = n[o],
                            i === t) {
                                n.splice(o, 1);
                                break
                            }
                        return this
                    }
                    ,
                    e
                }(),
                t = function(e) {
                    var t, n;
                    function o(e, i) {
                        var n, r, a;
                        if (this.element = e,
                        this.version = o.version,
                        this.defaultOptions.previewTemplate = this.defaultOptions.previewTemplate.replace(/\n*/g, ""),
                        this.clickableElements = [],
                        this.listeners = [],
                        this.files = [],
                        "string" === typeof this.element && (this.element = document.querySelector(this.element)),
                        !this.element || null == this.element.nodeType)
                            throw new Error("Invalid dropzone element.");
                        if (this.element.dropzone)
                            throw new Error("Dropzone already attached.");
                        if (o.instances.push(this),
                        this.element.dropzone = this,
                        n = null != (a = o.optionsForElement(this.element)) ? a : {},
                        this.options = t({}, this.defaultOptions, n, null != i ? i : {}),
                        this.options.forceFallback || !o.isBrowserSupported())
                            return this.options.fallback.call(this);
                        if (null == this.options.url && (this.options.url = this.element.getAttribute("action")),
                        !this.options.url)
                            throw new Error("No URL provided.");
                        if (this.options.acceptedFiles && this.options.acceptedMimeTypes)
                            throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");
                        this.options.acceptedMimeTypes && (this.options.acceptedFiles = this.options.acceptedMimeTypes,
                        delete this.options.acceptedMimeTypes),
                        this.options.method = this.options.method.toUpperCase(),
                        (r = this.getExistingFallback()) && r.parentNode && r.parentNode.removeChild(r),
                        !1 !== this.options.previewsContainer && (this.options.previewsContainer ? this.previewsContainer = o.getElement(this.options.previewsContainer, "previewsContainer") : this.previewsContainer = this.element),
                        this.options.clickable && (!0 === this.options.clickable ? this.clickableElements = [this.element] : this.clickableElements = o.getElements(this.options.clickable, "clickable")),
                        this.init()
                    }
                    return u(o, e),
                    o.prototype.Emitter = i,
                    o.prototype.events = ["drop", "dragstart", "dragend", "dragenter", "dragover", "dragleave", "addedfile", "addedfiles", "removedfile", "thumbnail", "error", "errormultiple", "processing", "processingmultiple", "uploadprogress", "totaluploadprogress", "sending", "sendingmultiple", "success", "successmultiple", "canceled", "canceledmultiple", "complete", "completemultiple", "reset", "maxfilesexceeded", "maxfilesreached", "queuecomplete"],
                    o.prototype.defaultOptions = {
                        url: null,
                        method: "post",
                        withCredentials: !1,
                        parallelUploads: 2,
                        uploadMultiple: !1,
                        maxFilesize: 256,
                        paramName: "file",
                        createImageThumbnails: !0,
                        maxThumbnailFilesize: 10,
                        thumbnailWidth: 120,
                        thumbnailHeight: 120,
                        filesizeBase: 1e3,
                        maxFiles: null,
                        params: {},
                        clickable: !0,
                        ignoreHiddenFiles: !0,
                        acceptedFiles: null,
                        acceptedMimeTypes: null,
                        autoProcessQueue: !0,
                        autoQueue: !0,
                        addRemoveLinks: !1,
                        previewsContainer: null,
                        hiddenInputContainer: "body",
                        capture: null,
                        renameFilename: null,
                        dictDefaultMessage: "Drop files here to upload",
                        dictFallbackMessage: "Your browser does not support drag'n'drop file uploads.",
                        dictFallbackText: "Please use the fallback form below to upload your files like in the olden days.",
                        dictFileTooBig: "File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",
                        dictInvalidFileType: "You can't upload files of this type.",
                        dictResponseError: "Server responded with {{statusCode}} code.",
                        dictCancelUpload: "Cancel upload",
                        dictCancelUploadConfirmation: "Are you sure you want to cancel this upload?",
                        dictRemoveFile: "Remove file",
                        dictRemoveFileConfirmation: null,
                        dictMaxFilesExceeded: "You can not upload any more files.",
                        accept: function(e, t) {
                            return t()
                        },
                        init: function() {
                            return s
                        },
                        forceFallback: !1,
                        fallback: function() {
                            var e, t, i, n, r, a;
                            for (this.element.className = this.element.className + " dz-browser-not-supported",
                            a = this.element.getElementsByTagName("div"),
                            n = 0,
                            r = a.length; n < r; n++)
                                e = a[n],
                                /(^| )dz-message($| )/.test(e.className) && (t = e,
                                e.className = "dz-message");
                            return t || (t = o.createElement('<div class="dz-message"><span></span></div>'),
                            this.element.appendChild(t)),
                            i = t.getElementsByTagName("span")[0],
                            i && (null != i.textContent ? i.textContent = this.options.dictFallbackMessage : null != i.innerText && (i.innerText = this.options.dictFallbackMessage)),
                            this.element.appendChild(this.getFallbackForm())
                        },
                        resize: function(e) {
                            var t, i, n;
                            return t = {
                                srcX: 0,
                                srcY: 0,
                                srcWidth: e.width,
                                srcHeight: e.height
                            },
                            i = e.width / e.height,
                            t.optWidth = this.options.thumbnailWidth,
                            t.optHeight = this.options.thumbnailHeight,
                            null == t.optWidth && null == t.optHeight ? (t.optWidth = t.srcWidth,
                            t.optHeight = t.srcHeight) : null == t.optWidth ? t.optWidth = i * t.optHeight : null == t.optHeight && (t.optHeight = 1 / i * t.optWidth),
                            n = t.optWidth / t.optHeight,
                            e.height < t.optHeight || e.width < t.optWidth ? (t.trgHeight = t.srcHeight,
                            t.trgWidth = t.srcWidth) : i > n ? (t.srcHeight = e.height,
                            t.srcWidth = t.srcHeight * n) : (t.srcWidth = e.width,
                            t.srcHeight = t.srcWidth / n),
                            t.srcX = (e.width - t.srcWidth) / 2,
                            t.srcY = (e.height - t.srcHeight) / 2,
                            t
                        },
                        drop: function(e) {
                            return this.element.classList.remove("dz-drag-hover")
                        },
                        dragstart: s,
                        dragend: function(e) {
                            return this.element.classList.remove("dz-drag-hover")
                        },
                        dragenter: function(e) {
                            return this.element.classList.add("dz-drag-hover")
                        },
                        dragover: function(e) {
                            return this.element.classList.add("dz-drag-hover")
                        },
                        dragleave: function(e) {
                            return this.element.classList.remove("dz-drag-hover")
                        },
                        paste: s,
                        reset: function() {
                            return this.element.classList.remove("dz-started")
                        },
                        addedfile: function(e) {
                            var t, i, n, r, a, s, l, c, d, u, p, h, m;
                            if (this.element === this.previewsContainer && this.element.classList.add("dz-started"),
                            this.previewsContainer) {
                                for (e.previewElement = o.createElement(this.options.previewTemplate.trim()),
                                e.previewTemplate = e.previewElement,
                                this.previewsContainer.appendChild(e.previewElement),
                                u = e.previewElement.querySelectorAll("[data-dz-name]"),
                                r = 0,
                                l = u.length; r < l; r++)
                                    t = u[r],
                                    t.textContent = this._renameFilename(e.name);
                                for (p = e.previewElement.querySelectorAll("[data-dz-size]"),
                                a = 0,
                                c = p.length; a < c; a++)
                                    t = p[a],
                                    t.innerHTML = this.filesize(e.size);
                                for (this.options.addRemoveLinks && (e._removeLink = o.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>' + this.options.dictRemoveFile + "</a>"),
                                e.previewElement.appendChild(e._removeLink)),
                                i = function(t) {
                                    return function(i) {
                                        return i.preventDefault(),
                                        i.stopPropagation(),
                                        e.status === o.UPLOADING ? o.confirm(t.options.dictCancelUploadConfirmation, (function() {
                                            return t.removeFile(e)
                                        }
                                        )) : t.options.dictRemoveFileConfirmation ? o.confirm(t.options.dictRemoveFileConfirmation, (function() {
                                            return t.removeFile(e)
                                        }
                                        )) : t.removeFile(e)
                                    }
                                }(this),
                                h = e.previewElement.querySelectorAll("[data-dz-remove]"),
                                m = [],
                                s = 0,
                                d = h.length; s < d; s++)
                                    n = h[s],
                                    m.push(n.addEventListener("click", i));
                                return m
                            }
                        },
                        removedfile: function(e) {
                            var t;
                            return e.previewElement && null != (t = e.previewElement) && t.parentNode.removeChild(e.previewElement),
                            this._updateMaxFilesReachedClass()
                        },
                        thumbnail: function(e, t) {
                            var i, n, o, r;
                            if (e.previewElement) {
                                for (e.previewElement.classList.remove("dz-file-preview"),
                                r = e.previewElement.querySelectorAll("[data-dz-thumbnail]"),
                                n = 0,
                                o = r.length; n < o; n++)
                                    i = r[n],
                                    i.alt = e.name,
                                    i.src = t;
                                return setTimeout(function(t) {
                                    return function() {
                                        return e.previewElement.classList.add("dz-image-preview")
                                    }
                                }(), 1)
                            }
                        },
                        error: function(e, t) {
                            var i, n, o, r, a;
                            if (e.previewElement) {
                                for (e.previewElement.classList.add("dz-error"),
                                "String" !== typeof t && t.error && (t = t.error),
                                r = e.previewElement.querySelectorAll("[data-dz-errormessage]"),
                                a = [],
                                n = 0,
                                o = r.length; n < o; n++)
                                    i = r[n],
                                    a.push(i.textContent = t);
                                return a
                            }
                        },
                        errormultiple: s,
                        processing: function(e) {
                            if (e.previewElement && (e.previewElement.classList.add("dz-processing"),
                            e._removeLink))
                                return e._removeLink.textContent = this.options.dictCancelUpload
                        },
                        processingmultiple: s,
                        uploadprogress: function(e, t, i) {
                            var n, o, r, a, s;
                            if (e.previewElement) {
                                for (a = e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),
                                s = [],
                                o = 0,
                                r = a.length; o < r; o++)
                                    n = a[o],
                                    "PROGRESS" === n.nodeName ? s.push(n.value = t) : s.push(n.style.width = t + "%");
                                return s
                            }
                        },
                        totaluploadprogress: s,
                        sending: s,
                        sendingmultiple: s,
                        success: function(e) {
                            if (e.previewElement)
                                return e.previewElement.classList.add("dz-success")
                        },
                        successmultiple: s,
                        canceled: function(e) {
                            return this.emit("error", e, "Upload canceled.")
                        },
                        canceledmultiple: s,
                        complete: function(e) {
                            if (e._removeLink && (e._removeLink.textContent = this.options.dictRemoveFile),
                            e.previewElement)
                                return e.previewElement.classList.add("dz-complete")
                        },
                        completemultiple: s,
                        maxfilesexceeded: s,
                        maxfilesreached: s,
                        queuecomplete: s,
                        addedfiles: s,
                        previewTemplate: '<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'
                    },
                    t = function() {
                        var e, t, i, n, o, r, a;
                        for (n = arguments[0],
                        i = 2 <= arguments.length ? c.call(arguments, 1) : [],
                        r = 0,
                        a = i.length; r < a; r++)
                            for (e in t = i[r],
                            t)
                                o = t[e],
                                n[e] = o;
                        return n
                    }
                    ,
                    o.prototype.getAcceptedFiles = function() {
                        var e, t, i, n, o;
                        for (n = this.files,
                        o = [],
                        t = 0,
                        i = n.length; t < i; t++)
                            e = n[t],
                            e.accepted && o.push(e);
                        return o
                    }
                    ,
                    o.prototype.getRejectedFiles = function() {
                        var e, t, i, n, o;
                        for (n = this.files,
                        o = [],
                        t = 0,
                        i = n.length; t < i; t++)
                            e = n[t],
                            e.accepted || o.push(e);
                        return o
                    }
                    ,
                    o.prototype.getFilesWithStatus = function(e) {
                        var t, i, n, o, r;
                        for (o = this.files,
                        r = [],
                        i = 0,
                        n = o.length; i < n; i++)
                            t = o[i],
                            t.status === e && r.push(t);
                        return r
                    }
                    ,
                    o.prototype.getQueuedFiles = function() {
                        return this.getFilesWithStatus(o.QUEUED)
                    }
                    ,
                    o.prototype.getUploadingFiles = function() {
                        return this.getFilesWithStatus(o.UPLOADING)
                    }
                    ,
                    o.prototype.getAddedFiles = function() {
                        return this.getFilesWithStatus(o.ADDED)
                    }
                    ,
                    o.prototype.getActiveFiles = function() {
                        var e, t, i, n, r;
                        for (n = this.files,
                        r = [],
                        t = 0,
                        i = n.length; t < i; t++)
                            e = n[t],
                            e.status !== o.UPLOADING && e.status !== o.QUEUED || r.push(e);
                        return r
                    }
                    ,
                    o.prototype.init = function() {
                        var e, t, i, n, r, a, s;
                        for ("form" === this.element.tagName && this.element.setAttribute("enctype", "multipart/form-data"),
                        this.element.classList.contains("dropzone") && !this.element.querySelector(".dz-message") && this.element.appendChild(o.createElement('<div class="dz-default dz-message"><span>' + this.options.dictDefaultMessage + "</span></div>")),
                        this.clickableElements.length && (i = function(e) {
                            return function() {
                                return e.hiddenFileInput && e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),
                                e.hiddenFileInput = document.createElement("input"),
                                e.hiddenFileInput.setAttribute("type", "file"),
                                (null == e.options.maxFiles || e.options.maxFiles > 1) && e.hiddenFileInput.setAttribute("multiple", "multiple"),
                                e.hiddenFileInput.className = "dz-hidden-input",
                                null != e.options.acceptedFiles && e.hiddenFileInput.setAttribute("accept", e.options.acceptedFiles),
                                null != e.options.capture && e.hiddenFileInput.setAttribute("capture", e.options.capture),
                                e.hiddenFileInput.style.visibility = "hidden",
                                e.hiddenFileInput.style.position = "absolute",
                                e.hiddenFileInput.style.top = "0",
                                e.hiddenFileInput.style.left = "0",
                                e.hiddenFileInput.style.height = "0",
                                e.hiddenFileInput.style.width = "0",
                                document.querySelector(e.options.hiddenInputContainer).appendChild(e.hiddenFileInput),
                                e.hiddenFileInput.addEventListener("change", (function() {
                                    var t, n, o, r;
                                    if (n = e.hiddenFileInput.files,
                                    n.length)
                                        for (o = 0,
                                        r = n.length; o < r; o++)
                                            t = n[o],
                                            e.addFile(t);
                                    return e.emit("addedfiles", n),
                                    i()
                                }
                                ))
                            }
                        }(this),
                        i()),
                        this.URL = null != (a = window.URL) ? a : window.webkitURL,
                        s = this.events,
                        n = 0,
                        r = s.length; n < r; n++)
                            e = s[n],
                            this.on(e, this.options[e]);
                        return this.on("uploadprogress", function(e) {
                            return function() {
                                return e.updateTotalUploadProgress()
                            }
                        }(this)),
                        this.on("removedfile", function(e) {
                            return function() {
                                return e.updateTotalUploadProgress()
                            }
                        }(this)),
                        this.on("canceled", function(e) {
                            return function(t) {
                                return e.emit("complete", t)
                            }
                        }(this)),
                        this.on("complete", function(e) {
                            return function(t) {
                                if (0 === e.getAddedFiles().length && 0 === e.getUploadingFiles().length && 0 === e.getQueuedFiles().length)
                                    return setTimeout((function() {
                                        return e.emit("queuecomplete")
                                    }
                                    ), 0)
                            }
                        }(this)),
                        t = function(e) {
                            return e.stopPropagation(),
                            e.preventDefault ? e.preventDefault() : e.returnValue = !1
                        }
                        ,
                        this.listeners = [{
                            element: this.element,
                            events: {
                                dragstart: function(e) {
                                    return function(t) {
                                        return e.emit("dragstart", t)
                                    }
                                }(this),
                                dragenter: function(e) {
                                    return function(i) {
                                        return t(i),
                                        e.emit("dragenter", i)
                                    }
                                }(this),
                                dragover: function(e) {
                                    return function(i) {
                                        var n;
                                        try {
                                            n = i.dataTransfer.effectAllowed
                                        } catch (o) {}
                                        return i.dataTransfer.dropEffect = "move" === n || "linkMove" === n ? "move" : "copy",
                                        t(i),
                                        e.emit("dragover", i)
                                    }
                                }(this),
                                dragleave: function(e) {
                                    return function(t) {
                                        return e.emit("dragleave", t)
                                    }
                                }(this),
                                drop: function(e) {
                                    return function(i) {
                                        return t(i),
                                        e.drop(i)
                                    }
                                }(this),
                                dragend: function(e) {
                                    return function(t) {
                                        return e.emit("dragend", t)
                                    }
                                }(this)
                            }
                        }],
                        this.clickableElements.forEach(function(e) {
                            return function(t) {
                                return e.listeners.push({
                                    element: t,
                                    events: {
                                        click: function(i) {
                                            return (t !== e.element || i.target === e.element || o.elementInside(i.target, e.element.querySelector(".dz-message"))) && e.hiddenFileInput.click(),
                                            !0
                                        }
                                    }
                                })
                            }
                        }(this)),
                        this.enable(),
                        this.options.init.call(this)
                    }
                    ,
                    o.prototype.destroy = function() {
                        var e;
                        return this.disable(),
                        this.removeAllFiles(!0),
                        (null != (e = this.hiddenFileInput) ? e.parentNode : void 0) && (this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),
                        this.hiddenFileInput = null),
                        delete this.element.dropzone,
                        o.instances.splice(o.instances.indexOf(this), 1)
                    }
                    ,
                    o.prototype.updateTotalUploadProgress = function() {
                        var e, t, i, n, o, r, a, s;
                        if (n = 0,
                        i = 0,
                        e = this.getActiveFiles(),
                        e.length) {
                            for (s = this.getActiveFiles(),
                            r = 0,
                            a = s.length; r < a; r++)
                                t = s[r],
                                n += t.upload.bytesSent,
                                i += t.upload.total;
                            o = 100 * n / i
                        } else
                            o = 100;
                        return this.emit("totaluploadprogress", o, i, n)
                    }
                    ,
                    o.prototype._getParamName = function(e) {
                        return "function" === typeof this.options.paramName ? this.options.paramName(e) : this.options.paramName + (this.options.uploadMultiple ? "[" + e + "]" : "")
                    }
                    ,
                    o.prototype._renameFilename = function(e) {
                        return "function" !== typeof this.options.renameFilename ? e : this.options.renameFilename(e)
                    }
                    ,
                    o.prototype.getFallbackForm = function() {
                        var e, t, i, n;
                        return (e = this.getExistingFallback()) ? e : (i = '<div class="dz-fallback">',
                        this.options.dictFallbackText && (i += "<p>" + this.options.dictFallbackText + "</p>"),
                        i += '<input type="file" name="' + this._getParamName(0) + '" ' + (this.options.uploadMultiple ? 'multiple="multiple"' : void 0) + ' /><input type="submit" value="Upload!"></div>',
                        t = o.createElement(i),
                        "FORM" !== this.element.tagName ? (n = o.createElement('<form action="' + this.options.url + '" enctype="multipart/form-data" method="' + this.options.method + '"></form>'),
                        n.appendChild(t)) : (this.element.setAttribute("enctype", "multipart/form-data"),
                        this.element.setAttribute("method", this.options.method)),
                        null != n ? n : t)
                    }
                    ,
                    o.prototype.getExistingFallback = function() {
                        var e, t, i, n, o, r;
                        for (t = function(e) {
                            var t, i, n;
                            for (i = 0,
                            n = e.length; i < n; i++)
                                if (t = e[i],
                                /(^| )fallback($| )/.test(t.className))
                                    return t
                        }
                        ,
                        r = ["div", "form"],
                        n = 0,
                        o = r.length; n < o; n++)
                            if (i = r[n],
                            e = t(this.element.getElementsByTagName(i)))
                                return e
                    }
                    ,
                    o.prototype.setupEventListeners = function() {
                        var e, t, i, n, o, r, a;
                        for (r = this.listeners,
                        a = [],
                        n = 0,
                        o = r.length; n < o; n++)
                            e = r[n],
                            a.push(function() {
                                var n, o;
                                for (t in n = e.events,
                                o = [],
                                n)
                                    i = n[t],
                                    o.push(e.element.addEventListener(t, i, !1));
                                return o
                            }());
                        return a
                    }
                    ,
                    o.prototype.removeEventListeners = function() {
                        var e, t, i, n, o, r, a;
                        for (r = this.listeners,
                        a = [],
                        n = 0,
                        o = r.length; n < o; n++)
                            e = r[n],
                            a.push(function() {
                                var n, o;
                                for (t in n = e.events,
                                o = [],
                                n)
                                    i = n[t],
                                    o.push(e.element.removeEventListener(t, i, !1));
                                return o
                            }());
                        return a
                    }
                    ,
                    o.prototype.disable = function() {
                        var e, t, i, n, o;
                        for (this.clickableElements.forEach((function(e) {
                            return e.classList.remove("dz-clickable")
                        }
                        )),
                        this.removeEventListeners(),
                        n = this.files,
                        o = [],
                        t = 0,
                        i = n.length; t < i; t++)
                            e = n[t],
                            o.push(this.cancelUpload(e));
                        return o
                    }
                    ,
                    o.prototype.enable = function() {
                        return this.clickableElements.forEach((function(e) {
                            return e.classList.add("dz-clickable")
                        }
                        )),
                        this.setupEventListeners()
                    }
                    ,
                    o.prototype.filesize = function(e) {
                        var t, i, n, o, r, a, s, l;
                        if (n = 0,
                        o = "b",
                        e > 0) {
                            for (a = ["TB", "GB", "MB", "KB", "b"],
                            i = s = 0,
                            l = a.length; s < l; i = ++s)
                                if (r = a[i],
                                t = Math.pow(this.options.filesizeBase, 4 - i) / 10,
                                e >= t) {
                                    n = e / Math.pow(this.options.filesizeBase, 4 - i),
                                    o = r;
                                    break
                                }
                            n = Math.round(10 * n) / 10
                        }
                        return "<strong>" + n + "</strong> " + o
                    }
                    ,
                    o.prototype._updateMaxFilesReachedClass = function() {
                        return null != this.options.maxFiles && this.getAcceptedFiles().length >= this.options.maxFiles ? (this.getAcceptedFiles().length === this.options.maxFiles && this.emit("maxfilesreached", this.files),
                        this.element.classList.add("dz-max-files-reached")) : this.element.classList.remove("dz-max-files-reached")
                    }
                    ,
                    o.prototype.drop = function(e) {
                        var t, i;
                        e.dataTransfer && (this.emit("drop", e),
                        t = e.dataTransfer.files,
                        this.emit("addedfiles", t),
                        t.length && (i = e.dataTransfer.items,
                        i && i.length && null != i[0].webkitGetAsEntry ? this._addFilesFromItems(i) : this.handleFiles(t)))
                    }
                    ,
                    o.prototype.paste = function(e) {
                        var t, i;
                        if (null != (null != e && null != (i = e.clipboardData) ? i.items : void 0))
                            return this.emit("paste", e),
                            t = e.clipboardData.items,
                            t.length ? this._addFilesFromItems(t) : void 0
                    }
                    ,
                    o.prototype.handleFiles = function(e) {
                        var t, i, n, o;
                        for (o = [],
                        i = 0,
                        n = e.length; i < n; i++)
                            t = e[i],
                            o.push(this.addFile(t));
                        return o
                    }
                    ,
                    o.prototype._addFilesFromItems = function(e) {
                        var t, i, n, o, r;
                        for (r = [],
                        n = 0,
                        o = e.length; n < o; n++)
                            i = e[n],
                            null != i.webkitGetAsEntry && (t = i.webkitGetAsEntry()) ? t.isFile ? r.push(this.addFile(i.getAsFile())) : t.isDirectory ? r.push(this._addFilesFromDirectory(t, t.name)) : r.push(void 0) : null != i.getAsFile && (null == i.kind || "file" === i.kind) ? r.push(this.addFile(i.getAsFile())) : r.push(void 0);
                        return r
                    }
                    ,
                    o.prototype._addFilesFromDirectory = function(e, t) {
                        var i, n, o;
                        return i = e.createReader(),
                        n = function(e) {
                            return "undefined" !== typeof console && null !== console && "function" === typeof console.log ? console.log(e) : void 0
                        }
                        ,
                        o = function(e) {
                            return function() {
                                return i.readEntries((function(i) {
                                    var n, r, a;
                                    if (i.length > 0) {
                                        for (r = 0,
                                        a = i.length; r < a; r++)
                                            n = i[r],
                                            n.isFile ? n.file((function(i) {
                                                if (!e.options.ignoreHiddenFiles || "." !== i.name.substring(0, 1))
                                                    return i.fullPath = t + "/" + i.name,
                                                    e.addFile(i)
                                            }
                                            )) : n.isDirectory && e._addFilesFromDirectory(n, t + "/" + n.name);
                                        o()
                                    }
                                    return null
                                }
                                ), n)
                            }
                        }(this),
                        o()
                    }
                    ,
                    o.prototype.accept = function(e, t) {
                        return e.size > 1024 * this.options.maxFilesize * 1024 ? t(this.options.dictFileTooBig.replace("{{filesize}}", Math.round(e.size / 1024 / 10.24) / 100).replace("{{maxFilesize}}", this.options.maxFilesize)) : o.isValidFile(e, this.options.acceptedFiles) ? null != this.options.maxFiles && this.getAcceptedFiles().length >= this.options.maxFiles ? (t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}", this.options.maxFiles)),
                        this.emit("maxfilesexceeded", e)) : this.options.accept.call(this, e, t) : t(this.options.dictInvalidFileType)
                    }
                    ,
                    o.prototype.addFile = function(e) {
                        return e.upload = {
                            progress: 0,
                            total: e.size,
                            bytesSent: 0
                        },
                        this.files.push(e),
                        e.status = o.ADDED,
                        this.emit("addedfile", e),
                        this._enqueueThumbnail(e),
                        this.accept(e, function(t) {
                            return function(i) {
                                return i ? (e.accepted = !1,
                                t._errorProcessing([e], i)) : (e.accepted = !0,
                                t.options.autoQueue && t.enqueueFile(e)),
                                t._updateMaxFilesReachedClass()
                            }
                        }(this))
                    }
                    ,
                    o.prototype.enqueueFiles = function(e) {
                        var t, i, n;
                        for (i = 0,
                        n = e.length; i < n; i++)
                            t = e[i],
                            this.enqueueFile(t);
                        return null
                    }
                    ,
                    o.prototype.enqueueFile = function(e) {
                        if (e.status !== o.ADDED || !0 !== e.accepted)
                            throw new Error("This file can't be queued because it has already been processed or was rejected.");
                        if (e.status = o.QUEUED,
                        this.options.autoProcessQueue)
                            return setTimeout(function(e) {
                                return function() {
                                    return e.processQueue()
                                }
                            }(this), 0)
                    }
                    ,
                    o.prototype._thumbnailQueue = [],
                    o.prototype._processingThumbnail = !1,
                    o.prototype._enqueueThumbnail = function(e) {
                        if (this.options.createImageThumbnails && e.type.match(/image.*/) && e.size <= 1024 * this.options.maxThumbnailFilesize * 1024)
                            return this._thumbnailQueue.push(e),
                            setTimeout(function(e) {
                                return function() {
                                    return e._processThumbnailQueue()
                                }
                            }(this), 0)
                    }
                    ,
                    o.prototype._processThumbnailQueue = function() {
                        if (!this._processingThumbnail && 0 !== this._thumbnailQueue.length)
                            return this._processingThumbnail = !0,
                            this.createThumbnail(this._thumbnailQueue.shift(), function(e) {
                                return function() {
                                    return e._processingThumbnail = !1,
                                    e._processThumbnailQueue()
                                }
                            }(this))
                    }
                    ,
                    o.prototype.removeFile = function(e) {
                        if (e.status === o.UPLOADING && this.cancelUpload(e),
                        this.files = l(this.files, e),
                        this.emit("removedfile", e),
                        0 === this.files.length)
                            return this.emit("reset")
                    }
                    ,
                    o.prototype.removeAllFiles = function(e) {
                        var t, i, n, r;
                        for (null == e && (e = !1),
                        r = this.files.slice(),
                        i = 0,
                        n = r.length; i < n; i++)
                            t = r[i],
                            (t.status !== o.UPLOADING || e) && this.removeFile(t);
                        return null
                    }
                    ,
                    o.prototype.createThumbnail = function(e, t) {
                        var i;
                        return i = new FileReader,
                        i.onload = function(n) {
                            return function() {
                                return "image/svg+xml" === e.type ? (n.emit("thumbnail", e, i.result),
                                void (null != t && t())) : n.createThumbnailFromUrl(e, i.result, t)
                            }
                        }(this),
                        i.readAsDataURL(e)
                    }
                    ,
                    o.prototype.createThumbnailFromUrl = function(e, t, i, n) {
                        var o;
                        return o = document.createElement("img"),
                        n && (o.crossOrigin = n),
                        o.onload = function(t) {
                            return function() {
                                var n, r, s, l, c, d, u, p;
                                if (e.width = o.width,
                                e.height = o.height,
                                s = t.options.resize.call(t, e),
                                null == s.trgWidth && (s.trgWidth = s.optWidth),
                                null == s.trgHeight && (s.trgHeight = s.optHeight),
                                n = document.createElement("canvas"),
                                r = n.getContext("2d"),
                                n.width = s.trgWidth,
                                n.height = s.trgHeight,
                                a(r, o, null != (c = s.srcX) ? c : 0, null != (d = s.srcY) ? d : 0, s.srcWidth, s.srcHeight, null != (u = s.trgX) ? u : 0, null != (p = s.trgY) ? p : 0, s.trgWidth, s.trgHeight),
                                l = n.toDataURL("image/png"),
                                t.emit("thumbnail", e, l),
                                null != i)
                                    return i()
                            }
                        }(this),
                        null != i && (o.onerror = i),
                        o.src = t
                    }
                    ,
                    o.prototype.processQueue = function() {
                        var e, t, i, n;
                        if (t = this.options.parallelUploads,
                        i = this.getUploadingFiles().length,
                        e = i,
                        !(i >= t) && (n = this.getQueuedFiles(),
                        n.length > 0)) {
                            if (this.options.uploadMultiple)
                                return this.processFiles(n.slice(0, t - i));
                            while (e < t) {
                                if (!n.length)
                                    return;
                                this.processFile(n.shift()),
                                e++
                            }
                        }
                    }
                    ,
                    o.prototype.processFile = function(e) {
                        return this.processFiles([e])
                    }
                    ,
                    o.prototype.processFiles = function(e) {
                        var t, i, n;
                        for (i = 0,
                        n = e.length; i < n; i++)
                            t = e[i],
                            t.processing = !0,
                            t.status = o.UPLOADING,
                            this.emit("processing", t);
                        return this.options.uploadMultiple && this.emit("processingmultiple", e),
                        this.uploadFiles(e)
                    }
                    ,
                    o.prototype._getFilesWithXhr = function(e) {
                        var t;
                        return function() {
                            var i, n, o, r;
                            for (o = this.files,
                            r = [],
                            i = 0,
                            n = o.length; i < n; i++)
                                t = o[i],
                                t.xhr === e && r.push(t);
                            return r
                        }
                        .call(this)
                    }
                    ,
                    o.prototype.cancelUpload = function(e) {
                        var t, i, n, r, a, s, l;
                        if (e.status === o.UPLOADING) {
                            for (i = this._getFilesWithXhr(e.xhr),
                            n = 0,
                            a = i.length; n < a; n++)
                                t = i[n],
                                t.status = o.CANCELED;
                            for (e.xhr.abort(),
                            r = 0,
                            s = i.length; r < s; r++)
                                t = i[r],
                                this.emit("canceled", t);
                            this.options.uploadMultiple && this.emit("canceledmultiple", i)
                        } else
                            (l = e.status) !== o.ADDED && l !== o.QUEUED || (e.status = o.CANCELED,
                            this.emit("canceled", e),
                            this.options.uploadMultiple && this.emit("canceledmultiple", [e]));
                        if (this.options.autoProcessQueue)
                            return this.processQueue()
                    }
                    ,
                    n = function() {
                        var e, t;
                        return t = arguments[0],
                        e = 2 <= arguments.length ? c.call(arguments, 1) : [],
                        "function" === typeof t ? t.apply(this, e) : t
                    }
                    ,
                    o.prototype.uploadFile = function(e) {
                        return this.uploadFiles([e])
                    }
                    ,
                    o.prototype.uploadFiles = function(e) {
                        var i, r, a, s, l, c, d, u, p, h, m, g, f, v, b, y, w, C, x, S, P, k, _, A, T, E, O, I, D, F, M, $, B, j;
                        for (x = new XMLHttpRequest,
                        S = 0,
                        A = e.length; S < A; S++)
                            i = e[S],
                            i.xhr = x;
                        for (s in g = n(this.options.method, e),
                        w = n(this.options.url, e),
                        x.open(g, w, !0),
                        x.withCredentials = !!this.options.withCredentials,
                        b = null,
                        a = function(t) {
                            return function() {
                                var n, o, r;
                                for (r = [],
                                n = 0,
                                o = e.length; n < o; n++)
                                    i = e[n],
                                    r.push(t._errorProcessing(e, b || t.options.dictResponseError.replace("{{statusCode}}", x.status), x));
                                return r
                            }
                        }(this),
                        y = function(t) {
                            return function(n) {
                                var o, r, a, s, l, c, d, u, p;
                                if (null != n)
                                    for (r = 100 * n.loaded / n.total,
                                    a = 0,
                                    c = e.length; a < c; a++)
                                        i = e[a],
                                        i.upload = {
                                            progress: r,
                                            total: n.total,
                                            bytesSent: n.loaded
                                        };
                                else {
                                    for (o = !0,
                                    r = 100,
                                    s = 0,
                                    d = e.length; s < d; s++)
                                        i = e[s],
                                        100 === i.upload.progress && i.upload.bytesSent === i.upload.total || (o = !1),
                                        i.upload.progress = r,
                                        i.upload.bytesSent = i.upload.total;
                                    if (o)
                                        return
                                }
                                for (p = [],
                                l = 0,
                                u = e.length; l < u; l++)
                                    i = e[l],
                                    p.push(t.emit("uploadprogress", i, r, i.upload.bytesSent));
                                return p
                            }
                        }(this),
                        x.onload = function(t) {
                            return function(i) {
                                var n;
                                if (e[0].status !== o.CANCELED && 4 === x.readyState) {
                                    if (b = x.responseText,
                                    x.getResponseHeader("content-type") && ~x.getResponseHeader("content-type").indexOf("application/json"))
                                        try {
                                            b = JSON.parse(b)
                                        } catch (r) {
                                            i = r,
                                            b = "Invalid JSON response from server."
                                        }
                                    return y(),
                                    200 <= (n = x.status) && n < 300 ? t._finished(e, b, i) : a()
                                }
                            }
                        }(this),
                        x.onerror = function(t) {
                            return function() {
                                if (e[0].status !== o.CANCELED)
                                    return a()
                            }
                        }(),
                        v = null != (D = x.upload) ? D : x,
                        v.onprogress = y,
                        c = {
                            Accept: "application/json",
                            "Cache-Control": "no-cache",
                            "X-Requested-With": "XMLHttpRequest"
                        },
                        this.options.headers && t(c, this.options.headers),
                        c)
                            l = c[s],
                            l && x.setRequestHeader(s, l);
                        if (r = new FormData,
                        this.options.params)
                            for (m in F = this.options.params,
                            F)
                                C = F[m],
                                r.append(m, C);
                        for (P = 0,
                        T = e.length; P < T; P++)
                            i = e[P],
                            this.emit("sending", i, x, r);
                        if (this.options.uploadMultiple && this.emit("sendingmultiple", e, x, r),
                        "FORM" === this.element.tagName)
                            for (M = this.element.querySelectorAll("input, textarea, select, button"),
                            k = 0,
                            E = M.length; k < E; k++)
                                if (u = M[k],
                                p = u.getAttribute("name"),
                                h = u.getAttribute("type"),
                                "SELECT" === u.tagName && u.hasAttribute("multiple"))
                                    for ($ = u.options,
                                    _ = 0,
                                    O = $.length; _ < O; _++)
                                        f = $[_],
                                        f.selected && r.append(p, f.value);
                                else
                                    (!h || "checkbox" !== (B = h.toLowerCase()) && "radio" !== B || u.checked) && r.append(p, u.value);
                        for (d = I = 0,
                        j = e.length - 1; 0 <= j ? I <= j : I >= j; d = 0 <= j ? ++I : --I)
                            r.append(this._getParamName(d), e[d], this._renameFilename(e[d].name));
                        return this.submitRequest(x, r, e)
                    }
                    ,
                    o.prototype.submitRequest = function(e, t, i) {
                        return e.send(t)
                    }
                    ,
                    o.prototype._finished = function(e, t, i) {
                        var n, r, a;
                        for (r = 0,
                        a = e.length; r < a; r++)
                            n = e[r],
                            n.status = o.SUCCESS,
                            this.emit("success", n, t, i),
                            this.emit("complete", n);
                        if (this.options.uploadMultiple && (this.emit("successmultiple", e, t, i),
                        this.emit("completemultiple", e)),
                        this.options.autoProcessQueue)
                            return this.processQueue()
                    }
                    ,
                    o.prototype._errorProcessing = function(e, t, i) {
                        var n, r, a;
                        for (r = 0,
                        a = e.length; r < a; r++)
                            n = e[r],
                            n.status = o.ERROR,
                            this.emit("error", n, t, i),
                            this.emit("complete", n);
                        if (this.options.uploadMultiple && (this.emit("errormultiple", e, t, i),
                        this.emit("completemultiple", e)),
                        this.options.autoProcessQueue)
                            return this.processQueue()
                    }
                    ,
                    o
                }(i),
                t.version = "4.3.0",
                t.options = {},
                t.optionsForElement = function(e) {
                    return e.getAttribute("id") ? t.options[n(e.getAttribute("id"))] : void 0
                }
                ,
                t.instances = [],
                t.forElement = function(e) {
                    if ("string" === typeof e && (e = document.querySelector(e)),
                    null == (null != e ? e.dropzone : void 0))
                        throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");
                    return e.dropzone
                }
                ,
                t.autoDiscover = !0,
                t.discover = function() {
                    var e, i, n, o, r, a;
                    for (document.querySelectorAll ? n = document.querySelectorAll(".dropzone") : (n = [],
                    e = function(e) {
                        var t, i, o, r;
                        for (r = [],
                        i = 0,
                        o = e.length; i < o; i++)
                            t = e[i],
                            /(^| )dropzone($| )/.test(t.className) ? r.push(n.push(t)) : r.push(void 0);
                        return r
                    }
                    ,
                    e(document.getElementsByTagName("div")),
                    e(document.getElementsByTagName("form"))),
                    a = [],
                    o = 0,
                    r = n.length; o < r; o++)
                        i = n[o],
                        !1 !== t.optionsForElement(i) ? a.push(new t(i)) : a.push(void 0);
                    return a
                }
                ,
                t.blacklistedBrowsers = [/opera.*Macintosh.*version\/12/i],
                t.isBrowserSupported = function() {
                    var e, i, n, o, r;
                    if (e = !0,
                    window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector)
                        if ("classList"in document.createElement("a"))
                            for (r = t.blacklistedBrowsers,
                            n = 0,
                            o = r.length; n < o; n++)
                                i = r[n],
                                i.test(navigator.userAgent) && (e = !1);
                        else
                            e = !1;
                    else
                        e = !1;
                    return e
                }
                ,
                l = function(e, t) {
                    var i, n, o, r;
                    for (r = [],
                    n = 0,
                    o = e.length; n < o; n++)
                        i = e[n],
                        i !== t && r.push(i);
                    return r
                }
                ,
                n = function(e) {
                    return e.replace(/[\-_](\w)/g, (function(e) {
                        return e.charAt(1).toUpperCase()
                    }
                    ))
                }
                ,
                t.createElement = function(e) {
                    var t;
                    return t = document.createElement("div"),
                    t.innerHTML = e,
                    t.childNodes[0]
                }
                ,
                t.elementInside = function(e, t) {
                    if (e === t)
                        return !0;
                    while (e = e.parentNode)
                        if (e === t)
                            return !0;
                    return !1
                }
                ,
                t.getElement = function(e, t) {
                    var i;
                    if ("string" === typeof e ? i = document.querySelector(e) : null != e.nodeType && (i = e),
                    null == i)
                        throw new Error("Invalid `" + t + "` option provided. Please provide a CSS selector or a plain HTML element.");
                    return i
                }
                ,
                t.getElements = function(e, t) {
                    var i, n, o, r, a, s, l;
                    if (e instanceof Array) {
                        n = [];
                        try {
                            for (o = 0,
                            a = e.length; o < a; o++)
                                i = e[o],
                                n.push(this.getElement(i, t))
                        } catch (c) {
                            c,
                            n = null
                        }
                    } else if ("string" === typeof e)
                        for (n = [],
                        l = document.querySelectorAll(e),
                        r = 0,
                        s = l.length; r < s; r++)
                            i = l[r],
                            n.push(i);
                    else
                        null != e.nodeType && (n = [e]);
                    if (null == n || !n.length)
                        throw new Error("Invalid `" + t + "` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");
                    return n
                }
                ,
                t.confirm = function(e, t, i) {
                    return window.confirm(e) ? t() : null != i ? i() : void 0
                }
                ,
                t.isValidFile = function(e, t) {
                    var i, n, o, r, a;
                    if (!t)
                        return !0;
                    for (t = t.split(","),
                    n = e.type,
                    i = n.replace(/\/.*$/, ""),
                    r = 0,
                    a = t.length; r < a; r++)
                        if (o = t[r],
                        o = o.trim(),
                        "." === o.charAt(0)) {
                            if (-1 !== e.name.toLowerCase().indexOf(o.toLowerCase(), e.name.length - o.length))
                                return !0
                        } else if (/\/\*$/.test(o)) {
                            if (i === o.replace(/\/.*$/, ""))
                                return !0
                        } else if (n === o)
                            return !0;
                    return !1
                }
                ,
                "undefined" !== typeof jQuery && null !== jQuery && (jQuery.fn.dropzone = function(e) {
                    return this.each((function() {
                        return new t(this,e)
                    }
                    ))
                }
                ),
                null !== e ? e.exports = t : window.Dropzone = t,
                t.ADDED = "added",
                t.QUEUED = "queued",
                t.ACCEPTED = t.QUEUED,
                t.UPLOADING = "uploading",
                t.PROCESSING = t.UPLOADING,
                t.CANCELED = "canceled",
                t.ERROR = "error",
                t.SUCCESS = "success",
                r = function(e) {
                    var t, i, n, o, r, a, s, l, c;
                    e.naturalWidth,
                    a = e.naturalHeight,
                    i = document.createElement("canvas"),
                    i.width = 1,
                    i.height = a,
                    n = i.getContext("2d"),
                    n.drawImage(e, 0, 0),
                    o = n.getImageData(0, 0, 1, a).data,
                    c = 0,
                    r = a,
                    s = a;
                    while (s > c)
                        t = o[4 * (s - 1) + 3],
                        0 === t ? r = s : c = s,
                        s = r + c >> 1;
                    return l = s / a,
                    0 === l ? 1 : l
                }
                ,
                a = function(e, t, i, n, o, a, s, l, c, d) {
                    var u;
                    return u = r(t),
                    e.drawImage(t, i, n, o, a, s, l, c, d / u)
                }
                ,
                o = function(e, t) {
                    var i, n, o, r, a, s, l, c, d;
                    if (o = !1,
                    d = !0,
                    n = e.document,
                    c = n.documentElement,
                    i = n.addEventListener ? "addEventListener" : "attachEvent",
                    l = n.addEventListener ? "removeEventListener" : "detachEvent",
                    s = n.addEventListener ? "" : "on",
                    r = function(i) {
                        if ("readystatechange" !== i.type || "complete" === n.readyState)
                            return ("load" === i.type ? e : n)[l](s + i.type, r, !1),
                            !o && (o = !0) ? t.call(e, i.type || i) : void 0
                    }
                    ,
                    a = function() {
                        try {
                            c.doScroll("left")
                        } catch (e) {
                            return e,
                            void setTimeout(a, 50)
                        }
                        return r("poll")
                    }
                    ,
                    "complete" !== n.readyState) {
                        if (n.createEventObject && c.doScroll) {
                            try {
                                d = !e.frameElement
                            } catch (u) {}
                            d && a()
                        }
                        return n[i](s + "DOMContentLoaded", r, !1),
                        n[i](s + "readystatechange", r, !1),
                        e[i](s + "load", r, !1)
                    }
                }
                ,
                t._autoDiscoverFunction = function() {
                    if (t.autoDiscover)
                        return t.discover()
                }
                ,
                o(window, t._autoDiscoverFunction)
            }
            ).call(this)
        }
        ).call(this, i("62e4")(e))
    },
    "1e6b": function(e, t, i) {
        var n = i("4719")
          , o = i("5861")
          , r = i("694b")
          , a = i("0921")
          , s = i("ddea")
          , l = i("7481")
          , c = i("93ce")
          , d = i("7178")
          , u = i("a4fe")
          , p = i("4408")
          , h = i("cac0")
          , m = i("0af1")
          , g = i("2fb1")
          , f = i("a33b")
          , v = i("6a98")
          , b = i("9372")
          , y = i("ae64")
          , w = i("2d98")
          , C = i("a1aa")
          , x = i("7e40")
          , S = i("6d9c")
          , P = n(o)
          , k = n(r)
          , _ = n(a)
          , A = n(s)
          , T = n(l)
          , E = n(c)
          , O = n(d)
          , I = n(u)
          , D = n(p)
          , F = n(h)
          , M = n(m)
          , $ = n(g)
          , B = n(f)
          , j = n(v)
          , L = n(b)
          , R = n(y)
          , U = n(w)
          , z = n(C)
          , N = n(x)
          , V = n(S)
          , G = '<title>Step 2/3 - Preview settings</title> <div id="step2-container" class="template-step-container" ng-controller="CreateStepTwoCtrl" block-arrows-scroll ng-cloak> <div class="row h100" style="margin:0!important"> <div class="col-xs-6 col-xs-offset-3 mt20" ng-show="!backgroundReady"> <div class="row"> <md-input-container class="md-block col-xs-6" ng-show="!$root.childRestrictedAccess"> <md-button class="md-raised w100 m0" ng-class="backgroundType === \'image\' ? \'btn-dturquise\' : \'btn-turquise\'" ng-click="backgroundType = \'image\'">Use Background Image</md-button> </md-input-container> <md-input-container class="md-block col-xs-6"> <md-button class="md-raised w100 m0" ng-class="backgroundType === \'color\' ? \'btn-dturquise\' : \'btn-turquise\'" ng-click="backgroundType = \'color\'">Use Background Color</md-button> </md-input-container> </div> <div ng-show="backgroundType === \'image\'" class="w100"> <md-button class="md-raised md-primary w100 m0" upload-file input-id="inputFile"> Upload background image <div id="uploadImage" class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="inputFile" type="file" accept=".png,.jpg,.jpeg" value="upload" onchange="angular.element(this).scope().uploadImage(this.files)"/> </div> </md-button> <div class="w100 text-justify mt10"> Upload images up to 1200px for best performance on your store. Large images will be scaled down automatically. </div> </div> <div ng-show="backgroundType === \'color\'" class="w100"> <form class="w100" name="backgroundColorForm" ng-submit="setBackgroundColor(bgColorForm.previewWidth, bgColorForm.previewHeight, bgColor)"> <div class="w100 text-center" style="margin-bottom:3px">Color</div> <div class="w100 bg-color-swatch" ng-style="{\'background-color\': toRgbaString(\'#\' + bgColor.HEX, bgColor.alpha) }"></div> <div id="pickerContainer" class="w100 mb20" style="display:flex;justify-content:center"> <customily-color-picker ctrl-methods="bgColorPickerCtrlMethods" on-change="bgColorPickerColorChange" color-mode="\'rgb\'" on-ready="onBgColorPickerReady" disable-save="true" style="display:none"></customily-color-picker> </div> <md-input-container class="md-block" style="margin-top:40px"> <label>Preview Width (px)</label> <input required md-no-asterisk type="number" step="any" name="previewWidth" ng-model="bgColorForm.previewWidth" min="600" max="1200" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/"/> <div ng-messages="backgroundColorForm.previewWidth.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">You must set a width for the preview</div> <div ng-message="min"> The preview width is too small and it won\'t look good in your store </div> <div ng-message="pattern">That doesn\'t look like a valid dimension</div> <div ng-message="max"> Use a smaller width, big values can result in bad performance and slow loading times on your store </div> </div> </md-input-container> <md-input-container class="md-block mb0"> <label>Preview Height (px)</label> <input required md-no-asterisk type="number" step="any" name="previewHeight" ng-model="bgColorForm.previewHeight" min="600" max="1200" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/"/> <div ng-messages="backgroundColorForm.previewHeight.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">You must set a height for the preview</div> <div ng-message="min"> The preview height is too small and it won\'t look good in your store </div> <div ng-message="pattern">That doesn\'t look like a valid dimension</div> <div ng-message="max"> Use a smaller height, big values can result in bad performance and slow loading times on your store </div> </div> </md-input-container> <md-button class="md-raised md-primary w100 m0" type="submit" ng-disabled="!backgroundColorForm.$valid">Set background color</md-button> </form> </div> </div> <div class="col-xs-12 h100" ng-show="backgroundReady"> <div class="row h100"> <div class="col-xs-6 h100 template-section"> <div id="fabric-container-2"> <canvas id="fabric-canvas-2"></canvas> </div> </div> <div class="col-xs-6 control-panel-wrapper"> <div class="col-xs-12 layers-accordion"> <vue-component class="h100 vue-need-bootstrap" name="Layers" instance="layersInstance" v-on-element-selected="layersElementSelected" v-on-order-updated="layersOrderUpdated" v-on-collapse-toggle="layersCollapseToggle" v-on-element-lock-toggle="layersElementLockToggle" v-on-element-visibility-toggle="layersElementVisibilityToggle" v-on-element-overlay-toggle="layersElementOverlayToggle" v-on-title-change="layersTitleChange" v-props-canvas="canvas" v-props-is-managed-user="$root.isManagedUser && !user.UserImpersonatedFromId" v-props-show-product-template-controls="user.AccessRoles.Serialized.split(\',\').includes(\'admin\') && forProductTemplateCreation" v-props-allow-changing-print-area="false" v-props-allow-changing-overlay="true" v-props-is-preview-step="true" v-props-is-design="isUserDesignCreation" v-props-show-groups="enableGroups" v-props-is-able-to-group-or-ungroup="false"/> </div> <div class="col-xs-12 mt15 mb15" ng-show="!(svgSelected || imageSelected || textSelected) && hasSelectedElement"> <div class="d-flex justify-content-end"> <md-button class="md-raised button-icon panel-button button-align-radius" ng-click="onElementSelectedAlign(\'top\')"> <md-tooltip>Align top</md-tooltip> <md-icon md-svg-src="' + P + '"></md-icon> </md-button> <md-button class="md-raised button-icon panel-button button-align-radius" ng-click="onElementSelectedAlign(\'center\')"> <md-tooltip>Align center</md-tooltip> <md-icon md-svg-src="' + k + '"></md-icon> </md-button> <md-button class="md-raised button-icon panel-button button-align-radius" ng-click="onElementSelectedAlign(\'bottom\')"> <md-tooltip>Align bottom</md-tooltip> <md-icon md-svg-src="' + _ + '"></md-icon> </md-button> <md-button class="md-raised button-icon panel-button button-align-radius" ng-click="onElementSelectedAlign(\'left\')"> <md-tooltip>Align left</md-tooltip> <md-icon md-svg-src="' + A + '"></md-icon> </md-button> <md-button class="md-raised button-icon panel-button button-align-radius" ng-click="onElementSelectedAlign(\'middle\')"> <md-tooltip>Align middle</md-tooltip> <md-icon md-svg-src="' + T + '"></md-icon> </md-button> <md-button class="md-raised button-icon panel-button button-align-radius" ng-click="onElementSelectedAlign(\'right\')"> <md-tooltip>Align right</md-tooltip> <md-icon md-svg-src="' + E + '"></md-icon> </md-button> <div class="d-inline-block" style="margin-left:15px"> <md-button class="button-align-element md-raised button-icon panel-button button-align-radius" ng-click="onElementAlingTypeChanged(\'selection\')" ng-class="{\'active\': elementAlignType == \'selection\'}"> <md-tooltip>Align to selection</md-tooltip> <md-icon md-svg-src="' + O + '"></md-icon> </md-button> <md-button class="button-align-element md-raised button-icon panel-button button-align-radius" ng-click="onElementAlingTypeChanged(\'canvas\')" ng-class="{\'active\': elementAlignType == \'canvas\'}"> <md-tooltip>Align to workspace</md-tooltip> <md-icon md-svg-src="' + I + '"></md-icon> </md-button> </div> </div> </div> <div ng-show="!textSelected && !imageSelected && !svgSelected" class="control-panel col-xs-12"> <div class="col-xs-12 buttons-container"> <md-button class="md-raised button-icon panel-button" ng-click="startBackgroundReplace(\'inputFileReplace\')" ng-if="!forMyProductBases && (!$root.isManagedUser || user.UserImpersonatedFromId)"> <md-icon md-svg-src="' + D + '"></md-icon> <label>Replace<br/>background</label> </md-button> <div class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="inputFileReplace" type="file" accept=".png,.jpg,.jpeg" value="upload" onchange="angular.element(this).scope().replaceImage(this.files)"/> </div> <md-button class="md-raised button-icon panel-button" ng-click="resetPreview()" ng-if="!forMyProductBases && (!$root.isManagedUser || user.UserImpersonatedFromId)"> <md-icon md-svg-src="' + F + '"></md-icon> <label>Reset<br/>Preview</label> </md-button> <md-button class="md-raised button-icon panel-button" ng-click="addProductImageElement($event)" ng-if="forMyProductBases"> <md-icon md-svg-src="' + M + '"></md-icon> <label>Add product images</label> </md-button> <md-button class="md-raised button-icon panel-button" ng-click="addMask()" ng-if="forMyProductBases"> <md-icon md-svg-src="' + $ + '"></md-icon> <label>Add mask</label> </md-button> <md-button class="md-raised button-icon panel-button" ng-if="!$root.childRestrictedAccess && !isUserDesignCreation" ng-click="addDynamicImage($event)"> <md-icon md-svg-src="' + B + '"></md-icon> <label>Dynamic<br/>Image</label> </md-button> <md-button class="md-raised button-icon panel-button" style="opacity:0;pointer-events:none"> </md-button> <md-button class="md-raised button-icon panel-button" style="opacity:0;pointer-events:none"> </md-button> </div> <div class="col-xs-12" style="padding:0" ng-show="!hasSelectedElement"> <md-input-container class="md-block"> <md-button class="md-raised md-primary w100" style="margin:0" ng-click="goToStep3()"> Next <i class="fa fa-arrow-right" aria-hidden="true"></i> </md-button> </md-input-container> </div> <div class="col-xs-12" style="padding:0" ng-show="hasSelectedElement"> <md-input-container class="md-block"> <md-button class="w100 md-raised btn-turquise" style="margin:0" ng-click="deselectAll()">Done</md-button> </md-input-container> </div> </div> <div class="col-xs-12 element-title mb20 mt20" ng-show="svgSelected || imageSelected || textSelected"> <div style="padding-left:15px">{{ getCurrentElementTitle() }}</div> <div style="padding-right:15px" ng-show="(svgSelected || imageSelected || textSelected).locked"> <md-icon md-svg-src="' + j + '"></md-icon> </div> <div style="margin-right:15px" ng-show="!(svgSelected || imageSelected || textSelected).locked"> <md-button class="button-align-element button-icon icon-small button-align-radius" ng-click="onElementSelectedAlign(\'top\')"> <md-tooltip>Align top</md-tooltip> <md-icon md-svg-src="' + P + '"></md-icon> </md-button> <md-button class="button-align-element button-icon icon-small button-align-radius" ng-click="onElementSelectedAlign(\'center\')"> <md-tooltip>Align center</md-tooltip> <md-icon md-svg-src="' + k + '"></md-icon> </md-button> <md-button class="button-align-element button-icon icon-small button-align-radius" ng-click="onElementSelectedAlign(\'bottom\')"> <md-tooltip>Align bottom</md-tooltip> <md-icon md-svg-src="' + _ + '"></md-icon> </md-button> <md-button class="button-align-element button-icon icon-small button-align-radius" ng-click="onElementSelectedAlign(\'left\')"> <md-tooltip>Align left</md-tooltip> <md-icon md-svg-src="' + A + '"></md-icon> </md-button> <md-button class="button-align-element button-icon icon-small button-align-radius" ng-click="onElementSelectedAlign(\'middle\')"> <md-tooltip>Align middle</md-tooltip> <md-icon md-svg-src="' + T + '"></md-icon> </md-button> <md-button class="button-align-element button-icon icon-small button-align-radius" ng-click="onElementSelectedAlign(\'right\')"> <md-tooltip>Align right</md-tooltip> <md-icon md-svg-src="' + E + '"></md-icon> </md-button> </div> </div> <form ng-show="textSelected && textSelected.type === \'bounded-text\'" class="col-xs-12" name="userForm"> <md-input-container class="md-block col-xs-2 mb0"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different elements on the template </md-tooltip> <label>Element Id</label> <input required md-no-asterisk type="number" step="any" name="id" ng-model="selectedTextProperties.id" min="1" max="9999999" ng-disabled="true"/> </md-input-container> <md-input-container class="md-block col-xs-2 mb0"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different font options of this text element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" name="dynamicImageVariation" ng-model="selectedTextProperties.fontOption" ng-change="changeFontOption()" ng-disabled="selectedTextProperties.Itext" min="1" max="9999999"/> </md-input-container> <md-input-container class="md-block col-xs-6 mb0"> <md-tooltip md-delay="200" md-direction="top">This is a sample text and will not appear on the final product</md-tooltip> <label>Type to try the text box</label> <textarea name="text" ng-model="selectedTextProperties.text" ng-change="updateText(selectedTextProperties.text, textSelected)" md-select-on-focus ng-disabled="selectedTextProperties.locked"></textarea> </md-input-container> <div class="clearfix"></div> <uib-accordion close-others="true"> <div uib-accordion-group class="panel-default" heading="Transform" is-open="accordionsStatus.textTransform" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">X value of the textbox</md-tooltip> <label>X (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerX" ng-model="selectedTextProperties.centerX" min="0" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterX(selectedTextProperties.centerX, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="userForm.centerX.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Y value of the textbox</md-tooltip> <label>Y (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerY" ng-model="selectedTextProperties.centerY" min="0" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterY(selectedTextProperties.centerY, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="userForm.centerY.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Angle of rotation of the textbox</md-tooltip> <label>R (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="rotation" ng-model="selectedTextProperties.rotation" min="-360" max="360" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateRotation(selectedTextProperties.rotation, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="userForm.rotation.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Angle of horizontal skew in degrees</md-tooltip> <label>Skew H (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="skewx" ng-model="selectedTextProperties.skewX" min="-80" max="80" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateSkewX(selectedTextProperties.skewX, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="imageForm.skewx.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Angle of vertical skew in degrees</md-tooltip> <label>Skew V (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="skewy" ng-model="selectedTextProperties.skewY" min="-80" max="80" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateSkewY(selectedTextProperties.skewY, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="imageForm.skewy.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <div class="md-block col-xs-4 text-center"> <md-button class="md-raised button-icon" ng-click="updateZIndex(textSelected.zIndex + 1, textSelected)" ng-disabled="selectedTextProperties.locked || textSelected.isOverlay"> <md-icon md-svg-src="' + L + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element forward</md-tooltip> </md-button> <md-button class="md-raised button-icon" ng-click="updateZIndex(textSelected.zIndex - 1, textSelected)" ng-disabled="selectedTextProperties.locked || textSelected.isOverlay"> <md-icon md-svg-src="' + R + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element backward</md-tooltip> </md-button> </div> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3"> <md-tooltip md-delay="200" md-direction="top">Width of the textbox</md-tooltip> <label>W (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="width" ng-model="selectedTextProperties.width" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateWidth(selectedTextProperties.width, textSelected, true)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="imageForm.width.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-icon class="col-xs-1" style="padding:12px;height:53px;margin-top:8px;margin-left:-10px" md-svg-src="' + U + '"></md-icon> <md-input-container class="md-block col-xs-3"> <md-tooltip md-delay="200" md-direction="top">Height of the textbox</md-tooltip> <label>H (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="height" ng-model="selectedTextProperties.height" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateHeight(selectedTextProperties.height, textSelected, true)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="imageForm.height.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> </div> <div uib-accordion-group class="panel-default" heading="Color" is-open="accordionsStatus.textColor" ng-click="collapseElementsPanels()"> <h5 class="col-xs-12 mt0 options-subtitle">Fill</h5> <md-input-container class="md-block col-xs-2 mb0"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different color options of this text element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" ng-model="selectedTextProperties.fontColorOption" ng-change="changeFontColorOption()" ng-disabled="selectedTextProperties.Itext" min="1" max="9999999"/> </md-input-container> <md-input-container class="md-block col-xs-2 mb0"> <label>Color</label> <customily-color-picker disabled="textSelected.colorLibraryId || selectedTextProperties.locked" on-change="textFillColorChange" on-save="textFillColorSave" ctrl-methods="textFillColorPicker" color-mode="\'rgb\'"></customily-color-picker> </md-input-container> <div class="col-xs-2 mt9 mb0"> <md-button class="md-raised button-icon" ng-click="startFillColorSampler(textFillColorPicker)" ng-disabled="colorSamplerActive || selectedTextProperties.locked || textSelected.colorLibraryId"> <md-icon md-svg-src="' + z + '"></md-icon> </md-button> </div> <md-input-container class="md-block col-xs-5 mt9" ng-show="user.ShowLibraries"> <md-button class="col-xs-12 md-raised" ng-show="!textSelected.colorLibraryId" ng-click="pickColorLibrary(textSelected)" ng-disabled="!selectedTextProperties.canChangeColorLibrary || selectedTextProperties.locked">Pick Library </md-button> <div class="chip-style md-raised col-xs-12" ng-show="textSelected.colorLibraryId" ng-disabled="!selectedTextProperties.canChangeColorLibrary || selectedTextProperties.locked"> <div class="chip-content"> <div class="chip-text">{{ selectedColorLibraryName }}</div> <md-icon class="chip-icon" md-svg-src="' + N + '" ng-click="removeColorLibrary(textSelected)"></md-icon> <md-tooltip> Remove: {{ selectedColorLibraryName }} </md-tooltip> </div> </div> </md-input-container> <div class="clearfix"></div> <md-input-container class="col-xs-5"> <label>Texture</label> <md-select ng-model="selectedTextProperties.texture" ng-change="changeFontTexture(selectedTextProperties.texture, textSelected)" ng-disabled="selectedTextProperties.locked"> <md-option value="null"> No texture </md-option> <md-option ng-repeat="texture in textures" value="{{ texture.Path }}"> <span style="text-transform:capitalize">{{ texture.Name }}</span> </md-option> </md-select> </md-input-container> <h5 class="col-xs-12 options-subtitle">Stroke</h5> <md-input-container class="md-block col-xs-2"> <label>Width</label> <input required md-no-asterisk type="number" step="1" name="outlineWidth" ng-model="selectedTextProperties.outlineWidth" min="0" max="1000" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-disabled="selectedTextProperties.Itext" ng-change="updateOutlineWidth(selectedTextProperties.outlineWidth, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="userForm.outlineWidth.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">That\'s too small!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-2"> <label>Color</label> <customily-color-picker on-change="textOutlineColorChange" on-save="textOutlineColorSave" ctrl-methods="textOutlineColorPicker" color-mode="\'rgb\'" disabled="user.RightToLeftText || selectedTextProperties.locked || selectedTextProperties.colorLibraryId"></customily-color-picker> </md-input-container> <div class="col-xs-2 mt9"> <md-button class="md-raised button-icon" ng-click="startOutlineColorSampler(textOutlineColorPicker)" ng-disabled="selectedTextProperties.Itext || colorSamplerActive || selectedTextProperties.locked"> <md-icon md-svg-src="' + z + '"></md-icon> </md-button> </div> </div> </uib-accordion> </form> <form ng-show="textSelected && textSelected.type === \'path-itext\'" class="col-xs-12" name="circularTextForm"> <md-input-container class="md-block col-xs-2 mb0"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different elements on the template </md-tooltip> <label>Element Id</label> <input required md-no-asterisk type="number" step="any" name="id" ng-model="selectedTextProperties.id" min="1" max="9999999" ng-disabled="true" ng-disabled="selectedTextProperties.locked"/> </md-input-container> <md-input-container class="md-block col-xs-2 mb0"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different font options of this curved text element </md-tooltip> <label>Font option</label> <input required md-no-asterisk type="number" step="any" ng-model="selectedTextProperties.fontOption" ng-change="changeFontOption()" min="1" max="9999999" ng-disabled="selectedTextProperties.locked"/> </md-input-container> <md-input-container class="md-block col-xs-6 mb0"> <md-tooltip md-delay="200" md-direction="top">This is a sample text and will not appear on the final product</md-tooltip> <label>Type to try the text box</label> <textarea name="text" ng-model="selectedTextProperties.text" ng-change="updateText(selectedTextProperties.text, textSelected)" md-select-on-focus ng-disabled="selectedTextProperties.locked"></textarea> </md-input-container> <div class="clearfix"></div> <uib-accordion close-others="true"> <div uib-accordion-group class="panel-default" heading="Transform" is-open="accordionsStatus.circularTextTransform" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">X value of the path</md-tooltip> <label>X (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerX" ng-model="selectedTextProperties.centerX" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterX(selectedTextProperties.centerX, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="circularTextForm.centerX.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">That\'s too small!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Y value of the path</md-tooltip> <label>Y (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerY" ng-model="selectedTextProperties.centerY" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterY(selectedTextProperties.centerY, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="circularTextForm.centerY.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">That\'s too small!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Angle of rotation of the path</md-tooltip> <label>R (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="rotation" ng-model="selectedTextProperties.rotation" min="-360" max="360" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateRotation(selectedTextProperties.rotation, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="circularTextForm.rotation.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Angle of horizontal skew in degrees</md-tooltip> <label>Skew H (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="skewx" ng-model="selectedTextProperties.skewX" min="-80" max="80" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateSkewX(selectedTextProperties.skewX, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="imageForm.skewx.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Angle of vertical skew in degrees</md-tooltip> <label>Skew V (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="skewy" ng-model="selectedTextProperties.skewY" min="-80" max="80" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateSkewY(selectedTextProperties.skewY, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="imageForm.skewy.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <div class="md-block col-xs-4 text-center"> <md-button class="md-raised button-icon" ng-click="updateZIndex(textSelected.zIndex + 1, textSelected)" ng-disabled="selectedTextProperties.locked || textSelected.isOverlay"> <md-icon md-svg-src="' + L + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element forward</md-tooltip> </md-button> <md-button class="md-raised button-icon" ng-click="updateZIndex(textSelected.zIndex - 1, textSelected)" ng-disabled="selectedTextProperties.locked || textSelected.isOverlay"> <md-icon md-svg-src="' + R + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element backward</md-tooltip> </md-button> </div> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3"> <md-tooltip md-delay="200" md-direction="top">Width of the path</md-tooltip> <label>W (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="width" ng-model="selectedTextProperties.horizontalDiameter" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateWidth(selectedTextProperties.horizontalDiameter, textSelected, true)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="imageForm.width.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-icon class="col-xs-1" style="padding:12px;height:53px;margin-top:8px;margin-left:-10px" md-svg-src="' + U + '"></md-icon> <md-input-container class="md-block col-xs-3"> <md-tooltip md-delay="200" md-direction="top">Height of the path</md-tooltip> <label>H (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="height" ng-model="selectedTextProperties.verticalDiameter" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateHeight(selectedTextProperties.verticalDiameter, textSelected, true)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="imageForm.height.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> </div> <div uib-accordion-group class="panel-default" heading="Color" is-open="accordionsStatus.circularTextColor" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-2"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different color options of this curved text element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" ng-model="selectedTextProperties.fontColorOption" ng-change="changeCircularTextFontColorOption()" min="1" max="9999999"/> </md-input-container> <md-input-container class="md-block col-xs-2"> <label>Color</label> <customily-color-picker disabled="textSelected.colorLibraryId || selectedTextProperties.locked" on-change="textCircularColorFillChange" on-save="textCircularColorFillSave" ctrl-methods="textCircularFillColorPicker" color-mode="\'rgb\'"></customily-color-picker> </md-input-container> <div class="col-xs-2 mt9"> <md-button class="md-raised button-icon" ng-click="startFillColorSampler(textCircularFillColorPicker)" ng-disabled="colorSamplerActive || selectedTextProperties.locked || textSelected.colorLibraryId"> <md-icon md-svg-src="' + z + '"></md-icon> </md-button> </div> <md-input-container class="md-block col-xs-6 mt9" ng-show="user.ShowLibraries"> <md-button class="col-xs-12 md-raised" ng-show="!textSelected.colorLibraryId" ng-click="pickColorLibrary(textSelected)" ng-disabled="!selectedTextProperties.canChangeColorLibrary || selectedTextProperties.locked">Pick Library </md-button> <div class="chip-style md-raised col-xs-12" ng-show="textSelected.colorLibraryId" ng-disabled="!selectedTextProperties.canChangeColorLibrary || selectedTextProperties.locked"> <div class="chip-content"> <div class="chip-text">{{ selectedColorLibraryName }}</div> <md-icon class="chip-icon" md-svg-src="' + N + '" ng-click="removeColorLibrary(textSelected)"></md-icon> <md-tooltip> Remove: {{ selectedColorLibraryName }} </md-tooltip> </div> </div> </md-input-container> </div> </uib-accordion> </form> <form ng-show="svgSelected" class="col-xs-12" name="vectorEPSForm"> <md-input-container class="md-block col-xs-2 mb0"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different elements on the template </md-tooltip> <label>Element Id</label> <input required md-no-asterisk type="number" step="any" name="id" ng-model="selectedSVGProperties.id" min="1" max="9999999" ng-disabled="true"/> </md-input-container> <md-input-container class="md-block col-xs-2 mb0" ng-show="!selectedSVGProperties.allowUserUpload"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different vectors stored in this dynamic vector element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" name="dynamicEPSPosition" ng-model="selectedSVGProperties.position" ng-change="changeDynamicEPSPosition()" min="1" max="9999999"/> </md-input-container> <md-button class="md-raised col-xs-7 mt0 mb0" upload-file input-id="inputFileSVG" ng-show="selectedSVGProperties.allowUserUpload" ng-disabled="selectedSVGProperties.locked"> Try with a SVG, EPS or PDF <div id="uploadSVG" class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="inputFileSVG" type="file" accept=".svg,.eps,.pdf" value="upload" onchange="angular.element(this).scope().displaySVGOnPlaceholder(this.files)"/> </div> </md-button> <md-input-container class="md-block col-xs-4 mt0 mb0" ng-show="!selectedSVGProperties.allowUserUpload"> <md-button class="col-xs-12 md-raised" ng-click="convertVectorEPSOverlay(svgSelected)" ng-disabled="selectedSVGProperties.locked"> Replace with image </md-button> </md-input-container> <div class="clearfix"></div> <uib-accordion close-others="true"> <div uib-accordion-group class="panel-default" heading="Transform" is-open="accordionsStatus.vectorTransform" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top" ng-if="selectedSVGProperties.allowUserUpload">X value of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="!selectedSVGProperties.allowUserUpload">X value of the vector</md-tooltip> <label>X (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerX" ng-model="selectedSVGProperties.centerX" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterX(selectedSVGProperties.centerX, svgSelected)" ng-disabled="selectedSVGProperties.locked"/> <div ng-messages="vectorEPSForm.centerX.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">That\'s too small!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top" ng-if="selectedSVGProperties.allowUserUpload">Y value of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="!selectedSVGProperties.allowUserUpload">Y value of the vector</md-tooltip> <label>Y (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerY" ng-model="selectedSVGProperties.centerY" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterY(selectedSVGProperties.centerY, svgSelected)" ng-disabled="selectedSVGProperties.locked"/> <div ng-messages="vectorEPSForm.centerY.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">That\'s too small!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top" ng-if="selectedSVGProperties.allowUserUpload">Angle of rotation of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="!selectedSVGProperties.allowUserUpload">Angle of rotation of the vector</md-tooltip> <label>R (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="rotation" ng-model="selectedSVGProperties.rotation" min="-360" max="360" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateRotation(selectedSVGProperties.rotation, svgSelected)" ng-disabled="selectedSVGProperties.locked"/> <div ng-messages="vectorEPSForm.rotation.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Angle of horizontal skew in degrees</md-tooltip> <label>Skew H (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="skewx" ng-model="selectedSVGProperties.skewX" min="-80" max="80" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateSkewX(selectedSVGProperties.skewX, svgSelected)" ng-disabled="selectedSVGProperties.locked"/> <div ng-messages="vectorEPSForm.skewx.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Angle of vertical skew in degrees</md-tooltip> <label>Skew V (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="skewx" ng-model="selectedSVGProperties.skewY" min="-80" max="80" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateSkewY(selectedSVGProperties.skewY, svgSelected)" ng-disabled="selectedSVGProperties.locked"/> <div ng-messages="vectorEPSForm.skewy.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <div class="md-block col-xs-4 text-center"> <md-button class="md-raised button-icon" ng-click="updateZIndex(svgSelected.zIndex + 1, svgSelected)" ng-disabled="selectedSVGProperties.locked || svgSelected.isOverlay"> <md-icon md-svg-src="' + L + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element forward</md-tooltip> </md-button> <md-button class="md-raised button-icon" ng-click="updateZIndex(svgSelected.zIndex - 1, svgSelected)" ng-disabled="selectedSVGProperties.locked || svgSelected.isOverlay"> <md-icon md-svg-src="' + R + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element backward</md-tooltip> </md-button> </div> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3"> <md-tooltip md-delay="200" md-direction="top" ng-if="selectedSVGProperties.allowUserUpload">Width of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="!selectedSVGProperties.allowUserUpload">Width of the vector</md-tooltip> <label>W (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="width" ng-model="selectedSVGProperties.width" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateWidth(selectedSVGProperties.width, svgSelected, true)" ng-disabled="selectedSVGProperties.locked"/> <div ng-messages="vectorEPSForm.width.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-icon class="col-xs-1" style="padding:12px;height:53px;margin-top:8px;margin-left:-10px" md-svg-src="' + U + '"></md-icon> <md-input-container class="md-block col-xs-3"> <md-tooltip md-delay="200" md-direction="top" ng-if="selectedSVGProperties.allowUserUpload">Height of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="!selectedSVGProperties.allowUserUpload">Height of the vector</md-tooltip> <label>H (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="height" ng-model="selectedSVGProperties.height" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateHeight(selectedSVGProperties.height, svgSelected, true)" ng-disabled="selectedSVGProperties.locked"/> <div ng-messages="vectorEPSForm.height.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> </div> <div ng-show="!selectedSVGProperties.allowUserUpload && selectedSVGProperties.applyColoring" style="margin-top:5px"> <div uib-accordion-group class="panel-default" heading="Color" is-open="accordionsStatus.vectorMode" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-2"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different color options of this vector element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" name="dynamicEPSColorPosition" ng-model="selectedSVGProperties.colorPosition" ng-change="changeDynamicEPSColorPosition()" min="1" max="9999999"/> </md-input-container> <md-input-container class="md-block col-xs-2"> <label>Color</label> <customily-color-picker disabled="svgSelected.colorLibraryId || selectedSVGProperties.locked" on-change="svgColorChange" on-save="svgColorSave" ctrl-methods="svgColorPicker" color-mode="\'rgb\'"></customily-color-picker> </md-input-container> <md-input-container class="md-block col-xs-5 mt9" ng-show="user.ShowLibraries"> <md-button class="col-xs-12 md-raised" ng-show="!svgSelected.colorLibraryId" ng-click="pickColorLibrary(svgSelected)" ng-disabled="!selectedSVGProperties.canChangeColorLibrary || selectedSVGProperties.locked">Pick Library </md-button> <div class="chip-style md-raised col-xs-12" ng-show="svgSelected.colorLibraryId" ng-disabled="!selectedSVGProperties.canChangeColorLibrary || selectedSVGProperties.locked"> <div class="chip-content"> <div class="chip-text">{{ selectedColorLibraryName }}</div> <md-icon class="chip-icon" md-svg-src="' + N + '" ng-click="removeColorLibrary(svgSelected)"></md-icon> <md-tooltip> Remove: {{ selectedColorLibraryName }} </md-tooltip> </div> </div> </md-input-container> </div> </div> </uib-accordion> </form> <form ng-show="imageSelected" class="col-xs-12" name="imageForm"> <md-input-container class="md-block col-xs-2 mb0"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different elements on the template </md-tooltip> <label>Element Id</label> <input required md-no-asterisk type="number" step="any" name="id" ng-model="selectedImageProperties.id" min="1" max="9999999" ng-disabled="!isPreviewOnlyElement(imageSelected)" ng-change="updateId(selectedImageProperties.id, imageSelected)"/> </md-input-container> <md-input-container ng-show="!imageSelected.dynamicImagesPath && !imageSelected.mapConfig" class="col-xs-5 mt0 mb0"> <md-button class="md-raised col-xs-12" upload-file input-id="inputFileTest" ng-disabled="selectedImageProperties.locked"> Try with an image <div id="uploadImageTest" class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="inputFileTest" type="file" accept=".png,.jpg,.jpeg" multiple="multiple" value="upload" onchange="angular.element(this).scope().uploadImagesOnPlaceholder(this,!0)"/> </div> </md-button> </md-input-container> <div ng-if="(forMyProductBases && !imageSelected.isPrintArea) || !forMyProductBases"> <md-input-container ng-show="imageSelected.dynamicImagesPath" class="md-block col-xs-2 mb0"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different images stored in this dynamic image element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" name="dynamicImageVariation" ng-model="selectedImageProperties.dynamicImageVariation" ng-change="changeVariation()" min="1" max="9999999"/> </md-input-container> <md-input-container ng-show="imageSelected.dynamicImagesPath" class="col-xs-4 mt0 mb0"> <md-button id="uploadImageFile" class="md-raised col-xs-12" ng-disabled="imageSelected.imageLibraryId || selectedImageProperties.locked" upload-file input-id="inputFileTest2"> Upload images <div id="uploadImageTest" class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="inputFileTest2" type="file" accept=".png,.jpg,.jpeg" multiple="multiple" value="upload" onchange="angular.element(this).scope().uploadImagesOnPlaceholder(this)"/> </div> </md-button> </md-input-container> <md-input-container class="md-block col-xs-4 mt0 mb0" ng-show="user.ShowLibraries && imageSelected.dynamicImagesPath"> <md-button class="col-xs-12 md-raised" ng-show="!imageSelected.imageLibraryId" ng-click="pickImageLibrary(imageSelected)" ng-disabled="selectedImageProperties.locked">Pick Library </md-button> <div class="chip-style md-raised col-xs-12" ng-show="imageSelected.imageLibraryId" ng-disabled="selectedImageProperties.locked"> <div class="chip-content"> <div class="chip-text">{{selectedImageLibraryName}}</div> <md-icon class="chip-icon" md-svg-src="' + N + '" ng-click="removeImageLibrary(imageSelected)"></md-icon> <md-tooltip> Remove: {{selectedImageLibraryName}} </md-tooltip> </div> </div> </md-input-container> </div> <div class="clearfix"></div> <uib-accordion close-others="true"> <div uib-accordion-group class="panel-default" heading="Transform" is-open="accordionsStatus.imageTransform" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top" ng-if="!imageSelected.dynamicImagesPath">X value of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="imageSelected.dynamicImagesPath">X value of the image</md-tooltip> <label>X (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerX" ng-model="selectedImageProperties.centerX" min="0" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterX(selectedImageProperties.centerX, imageSelected)" ng-disabled="selectedImageProperties.locked"/> <div ng-messages="imageForm.centerX.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top" ng-if="!imageSelected.dynamicImagesPath">Y value of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="imageSelected.dynamicImagesPath">Y value of the image</md-tooltip> <label>Y (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerY" ng-model="selectedImageProperties.centerY" min="0" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterY(selectedImageProperties.centerY, imageSelected)" ng-disabled="selectedImageProperties.locked"/> <div ng-messages="imageForm.centerY.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top" ng-if="!imageSelected.dynamicImagesPath">Angle of rotation of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="imageSelected.dynamicImagesPath">Angle of rotation of the image</md-tooltip> <label>R (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="rotation" ng-model="selectedImageProperties.rotation" min="-360" max="360" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateRotation(selectedImageProperties.rotation, imageSelected)" ng-disabled="selectedImageProperties.locked"/> <div ng-messages="imageForm.rotation.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Angle of horizontal skew in degrees</md-tooltip> <label>Skew H (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="skewx" ng-model="selectedImageProperties.skewX" min="-80" max="80" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateSkewX(selectedImageProperties.skewX, imageSelected)" ng-disabled="selectedImageProperties.locked"/> <div ng-messages="imageForm.skewx.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Angle of vertical skew in degrees</md-tooltip> <label>Skew V (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="skewy" ng-model="selectedImageProperties.skewY" min="-80" max="80" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateSkewY(selectedImageProperties.skewY, imageSelected)" ng-disabled="selectedImageProperties.locked"/> <div ng-messages="imageForm.skewy.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <div class="md-block col-xs-4 text-center"> <md-button class="md-raised button-icon" ng-click="updateZIndex(imageSelected.zIndex + 1, imageSelected)" ng-disabled="selectedImageProperties.locked || imageSelected.isOverlay"> <md-icon md-svg-src="' + L + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element forward</md-tooltip> </md-button> <md-button class="md-raised button-icon" ng-click="updateZIndex(imageSelected.zIndex - 1, imageSelected)" ng-disabled="selectedImageProperties.locked || imageSelected.isOverlay"> <md-icon md-svg-src="' + R + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element backward</md-tooltip> </md-button> </div> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top" ng-if="!imageSelected.dynamicImagesPath">Width of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="imageSelected.dynamicImagesPath">Width of the image</md-tooltip> <label>W (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="width" ng-model="selectedImageProperties.width" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateWidth(selectedImageProperties.width, imageSelected, !imageSelected.dynamicImagesPath)" ng-disabled="selectedImageProperties.locked"/> <div ng-messages="imageForm.width.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-icon class="col-xs-1" style="padding:12px;height:53px;margin-top:8px;margin-left:-10px" ng-show="!imageSelected.dynamicImagesPath" md-svg-src="' + U + '"></md-icon> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top" ng-if="!imageSelected.dynamicImagesPath">Height of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="imageSelected.dynamicImagesPath">Height of the image</md-tooltip> <label>H (px)</label> <input smart-float required md-no-asterisk type="number" step="any" name="height" ng-model="selectedImageProperties.height" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateHeight(selectedImageProperties.height, imageSelected, !imageSelected.dynamicImagesPath)" ng-disabled="selectedImageProperties.locked"/> <div ng-messages="imageForm.height.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> </div> <div uib-accordion-group class="panel-default" heading="Appearance" is-open="accordionsStatus.imageAppearance" ng-click="collapseElementsPanels()"> <div ng-show="selectedImageProperties.colorGrading || (!selectedImageProperties.fullColor && !selectedImageProperties.colorGrading)"> <md-input-container class="md-block col-xs-2"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different color options of this image element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" name="dynamicImageColorPosition" ng-model="selectedImageProperties.colorPosition" ng-change="changeDynamicImageColorPosition()" min="1" max="9999999"/> </md-input-container> <md-input-container class="md-block col-xs-2"> <label>Color</label> <customily-color-picker disabled="imageSelected.colorLibraryId || selectedImageProperties.locked" on-change="imageColorChange" on-save="imageColorSave" ctrl-methods="imageColorPicker" color-mode="\'rgb\'"></customily-color-picker> </md-input-container> <div class="col-xs-2 mt9"> <md-button class="md-raised button-icon" ng-click="startFillColorSampler(imageColorPicker)" ng-disabled="colorSamplerActive || selectedImageProperties.locked || imageSelected.colorLibraryId"> <md-icon md-svg-src="' + z + '"></md-icon> </md-button> </div> <md-input-container class="md-block col-xs-5 mt9" ng-show="user.ShowLibraries" style="margin-left:7.5px"> <md-button class="col-xs-12 md-raised" ng-show="!imageSelected.colorLibraryId" ng-click="pickColorLibrary(imageSelected)" ng-disabled="selectedImageProperties.locked">Pick Library </md-button> <div class="chip-style md-raised col-xs-12" ng-show="imageSelected.colorLibraryId" ng-disabled="selectedImageProperties.locked"> <div class="chip-content"> <div class="chip-text">{{ selectedColorLibraryName }}</div> <md-icon class="chip-icon" md-svg-src="' + N + '" ng-click="removeColorLibrary(imageSelected)"></md-icon> <md-tooltip> Remove: {{ selectedColorLibraryName }} </md-tooltip> </div> </div> </md-input-container> </div> <md-slider-container class="md-block col-xs-12"> <label>Opacity: {{(selectedImageProperties.opacity * 100) | number: 0}}%</label> <md-slider class="col-xs-12" min="0" max="1" step="0.01" ng-model="selectedImageProperties.opacity" ng-change="updateOpacity(selectedImageProperties.opacity, imageSelected)" ng-disabled="selectedImageProperties.locked"></md-slider> </md-slider-container> </div> </uib-accordion> </form> <div class="col-xs-12" ng-show="svgSelected || imageSelected || textSelected"> <div ng-class="canRemoveSelection ? \'col-xs-10\' : \'col-xs-12\'" style="padding:0"> <md-button class="col-xs-12 md-raised btn-turquise" style="margin-left:0" ng-click="deselectAll()">Done</md-button> </div> <div class="col-xs-2 text-right" style="padding:0" ng-show="canRemoveSelection"> <md-tooltip md-delay="200" md-direction="top"> Delete </md-tooltip> <md-button class="button-icon md-raised btn-dgray" style="margin-right:0" ng-click="deleteSelectedElements()"> <md-icon style="color:#fff" md-svg-src="' + V + '"></md-icon> </md-button> </div> </div> </div> </div> </div> </div> </div> ';
        e.exports = G
    },
    2: function(e, t, i) {
        i("cd49"),
        i("dfb7"),
        i("ae3a"),
        i("c0e3"),
        i("dc89"),
        i("e6b6"),
        i("8065"),
        i("9da8"),
        i("508f"),
        i("fd50"),
        i("3996"),
        i("a8cc"),
        i("ed31"),
        i("6187"),
        i("1255"),
        i("3f02"),
        i("0ccd"),
        i("113e"),
        i("dafb"),
        i("b730"),
        i("8293"),
        i("30ec"),
        i("6a71"),
        i("d585"),
        i("314c"),
        i("37a2"),
        i("eed3"),
        i("52b9"),
        i("7912"),
        i("81aa"),
        i("7509"),
        i("fcd6"),
        i("7bce"),
        i("3e51"),
        i("9020"),
        i("a23b"),
        i("88c3"),
        i("49be"),
        i("5f44"),
        i("2e04"),
        i("db63"),
        i("78fb"),
        i("345b"),
        i("ac78"),
        i("5dcb"),
        i("6d02"),
        i("974f"),
        i("78bc"),
        i("69bb"),
        i("d635"),
        i("f70c"),
        i("4c8f"),
        i("05f05"),
        i("8841"),
        i("0e68"),
        i("44b6"),
        i("6e47"),
        i("adfe"),
        i("5d2e"),
        i("b06f"),
        i("c9fe"),
        i("a9f8"),
        i("ddd7"),
        i("6928"),
        i("5076"),
        i("8057"),
        i("3d50"),
        i("e606"),
        i("8e68"),
        i("a20f"),
        i("bc62"),
        i("c5c6"),
        i("9581"),
        i("d2a9"),
        i("fbff"),
        i("48b9"),
        i("7a30"),
        i("36cd"),
        i("199f"),
        i("3e99"),
        i("5288"),
        i("faa3"),
        i("1bef"),
        i("a243"),
        i("01d5"),
        i("30ae"),
        i("055f"),
        i("7826"),
        e.exports = i("d28f")
    },
    20: function(e, t) {},
    2011: function(e, t, i) {
        e.exports = i.p + "img/dynamic-vector.fa5107e7.svg?x-request=html"
    },
    2251: function(e, t, i) {
        var n = i("4719")
          , o = i("5861")
          , r = i("694b")
          , a = i("0921")
          , s = i("ddea")
          , l = i("7481")
          , c = i("93ce")
          , d = i("7178")
          , u = i("a4fe")
          , p = i("6a98")
          , h = i("9372")
          , m = i("ae64")
          , g = i("2e5a")
          , f = i("7e40")
          , v = i("a1aa")
          , b = i("1b3c")
          , y = i("b8ef")
          , w = i("54c6")
          , C = i("e61f")
          , x = i("d13c")
          , S = i("4408")
          , P = i("a33b")
          , k = i("2011")
          , _ = i("413e")
          , A = i("6d9c")
          , T = n(o)
          , E = n(r)
          , O = n(a)
          , I = n(s)
          , D = n(l)
          , F = n(c)
          , M = n(d)
          , $ = n(u)
          , B = n(p)
          , j = n(h)
          , L = n(m)
          , R = n(g)
          , U = n(f)
          , z = n(v)
          , N = n(b)
          , V = n(y)
          , G = n(w)
          , W = n(C)
          , H = n(x)
          , X = n(S)
          , Y = n(P)
          , q = n(k)
          , K = n(_)
          , Z = n(A)
          , Q = '<title>Step 1/3 - Production file settings</title> <div id="step1-container" class="template-step-container" ng-controller="CreateStepOneCtrl" block-arrows-scroll ng-cloak> <div> <vue-component class="h100 vue-need-bootstrap" name="TemplateProductPodAssignerModal" v-on-save="onPodProductAssigned" v-on-close="onPodProductAssignerClose" v-props-skip-saving="true" ng-if="showPodProductAssignerModal"/> </div> <div class="row h100" style="margin:0!important"> <div class="col-xs-12 h100"> <div class="row h100"> <div class="col-xs-6 h100 template-section"> <div id="fabric-container"> <canvas id="fabric-canvas"></canvas> </div> </div> <div class="col-xs-6 control-panel-wrapper"> <div class="col-xs-12 layers-accordion"> <vue-component class="h100 vue-need-bootstrap" name="Layers" instance="layersInstance" v-on-element-selected="layersElementSelected" v-on-order-updated="layersOrderUpdated" v-on-collapse-toggle="layersCollapseToggle" v-on-element-lock-toggle="layersElementLockToggle" v-on-element-visibility-toggle="layersElementVisibilityToggle" v-on-element-print-area-toggle="layersElementPrintAreaToggle" v-on-element-overlay-toggle="layersElementOverlayToggle" v-on-title-change="layersTitleChange" v-props-canvas="canvas" v-props-is-managed-user="$root.isManagedUser && !user.UserImpersonatedFromId" v-props-show-product-template-controls="user.AccessRoles.Serialized.split(\',\').includes(\'admin\') && forProductTemplateCreation" v-props-allow-changing-overlay="false" v-props-show-overlay-controls="false" v-props-is-design="isUserDesignCreation" v-props-show-groups="enableGroups" v-props-is-able-to-group-or-ungroup="enableGroups"/> </div> <div class="col-xs-12 mt15 mb15" ng-show="!(svgSelected || imageSelected || textSelected) && hasSelectedElement"> <div class="d-flex justify-content-end"> <md-button class="md-raised button-icon panel-button button-align-radius" ng-click="onElementSelectedAlign(\'top\')"> <md-tooltip>Align top</md-tooltip> <md-icon md-svg-src="' + T + '"></md-icon> </md-button> <md-button class="md-raised button-icon panel-button button-align-radius" ng-click="onElementSelectedAlign(\'center\')"> <md-tooltip>Align center</md-tooltip> <md-icon md-svg-src="' + E + '"></md-icon> </md-button> <md-button class="md-raised button-icon panel-button button-align-radius" ng-click="onElementSelectedAlign(\'bottom\')"> <md-tooltip>Align bottom</md-tooltip> <md-icon md-svg-src="' + O + '"></md-icon> </md-button> <md-button class="md-raised button-icon panel-button button-align-radius" ng-click="onElementSelectedAlign(\'left\')"> <md-tooltip>Align left</md-tooltip> <md-icon md-svg-src="' + I + '"></md-icon> </md-button> <md-button class="md-raised button-icon panel-button button-align-radius" ng-click="onElementSelectedAlign(\'middle\')"> <md-tooltip>Align middle</md-tooltip> <md-icon md-svg-src="' + D + '"></md-icon> </md-button> <md-button class="md-raised button-icon panel-button button-align-radius" ng-click="onElementSelectedAlign(\'right\')"> <md-tooltip>Align right</md-tooltip> <md-icon md-svg-src="' + F + '"></md-icon> </md-button> <div class="d-inline-block" style="margin-left:15px"> <md-button class="button-align-element md-raised button-icon panel-button button-align-radius" ng-click="onElementAlingTypeChanged(\'selection\')" ng-class="{\'active\': elementAlignType == \'selection\'}"> <md-tooltip>Align to selection</md-tooltip> <md-icon md-svg-src="' + M + '"></md-icon> </md-button> <md-button class="button-align-element md-raised button-icon panel-button button-align-radius" ng-click="onElementAlingTypeChanged(\'canvas\')" ng-class="{\'active\': elementAlignType == \'canvas\'}"> <md-tooltip>Align to workspace</md-tooltip> <md-icon md-svg-src="' + $ + '"></md-icon> </md-button> </div> </div> </div> <div class="col-xs-12 element-title mt20 mb20" ng-show="svgSelected || imageSelected || textSelected"> <div style="padding-left:15px">{{ getCurrentElementTitle() }}</div> <div style="padding-right:15px" ng-show="(svgSelected || imageSelected || textSelected).locked"> <md-icon md-svg-src="' + B + '"></md-icon> </div> <div style="margin-right:15px" ng-show="!(svgSelected || imageSelected || textSelected).locked"> <md-button class="button-align-element button-icon icon-small button-align-radius" ng-click="onElementSelectedAlign(\'top\')"> <md-tooltip>Align top</md-tooltip> <md-icon md-svg-src="' + T + '"></md-icon> </md-button> <md-button class="button-align-element button-icon icon-small button-align-radius" ng-click="onElementSelectedAlign(\'center\')"> <md-tooltip>Align center</md-tooltip> <md-icon md-svg-src="' + E + '"></md-icon> </md-button> <md-button class="button-align-element button-icon icon-small button-align-radius" ng-click="onElementSelectedAlign(\'bottom\')"> <md-tooltip>Align bottom</md-tooltip> <md-icon md-svg-src="' + O + '"></md-icon> </md-button> <md-button class="button-align-element button-icon icon-small button-align-radius" ng-click="onElementSelectedAlign(\'left\')"> <md-tooltip>Align left</md-tooltip> <md-icon md-svg-src="' + I + '"></md-icon> </md-button> <md-button class="button-align-element button-icon icon-small button-align-radius" ng-click="onElementSelectedAlign(\'middle\')"> <md-tooltip>Align middle</md-tooltip> <md-icon md-svg-src="' + D + '"></md-icon> </md-button> <md-button class="button-align-element button-icon icon-small button-align-radius" ng-click="onElementSelectedAlign(\'right\')"> <md-tooltip>Align right</md-tooltip> <md-icon md-svg-src="' + F + '"></md-icon> </md-button> </div> </div> <form ng-show="textSelected && textSelected.type === \'bounded-text\'" class="col-xs-12" name="userForm"> <md-input-container class="md-block col-xs-2 mb0"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different elements on the template </md-tooltip> <label>Element Id</label> <input required md-no-asterisk type="number" step="any" name="id" ng-model="selectedTextProperties.id" min="1" max="9999999" ng-disabled="!canEditId || selectedTextProperties.locked" ng-change="updateId(selectedTextProperties.id, textSelected)"/> </md-input-container> <md-input-container class="md-block col-xs-6 mb0"> <md-tooltip md-delay="200" md-direction="top">This is a sample text and will not appear on the final product</md-tooltip> <label>Type to try the text box</label> <textarea name="text" ng-model="selectedTextProperties.text" ng-change="updateText(selectedTextProperties.text, textSelected)" md-select-on-focus ng-disabled="selectedTextProperties.locked" ng-trim="false"></textarea> </md-input-container> <md-input-container class="md-block col-xs-4 mb0"> <label>Current text size (pts)</label> <input smart-float ng-model="selectedTextProperties.currentFontSize" min="0" max="9999999" disabled="disabled" ng-readonly="true"/> </md-input-container> <div class="clearfix"></div> <uib-accordion close-others="true"> <div uib-accordion-group class="panel-default" heading="Transform" is-open="accordionsStatus.textTransform" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">X value of the textbox</md-tooltip> <label>X (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerX" ng-model="selectedTextProperties.centerX" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterX(selectedTextProperties.centerX, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="userForm.centerX.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">That\'s too small!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Y value of the textbox</md-tooltip> <label>Y (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerY" ng-model="selectedTextProperties.centerY" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterY(selectedTextProperties.centerY, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="userForm.centerY.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">That\'s too small!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Angle of rotation of the textbox</md-tooltip> <label>R (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="rotation" ng-model="selectedTextProperties.rotation" min="-360" max="360" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateRotation(selectedTextProperties.rotation, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="userForm.rotation.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Angle of horizontal skew in degrees</md-tooltip> <label>Skew H (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="skewx" ng-model="selectedTextProperties.skewX" min="-80" max="80" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateSkewX(selectedTextProperties.skewX, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="userForm.skewx.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Angle of vertical skew in degrees</md-tooltip> <label>Skew V (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="skewy" ng-model="selectedTextProperties.skewY" min="-80" max="80" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateSkewY(selectedTextProperties.skewY, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="userForm.skewy.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <div class="md-block col-xs-4"> <md-button class="md-raised button-icon" ng-click="updateZIndex(textSelected.zIndex + 1, textSelected)" ng-disabled="selectedTextProperties.locked || textSelected.isOverlay"> <md-icon md-svg-src="' + j + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element forward</md-tooltip> </md-button> <md-button class="md-raised button-icon" ng-click="updateZIndex(textSelected.zIndex - 1, textSelected)" ng-disabled="selectedTextProperties.locked || textSelected.isOverlay"> <md-icon md-svg-src="' + L + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element backward</md-tooltip> </md-button> </div> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3"> <md-tooltip md-delay="200" md-direction="top">Width of the textbox</md-tooltip> <label>W (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="width" ng-model="selectedTextProperties.width" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateWidth(selectedTextProperties.width, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="userForm.width.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3"> <md-tooltip md-delay="200" md-direction="top">Height of the textbox</md-tooltip> <label>H (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="height" ng-model="selectedTextProperties.height" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateHeight(selectedTextProperties.height, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="userForm.height.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> </div> <div uib-accordion-group class="panel-default" heading="Character" is-open="accordionsStatus.textCharacter" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-3" style="margin-bottom:0"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different font options of this text element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" ng-model="selectedTextProperties.fontOption" ng-change="changeFontOption()" min="1" max="9999999"/> </md-input-container> <md-input-container class="col-xs-7"> <label>Select a font</label> <md-select ng-disabled="textSelected.fontLibraryId || selectedTextProperties.locked" ng-model="selectedTextProperties.fontPath" md-on-close="isFontSelectOpen=false" md-on-open="isFontSelectOpen=true"> <span ng-repeat="font in fonts | orderBy: \'Name\'" class="font-select-container"> <md-option value="{{font.Path}}" ng-click="updateFont(font.Path, textSelected, true)"> <span class="font-span">{{font.Name}} ({{font.Style}})</span> </md-option> <i class="fa fa-trash" ng-click="deleteFont(font)" ng-if="font.Path.indexOf(\'arial.ttf\') < 0" ng-show="isFontSelectOpen"></i> </span> </md-select> </md-input-container> <div class="col-xs-2 mt9"> <md-button class="md-raised button-icon" upload-file input-id="fontLoader" ng-disabled="uploadingFont || selectedTextProperties.locked"> <md-tooltip md-delay="200" md-direction="top"> Upload font file (ttf or otf) </md-tooltip> <div ng-if="!uploadingFont"> <md-icon md-svg-src="' + R + '"></md-icon> </div> <div class="col-xs-12" style="text-align:center;padding:5px" ng-if="uploadingFont"> <md-progress-circular style="margin:auto" md-mode="determinate" value="{{fontUploadPercent}}" md-diameter="30px"></md-progress-circular> </div> <div id="uploadFont" class="uploadFont" style="height:0;width:0;overflow:hidden;display:none"> <input id="fontLoader" type="file" accept=".ttf,.otf" value="upload" onchange="angular.element(this).scope().uploadFont(this.files)"/> </div> </md-button> </div> <md-input-container class="col-xs-12 mt0" style="padding-bottom:20px;padding-right:30px"> <md-button class="md-raised col-xs-12 m0" ng-show="!textSelected.fontLibraryId" ng-click="pickFontLibrary(textSelected)" ng-disabled="selectedTextProperties.locked"> Pick Library </md-button> <div class="chip-style md-raised col-xs-12 m0" ng-show="textSelected.fontLibraryId" ng-disabled="selectedTextProperties.locked"> <div class="chip-content"> <div class="chip-text">{{selectedFontLibraryName}}</div> <md-icon class="chip-icon" md-svg-src="' + U + '" ng-click="removeFontLibrary(textSelected)"></md-icon> <md-tooltip> {{selectedFontLibraryName}} </md-tooltip> </div> </div> </md-input-container> <div class="clearfix"></div> <md-input-container class="md-block col-xs-4 mt0"> <label>Min size (pts)</label> <input smart-float style="width:70%" required md-no-asterisk type="number" step="any" name="minSizePx" ng-model="selectedTextProperties.minSizePx" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateMinSizePx(selectedTextProperties.minSizePx, textSelected)" ng-disabled="selectedTextProperties.locked"/> <span class="fa fa-eye" style="text-align:center;font-size:15px;cursor:pointer;color:gray" ng-mousedown="forceFontSize(selectedTextProperties.minSizePx, textSelected)" ng-mouseup="resetForceFontSize(textSelected)"></span> <div ng-messages="userForm.minSizePx.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <div class="col-xs-1" style="height:53px;display:flex;justify-content:center;align-content:center;flex-direction:column;margin-left:-30px;margin-top:-9px"> to </div> <md-input-container class="md-block col-xs-4 mt0"> <label>Max size (pts)</label> <input smart-float style="width:70%" required md-no-asterisk type="number" step="any" name="maxSizePx" ng-model="selectedTextProperties.maxSizePx" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateMaxSizePx(selectedTextProperties.maxSizePx, textSelected)" ng-disabled="selectedTextProperties.locked"/> <span class="fa fa-eye" style="text-align:center;font-size:15px;cursor:pointer;color:gray" ng-mousedown="forceFontSize(selectedTextProperties.maxSizePx, textSelected)" ng-mouseup="resetForceFontSize(textSelected)"></span> <div ng-messages="userForm.maxSizePx.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mt0"> <label>Horizontal Alignment</label> <md-select ng-model="selectedTextProperties.textAlign" ng-change="updateTextAlign(selectedTextProperties.textAlign, textSelected)" ng-disabled="selectedTextProperties.locked || selectedTextProperties.Itext"> <md-option ng-value="\'left\'"> Left </md-option> <md-option ng-value="\'right\'"> Right </md-option> <md-option ng-value="\'center\'"> Center </md-option> <md-option ng-value="\'justify\'"> Justify </md-option> </md-select> </md-input-container> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3 mb0"> <label>Vertical Alignment</label> <md-select ng-model="selectedTextProperties.textVerticalAlign" ng-change="updateTextVerticalAlign(selectedTextProperties.textVerticalAlign, textSelected)" ng-disabled="selectedTextProperties.locked || selectedTextProperties.Itext"> <md-option ng-value="\'top\'"> Top </md-option> <md-option ng-value="\'center\'"> Center </md-option> <md-option ng-value="\'bottom\'"> Bottom </md-option> </md-select> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <label>Tracking</label> <input smart-float required md-no-asterisk type="number" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" step="any" name="tracking" ng-model="selectedTextProperties.tracking" ng-change="updateTracking(selectedTextProperties.tracking, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="userForm.tracking.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <label>Line Spacing (%)</label> <input smart-float required md-no-asterisk type="number" min="1" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" step="any" name="lineSpacing" ng-model="selectedTextProperties.lineSpacing" ng-change="updateLineSpacing(selectedTextProperties.lineSpacing, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="userForm.lineSpacing.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> </div> </md-input-container> <div class="clearfix"></div> <md-input-container class="md-block col-xs-4"> <md-checkbox ng-model="selectedTextProperties.multiline" ng-change="updateMultiline(selectedTextProperties.multiline, textSelected)" class="col-xs-12" ng-disabled="selectedTextProperties.locked"> Automatic Multiline </md-checkbox> </md-input-container> <md-input-container class="md-block col-xs-5"> <md-checkbox ng-model="selectedTextProperties.caps" ng-change="updateCaps(selectedTextProperties.caps, textSelected)" class="col-xs-12" ng-disabled="selectedTextProperties.locked"> All caps </md-checkbox> </md-input-container> <div class="clearfix"></div> </div> <div uib-accordion-group class="panel-default" heading="Color" is-open="accordionsStatus.textColor" ng-click="collapseElementsPanels()"> <h5 class="col-xs-12 mt0 options-subtitle">Fill</h5> <md-input-container class="md-block col-xs-2"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different color options of this text element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" ng-model="selectedTextProperties.fontColorOption" ng-change="changeFontColorOption()" min="1" max="9999999"/> </md-input-container> <md-input-container class="md-block col-xs-2"> <label>Color</label> <customily-color-picker disabled="textSelected.colorLibraryId || selectedTextProperties.locked" on-change="textFillColorChange" on-save="textFillColorSave" ctrl-methods="textFillColorPicker" color-mode="page.exportColorMode"></customily-color-picker> </md-input-container> <div class="col-xs-2 mt9"> <md-button ng-disabled="textSelected.colorLibraryId || selectedTextProperties.locked" class="md-raised button-icon" ng-click="startFillColorSampler(textFillColorPicker)"> <md-icon md-svg-src="' + z + '"></md-icon> </md-button> </div> <md-input-container class="md-block col-xs-6 mt9" ng-show="user.ShowLibraries"> <md-button class="col-xs-12 md-raised" ng-show="!textSelected.colorLibraryId" ng-click="pickColorLibrary(textSelected)" ng-disabled="selectedTextProperties.locked">Pick Library </md-button> <div class="chip-style md-raised col-xs-12" ng-show="textSelected.colorLibraryId" ng-disabled="selectedTextProperties.locked"> <div class="chip-content"> <div class="chip-text">{{selectedColorLibraryName}}</div> <md-icon class="chip-icon" md-svg-src="' + U + '" ng-click="removeColorLibrary(textSelected)"></md-icon> <md-tooltip> {{selectedColorLibraryName}} </md-tooltip> </div> </div> </md-input-container> <div class="clearfix"></div> <h5 class="col-xs-12 mt0 options-subtitle">Stroke</h5> <md-input-container class="md-block col-xs-2"> <label>Width</label> <input required md-no-asterisk type="number" step="1" name="outlineWidth" ng-model="selectedTextProperties.outlineWidth" min="0" max="20000" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-disabled="selectedTextProperties.Itext || selectedTextProperties.locked" ng-change="updateOutlineWidth(selectedTextProperties.outlineWidth, textSelected)"/> <div ng-messages="userForm.outlineWidth.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">That\'s too small!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-2"> <label>Color</label> <customily-color-picker on-change="textOutlineColorChange" on-save="textOutlineColorSave" ctrl-methods="textOutlineColorPicker" color-mode="page.exportColorMode" disabled="user.Itext || selectedTextProperties.locked"></customily-color-picker> </md-input-container> <div class="col-xs-2 mt9"> <md-button class="md-raised button-icon" ng-click="startOutlineColorSampler(textOutlineColorPicker)" ng-disabled="selectedTextProperties.Itext || colorSamplerActive || selectedTextProperties.locked"> <md-icon md-svg-src="' + z + '"></md-icon> </md-button> </div> <div class="clearfix"></div> </div> <div uib-accordion-group class="panel-default" heading="Advanced" is-open="accordionsStatus.textAdvanced" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-6 mb0"> <md-tooltip md-delay="200" md-direction="top"> Add fixed text before the personalization </md-tooltip> <label>Prefix</label> <input ng-model="selectedTextProperties.prefix" ng-change="updatePrefix(selectedTextProperties.prefix, textSelected)" ng-trim="false"/> </md-input-container> <md-input-container class="md-block col-xs-4 mb0"> <md-tooltip md-delay="200" md-direction="top"> Add fixed text after the personalization </md-tooltip> <label>Suffix</label> <input ng-model="selectedTextProperties.suffix" ng-change="updateSuffix(selectedTextProperties.suffix, textSelected)" ng-trim="false"/> </md-input-container> <md-input-container class="md-block col-xs-4 mb0" ng-if="page.exportFormat === \'ofm\'"> <md-tooltip md-delay="200" md-direction="top"> Add reference id for integration with Melco platform </md-tooltip> <label>Reference ID</label> <md-select ng-model="selectedTextProperties.referenceId" ng-change="updateMelcoTextId(selectedTextProperties.referenceId, textSelected)"> <md-option ng-repeat="id in melcoTextIds" ng-value="id"> {{ id }} </md-option> </md-select> </md-input-container> <div class="clearfix"></div> </div> </uib-accordion> </form> <form ng-show="textSelected && textSelected.type === \'path-itext\'" class="col-xs-12" name="circularTextForm"> <md-input-container class="md-block col-xs-2 mb0"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different elements on the template </md-tooltip> <label>Element Id</label> <input required md-no-asterisk type="number" step="any" name="id" ng-model="selectedTextProperties.id" ng-disabled="!canEditId || selectedTextProperties.locked" min="1" max="9999999" ng-change="updateId(selectedTextProperties.id, textSelected)"/> </md-input-container> <md-input-container class="md-block col-xs-6 mb0"> <md-tooltip md-delay="200" md-direction="top">This is a sample text and will not appear on the final product</md-tooltip> <label>Type to try the text box</label> <textarea name="text" ng-model="selectedTextProperties.text" ng-change="updateText(selectedTextProperties.text, textSelected)" md-select-on-focus ng-disabled="selectedTextProperties.locked" ng-trim="false"></textarea> </md-input-container> <div class="clearfix"></div> <uib-accordion close-others="true"> <div uib-accordion-group class="panel-default" heading="Transform" is-open="accordionsStatus.circularTextTransform" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">X value of the path</md-tooltip> <label>X (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerX" ng-model="selectedTextProperties.centerX" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterX(selectedTextProperties.centerX, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="circularTextForm.centerX.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">That\'s too small!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Y value of the path</md-tooltip> <label>Y (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerY" ng-model="selectedTextProperties.centerY" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterY(selectedTextProperties.centerY, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="circularTextForm.centerY.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">That\'s too small!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Angle of rotation of the path</md-tooltip> <label>R (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="rotation" ng-model="selectedTextProperties.rotation" min="-360" max="360" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateRotation(selectedTextProperties.rotation, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="circularTextForm.rotation.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3"> <md-tooltip md-delay="200" md-direction="top">Width of the path</md-tooltip> <label>W (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="horizontalDiameter" ng-model="selectedTextProperties.horizontalDiameter" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateHorizontalDiameter(selectedTextProperties.horizontalDiameter, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="circularTextForm.horizontalDiameter.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3"> <md-tooltip md-delay="200" md-direction="top">Height of the path</md-tooltip> <label>H (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="verticalDiameter" ng-model="selectedTextProperties.verticalDiameter" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateVerticalDiameter(selectedTextProperties.verticalDiameter, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="circularTextForm.verticalDiameter.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <div class="md-block col-xs-4"> <md-button class="md-raised button-icon" ng-click="updateZIndex(textSelected.zIndex + 1, textSelected)" ng-disabled="selectedTextProperties.locked || textSelected.isOverlay"> <md-icon md-svg-src="' + j + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element forward</md-tooltip> </md-button> <md-button class="md-raised button-icon" ng-click="updateZIndex(textSelected.zIndex - 1, textSelected)" ng-disabled="selectedTextProperties.locked || textSelected.isOverlay"> <md-icon md-svg-src="' + L + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element backward</md-tooltip> </md-button> </div> </div> <div uib-accordion-group class="panel-default" heading="Character" is-open="accordionsStatus.circularTextCharacter" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-3" style="margin-bottom:0"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different font options of this curved text element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" ng-model="selectedTextProperties.fontOption" ng-change="changeFontOption()" min="1" max="9999999"/> </md-input-container> <md-input-container class="col-xs-7"> <label>Select a font</label> <md-select ng-disabled="textSelected.fontLibraryId || selectedTextProperties.locked" ng-model="selectedTextProperties.fontPath" md-on-close="isFontSelectOpen=false" md-on-open="isFontSelectOpen=true"> <span ng-repeat="font in fonts | orderBy: \'Name\'" class="font-select-container"> <md-option value="{{font.Path}}" ng-click="updateFont(font.Path, textSelected, true)"> <span class="font-span">{{font.Name}} ({{font.Style}})</span> </md-option> <i class="fa fa-trash" ng-click="deleteFont(font)" ng-if="font.Path.indexOf(\'arial.ttf\') < 0" ng-show="isFontSelectOpen"></i> </span> </md-select> </md-input-container> <div class="col-xs-2 mt9"> <md-button class="md-raised button-icon" upload-file input-id="fontLoader" ng-disabled="uploadingFont || selectedTextProperties.locked"> <md-tooltip md-delay="200" md-direction="top"> Upload font file (ttf or otf) </md-tooltip> <div ng-if="!uploadingFont"> <md-icon md-svg-src="' + R + '"></md-icon> </div> <div class="col-xs-12" style="text-align:center;padding:5px" ng-if="uploadingFont"> <md-progress-circular style="margin:auto" md-mode="determinate" value="{{fontUploadPercent}}" md-diameter="30px"></md-progress-circular> </div> <div class="uploadFont" style="height:0;width:0;overflow:hidden;display:none"> <input type="file" accept=".ttf,.otf" value="upload" onchange="angular.element(this).scope().uploadFont(this.files)"/> </div> </md-button> </div> <md-input-container class="col-xs-12 mt0 mb0" style="padding-bottom:40px;padding-right:30px"> <md-button class="md-raised col-xs-12 m0" ng-show="!textSelected.fontLibraryId" ng-click="pickFontLibrary(textSelected)" ng-disabled="selectedTextProperties.locked"> Pick Library </md-button> <div class="chip-style md-raised col-xs-12 m0" ng-show="textSelected.fontLibraryId" ng-disabled="selectedTextProperties.locked"> <div class="chip-content"> <div class="chip-text">{{selectedFontLibraryName}}</div> <md-icon class="chip-icon" md-svg-src="' + U + '" ng-click="removeFontLibrary(textSelected)"></md-icon> <md-tooltip> {{selectedFontLibraryName}} </md-tooltip> </div> </div> </md-input-container> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3 mt0 mb0"> <label>Size (pts)</label> <input smart-float required md-no-asterisk type="number" step="any" name="fontSize" ng-model="selectedTextProperties.fontSize" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="setFontSize(selectedTextProperties.fontSize, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="circularTextForm.fontSize.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mt0 mb0"> <label>Side</label> <md-select ng-model="selectedTextProperties.textSide" ng-change="updateTextSide(selectedTextProperties.textSide, textSelected)" ng-disabled="selectedTextProperties.locked"> <md-option ng-value="\'concave\'"> Concave </md-option> <md-option ng-value="\'convex\'"> Convex </md-option> </md-select> </md-input-container> <md-input-container class="md-block col-xs-4 mt0 mb0"> <md-checkbox ng-model="selectedTextProperties.caps" ng-change="updateCaps(selectedTextProperties.caps, textSelected)" class="col-xs-12" ng-disabled="selectedTextProperties.locked"> All caps </md-checkbox> </md-input-container> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Starting angle for the text string</md-tooltip> <label>String Start (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="startAngle" ng-model="selectedTextProperties.startAngle" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateStartAngle(selectedTextProperties.startAngle, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="circularTextForm.startAngle.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top">Ending angle for the text string</md-tooltip> <label>String End (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="endAngle" ng-model="selectedTextProperties.endAngle" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateEndAngle(selectedTextProperties.endAngle, textSelected)" ng-disabled="selectedTextProperties.locked"/> <div ng-messages="circularTextForm.endAngle.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <label>Alignment</label> <md-select ng-model="selectedTextProperties.textAlign" ng-change="updateTextAlign(selectedTextProperties.textAlign, textSelected)" ng-disabled="selectedTextProperties.locked"> <md-option ng-value="\'left\'"> Left </md-option> <md-option ng-value="\'right\'"> Right </md-option> <md-option ng-value="\'center\'"> Center </md-option> <md-option ng-value="\'justify\'"> Justify </md-option> </md-select> </md-input-container> <div class="clearfix"></div> </div> <div uib-accordion-group class="panel-default" heading="Color" is-open="accordionsStatus.circularTextColor" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-2"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different color options of this curved text element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" ng-model="selectedTextProperties.fontColorOption" ng-change="changeCircularTextFontColorOption()" min="1" max="9999999"/> </md-input-container> <md-input-container class="md-block col-xs-2"> <label>Color</label> <customily-color-picker disabled="textSelected.colorLibraryId || selectedTextProperties.locked" on-change="textCircularColorFillChange" on-save="textCircularColorFillSave" ctrl-methods="textCircularFillColorPicker" color-mode="page.exportColorMode"></customily-color-picker> </md-input-container> <div class="col-xs-2 mt9"> <md-button class="md-raised button-icon" ng-click="startFillColorSampler(textCircularFillColorPicker)" ng-disabled="textSelected.colorLibraryId || colorSamplerActive || selectedTextProperties.locked"> <md-icon md-svg-src="' + z + '"></md-icon> </md-button> </div> <md-input-container class="md-block col-xs-5 mt9" ng-show="user.ShowLibraries"> <md-button class="col-xs-12 md-raised" ng-show="!textSelected.colorLibraryId" ng-click="pickColorLibrary(textSelected)" ng-disabled="selectedTextProperties.locked">Pick Library </md-button> <div class="chip-style md-raised col-xs-12" ng-show="textSelected.colorLibraryId" ng-disabled="selectedTextProperties.locked"> <div class="chip-content"> <div class="chip-text">{{selectedColorLibraryName}}</div> <md-icon class="chip-icon" md-svg-src="' + U + '" ng-click="removeColorLibrary(textSelected)"></md-icon> <md-tooltip> {{selectedColorLibraryName}} </md-tooltip> </div> </div> </md-input-container> </div> <div uib-accordion-group class="panel-default" heading="Advanced" is-open="accordionsStatus.circularTextAdvanced" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-6 mb0"> <md-tooltip md-delay="200" md-direction="top"> Add fixed text before the personalization </md-tooltip> <label>Prefix</label> <input ng-model="selectedTextProperties.prefix" ng-change="updatePrefix(selectedTextProperties.prefix, textSelected)" ng-trim="false"/> </md-input-container> <md-input-container class="md-block col-xs-4 mb0"> <md-tooltip md-delay="200" md-direction="top"> Add fixed text after the personalization </md-tooltip> <label>Suffix</label> <input ng-model="selectedTextProperties.suffix" ng-change="updateSuffix(selectedTextProperties.suffix, textSelected)" ng-trim="false"/> </md-input-container> <md-input-container class="md-block col-xs-4 mb0" ng-if="page.exportFormat === \'ofm\'"> <md-tooltip md-delay="200" md-direction="top"> Add reference id for integration with Melco platform </md-tooltip> <label>Reference ID</label> <md-select ng-model="selectedTextProperties.referenceId" ng-change="updateMelcoTextId(selectedTextProperties.referenceId, textSelected)"> <md-option ng-repeat="id in melcoTextIds" ng-value="id"> {{ id }} </md-option> </md-select> </md-input-container> <div class="clearfix"></div> </div> </uib-accordion> <div class="clearfix"></div> </form> <form ng-show="imageSelected" class="col-xs-12" name="imageForm"> <md-input-container class="md-block col-xs-2 mb0"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different elements on the template </md-tooltip> <label>Element Id</label> <input required md-no-asterisk type="number" step="any" name="id" ng-model="selectedImageProperties.id" min="1" max="9999999" ng-disabled="!canEditId || selectedImageProperties.locked" ng-change="updateId(selectedImageProperties.id, imageSelected)"/> </md-input-container> <md-input-container class="md-block col-xs-2 mb0" ng-show="imageSelected.dynamicImagesPath"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different images stored in this dynamic image element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" name="dynamicImageVariation" ng-model="selectedImageProperties.dynamicImageVariation" ng-change="changeVariation()" min="1" max="9999999"/> </md-input-container> <md-input-container class="col-xs-5 mt0 mb0" ng-show="!imageSelected.dynamicImagesPath && !imageSelected.mapConfig"> <md-button class="md-raised col-xs-12" upload-file input-id="inputFileTest" ng-disabled="selectedImageProperties.locked"> Try with an image <div id="uploadImageTest" class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="inputFileTest" type="file" accept=".png,.jpg,.jpeg" value="upload" onchange="angular.element(this).scope().uploadImagesOnPlaceholder(this)"/> </div> </md-button> </md-input-container> <md-input-container class="col-xs-4 mt0 mb0" ng-show="imageSelected.dynamicImagesPath"> <md-button class="md-raised col-xs-12" upload-file input-id="uploadDynamicImages" ng-disabled="selectedImageProperties.locked || imageSelected.imageLibraryId || imageSelected.isColorOptions"> Upload images <div class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="uploadDynamicImages" type="file" accept=".png,.jpg,.jpeg" multiple="multiple" value="upload" onchange="angular.element(this).scope().uploadImagesOnPlaceholder(this)"/> </div> </md-button> </md-input-container> <md-input-container class="md-block col-xs-4 mt0 mb0" ng-show="user.ShowLibraries && imageSelected.dynamicImagesPath && !forMyProductBases"> <md-button class="col-xs-12 md-raised" ng-show="!imageSelected.imageLibraryId" ng-click="pickImageLibrary(imageSelected)" ng-disabled="selectedImageProperties.locked || imageSelected.isColorOptions">Pick Library </md-button> <div class="chip-style md-raised col-xs-12" ng-show="imageSelected.imageLibraryId" ng-disabled="selectedImageProperties.locked"> <div class="chip-content"> <div class="chip-text">{{selectedImageLibraryName}}</div> <md-icon class="chip-icon" md-svg-src="' + U + '" ng-click="removeImageLibrary(imageSelected)"></md-icon> <md-tooltip> {{selectedImageLibraryName}} </md-tooltip> </div> </div> </md-input-container> <div class="clearfix"></div> <uib-accordion close-others="true"> <div uib-accordion-group class="panel-default" heading="Transform" is-open="accordionsStatus.imageTransform" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top" ng-if="!imageSelected.dynamicImagesPath">X value of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="imageSelected.dynamicImagesPath">X value of the image</md-tooltip> <label>X (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerX" ng-model="selectedImageProperties.centerX" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterX(selectedImageProperties.centerX, imageSelected)" ng-disabled="selectedImageProperties.locked"/> <div ng-messages="imageForm.centerX.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">That\'s too small!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top" ng-if="!imageSelected.dynamicImagesPath">Y value of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="imageSelected.dynamicImagesPath">Y value of the image</md-tooltip> <label>Y (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerY" ng-model="selectedImageProperties.centerY" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterY(selectedImageProperties.centerY, imageSelected)" ng-disabled="selectedImageProperties.locked"/> <div ng-messages="imageForm.centerY.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">That\'s too small!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top" ng-if="!imageSelected.dynamicImagesPath">Angle of rotation of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="imageSelected.dynamicImagesPath">Angle of rotation of the image</md-tooltip> <label>R (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="rotation" ng-model="selectedImageProperties.rotation" min="-360" max="360" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateRotation(selectedImageProperties.rotation, imageSelected)" ng-disabled="selectedImageProperties.locked"/> <div ng-messages="imageForm.rotation.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3"> <md-tooltip md-delay="200" md-direction="top" ng-if="!imageSelected.dynamicImagesPath">Width of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="imageSelected.dynamicImagesPath">Width of the image</md-tooltip> <label>W (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="width" ng-model="selectedImageProperties.width" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateWidth(selectedImageProperties.width, imageSelected)" ng-disabled="selectedImageProperties.locked"/> <div ng-messages="imageForm.width.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3"> <md-tooltip md-delay="200" md-direction="top" ng-if="!imageSelected.dynamicImagesPath">Height of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="imageSelected.dynamicImagesPath">Height of the image</md-tooltip> <label>H (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="height" ng-model="selectedImageProperties.height" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateHeight(selectedImageProperties.height, imageSelected)" ng-disabled="selectedImageProperties.locked"/> <div ng-messages="imageForm.height.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <div class="md-block col-xs-4"> <md-button class="md-raised button-icon" ng-click="updateZIndex(imageSelected.zIndex + 1, imageSelected)" ng-disabled="selectedImageProperties.locked || imageSelected.isOverlay"> <md-icon md-svg-src="' + j + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element forward</md-tooltip> </md-button> <md-button class="md-raised button-icon" ng-click="updateZIndex(imageSelected.zIndex - 1, imageSelected)" ng-disabled="selectedImageProperties.locked || imageSelected.isOverlay"> <md-icon md-svg-src="' + L + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element backward</md-tooltip> </md-button> </div> </div> <div ng-if="!imageSelected.dynamicImagesPath && imageSelected.mapConfig" class="mt5"> <div uib-accordion-group class="panel-default" heading="Map Behavior" is-open="accordionsStatus.mapBehavior" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-6 mb0"> <label>Initial Location (lng, lat)</label> <input ng-model="selectedMapProps.coordinates" ng-disabled="true" ng-trim="false"/> </md-input-container> <md-input-container class="col-xs-6 mt0 mb10"> <md-button class="md-raised col-xs-12" ng-click="openMap(imageSelected)" ng-disabled="selectedImageProperties.locked"> Select initial location </md-button> </md-input-container> <md-input-container class="col-xs-12 mt0"> <span> <a href="https://cdn.customily.com/StaticImages/Customily+map+styles.pdf" target="_blank" rel="Map Styles Examples"> Styles available </a> for selection </span> <div style="display:flex;flex-wrap:wrap;margin-top:10px"> <md-checkbox ng-repeat="style in selectedMapProps.availableMapStyles" style="flex:1 0 45%;margin-right:16px" ng-model="selectedMapProps[style.value]" ng-disabled="selectedImageProperties.locked || disableMapStyle(style, imageSelected)" ng-change="updateMapStyleList(style, selectedMapProps[style.value], imageSelected)"> {{ style.label }} </md-checkbox> </div> </md-input-container> </div> </div> <div ng-show="!imageSelected.dynamicImagesPath && !imageSelected.mapConfig" class="mt5"> <div uib-accordion-group class="panel-default" heading="Image Behavior" is-open="accordionsStatus.imageBehavior" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-5"> <label>Image Type</label> <md-select ng-model="selectedImageProperties.imageType" ng-change="updateImageType(selectedImageProperties.imageType, imageSelected)" ng-init="selectedImageProperties.imageType = \'single color\'" ng-disabled="selectedImageProperties.locked"> <md-option ng-value="\'single color\'"> Single Color </md-option> <md-option ng-value="\'grading\'"> Grayscale </md-option> <md-option ng-value="\'full color\'"> Full Color </md-option> </md-select> </md-input-container> <div class="md-block col-xs-5 col-xs-offset-1 mt9"> <md-button class="md-raised col-xs-12" upload-file input-id="maskFileUpload" ng-disabled="selectedImageProperties.locked"> Upload Mask <div class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="maskFileUpload" type="file" accept=".png,.jpg,.jpeg" value="upload" onchange="angular.element(this).scope().uploadMaskImage(this.files)"/> </div> </md-button> <md-button class="md-raised md-warn col-xs-12" ng-click="removeMask(imageSelected)" ng-show="selectedImageProperties.hasMask" ng-disabled="selectedImageProperties.locked"> Remove Mask </md-button> </div> <div class="col-xs-12" style="padding:0" ng-show="!selectedImageProperties.fullColor && !selectedImageProperties.grading"> <md-input-container class="md-block col-xs-2"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different color options of this image element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" name="dynamicImageColorPosition" ng-model="selectedImageProperties.colorPosition" ng-change="changeDynamicImageColorPosition()" min="1" max="9999999"/> </md-input-container> <md-input-container class="md-block col-xs-2"> <label>Color</label> <customily-color-picker disabled="imageSelected.colorLibraryId || selectedImageProperties.locked" on-change="imageColorChange" on-save="imageColorSave" ctrl-methods="imageColorPicker" color-mode="page.exportColorMode" alpha="false"></customily-color-picker> </md-input-container> <div class="col-xs-2 mt9"> <md-button class="md-raised button-icon" ng-click="startFillColorSampler(imageColorPicker)" ng-disabled="imageSelected.colorLibraryId || colorSamplerActive || selectedImageProperties.locked"> <md-icon md-svg-src="' + z + '"></md-icon> </md-button> </div> <md-input-container class="md-block col-xs-5 mt9 ml7" ng-show="user.ShowLibraries"> <md-button class="col-xs-12 md-raised" ng-show="!imageSelected.colorLibraryId" ng-click="pickColorLibrary(imageSelected)" ng-disabled="selectedImageProperties.locked">Pick Library </md-button> <div class="chip-style md-raised col-xs-12" ng-show="imageSelected.colorLibraryId" ng-disabled="selectedImageProperties.locked"> <div class="chip-content"> <div class="chip-text">{{selectedColorLibraryName}}</div> <md-icon class="chip-icon" md-svg-src="' + U + '" ng-click="removeColorLibrary(imageSelected)"></md-icon> <md-tooltip> {{selectedColorLibraryName}} </md-tooltip> </div> </div> </md-input-container> </div> <div class="clearfix"></div> <md-input-container ng-show="!imageSelected.dynamicImagesPath" class="col-xs-5 mb0"> <md-checkbox ng-model="selectedImageProperties.coverMaskArea" ng-change="updateImageCover(selectedImageProperties.coverMaskArea, imageSelected)" ng-disabled="selectedImageProperties.locked"> Fill Area </md-checkbox> <md-tooltip md-delay="200" md-direction="top">Fit will make images fit the placeholder. Fill will stretch images (proportionally) to cover the entire placeholder.</md-tooltip> </md-input-container> <md-input-container class="md-block col-xs-5 mb0" ng-if="!selectedImageProperties.dynamicImagesPath"> <md-checkbox ng-model="selectedImageProperties.rotationLock" ng-change="updateRotationLock(selectedImageProperties.rotationLock, imageSelected)" ng-disabled="selectedImageProperties.locked"> 90 Degree Rotation Lock </md-checkbox> </md-input-container> <md-input-container class="md-block col-xs-5 mb0"> <md-checkbox ng-model="selectedImageProperties.RemoveBackground" ng-change="activateRemoveBG()" ng-disabled="selectedImageProperties.locked || selectedImageProperties.removeBackgroundCOP || selectedImageProperties.CutoutFace"> Remove background with <a target="_blank" href="https://remove.bg">remove.bg</a> </md-checkbox> <md-tooltip md-delay="200" md-direction="top"> Removes any background. Ideal for photos. Needs a <strong>remove.bg</strong> account. </md-tooltip> </md-input-container> <md-input-container class="md-block col-xs-5 mb0"> <md-checkbox ng-if="planIncludesFeature" ng-model="selectedImageProperties.removeBackgroundCOP" ng-change="addFaceCutoutFilter(false)" ng-disabled="selectedImageProperties.locked || selectedImageProperties.RemoveBackground || selectedImageProperties.CutoutFace"> Remove background with <a target="_blank" href="https://www.cutout.pro/face-cutout-bighead-cutout">Cutout.Pro</a> </md-checkbox> <md-tooltip ng-if="planIncludesFeature" md-delay="200" md-direction="top"> Cut face from picture. Needs a <strong>Cutout.pro</strong> account. </md-tooltip> <md-checkbox ng-if="!planIncludesFeature" ng-disabled="true"> Face Cutout with <a target="_blank" href="https://www.cutout.pro/face-cutout-bighead-cutout">Cutout.Pro</a> </md-checkbox> <md-tooltip ng-if="!planIncludesFeature" md-delay="200" md-direction="top"> Your current plan doesn\'t include this feature. Please check your upgrade options with our support team :) </md-tooltip> </md-input-container> <md-input-container class="md-block col-xs-5 mb0"> <md-checkbox ng-if="planIncludesFeature" ng-model="selectedImageProperties.cartoonize" ng-change="addCartoonizeFilter()" ng-disabled="selectedImageProperties.locked"> Cartoonize with <a target="_blank" href="https://vanceai.com">VanceAI</a> </md-checkbox> <md-tooltip ng-if="planIncludesFeature" md-delay="200" md-direction="top"> Cartoonize portraits, works with 1 person or pets. Needs a <strong>VanceAI</strong> account. </md-tooltip> <md-checkbox ng-if="!planIncludesFeature" ng-disabled="true"> Cartoonize with <a target="_blank" href="https://vanceai.com">VanceAI</a> </md-checkbox> <md-tooltip ng-if="!planIncludesFeature" md-delay="200" md-direction="top"> Your current plan doesn\'t include this feature. Please check your upgrade options with our support team :) </md-tooltip> </md-input-container> <md-input-container class="md-block col-xs-5 mb0"> <md-checkbox ng-if="planIncludesFeature" ng-model="selectedImageProperties.CutoutFace" ng-change="addFaceCutoutFilter(true)" ng-disabled="selectedImageProperties.locked || selectedImageProperties.RemoveBackground || selectedImageProperties.removeBackgroundCOP"> Face Cutout with <a target="_blank" href="https://www.cutout.pro/face-cutout-bighead-cutout">Cutout.Pro</a> </md-checkbox> <md-tooltip ng-if="planIncludesFeature" md-delay="200" md-direction="top"> Cut face from picture. Needs a <strong>Cutout.pro</strong> account. </md-tooltip> <md-checkbox ng-if="!planIncludesFeature" ng-disabled="true"> Face Cutout with <a target="_blank" href="https://www.cutout.pro/face-cutout-bighead-cutout">Cutout.Pro</a> </md-checkbox> <md-tooltip ng-if="!planIncludesFeature" md-delay="200" md-direction="top"> Your current plan doesn\'t include this feature. Please check your upgrade options with our support team :) </md-tooltip> </md-input-container> <div ng-if="showApiKeyInput.removeBg"> <md-input-container class="md-block col-xs-8 mb0 ml0" flex-gt-sm> <input type="text" required ng-model="apiKeys.removeBg" placeholder="Insert removebg API key"/> </md-input-container> <md-input-container class="col-xs-4 mt0"> <md-button class="md-raised" ng-click="sendRemoveBgAPIKey()"> Submit API key </md-button> </md-input-container> </div> <div ng-if="showApiKeyInput.vanceAi"> <md-input-container class="md-block col-xs-8 mb0 ml0" flex-gt-sm> <input type="text" required ng-model="apiKeys.vanceAi" placeholder="Insert VanceAI API key"/> </md-input-container> <md-input-container class="col-xs-4 mt0"> <md-button class="md-raised" ng-click="sendVanceAiAPIKey()"> Submit API key </md-button> </md-input-container> </div> <div class="col-xs-5 col-xs-offset-5" ng-if="showApiKeyInput.cutoutPro"> <div ng-if="!creditsSelected"> <md-button class="md-raised" ng-click="openFreeCredits()"> Get 200 credits for free </md-button> <md-button class="md-raised" ng-click="openFreeMonth()"> Get 1 month for free </md-button> </div> <div ng-if="creditsSelected"> <md-input-container class="md-block col-xs-8 mb0 ml0" flex-gt-sm> <input type="text" required ng-model="apiKeys.cutoutPro" placeholder="Insert Cutout Pro API key"/> </md-input-container> <md-input-container class="col-xs-4 mt0"> <md-button class="md-raised" ng-click="sendCutoutproAPIKey()"> Submit API key </md-button> </md-input-container> </div> </div> </div> </div> </uib-accordion> </form> <form ng-show="svgSelected && svgSelected.type === \'vector-placeholder\'" class="col-xs-12" name="vectorEPSForm"> <md-input-container class="md-block col-xs-2 mb0"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different elements on the template </md-tooltip> <label>Element Id</label> <input required md-no-asterisk type="number" step="any" name="id" ng-disabled="!canEditId || selectedSVGProperties.locked" ng-model="selectedSVGProperties.id" min="1" max="9999999" ng-change="updateId(selectedSVGProperties.id, svgSelected)"/> </md-input-container> <md-input-container class="md-block col-xs-2 mb0" ng-show="!selectedSVGProperties.allowUserUpload"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different vectors stored in this dynamic vector element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" name="dynamicEPSPosition" ng-model="selectedSVGProperties.position" ng-change="changeDynamicEPSPosition()" min="1" max="9999999"/> </md-input-container> <md-input-container class="md-block col-xs-4 mt0" ng-show="!selectedSVGProperties.allowUserUpload"> <md-button class="md-raised col-xs-12" upload-file input-id="inputFileEPS" ng-disabled="svgSelected.vectorLibraryId || uploadingVectorEPS || selectedSVGProperties.locked" ng-show="!selectedSVGProperties.allowUserUpload"> <div ng-if="!uploadingVectorEPS">Upload EPS</div> <div id="uploadDynamicEPS" class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="inputFileEPS" type="file" accept=".eps" multiple="multiple" value="upload" onchange="angular.element(this).scope().displayVectorsOnPlaceholder(this.files)"/> </div> <div class="col-xs-12" style="text-align:center;padding:5px" ng-if="uploadingVectorEPS"> <md-progress-circular style="margin:auto" md-mode="determinate" value="{{vectorEPSUploadPercent}}" md-diameter="30px"></md-progress-circular> </div> </md-button> </md-input-container> <md-input-container class="md-block col-xs-4 mt0" ng-show="user.ShowLibraries && !selectedSVGProperties.allowUserUpload"> <md-button class="col-xs-12 md-raised" ng-show="!svgSelected.vectorLibraryId" ng-click="pickVectorLibrary(svgSelected)" ng-disabled="selectedSVGProperties.locked">Pick Library </md-button> <div class="chip-style md-raised col-xs-12" ng-show="svgSelected.vectorLibraryId" ng-disabled="selectedSVGProperties.locked"> <div class="chip-content"> <div class="chip-text">{{selectedVectorLibraryName}}</div> <md-icon class="chip-icon" md-svg-src="' + U + '" ng-click="removeVectorLibrary(svgSelected)"></md-icon> <md-tooltip> {{selectedVectorLibraryName}} </md-tooltip> </div> </div> </md-input-container> <md-button class="md-raised col-xs-7 mt9" upload-file input-id="inputFileSVG" ng-show="selectedSVGProperties.allowUserUpload" ng-disabled="selectedSVGProperties.locked"> Try with a SVG, EPS or PDF <div id="uploadSVG" class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="inputFileSVG" type="file" accept=".svg,.eps,.pdf" value="upload" onchange="angular.element(this).scope().displaySVGOnPlaceholder(this.files)"/> </div> </md-button> <div class="clearfix"></div> <uib-accordion close-others="true"> <div uib-accordion-group class="panel-default" heading="Transform" is-open="accordionsStatus.vectorTransform" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top" ng-if="selectedSVGProperties.allowUserUpload">X value of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="!selectedSVGProperties.allowUserUpload">X value of the vector</md-tooltip> <label>X (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerX" ng-model="selectedSVGProperties.centerX" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterX(selectedSVGProperties.centerX, svgSelected)" ng-disabled="selectedSVGProperties.locked"/> <div ng-messages="vectorEPSForm.centerX.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">That\'s too small!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top" ng-if="selectedSVGProperties.allowUserUpload">Y value of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="!selectedSVGProperties.allowUserUpload">Y value of the vector</md-tooltip> <label>Y (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="centerY" ng-model="selectedSVGProperties.centerY" min="-9999999" max="9999999" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateCenterY(selectedSVGProperties.centerY, svgSelected)" ng-disabled="selectedSVGProperties.locked"/> <div ng-messages="vectorEPSForm.centerY.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">That\'s too small!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3 mb0"> <md-tooltip md-delay="200" md-direction="top" ng-if="selectedSVGProperties.allowUserUpload">Angle of rotation of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="!selectedSVGProperties.allowUserUpload">Angle of rotation of the vector</md-tooltip> <label>R (dg)</label> <input smart-float required md-no-asterisk type="number" step="any" name="rotation" ng-model="selectedSVGProperties.rotation" min="-360" max="360" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/" ng-change="updateRotation(selectedSVGProperties.rotation, svgSelected)" ng-disabled="selectedSVGProperties.locked"/> <div ng-messages="vectorEPSForm.rotation.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">Turn around!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">Turn around!</div> </div> </md-input-container> <div class="clearfix"></div> <md-input-container class="md-block col-xs-3"> <md-tooltip md-delay="200" md-direction="top" ng-if="selectedSVGProperties.allowUserUpload">Width of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="!selectedSVGProperties.allowUserUpload">Width of the vector</md-tooltip> <label>W (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="width" ng-model="selectedSVGProperties.width" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateWidth(selectedSVGProperties.width, svgSelected)" ng-disabled="selectedSVGProperties.locked"/> <div ng-messages="vectorEPSForm.width.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-3"> <md-tooltip md-delay="200" md-direction="top" ng-if="selectedSVGProperties.allowUserUpload">Height of the placeholder</md-tooltip> <md-tooltip md-delay="200" md-direction="top" ng-if="!selectedSVGProperties.allowUserUpload">Height of the vector</md-tooltip> <label>H (mm)</label> <input smart-float required md-no-asterisk type="number" step="any" name="height" ng-model="selectedSVGProperties.height" min="0" max="9999999" ng-pattern="/^\\d+(\\.\\d{1,25})?$/" ng-change="updateHeight(selectedSVGProperties.height, svgSelected)" ng-disabled="selectedSVGProperties.locked"/> <div ng-messages="vectorEPSForm.height.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">This is required!</div> <div ng-message="min">No negative numbers!</div> <div ng-message="pattern">That doesn\'t look like a valid number</div> <div ng-message="max">That\'s too big!</div> </div> </md-input-container> <div class="md-block col-xs-4"> <md-button class="md-raised button-icon" ng-click="updateZIndex(svgSelected.zIndex + 1, svgSelected)" ng-disabled="selectedSVGProperties.locked || svgSelected.isOverlay"> <md-icon md-svg-src="' + j + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element forward</md-tooltip> </md-button> <md-button class="md-raised button-icon" ng-click="updateZIndex(svgSelected.zIndex - 1, svgSelected)" ng-disabled="selectedSVGProperties.locked || svgSelected.isOverlay"> <md-icon md-svg-src="' + L + '"></md-icon> <md-tooltip md-delay="200" md-direction="top">Move element backward</md-tooltip> </md-button> </div> </div> <div ng-show="selectedSVGProperties.allowUserUpload" style="margin-top:5px"> <div uib-accordion-group class="panel-default" heading="Vector Behavior" is-open="accordionsStatus.vectorBehavior" ng-click="collapseElementsPanels()"> <md-input-container class="col-xs-5 mb0"> <md-checkbox ng-model="selectedSVGProperties.coverMaskArea" ng-change="updateVectorCover(selectedSVGProperties.coverMaskArea, svgSelected)" ng-disabled="selectedSVGProperties.locked"> Fill Area </md-checkbox> <md-tooltip md-delay="200" md-direction="top">Fit will make vectors fit the placeholder. Fill will stretch vectors (proportionally) to cover the entire placeholder.</md-tooltip> </md-input-container> <md-input-container class="md-block col-xs-5 mb0"> <md-checkbox ng-model="selectedSVGProperties.rotationLock" ng-change="updateRotationLock(selectedSVGProperties.rotationLock, svgSelected)" ng-disabled="selectedSVGProperties.locked"> 90 Degree Rotation Lock </md-checkbox> </md-input-container> </div> </div> <div ng-show="!selectedSVGProperties.allowUserUpload" style="margin-top:5px"> <div uib-accordion-group class="panel-default" heading="Vector Mode" is-open="accordionsStatus.vectorMode" ng-click="collapseElementsPanels()"> <md-input-container class="md-block col-xs-5"> <label>Vector Type</label> <md-select ng-model="selectedSVGProperties.applyColoring" ng-change="updateVectorColoring(selectedSVGProperties.applyColoring, svgSelected)" ng-disabled="selectedSVGProperties.locked"> <md-option ng-value="false"> Full Color </md-option> <md-option ng-value="true"> Single Color </md-option> </md-select> </md-input-container> <div class="clearfix"></div> <div ng-show="selectedSVGProperties.applyColoring"> <md-input-container class="md-block col-xs-2"> <md-tooltip md-delay="200" md-direction="top"> Number that identifies the different color options of this vector element </md-tooltip> <label>Option</label> <input required md-no-asterisk type="number" step="any" name="dynamicEPSColorPosition" ng-model="selectedSVGProperties.colorPosition" ng-change="changeDynamicEPSColorPosition()" min="1" max="9999999"/> </md-input-container> <md-input-container class="md-block col-xs-2"> <label>Color</label> <customily-color-picker disabled="svgSelected.colorLibraryId || selectedSVGProperties.locked" on-change="svgColorChange" on-save="svgColorSave" ctrl-methods="svgColorPicker" color-mode="page.exportColorMode"></customily-color-picker> </md-input-container> <md-input-container class="md-block col-xs-5 mt9" ng-show="user.ShowLibraries"> <md-button class="col-xs-12 md-raised" ng-show="!svgSelected.colorLibraryId" ng-click="pickColorLibrary(svgSelected)" ng-disabled="selectedSVGProperties.locked">Pick Library </md-button> <div class="chip-style md-raised col-xs-12" ng-show="svgSelected.colorLibraryId" ng-disabled="selectedSVGProperties.locked"> <div class="chip-content"> <div class="chip-text">{{ selectedColorLibraryName }}</div> <md-icon class="chip-icon" md-svg-src="' + U + '" ng-click="removeColorLibrary(svgSelected)"></md-icon> <md-tooltip> {{ selectedColorLibraryName }} </md-tooltip> </div> </div> </md-input-container> </div> </div> </div> </uib-accordion> </form> <div class="col-xs-12 control-panel" ng-show="!textSelected && !imageSelected && !svgSelected"> <div ng-show="!isUserDesignCreation && !forMyProductBases"> <div class="col-xs-12 buttons-container"> <md-button class="md-raised button-icon panel-button" ng-click="addText(false, $event)"> <md-icon md-svg-src="' + N + '"></md-icon> <label>Text Box</label> </md-button> <md-button class="md-raised button-icon panel-button" ng-click="addCircularText($event)"> <md-icon md-svg-src="' + V + '"></md-icon> <label>Curved Text</label> </md-button> <md-button class="md-raised button-icon panel-button" ng-click="addImagePlaceholder($event)"> <md-icon md-svg-src="' + G + '"></md-icon> <label>Image<br/>Placeholder</label> </md-button> <md-button class="md-raised button-icon panel-button" ng-click="addVectorPlaceholder($event)"> <md-icon md-svg-src="' + W + '"></md-icon> <label>Vector<br/>Placeholder</label> </md-button> <md-button class="md-raised button-icon panel-button" ng-click="addMap($event)"> <md-icon md-svg-src="' + H + '"></md-icon> <label>Map</label> </md-button> <md-button class="md-raised button-icon panel-button" ng-click="startImageOrEPSReplace(\'inputFileReplaceBase\')" ng-if="(!$root.isManagedUser || user.UserImpersonatedFromId) && showBaseFileReplace"> <md-icon md-svg-src="' + X + '"></md-icon> <label>Replace<br/>base file</label> </md-button> <div class="uploadImage" style="height:0;width:0;overflow:hidden;display:none" ng-if="!$root.isManagedUser || user.UserImpersonatedFromId"> <input id="inputFileReplaceBase" accept=".eps,.png,.jpg,.jpeg" type="file" value="upload" onchange="angular.element(this).scope().replaceBaseFile(this.files)"/> </div> </div> <div class="col-xs-12 buttons-container"> <md-button class="md-raised button-icon panel-button" ng-click="addDynamicImage($event)"> <md-icon md-svg-src="' + Y + '"></md-icon> <label>Dynamic<br/>Image</label> </md-button> <md-button class="md-raised button-icon panel-button" ng-click="addDynamicEPSPlaceholder($event)"> <md-icon md-svg-src="' + q + '"></md-icon> <label>Dynamic<br/>Vector</label> </md-button> <md-button class="md-raised button-icon panel-button" ng-show="user.RightToLeftText" ng-click="addText(true)"> <md-icon md-svg-src="' + N + '"></md-icon> <label>Right To Left Text</label> </md-button> <md-button class="md-raised button-icon panel-button" style="opacity:0;pointer-events:none" ng-hide="$root.isManagedUser && !user.UserImpersonatedFromId"> </md-button> <md-button class="md-raised button-icon panel-button" style="opacity:0;pointer-events:none"> </md-button> <md-button class="md-raised button-icon panel-button" ng-show="!user.RightToLeftText" style="opacity:0;pointer-events:none"> </md-button> </div> </div> <div class="mt20" ng-show="!isUserDesignCreation"> <form name="exportForm" class="row" ng-show="!forDesignTemplateCreation"> <div class="col-xs-3"> <md-input-container class="md-block"> <label>Export format</label> <md-select ng-model="page.exportFormat" ng-init="page.exportFormat = \'eps\'"> <md-option ng-value="\'eps\'"> EPS </md-option> <md-option ng-value="\'dxf\'"> DXF </md-option> <md-option ng-value="\'pdf\'"> PDF </md-option> <md-option ng-value="\'png\'"> PNG </md-option> <md-option ng-value="\'jpg\'"> JPG </md-option> <md-option ng-value="\'ai\'"> AI </md-option> <md-option ng-value="\'ofm\'"> OFM </md-option> </md-select> </md-input-container> </div> <div class="col-xs-3" ng-if="page.exportFormat === \'ofm\'" style="max-height:70px"> <md-input-container class="md-block mb0" ng-class="{ true: \'\', false: \'md-input-invalid\' }[melcoIsValidId]"> <label style="padding-left:0">Reference ID</label> <input required md-no-asterisk type="text" name="referenceId" ng-model="page.referenceId" ng-change="updateMelcoDesignId(page.referenceId)" ng-class="{ true: \'\', false: \'ng-invalid\' }[melcoIsValidId]" minlength="7"/> </md-input-container> </div> <div class="col-xs-3" style="max-height:70px"> <md-input-container class="md-block" ng-if="page.exportFormat !== \'png\' && page.exportFormat !== \'jpg\'"> <label>Color mode</label> <md-select ng-model="page.exportColorMode" ng-change="changeColorMode(page.exportColorMode)"> <md-option ng-value="\'rgb\'"> RGB </md-option> <md-option ng-value="\'cmyk\'"> CMYK </md-option> </md-select> </md-input-container> <md-input-container class="md-block" ng-if="page.exportFormat === \'png\' || page.exportFormat === \'jpg\'"> <label style="overflow:unset">Export resolution</label> <input required md-no-asterisk type="number" step="1" name="exportResolution" ng-model="exportPPI" ng-change="setExportPPI(exportPPI)" min="0" max="1200"/> <div ng-messages="exportForm.exportResolution.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="min">Resolution can\'t be negative</div> <div ng-message="max">The maximum resolution is 1200 PPI</div> </div> <div class="ppi-error" ng-show="pngPpiError"> The export resolution is too high for this template size </div> </md-input-container> </div> <div class="col-xs-3"> <md-input-container class="md-block mb0"> <md-checkbox ng-model="page.mirror"> Mirror export </md-checkbox> </md-input-container> </div> <div class="col-xs-3"> <md-input-container class="md-block mb0" ng-if="page.exportFormat === \'dxf\'"> <md-tooltip md-delay="200" md-direction="top"> This traces the outline of all elements as if they were a single, merged element </md-tooltip> <md-checkbox ng-model="page.mergeOutput" class="text-center"> Merge output </md-checkbox> </md-input-container> </div> </form> </div> </div> <div class="col-xs-12" style="padding-left:0;padding-right:0"> <div class="col-xs-12" ng-show="!textSelected && !imageSelected && !svgSelected"> <div class="row" ng-show="!hasSelectedElement && !forDesignTemplateCreation && !createDesignOnTemplate && !groupsSelected.length"> <md-tooltip md-delay="200" md-direction="top" ng-show="forProductTemplateCreation && !hasPrintAreaElements"> Template products need one print area element </md-tooltip> <div class="col-xs-12"> <md-button style="margin:0;padding:0" class="md-raised md-primary w100" ng-click="goToStep2()" ng-disabled="!exportForm.$valid || pngPpiError || (forProductTemplateCreation && !hasPrintAreaElements)">Next<i class="fa fa-arrow-right ml5" aria-hidden="true"></i></md-button> </div> </div> <div class="row" ng-show="!hasSelectedElement && forDesignTemplateCreation"> <div class="col-xs-12"> <md-button style="margin:0;padding:0" class="md-raised md-primary w100" ng-click="goToStep2(true)">Save Design </md-button> </div> </div> <div class="row" ng-show="!hasSelectedElement && createDesignOnTemplate"> <div class="col-xs-12"> <md-button style="margin:0;padding:0" class="md-raised md-primary w100" ng-click="goToStep2()">Save </md-button> </div> </div> </div> <div style="display:flex;justify-content:flex-start;flex-wrap:nowrap;padding-left:7px;padding-right:22px" ng-show="svgSelected || imageSelected || textSelected || groupsSelected.length || hasSelectedElement"> <md-button class="button-icon md-raised btn-dgray col-xs-1" ng-hide="groupsSelected.length" ng-click="cloneSelectedElements()"> <md-tooltip md-delay="200" md-direction="top"> Duplicate </md-tooltip> <md-icon style="color:#fff" md-svg-src="' + K + '"></md-icon> </md-button> <md-button class="button-icon md-raised btn-dgray col-xs-1" ng-click="deleteSelectedElements()"> <md-tooltip md-delay="200" md-direction="top"> Delete </md-tooltip> <md-icon style="color:#fff" md-svg-src="' + Z + '"></md-icon> </md-button> <div class="col-xs-10" style="padding:0"> <md-button class="w100 md-raised btn-turquise" ng-click="deselectAll()">Done</md-button> </div> </div> </div> </div> </div> </div> </div> </div> ';
        e.exports = Q
    },
    "225e": function(e, t, i) {
        "use strict";
        i("b6a6")
    },
    "22b0": function(e, t, i) {},
    2389: function(e, t, i) {
        e.exports = i.p + "img/loader.18fde410.gif?x-request=html"
    },
    2576: function(e, t, i) {
        "use strict";
        var n = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "store-selector mb-3"
            }, [e.stores && e.stores.length ? i("div", [i("div", {
                staticClass: "mb-1"
            }, [i("b", [e._v(e._s(e.title))])]), i("b-dropdown", {
                ref: "storesDropdown",
                attrs: {
                    text: e.storeSelectorTitle,
                    split: "",
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.onStoresDropdownClick()
                    }
                }
            }, e._l(e.filteredStores, (function(t) {
                return i("b-dropdown-item", {
                    key: t.Id,
                    attrs: {
                        active: e.storeUrl == t.Url,
                        value: t.Url
                    },
                    on: {
                        click: function(i) {
                            return e.setStoreUrl(t.Url)
                        }
                    }
                }, [i("div", [e._v(e._s(t.Url))])])
            }
            )), 1)], 1) : e._e(), e.stores && e.stores.length || !e.noStoresText ? e._e() : i("div", [i("div", {
                staticClass: "mb-1"
            }, [i("b", [e._v(e._s(e.noStoresText))])])])])
        }
          , o = []
          , r = i("9ab4")
          , a = i("60a3");
        let s = class extends a["d"] {
            constructor() {
                super(...arguments),
                this.storeUrl = ""
            }
            onValueChange() {
                this.storeUrl = this.value
            }
            onStoresChange() {
                this.filteredStores.length ? this.storeUrl = this.filteredStores[0].Url : this.storeUrl = ""
            }
            get storeSelectorTitle() {
                return this.storeUrl
            }
            get filteredStores() {
                return this.stores.filter(e=>!!this.includeNoBilling || e.HasBilling)
            }
            setStoreUrl(e) {
                this.storeUrl !== e && (this.storeUrl = e,
                this.$emit("change", e))
            }
            onStoresDropdownClick() {
                this.$refs.storesDropdown.show()
            }
            created() {
                this.filteredStores.length && this.setStoreUrl(this.filteredStores[0].Url)
            }
        }
        ;
        Object(r["b"])([Object(a["c"])({
            default: "Switch stores to browse through your different subscriptions"
        })], s.prototype, "title", void 0),
        Object(r["b"])([Object(a["c"])({
            default: []
        })], s.prototype, "stores", void 0),
        Object(r["b"])([Object(a["c"])({
            default: !1
        })], s.prototype, "includeNoBilling", void 0),
        Object(r["b"])([Object(a["c"])({
            default: ""
        })], s.prototype, "noStoresText", void 0),
        Object(r["b"])([Object(a["b"])("change")], s.prototype, "value", void 0),
        Object(r["b"])([Object(a["e"])("value")], s.prototype, "onValueChange", null),
        Object(r["b"])([Object(a["e"])("stores")], s.prototype, "onStoresChange", null),
        s = Object(r["b"])([Object(a["a"])({
            name: "StoreSelector"
        })], s);
        var l = s
          , c = l
          , d = (i("a29c"),
        i("2877"))
          , u = Object(d["a"])(c, n, o, !1, null, "0da49ac0", null);
        t["a"] = u.exports
    },
    "25e6": function(e, t, i) {},
    "266b": function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("ec26")
          , o = i("1424");
        const r = (e,t,i)=>{
            const n = {
                width: 0,
                height: 0
            }
              , o = i._artworkWidth / i._artworkHeight;
            let r = t * o;
            return e > 0 && r > e && (r = e),
            r > 0 && (n.width = r,
            n.height = r / o),
            n
        }
        ;
        var a = i("87d4")
          , s = i("c46f")
          , l = i("2ef0");
        const c = 10;
        (function() {
            const e = (e,t,i,n)=>{
                const o = e=>{
                    if (!e.locked) {
                        if (i.DPI) {
                            const e = 25.4;
                            n = n * i.DPI / e
                        }
                        "left" !== t && "up" !== t || (n = -n),
                        "left" === t || "right" === t ? e.set("left", e.left + n) : e.set("top", e.top + n),
                        e.setCoords(),
                        e.fire("modified", e)
                    }
                }
                ;
                if (e) {
                    if ("activeSelection" === e.type)
                        o(e);
                    else if (e.length)
                        for (const t of e)
                            o(t);
                    else
                        e && o(e);
                    i.renderAll()
                }
            }
              , t = (e,t,i,r)=>{
                t.zIndex = e.getObjects().length,
                t.name || (t.name = Object(o["e"])(t)),
                r && (t.uuid = Object(n["a"])(),
                t.name = t.name.trimEnd() + " (cloned)"),
                e.lastElementIdCalculator && i && (t.id = e.lastElementIdCalculator() + 1),
                "bounded-text" === t.type && t.set("version", fabric.BoundedText.prototype.version),
                e.add(t, !1, !1)
            }
              , i = (e,t)=>new Promise(i=>{
                e.clone(e=>{
                    t && (e.isCloned = !0),
                    i(Object(l["cloneDeep"])(e))
                }
                )
            }
            )
              , d = (e,r,a,s=!0,l=!0,c=!0)=>new Promise(async u=>{
                var p;
                const h = []
                  , m = r.filter(e=>!(e instanceof fabric.Object));
                let g = r.filter(e=>e instanceof fabric.Object);
                if (g && g.length > 1) {
                    const o = [];
                    for (const e of g) {
                        const t = await i(e, c);
                        l && (t.left = (a ? e.calcTransformMatrix()[4] : t.left) + 50,
                        t.top = (a ? e.calcTransformMatrix()[5] : t.top) + 50,
                        t.setCoords()),
                        o.push(t)
                    }
                    const r = {};
                    for (const t of o.filter(e=>e.groupId)) {
                        const i = m.find(e=>e.id === t.groupId);
                        if (i)
                            if (c)
                                if (r[t.groupId])
                                    t.set("groupId", r[t.groupId].id);
                                else {
                                    const o = {
                                        ...i,
                                        id: Object(n["a"])(),
                                        uuid: Object(n["a"])(),
                                        name: i.name + " (cloned)"
                                    };
                                    r[t.groupId] = o,
                                    t.set("groupId", o.id),
                                    e.addGroup(o)
                                }
                            else
                                r[t.groupId] = i,
                                e.addGroup(i);
                        else
                            e.elementsGroups.some(e=>e.id === t.groupId) || t.set("groupId", null)
                    }
                    for (const i of o)
                        t(e, i, s, c);
                    if (c) {
                        const t = new fabric.ActiveSelection(o,{
                            canvas: e
                        });
                        t.set("lockUniScaling", !0),
                        e.setActiveObject(t)
                    }
                    e.renderAll(),
                    e.fire("object:pasted", {
                        source: g,
                        cloned: o,
                        isGroup: !0
                    }),
                    h.push(...o, ...Object.values(r)),
                    u(o)
                } else if (g && 1 === g.length) {
                    g = g[0];
                    const o = await i(g, c);
                    l && (o.left = (a ? g.calcTransformMatrix()[4] : o.left) + 50,
                    o.top = (a ? g.calcTransformMatrix()[5] : o.top) + 50,
                    o.setCoords());
                    const r = m.find(e=>e.id === o.groupId);
                    if (r) {
                        const t = {
                            ...r,
                            id: Object(n["a"])(),
                            uuid: Object(n["a"])(),
                            name: r.name + " (cloned)"
                        };
                        o.set("groupId", t.id),
                        e.addGroup(t)
                    } else
                        e.elementsGroups.some(e=>e.id === o.groupId) || o.set("groupId", null);
                    t(e, o, s, c),
                    e.discardActiveObject(),
                    e.setActiveObject(o),
                    e.renderAll(),
                    e.fire("object:pasted", {
                        source: g,
                        cloned: o,
                        isGroup: !1
                    }),
                    h.push(o),
                    u(g)
                } else
                    u();
                c && null !== h && void 0 !== h && h.length && (null === (p = e.undoManager) || void 0 === p || p.add(d, [e, h, a, s, !1, !1], o["f"], [e, h]))
            }
            )
              , u = (e,t)=>{
                const i = {
                    root: document.documentElement
                }
                  , n = new IntersectionObserver(e=>{
                    e.forEach(e=>{
                        t(e.intersectionRatio > 0)
                    }
                    )
                }
                ,i);
                return n.observe(e),
                n
            }
            ;
            fabric.util.pxToPt = function(e) {
                return 72 * e / fabric.DPI
            }
            ,
            fabric.perfLimitSizeTotal = fabric.maxCacheSideLimit ** 2,
            fabric.CanvasEx = fabric.util.createClass(fabric.Canvas, {
                disposed: !1,
                isPreviewStep: !1,
                enableGroups: !0,
                centeredKey: "shiftKey",
                uniScaleKey: "none",
                altActionKey: "ctrlKey",
                allowedElementsToCopy: ["bounded-text", "path-itext", "image-placeholder", "vector-placeholder"],
                lastClipboardObject: null,
                lastElementIdCalculator: null,
                canDeleteObject: null,
                enableCopyPaste: !1,
                fullVisibilityZoom: 1,
                minZoom: .1,
                maxZoom: 10,
                preventOutsideArtworkZoom: !0,
                enableZoom: !0,
                undoManager: null,
                panLimit: .05,
                imageSmoothingEnabled: !0,
                _workspaceExtraScalingX: 1,
                _workspaceExtraScalingY: 1,
                _artworkWidth: 0,
                _artworkHeight: 0,
                _artworkOffsetX: 0,
                _artworkOffsetY: 0,
                _workspaceWidth: 0,
                _workspaceHeight: 0,
                limitCanvasSize: !1,
                maxCanvasSize: 1024,
                minCanvasSize: 1024,
                bgShadowColor: "rgba(0, 0, 0, 0.2)",
                bgShadowBlur: 40,
                _zoomContainerEl: null,
                _zoomDropdownEl: null,
                _zoomTextEl: null,
                _resizeSensor: null,
                _visibilitySensor: null,
                canvasElWidthMm: 0,
                zoomOptions: ["Fit", "Fill", 10, 25, 50, 75, 100, 150, 200, 300],
                _scroll: null,
                _disableVerticalScroll: !1,
                _disableHorizontalScroll: !1,
                seamLessScrollbars: !1,
                DPI: 96,
                artworkTitle: "",
                initialize: function(t, i) {
                    if (i && i.eventContainer) {
                        const t = $("#" + i.eventContainer)
                          , o = t.get(0);
                        o && (o.tabIndex = 1e3),
                        t.on("keydown", async t=>{
                            const o = t.key
                              , r = t.ctrlKey || t.metaKey
                              , a = t.shiftKey;
                            if ("function" !== typeof i.enableCopyPaste && i.enableCopyPaste || "function" === typeof i.enableCopyPaste && i.enableCopyPaste(this.getActiveObjects()))
                                if ("v" === o.toLowerCase() && r && d(this, this.lastClipboardObject, !1),
                                "b" === o.toLowerCase() && r)
                                    d(this, this.lastClipboardObject, !1, !0, !1);
                                else if ("c" === o.toLowerCase() && r)
                                    this.lastClipboardObject = await this._cloneSelection();
                                else if ("d" === o.toLowerCase() && r) {
                                    t.preventDefault(),
                                    t.stopPropagation();
                                    const e = this.getActiveObjects()
                                      , i = this.getActiveObject();
                                    d(this, e, i && "activeSelection" === i.type, !1)
                                } else if ("g" === o.toLowerCase() && r && !a) {
                                    t.preventDefault(),
                                    t.stopPropagation();
                                    const e = this.getActiveObjects();
                                    this.addElementsToGroup(e, {
                                        id: Object(n["a"])(),
                                        uuid: Object(n["a"])(),
                                        locked: !1,
                                        visible: !0,
                                        name: "Layout",
                                        type: this.isPreviewStep ? "preview" : "eps",
                                        zIndex: Math.max(...e.map(e=>e.zIndex)) + 1
                                    })
                                } else if ("g" === o.toLowerCase() && r && a) {
                                    t.preventDefault(),
                                    t.stopPropagation();
                                    const e = this.getActiveObjects();
                                    this.ungroupElements(e)
                                }
                            if ("ArrowLeft" === o)
                                e(this.getActiveObject(), "left", this, this.DPI ? 1 : 20);
                            else if ("ArrowRight" === o)
                                e(this.getActiveObject(), "right", this, this.DPI ? 1 : 20);
                            else if ("ArrowUp" === o)
                                e(this.getActiveObject(), "up", this, this.DPI ? 1 : 20);
                            else if ("ArrowDown" === o)
                                e(this.getActiveObject(), "down", this, this.DPI ? 1 : 20);
                            else if ("Delete" === t.key) {
                                this.removeSelection();
                                const e = new CustomEvent("customily-shortcut-delete");
                                window.dispatchEvent(e)
                            }
                            this.undoManager && r && ("z" !== o.toLowerCase() || a ? ("y" === o.toLowerCase() || "z" === o.toLowerCase() && a) && this.undoManager.redo() : this.undoManager.undo())
                        }
                        )
                    }
                    if (this.callSuper("initialize", t, i),
                    this._scroll = {
                        horizontalScrollbarEl: null,
                        verticalScrollbarEl: null,
                        moveListeners: [],
                        upListeners: [],
                        downListeners: []
                    },
                    this.elementsGroups = [],
                    this._selectedGroups = [],
                    this.enableZoom) {
                        this.removeListeners(),
                        this._zoomWheelListener = this._zoomWheelListener.bind(this),
                        this._zoomMouseDownListener = this._zoomMouseDownListener.bind(this),
                        this._zoomMouseMoveListener = this._zoomMouseMoveListener.bind(this),
                        this._zoomMouseUpListener = this._zoomMouseUpListener.bind(this),
                        window.addEventListener("wheel", e=>{
                            e.ctrlKey && e.preventDefault()
                        }
                        , {
                            passive: !1
                        }),
                        this.upperCanvasEl.addEventListener("wheel", this._zoomWheelListener),
                        this.upperCanvasEl.addEventListener("mousedown", this._zoomMouseDownListener),
                        this.upperCanvasEl.addEventListener("mousemove", this._zoomMouseMoveListener),
                        window.addEventListener("mouseup", this._zoomMouseUpListener),
                        this._initEventListeners(),
                        this._zoomContainerEl = document.createElement("div"),
                        this._zoomContainerEl.classList.add("zoom-container");
                        const e = document.createElement("div");
                        e.classList.add("zoom-viewer"),
                        this._zoomTextEl = document.createElement("div"),
                        this._zoomTextEl.classList.add("zoom-text");
                        const t = document.createElement("div");
                        t.classList.add("zoom-icon");
                        const i = document.createElement("i");
                        if (i.classList.add("fa", "fa-search"),
                        t.append(i),
                        e.append(t),
                        e.append(this._zoomTextEl),
                        this.zoomOptions && this.zoomOptions.length) {
                            this._zoomDropdownEl = document.createElement("div"),
                            this._zoomDropdownEl.classList.add("zoom-dropdown"),
                            this._zoomDropdownEl.style.display = "none";
                            for (const e of this.zoomOptions) {
                                const t = document.createElement("div");
                                t.classList.add("zoom-option"),
                                "string" !== typeof e || "fit" !== e.toLowerCase() && "fill" !== e.toLowerCase() ? (t.innerHTML = e + "%",
                                $(t).on("click", t=>{
                                    this.setRealWorldZoom(e / 100, !1),
                                    t.stopImmediatePropagation(),
                                    $(this._zoomDropdownEl).hide()
                                }
                                )) : (t.innerHTML = e,
                                $(t).on("click", t=>{
                                    if ("fit" === e.toLowerCase())
                                        this.setEffectiveZoom(1);
                                    else {
                                        const e = Math.max(this._workspaceHeight / this._artworkHeight, this._workspaceWidth / this._artworkWidth);
                                        this.setEffectiveZoom(1 * e)
                                    }
                                    t.stopImmediatePropagation(),
                                    $(this._zoomDropdownEl).hide()
                                }
                                )),
                                this._zoomDropdownEl.prepend(t)
                            }
                            this._zoomContainerEl.append(this._zoomDropdownEl),
                            this._zoomContainerEl.addEventListener("click", ()=>{
                                $(this._zoomDropdownEl).is(":visible") ? $(this._zoomDropdownEl).hide() : $(this._zoomDropdownEl).show()
                            }
                            )
                        }
                        this._zoomContainerEl.append(e),
                        this.wrapperEl.append(this._zoomContainerEl),
                        this._initializePanScrollbars()
                    }
                    this.on("object:selected", ()=>{
                        this.discardActiveGroups()
                    }
                    ),
                    this.on("selection:created", ()=>{
                        this.discardActiveGroups()
                    }
                    ),
                    this.on("selection:cleared", ()=>{
                        this.discardActiveGroups()
                    }
                    ),
                    this.on("selection:updated", ()=>{
                        this.discardActiveGroups()
                    }
                    ),
                    this.getVisibleStrokeWidth = function() {
                        const e = this.getWidth() / this.viewportTransform[0]
                          , t = this.getHeight() / this.viewportTransform[3]
                          , i = Math.min(t, e)
                          , n = Math.min(this.getWidth(), this.getHeight())
                          , o = i / n;
                        return o / 3
                    }
                    ,
                    this.getDashedArray = function(e=25) {
                        const t = this.getVisibleStrokeWidth();
                        return [t * e, t * e]
                    }
                    ,
                    this.updateCornerSize = function(e) {
                        if (!e)
                            return;
                        const t = this.getWidth()
                          , i = this.getHeight()
                          , n = (e.getWidth && e.getWidth() || e.width * e.scaleX) * this.viewportTransform[0]
                          , o = (e.getHeight && e.getHeight() || e.height * e.scaleY) * this.viewportTransform[3];
                        let r = (t + i) / 2 * .015;
                        6 * r + r >= n ? r = n / 5 : 6 * r + r >= o && (r = o / 5),
                        r < 1 && (r = 1),
                        e.set("transparentCorners", !0),
                        e.set("cornerSize", r)
                    }
                    ;
                    const o = Object(s["throttle"])(()=>{
                        this._updateWorkspaceSize()
                    }
                    , 200)
                      , r = $(this.wrapperEl).parent().parent();
                    if (r.length) {
                        const e = r.get(0);
                        this._resizeSensor = new a["ResizeSensor"](e,()=>{
                            o()
                        }
                        ),
                        this._visibilitySensor = u(e, ()=>{
                            o()
                        }
                        )
                    } else
                        console.warn("Couldn't find parent for canvas wrapper element");
                    setTimeout(()=>{
                        o()
                    }
                    , 0)
                },
                _updatePanScrollbars: function() {
                    const e = Math.max(this._workspaceWidth, this._workspaceHeight) * this.panLimit;
                    if (this._scroll.horizontalScrollbarEl) {
                        const t = $(this._scroll.horizontalScrollbarEl).width()
                          , i = $(this._scroll.horizontalScrollbarEl).parent().width() - t;
                        let n = 2 * e;
                        if (this.preventOutsideArtworkZoom) {
                            const t = (this._workspaceWidth - this._artworkWidth * this.getZoom() / this.fullVisibilityZoom) / 2;
                            n = 2 * (Math.abs(t) + e)
                        }
                        const o = this.getPan().x + n / 2;
                        let r = i * (o / n);
                        r = i - r,
                        $(this._scroll.horizontalScrollbarEl).css("transform", `translateX(${r}px)`)
                    }
                    if (this._scroll.verticalScrollbarEl) {
                        const t = $(this._scroll.verticalScrollbarEl).height()
                          , i = $(this._scroll.verticalScrollbarEl).parent().height() - t;
                        let n = 2 * e;
                        if (this.preventOutsideArtworkZoom) {
                            const t = (this._workspaceHeight - this._artworkHeight * this.getZoom() / this.fullVisibilityZoom) / 2;
                            n = 2 * (Math.abs(t) + e)
                        }
                        const o = this.getPan().y + n / 2;
                        let r = i * (o / n);
                        r = i - r,
                        $(this._scroll.verticalScrollbarEl).css("transform", `translateY(${r}px)`)
                    }
                },
                _updatePanFromScrollbarPosition: function() {
                    const e = Math.max(this._workspaceWidth, this._workspaceHeight) * this.panLimit;
                    if (this._scroll.horizontalScrollbarEl) {
                        const t = $(this._scroll.horizontalScrollbarEl).width()
                          , i = $(this._scroll.horizontalScrollbarEl).parent().width() - t;
                        let n = new WebKitCSSMatrix($(this._scroll.horizontalScrollbarEl).css("transform")).e;
                        n = i - n;
                        let o = 2 * e;
                        if (this.preventOutsideArtworkZoom) {
                            const t = (this._workspaceWidth - this._artworkWidth * this.getZoom() / this.fullVisibilityZoom) / 2;
                            o = 2 * (Math.abs(t) + e)
                        }
                        const r = n / i * o - o / 2
                          , a = this.getPan();
                        this.setPan(r, a.y)
                    }
                    if (this._scroll.verticalScrollbarEl) {
                        const t = $(this._scroll.verticalScrollbarEl).height()
                          , i = $(this._scroll.verticalScrollbarEl).parent().height() - t;
                        let n = new WebKitCSSMatrix($(this._scroll.verticalScrollbarEl).css("transform")).f;
                        n = i - n;
                        let o = 2 * e;
                        if (this.preventOutsideArtworkZoom) {
                            const t = (this._workspaceHeight - this._artworkHeight * this.getZoom() / this.fullVisibilityZoom) / 2;
                            o = 2 * (Math.abs(t) + e)
                        }
                        const r = n / i * o - o / 2
                          , a = this.getPan();
                        this.setPan(a.x, r)
                    }
                },
                _setScrollThumbListener: function(e, t) {
                    let i = 0
                      , n = 0
                      , o = !1;
                    const r = r=>{
                        r.preventDefault(),
                        r.stopImmediatePropagation(),
                        "horizontal" === e ? (i = r.clientX,
                        n = new WebKitCSSMatrix($(t).css("transform")).e) : (i = r.clientY,
                        n = new WebKitCSSMatrix($(t).css("transform")).f),
                        o = !0
                    }
                    ;
                    this._scroll.downListeners.push(r),
                    t.addEventListener("mousedown", r);
                    const a = ()=>{
                        o = !1
                    }
                    ;
                    this._scroll.upListeners.push(a),
                    window.addEventListener("mouseup", a, {
                        passive: !1
                    });
                    const s = r=>{
                        if (o) {
                            if ("horizontal" === e) {
                                if (this.preventOutsideArtworkZoom && this._disableHorizontalScroll)
                                    return;
                                let e = n + (r.clientX - i);
                                const o = $(t).parent().width() - $(t).width();
                                e < 0 ? e = 0 : e > o && (e = o),
                                $(t).css("transform", `translateX(${e}px)`)
                            } else {
                                if (this.preventOutsideArtworkZoom && this._disableVerticalScroll)
                                    return;
                                let e = n + (r.clientY - i);
                                const o = $(t).parent().height() - $(t).height();
                                e < 0 ? e = 0 : e > o && (e = o),
                                $(t).css("transform", `translateY(${e}px)`)
                            }
                            this._updatePanFromScrollbarPosition(),
                            this.requestRenderAll()
                        }
                    }
                    ;
                    this._scroll.moveListeners.push(s),
                    window.addEventListener("mousemove", s, {
                        passive: !1
                    })
                },
                _initializePanScrollbars: function() {
                    const e = document.createElement("div");
                    e.classList.add("horizontal-scrollbar-container", "scrollbar-container"),
                    this.seamLessScrollbars && e.classList.add("seamless"),
                    this._scroll.horizontalScrollbarEl = document.createElement("div"),
                    this._scroll.horizontalScrollbarEl.classList.add("scrollbar", "horizontal-scrollbar"),
                    e.appendChild(this._scroll.horizontalScrollbarEl);
                    const t = document.createElement("div");
                    t.classList.add("vertical-scrollbar-container", "scrollbar-container"),
                    this.seamLessScrollbars && t.classList.add("seamless"),
                    this._scroll.verticalScrollbarEl = document.createElement("div"),
                    this._scroll.verticalScrollbarEl.classList.add("scrollbar", "vertical-scrollbar"),
                    t.appendChild(this._scroll.verticalScrollbarEl),
                    this.wrapperEl.appendChild(t),
                    this.wrapperEl.appendChild(e),
                    this._setScrollThumbListener("horizontal", this._scroll.horizontalScrollbarEl),
                    this._setScrollThumbListener("vertical", this._scroll.verticalScrollbarEl)
                },
                _getLimitedCanvasSize: function(e, t) {
                    let i = 1;
                    return (e < this.minCanvasSize || t < this.minCanvasSize) && (i = Math.max(e / this.minCanvasSize, t / this.minCanvasSize),
                    e /= i,
                    t /= i,
                    console.log("Scaling up canvas to: " + parseInt(e) + "x" + parseInt(t))),
                    (e > this.maxCanvasSize || t > this.maxCanvasSize) && (i = Math.max(e / this.maxCanvasSize, t / this.maxCanvasSize),
                    e /= i,
                    t /= i,
                    console.log("Scaling down canvas to: " + parseInt(e) + "x" + parseInt(t))),
                    {
                        width: e,
                        height: t,
                        scale: 1 / i
                    }
                },
                _updateWorkspaceSize: function() {
                    const e = $(this.wrapperEl).parent().parent();
                    if (e.length) {
                        const t = e.width()
                          , i = e.height()
                          , n = r(t, i, this);
                        if (n.width && n.height) {
                            this._workspaceExtraScalingX = t / n.width,
                            this._workspaceExtraScalingY = i / n.height;
                            let e = null;
                            this._workspaceWidth = this._artworkWidth * this._workspaceExtraScalingX,
                            this._workspaceHeight = this._artworkHeight * this._workspaceExtraScalingY,
                            this.limitCanvasSize && (e = this._getLimitedCanvasSize(this._workspaceWidth, this._workspaceHeight),
                            this._workspaceWidth = e.width,
                            this._workspaceHeight = e.height,
                            this._artworkWidth = this._artworkWidth * e.scale,
                            this._artworkHeight = this._artworkHeight * e.scale),
                            this._artworkOffsetX = (this._workspaceWidth - this._artworkWidth) / 2,
                            this._artworkOffsetY = (this._workspaceHeight - this._artworkHeight) / 2,
                            this.setWidth(this._workspaceWidth),
                            this.setHeight(this._workspaceHeight),
                            this.limitCanvasSize && (this.setZoom(e.scale),
                            this.fullVisibilityZoom = e.scale),
                            $(this.lowerCanvasEl).css("width", t - c),
                            $(this.upperCanvasEl).css("width", t - c),
                            $(this.wrapperEl).css("width", t),
                            $(this.lowerCanvasEl).css("height", i - c),
                            $(this.upperCanvasEl).css("height", i - c),
                            $(this.wrapperEl).css("height", i),
                            this.canvasElWidthMm = $(this.upperCanvasEl).width() * (1 / 96) * 25.4,
                            this.setEffectiveZoom(.9)
                        }
                    }
                },
                _updateZoomViewer: function() {
                    this._zoomTextEl && $(this._zoomTextEl).text(parseInt(Math.round(100 * this.getRealWorldZoom())) + "%"),
                    this._updatePanScrollbars()
                },
                _limitPanning: function() {
                    if (this.preventOutsideArtworkZoom) {
                        const e = 1e-6
                          , t = this.getZoom();
                        if (this._disableVerticalScroll = !1,
                        this._disableHorizontalScroll = !1,
                        t - this.fullVisibilityZoom < -e)
                            this.centerArtwork(),
                            this._disableVerticalScroll = !0,
                            this._disableHorizontalScroll = !0;
                        else {
                            const t = Math.max(this._workspaceWidth, this._workspaceHeight) * this.panLimit;
                            if (this._workspaceWidth - this._artworkWidth * this.getZoom() / this.fullVisibilityZoom > e)
                                this.centerArtwork({
                                    onlyHorizontal: !0
                                }),
                                this._disableHorizontalScroll = !0;
                            else {
                                const e = (this._workspaceWidth - this._artworkWidth * this.getZoom() / this.fullVisibilityZoom) / 2
                                  , i = this.getPan()
                                  , n = e - t
                                  , o = -e + t;
                                i.x < n ? this.setPan(n, i.y) : i.x > o && this.setPan(o, i.y)
                            }
                            if (this._workspaceHeight - this._artworkHeight * this.getZoom() / this.fullVisibilityZoom > e)
                                this.centerArtwork({
                                    onlyVertical: !0
                                }),
                                this._disableVerticalScroll = !0;
                            else {
                                const e = (this._workspaceHeight - this._artworkHeight * this.getZoom() / this.fullVisibilityZoom) / 2
                                  , i = this.getPan()
                                  , n = e - t
                                  , o = -e + t;
                                i.y < n ? this.setPan(i.x, n) : i.y > o && this.setPan(i.x, o)
                            }
                        }
                        this._scroll.horizontalScrollbarEl && (this._disableHorizontalScroll ? $(this._scroll.horizontalScrollbarEl).css("visibility", "hidden") : $(this._scroll.horizontalScrollbarEl).css("visibility", "")),
                        this._scroll.verticalScrollbarEl && (this._disableVerticalScroll ? $(this._scroll.verticalScrollbarEl).css("visibility", "hidden") : $(this._scroll.verticalScrollbarEl).css("visibility", ""))
                    } else {
                        let e = this.getPan();
                        const t = Math.max(this._workspaceWidth, this._workspaceHeight) * this.panLimit;
                        e.x > t ? (this.setPan(t, e.y),
                        e = this.getPan()) : e.x < -t && (this.setPan(-t, e.y),
                        e = this.getPan()),
                        e.y > t ? this.setPan(e.x, t) : e.y < -t && this.setPan(e.x, -t)
                    }
                },
                getPan: function() {
                    const e = (this._workspaceWidth - this._artworkWidth * this.getZoom() / this.fullVisibilityZoom) / 2 - this._artworkOffsetX
                      , t = (this._workspaceHeight - this._artworkHeight * this.getZoom() / this.fullVisibilityZoom) / 2 - this._artworkOffsetY;
                    return {
                        x: this.viewportTransform[4] - e,
                        y: this.viewportTransform[5] - t
                    }
                },
                setPan: function(e, t) {
                    const i = (this._workspaceWidth - this._artworkWidth * this.getZoom() / this.fullVisibilityZoom) / 2 - this._artworkOffsetX
                      , n = (this._workspaceHeight - this._artworkHeight * this.getZoom() / this.fullVisibilityZoom) / 2 - this._artworkOffsetY;
                    this.viewportTransform[4] = e + i,
                    this.viewportTransform[5] = t + n
                },
                getEffectiveZoom: function() {
                    return this.getZoom() / this.fullVisibilityZoom
                },
                getRealWorldZoom: function() {
                    let e = 1
                      , t = 1;
                    const i = this.getEffectiveZoom();
                    {
                        const t = $(this.upperCanvasEl).width() * (1 / 96) * 25.4
                          , n = this._artworkWidth / this.fullVisibilityZoom
                          , o = n * (1 / this.DPI) * 25.4
                          , r = i * n
                          , a = r * t / n;
                        e = a / o
                    }
                    {
                        const e = $(this.upperCanvasEl).height() * (1 / 96) * 25.4
                          , n = this._artworkHeight / this.fullVisibilityZoom
                          , o = n * (1 / this.DPI) * 25.4
                          , r = i * n
                          , a = r * e / n;
                        t = a / o
                    }
                    return Math.min(e, t)
                },
                setRealWorldZoom: function(e, t) {
                    let i = 1
                      , n = 1;
                    {
                        const t = $(this.upperCanvasEl).width() * (1 / 96) * 25.4
                          , n = this._artworkWidth / this.fullVisibilityZoom
                          , o = n * (1 / this.DPI) * 25.4
                          , r = o * e
                          , a = r * n / t;
                        i = a / n
                    }
                    {
                        const t = $(this.upperCanvasEl).height() * (1 / 96) * 25.4
                          , i = this._artworkHeight / this.fullVisibilityZoom
                          , o = i * (1 / this.DPI) * 25.4
                          , r = o * e
                          , a = r * i / t;
                        n = a / i
                    }
                    this.setEffectiveZoom(Math.max(i, n), t)
                },
                setEffectiveZoom: function(e, t=!0) {
                    t && this.centerArtwork(),
                    this.zoomToPoint({
                        x: this.getWidth() / 2,
                        y: this.getHeight() / 2
                    }, e * this.fullVisibilityZoom),
                    t && this.centerArtwork(),
                    this._limitPanning(),
                    this._updateZoomViewer()
                },
                centerArtwork: function(e) {
                    e = e || {
                        onlyHorizontal: !0,
                        onlyVertical: !0
                    },
                    e.onlyHorizontal && (this.viewportTransform[4] = (this._workspaceWidth - this._artworkWidth * this.getZoom() / this.fullVisibilityZoom) / 2 - this._artworkOffsetX),
                    e.onlyVertical && (this.viewportTransform[5] = (this._workspaceHeight - this._artworkHeight * this.getZoom() / this.fullVisibilityZoom) / 2 - this._artworkOffsetY)
                },
                setArtworkSize: function(e, t) {
                    this._artworkWidth = e,
                    this._artworkHeight = t,
                    this._updateWorkspaceSize()
                },
                getArtworkWidth: function() {
                    return this._artworkWidth
                },
                getArtworkHeight: function() {
                    return this._artworkHeight
                },
                getWorkspaceWidth: function() {
                    return this._workspaceWidth
                },
                getWorkspaceHeight: function() {
                    return this._workspaceHeight
                },
                getCenter: function() {
                    const e = this.getArtworkWidth() / this.getZoom() * this.getEffectiveZoom()
                      , t = this.getArtworkHeight() / this.getZoom() * this.getEffectiveZoom();
                    return {
                        top: t / 2,
                        left: e / 2
                    }
                },
                _cacheTransformEventData: function(e) {
                    const t = this.viewportTransform.slice(0);
                    this.viewportTransform[4] = this.viewportTransform[4] + this._artworkOffsetX,
                    this.viewportTransform[5] = this.viewportTransform[5] + this._artworkOffsetY,
                    this.callSuper("_cacheTransformEventData", e),
                    this.viewportTransform = t
                },
                moveTo: function(e, t) {
                    return this.callSuper("moveTo", e, t),
                    Object(o["o"])(this),
                    this
                },
                add: function() {
                    let e = !0
                      , t = !1
                      , i = []
                      , n = arguments.length - 1;
                    if (arguments.length >= 2 && "boolean" === typeof arguments[n] ? ("boolean" === typeof arguments[n - 1] && (e = arguments[n],
                    n--),
                    t = arguments[n],
                    i = Array.from(arguments).slice(0, n)) : i = arguments,
                    this.callSuper("add", ...i),
                    t || Object(o["o"])(this),
                    this.canDeleteObject)
                        for (const o of i)
                            if (!this.canDeleteObject(o)) {
                                e = !1;
                                break
                            }
                    var r;
                    e && (null === (r = this.undoManager) || void 0 === r || r.add((e,t,...i)=>{
                        this.add.apply(e, [...t, ...i]);
                        let n = t[0];
                        t.length >= 2 ? (n = new fabric.ActiveSelection(t,{
                            canvas: e
                        }),
                        n.set("lockUniScaling", !0)) : e.moveTo(n, n.zIndex),
                        e.discardActiveObject(),
                        e.setActiveObject(n)
                    }
                    , [this, i, t, !1], this.remove.bind(this), [...i]));
                    return this
                },
                renderAll: function() {
                    return this.disposed ? this : this.callSuper("renderAll")
                },
                renderCanvas: function(e, t) {
                    const i = this.viewportTransform.slice(0);
                    this.viewportTransform[4] = this.viewportTransform[4] + this._artworkOffsetX,
                    this.viewportTransform[5] = this.viewportTransform[5] + this._artworkOffsetY;
                    var n = this.viewportTransform
                      , o = this.clipPath;
                    if (this.cancelRequestedRender(),
                    this.calcViewportBoundaries(),
                    this.clearContext(e),
                    this.fire("before:render", {
                        ctx: e
                    }),
                    this.clipTo && fabric.util.clipContext(this, e),
                    e.save(),
                    e.transform(n[0], n[1], n[2], n[3], n[4], n[5]),
                    this.artworkTitle && this.canvasElWidthMm) {
                        const t = 5
                          , i = this._artworkWidth / this.fullVisibilityZoom
                          , n = t * i / this.canvasElWidthMm;
                        e.font = `bold ${n}px Helvetica`,
                        e.fillStyle = "white",
                        e.fillText(this.artworkTitle, 0, -15 / this.fullVisibilityZoom)
                    }
                    const r = new Path2D;
                    r.rect(0, 0, this._artworkWidth / this.fullVisibilityZoom, this._artworkHeight / this.fullVisibilityZoom),
                    e.clip(r),
                    this._renderBackground(e),
                    this._renderObjects(e, t),
                    e.restore(),
                    !this.controlsAboveOverlay && this.interactive && this.drawControls(e),
                    this.clipTo && e.restore(),
                    o && (o.canvas = this,
                    o.shouldCache(),
                    o._transformDone = !0,
                    o.renderCache({
                        forClipping: !0
                    }),
                    this.drawClipPathOnCanvas(e)),
                    this._renderOverlay(e),
                    this.controlsAboveOverlay && this.interactive && this.drawControls(e),
                    this.viewportTransform = i,
                    this.fire("after:render", {
                        ctx: e
                    })
                },
                _renderBackgroundOrOverlay: function(e, t) {
                    var i = this[t + "Color"]
                      , n = this[t + "Image"]
                      , o = this.viewportTransform
                      , r = this[t + "Vpt"];
                    if (i || n) {
                        if (i) {
                            e.save(),
                            this.bgShadowColor && (e.shadowColor = this.bgShadowColor,
                            e.shadowBlur = this.bgShadowBlur),
                            e.beginPath(),
                            e.moveTo(0, 0),
                            e.lineTo(this._artworkWidth / this.fullVisibilityZoom, 0),
                            e.lineTo(this._artworkWidth / this.fullVisibilityZoom, this._artworkHeight / this.fullVisibilityZoom),
                            e.lineTo(0, this._artworkHeight / this.fullVisibilityZoom),
                            e.closePath(),
                            e.fillStyle = i.toLive ? i.toLive(e, this) : i,
                            r && e.transform(o[0], o[1], o[2], o[3], o[4] + (this._artworkOffsetX + i.offsetX || 0), o[5] + (this._artworkOffsetY + i.offsetY || 0));
                            var a = i.gradientTransform || i.patternTransform;
                            a && e.transform(a[0], a[1], a[2], a[3], a[4], a[5]),
                            e.fill(),
                            e.restore()
                        }
                        n && (e.save(),
                        this.bgShadowColor && (e.shadowColor = this.bgShadowColor,
                        e.shadowBlur = this.bgShadowBlur),
                        e.beginPath(),
                        e.moveTo(0, 0),
                        e.lineTo(this._artworkWidth / this.fullVisibilityZoom, 0),
                        e.lineTo(this._artworkWidth / this.fullVisibilityZoom, this._artworkHeight / this.fullVisibilityZoom),
                        e.lineTo(0, this._artworkHeight / this.fullVisibilityZoom),
                        e.closePath(),
                        e.fillStyle = i.toLive ? i.toLive(e, this) : i,
                        r && e.transform(o[0], o[1], o[2], o[3], o[4] + (this._artworkOffsetX + i.offsetX || 0), o[5] + (this._artworkOffsetY + i.offsetY || 0)),
                        e.fill(),
                        e.restore(),
                        e.save(),
                        r && e.transform(1, 0, 0, 1, 0, 0),
                        n.render(e),
                        e.restore())
                    }
                },
                _zoomWheelListener: function(e) {
                    if (e.ctrlKey) {
                        const t = e.deltaY;
                        let i = this.getZoom();
                        i = this.getRealWorldZoom() - t / 1e3,
                        i > this.maxZoom && (i = this.maxZoom),
                        i < this.minZoom && (i = this.minZoom),
                        e.preventDefault(),
                        e.stopImmediatePropagation(),
                        this.setRealWorldZoom(i, !1)
                    } else {
                        const t = this.getPan();
                        let i = e.deltaX
                          , n = e.deltaY;
                        e.preventDefault(),
                        e.stopImmediatePropagation(),
                        i = t.x - i / 5,
                        n = t.y - n / 5,
                        e.shiftKey && (i = t.x - e.deltaY / 5,
                        n = t.y),
                        this.setPan(i, n),
                        this._limitPanning(),
                        this._updatePanScrollbars(),
                        this.requestRenderAll()
                    }
                },
                _zoomMouseDownListener: function(e) {
                    $(this._zoomDropdownEl).hide();
                    let t = this.findTarget(e);
                    if (!0 === e.ctrlKey && (!t || t && !t._findTargetCorner(this.getPointer(e, !0)))) {
                        this.isDragging = !0,
                        this.selection = !1;
                        const t = this.getPointer(e, !0);
                        this.lastPosX = t.x,
                        this.lastPosY = t.y,
                        e.preventDefault(),
                        e.stopImmediatePropagation()
                    }
                },
                _zoomMouseMoveListener: function(e) {
                    if (this.isDragging) {
                        const t = this.getPointer(e, !0);
                        this.viewportTransform[4] += t.x - this.lastPosX,
                        this.viewportTransform[5] += t.y - this.lastPosY,
                        this._limitPanning(),
                        this._updatePanScrollbars(),
                        this.requestRenderAll(),
                        this.lastPosX = t.x,
                        this.lastPosY = t.y
                    }
                },
                _zoomMouseUpListener: function() {
                    this.setViewportTransform(this.viewportTransform),
                    this.isDragging = !1,
                    this.selection = !0
                },
                _cloneSelection: async function() {
                    const e = this.getActiveObjects()
                      , t = [];
                    for (const n of e)
                        if (this.allowedElementsToCopy.includes(n.type)) {
                            const e = await i(n);
                            e.left = n.calcTransformMatrix()[4],
                            e.top = n.calcTransformMatrix()[5],
                            t.push(e)
                        }
                    for (const i of t.filter(e=>e.groupId)) {
                        const e = this.getActiveGroups().find(e=>e.id === i.groupId);
                        e && t.push({
                            ...e
                        })
                    }
                    return t
                },
                cloneSelection: async function() {
                    const e = this.getActiveObject();
                    d(this, await this._cloneSelection(), e && "activeSelection" === e.type, !1)
                },
                removeSelection: function() {
                    var e;
                    const t = this.getActiveObjects().filter(e=>!e.locked)
                      , i = this.getActiveGroups();
                    for (const n of t)
                        this.canDeleteObject ? this.canDeleteObject(n) && (this.discardActiveObject(),
                        this.remove(n)) : (this.discardActiveObject(),
                        this.remove(n));
                    for (const n of i)
                        this.canDeleteObject ? this.canDeleteObject(n) && this.removeGroup(n) : this.removeGroup(n);
                    null === (e = this.undoManager) || void 0 === e || e.add(o["f"], [this, t], (e,t)=>{
                        for (const i of t)
                            this.addGroup.apply(this, i);
                        this.add.call(this, ...e);
                        for (const i of e)
                            this.moveTo(i, i.zIndex)
                    }
                    , [t, i])
                },
                getColorAt: function(e) {
                    const t = this.getPointer(e, !0);
                    let i = t.x * this.getRetinaScaling()
                      , n = t.y * this.getRetinaScaling();
                    const o = this.getContext("2d").getImageData(i, n, 1, 1).data;
                    return {
                        r: o[0],
                        g: o[1],
                        b: o[2],
                        a: o[3]
                    }
                },
                _onDoubleClick: function(e) {
                    const t = this
                      , i = t.findRealTarget(e);
                    t.fire("mouse:dblclick", {
                        target: i,
                        e: e
                    }),
                    i && !t.isDrawingMode && i.fire("object:dblclick", {
                        e: e
                    })
                },
                _containsPointForGroupObject: function(e, t) {
                    var i = this._normalizePointer(t, e);
                    return t.containsPoint(i) || t._findTargetCorner(e)
                },
                _checkTargetForGroupObject: function(e, t) {
                    if (e && e.visible && e.evented && this._containsPointForGroupObject(t, e)) {
                        if (!this.perPixelTargetFind && !e.perPixelTargetFind || e.isEditing)
                            return !0;
                        var i = this.isTargetTransparent(e, t.x, t.y);
                        if (!i)
                            return !0
                    }
                },
                _adjustPointerAccordingToGroupObjects: function(e, t) {
                    var i = t._objects
                      , n = i.length;
                    if (n <= 0)
                        return e;
                    var o, r = 99999, a = 99999;
                    for (o = 0; o < n; o++) {
                        var s = i[o];
                        r > s.left && (r = s.left),
                        a > s.top && (a = s.top)
                    }
                    return e.x += r - t.left,
                    e.y += a - t.top,
                    e
                },
                findRealTarget: function(e) {
                    var t = this;
                    if (t.fireEventForObjectInsideGroup) {
                        var i = t.findTarget(e, !0);
                        if (void 0 !== i && void 0 !== i._objects) {
                            var n = t.getPointer(e, !0)
                              , o = i._objects;
                            n = t._adjustPointerAccordingToGroupObjects(n, i);
                            var r = o.length;
                            while (r--)
                                if (t._checkTargetForGroupObject(o[r], n)) {
                                    i = o[r];
                                    break
                                }
                        }
                    } else
                        i = t.findTarget(e);
                    return i
                },
                toDataURL: function(e) {
                    return e = e || {},
                    e.left = this.viewportTransform[4] + this._artworkOffsetX,
                    e.top = this.viewportTransform[5] + this._artworkOffsetY,
                    e.width = this._artworkWidth * this.getZoom() / this.fullVisibilityZoom,
                    e.height = this._artworkHeight * this.getZoom() / this.fullVisibilityZoom,
                    this.callSuper("toDataURL", e)
                },
                addElementsToGroup: function(e, t, i=!0) {
                    if (this.enableGroups && Object(o["a"])(e)) {
                        this.addGroup(t);
                        for (const i of e)
                            i.set("groupId", t.id),
                            this.fire("object:modified", {
                                target: i
                            });
                        var n;
                        if (Object(o["o"])(this),
                        i)
                            null === (n = this.undoManager) || void 0 === n || n.add((e,t,...i)=>{
                                const n = e.getObjects().filter(e=>t.some(t=>t.uuid == e.uuid));
                                e.addElementsToGroup.apply(e, [n, ...i])
                            }
                            , [this, e, t, !1], this.ungroupElements.bind(this), [e, !1])
                    }
                },
                ungroupElements: function(e, t=!0) {
                    if (!this.enableGroups || !Object(o["b"])(e))
                        return;
                    const i = {}
                      , n = [];
                    for (const o of e) {
                        const {groupId: e} = o;
                        e && (n.push(e),
                        i[e] ? i[e].push(o) : i[e] = [o]),
                        o.set("groupId", null),
                        this.fire("object:modified", {
                            target: o,
                            action: "ungroup"
                        })
                    }
                    const r = Object(o["g"])(this, n);
                    var a;
                    (Object(o["o"])(this),
                    t) && (null === (a = this.undoManager) || void 0 === a || a.add(this.ungroupElements.bind(this), [e, !1], (e,t,i)=>{
                        for (const n of t) {
                            const t = i[n.id];
                            e.addElementsToGroup.apply(e, [t, n, !1])
                        }
                    }
                    , [this, r, i]))
                },
                removeGroup: function(e) {
                    if (!this.enableGroups)
                        return;
                    const t = "string" === typeof e ? this.elementsGroups.findIndex(t=>t.id === e) : this.elementsGroups.indexOf(e);
                    if (t >= 0) {
                        const e = this.elementsGroups[t];
                        return this.elementsGroups.splice(t, 1),
                        this.fire("group:removed", {
                            group: e
                        }),
                        Object(o["o"])(this),
                        e
                    }
                },
                addGroup: function(e, t=!1) {
                    this.enableGroups && (this.elementsGroups.some(t=>t.id === e.id) || (this.elementsGroups.push(e),
                    t || this.fire("group:added", {
                        group: e
                    })),
                    t || Object(o["o"])(this))
                },
                addActiveGroup: function(e, t=!0) {
                    if (this.enableGroups && e && !this._selectedGroups.some(t=>t.id === e.id)) {
                        const i = [...this._selectedGroups, e]
                          , n = i.map(e=>e.id)
                          , r = this.getObjects().filter(e=>n.includes(e.groupId));
                        r.length && Object(o["h"])(r, this, t),
                        this._selectedGroups = i,
                        this.fire("group:selected", {
                            target: e
                        })
                    }
                },
                setActiveGroup: function(e, t=!0) {
                    this.discardActiveGroups(),
                    this.discardActiveObject(),
                    this.addActiveGroup(e, t)
                },
                discardActiveGroups: function() {
                    if (this._selectedGroups.length) {
                        const e = this._selectedGroups;
                        this._selectedGroups = [];
                        for (const t of e)
                            this.fire("group:deselected", {
                                target: t
                            })
                    }
                },
                getActiveGroups: function() {
                    return [...this._selectedGroups]
                },
                getElementsGroups: function() {
                    return [...this.elementsGroups]
                },
                getGroupElements: function(e) {
                    if (!this.enableGroups)
                        return;
                    const t = "string" === typeof e ? this.getObjects().filter(t=>t.groupId === e) : this.getObjects().filter(t=>t.groupId === e.id);
                    return t
                },
                temporaryDiscardActiveObject: function(e) {
                    const t = this.getActiveObjects();
                    this._discardActiveObject(),
                    e();
                    const i = new fabric.ActiveSelection(t,{
                        canvas: this
                    });
                    i.set("lockUniScaling", !0),
                    this._setActiveObject(i)
                },
                getHighestZIndex: function() {
                    const e = [...this.getObjects(), this.getElementsGroups()];
                    return e.length ? Object(s["max"])(e, e=>e.zIndex) : 0
                },
                dispose: function() {
                    var e;
                    if (this.disposed = !0,
                    this.upperCanvasEl.removeEventListener("wheel", this._zoomWheelListener),
                    this.upperCanvasEl.removeEventListener("mousedown", this._zoomMouseDownListener),
                    this.upperCanvasEl.removeEventListener("mousemove", this._zoomMouseMoveListener),
                    window.removeEventListener("mouseup", this._zoomMouseUpListener),
                    this._resizeSensor && this._resizeSensor.detach(),
                    this._visibilitySensor && this._visibilitySensor.disconnect(),
                    this._scroll.horizontalScrollbarEl) {
                        for (const e of this._scroll.moveListeners)
                            window.removeEventListener("mousemove", e);
                        for (const e of this._scroll.upListeners)
                            window.removeEventListener("mouseup", e);
                        for (const e of this._scroll.downListeners)
                            this._scroll.horizontalScrollbarEl.removeEventListener("mousedown", e)
                    }
                    if (this._scroll.verticalScrollbarEl) {
                        for (const e of this._scroll.moveListeners)
                            window.removeEventListener("mousemove", e);
                        for (const e of this._scroll.upListeners)
                            window.removeEventListener("mouseup", e);
                        for (const e of this._scroll.downListeners)
                            this._scroll.verticalScrollbarEl.removeEventListener("mousedown", e)
                    }
                    this._scroll = null,
                    null === (e = this.undoManager) || void 0 === e || e.clear(),
                    this.callSuper("dispose")
                }
            })
        }
        )()
    },
    "26f8": function(e, t) {
        (function(e, t) {
            "use strict";
            var i = {
                rgb: {
                    r: [0, 255],
                    g: [0, 255],
                    b: [0, 255]
                },
                hsv: {
                    h: [0, 360],
                    s: [0, 100],
                    v: [0, 100]
                },
                hsl: {
                    h: [0, 360],
                    s: [0, 100],
                    l: [0, 100]
                },
                cmy: {
                    c: [0, 100],
                    m: [0, 100],
                    y: [0, 100]
                },
                cmyk: {
                    c: [0, 100],
                    m: [0, 100],
                    y: [0, 100],
                    k: [0, 100]
                },
                Lab: {
                    L: [0, 100],
                    a: [-128, 127],
                    b: [-128, 127]
                },
                XYZ: {
                    X: [0, 100],
                    Y: [0, 100],
                    Z: [0, 100]
                },
                alpha: {
                    alpha: [0, 1]
                },
                HEX: {
                    HEX: [0, 16777215]
                }
            }
              , n = {}
              , o = {}
              , r = {
                X: [.4124564, .3575761, .1804375],
                Y: [.2126729, .7151522, .072175],
                Z: [.0193339, .119192, .9503041],
                R: [3.2404542, -1.5371385, -.4985314],
                G: [-.969266, 1.8760108, .041556],
                B: [.0556434, -.2040259, 1.0572252]
            }
              , a = {
                r: .298954,
                g: .586434,
                b: .114612
            }
              , s = {
                r: .2126,
                g: .7152,
                b: .0722
            }
              , l = e.Math
              , c = (e.parseInt,
            e.Colors = function(e) {
                this.colors = {
                    RND: {}
                },
                this.options = {
                    color: "rgba(204, 82, 37, 0.8)",
                    XYZMatrix: r,
                    grey: a,
                    luminance: s,
                    valueRanges: i
                },
                d(this, e || {})
            }
            )
              , d = function(e, i) {
                var n, r, a = e.options;
                for (var s in u(e),
                i)
                    i[s] !== t && (a[s] = i[s]);
                n = a.XYZMatrix,
                i.XYZReference || (a.XYZReference = {
                    X: n.X[0] + n.X[1] + n.X[2],
                    Y: n.Y[0] + n.Y[1] + n.Y[2],
                    Z: n.Z[0] + n.Z[1] + n.Z[2]
                }),
                r = a.customBG,
                a.customBG = "string" === typeof r ? g.txt2color(r).rgb : r,
                o = p(e.colors, a.color, t, !0)
            }
              , u = function(e) {
                n !== e && (n = e,
                o = e.colors)
            };
            function p(e, n, r, a, s) {
                if ("string" === typeof n) {
                    n = g.txt2color(n);
                    r = n.type,
                    o[r] = n[r],
                    s = s !== t ? s : n.alpha
                } else if (n)
                    for (var l in n)
                        e[r][l] = "Lab" === r ? C(n[l], i[r][l][0], i[r][l][1]) : C(n[l] / i[r][l][1], 0, 1);
                return s !== t && (e.alpha = C(+s, 0, 1)),
                m(r, a ? e : t)
            }
            function h(e, t, i) {
                var o = n.options.grey
                  , r = {};
                return r.RGB = {
                    r: e.r,
                    g: e.g,
                    b: e.b
                },
                r.rgb = {
                    r: t.r,
                    g: t.g,
                    b: t.b
                },
                r.alpha = i,
                r.equivalentGrey = l.round(o.r * e.r + o.g * e.g + o.b * e.b),
                r.rgbaMixBlack = y(t, {
                    r: 0,
                    g: 0,
                    b: 0
                }, i, 1),
                r.rgbaMixWhite = y(t, {
                    r: 1,
                    g: 1,
                    b: 1
                }, i, 1),
                r.rgbaMixBlack.luminance = b(r.rgbaMixBlack, !0),
                r.rgbaMixWhite.luminance = b(r.rgbaMixWhite, !0),
                n.options.customBG && (r.rgbaMixCustom = y(t, n.options.customBG, i, 1),
                r.rgbaMixCustom.luminance = b(r.rgbaMixCustom, !0),
                n.options.customBG.luminance = b(n.options.customBG, !0)),
                r
            }
            function m(e, t) {
                var r, a, s, c = l, d = t || o, u = g, p = n.options, m = i, C = d.RND, x = "", S = "", P = {
                    hsl: "hsv",
                    cmyk: "cmy",
                    rgb: e
                }, k = C.rgb;
                if ("alpha" !== e) {
                    for (var _ in m)
                        if (!m[_][_])
                            for (x in e !== _ && "XYZ" !== _ && (S = P[_] || "rgb",
                            d[_] = u[S + "2" + _](d[S])),
                            C[_] || (C[_] = {}),
                            r = d[_],
                            r)
                                C[_][x] = c.round(r[x] * ("Lab" === _ ? 1 : m[_][x][1]));
                    "Lab" !== e && delete d._rgb,
                    k = C.rgb,
                    d.HEX = u.RGB2HEX(k),
                    d.equivalentGrey = p.grey.r * d.rgb.r + p.grey.g * d.rgb.g + p.grey.b * d.rgb.b,
                    d.webSave = a = f(k, 51),
                    d.webSmart = s = f(k, 17),
                    d.saveColor = k.r === a.r && k.g === a.g && k.b === a.b ? "web save" : k.r === s.r && k.g === s.g && k.b === s.b ? "web smart" : "",
                    d.hueRGB = u.hue2RGB(d.hsv.h),
                    t && (d.background = h(k, d.rgb, d.alpha))
                }
                var A, T, E, O, I, D, F, M = d.rgb, $ = d.alpha, B = "luminance", j = d.background, L = y, R = b, U = w, z = v;
                return A = L(M, {
                    r: 0,
                    g: 0,
                    b: 0
                }, $, 1),
                A[B] = R(A, !0),
                d.rgbaMixBlack = A,
                T = L(M, {
                    r: 1,
                    g: 1,
                    b: 1
                }, $, 1),
                T[B] = R(T, !0),
                d.rgbaMixWhite = T,
                p.allMixDetails && (A.WCAG2Ratio = U(A[B], 0),
                T.WCAG2Ratio = U(T[B], 1),
                p.customBG && (E = L(M, p.customBG, $, 1),
                E[B] = R(E, !0),
                E.WCAG2Ratio = U(E[B], p.customBG[B]),
                d.rgbaMixCustom = E),
                O = L(M, j.rgb, $, j.alpha),
                O[B] = R(O, !0),
                d.rgbaMixBG = O,
                I = L(M, j.rgbaMixBlack, $, 1),
                I[B] = R(I, !0),
                I.WCAG2Ratio = U(I[B], j.rgbaMixBlack[B]),
                I.luminanceDelta = c.abs(I[B] - j.rgbaMixBlack[B]),
                I.hueDelta = z(j.rgbaMixBlack, I, !0),
                d.rgbaMixBGMixBlack = I,
                D = L(M, j.rgbaMixWhite, $, 1),
                D[B] = R(D, !0),
                D.WCAG2Ratio = U(D[B], j.rgbaMixWhite[B]),
                D.luminanceDelta = c.abs(D[B] - j.rgbaMixWhite[B]),
                D.hueDelta = z(j.rgbaMixWhite, D, !0),
                d.rgbaMixBGMixWhite = D),
                p.customBG && (F = L(M, j.rgbaMixCustom, $, 1),
                F[B] = R(F, !0),
                F.WCAG2Ratio = U(F[B], j.rgbaMixCustom[B]),
                d.rgbaMixBGMixCustom = F,
                F.luminanceDelta = c.abs(F[B] - j.rgbaMixCustom[B]),
                F.hueDelta = z(j.rgbaMixCustom, F, !0)),
                d.RGBLuminance = R(k),
                d.HUELuminance = R(d.hueRGB),
                p.convertCallback && p.convertCallback(d, e),
                d
            }
            c.prototype.setColor = function(e, i, n) {
                return u(this),
                e ? p(this.colors, e, i, t, n) : (n !== t && (this.colors.alpha = C(n, 0, 1)),
                m(i))
            }
            ,
            c.prototype.getColor = function(e) {
                var i = this.colors
                  , n = 0;
                if (e) {
                    e = e.split(".");
                    while (i[e[n]])
                        i = i[e[n++]];
                    e.length !== n && (i = t)
                }
                return i
            }
            ,
            c.prototype.setCustomBackground = function(e) {
                return u(this),
                this.options.customBG = "string" === typeof e ? g.txt2color(e).rgb : e,
                p(this.colors, t, this.colors.colorMode)
            }
            ,
            c.prototype.saveAsBackground = function() {
                return u(this),
                p(this.colors, t, this.colors.colorMode, !0)
            }
            ,
            c.prototype.convertColor = function(e, t) {
                var n = g
                  , o = i
                  , r = t.split("2")
                  , a = r[0]
                  , s = r[1]
                  , c = /(?:RG|HS|CM|LA)/
                  , d = c.test(a)
                  , u = c.test(s)
                  , p = {
                    LAB: "Lab"
                }
                  , h = function(e, t, i) {
                    var n = {}
                      , r = "Lab" === t ? 1 : 0;
                    for (var a in e)
                        n[a] = i ? l.round(e[a] * (r || o[t][a][1])) : e[a] / (r || o[t][a][1]);
                    return n
                };
                return a = o[a] ? a : p[a] || a.toLowerCase(),
                s = o[s] ? s : p[s] || s.toLowerCase(),
                d && "RGB2HEX" !== t && (e = h(e, a)),
                e = a === s ? e : n[a + "2" + s] ? n[a + "2" + s](e, !0) : "HEX" === s ? n.RGB2HEX("RGB2HEX" === t ? e : h("rgb" === a ? e : n[a + "2rgb"](e, !0), "rgb", !0)) : n["rgb2" + s](n[a + "2rgb"](e, !0), !0),
                u && (e = h(e, s, !0)),
                e
            }
            ,
            c.prototype.toString = function(e, t) {
                return g.color2text((e || "rgb").toLowerCase(), this.colors, t)
            }
            ;
            var g = {
                txt2color: function(e) {
                    var t = {}
                      , n = e.replace(/(?:#|\)|%)/g, "").split("(")
                      , o = (n[1] || "").split(/,\s*/)
                      , r = n[1] ? n[0].substr(0, 3) : "rgb"
                      , a = "";
                    if (t.type = r,
                    t[r] = {},
                    n[1])
                        for (var s = 3; s--; )
                            a = r[s] || r.charAt(s),
                            t[r][a] = +o[s] / i[r][a][1];
                    else
                        t.rgb = g.HEX2rgb(n[0]);
                    return t.alpha = o[3] ? +o[3] : 1,
                    t
                },
                color2text: function(e, t, i) {
                    var n = !1 !== i && l.round(100 * t.alpha) / 100
                      , o = "number" === typeof n && !1 !== i && (i || 1 !== n)
                      , r = t.RND.rgb
                      , a = t.RND.hsl
                      , s = "hex" === e && o
                      , c = "hex" === e && !s
                      , d = "rgb" === e || s
                      , u = d ? r.r + ", " + r.g + ", " + r.b : c ? "#" + t.HEX : a.h + ", " + a.s + "%, " + a.l + "%";
                    return c ? u : (s ? "rgb" : e) + (o ? "a" : "") + "(" + u + (o ? ", " + n : "") + ")"
                },
                RGB2HEX: function(e) {
                    return ((e.r < 16 ? "0" : "") + e.r.toString(16) + (e.g < 16 ? "0" : "") + e.g.toString(16) + (e.b < 16 ? "0" : "") + e.b.toString(16)).toUpperCase()
                },
                HEX2rgb: function(e) {
                    return e = e.split(""),
                    {
                        r: +("0x" + e[0] + e[e[3] ? 1 : 0]) / 255,
                        g: +("0x" + e[e[3] ? 2 : 1] + (e[3] || e[1])) / 255,
                        b: +("0x" + (e[4] || e[2]) + (e[5] || e[2])) / 255
                    }
                },
                hue2RGB: function(e) {
                    var t = l
                      , i = 6 * e
                      , n = ~~i % 6
                      , o = 6 === i ? 0 : i - n;
                    return {
                        r: t.round(255 * [1, 1 - o, 0, 0, o, 1][n]),
                        g: t.round(255 * [o, 1, 1, 1 - o, 0, 0][n]),
                        b: t.round(255 * [0, 0, o, 1, 1, 1 - o][n])
                    }
                },
                rgb2hsv: function(e) {
                    var t, i, n, r = l, a = e.r, s = e.g, c = e.b, d = 0;
                    return s < c && (s = c + (c = s,
                    0),
                    d = -1),
                    i = c,
                    a < s && (a = s + (s = a,
                    0),
                    d = -2 / 6 - d,
                    i = r.min(s, c)),
                    t = a - i,
                    n = a ? t / a : 0,
                    {
                        h: n < 1e-15 ? o && o.hsl && o.hsl.h || 0 : t ? r.abs(d + (s - c) / (6 * t)) : 0,
                        s: a ? t / a : o && o.hsv && o.hsv.s || 0,
                        v: a
                    }
                },
                hsv2rgb: function(e) {
                    var t = 6 * e.h
                      , i = e.s
                      , n = e.v
                      , o = ~~t
                      , r = t - o
                      , a = n * (1 - i)
                      , s = n * (1 - r * i)
                      , l = n * (1 - (1 - r) * i)
                      , c = o % 6;
                    return {
                        r: [n, s, a, a, l, n][c],
                        g: [l, n, n, s, a, a][c],
                        b: [a, a, l, n, n, s][c]
                    }
                },
                hsv2hsl: function(e) {
                    var t = (2 - e.s) * e.v
                      , i = e.s * e.v;
                    return i = e.s ? t < 1 ? t ? i / t : 0 : i / (2 - t) : 0,
                    {
                        h: e.h,
                        s: e.v || i ? i : o && o.hsl && o.hsl.s || 0,
                        l: t / 2
                    }
                },
                rgb2hsl: function(e, t) {
                    var i = g.rgb2hsv(e);
                    return g.hsv2hsl(t ? i : o.hsv = i)
                },
                hsl2rgb: function(e) {
                    var t = 6 * e.h
                      , i = e.s
                      , n = e.l
                      , o = n < .5 ? n * (1 + i) : n + i - i * n
                      , r = n + n - o
                      , a = o ? (o - r) / o : 0
                      , s = ~~t
                      , l = t - s
                      , c = o * a * l
                      , d = r + c
                      , u = o - c
                      , p = s % 6;
                    return {
                        r: [o, u, r, r, d, o][p],
                        g: [d, o, o, u, r, r][p],
                        b: [r, r, d, o, o, u][p]
                    }
                },
                rgb2cmy: function(e) {
                    return {
                        c: 1 - e.r,
                        m: 1 - e.g,
                        y: 1 - e.b
                    }
                },
                cmy2cmyk: function(e) {
                    var t = l
                      , i = t.min(t.min(e.c, e.m), e.y)
                      , n = 1 - i || 1e-20;
                    return {
                        c: (e.c - i) / n,
                        m: (e.m - i) / n,
                        y: (e.y - i) / n,
                        k: i
                    }
                },
                cmyk2cmy: function(e) {
                    var t = e.k;
                    return {
                        c: e.c * (1 - t) + t,
                        m: e.m * (1 - t) + t,
                        y: e.y * (1 - t) + t
                    }
                },
                cmy2rgb: function(e) {
                    return {
                        r: 1 - e.c,
                        g: 1 - e.m,
                        b: 1 - e.y
                    }
                },
                rgb2cmyk: function(e, t) {
                    var i = g.rgb2cmy(e);
                    return g.cmy2cmyk(t ? i : o.cmy = i)
                },
                cmyk2rgb: function(e, t) {
                    var i = g.cmyk2cmy(e);
                    return g.cmy2rgb(t ? i : o.cmy = i)
                },
                XYZ2rgb: function(e, t) {
                    var i = l
                      , r = n.options.XYZMatrix
                      , a = e.X
                      , s = e.Y
                      , c = e.Z
                      , d = a * r.R[0] + s * r.R[1] + c * r.R[2]
                      , u = a * r.G[0] + s * r.G[1] + c * r.G[2]
                      , p = a * r.B[0] + s * r.B[1] + c * r.B[2]
                      , h = 1 / 2.4;
                    return r = .0031308,
                    d = d > r ? 1.055 * i.pow(d, h) - .055 : 12.92 * d,
                    u = u > r ? 1.055 * i.pow(u, h) - .055 : 12.92 * u,
                    p = p > r ? 1.055 * i.pow(p, h) - .055 : 12.92 * p,
                    t || (o._rgb = {
                        r: d,
                        g: u,
                        b: p
                    }),
                    {
                        r: C(d, 0, 1),
                        g: C(u, 0, 1),
                        b: C(p, 0, 1)
                    }
                },
                rgb2XYZ: function(e) {
                    var t = l
                      , i = n.options.XYZMatrix
                      , o = e.r
                      , r = e.g
                      , a = e.b
                      , s = .04045;
                    return o = o > s ? t.pow((o + .055) / 1.055, 2.4) : o / 12.92,
                    r = r > s ? t.pow((r + .055) / 1.055, 2.4) : r / 12.92,
                    a = a > s ? t.pow((a + .055) / 1.055, 2.4) : a / 12.92,
                    {
                        X: o * i.X[0] + r * i.X[1] + a * i.X[2],
                        Y: o * i.Y[0] + r * i.Y[1] + a * i.Y[2],
                        Z: o * i.Z[0] + r * i.Z[1] + a * i.Z[2]
                    }
                },
                XYZ2Lab: function(e) {
                    var t = l
                      , i = n.options.XYZReference
                      , o = e.X / i.X
                      , r = e.Y / i.Y
                      , a = e.Z / i.Z
                      , s = 16 / 116
                      , c = 1 / 3
                      , d = .008856
                      , u = 7.787037;
                    return o = o > d ? t.pow(o, c) : u * o + s,
                    r = r > d ? t.pow(r, c) : u * r + s,
                    a = a > d ? t.pow(a, c) : u * a + s,
                    {
                        L: 116 * r - 16,
                        a: 500 * (o - r),
                        b: 200 * (r - a)
                    }
                },
                Lab2XYZ: function(e) {
                    var t = l
                      , i = n.options.XYZReference
                      , o = (e.L + 16) / 116
                      , r = e.a / 500 + o
                      , a = o - e.b / 200
                      , s = t.pow(r, 3)
                      , c = t.pow(o, 3)
                      , d = t.pow(a, 3)
                      , u = 16 / 116
                      , p = .008856
                      , h = 7.787037;
                    return {
                        X: (s > p ? s : (r - u) / h) * i.X,
                        Y: (c > p ? c : (o - u) / h) * i.Y,
                        Z: (d > p ? d : (a - u) / h) * i.Z
                    }
                },
                rgb2Lab: function(e, t) {
                    var i = g.rgb2XYZ(e);
                    return g.XYZ2Lab(t ? i : o.XYZ = i)
                },
                Lab2rgb: function(e, t) {
                    var i = g.Lab2XYZ(e);
                    return g.XYZ2rgb(t ? i : o.XYZ = i, t)
                }
            };
            function f(e, t) {
                var i = {}
                  , n = 0
                  , o = t / 2;
                for (var r in e)
                    n = e[r] % t,
                    i[r] = e[r] + (n > o ? t - n : -n);
                return i
            }
            function v(e, t, i) {
                var n = l;
                return (n.max(e.r - t.r, t.r - e.r) + n.max(e.g - t.g, t.g - e.g) + n.max(e.b - t.b, t.b - e.b)) * (i ? 255 : 1) / 765
            }
            function b(e, t) {
                for (var i = t ? 1 : 255, o = [e.r / i, e.g / i, e.b / i], r = n.options.luminance, a = o.length; a--; )
                    o[a] = o[a] <= .03928 ? o[a] / 12.92 : l.pow((o[a] + .055) / 1.055, 2.4);
                return r.r * o[0] + r.g * o[1] + r.b * o[2]
            }
            function y(e, i, n, o) {
                var r = {}
                  , a = n !== t ? n : 1
                  , s = o !== t ? o : 1
                  , l = a + s * (1 - a);
                for (var c in e)
                    r[c] = (e[c] * a + i[c] * s * (1 - a)) / l;
                return r.a = l,
                r
            }
            function w(e, t) {
                var i = 1;
                return i = e >= t ? (e + .05) / (t + .05) : (t + .05) / (e + .05),
                l.round(100 * i) / 100
            }
            function C(e, t, i) {
                return e > i ? i : e < t ? t : e
            }
        }
        )(window)
    },
    "297c": function(e, t) {
        var i = '<md-dialog> <div> <md-toolbar style="min-height:45px;height:45px"> <div class="md-toolbar-tools" style="background:linear-gradient(141deg,#849dd8 15%,#8bc4d3 75%)"> <div class="text-center w100"> <h2>{{ title }}</h2> </div> </div> </md-toolbar> <md-dialog-content> <md-content class="md-padding" style="max-width:500px"> <div class="row" style="margin-right:15px;margin-left:15px"> <p ng-if="designId">Your design has been saved, you can now apply it to any product you want</p> <p ng-if="templateId && !designId">Design template with id <b><u>{{ templateId }}</u></b> has been saved</p> <div class="w100 text-center mt15"> <md-button class="md-raised md-primary m0" ng-click="goToDesignTemplates()">Done</md-button> </div> </div> </md-content> </md-dialog-content> </div> </md-dialog> ';
        e.exports = i
    },
    "299b": function(e, t, i) {
        e.exports = i.p + "img/myproductbases.ec09d70b.svg?x-request=html"
    },
    "2a40": function(e, t, i) {
        "use strict";
        i("edaf")
    },
    "2b56": function(e, t) {
        var i = '<md-dialog class="image-library-dialog" run-on-enter="create()"> <form name="resolutionForm"> <md-toolbar> <div class="md-toolbar-tools"> <h2>Add image(s) to library</h2> <span flex></span> </div> </md-toolbar> <md-dialog-content style="max-width:800px;min-width:400px"> <md-content class="md-padding"> <div class="row" style="margin-right:15px;margin-left:15px"> <p ng-show="errorMessage" style="margin-bottom:30px;color:red">{{ errorMessage }}</p> <md-input-container class="md-block col-xs-6 col-xs-offset-3" style="margin-bottom:0"> <md-tooltip md-direction="bottom"> The position for retrieving the image through the API </md-tooltip> <label>{{ filesToUpload.length > 1 ? \'Initial position\' : \'Image position\' }}</label> <input required type="number" step="any" ng-model="imagePosition" min="1" max="9999999" ng-disabled="element !== null"/> </md-input-container> <div class="clearfix"></div> <md-button class="md-raised col-xs-10 col-xs-offset-1" upload-file input-id="inputFileTest"> Upload image(s) <div id="uploadImageTest" class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="inputFileTest" type="file" accept=".png,.jpg,.jpeg" multiple="multiple" value="upload" custom-on-change="uploadImage"/> </div> </md-button> <div class="image-preview col-xs-10 col-xs-offset-1" ng-show="imagePath"> <img ng-src="{{ imagePath + \'?x-request=html\' }}"/> </div> <div class="col-xs-12" ng-show="filesToUpload.length > 1" style="text-align:center;margin-top:20px"> Selected {{ filesToUpload.length }} files to upload <br/> <b>Existing positions will be overwritten</b> </div> </div> </md-content> </md-dialog-content> <md-dialog-actions layout="row"> <md-button class="md-primary" ng-click="create()" ng-disabled="!filesToUpload.length && !imagePath"> {{ element === null ? \'Create Image(s)\' : \'Update Image\' }} </md-button> <md-button ng-click="cancel()"> Cancel </md-button> </md-dialog-actions> </form> </md-dialog> ';
        e.exports = i
    },
    "2bde": function(e, t) {
        var i = '<div class="vue-need-bootstrap h100"> <div class="d-flex justify-content-center w-100 h-100 overflow-auto"> <div class="d-flex flex-column h-100 w-100"> <div style="padding:.75rem 1rem"></div> <div class="app-container container flex-grow-1 w-100"> <transition name="fade" mode="out-in"> <vue-component class="h100" name="MyProductBases"/> </transition> </div> </div> </div> </div> ';
        e.exports = i
    },
    "2c34": function(e, t) {
        var i = '<title>Customily</title> <div style="min-height:100%" ng-controller="StampCtrl"></div> ';
        e.exports = i
    },
    "2d98": function(e, t, i) {
        e.exports = i.p + "img/chain-links.cbf0cb1f.svg?x-request=html"
    },
    "2dc2": function(e, t, i) {
        e.exports = i.p + "img/imageplaceholder.27e24ac8.svg?x-request=html"
    },
    "2e04": function(e, t) {
        angular.module("app.ctrls").directive("sticky", ["$window", function(e) {
            return {
                restrict: "A",
                scope: {
                    stickyElementId: "@"
                },
                link: function(e, t, i) {
                    var n = angular.element("#" + e.stickyElementId);
                    n.bind("scroll", (function() {
                        var e = $(t)
                          , i = i || {};
                        i.padding = i.padding || 0;
                        var o = n.scrollTop();
                        e.css("margin-top", o + i.padding)
                    }
                    ))
                }
            }
        }
        ])
    },
    "2e3a": function(e, t, i) {
        "use strict";
        i.d(t, "a", (function() {
            return o
        }
        ));
        var n = i("406d");
        const o = async()=>{
            const e = await n["a"].get("/PodProvider/MyProductBases");
            return e.data
        }
    },
    "2e5a": function(e, t, i) {
        e.exports = i.p + "img/plus-sign-in-circle.5bcd3c8b.svg?x-request=html"
    },
    "2eea": function(e, t) {
        var i = '<md-dialog> <div> <md-toolbar style="min-height:45px;height:45px"> <div class="md-toolbar-tools" style="background:linear-gradient(141deg,#849dd8 15%,#8bc4d3 75%)"> <div class="text-center w100"> <h2>{{ titleSaved }}</h2> </div> </div> </md-toolbar> <md-dialog-content> <md-content class="md-padding" style="max-width:500px"> <div class="row" style="margin-right:15px;margin-left:15px"> Template product with id <b><u>{{ templateId }}</u></b> has been saved <div class="w100 text-center mt15"> <md-button class="md-raised md-primary m0" ng-click="goToTemplateProducts()">Done</md-button> </div> </div> </md-content> </md-dialog-content> </div> </md-dialog> ';
        e.exports = i
    },
    "2eff": function(e, t, i) {
        e.exports = i.p + "img/visible.7f6303ad.svg?x-request=html"
    },
    "2fa4": function(e, t, i) {
        "use strict";
        i("3a7a")
    },
    "2fb1": function(e, t, i) {
        e.exports = i.p + "img/mask.ee9167af.svg?x-request=html"
    },
    3: function(e, t) {},
    "30ae": function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i, n, o, r, a, s, l, c, d) {
                e.element = d,
                e.vectorPosition = l,
                e.categoryId = n.search().categoryId,
                e.errorMessage = "",
                e.svgPath = "",
                e.currentEPS = {},
                e.filesToUpload = [],
                null != d && (e.vectorPosition = d.position,
                e.svgPath = d.svgPath,
                e.currentEPS = {
                    EPS: d.epsPath,
                    SVG: d.svgPath,
                    ThumbnailPath: d.ThumbnailPath
                }),
                e.create = async function() {
                    if (e.filesToUpload.length || e.svgPath) {
                        var n = [];
                        if (e.filesToUpload.length > 0 ? (s.start("Uploading EPS files 0%"),
                        n = await r.uploadVectorsWithChunks(e.filesToUpload, 4, !0, (function(t) {
                            s.message("Uploading EPS files " + parseInt(t) + "%"),
                            i(()=>e.$apply())
                        }
                        )),
                        s.stop()) : n.push(e.currentEPS),
                        null === d) {
                            var a = e.vectorPosition
                              , l = [];
                            s.start("Saving vector(s) into library"),
                            n.forEach((t,i)=>{
                                (function(t, r) {
                                    l.push(new Promise((a,s)=>{
                                        o.addElement(c.LibraryId, r, {
                                            svgPath: t.SVG,
                                            epsPath: t.EPS,
                                            ThumbnailPath: t.ThumbnailPath,
                                            LibraryCategoryId: e.categoryId
                                        }, "vector", e.fileName ? e.fileName : e.filesToUpload[i].name.split(".")[0]).then((function() {
                                            a()
                                        }
                                        )).catch((function(i) {
                                            409 === i.status ? (console.log("Overwriting position " + r),
                                            o.getLibraryElementAtPosition(c.LibraryId, r).then((function(i) {
                                                1 === n.length ? (e.errorMessage = "There's already an element at position " + r,
                                                s()) : (i.svgPath = t.SVG,
                                                i.epsPath = t.EPS,
                                                i.ThumbnailPath = t.ThumbnailPath,
                                                i.LibraryCategoryId = e.categoryId,
                                                o.updateElement(c.LibraryId, i.VectorID, i, "vector").then((function() {
                                                    a()
                                                }
                                                )).catch((function(e) {
                                                    s(e)
                                                }
                                                )))
                                            }
                                            )).catch((function(e) {
                                                s(e)
                                            }
                                            ))) : s(i)
                                        }
                                        ))
                                    }
                                    ))
                                }
                                )(t, a++)
                            }
                            ),
                            Promise.all(l).then((function() {
                                s.stop(),
                                t.hide()
                            }
                            )).catch((function() {
                                s.stop()
                            }
                            ))
                        } else
                            d.svgPath = e.currentEPS.SVG,
                            d.epsPath = e.currentEPS.EPS,
                            d.ThumbnailPath = e.currentEPS.ThumbnailPath,
                            d.LibraryCategoryId = e.categoryId,
                            s.start("Updating vector"),
                            o.updateElement(c.LibraryId, d.VectorID, d, "vector").then((function() {
                                s.stop(),
                                t.hide()
                            }
                            )).catch((function(t) {
                                s.stop(),
                                e.errorMessage = "Error updating vector!"
                            }
                            ))
                    }
                }
                ,
                e.uploadEPS = async function(t) {
                    const n = t.target.files;
                    if (n && n[0])
                        try {
                            if (n.length > 1 && !d)
                                return e.filesToUpload = n,
                                void (e.svgPath = "");
                            e.filesToUpload = [],
                            e.errorMessage = "",
                            e.uploadingVectorEPS = !0,
                            e.vectorEPSUploadPercent = 0,
                            s.start("Uploading EPS");
                            const t = await a.uploadVectorToS3(n[0], "vector", !1, !0, (t,n)=>{
                                "upload" === t ? (s.message(`Uploading EPS: ${parseInt(n)}%`),
                                i(()=>e.$apply())) : s.message("Processing")
                            }
                            );
                            console.log("Success on EPS upload!"),
                            e.errorMessage = "",
                            e.svgPath = t.SVG,
                            e.currentEPS = t,
                            e.fileName = n[0].name.split(".")[0],
                            s.stop(),
                            e.uploadingVectorEPS = !1,
                            i(()=>e.$apply())
                        } catch (error) {
                            console.error(error),
                            s.stop(),
                            e.uploadingVectorEPS = !1,
                            e.errorMessage = error,
                            i(()=>e.$apply())
                        }
                }
                ,
                e.cancel = function() {
                    t.cancel()
                }
                ,
                e.enter = function() {
                    console.log("Enter!")
                }
            }
            e.$inject = ["$scope", "$mdDialog", "$timeout", "$location", "LibrariesAPIService", "MultipleFileUploadService", "VectorUtilService", "blockUI", "initialPosition", "library", "element"],
            angular.module("app.ctrls").controller("VectorDialogCtrl", e)
        }
        )()
    },
    "30ec": function(e, t, i) {
        "use strict";
        i.r(t),
        function() {
            function e(e, t, n, o, r, a, s, l) {
                function c(e) {
                    return e.charAt(0).toUpperCase() + e.slice(1)
                }
                e.colorModeStrings = ["RGB", "CMYK"],
                e.libraryTypeStrings = ["Color", "Font", "Vector", "Image"],
                e.filteredElements = [],
                e.currentPage = 1,
                e.numPerPage = 10,
                e.maxSize = 10,
                e.elementsCount = 0,
                e.searchString = "",
                e.libraryType = "color",
                e.library = null,
                e.categoryId = null,
                e.addElementLoading = !1,
                e.addCategoryLoading = !1,
                e.currentNavItem = "",
                e.$watch("currentPage + numPerPage", (function() {
                    e.begin = (e.currentPage - 1) * e.numPerPage,
                    e.getList()
                }
                )),
                e.goToLibraries = function() {
                    r.path("/libraries").search({})
                }
                ,
                e.goToCategories = function() {
                    r.path("/editLibrary").search({
                        id: e.library.LibraryId
                    })
                }
                ,
                e.getList = async function() {
                    if (e.library = e.library || await n.getLibrary(r.search().id),
                    e.libraryType = e.libraryTypeStrings[e.library.Type],
                    r.search().categoryId) {
                        e.categoryId = r.search().categoryId;
                        var i = await n.getCategory(e.library.LibraryId, e.categoryId);
                        t.headerTitle = e.library.Name + " - " + i.Name + "  " + c(e.libraryType) + " Library",
                        e.getElementsByCategory()
                    } else {
                        if (t.headerTitle = e.library.Name + "  " + c(e.libraryType) + " Library",
                        "" === e.currentNavItem) {
                            var o = await n.getLibraryCategoriesCount(e.library.LibraryId);
                            if (o > 0)
                                e.currentNavItem = "category";
                            else {
                                var a = await n.getLibraryElementsCount(e.library.LibraryId);
                                a > 0 && (e.currentNavItem = "library")
                            }
                        }
                        "category" === e.currentNavItem ? e.getCategories() : "library" === e.currentNavItem && e.getElements()
                    }
                }
                ,
                e.getElements = function() {
                    l.start("Loading elements"),
                    console.log("Getting library elements");
                    var t = [];
                    "font" === e.libraryType.toLowerCase() && (console.log("Loading fonts"),
                    t.push(o.getAllFonts())),
                    n.getLibraryElements(e.searchString, e.begin, e.numPerPage, e.library.LibraryId).then((function(i) {
                        e.searchString ? (e.elementsCount = e.filteredElements.length,
                        e.filteredElements = i,
                        l.stop()) : n.getLibraryElementsCount(e.library.LibraryId).then((function(n) {
                            e.elementsCount = n,
                            n || (e.currentNavItem = ""),
                            Promise.all(t).then((function() {
                                e.filteredElements = i,
                                l.stop(),
                                a((function() {
                                    e.$apply()
                                }
                                ))
                            }
                            )).catch((function(e) {
                                window.rumReportError(e),
                                l.stop()
                            }
                            ))
                        }
                        )).catch((function(e) {
                            window.rumReportError(e),
                            l.stop()
                        }
                        ))
                    }
                    )).catch((function(e) {
                        window.rumReportError(e),
                        l.stop()
                    }
                    ))
                }
                ,
                e.getElementsByCategory = function() {
                    l.start("Loading elements"),
                    console.log("Getting category elements"),
                    n.getElementsByCategory(e.searchString, e.begin, e.numPerPage, e.library.LibraryId, e.categoryId).then((function(t) {
                        e.searchString ? (e.elementsCount = e.filteredElements.length,
                        e.filteredElements = t,
                        l.stop()) : n.getElementsByCategoryCount(e.library.LibraryId, e.categoryId).then((function(i) {
                            e.elementsCount = i,
                            e.filteredElements = t,
                            l.stop(),
                            a((function() {
                                e.$apply()
                            }
                            ))
                        }
                        )).catch((function(e) {
                            window.rumReportError(e),
                            l.stop()
                        }
                        ))
                    }
                    )).catch((function(e) {
                        window.rumReportError(e),
                        l.stop()
                    }
                    ))
                }
                ,
                e.getCategories = function() {
                    l.start("Loading categories"),
                    console.log("Getting library categories"),
                    n.getLibraryCategories(e.searchString, e.begin, e.numPerPage, e.library.LibraryId).then((function(t) {
                        e.searchString ? (e.elementsCount = e.filteredElements.length,
                        e.filteredElements = t,
                        l.stop()) : n.getLibraryCategoriesCount(e.library.LibraryId).then((function(i) {
                            e.elementsCount = i,
                            e.filteredElements = t,
                            i || (e.currentNavItem = ""),
                            l.stop(),
                            a((function() {
                                e.$apply()
                            }
                            ))
                        }
                        )).catch((function(e) {
                            console.error(e),
                            l.stop()
                        }
                        ))
                    }
                    )).catch((function(e) {
                        console.error(e),
                        l.stop()
                    }
                    ))
                }
                ,
                e.addElement = async function(t) {
                    e.addElementLoading = !0;
                    var o = await n.getLibraryElementsLastPosition(e.library.LibraryId)
                      , r = [{
                        controller: "ColorDialogCtrl",
                        template: i("00f3"),
                        locals: Object.assign({
                            colorMode: e.colorModeStrings[e.library.ColorMode],
                            library: e.library,
                            element: null,
                            initialPosition: o + 1
                        }, t)
                    }, {
                        controller: "FontDialogCtrl",
                        template: i("768e"),
                        locals: Object.assign({
                            library: e.library,
                            element: null,
                            initialPosition: o + 1
                        }, t)
                    }, {
                        controller: "VectorDialogCtrl",
                        template: i("5554"),
                        locals: Object.assign({
                            library: e.library,
                            element: null,
                            initialPosition: o + 1
                        }, t)
                    }, {
                        controller: "ImageDialogCtrl",
                        template: i("2b56"),
                        locals: Object.assign({
                            library: e.library,
                            element: null,
                            initialPosition: o + 1
                        }, t)
                    }];
                    s.show({
                        controller: r[e.library.Type].controller,
                        template: r[e.library.Type].template,
                        locals: r[e.library.Type].locals,
                        parent: angular.element(document.body),
                        clickOutsideToClose: !1,
                        onComplete: function() {
                            e.addElementLoading = !1
                        }
                    }).then((function() {
                        e.currentNavItem = "library",
                        e.getList()
                    }
                    ), (function() {}
                    ))
                }
                ,
                e.addCategory = async function(t, n=!1) {
                    e.addCategoryLoading = !0,
                    s.show({
                        controller: "CategoryDialogCtrl",
                        template: i("6d8c"),
                        locals: Object.assign({
                            library: e.library,
                            category: null,
                            thumbnailOnly: n
                        }, t),
                        parent: angular.element(document.body),
                        clickOutsideToClose: !1,
                        onComplete: function() {
                            e.addCategoryLoading = !1
                        }
                    }).then((function() {
                        e.currentNavItem = "category",
                        e.getCategories()
                    }
                    ), (function() {}
                    ))
                }
                ,
                e.delete = function(t) {
                    var i = s.confirm().title(c(e.libraryType) + " deletion").htmlContent("Are you sure you want to delete this " + e.libraryType.toLowerCase() + " at position <b>" + t.position + "</b>?<br>Deleting an element will make it to longer available to existing products.").ok("Yes").cancel("No");
                    s.show(i).then((function() {
                        l.start("Removing element"),
                        n.deleteElement(e.library.LibraryId, t.position).then((function() {
                            l.stop(),
                            e.getList()
                        }
                        ))
                    }
                    ), (function() {}
                    ))
                }
                ,
                e.deleteCategory = function(t) {
                    var i = s.confirm().title("Library category deletion").htmlContent("Are you sure you want to delete category <b>" + t.Name + "</b>?<br>Deleting an element will make it to longer available to existing products.").ok("Yes").cancel("No");
                    s.show(i).then((function() {
                        l.start("Removing category"),
                        n.deleteCategory(e.library.LibraryId, t.CategoryId).then((function() {
                            l.stop(),
                            e.getCategories()
                        }
                        )).catch(e=>{
                            l.stop(),
                            window.rumReportError(e)
                        }
                        )
                    }
                    ), (function() {}
                    ))
                }
                ,
                e.edit = function(t) {
                    e.addElement({
                        element: t
                    })
                }
                ,
                e.editCategory = function(t) {
                    r.path("/editCategory").search({
                        id: e.library.LibraryId,
                        categoryId: t.CategoryId
                    })
                }
                ,
                e.toRgba = function(e, t) {
                    if (e) {
                        var i = new Colors
                          , n = i.convertColor(e.replace("#", ""), "HEX2RGB");
                        return "rgba(" + n.r + "," + n.g + "," + n.b + "," + t + ")"
                    }
                    return ""
                }
                ,
                e.toStringCmyk = function(e) {
                    var t = e.cmyk.split(",");
                    return "C: " + (100 * t[0]).toFixed(0) + ", M: " + (100 * t[1]).toFixed(0) + ", Y: " + (100 * t[2]).toFixed(0) + ", K: " + (100 * t[3]).toFixed(0)
                }
                ,
                e.fontPathToName = function(e) {
                    var t = o.getLoadedFonts();
                    if (t && e) {
                        var i = t.find((function(t) {
                            return t.Path === e
                        }
                        ));
                        if (i)
                            return i.Name + " (" + i.Style + ")"
                    }
                }
                ,
                e.editCategoryName = function(e) {
                    e.editing = !0
                }
                ,
                e.editCategoryThumbnail = function(t) {
                    e.addCategory({
                        category: t,
                        thumbnailOnly: !0
                    })
                }
                ,
                e.doneEditing = function(t) {
                    t.editing = !1,
                    l.start("Saving name"),
                    void 0 !== t.Name && null !== t.Name && 0 !== t.Name.trim().length || (t.Name = "Category name"),
                    n.updateCategory(e.library.LibraryId, t.CategoryId, {
                        Name: t.Name,
                        Path: t.Path,
                        ThumbnailPath: t.ThumbnailPath
                    }).then((function() {
                        l.stop()
                    }
                    )).catch((function(e) {
                        console.error(e),
                        l.stop()
                    }
                    ))
                }
                ,
                e.doBlur = function(e) {
                    var t = e.target;
                    t.blur()
                }
                ,
                e.editItem = function(e, t) {
                    e.editing = !0,
                    a(()=>t.currentTarget.nextElementSibling.focus(), 100)
                }
                ,
                e.cancelEditItem = function(e) {
                    e.editing = !1
                }
                ,
                e.updateLibraryName = (t,i)=>{
                    if (t.editing = !1,
                    i && t) {
                        let o = "";
                        switch (i.toLowerCase()) {
                        case "color":
                            o = "ColorId";
                            break;
                        case "font":
                            o = "FontId";
                            break;
                        case "vector":
                            o = "VectorID";
                            break;
                        case "image":
                            o = "ImageId";
                            break
                        }
                        l.start("Updating " + i),
                        n.updateElement(e.library.LibraryId, t[o], t, i).then((function() {
                            l.stop()
                        }
                        )).catch((function(e) {
                            l.stop(),
                            console.error(e)
                        }
                        ))
                    }
                }
            }
            e.$inject = ["$scope", "$rootScope", "LibrariesAPIService", "FontManagerService", "$location", "$timeout", "$mdDialog", "blockUI"],
            angular.module("app.ctrls").controller("EditLibraryCtrl", e)
        }()
    },
    "314c": function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i, n, o, r) {
                i.showHeader = !1;
                var a = t.search().user
                  , s = t.search().token;
                e.userOrTokenError = !a || !s,
                e.resetPassword = function() {
                    e.password === e.passwordConfirmation ? (o.start(),
                    n.resetPassword(e.password, e.passwordConfirmation, a, s).then(()=>{
                        o.stop(),
                        r.show(r.alert().parent(document.body).clickOutsideToClose(!0).title("Password reset").textContent("Your new password is ready").ok("OK!")).finally(()=>{
                            t.path("/signin")
                        }
                        )
                    }
                    ).catch(e=>{
                        o.stop(),
                        r.show(r.alert().parent(document.body).clickOutsideToClose(!0).title("Password reset").textContent(e.data.Message).ok("OK!")).finally(()=>{
                            t.path("/signin")
                        }
                        )
                    }
                    )) : r.show(r.alert().parent(document.body).clickOutsideToClose(!0).title("Password error").textContent("Passwords don't match").ok("OK!"))
                }
            }
            e.$inject = ["$scope", "$location", "$rootScope", "UsersAPIService", "blockUI", "$mdDialog"],
            angular.module("app.ctrls").controller("PasswordResetCtrl", e)
        }
        )()
    },
    3296: function(e, t, i) {
        e.exports = i.p + "img/unionpay-colored.d01c430b.svg?x-request=html"
    },
    "33c1": function(e, t, i) {},
    3422: function(e, t, i) {},
    "345b": function(e, t) {
        (function() {
            function e(e) {
                const t = "https://www.cutout.pro/api/v1"
                  , i = 5002;
                function n(n) {
                    return new Promise(o=>{
                        const r = {
                            method: "GET",
                            url: t + "/mySubscription",
                            contentType: "application/json; charset=utf-8",
                            headers: {
                                APIKEY: n,
                                Accept: "application/json"
                            },
                            cache: !1
                        };
                        e.get(r, null, r).then(e=>{
                            o(e.code != i)
                        }
                        )
                    }
                    )
                }
                function o(e, i, n) {
                    return new Promise(async(o,r)=>{
                        const a = new XMLHttpRequest
                          , s = new FormData;
                        let l = "/matting?mattingType=3&crop=true";
                        switch (n) {
                        case !0:
                            l = "/matting?mattingType=3&crop=true";
                            break;
                        case !1:
                            l = "/matting?mattingType=6&crop=true";
                            break
                        }
                        s.append("file", i),
                        a.onreadystatechange = ()=>{
                            4 === a.readyState && (200 === a.status && "image/png" == a.response.type ? o(a.response) : r(a))
                        }
                        ,
                        a.open("POST", t + l),
                        a.setRequestHeader("APIKEY", e),
                        a.responseType = "blob",
                        a.send(s)
                    }
                    )
                }
                return {
                    cutoutFace: o,
                    isValidAPIKey: n
                }
            }
            e.$inject = ["HttpService"],
            angular.module("app.shared.services").factory("CutoutProAPIService", e)
        }
        )()
    },
    "36be": function(e, t, i) {
        e.exports = i.p + "img/thanks.05710d13.svg?x-request=html"
    },
    "36cd": function(e, t) {
        (function() {
            function e(e) {
                function t(t, i, n) {
                    return e((function(e, o) {
                        if (!t)
                            return e();
                        const r = new FileReader;
                        r.onload = function() {
                            const t = i.getObjects();
                            for (let o = 0; o < t.length; o++)
                                (function(t) {
                                    if ("image-placeholder" == t.type && t.id == n && !i.dynamicImagesPath) {
                                        const n = document.createElement("img");
                                        n.onload = function() {
                                            t.setElement(n),
                                            i.renderAll(),
                                            e()
                                        }
                                        ,
                                        n.src = r.result
                                    }
                                }
                                )(t[o])
                        }
                        ,
                        r.readAsDataURL(t)
                    }
                    ))
                }
                function i(e, t, i) {
                    const n = document.createElement("img");
                    n.onload = function() {
                        t.setElement(n),
                        e.renderAll()
                    }
                    ,
                    n.src = i.imageUrl
                }
                return {
                    previewImageOnPlaceholder: t,
                    showStaticImage: i
                }
            }
            e.$inject = ["$q"],
            angular.module("app.shared.services").factory("TestImageService", e)
        }
        )()
    },
    "36d1": function(e, t) {
        var i = '<title>Step 3/3 - Final Review</title> <div id="step3-container" class="template-step-container" ng-controller="CreateStepThreeCtrl" ng-cloak> <div class="row h100" style="margin:0!important"> <div class="col-xs-12 h100"> <div class="row h100"> <div class="h100 template-section" style="float:left;padding-right:15px;padding-left:15px;width:40%"> <div id="fabric-container" ng-controller="CreateStepOneCtrl"> <canvas id="fabric-canvas"></canvas> </div> </div> <div class="h100 template-section" style="float:left;padding-right:15px;padding-left:15px;width:40%"> <div id="fabric-container-2" ng-controller="CreateStepTwoCtrl"> <canvas id="fabric-canvas-2"></canvas> </div> </div> <div class="mt20" style="float:left;padding-right:15px;padding-left:15px;width:20%"> <md-button class="md-raised md-primary w100 m0" ng-click="save()">Save</md-button> <div class="layers-accordion"> <vue-component class="h100 vue-need-bootstrap" name="Layers" instance="layersInstance" v-on-element-selected="layersElementSelected" v-props="layersProps"/> </div> <div class="mt20 col-xs-12" style="padding:0" ng-show="selectedElement && (selectedElement.type === \'bounded-text\' || selectedElement.type === \'path-itext\')"> <md-input-container class="md-block col-xs-12 mb0"> <md-tooltip md-delay="200" md-direction="top">This is a sample text and will not appear on the final product</md-tooltip> <label>Type to try the text box</label> <textarea name="text" ng-model="elementProperties.text" ng-change="updateText(elementProperties.text, selectedElement)" md-select-on-focus></textarea> </md-input-container> <md-input-container class="md-block col-xs-6"> <label>Font Option</label> <input required md-no-asterisk type="number" step="any" ng-model="elementProperties.fontOption" ng-change="updateFontOption(elementProperties.fontOption, selectedElement)" min="1" max="9999999"/> </md-input-container> <md-input-container class="md-block col-xs-6"> <label>Color Option</label> <input required md-no-asterisk type="number" step="any" ng-model="elementProperties.fontColorOption" ng-change="updateFontColorOption(elementProperties.fontColorOption, selectedElement)" min="1" max="9999999"/> </md-input-container> </div> <div class="mt20 col-xs-12" style="padding:0" ng-show="selectedElement && selectedElement.type === \'image-placeholder\' && selectedElement.dynamicImagesPath"> <md-input-container class="md-block col-xs-12"> <label>Image Option</label> <input required md-no-asterisk type="number" step="any" ng-model="elementProperties.imageOption" ng-change="updateImageOption(elementProperties.imageOption, selectedElement)" min="1" max="9999999"/> </md-input-container> </div> <div class="mt20 col-xs-12" style="padding:0" ng-show="selectedElement && selectedElement.type === \'image-placeholder\' && !selectedElement.dynamicImagesPath && !selectedElement.mapConfig"> <md-button class="md-raised m0 col-xs-12" upload-file input-id="inputFileTest"> Try with an image <div id="uploadImageTest" class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="inputFileTest" type="file" accept=".png,.jpg,.jpeg" value="upload" onchange="angular.element(this).scope().uploadImageOnPlaceholder(angular.element(this).scope().selectedElement,this)"/> </div> </md-button> <md-input-container class="md-block col-xs-12" style="margin-top:40px" ng-show="!elementProperties.fullColor && !elementProperties.grading"> <label>Color Option</label> <input required md-no-asterisk type="number" step="any" ng-model="elementProperties.colorPosition" ng-change="updateImageColor(elementProperties.colorPosition, selectedElement)" min="1" max="9999999"/> </md-input-container> </div> <div class="mt20 col-xs-12" style="padding:0" ng-show="selectedElement && selectedElement.type === \'vector-placeholder\' && selectedElement.allowUserUpload"> <md-button class="md-raised m0 col-xs-12" upload-file input-id="inputFileSVG"> Try with a SVG, EPS or PDF <div id="uploadSVG" class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="inputFileSVG" type="file" accept=".svg,.eps,.pdf" value="upload" onchange="angular.element(this).scope().uploadSvgOnPlaceholder(angular.element(this).scope().selectedElement,this)"/> </div> </md-button> </div> <div class="col-xs-12" style="padding:0" ng-show="selectedElement && selectedElement.type === \'vector-placeholder\' && !selectedElement.allowUserUpload"> <md-input-container class="md-block col-xs-12" style="margin-top:40px" ng-class="{\'col-xs-12\': !elementProperties.applyColoring, \'col-xs-6\': elementProperties.applyColoring}"> <label>Vector Option</label> <input required md-no-asterisk type="number" step="any" ng-model="elementProperties.selectedPosition" ng-change="updateVectorOption(elementProperties.selectedPosition, selectedElement)" min="1" max="9999999"/> </md-input-container> <md-input-container class="md-block col-xs-6" style="margin-top:40px" ng-show="elementProperties.applyColoring"> <label>Color Option</label> <input required md-no-asterisk type="number" step="any" ng-model="elementProperties.colorPosition" ng-change="updateVectorColor(elementProperties.colorPosition, selectedElement)" min="1" max="9999999"/> </md-input-container> </div> </div> </div> </div> </div> </div> ';
        e.exports = i
    },
    "37a2": function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i, n, o, r) {
                e.iFrameUrl = r.customilyOptionsUrl + "?origin=" + encodeURIComponent(window.location.origin),
                e.iFrameUrl = t.trustAsResourceUrl(e.iFrameUrl),
                i.addEventListener("message", (function(t) {
                    t.origin === r.customilyOptionsUrl && "back" === t.data.action && o((function() {
                        n.path("/"),
                        e.$apply()
                    }
                    ))
                }
                ), !1)
            }
            e.$inject = ["$scope", "$sce", "$window", "$location", "$timeout", "ConfigService"],
            angular.module("app.ctrls").controller("OptionsCtrl", e)
        }
        )()
    },
    3996: function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i) {
                e.name = i || "",
                e.onSubmit = function() {
                    t.hide({
                        name: e.name
                    })
                }
            }
            e.$inject = ["$scope", "$mdDialog", "initialName"],
            angular.module("app.ctrls").controller("DesignNameModalCtrl", e)
        }
        )()
    },
    "3a20": function(e, t, i) {
        e.exports = i.p + "img/congrats2.11b39928.svg?x-request=html"
    },
    "3a7a": function(e, t, i) {},
    "3ae7": function(e, t) {
        var i = '<title>Templates List</title> <div class="page scrolling-page" ng-controller="HomeCtrl"> <div class="col-xs-12"> <div class="col-xs-2" style="padding:0"> <md-button type="button" class="md-raised md-primary col-xs-12" style="margin-left:0" ng-click="addProduct()" ng-if="!$root.isManagedUser || user.UserImpersonatedFromId" ng-disabled="user && user.IsDisabled && !user.UserImpersonatedFromId">Create Template</md-button> </div> <div class="col-xs-2" style="padding:0" ng-show="isAdminUser || isAllowedToExportTemplates(user)"> <md-button class="md-raised btn-dgray col-xs-12" upload-file input-id="productImportInput" ng-disabled="user && user.IsDisabled && !user.UserImpersonatedFromId"> Import Template <div class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="productImportInput" type="file" accept=".zip" value="upload" custom-on-change="uploadProductZip"/> </div> </md-button> </div> <div class="col-xs-4" ng-class="{ \'col-xs-offset-6\': !isAdminUser && !isParentUser && !isAllowedToExportTemplates(user), \'col-xs-offset-4\': isAdminUser || isAllowedToExportTemplates(user) || isParentUser }" style="text-align:right;padding-right:0"> <md-input-container style="margin-top:2%;text-align:left" class="hide-validation-error"> <md-tooltip md-direction="bottom"> Search by Id or Name </md-tooltip> <label>Id or Name</label> <input ng-model="searchString" run-on-enter="getProducts()"/> </md-input-container> <md-button type="button" class="md-raised btn-turquise" style="margin-bottom:20px;margin-left:10px" ng-click="getProducts()">Search</md-button> </div> <div class="clearfix"></div> <md-input-container class="mt0 col-xs-5" style="max-width:260px;padding-left:0" ng-if="usernames"> <md-select ng-model="selectedUser"> <span ng-repeat="user in usernames | orderBy: \'Username\'"> <md-option value="{{ user.Username }}" ng-click="changeUser(user.Username)"> <span class="font-span child-account-mark" ng-if="user.IsChildAccount && isAdminUser">&boxhu; </span><span class="font-span">{{ user.Username }}</span> </md-option> </span> </md-select> </md-input-container> <div class="clearfix" ng-if="usernames"></div> <table class="table table-striped table-inverse products-table" style="margin-bottom:0"> <thead class="thead-inverse"> <tr> <th class="templateHeader" ng-click="sortTemplates(\'name\')"> Template <span ng-class="{\'ion-arrow-down-b\': sortMode == \'DESC\', \'ion-arrow-up-b\': sortMode == \'ASC\'}" ng-show="sortBy == \'name\'"></span> </th> <th class="dateHeader" ng-click="sortTemplates(\'CreatedDate\')"> Created <span ng-class="{\'ion-arrow-down-b\': sortMode == \'DESC\', \'ion-arrow-up-b\': sortMode == \'ASC\'}" ng-show="sortBy == \'CreatedDate\'"></span> </th> <th class="dateHeader" ng-click="sortTemplates(\'ModifiedDate\')"> Last Modified <span ng-class="{\'ion-arrow-down-b\': sortMode == \'DESC\', \'ion-arrow-up-b\': sortMode == \'ASC\'}" ng-show="sortBy == \'ModifiedDate\'"></span> </th> </tr> </thead> <tbody> <tr ng-repeat="product in filteredProducts"> <td class="description"> <div class="img-container"><img ng-src="{{ getThumbUrl(product.thumbnailPath) }}"/></div> <div class="name-container" ng-class="{\'editingName\': product.editing}"> <md-input-container class="w100"> <md-tooltip md-direction="right" ng-show="!product.editing">Rename</md-tooltip> <span ng-hide="product.editing" ng-click="editItem(product, $event)" class="name">{{product.name}}</span> <input ng-show="product.editing" ng-keydown="$event.keyCode === 13 && doneEditing(product)" ng-model="product.name" ng-blur="doneEditing(product)" autofocus required ng-blur="cancelEditItem(product)"/> </md-input-container> <span ng-hide="product.editing"> <span class="productId" ng-click="copyTemplateId($event)">{{product.id}}</span> <md-tooltip md-direction="right">{{ product.id == templateIdCopied? \'Copied\' : \'Copy\'}}</md-tooltip> </span> </div> </td> <td class="dateText">{{product.createdDate | date: \'longDate\'}}</td> <td class="dateText">{{product.modifiedDate | date: \'longDate\'}}</td> <td class="button-center-align"> <md-button class="btn-small md-raised btn-turquise m0" ng-click="edit(product.id)" ng-disabled="user && user.IsDisabled && !user.UserImpersonatedFromId">Edit</md-button> </td> <td class="button-center-align"> <md-button class="btn-small md-raised btn-turquise m0" ng-if="!$root.childRestrictedAccess" ng-click="clone(product)" ng-disabled="user && user.IsDisabled && !user.UserImpersonatedFromId">Clone</md-button> </td> <td class="button-center-align"> <md-button class="btn-small md-raised btn-dgray m0" ng-click="delete(product.ProductId, $index, product)" ng-if="!$root.isManagedUser || user.UserImpersonatedFromId" ng-disabled="user && user.IsDisabled && !user.UserImpersonatedFromId">Delete</md-button> </td> <td class="button-center-align" ng-if="isAdminUser || isAllowedToExportTemplates(user)"> <md-button class="btn-small md-raised btn-dgray m0" ng-click="exportTemplate(product)" ng-disabled="user && user.IsDisabled && !user.UserImpersonatedFromId">Export</md-button> </td> </tr> </tbody> </table> <div class="text-center"> <pagination ng-model="currentPage" total-items="productCount" items-per-page="numPerPage" max-size="maxSize" boundary-links="true"> </pagination> </div> </div> </div> ';
        e.exports = i
    },
    "3af5": function(e, t, i) {
        "use strict";
        var n = i("bc3a")
          , o = i.n(n)
          , r = i("8713")
          , a = i.n(r)
          , s = i("6f0d")
          , l = i("4ff6")
          , c = i.n(l);
        const d = Object(s["setupCache"])({
            maxAge: 0,
            exclude: {
                query: !1
            }
        })
          , u = {
            baseURL: c()("https://sh.customily.com", "/api"),
            responseType: "json",
            adapter: d.adapter,
            withCredentials: !0
        }
          , p = o.a.create(u);
        a()(p),
        t["a"] = p
    },
    "3baa": function(e, t, i) {
        i("51de");
        var n = i("b6eb");
        fabric.PathIText = fabric.util.createClass(fabric.Text, {
            type: "path-itext",
            cacheProperties: fabric.Text.prototype.cacheProperties.concat("prefix", "suffix", "startAngle", "endAngle", "convex", "pathWidth", "lockAngleControls"),
            width: 1,
            height: 1,
            caps: !1,
            path: null,
            pathProperties: null,
            pathWidth: 1,
            pathColor: "#ff0000",
            currentLineHeight: 1,
            fontFamily: "Arial",
            textAlign: "center",
            convex: !1,
            prefix: "",
            suffix: "",
            lockUniScalingWithSkew: !1,
            verticalDiameter: 1,
            horizontalDiameter: 1,
            stroke: "#000000",
            strokeWidth: 0,
            opentypeStrokeWidth: 0,
            opentypeStroke: "#000000",
            startAngle: 315,
            endAngle: 45,
            lockAngleControls: !1,
            _startArcOffset: 0,
            _endArcOffset: 0,
            _maxTextArcLength: 0,
            _pathLength: 0,
            __lastDrawnData: [],
            CACHE_FONT_SIZE: 200,
            _angleControlsCords: {},
            _lockMovementXBackup: !1,
            _lockMovementYBackup: !1,
            _draggingAngleControl: null,
            initialize: function(e, t) {
                t.objectCaching = !0,
                t.noScaleCache = !1,
                this.setRadius(t.horizontalDiameter / 2, t.verticalDiameter / 2),
                this.fontFamily = t.fontFamily || this.fontFamily,
                this.callSuper("initialize", e, t),
                this.on({
                    added: function() {
                        this.cornerSize = .025 * this.canvas.width
                    },
                    scaling: function(e) {
                        if (this.lockUniScalingWithSkew) {
                            let t = 1;
                            t = "scaleX" === e.transform.action ? this.scaleX : this.scaleY,
                            this.scaleX = t,
                            this.scaleY = t
                        }
                        this.updateFromGroupScaling()
                    },
                    selected: function() {
                        this.dirty = !0
                    },
                    deselected: function() {
                        this.dirty = !0
                    },
                    mousedown: function(e) {
                        if (!this.lockAngleControls) {
                            var t = this.getLocalPointer(e);
                            this._draggingAngleControl = this._isPointInMarkerControl(t),
                            this._draggingAngleControl && (this._lockMovementXBackup = this.lockMovementX,
                            this._lockMovementYBackup = this.lockMovementY,
                            this.lockMovementX = !0,
                            this.lockMovementY = !0)
                        }
                    },
                    mouseup: function() {
                        this.lockAngleControls || (this._draggingAngleControl && (this.lockMovementX = this._lockMovementXBackup,
                        this.lockMovementY = this._lockMovementYBackup),
                        this._draggingAngleControl = null)
                    },
                    mousemove: function(e) {
                        if (!this.lockAngleControls && this._angleControlsCords && this._angleControlsCords.start && this._angleControlsCords.end && this.canvas._activeObject === this)
                            if (this._draggingAngleControl) {
                                var t = this.getLocalPointer(e)
                                  , i = Math.atan2(t.y - this.height / 2, t.x - this.width / 2) + Math.PI / 2;
                                this._draggingAngleControl.indexOf("start") > -1 ? this.set("startAngle", fabric.util.radiansToDegrees(i)) : this._draggingAngleControl.indexOf("end") > -1 && this.set("endAngle", fabric.util.radiansToDegrees(i)),
                                this.fire("modified", this),
                                this.canvas.renderAll()
                            } else {
                                t = this.getLocalPointer(e);
                                this._isPointInMarkerControl(t) ? e.target.hoverCursor = "crosshair" : e.target.hoverCursor = this.canvas.moveCursor
                            }
                    }
                })
            },
            _isPointInControlSquare: function(e, t, i, n, o) {
                var r = function(e, t, i) {
                    var n = Math.sin(i)
                      , o = Math.cos(i)
                      , r = e.x - t.x
                      , a = e.y - t.y
                      , s = Math.sqrt(r * r + a * a)
                      , l = s * o
                      , c = s * n
                      , d = l + t.x
                      , u = c + t.y;
                    return new fabric.Point(d,u)
                };
                return n = r(n, new fabric.Point(e,t), o),
                n.x > e - i / 2 && n.x < e + i / 2 && n.y > t - i / 2 && n.y < t + i / 2
            },
            _isPointInMarkerControl: function(e) {
                return !!(this._angleControlsCords && this._angleControlsCords.start && this._angleControlsCords.end && e) && (this._isPointInControlSquare(this._angleControlsCords.start.upper.x, this._angleControlsCords.start.upper.y, this._angleControlsCords.start.size, e, this._angleControlsCords.start.angle) ? "start_upper" : this._isPointInControlSquare(this._angleControlsCords.start.lower.x, this._angleControlsCords.start.lower.y, this._angleControlsCords.start.size, e, this._angleControlsCords.start.angle) ? "start_lower" : this._isPointInControlSquare(this._angleControlsCords.end.upper.x, this._angleControlsCords.end.upper.y, this._angleControlsCords.end.size, e, this._angleControlsCords.end.angle) ? "end_upper" : !!this._isPointInControlSquare(this._angleControlsCords.end.lower.x, this._angleControlsCords.end.lower.y, this._angleControlsCords.end.size, e, this._angleControlsCords.end.angle) && "end_lower")
            },
            updateFromGroupScaling: function() {
                const e = this.horizontalDiameter * this.scaleX
                  , t = this.verticalDiameter * this.scaleY;
                this.scaleX = 1,
                this.scaleY = 1,
                this.setRadius(e / 2, t / 2)
            },
            getMeasuringContext: function() {
                return fabric._measuringContext || (fabric._measuringContext = this.canvas && this.canvas.contextCache || fabric.util.createCanvasElement().getContext("2d")),
                fabric._measuringContext.opentypeStrokeWidth = this.opentypeStrokeWidth,
                fabric._measuringContext.opentypeStroke = this.opentypeStroke,
                fabric._measuringContext.lineSpacing = 1,
                fabric._measuringContext
            },
            getPathWidth: function() {
                return this.horizontalDiameter
            },
            getPathHeight: function() {
                return this.verticalDiameter
            },
            _generateEllipse: function(e, t, i, n) {
                var o = "M" + (e - i) + "," + t + " a" + i + "," + n + " 0 1,0 " + 2 * i + ",0 a" + i + "," + n + " 0 1,0 " + -2 * i + ",0";
                return o
            },
            _atanTan: function(e, t, i) {
                e = (e + Math.PI) % (2 * Math.PI) - Math.PI;
                var n = e;
                return e = Math.atan(t / i * Math.tan(e)),
                n < -Math.PI / 2 ? e -= Math.PI : n > Math.PI / 2 && (e += Math.PI),
                e
            },
            _getEllipseArcLength: function(e, t, i, n, o=360) {
                360 != e && (e = fabric.util.radiansToDegrees(this._atanTan(fabric.util.degreesToRadians(e), n, i))),
                360 != t && (t = fabric.util.radiansToDegrees(this._atanTan(fabric.util.degreesToRadians(t), n, i))),
                e = this._normalizeAngle(e),
                t = this._normalizeAngle(t);
                for (var r = fabric.util.degreesToRadians(t - e) / o, a = fabric.util.degreesToRadians(e), s = 0, l = 0; l < o; ++l) {
                    var c = 1 - n * n / (i * i)
                      , d = c * Math.pow(Math.sin(a), 2)
                      , u = Math.sqrt(Math.abs(1 - d));
                    s += u,
                    a += r
                }
                let p = s * r * i;
                return Number.isNaN(p) && (p = 0),
                p
            },
            _computeArcs: function() {
                this._startArcOffset = this._getEllipseArcLength(this.startAngle, 360, this.horizontalDiameter / 2, this.verticalDiameter / 2),
                this._endArcOffset = this._getEllipseArcLength(0, 360 - this.endAngle, this.horizontalDiameter / 2, this.verticalDiameter / 2),
                this._maxTextArcLength = Math.abs(this._getEllipseArcLength(this.startAngle, this.endAngle, this.horizontalDiameter / 2, this.verticalDiameter / 2)),
                this.convex && (this._maxTextArcLength = this._pathLength - this._maxTextArcLength),
                this.startAngle > this.endAngle && (this._maxTextArcLength = this._pathLength - this._maxTextArcLength),
                this.startAngle === this.endAngle && (this._maxTextArcLength = Math.abs(this._getEllipseArcLength(0, 360, this.horizontalDiameter / 2, this.verticalDiameter / 2)))
            },
            setRadius: function(e, t) {
                !e && t && (e = t),
                !t && e && (t = e),
                e = e < 0 ? .1 : e,
                t = t < 0 ? .1 : t,
                this.horizontalDiameter = 2 * e,
                this.verticalDiameter = 2 * t;
                var i = this._generateEllipse(0, 0, e, t);
                this.set("width", this.getPathWidth() + 1.1 * this.currentLineHeight),
                this.set("height", this.getPathHeight() + 1.1 * this.currentLineHeight),
                this.pathProperties = n.svgPathProperties(i),
                this.path = i,
                this._pathLength = this._getEllipseArcLength(0, 360, this.horizontalDiameter / 2, this.verticalDiameter / 2),
                this._computeArcs()
            },
            _getCacheCanvasDimensions: function() {
                var e = this.callSuper("_getCacheCanvasDimensions");
                return e.width += this.width * e.zoomX,
                e.height += this.height * e.zoomY,
                e
            },
            _normalizeAngle: function(e) {
                return e = e || 0,
                0 !== e && e % 360 === 0 ? e = 360 : e %= 360,
                e < 0 && (e = 360 + e),
                e
            },
            _set: function(e, t) {
                if ("caps" === e)
                    t && this.set("text", this.text.toUpperCase());
                else if ("text" === e)
                    this.caps && (t = t.toUpperCase());
                else if ("startAngle" === e || "endAngle" === e)
                    t = this._normalizeAngle(t),
                    this.callSuper("_set", e, t),
                    this._computeArcs();
                else if ("textAlign" === e)
                    this.callSuper("_set", e, t),
                    this._computeArcs();
                else if ("horizontalDiameter" === e)
                    this.setRadius(t / 2, this.verticalDiameter / 2);
                else if ("verticalDiameter" === e)
                    this.setRadius(this.horizontalDiameter / 2, t / 2);
                else {
                    if ("fontFamily" === e || "fontSize" === e) {
                        "fontFamily" === e && t.indexOf("'") < 0 && (t = "'" + t + "'"),
                        this.callSuper("_set", e, t);
                        var i = this.getMeasuringContext();
                        this._setTextStyles(i, n, !0);
                        var n = this.getCompleteStyleDeclaration(0, 0)
                          , o = n.fontSize / this.CACHE_FONT_SIZE;
                        return this.currentLineHeight = _measureTextOpentype.call(i, " ").fontHeight * o,
                        void (this.currentLineHeight = this.currentLineHeight / Math.sin(Math.PI / 4))
                    }
                    "convex" === e && (this.callSuper("_set", e, t),
                    this._computeArcs())
                }
                this.callSuper("_set", e, t)
            },
            initDimensions: function() {
                this.callSuper("initDimensions"),
                this.width = this.getPathWidth() + 1.1 * this.currentLineHeight,
                this.height = this.getPathHeight() + 1.1 * this.currentLineHeight
            },
            _wrapDistanceAroundPath: function(e, t) {
                return e > t - 1e-5 ? e -= t : e < 0 && (e = t + e),
                e
            },
            _renderAngleMarkers: function(e, t) {
                var i = this;
                if (this.pathProperties && !(this.pathWidth <= 0)) {
                    var n = function(e, t) {
                        var i = Math.atan2(e.y - t.y, e.x - t.x);
                        return i
                    }
                      , o = function(e, t, n, o, r, a, s) {
                        var l = 1 / i.canvas.viewportTransform[0];
                        o *= l,
                        a *= l;
                        var c = 2 * l
                          , d = o / 2 * Math.cos(Math.PI / 2 - n)
                          , u = o / 2 * Math.sin(Math.PI / 2 - n);
                        e.save(),
                        e.strokeStyle = i.pathColor,
                        e.lineWidth = i.pathWidth,
                        e.translate(t.x, t.y),
                        e.beginPath(),
                        e.moveTo(0, 0),
                        e.lineTo(-d, u),
                        e.moveTo(0, 0),
                        e.lineTo(d, -u),
                        e.stroke(),
                        r && (e.lineWidth = c,
                        e.strokeStyle = i.cornerStrokeColor || i.cornerColor,
                        e.save(),
                        e.translate(d, -u),
                        e.rotate(n),
                        e.strokeRect(-a / 2, -a / 2, a, a),
                        e.restore(),
                        e.save(),
                        e.translate(-d, u),
                        e.rotate(n),
                        e.strokeRect(-a / 2, -a / 2, a, a),
                        e.restore(),
                        i._angleControlsCords[s] = {
                            upper: {
                                x: t.x + i.width / 2 + d - 2 * c,
                                y: t.y + i.height / 2 - u
                            },
                            lower: {
                                x: t.x + i.width / 2 - d - 2 * c,
                                y: t.y + i.height / 2 + u
                            },
                            size: a + 2 * c,
                            angle: n
                        }),
                        e.restore()
                    }
                      , r = function(e, t, n, o, r) {
                        r = i._normalizeAngle(r);
                        var a = fabric.util.degreesToRadians(r)
                          , s = a < Math.PI / 2 && a > -Math.PI / 2 ? 1 : -1
                          , l = n * o / Math.sqrt(o * o + n * n * Math.pow(Math.tan(a), 2));
                        l *= s;
                        var c = n * o / Math.sqrt(n * n + o * o / Math.pow(Math.tan(a), 2));
                        return {
                            x: (e + l) * (r >= 0 && r <= 270 ? 1 : -1),
                            y: (t + c) * (r >= 0 && r <= 180 ? 1 : -1)
                        }
                    }
                      , a = r(0, 0, this.horizontalDiameter / 2, this.verticalDiameter / 2, this.startAngle - 90)
                      , s = r(0, 0, this.horizontalDiameter / 2, this.verticalDiameter / 2, this.endAngle - 90)
                      , l = n(a, r(0, 0, this.horizontalDiameter / 2, this.verticalDiameter / 2, this.startAngle - 90 - 1e-4))
                      , c = n(s, r(0, 0, this.horizontalDiameter / 2, this.verticalDiameter / 2, this.endAngle - 90 - 1e-4));
                    o(e, a, l, 60, t, this.cornerSize, "start"),
                    o(e, s, c, 60, t, this.cornerSize, "end")
                }
            },
            _render: function(e) {
                this.callSuper("_render", e),
                this._renderAngleMarkers(e, this.canvas._activeObject === this && !this.lockAngleControls)
            },
            getHeightOfChar: function(e, t) {
                var i = this.getMeasuringContext();
                if (this._textLines[e][t]) {
                    var n = this.getValueOfPropertyAt(e, t, "fontSize") / this.CACHE_FONT_SIZE
                      , o = _measureTextOpentype.call(i, this._textLines[e][t]);
                    return o.height * n
                }
                return this.getValueOfPropertyAt(e, t, "fontSize")
            },
            _offsetY: 0,
            _renderTextCommon: function(e, t) {
                var i = 0
                  , n = -this.width / 2
                  , o = []
                  , r = [];
                e.opentypeStroke = this.opentypeStrokeWidth > 0 ? this.opentypeStroke : null,
                e.opentypeStrokeWidth = this.opentypeStrokeWidth,
                e.ligatures = !1;
                for (var a = 0, s = this._textLines.length; a < s; a++) {
                    var l, c = 0, d = _measureTextOpentype.call(e, this._textLines[a].join(""));
                    c += this.opentypeStrokeWidth / 2,
                    l = d.fontHeight,
                    r[a] = l,
                    a > 0 && (i += r[a - 1]);
                    var u = this._renderTextLine(t, e, this._textLines[a], n + c, i - this.opentypeStrokeWidth / 2, a);
                    u && o.push(u)
                }
            },
            _renderTextLine: function(e, t, i, n, o, r) {
                return this._renderChars(e, t, i, n, o, r)
            },
            _renderChars: function(e, t, i, n, o, r) {
                this._lastDrawnData = [];
                var a, s = this.getHeightOfLine(r);
                return t.save(),
                s * this._fontSizeFraction / this.lineHeight,
                t.textAlign = this.textAlign,
                t.textJustify = "justify" === this.textAlign,
                t.pathColor = this.pathColor,
                t.pathWidth = this.pathWidth,
                t.convex = this.convex,
                t.a = this.horizontalDiameter / 2,
                t.b = this.verticalDiameter / 2,
                t.startAngle = this.startAngle,
                t.endAngle = this.endAngle,
                t.startArcOffset = this._startArcOffset,
                t.endArcOffset = this._endArcOffset,
                t.maxTextArcLength = this._maxTextArcLength,
                t.pathLength = this._pathLength,
                t.wrapDistanceAroundPath = this._wrapDistanceAroundPath,
                t.atanTan = this._atanTan,
                this._lastDrawnData = t.textPath((this.prefix || "") + i.join("") + (this.suffix || ""), this.pathProperties),
                t.restore(),
                a
            },
            getTextPaths: function(e=0, t=0) {
                const i = this.width
                  , n = this.height
                  , o = (e,t=0,i=0)=>{
                    for (var n = 0; n < e.length; ++n)
                        for (var o = e[n], r = o.offsetX + t, a = o.offsetY + i, s = 0; s < o.commands.length; s += 1) {
                            var l = o.commands[s];
                            "M" === l.type || "L" === l.type ? (l.x += r,
                            l.y += a) : "C" === l.type ? (l.x += r,
                            l.y += a,
                            l.x1 += r,
                            l.y1 += a,
                            l.x2 += r,
                            l.y2 += a) : "Q" === l.type && (l.x += r,
                            l.y += a,
                            l.x1 += r,
                            l.y1 += a)
                        }
                    return e
                }
                  , r = [];
                if (this._lastDrawnData) {
                    for (let i = 0; i < this._lastDrawnData.length; i++) {
                        const n = this._lastDrawnData[i]
                          , a = n.x + this.width / 2 + e / 2
                          , s = n.y + this.height / 2 + t / 2
                          , l = fabric.util.radiansToDegrees(n.angle)
                          , c = o([n.path], a, s)
                          , d = c[0].toPathData(8);
                        r.push({
                            path: d,
                            angle: l,
                            x: a,
                            y: s
                        })
                    }
                    return {
                        pathsData: r,
                        width: i + e,
                        height: n + t
                    }
                }
                return null
            },
            _measureChar: function(e, t, i, n) {
                var o, r, a, s, l = this.getFontCache(t), c = this._getFontDeclaration(t), d = this._getFontDeclaration(n), u = i + e, p = c === d, h = t.fontSize / this.CACHE_FONT_SIZE, m = t.fontSize;
                if (i && l[i] && (a = l[i]),
                l[e] && (s = o = l[e]),
                p && l[u] && (r = l[u],
                s = r - a),
                !o || !a || !r) {
                    var g = this.getMeasuringContext();
                    this._setTextStyles(g, t, !0)
                }
                if (!o) {
                    var f = _measureTextOpentype.call(g, e);
                    s = o = f.width,
                    m = f.height,
                    l[e] = o
                }
                if (!a && p && i && (a = _measureTextOpentype.call(g, i).width,
                l[i] = a),
                p && !r && (r = _measureTextOpentype.call(g, u, !0).width,
                l[u] = r,
                s = r - a,
                s > o)) {
                    var v = s - o;
                    l[e] = s,
                    l[u] += v,
                    o = s
                }
                return {
                    width: o * h,
                    kernedWidth: s * h,
                    height: m
                }
            },
            toObject: function(e) {
                const t = ["pathWidth", "pathColor", "startAngle", "endAngle", "centeredRotation", "textAlign", "skewX", "skewY", "lockSkewingX", "lockSkewingY", "lockScalingFlip", "fontSize", "horizontalDiameter", "verticalDiameter", "convex", "caps", "fontPath", "fontName", "fontFamily", "fill", "color", "stroke", "strokeWidth", "id", "uuid", "fontsMap", "fontColorsMap", "zIndex", "fontLibraryId", "colorLibraryId", "evented", "selectable", "locked", "visible", "name", "text", "fontColorOption", "fontOption", "prefix", "suffix", "referenceId", "groupId"].concat(e);
                return this.callSuper("toObject", t)
            }
        }),
        fabric.PathIText.fromObject = function(e, t) {
            const i = new fabric.PathIText(e.text,e);
            t(i)
        }
    },
    "3bfc": function(e, t, i) {},
    "3d4d": function(e, t, i) {
        e.exports = i.p + "img/print-area-printful.1e0136ea.png?x-request=html"
    },
    "3d50": function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("b421")
          , o = i("bb01");
        (function() {
            function e(e, t, i, r) {
                let a = []
                  , s = 0
                  , l = null;
                function c(t) {
                    return new Promise((function(i, n) {
                        !t && l && d() && d().length ? i(d()) : e.getFonts().then((function(e) {
                            a = e,
                            i(e)
                        }
                        )).catch((function(e) {
                            n(e)
                        }
                        ))
                    }
                    ))
                }
                function d() {
                    return a
                }
                function u(e) {
                    return e || !l ? (console.log("Initializing Fonts"),
                    l = new Promise(async(t,i)=>{
                        try {
                            await c(e);
                            const o = a.findIndex((function(e) {
                                return "arial" === e.Name.toLowerCase()
                            }
                            ));
                            if (o > -1) {
                                s = o;
                                const e = a[o].Name + "_" + a[o].Style;
                                Font.loadAsync(e, Object(n["a"])(a[o].Path)).then((function() {
                                    console.log("Fonts Initialized"),
                                    t(d())
                                }
                                )).catch((function(e) {
                                    i(e)
                                }
                                ))
                            } else
                                i(new Error("Cannot find Arial font"))
                        } catch (error) {
                            i(error)
                        }
                    }
                    ),
                    l) : l
                }
                function p() {
                    return a[s]
                }
                function h(e) {
                    return t((function(t, i) {
                        var o = a.find((function(t) {
                            return t.Path === e
                        }
                        ));
                        if (o) {
                            var r = o.Name + "_" + o.Style;
                            Font.hasFont(r) ? t(r) : Font.loadAsync(r, Object(n["a"])(o.Path)).then((function() {
                                t(r)
                            }
                            )).catch((function(e) {
                                i(e)
                            }
                            ))
                        } else {
                            const t = new Error("Couldn't find font with path " + e);
                            console.error(t),
                            i(t)
                        }
                    }
                    ))
                }
                function m(t, i) {
                    return new Promise(async(n,r)=>{
                        try {
                            console.log("Uploading font file: " + t.name);
                            const r = await e.getFontUploadSignedUrl(t.name);
                            i && i(0),
                            await Object(o["a"])(r.SignedUrl, r.Mime, t),
                            i && i(100),
                            await e.validateFont(r.Name),
                            console.log(`Font ${t.name} uploaded!`),
                            n()
                        } catch (error) {
                            r(error)
                        } finally {
                            l = null
                        }
                    }
                    )
                }
                function g(e, t=null, i=null) {
                    var n = "<p><b> " + e + " </b></p>";
                    if (t && i) {
                        n = n + '<table class="font-delete-table" width="100%" border="0">  <thead>   <td>' + i + " Id</td>   <td>Name</td>  </thead>  <tbody>";
                        for (var o = 0; o < t.length; o++)
                            n = n + '    <tr>       <td class="product-id">' + t[o].id + "</td>       <td>" + t[o].name + "</td>    </tr>";
                        n += "  </tbody></table>"
                    }
                    r.show(r.alert().clickOutsideToClose(!1).multiple(!0).title("Font in use!").htmlContent(n).ok("OK"))
                }
                function f(t) {
                    return new Promise((n,o)=>{
                        var a = t.Path.substr(t.Path.lastIndexOf("/") + 1, t.Path.length);
                        r.show(r.confirm().clickOutsideToClose(!1).multiple(!0).title("Confirmation").htmlContent("<p>Are you sure you want to delete the font " + a + "?</p>").ok("OK").cancel("Cancel")).then((async function() {
                            i.start("Deleting font"),
                            await e.deleteFont(a).then((function() {
                                l = null,
                                i.stop(),
                                console.log("Deleted font " + a),
                                r.show(r.alert().clickOutsideToClose(!1).multiple(!0).title("Font deleted!").htmlContent("<p>The font " + a + " was deleted!</p>").ok("OK")).then((function() {
                                    n(!0)
                                }
                                ))
                            }
                            )).catch((function(e) {
                                409 === e.status && g(e.data.errorText, e.data.list, e.data.type),
                                l = null,
                                i.stop(),
                                o(e)
                            }
                            ))
                        }
                        ))
                    }
                    )
                }
                function v() {
                    a = [],
                    l = null,
                    Font.clearCache()
                }
                return {
                    getAllFonts: c,
                    getLoadedFonts: d,
                    initFonts: u,
                    getDefaultFont: p,
                    loadFontFromPath: h,
                    deleteFont: f,
                    uploadFont: m,
                    clearFontsCache: v
                }
            }
            e.$inject = ["FontAPIService", "$q", "blockUI", "$mdDialog"],
            angular.module("app.shared.services").factory("FontManagerService", e)
        }
        )()
    },
    "3dda": function(e, t, i) {
        "use strict";
        i("91ae")
    },
    "3e51": function(e, t) {
        angular.module("app.ctrls").directive("blockArrowsScroll", [function() {
            return {
                restrict: "A",
                link: function(e, t, i) {
                    var n = $(t)
                      , o = function(e) {
                        if ("input" !== e.target.localName && "textarea" !== e.target.localName)
                            switch (e.keyCode) {
                            case 37:
                            case 39:
                            case 38:
                            case 40:
                            case 32:
                                e.preventDefault();
                                break;
                            default:
                                break
                            }
                    };
                    n[0].addEventListener("keydown", o, !1)
                }
            }
        }
        ])
    },
    "3e59": function(e, t, i) {
        e.exports = i.p + "img/dynamicimage.22cd0652.svg?x-request=html"
    },
    "3e99": function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("b421");
        (function() {
            function e(e, t) {
                function i() {
                    return e((function(e, i) {
                        t.getTextures().then((function(t) {
                            t,
                            e(t)
                        }
                        )).catch((function(e) {
                            i(e)
                        }
                        ))
                    }
                    ))
                }
                function o(e, t, i) {
                    return new Promise((o,r)=>{
                        t.textures || (t.textures = []);
                        var a = t.textures.filter((function(e) {
                            return e.position === i
                        }
                        ));
                        a.length > 0 ? a[0].texturePath = e || null : e.length > 0 && t.textures.push({
                            position: i,
                            texturePath: e
                        });
                        const s = new Image;
                        s.onload = function() {
                            t.set("fill", new fabric.Pattern({
                                source: this
                            })),
                            o()
                        }
                        ,
                        s.onerror = function(e, t, i, n, o) {
                            r(o)
                        }
                        ,
                        s.crossOrigin = "Anonymous",
                        e ? s.src = Object(n["a"])(e) : (e = "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",
                        s.src = e)
                    }
                    )
                }
                return {
                    getAllTextures: i,
                    changeFontTexture: o
                }
            }
            e.$inject = ["$q", "TextureAPIService"],
            angular.module("app.shared.services").factory("TextureService", e)
        }
        )()
    },
    "3f02": function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i, n, o) {
                e.templateId = n,
                e.showCopiedTooltip = !1;
                const r = o.Stores.filter(e=>!e.Disabled);
                e.anyShopifyStore = r.some(e=>1 === e.Type),
                e.anyWooStore = r.some(e=>3 === e.Type),
                e.goToStore = function() {
                    t.hide({
                        action: "save-and-go-to-store"
                    })
                }
                ,
                e.goHome = function() {
                    t.hide({
                        action: "save"
                    })
                }
                ,
                e.copyTemplateId = function() {
                    const t = document.createElement("textarea");
                    t.value = n,
                    t.select(),
                    document.execCommand("copy"),
                    e.showCopiedTooltip = !0,
                    i(()=>{
                        e.showCopiedTooltip = !1
                    }
                    , 1500)
                }
            }
            e.$inject = ["$scope", "$mdDialog", "$timeout", "templateId", "user"],
            angular.module("app.ctrls").controller("TemplateSavedModalCtrl", e)
        }
        )()
    },
    4: function(e, t) {},
    "406d": function(e, t, i) {
        "use strict";
        i.d(t, "c", (function() {
            return h
        }
        )),
        i.d(t, "b", (function() {
            return m
        }
        ));
        var n = i("bc3a")
          , o = i.n(n)
          , r = i("8713")
          , a = i.n(r)
          , s = i("6f0d")
          , l = i("a251")
          , c = i.n(l)
          , d = i("c46f");
        const u = Object(s["setupCache"])({
            maxAge: 0,
            exclude: {
                query: !1
            }
        })
          , p = o.a.create({
            baseURL: "api",
            responseType: "json",
            adapter: u.adapter
        });
        p.interceptors.request.use(e=>(e.params = e.params || {},
        e.params.cacheKey = d["default"].random(Number.MAX_SAFE_INTEGER),
        e)),
        a()(p);
        const h = e=>c()(e)
          , m = e=>encodeURIComponent(encodeURIComponent(e));
        t["a"] = p
    },
    "40eb": function(t, i) {
        /**!
 * AngularJS file upload directives and services. Supoorts: file upload/drop/paste, resume, cancel/abort,
 * progress, resize, thumbnail, preview, validation and CORS
 * @author  Danial  <danial.farid@gmail.com>
 * @version 12.2.13
 */
        !window.XMLHttpRequest || window.FileAPI && FileAPI.shouldLoad || (window.XMLHttpRequest.prototype.setRequestHeader = function(e) {
            return function(t, i) {
                if ("__setXHR_" === t) {
                    var n = i(this);
                    n instanceof Function && n(this)
                } else
                    e.apply(this, arguments)
            }
        }(window.XMLHttpRequest.prototype.setRequestHeader));
        var n = angular.module("ngFileUpload", []);
        n.version = "12.2.13",
        n.service("UploadBase", ["$http", "$q", "$timeout", function(e, t, i) {
            var o = this;
            o.promisesCount = 0,
            this.isResumeSupported = function() {
                return window.Blob && window.Blob.prototype.slice
            }
            ;
            var r = this.isResumeSupported();
            function a(n) {
                n.method = n.method || "POST",
                n.headers = n.headers || {};
                var a = n._deferred = n._deferred || t.defer()
                  , s = a.promise;
                function l(e) {
                    a.notify && a.notify(e),
                    s.progressFunc && i((function() {
                        s.progressFunc(e)
                    }
                    ))
                }
                function c(e) {
                    return null != n._start && r ? {
                        loaded: e.loaded + n._start,
                        total: n._file && n._file.size || e.total,
                        type: e.type,
                        config: n,
                        lengthComputable: !0,
                        target: e.target
                    } : e
                }
                function d() {
                    e(n).then((function(e) {
                        if (r && n._chunkSize && !n._finished && n._file) {
                            var t = n._file && n._file.size || 0;
                            l({
                                loaded: Math.min(n._end, t),
                                total: t,
                                config: n,
                                type: "progress"
                            }),
                            o.upload(n, !0)
                        } else
                            n._finished && delete n._finished,
                            a.resolve(e)
                    }
                    ), (function(e) {
                        a.reject(e)
                    }
                    ), (function(e) {
                        a.notify(e)
                    }
                    ))
                }
                return n.disableProgress || (n.headers.__setXHR_ = function() {
                    return function(e) {
                        e && e.upload && e.upload.addEventListener && (n.__XHR = e,
                        n.xhrFn && n.xhrFn(e),
                        e.upload.addEventListener("progress", (function(e) {
                            e.config = n,
                            l(c(e))
                        }
                        ), !1),
                        e.upload.addEventListener("load", (function(e) {
                            e.lengthComputable && (e.config = n,
                            l(c(e)))
                        }
                        ), !1))
                    }
                }
                ),
                r ? n._chunkSize && n._end && !n._finished ? (n._start = n._end,
                n._end += n._chunkSize,
                d()) : n.resumeSizeUrl ? e.get(n.resumeSizeUrl).then((function(e) {
                    n.resumeSizeResponseReader ? n._start = n.resumeSizeResponseReader(e.data) : n._start = parseInt((null == e.data.size ? e.data : e.data.size).toString()),
                    n._chunkSize && (n._end = n._start + n._chunkSize),
                    d()
                }
                ), (function(e) {
                    throw e
                }
                )) : n.resumeSize ? n.resumeSize().then((function(e) {
                    n._start = e,
                    n._chunkSize && (n._end = n._start + n._chunkSize),
                    d()
                }
                ), (function(e) {
                    throw e
                }
                )) : (n._chunkSize && (n._start = 0,
                n._end = n._start + n._chunkSize),
                d()) : d(),
                s.success = function(e) {
                    return s.then((function(t) {
                        e(t.data, t.status, t.headers, n)
                    }
                    )),
                    s
                }
                ,
                s.error = function(e) {
                    return s.then(null, (function(t) {
                        e(t.data, t.status, t.headers, n)
                    }
                    )),
                    s
                }
                ,
                s.progress = function(e) {
                    return s.progressFunc = e,
                    s.then(null, null, (function(t) {
                        e(t)
                    }
                    )),
                    s
                }
                ,
                s.abort = s.pause = function() {
                    return n.__XHR && i((function() {
                        n.__XHR.abort()
                    }
                    )),
                    s
                }
                ,
                s.xhr = function(e) {
                    return n.xhrFn = function(t) {
                        return function() {
                            t && t.apply(s, arguments),
                            e.apply(s, arguments)
                        }
                    }(n.xhrFn),
                    s
                }
                ,
                o.promisesCount++,
                s["finally"] && s["finally"]instanceof Function && s["finally"]((function() {
                    o.promisesCount--
                }
                )),
                s
            }
            function s(e) {
                var t = {};
                for (var i in e)
                    e.hasOwnProperty(i) && (t[i] = e[i]);
                return t
            }
            this.isUploadInProgress = function() {
                return o.promisesCount > 0
            }
            ,
            this.rename = function(e, t) {
                return e.ngfName = t,
                e
            }
            ,
            this.jsonBlob = function(e) {
                null == e || angular.isString(e) || (e = JSON.stringify(e));
                var t = new window.Blob([e],{
                    type: "application/json"
                });
                return t._ngfBlob = !0,
                t
            }
            ,
            this.json = function(e) {
                return angular.toJson(e)
            }
            ,
            this.isFile = function(e) {
                return null != e && (e instanceof window.Blob || e.flashId && e.name && e.size)
            }
            ,
            this.upload = function(e, t) {
                function i(t, i) {
                    if (t._ngfBlob)
                        return t;
                    if (e._file = e._file || t,
                    null != e._start && r) {
                        e._end && e._end >= t.size && (e._finished = !0,
                        e._end = t.size);
                        var n = t.slice(e._start, e._end || t.size);
                        return n.name = t.name,
                        n.ngfName = t.ngfName,
                        e._chunkSize && (i.append("_chunkSize", e._chunkSize),
                        i.append("_currentChunkSize", e._end - e._start),
                        i.append("_chunkNumber", Math.floor(e._start / e._chunkSize)),
                        i.append("_totalSize", e._file.size)),
                        n
                    }
                    return t
                }
                function n(t, r, a) {
                    if (void 0 !== r)
                        if (angular.isDate(r) && (r = r.toISOString()),
                        angular.isString(r))
                            t.append(a, r);
                        else if (o.isFile(r)) {
                            var s = i(r, t)
                              , l = a.split(",");
                            l[1] && (s.ngfName = l[1].replace(/^\s+|\s+$/g, ""),
                            a = l[0]),
                            e._fileKey = e._fileKey || a,
                            t.append(a, s, s.ngfName || s.name)
                        } else if (angular.isObject(r)) {
                            if (r.$$ngfCircularDetection)
                                throw "ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: " + a;
                            r.$$ngfCircularDetection = !0;
                            try {
                                for (var c in r)
                                    if (r.hasOwnProperty(c) && "$$ngfCircularDetection" !== c) {
                                        var d = null == e.objectKey ? "[i]" : e.objectKey;
                                        r.length && parseInt(c) > -1 && (d = null == e.arrayKey ? d : e.arrayKey),
                                        n(t, r[c], a + d.replace(/[ik]/g, c))
                                    }
                            } finally {
                                delete r.$$ngfCircularDetection
                            }
                        } else
                            t.append(a, r)
                }
                function l() {
                    e._chunkSize = o.translateScalars(e.resumeChunkSize),
                    e._chunkSize = e._chunkSize ? parseInt(e._chunkSize.toString()) : null,
                    e.headers = e.headers || {},
                    e.headers["Content-Type"] = void 0,
                    e.transformRequest = e.transformRequest ? angular.isArray(e.transformRequest) ? e.transformRequest : [e.transformRequest] : [],
                    e.transformRequest.push((function(t) {
                        var i, o = new window.FormData;
                        for (i in t = t || e.fields || {},
                        e.file && (t.file = e.file),
                        t)
                            if (t.hasOwnProperty(i)) {
                                var r = t[i];
                                e.formDataAppender ? e.formDataAppender(o, i, r) : n(o, r, i)
                            }
                        return o
                    }
                    ))
                }
                return t || (e = s(e)),
                e._isDigested || (e._isDigested = !0,
                l()),
                a(e)
            }
            ,
            this.http = function(t) {
                return t = s(t),
                t.transformRequest = t.transformRequest || function(t) {
                    return window.ArrayBuffer && t instanceof window.ArrayBuffer || t instanceof window.Blob ? t : e.defaults.transformRequest[0].apply(this, arguments)
                }
                ,
                t._chunkSize = o.translateScalars(t.resumeChunkSize),
                t._chunkSize = t._chunkSize ? parseInt(t._chunkSize.toString()) : null,
                a(t)
            }
            ,
            this.translateScalars = function(e) {
                if (angular.isString(e)) {
                    if (e.search(/kb/i) === e.length - 2)
                        return parseFloat(1024 * e.substring(0, e.length - 2));
                    if (e.search(/mb/i) === e.length - 2)
                        return parseFloat(1048576 * e.substring(0, e.length - 2));
                    if (e.search(/gb/i) === e.length - 2)
                        return parseFloat(1073741824 * e.substring(0, e.length - 2));
                    if (e.search(/b/i) === e.length - 1)
                        return parseFloat(e.substring(0, e.length - 1));
                    if (e.search(/s/i) === e.length - 1)
                        return parseFloat(e.substring(0, e.length - 1));
                    if (e.search(/m/i) === e.length - 1)
                        return parseFloat(60 * e.substring(0, e.length - 1));
                    if (e.search(/h/i) === e.length - 1)
                        return parseFloat(3600 * e.substring(0, e.length - 1))
                }
                return e
            }
            ,
            this.urlToBlob = function(i) {
                var n = t.defer();
                return e({
                    url: i,
                    method: "get",
                    responseType: "arraybuffer"
                }).then((function(e) {
                    var t = new Uint8Array(e.data)
                      , o = e.headers("content-type") || "image/WebP"
                      , r = new window.Blob([t],{
                        type: o
                    })
                      , a = i.match(/.*\/(.+?)(\?.*)?$/);
                    a.length > 1 && (r.name = a[1]),
                    n.resolve(r)
                }
                ), (function(e) {
                    n.reject(e)
                }
                )),
                n.promise
            }
            ,
            this.setDefaults = function(e) {
                this.defaults = e || {}
            }
            ,
            this.defaults = {},
            this.version = n.version
        }
        ]),
        n.service("Upload", ["$parse", "$timeout", "$compile", "$q", "UploadExif", function(t, i, n, o, r) {
            var a = r;
            function s(e, t, i) {
                var n = [a.emptyPromise()];
                return angular.forEach(e, (function(o, r) {
                    0 === o.type.indexOf("image/jpeg") && a.attrGetter("ngfFixOrientation", t, i, {
                        $file: o
                    }) && n.push(a.happyPromise(a.applyExifRotation(o), o).then((function(t) {
                        e.splice(r, 1, t)
                    }
                    )))
                }
                )),
                o.all(n)
            }
            function l(e, t, i, n) {
                var r = a.attrGetter("ngfResize", t, i);
                if (!r || !a.isResizeSupported() || !e.length)
                    return a.emptyPromise();
                if (r instanceof Function) {
                    var s = o.defer();
                    return r(e).then((function(o) {
                        c(o, e, t, i, n).then((function(e) {
                            s.resolve(e)
                        }
                        ), (function(e) {
                            s.reject(e)
                        }
                        ))
                    }
                    ), (function(e) {
                        s.reject(e)
                    }
                    ))
                }
                return c(r, e, t, i, n)
            }
            function c(e, t, i, n, r) {
                var s = [a.emptyPromise()];
                function l(o, l) {
                    if (0 === o.type.indexOf("image")) {
                        if (e.pattern && !a.validatePattern(o, e.pattern))
                            return;
                        e.resizeIf = function(e, t) {
                            return a.attrGetter("ngfResizeIf", i, n, {
                                $width: e,
                                $height: t,
                                $file: o
                            })
                        }
                        ;
                        var c = a.resize(o, e);
                        s.push(c),
                        c.then((function(e) {
                            t.splice(l, 1, e)
                        }
                        ), (function(e) {
                            o.$error = "resize",
                            (o.$errorMessages = o.$errorMessages || {}).resize = !0,
                            o.$errorParam = (e ? (e.message ? e.message : e) + ": " : "") + (o && o.name),
                            r.$ngfValidations.push({
                                name: "resize",
                                valid: !1
                            }),
                            a.applyModelValidation(r, t)
                        }
                        ))
                    }
                }
                for (var c = 0; c < t.length; c++)
                    l(t[c], c);
                return o.all(s)
            }
            return a.getAttrWithDefaults = function(e, t) {
                if (null != e[t])
                    return e[t];
                var i = a.defaults[t];
                return null == i || angular.isString(i) ? i : JSON.stringify(i)
            }
            ,
            a.attrGetter = function(i, n, o, r) {
                var a = this.getAttrWithDefaults(n, i);
                if (!o)
                    return a;
                try {
                    return r ? t(a)(o, r) : t(a)(o)
                } catch (e) {
                    if (i.search(/min|max|pattern/i))
                        return a;
                    throw e
                }
            }
            ,
            a.shouldUpdateOn = function(e, t, i) {
                var n = a.attrGetter("ngfModelOptions", t, i);
                return !n || !n.updateOn || n.updateOn.split(" ").indexOf(e) > -1
            }
            ,
            a.emptyPromise = function() {
                var e = o.defer()
                  , t = arguments;
                return i((function() {
                    e.resolve.apply(e, t)
                }
                )),
                e.promise
            }
            ,
            a.rejectPromise = function() {
                var e = o.defer()
                  , t = arguments;
                return i((function() {
                    e.reject.apply(e, t)
                }
                )),
                e.promise
            }
            ,
            a.happyPromise = function(e, t) {
                var n = o.defer();
                return e.then((function(e) {
                    n.resolve(e)
                }
                ), (function(e) {
                    i((function() {
                        throw e
                    }
                    )),
                    n.resolve(t)
                }
                )),
                n.promise
            }
            ,
            a.updateModel = function(e, n, o, r, c, d, u) {
                function p(s, l, c, u, p) {
                    n.$$ngfPrevValidFiles = s,
                    n.$$ngfPrevInvalidFiles = l;
                    var h = s && s.length ? s[0] : null
                      , m = l && l.length ? l[0] : null;
                    e && (a.applyModelValidation(e, s),
                    e.$setViewValue(p ? h : s)),
                    r && t(r)(o, {
                        $files: s,
                        $file: h,
                        $newFiles: c,
                        $duplicateFiles: u,
                        $invalidFiles: l,
                        $invalidFile: m,
                        $event: d
                    });
                    var g = a.attrGetter("ngfModelInvalid", n);
                    g && i((function() {
                        t(g).assign(o, p ? m : l)
                    }
                    )),
                    i((function() {}
                    ))
                }
                var h, m, g, f = [], v = [], b = [];
                function y() {
                    function e(e, t) {
                        return e.name === t.name && (e.$ngfOrigSize || e.size) === (t.$ngfOrigSize || t.size) && e.type === t.type
                    }
                    function t(t) {
                        var i;
                        for (i = 0; i < m.length; i++)
                            if (e(t, m[i]))
                                return !0;
                        for (i = 0; i < g.length; i++)
                            if (e(t, g[i]))
                                return !0;
                        return !1
                    }
                    if (c) {
                        h = [],
                        f = [];
                        for (var i = 0; i < c.length; i++)
                            t(c[i]) ? f.push(c[i]) : h.push(c[i])
                    }
                }
                function w(e) {
                    return angular.isArray(e) ? e : [e]
                }
                function C() {
                    function t() {
                        i((function() {
                            p(x ? m.concat(b) : b, x ? g.concat(v) : v, c, f, S)
                        }
                        ), k && k.debounce ? k.debounce.change || k.debounce : 0)
                    }
                    var r = P ? h : b;
                    l(r, n, o, e).then((function() {
                        P ? a.validate(h, x ? m.length : 0, e, n, o).then((function(e) {
                            b = e.validsFiles,
                            v = e.invalidsFiles,
                            t()
                        }
                        )) : t()
                    }
                    ), (function() {
                        for (var e = 0; e < r.length; e++) {
                            var i = r[e];
                            if ("resize" === i.$error) {
                                var n = b.indexOf(i);
                                n > -1 && (b.splice(n, 1),
                                v.push(i)),
                                t()
                            }
                        }
                    }
                    ))
                }
                m = n.$$ngfPrevValidFiles || [],
                g = n.$$ngfPrevInvalidFiles || [],
                e && e.$modelValue && (m = w(e.$modelValue));
                var x = a.attrGetter("ngfKeep", n, o);
                h = (c || []).slice(0),
                "distinct" !== x && !0 !== a.attrGetter("ngfKeepDistinct", n, o) || y(n, o);
                var S = !x && !a.attrGetter("ngfMultiple", n, o) && !a.attrGetter("multiple", n);
                if (!x || h.length) {
                    a.attrGetter("ngfBeforeModelChange", n, o, {
                        $files: c,
                        $file: c && c.length ? c[0] : null,
                        $newFiles: h,
                        $duplicateFiles: f,
                        $event: d
                    });
                    var P = a.attrGetter("ngfValidateAfterResize", n, o)
                      , k = a.attrGetter("ngfModelOptions", n, o);
                    a.validate(h, x ? m.length : 0, e, n, o).then((function(e) {
                        u ? p(h, [], c, f, S) : (k && k.allowInvalid || P ? b = h : (b = e.validFiles,
                        v = e.invalidFiles),
                        a.attrGetter("ngfFixOrientation", n, o) && a.isExifSupported() ? s(b, n, o).then((function() {
                            C()
                        }
                        )) : C())
                    }
                    ))
                }
            }
            ,
            a
        }
        ]),
        n.directive("ngfSelect", ["$parse", "$timeout", "$compile", "Upload", function(t, i, n, o) {
            var r = [];
            function a(e) {
                var t = e.match(/Android[^\d]*(\d+)\.(\d+)/);
                if (t && t.length > 2) {
                    var i = o.defaults.androidFixMinorVersion || 4;
                    return parseInt(t[1]) < 4 || parseInt(t[1]) === i && parseInt(t[2]) < i
                }
                return -1 === e.indexOf("Chrome") && /.*Windows.*Safari.*/.test(e)
            }
            function s(t, i, n, o, s, l, c, d) {
                var u = function(e, t) {
                    return d.attrGetter(e, n, t)
                };
                function p() {
                    return "input" === i[0].tagName.toLowerCase() && n.type && "file" === n.type.toLowerCase()
                }
                function h() {
                    return u("ngfChange") || u("ngfSelect")
                }
                function m(e) {
                    if (d.shouldUpdateOn("change", n, t)) {
                        var i = e.__files_ || e.target && e.target.files
                          , r = [];
                        if (!i)
                            return;
                        for (var a = 0; a < i.length; a++)
                            r.push(i[a]);
                        d.updateModel(o, n, t, h(), r.length ? r : null, e)
                    }
                }
                d.registerModelChangeValidator(o, n, t);
                var g = [];
                function f(e, t) {
                    function o(i) {
                        e.attr("id", "ngf-" + i),
                        t.attr("id", "ngf-label-" + i)
                    }
                    for (var r = 0; r < i[0].attributes.length; r++) {
                        var a = i[0].attributes[r];
                        "type" !== a.name && "class" !== a.name && "style" !== a.name && ("id" === a.name ? (o(a.value),
                        g.push(n.$observe("id", o))) : e.attr(a.name, a.value || "required" !== a.name && "multiple" !== a.name ? a.value : a.name))
                    }
                }
                function v() {
                    if (p())
                        return i;
                    var e = angular.element('<input type="file">')
                      , t = angular.element("<label>upload</label>");
                    return t.css("visibility", "hidden").css("position", "absolute").css("overflow", "hidden").css("width", "0px").css("height", "0px").css("border", "none").css("margin", "0px").css("padding", "0px").attr("tabindex", "-1"),
                    f(e, t),
                    r.push({
                        el: i,
                        ref: t
                    }),
                    document.body.appendChild(t.append(e)[0]),
                    e
                }
                function b(n) {
                    if (i.attr("disabled"))
                        return !1;
                    if (!u("ngfSelectDisabled", t)) {
                        var o = C(n);
                        if (null != o)
                            return o;
                        S(n);
                        try {
                            p() || document.body.contains(x[0]) || (r.push({
                                el: i,
                                ref: x.parent()
                            }),
                            document.body.appendChild(x.parent()[0]),
                            x.bind("change", m))
                        } catch (e) {}
                        return a(navigator.userAgent) ? setTimeout((function() {
                            x[0].click()
                        }
                        ), 0) : x[0].click(),
                        !1
                    }
                }
                u("ngfMultiple") && g.push(t.$watch(u("ngfMultiple"), (function() {
                    x.attr("multiple", u("ngfMultiple", t))
                }
                ))),
                u("ngfCapture") && g.push(t.$watch(u("ngfCapture"), (function() {
                    x.attr("capture", u("ngfCapture", t))
                }
                ))),
                u("ngfAccept") && g.push(t.$watch(u("ngfAccept"), (function() {
                    x.attr("accept", u("ngfAccept", t))
                }
                ))),
                g.push(n.$observe("accept", (function() {
                    x.attr("accept", u("accept"))
                }
                )));
                var y = 0
                  , w = 0;
                function C(e) {
                    var t = e.changedTouches || e.originalEvent && e.originalEvent.changedTouches;
                    if (t) {
                        if ("touchstart" === e.type)
                            return w = t[0].clientX,
                            y = t[0].clientY,
                            !0;
                        if ("touchend" === e.type) {
                            var i = t[0].clientX
                              , n = t[0].clientY;
                            if (Math.abs(i - w) > 20 || Math.abs(n - y) > 20)
                                return e.stopPropagation(),
                                e.preventDefault(),
                                !1
                        }
                        return !0
                    }
                }
                var x = i;
                function S(e) {
                    d.shouldUpdateOn("click", n, t) && x.val() && (x.val(null),
                    d.updateModel(o, n, t, h(), null, e, !0))
                }
                function P(e) {
                    if (x && !x.attr("__ngf_ie10_Fix_")) {
                        if (!x[0].parentNode)
                            return void (x = null);
                        e.preventDefault(),
                        e.stopPropagation(),
                        x.unbind("click");
                        var t = x.clone();
                        return x.replaceWith(t),
                        x = t,
                        x.attr("__ngf_ie10_Fix_", "true"),
                        x.bind("change", m),
                        x.bind("click", P),
                        x[0].click(),
                        !1
                    }
                    x.removeAttr("__ngf_ie10_Fix_")
                }
                p() || (x = v()),
                x.bind("change", m),
                p() ? i.bind("click", S) : i.bind("click touchstart touchend", b),
                -1 !== navigator.appVersion.indexOf("MSIE 10") && x.bind("click", P),
                o && o.$formatters.push((function(e) {
                    return null != e && 0 !== e.length || x.val() && x.val(null),
                    e
                }
                )),
                t.$on("$destroy", (function() {
                    p() || x.parent().remove(),
                    angular.forEach(g, (function(e) {
                        e()
                    }
                    ))
                }
                )),
                l((function() {
                    for (var e = 0; e < r.length; e++) {
                        var t = r[e];
                        document.body.contains(t.el[0]) || (r.splice(e, 1),
                        t.ref.remove())
                    }
                }
                )),
                window.FileAPI && window.FileAPI.ngfFixIE && window.FileAPI.ngfFixIE(i, x, m)
            }
            return {
                restrict: "AEC",
                require: "?ngModel",
                link: function(e, r, a, l) {
                    s(e, r, a, l, t, i, n, o)
                }
            }
        }
        ]),
        function() {
            function t(e) {
                return "img" === e.tagName.toLowerCase() ? "image" : "audio" === e.tagName.toLowerCase() ? "audio" : "video" === e.tagName.toLowerCase() ? "video" : /./
            }
            function i(e, i, n, o, r, a, s, l) {
                function c(t) {
                    var a = e.attrGetter("ngfNoObjectUrl", r, n);
                    e.dataUrl(t, a)["finally"]((function() {
                        i((function() {
                            var e = (a ? t.$ngfDataUrl : t.$ngfBlobUrl) || t.$ngfDataUrl;
                            l ? o.css("background-image", "url('" + (e || "") + "')") : o.attr("src", e),
                            e ? o.removeClass("ng-hide") : o.addClass("ng-hide")
                        }
                        ))
                    }
                    ))
                }
                i((function() {
                    var i = n.$watch(r[a], (function(i) {
                        var d = s;
                        if ("ngfThumbnail" === a && (d || (d = {
                            width: o[0].naturalWidth || o[0].clientWidth,
                            height: o[0].naturalHeight || o[0].clientHeight
                        }),
                        0 === d.width && window.getComputedStyle)) {
                            var u = getComputedStyle(o[0]);
                            u.width && u.width.indexOf("px") > -1 && u.height && u.height.indexOf("px") > -1 && (d = {
                                width: parseInt(u.width.slice(0, -2)),
                                height: parseInt(u.height.slice(0, -2))
                            })
                        }
                        if (angular.isString(i))
                            return o.removeClass("ng-hide"),
                            l ? o.css("background-image", "url('" + i + "')") : o.attr("src", i);
                        !i || !i.type || 0 !== i.type.search(t(o[0])) || l && 0 !== i.type.indexOf("image") ? o.addClass("ng-hide") : d && e.isResizeSupported() ? (d.resizeIf = function(t, o) {
                            return e.attrGetter("ngfResizeIf", r, n, {
                                $width: t,
                                $height: o,
                                $file: i
                            })
                        }
                        ,
                        e.resize(i, d).then((function(e) {
                            c(e)
                        }
                        ), (function(e) {
                            throw e
                        }
                        ))) : c(i)
                    }
                    ));
                    n.$on("$destroy", (function() {
                        i()
                    }
                    ))
                }
                ))
            }
            n.service("UploadDataUrl", ["UploadBase", "$timeout", "$q", function(t, i, n) {
                var o = t;
                return o.base64DataUrl = function(e) {
                    if (angular.isArray(e)) {
                        var t = n.defer()
                          , i = 0;
                        return angular.forEach(e, (function(n) {
                            o.dataUrl(n, !0)["finally"]((function() {
                                if (i++,
                                i === e.length) {
                                    var n = [];
                                    angular.forEach(e, (function(e) {
                                        n.push(e.$ngfDataUrl)
                                    }
                                    )),
                                    t.resolve(n, e)
                                }
                            }
                            ))
                        }
                        )),
                        t.promise
                    }
                    return o.dataUrl(e, !0)
                }
                ,
                o.dataUrl = function(t, r) {
                    if (!t)
                        return o.emptyPromise(t, t);
                    if (r && null != t.$ngfDataUrl || !r && null != t.$ngfBlobUrl)
                        return o.emptyPromise(r ? t.$ngfDataUrl : t.$ngfBlobUrl, t);
                    var a = r ? t.$$ngfDataUrlPromise : t.$$ngfBlobUrlPromise;
                    if (a)
                        return a;
                    var s = n.defer();
                    return i((function() {
                        if (window.FileReader && t && (!window.FileAPI || -1 === navigator.userAgent.indexOf("MSIE 8") || t.size < 2e4) && (!window.FileAPI || -1 === navigator.userAgent.indexOf("MSIE 9") || t.size < 4e6)) {
                            var n = window.URL || window.webkitURL;
                            if (n && n.createObjectURL && !r) {
                                var a;
                                try {
                                    a = n.createObjectURL(t)
                                } catch (e) {
                                    return void i((function() {
                                        t.$ngfBlobUrl = "",
                                        s.reject()
                                    }
                                    ))
                                }
                                i((function() {
                                    if (t.$ngfBlobUrl = a,
                                    a) {
                                        s.resolve(a, t),
                                        o.blobUrls = o.blobUrls || [],
                                        o.blobUrlsTotalSize = o.blobUrlsTotalSize || 0,
                                        o.blobUrls.push({
                                            url: a,
                                            size: t.size
                                        }),
                                        o.blobUrlsTotalSize += t.size || 0;
                                        var e = o.defaults.blobUrlsMaxMemory || 268435456
                                          , i = o.defaults.blobUrlsMaxQueueSize || 200;
                                        while ((o.blobUrlsTotalSize > e || o.blobUrls.length > i) && o.blobUrls.length > 1) {
                                            var r = o.blobUrls.splice(0, 1)[0];
                                            n.revokeObjectURL(r.url),
                                            o.blobUrlsTotalSize -= r.size
                                        }
                                    }
                                }
                                ))
                            } else {
                                var l = new FileReader;
                                l.onload = function(e) {
                                    i((function() {
                                        t.$ngfDataUrl = e.target.result,
                                        s.resolve(e.target.result, t),
                                        i((function() {
                                            delete t.$ngfDataUrl
                                        }
                                        ), 1e3)
                                    }
                                    ))
                                }
                                ,
                                l.onerror = function() {
                                    i((function() {
                                        t.$ngfDataUrl = "",
                                        s.reject()
                                    }
                                    ))
                                }
                                ,
                                l.readAsDataURL(t)
                            }
                        } else
                            i((function() {
                                t[r ? "$ngfDataUrl" : "$ngfBlobUrl"] = "",
                                s.reject()
                            }
                            ))
                    }
                    )),
                    a = r ? t.$$ngfDataUrlPromise = s.promise : t.$$ngfBlobUrlPromise = s.promise,
                    a["finally"]((function() {
                        delete t[r ? "$$ngfDataUrlPromise" : "$$ngfBlobUrlPromise"]
                    }
                    )),
                    a
                }
                ,
                o
            }
            ]),
            n.directive("ngfSrc", ["Upload", "$timeout", function(e, t) {
                return {
                    restrict: "AE",
                    link: function(n, o, r) {
                        i(e, t, n, o, r, "ngfSrc", e.attrGetter("ngfResize", r, n), !1)
                    }
                }
            }
            ]),
            n.directive("ngfBackground", ["Upload", "$timeout", function(e, t) {
                return {
                    restrict: "AE",
                    link: function(n, o, r) {
                        i(e, t, n, o, r, "ngfBackground", e.attrGetter("ngfResize", r, n), !0)
                    }
                }
            }
            ]),
            n.directive("ngfThumbnail", ["Upload", "$timeout", function(e, t) {
                return {
                    restrict: "AE",
                    link: function(n, o, r) {
                        var a = e.attrGetter("ngfSize", r, n);
                        i(e, t, n, o, r, "ngfThumbnail", a, e.attrGetter("ngfAsBackground", r, n))
                    }
                }
            }
            ]),
            n.config(["$compileProvider", function(e) {
                e.imgSrcSanitizationWhitelist && e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),
                e.aHrefSanitizationWhitelist && e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)
            }
            ]),
            n.filter("ngfDataUrl", ["UploadDataUrl", "$sce", function(e, t) {
                return function(i, n, o) {
                    if (angular.isString(i))
                        return t.trustAsResourceUrl(i);
                    var r = i && ((n ? i.$ngfDataUrl : i.$ngfBlobUrl) || i.$ngfDataUrl);
                    return i && !r ? (!i.$ngfDataUrlFilterInProgress && angular.isObject(i) && (i.$ngfDataUrlFilterInProgress = !0,
                    e.dataUrl(i, n)),
                    "") : (i && delete i.$ngfDataUrlFilterInProgress,
                    (i && r ? o ? t.trustAsResourceUrl(r) : r : i) || "")
                }
            }
            ])
        }(),
        n.service("UploadValidate", ["UploadDataUrl", "$q", "$timeout", function(e, t, i) {
            var n = e;
            function o(e) {
                var t = ""
                  , i = [];
                if (e.length > 2 && "/" === e[0] && "/" === e[e.length - 1])
                    t = e.substring(1, e.length - 1);
                else {
                    var n = e.split(",");
                    if (n.length > 1)
                        for (var r = 0; r < n.length; r++) {
                            var a = o(n[r]);
                            a.regexp ? (t += "(" + a.regexp + ")",
                            r < n.length - 1 && (t += "|")) : i = i.concat(a.excludes)
                        }
                    else
                        0 === e.indexOf("!") ? i.push("^((?!" + o(e.substring(1)).regexp + ").)*$") : (0 === e.indexOf(".") && (e = "*" + e),
                        t = "^" + e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"), "\\$&") + "$",
                        t = t.replace(/\\\*/g, ".*").replace(/\\\?/g, "."))
                }
                return {
                    regexp: t,
                    excludes: i
                }
            }
            function r(e, t) {
                null == t || e.$dirty || (e.$setDirty ? e.$setDirty() : e.$dirty = !0)
            }
            return n.validatePattern = function(e, t) {
                if (!t)
                    return !0;
                var i = o(t)
                  , n = !0;
                if (i.regexp && i.regexp.length) {
                    var r = new RegExp(i.regexp,"i");
                    n = null != e.type && r.test(e.type) || null != e.name && r.test(e.name)
                }
                var a = i.excludes.length;
                while (a--) {
                    var s = new RegExp(i.excludes[a],"i");
                    n = n && (null == e.type || s.test(e.type)) && (null == e.name || s.test(e.name))
                }
                return n
            }
            ,
            n.ratioToFloat = function(e) {
                var t = e.toString()
                  , i = t.search(/[x:]/i);
                return t = i > -1 ? parseFloat(t.substring(0, i)) / parseFloat(t.substring(i + 1)) : parseFloat(t),
                t
            }
            ,
            n.registerModelChangeValidator = function(e, t, i) {
                e && e.$formatters.push((function(o) {
                    if (e.$dirty) {
                        var r = o;
                        o && !angular.isArray(o) && (r = [o]),
                        n.validate(r, 0, e, t, i).then((function() {
                            n.applyModelValidation(e, r)
                        }
                        ))
                    }
                    return o
                }
                ))
            }
            ,
            n.applyModelValidation = function(e, t) {
                r(e, t),
                angular.forEach(e.$ngfValidations, (function(t) {
                    e.$setValidity(t.name, t.valid)
                }
                ))
            }
            ,
            n.getValidationAttr = function(e, t, i, o, r) {
                var a = "ngf" + i[0].toUpperCase() + i.substr(1)
                  , s = n.attrGetter(a, e, t, {
                    $file: r
                });
                if (null == s && (s = n.attrGetter("ngfValidate", e, t, {
                    $file: r
                }),
                s)) {
                    var l = (o || i).split(".");
                    s = s[l[0]],
                    l.length > 1 && (s = s && s[l[1]])
                }
                return s
            }
            ,
            n.validate = function(e, i, o, r, a) {
                o = o || {},
                o.$ngfValidations = o.$ngfValidations || [],
                angular.forEach(o.$ngfValidations, (function(e) {
                    e.valid = !0
                }
                ));
                var s = function(e, t) {
                    return n.attrGetter(e, r, a, t)
                }
                  , l = (n.attrGetter("ngfIgnoreInvalid", r, a) || "").split(" ")
                  , c = n.attrGetter("ngfRunAllValidations", r, a);
                if (null == e || 0 === e.length)
                    return n.emptyPromise({
                        validFiles: e,
                        invalidFiles: []
                    });
                e = void 0 === e.length ? [e] : e.slice(0);
                var d = [];
                function u(t, i, s) {
                    if (e) {
                        var u = e.length
                          , p = null;
                        while (u--) {
                            var h = e[u];
                            if (h) {
                                var m = n.getValidationAttr(r, a, t, i, h);
                                null != m && (s(h, m, u) || (-1 === l.indexOf(t) ? (h.$error = t,
                                (h.$errorMessages = h.$errorMessages || {})[t] = !0,
                                h.$errorParam = m,
                                -1 === d.indexOf(h) && d.push(h),
                                c || e.splice(u, 1),
                                p = !1) : e.splice(u, 1)))
                            }
                        }
                        null !== p && o.$ngfValidations.push({
                            name: t,
                            valid: p
                        })
                    }
                }
                u("pattern", null, n.validatePattern),
                u("minSize", "size.min", (function(e, t) {
                    return e.size + .1 >= n.translateScalars(t)
                }
                )),
                u("maxSize", "size.max", (function(e, t) {
                    return e.size - .1 <= n.translateScalars(t)
                }
                ));
                var p = 0;
                if (u("maxTotalSize", null, (function(t, i) {
                    return p += t.size,
                    !(p > n.translateScalars(i)) || (e.splice(0, e.length),
                    !1)
                }
                )),
                u("validateFn", null, (function(e, t) {
                    return !0 === t || null === t || "" === t
                }
                )),
                !e.length)
                    return n.emptyPromise({
                        validFiles: [],
                        invalidFiles: d
                    });
                function h(i, u, p, h, m) {
                    function g(t, n, o) {
                        function r(r) {
                            if (r())
                                if (-1 === l.indexOf(i)) {
                                    if (n.$error = i,
                                    (n.$errorMessages = n.$errorMessages || {})[i] = !0,
                                    n.$errorParam = o,
                                    -1 === d.indexOf(n) && d.push(n),
                                    !c) {
                                        var a = e.indexOf(n);
                                        a > -1 && e.splice(a, 1)
                                    }
                                    t.resolve(!1)
                                } else {
                                    var s = e.indexOf(n);
                                    s > -1 && e.splice(s, 1),
                                    t.resolve(!0)
                                }
                            else
                                t.resolve(!0)
                        }
                        null != o ? h(n, o).then((function(e) {
                            r((function() {
                                return !m(e, o)
                            }
                            ))
                        }
                        ), (function() {
                            r((function() {
                                return s("ngfValidateForce", {
                                    $file: n
                                })
                            }
                            ))
                        }
                        )) : t.resolve(!0)
                    }
                    var f = [n.emptyPromise(!0)];
                    e && (e = void 0 === e.length ? [e] : e,
                    angular.forEach(e, (function(e) {
                        var o = t.defer();
                        f.push(o.promise),
                        !p || null != e.type && 0 === e.type.search(p) ? "dimensions" === i && null != n.attrGetter("ngfDimensions", r) ? n.imageDimensions(e).then((function(t) {
                            g(o, e, s("ngfDimensions", {
                                $file: e,
                                $width: t.width,
                                $height: t.height
                            }))
                        }
                        ), (function() {
                            o.resolve(!1)
                        }
                        )) : "duration" === i && null != n.attrGetter("ngfDuration", r) ? n.mediaDuration(e).then((function(t) {
                            g(o, e, s("ngfDuration", {
                                $file: e,
                                $duration: t
                            }))
                        }
                        ), (function() {
                            o.resolve(!1)
                        }
                        )) : g(o, e, n.getValidationAttr(r, a, i, u, e)) : o.resolve(!0)
                    }
                    )));
                    var v = t.defer();
                    return t.all(f).then((function(e) {
                        for (var t = !0, n = 0; n < e.length; n++)
                            if (!e[n]) {
                                t = !1;
                                break
                            }
                        o.$ngfValidations.push({
                            name: i,
                            valid: t
                        }),
                        v.resolve(t)
                    }
                    )),
                    v.promise
                }
                var m = t.defer()
                  , g = [];
                return g.push(h("maxHeight", "height.max", /image/, this.imageDimensions, (function(e, t) {
                    return e.height <= t
                }
                ))),
                g.push(h("minHeight", "height.min", /image/, this.imageDimensions, (function(e, t) {
                    return e.height >= t
                }
                ))),
                g.push(h("maxWidth", "width.max", /image/, this.imageDimensions, (function(e, t) {
                    return e.width <= t
                }
                ))),
                g.push(h("minWidth", "width.min", /image/, this.imageDimensions, (function(e, t) {
                    return e.width >= t
                }
                ))),
                g.push(h("dimensions", null, /image/, (function(e, t) {
                    return n.emptyPromise(t)
                }
                ), (function(e) {
                    return e
                }
                ))),
                g.push(h("ratio", null, /image/, this.imageDimensions, (function(e, t) {
                    for (var i = t.toString().split(","), o = !1, r = 0; r < i.length; r++)
                        Math.abs(e.width / e.height - n.ratioToFloat(i[r])) < .01 && (o = !0);
                    return o
                }
                ))),
                g.push(h("maxRatio", "ratio.max", /image/, this.imageDimensions, (function(e, t) {
                    return e.width / e.height - n.ratioToFloat(t) < 1e-4
                }
                ))),
                g.push(h("minRatio", "ratio.min", /image/, this.imageDimensions, (function(e, t) {
                    return e.width / e.height - n.ratioToFloat(t) > -1e-4
                }
                ))),
                g.push(h("maxDuration", "duration.max", /audio|video/, this.mediaDuration, (function(e, t) {
                    return e <= n.translateScalars(t)
                }
                ))),
                g.push(h("minDuration", "duration.min", /audio|video/, this.mediaDuration, (function(e, t) {
                    return e >= n.translateScalars(t)
                }
                ))),
                g.push(h("duration", null, /audio|video/, (function(e, t) {
                    return n.emptyPromise(t)
                }
                ), (function(e) {
                    return e
                }
                ))),
                g.push(h("validateAsyncFn", null, null, (function(e, t) {
                    return t
                }
                ), (function(e) {
                    return !0 === e || null === e || "" === e
                }
                ))),
                t.all(g).then((function() {
                    if (c)
                        for (var t = 0; t < e.length; t++) {
                            var n = e[t];
                            n.$error && e.splice(t--, 1)
                        }
                    c = !1,
                    u("maxFiles", null, (function(e, t, n) {
                        return i + n < t
                    }
                    )),
                    m.resolve({
                        validFiles: e,
                        invalidFiles: d
                    })
                }
                )),
                m.promise
            }
            ,
            n.imageDimensions = function(e) {
                if (e.$ngfWidth && e.$ngfHeight) {
                    var o = t.defer();
                    return i((function() {
                        o.resolve({
                            width: e.$ngfWidth,
                            height: e.$ngfHeight
                        })
                    }
                    )),
                    o.promise
                }
                if (e.$ngfDimensionPromise)
                    return e.$ngfDimensionPromise;
                var r = t.defer();
                return i((function() {
                    0 === e.type.indexOf("image") ? n.dataUrl(e).then((function(t) {
                        var n = angular.element("<img>").attr("src", t).css("visibility", "hidden").css("position", "fixed").css("max-width", "none !important").css("max-height", "none !important");
                        function o() {
                            var t = n[0].naturalWidth || n[0].clientWidth
                              , i = n[0].naturalHeight || n[0].clientHeight;
                            n.remove(),
                            e.$ngfWidth = t,
                            e.$ngfHeight = i,
                            r.resolve({
                                width: t,
                                height: i
                            })
                        }
                        function a() {
                            n.remove(),
                            r.reject("load error")
                        }
                        n.on("load", o),
                        n.on("error", a);
                        var s = 0;
                        function l() {
                            i((function() {
                                n[0].parentNode && (n[0].clientWidth ? o() : s++ > 10 ? a() : l())
                            }
                            ), 1e3)
                        }
                        l(),
                        angular.element(document.getElementsByTagName("body")[0]).append(n)
                    }
                    ), (function() {
                        r.reject("load error")
                    }
                    )) : r.reject("not image")
                }
                )),
                e.$ngfDimensionPromise = r.promise,
                e.$ngfDimensionPromise["finally"]((function() {
                    delete e.$ngfDimensionPromise
                }
                )),
                e.$ngfDimensionPromise
            }
            ,
            n.mediaDuration = function(e) {
                if (e.$ngfDuration) {
                    var o = t.defer();
                    return i((function() {
                        o.resolve(e.$ngfDuration)
                    }
                    )),
                    o.promise
                }
                if (e.$ngfDurationPromise)
                    return e.$ngfDurationPromise;
                var r = t.defer();
                return i((function() {
                    0 === e.type.indexOf("audio") || 0 === e.type.indexOf("video") ? n.dataUrl(e).then((function(t) {
                        var n = angular.element(0 === e.type.indexOf("audio") ? "<audio>" : "<video>").attr("src", t).css("visibility", "none").css("position", "fixed");
                        function o() {
                            var t = n[0].duration;
                            e.$ngfDuration = t,
                            n.remove(),
                            r.resolve(t)
                        }
                        function a() {
                            n.remove(),
                            r.reject("load error")
                        }
                        n.on("loadedmetadata", o),
                        n.on("error", a);
                        var s = 0;
                        function l() {
                            i((function() {
                                n[0].parentNode && (n[0].duration ? o() : s > 10 ? a() : l())
                            }
                            ), 1e3)
                        }
                        l(),
                        angular.element(document.body).append(n)
                    }
                    ), (function() {
                        r.reject("load error")
                    }
                    )) : r.reject("not media")
                }
                )),
                e.$ngfDurationPromise = r.promise,
                e.$ngfDurationPromise["finally"]((function() {
                    delete e.$ngfDurationPromise
                }
                )),
                e.$ngfDurationPromise
            }
            ,
            n
        }
        ]),
        n.service("UploadResize", ["UploadValidate", "$q", function(t, i) {
            var n = t
              , o = function(e, t, i, n, o) {
                var r = o ? Math.max(i / e, n / t) : Math.min(i / e, n / t);
                return {
                    width: e * r,
                    height: t * r,
                    marginX: e * r - i,
                    marginY: t * r - n
                }
            }
              , r = function(t, r, a, s, l, c, d, u) {
                var p = i.defer()
                  , h = document.createElement("canvas")
                  , m = document.createElement("img");
                return m.setAttribute("style", "visibility:hidden;position:fixed;z-index:-100000"),
                document.body.appendChild(m),
                m.onload = function() {
                    var t = m.width
                      , i = m.height;
                    if (m.parentNode.removeChild(m),
                    null == u || !1 !== u(t, i))
                        try {
                            if (c) {
                                var g = n.ratioToFloat(c)
                                  , f = t / i;
                                f < g ? (r = t,
                                a = r / g) : (a = i,
                                r = a * g)
                            }
                            r || (r = t),
                            a || (a = i);
                            var v = o(t, i, r, a, d);
                            h.width = Math.min(v.width, r),
                            h.height = Math.min(v.height, a);
                            var b = h.getContext("2d");
                            b.drawImage(m, Math.min(0, -v.marginX / 2), Math.min(0, -v.marginY / 2), v.width, v.height),
                            p.resolve(h.toDataURL(l || "image/WebP", s || .934))
                        } catch (e) {
                            p.reject(e)
                        }
                    else
                        p.reject("resizeIf")
                }
                ,
                m.onerror = function() {
                    m.parentNode.removeChild(m),
                    p.reject()
                }
                ,
                m.src = t,
                p.promise
            };
            return n.dataUrltoBlob = function(e, t, i) {
                var n = e.split(",")
                  , o = n[0].match(/:(.*?);/)[1]
                  , r = atob(n[1])
                  , a = r.length
                  , s = new Uint8Array(a);
                while (a--)
                    s[a] = r.charCodeAt(a);
                var l = new window.Blob([s],{
                    type: o
                });
                return l.name = t,
                l.$ngfOrigSize = i,
                l
            }
            ,
            n.isResizeSupported = function() {
                var e = document.createElement("canvas");
                return window.atob && e.getContext && e.getContext("2d") && window.Blob
            }
            ,
            n.isResizeSupported() && Object.defineProperty(window.Blob.prototype, "name", {
                get: function() {
                    return this.$ngfName
                },
                set: function(e) {
                    this.$ngfName = e
                },
                configurable: !0
            }),
            n.resize = function(t, o) {
                if (0 !== t.type.indexOf("image"))
                    return n.emptyPromise(t);
                var a = i.defer();
                return n.dataUrl(t, !0).then((function(i) {
                    r(i, o.width, o.height, o.quality, o.type || t.type, o.ratio, o.centerCrop, o.resizeIf).then((function(r) {
                        if ("image/jpeg" === t.type && !1 !== o.restoreExif)
                            try {
                                r = n.restoreExif(i, r)
                            } catch (e) {
                                setTimeout((function() {
                                    throw e
                                }
                                ), 1)
                            }
                        try {
                            var s = n.dataUrltoBlob(r, t.name, t.size);
                            a.resolve(s)
                        } catch (e) {
                            a.reject(e)
                        }
                    }
                    ), (function(e) {
                        "resizeIf" === e && a.resolve(t),
                        a.reject(e)
                    }
                    ))
                }
                ), (function(e) {
                    a.reject(e)
                }
                )),
                a.promise
            }
            ,
            n
        }
        ]),
        function() {
            function t(t, n, o, r, a, s, l, c, d, u) {
                var p = i()
                  , h = function(e, t, i) {
                    return c.attrGetter(e, o, t, i)
                };
                if (h("dropAvailable") && s((function() {
                    t[h("dropAvailable")] ? t[h("dropAvailable")].value = p : t[h("dropAvailable")] = p
                }
                )),
                p) {
                    null == h("ngfSelect") && c.registerModelChangeValidator(r, o, t);
                    var m, g = null, f = a(h("ngfStopPropagation")), v = 1;
                    n[0].addEventListener("dragover", (function(e) {
                        if (!b() && c.shouldUpdateOn("drop", o, t)) {
                            if (e.preventDefault(),
                            f(t) && e.stopPropagation(),
                            navigator.userAgent.indexOf("Chrome") > -1) {
                                var i = e.dataTransfer.effectAllowed;
                                e.dataTransfer.dropEffect = "move" === i || "linkMove" === i ? "move" : "copy"
                            }
                            s.cancel(g),
                            m || (m = "C",
                            x(t, o, e, (function(i) {
                                m = i,
                                n.addClass(m),
                                h("ngfDrag", t, {
                                    $isDragging: !0,
                                    $class: m,
                                    $event: e
                                })
                            }
                            )))
                        }
                    }
                    ), !1),
                    n[0].addEventListener("dragenter", (function(e) {
                        !b() && c.shouldUpdateOn("drop", o, t) && (e.preventDefault(),
                        f(t) && e.stopPropagation())
                    }
                    ), !1),
                    n[0].addEventListener("dragleave", (function(e) {
                        !b() && c.shouldUpdateOn("drop", o, t) && (e.preventDefault(),
                        f(t) && e.stopPropagation(),
                        g = s((function() {
                            m && n.removeClass(m),
                            m = null,
                            h("ngfDrag", t, {
                                $isDragging: !1,
                                $event: e
                            })
                        }
                        ), v || 100))
                    }
                    ), !1),
                    n[0].addEventListener("drop", (function(e) {
                        !b() && c.shouldUpdateOn("drop", o, t) && (e.preventDefault(),
                        f(t) && e.stopPropagation(),
                        m && n.removeClass(m),
                        m = null,
                        y(e.dataTransfer, e, "dropUrl"))
                    }
                    ), !1),
                    n[0].addEventListener("paste", (function(e) {
                        navigator.userAgent.toLowerCase().indexOf("firefox") > -1 && h("ngfEnableFirefoxPaste", t) && e.preventDefault(),
                        !b() && c.shouldUpdateOn("paste", o, t) && y(e.clipboardData || e.originalEvent.clipboardData, e, "pasteUrl")
                    }
                    ), !1),
                    navigator.userAgent.toLowerCase().indexOf("firefox") > -1 && h("ngfEnableFirefoxPaste", t) && (n.attr("contenteditable", !0),
                    n.on("keypress", (function(e) {
                        e.metaKey || e.ctrlKey || e.preventDefault()
                    }
                    )))
                } else
                    !0 === h("ngfHideOnDropNotAvailable", t) && n.css("display", "none");
                function b() {
                    return n.attr("disabled") || h("ngfDropDisabled", t)
                }
                function y(i, n, o) {
                    if (i) {
                        var r;
                        try {
                            r = i && i.getData && i.getData("text/html")
                        } catch (e) {}
                        S(i.items, i.files, !1 !== h("ngfAllowDir", t), h("multiple") || h("ngfMultiple", t)).then((function(e) {
                            e.length ? w(e, n) : C(o, r).then((function(e) {
                                w(e, n)
                            }
                            ))
                        }
                        ))
                    }
                }
                function w(e, i) {
                    c.updateModel(r, o, t, h("ngfChange") || h("ngfDrop"), e, i)
                }
                function C(e, i) {
                    if (!c.shouldUpdateOn(e, o, t) || "string" !== typeof i)
                        return c.rejectPromise([]);
                    var n = [];
                    i.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi, (function(e, t, i) {
                        n.push(i)
                    }
                    ));
                    var r = []
                      , a = [];
                    if (n.length) {
                        angular.forEach(n, (function(e) {
                            r.push(c.urlToBlob(e).then((function(e) {
                                a.push(e)
                            }
                            )))
                        }
                        ));
                        var s = u.defer();
                        return u.all(r).then((function() {
                            s.resolve(a)
                        }
                        ), (function(e) {
                            s.reject(e)
                        }
                        )),
                        s.promise
                    }
                    return c.emptyPromise()
                }
                function x(e, t, i, n) {
                    var o = h("ngfDragOverClass", e, {
                        $event: i
                    })
                      , r = "dragover";
                    if (angular.isString(o))
                        r = o;
                    else if (o && (o.delay && (v = o.delay),
                    o.accept || o.reject)) {
                        var a = i.dataTransfer.items;
                        if (null != a && a.length) {
                            var s = o.pattern || h("ngfPattern", e, {
                                $event: i
                            })
                              , l = a.length;
                            while (l--) {
                                if (!c.validatePattern(a[l], s)) {
                                    r = o.reject;
                                    break
                                }
                                r = o.accept
                            }
                        } else
                            r = o.accept
                    }
                    n(r)
                }
                function S(i, n, r, a) {
                    var s = c.getValidationAttr(o, t, "maxFiles");
                    null == s && (s = Number.MAX_VALUE);
                    var d = c.getValidationAttr(o, t, "maxTotalSize");
                    null == d && (d = Number.MAX_VALUE);
                    var p = h("ngfIncludeDir", t)
                      , m = []
                      , g = 0;
                    function f(t, i) {
                        var n = u.defer();
                        if (null != t)
                            if (t.isDirectory) {
                                var o = [c.emptyPromise()];
                                if (p) {
                                    var r = {
                                        type: "directory"
                                    };
                                    r.name = r.path = (i || "") + t.name,
                                    m.push(r)
                                }
                                var a = t.createReader()
                                  , l = []
                                  , h = function() {
                                    a.readEntries((function(r) {
                                        try {
                                            r.length ? (l = l.concat(Array.prototype.slice.call(r || [], 0)),
                                            h()) : (angular.forEach(l.slice(0), (function(e) {
                                                m.length <= s && g <= d && o.push(f(e, (i || "") + t.name + "/"))
                                            }
                                            )),
                                            u.all(o).then((function() {
                                                n.resolve()
                                            }
                                            ), (function(e) {
                                                n.reject(e)
                                            }
                                            )))
                                        } catch (e) {
                                            n.reject(e)
                                        }
                                    }
                                    ), (function(e) {
                                        n.reject(e)
                                    }
                                    ))
                                };
                                h()
                            } else
                                t.file((function(t) {
                                    try {
                                        t.path = (i || "") + t.name,
                                        p && (t = c.rename(t, t.path)),
                                        m.push(t),
                                        g += t.size,
                                        n.resolve()
                                    } catch (e) {
                                        n.reject(e)
                                    }
                                }
                                ), (function(e) {
                                    n.reject(e)
                                }
                                ));
                        return n.promise
                    }
                    var v = [c.emptyPromise()];
                    if (i && i.length > 0 && "file:" !== l.location.protocol)
                        for (var b = 0; b < i.length; b++) {
                            if (i[b].webkitGetAsEntry && i[b].webkitGetAsEntry() && i[b].webkitGetAsEntry().isDirectory) {
                                var y = i[b].webkitGetAsEntry();
                                if (y.isDirectory && !r)
                                    continue;
                                null != y && v.push(f(y))
                            } else {
                                var w = i[b].getAsFile();
                                null != w && (m.push(w),
                                g += w.size)
                            }
                            if (m.length > s || g > d || !a && m.length > 0)
                                break
                        }
                    else if (null != n)
                        for (var C = 0; C < n.length; C++) {
                            var x = n.item(C);
                            if ((x.type || x.size > 0) && (m.push(x),
                            g += x.size),
                            m.length > s || g > d || !a && m.length > 0)
                                break
                        }
                    var S = u.defer();
                    return u.all(v).then((function() {
                        if (a || p || !m.length)
                            S.resolve(m);
                        else {
                            var e = 0;
                            while (m[e] && "directory" === m[e].type)
                                e++;
                            S.resolve([m[e]])
                        }
                    }
                    ), (function(e) {
                        S.reject(e)
                    }
                    )),
                    S.promise
                }
            }
            function i() {
                var e = document.createElement("div");
                return "draggable"in e && "ondrop"in e && !/Edge\/12./i.test(navigator.userAgent)
            }
            n.directive("ngfDrop", ["$parse", "$timeout", "$window", "Upload", "$http", "$q", function(e, i, n, o, r, a) {
                return {
                    restrict: "AEC",
                    require: "?ngModel",
                    link: function(s, l, c, d) {
                        t(s, l, c, d, e, i, n, o, r, a)
                    }
                }
            }
            ]),
            n.directive("ngfNoFileDrop", (function() {
                return function(e, t) {
                    i() && t.css("display", "none")
                }
            }
            )),
            n.directive("ngfDropAvailable", ["$parse", "$timeout", "Upload", function(e, t, n) {
                return function(o, r, a) {
                    if (i()) {
                        var s = e(n.attrGetter("ngfDropAvailable", a));
                        t((function() {
                            s(o),
                            s.assign && s.assign(o, !0)
                        }
                        ))
                    }
                }
            }
            ])
        }(),
        n.service("UploadExif", ["UploadResize", "$q", function(t, i) {
            var n = t;
            function o(e, t, i, n) {
                switch (t) {
                case 2:
                    return e.transform(-1, 0, 0, 1, i, 0);
                case 3:
                    return e.transform(-1, 0, 0, -1, i, n);
                case 4:
                    return e.transform(1, 0, 0, -1, 0, n);
                case 5:
                    return e.transform(0, 1, 1, 0, 0, 0);
                case 6:
                    return e.transform(0, 1, -1, 0, n, 0);
                case 7:
                    return e.transform(0, -1, -1, 0, n, i);
                case 8:
                    return e.transform(0, -1, 1, 0, 0, i)
                }
            }
            function r(e) {
                for (var t = "", i = new Uint8Array(e), n = i.byteLength, o = 0; o < n; o++)
                    t += String.fromCharCode(i[o]);
                return window.btoa(t)
            }
            return n.isExifSupported = function() {
                return window.FileReader && (new FileReader).readAsArrayBuffer && n.isResizeSupported()
            }
            ,
            n.readOrientation = function(e) {
                var t = i.defer()
                  , n = new FileReader
                  , o = e.slice ? e.slice(0, 65536) : e;
                return n.readAsArrayBuffer(o),
                n.onerror = function(e) {
                    return t.reject(e)
                }
                ,
                n.onload = function(e) {
                    var i = {
                        orientation: 1
                    }
                      , n = new DataView(this.result);
                    if (65496 !== n.getUint16(0, !1))
                        return t.resolve(i);
                    var o = n.byteLength
                      , r = 2;
                    while (r < o) {
                        var a = n.getUint16(r, !1);
                        if (r += 2,
                        65505 === a) {
                            if (1165519206 !== n.getUint32(r += 2, !1))
                                return t.resolve(i);
                            var s = 18761 === n.getUint16(r += 6, !1);
                            r += n.getUint32(r + 4, s);
                            var l = n.getUint16(r, s);
                            r += 2;
                            for (var c = 0; c < l; c++)
                                if (274 === n.getUint16(r + 12 * c, s)) {
                                    var d = n.getUint16(r + 12 * c + 8, s);
                                    return d >= 2 && d <= 8 && (n.setUint16(r + 12 * c + 8, 1, s),
                                    i.fixedArrayBuffer = e.target.result),
                                    i.orientation = d,
                                    t.resolve(i)
                                }
                        } else {
                            if (65280 !== (65280 & a))
                                break;
                            r += n.getUint16(r, !1)
                        }
                    }
                    return t.resolve(i)
                }
                ,
                t.promise
            }
            ,
            n.applyExifRotation = function(t) {
                if (0 !== t.type.indexOf("image/jpeg"))
                    return n.emptyPromise(t);
                var a = i.defer();
                return n.readOrientation(t).then((function(i) {
                    if (i.orientation < 2 || i.orientation > 8)
                        return a.resolve(t);
                    n.dataUrl(t, !0).then((function(s) {
                        var l = document.createElement("canvas")
                          , c = document.createElement("img");
                        c.onload = function() {
                            try {
                                l.width = i.orientation > 4 ? c.height : c.width,
                                l.height = i.orientation > 4 ? c.width : c.height;
                                var s = l.getContext("2d");
                                o(s, i.orientation, c.width, c.height),
                                s.drawImage(c, 0, 0);
                                var d = l.toDataURL(t.type || "image/WebP", .934);
                                d = n.restoreExif(r(i.fixedArrayBuffer), d);
                                var u = n.dataUrltoBlob(d, t.name);
                                a.resolve(u)
                            } catch (e) {
                                return a.reject(e)
                            }
                        }
                        ,
                        c.onerror = function() {
                            a.reject()
                        }
                        ,
                        c.src = s
                    }
                    ), (function(e) {
                        a.reject(e)
                    }
                    ))
                }
                ), (function(e) {
                    a.reject(e)
                }
                )),
                a.promise
            }
            ,
            n.restoreExif = function(e, t) {
                var i = {
                    KEY_STR: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
                    encode64: function(e) {
                        var t, i, n, o, r, a = "", s = "", l = "", c = 0;
                        do {
                            t = e[c++],
                            i = e[c++],
                            s = e[c++],
                            n = t >> 2,
                            o = (3 & t) << 4 | i >> 4,
                            r = (15 & i) << 2 | s >> 6,
                            l = 63 & s,
                            isNaN(i) ? r = l = 64 : isNaN(s) && (l = 64),
                            a = a + this.KEY_STR.charAt(n) + this.KEY_STR.charAt(o) + this.KEY_STR.charAt(r) + this.KEY_STR.charAt(l),
                            t = i = s = "",
                            n = o = r = l = ""
                        } while (c < e.length);
                        return a
                    },
                    restore: function(e, t) {
                        e.match("data:image/jpeg;base64,") && (e = e.replace("data:image/jpeg;base64,", ""));
                        var i = this.decode64(e)
                          , n = this.slice2Segments(i)
                          , o = this.exifManipulation(t, n);
                        return "data:image/jpeg;base64," + this.encode64(o)
                    },
                    exifManipulation: function(e, t) {
                        var i = this.getExifArray(t)
                          , n = this.insertExif(e, i);
                        return new Uint8Array(n)
                    },
                    getExifArray: function(e) {
                        for (var t, i = 0; i < e.length; i++)
                            if (t = e[i],
                            255 === t[0] & 225 === t[1])
                                return t;
                        return []
                    },
                    insertExif: function(e, t) {
                        var i = e.replace("data:image/jpeg;base64,", "")
                          , n = this.decode64(i)
                          , o = n.indexOf(255, 3)
                          , r = n.slice(0, o)
                          , a = n.slice(o)
                          , s = r;
                        return s = s.concat(t),
                        s = s.concat(a),
                        s
                    },
                    slice2Segments: function(e) {
                        var t = 0
                          , i = [];
                        while (1) {
                            if (255 === e[t] & 218 === e[t + 1])
                                break;
                            if (255 === e[t] & 216 === e[t + 1])
                                t += 2;
                            else {
                                var n = 256 * e[t + 2] + e[t + 3]
                                  , o = t + n + 2
                                  , r = e.slice(t, o);
                                i.push(r),
                                t = o
                            }
                            if (t > e.length)
                                break
                        }
                        return i
                    },
                    decode64: function(e) {
                        var t, i, n, o, r, a = "", s = "", l = 0, c = [], d = /[^A-Za-z0-9\+\/\=]/g;
                        d.exec(e) && console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),
                        e = e.replace(/[^A-Za-z0-9\+\/\=]/g, "");
                        do {
                            n = this.KEY_STR.indexOf(e.charAt(l++)),
                            o = this.KEY_STR.indexOf(e.charAt(l++)),
                            r = this.KEY_STR.indexOf(e.charAt(l++)),
                            s = this.KEY_STR.indexOf(e.charAt(l++)),
                            t = n << 2 | o >> 4,
                            i = (15 & o) << 4 | r >> 2,
                            a = (3 & r) << 6 | s,
                            c.push(t),
                            64 !== r && c.push(i),
                            64 !== s && c.push(a),
                            t = i = a = "",
                            n = o = r = s = ""
                        } while (l < e.length);
                        return c
                    }
                };
                return i.restore(e, t)
            }
            ,
            n
        }
        ])
    },
    4118: function(e, t, i) {},
    "413e": function(e, t, i) {
        e.exports = i.p + "img/copy-item.344ebc48.svg?x-request=html"
    },
    "414b": function(e, t, i) {
        var n = {
            "./print-area-customily.png": "d0a0",
            "./print-area-printful.png": "3d4d",
            "./print-area-printify.png": "c14d"
        };
        function o(e) {
            var t = r(e);
            return i(t)
        }
        function r(e) {
            if (!i.o(n, e)) {
                var t = new Error("Cannot find module '" + e + "'");
                throw t.code = "MODULE_NOT_FOUND",
                t
            }
            return n[e]
        }
        o.keys = function() {
            return Object.keys(n)
        }
        ,
        o.resolve = r,
        e.exports = o,
        o.id = "414b"
    },
    "41aa": function(e, t, i) {
        "use strict";
        i("8098")
    },
    "41af": function(t, i, n) {
        (function(t) {
            n("13d5");
            /*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */
            var o = o || {
                version: "3.4.0"
            };
            function r(e) {
                var t = e.targetCanvas
                  , i = t.width
                  , n = t.height
                  , o = e.destinationWidth
                  , r = e.destinationHeight;
                i === o && n === r || (t.width = o,
                t.height = r)
            }
            function a(e, t) {
                var i = e.canvas
                  , n = t.targetCanvas
                  , o = n.getContext("2d");
                o.translate(0, n.height),
                o.scale(1, -1);
                var r = i.height - n.height;
                o.drawImage(i, 0, r, n.width, n.height, 0, 0, n.width, n.height)
            }
            function s(e, t) {
                var i = t.targetCanvas
                  , n = i.getContext("2d")
                  , o = t.destinationWidth
                  , r = t.destinationHeight
                  , a = o * r * 4
                  , s = new Uint8Array(this.imageBuffer,0,a)
                  , l = new Uint8ClampedArray(this.imageBuffer,0,a);
                e.readPixels(0, 0, o, r, e.RGBA, e.UNSIGNED_BYTE, s);
                var c = new ImageData(l,o,r);
                n.putImageData(c, 0, 0)
            }
            i.fabric = o,
            "undefined" !== typeof document && "undefined" !== typeof window && (document instanceof ("undefined" !== typeof HTMLDocument ? HTMLDocument : Document) ? o.document = document : o.document = document.implementation.createHTMLDocument(""),
            o.window = window),
            o.isTouchSupported = "ontouchstart"in o.window || "ontouchstart"in o.document || o.window && o.window.navigator && o.window.navigator.maxTouchPoints > 0,
            o.isLikelyNode = "undefined" !== typeof t && "undefined" === typeof window,
            o.SHARED_ATTRIBUTES = ["display", "transform", "fill", "fill-opacity", "fill-rule", "opacity", "stroke", "stroke-dasharray", "stroke-linecap", "stroke-dashoffset", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "id", "paint-order", "vector-effect", "instantiated_by_use", "clip-path"],
            o.DPI = 96,
            o.reNum = "(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",
            o.fontPaths = {},
            o.iMatrix = [1, 0, 0, 1, 0, 0],
            o.perfLimitSizeTotal = 2097152,
            o.maxCacheSideLimit = 4096,
            o.minCacheSideLimit = 256,
            o.charWidthsCache = {},
            o.textureSize = 2048,
            o.disableStyleCopyPaste = !1,
            o.enableGLFiltering = !0,
            o.devicePixelRatio = o.window.devicePixelRatio || o.window.webkitDevicePixelRatio || o.window.mozDevicePixelRatio || 1,
            o.browserShadowBlurConstant = 1,
            o.arcToSegmentsCache = {},
            o.boundsOfCurveCache = {},
            o.cachesBoundsOfCurve = !0,
            o.forceGLPutImageData = !1,
            o.initFilterBackend = function() {
                return o.enableGLFiltering && o.isWebglSupported && o.isWebglSupported(o.textureSize) ? (console.log("max texture size: " + o.maxTextureSize),
                new o.WebglFilterBackend({
                    tileSize: o.textureSize
                })) : o.Canvas2dFilterBackend ? new o.Canvas2dFilterBackend : void 0
            }
            ,
            "undefined" !== typeof document && "undefined" !== typeof window && (window.fabric = o),
            function() {
                function e(e, t) {
                    if (this.__eventListeners[e]) {
                        var i = this.__eventListeners[e];
                        t ? i[i.indexOf(t)] = !1 : o.util.array.fill(i, !1)
                    }
                }
                function t(e, t) {
                    if (this.__eventListeners || (this.__eventListeners = {}),
                    1 === arguments.length)
                        for (var i in e)
                            this.on(i, e[i]);
                    else
                        this.__eventListeners[e] || (this.__eventListeners[e] = []),
                        this.__eventListeners[e].push(t);
                    return this
                }
                function i(t, i) {
                    if (!this.__eventListeners)
                        return this;
                    if (0 === arguments.length)
                        for (t in this.__eventListeners)
                            e.call(this, t);
                    else if (1 === arguments.length && "object" === typeof arguments[0])
                        for (var n in t)
                            e.call(this, n, t[n]);
                    else
                        e.call(this, t, i);
                    return this
                }
                function n(e, t) {
                    if (!this.__eventListeners)
                        return this;
                    var i = this.__eventListeners[e];
                    if (!i)
                        return this;
                    for (var n = 0, o = i.length; n < o; n++)
                        i[n] && i[n].call(this, t || {});
                    return this.__eventListeners[e] = i.filter((function(e) {
                        return !1 !== e
                    }
                    )),
                    this
                }
                o.Observable = {
                    observe: t,
                    stopObserving: i,
                    fire: n,
                    on: t,
                    off: i,
                    trigger: n
                }
            }(),
            o.Collection = {
                _objects: [],
                add: function() {
                    if (this._objects.push.apply(this._objects, arguments),
                    this._onObjectAdded)
                        for (var e = 0, t = arguments.length; e < t; e++)
                            this._onObjectAdded(arguments[e]);
                    return this.renderOnAddRemove && this.requestRenderAll(),
                    this
                },
                insertAt: function(e, t, i) {
                    var n = this._objects;
                    return i ? n[t] = e : n.splice(t, 0, e),
                    this._onObjectAdded && this._onObjectAdded(e),
                    this.renderOnAddRemove && this.requestRenderAll(),
                    this
                },
                remove: function() {
                    for (var e, t = this._objects, i = !1, n = 0, o = arguments.length; n < o; n++)
                        e = t.indexOf(arguments[n]),
                        -1 !== e && (i = !0,
                        t.splice(e, 1),
                        this._onObjectRemoved && this._onObjectRemoved(arguments[n]));
                    return this.renderOnAddRemove && i && this.requestRenderAll(),
                    this
                },
                forEachObject: function(e, t) {
                    for (var i = this.getObjects(), n = 0, o = i.length; n < o; n++)
                        e.call(t, i[n], n, i);
                    return this
                },
                getObjects: function(e) {
                    return "undefined" === typeof e ? this._objects.concat() : this._objects.filter((function(t) {
                        return t.type === e
                    }
                    ))
                },
                item: function(e) {
                    return this._objects[e]
                },
                isEmpty: function() {
                    return 0 === this._objects.length
                },
                size: function() {
                    return this._objects.length
                },
                contains: function(e) {
                    return this._objects.indexOf(e) > -1
                },
                complexity: function() {
                    return this._objects.reduce((function(e, t) {
                        return e += t.complexity ? t.complexity() : 0,
                        e
                    }
                    ), 0)
                }
            },
            o.CommonMethods = {
                _setOptions: function(e) {
                    for (var t in e)
                        this.set(t, e[t])
                },
                _initGradient: function(e, t) {
                    !e || !e.colorStops || e instanceof o.Gradient || this.set(t, new o.Gradient(e))
                },
                _initPattern: function(e, t, i) {
                    !e || !e.source || e instanceof o.Pattern ? i && i() : this.set(t, new o.Pattern(e,i))
                },
                _initClipping: function(e) {
                    if (e.clipTo && "string" === typeof e.clipTo) {
                        var t = o.util.getFunctionBody(e.clipTo);
                        "undefined" !== typeof t && (this.clipTo = new Function("ctx",t))
                    }
                },
                _setObject: function(e) {
                    for (var t in e)
                        this._set(t, e[t])
                },
                set: function(e, t) {
                    return "object" === typeof e ? this._setObject(e) : "function" === typeof t && "clipTo" !== e ? this._set(e, t(this.get(e))) : this._set(e, t),
                    this
                },
                _set: function(e, t) {
                    this[e] = t
                },
                toggle: function(e) {
                    var t = this.get(e);
                    return "boolean" === typeof t && this.set(e, !t),
                    this
                },
                get: function(e) {
                    return this[e]
                }
            },
            function(e) {
                var t = Math.sqrt
                  , i = Math.atan2
                  , n = Math.pow
                  , r = Math.PI / 180
                  , a = Math.PI / 2;
                o.util = {
                    cos: function(e) {
                        if (0 === e)
                            return 1;
                        e < 0 && (e = -e);
                        var t = e / a;
                        switch (t) {
                        case 1:
                        case 3:
                            return 0;
                        case 2:
                            return -1
                        }
                        return Math.cos(e)
                    },
                    sin: function(e) {
                        if (0 === e)
                            return 0;
                        var t = e / a
                          , i = 1;
                        switch (e < 0 && (i = -1),
                        t) {
                        case 1:
                            return i;
                        case 2:
                            return 0;
                        case 3:
                            return -i
                        }
                        return Math.sin(e)
                    },
                    removeFromArray: function(e, t) {
                        var i = e.indexOf(t);
                        return -1 !== i && e.splice(i, 1),
                        e
                    },
                    getRandomInt: function(e, t) {
                        return Math.floor(Math.random() * (t - e + 1)) + e
                    },
                    degreesToRadians: function(e) {
                        return e * r
                    },
                    radiansToDegrees: function(e) {
                        return e / r
                    },
                    rotatePoint: function(e, t, i) {
                        e.subtractEquals(t);
                        var n = o.util.rotateVector(e, i);
                        return new o.Point(n.x,n.y).addEquals(t)
                    },
                    rotateVector: function(e, t) {
                        var i = o.util.sin(t)
                          , n = o.util.cos(t)
                          , r = e.x * n - e.y * i
                          , a = e.x * i + e.y * n;
                        return {
                            x: r,
                            y: a
                        }
                    },
                    transformPoint: function(e, t, i) {
                        return i ? new o.Point(t[0] * e.x + t[2] * e.y,t[1] * e.x + t[3] * e.y) : new o.Point(t[0] * e.x + t[2] * e.y + t[4],t[1] * e.x + t[3] * e.y + t[5])
                    },
                    makeBoundingBoxFromPoints: function(e, t) {
                        if (t)
                            for (var i = 0; i < e.length; i++)
                                e[i] = o.util.transformPoint(e[i], t);
                        var n = [e[0].x, e[1].x, e[2].x, e[3].x]
                          , r = o.util.array.min(n)
                          , a = o.util.array.max(n)
                          , s = a - r
                          , l = [e[0].y, e[1].y, e[2].y, e[3].y]
                          , c = o.util.array.min(l)
                          , d = o.util.array.max(l)
                          , u = d - c;
                        return {
                            left: r,
                            top: c,
                            width: s,
                            height: u
                        }
                    },
                    invertTransform: function(e) {
                        var t = 1 / (e[0] * e[3] - e[1] * e[2])
                          , i = [t * e[3], -t * e[1], -t * e[2], t * e[0]]
                          , n = o.util.transformPoint({
                            x: e[4],
                            y: e[5]
                        }, i, !0);
                        return i[4] = -n.x,
                        i[5] = -n.y,
                        i
                    },
                    toFixed: function(e, t) {
                        return parseFloat(Number(e).toFixed(t))
                    },
                    parseUnit: function(e, t) {
                        var i = /\D{0,2}$/.exec(e)
                          , n = parseFloat(e);
                        switch (t || (t = o.Text.DEFAULT_SVG_FONT_SIZE),
                        i[0]) {
                        case "mm":
                            return n * o.DPI / 25.4;
                        case "cm":
                            return n * o.DPI / 2.54;
                        case "in":
                            return n * o.DPI;
                        case "pt":
                            return n * o.DPI / 72;
                        case "pc":
                            return n * o.DPI / 72 * 12;
                        case "em":
                            return n * t;
                        default:
                            return n
                        }
                    },
                    falseFunction: function() {
                        return !1
                    },
                    getKlass: function(e, t) {
                        return e = o.util.string.camelize(e.charAt(0).toUpperCase() + e.slice(1)),
                        o.util.resolveNamespace(t)[e]
                    },
                    getSvgAttributes: function(e) {
                        var t = ["instantiated_by_use", "style", "id", "class"];
                        switch (e) {
                        case "linearGradient":
                            t = t.concat(["x1", "y1", "x2", "y2", "gradientUnits", "gradientTransform"]);
                            break;
                        case "radialGradient":
                            t = t.concat(["gradientUnits", "gradientTransform", "cx", "cy", "r", "fx", "fy", "fr"]);
                            break;
                        case "stop":
                            t = t.concat(["offset", "stop-color", "stop-opacity"]);
                            break
                        }
                        return t
                    },
                    resolveNamespace: function(t) {
                        if (!t)
                            return o;
                        var i, n = t.split("."), r = n.length, a = e || o.window;
                        for (i = 0; i < r; ++i)
                            a = a[n[i]];
                        return a
                    },
                    loadImage: function(e, t, i, n) {
                        if (e) {
                            var r = o.util.createImage()
                              , a = function() {
                                t && t.call(i, r),
                                r = r.onload = r.onerror = null
                            };
                            r.onload = a,
                            r.onerror = function() {
                                o.log("Error loading " + r.src),
                                t && t.call(i, null, !0),
                                r = r.onload = r.onerror = null
                            }
                            ,
                            0 !== e.indexOf("data") && n && (r.crossOrigin = n),
                            "data:image/svg" === e.substring(0, 14) && (r.onload = null,
                            o.util.loadImageInDom(r, a)),
                            r.src = e
                        } else
                            t && t.call(i, e)
                    },
                    loadImageInDom: function(e, t) {
                        var i = o.document.createElement("div");
                        i.style.width = i.style.height = "1px",
                        i.style.left = i.style.top = "-100%",
                        i.style.position = "absolute",
                        i.appendChild(e),
                        o.document.querySelector("body").appendChild(i),
                        e.onload = function() {
                            t(),
                            i.parentNode.removeChild(i),
                            i = null
                        }
                    },
                    enlivenObjects: function(e, t, i, n) {
                        e = e || [];
                        var r = []
                          , a = 0
                          , s = e.length;
                        function l() {
                            ++a === s && t && t(r.filter((function(e) {
                                return e
                            }
                            )))
                        }
                        s ? e.forEach((function(e, t) {
                            if (e && e.type) {
                                var a = o.util.getKlass(e.type, i);
                                a.fromObject(e, (function(i, o) {
                                    o || (r[t] = i),
                                    n && n(e, i, o),
                                    l()
                                }
                                ))
                            } else
                                l()
                        }
                        )) : t && t(r)
                    },
                    enlivenPatterns: function(e, t) {
                        function i() {
                            ++r === a && t && t(n)
                        }
                        e = e || [];
                        var n = []
                          , r = 0
                          , a = e.length;
                        a ? e.forEach((function(e, t) {
                            e && e.source ? new o.Pattern(e,(function(e) {
                                n[t] = e,
                                i()
                            }
                            )) : (n[t] = e,
                            i())
                        }
                        )) : t && t(n)
                    },
                    groupSVGElements: function(e, t, i) {
                        var n;
                        return e && 1 === e.length ? e[0] : (t && (t.width && t.height ? t.centerPoint = {
                            x: t.width / 2,
                            y: t.height / 2
                        } : (delete t.width,
                        delete t.height)),
                        n = new o.Group(e,t),
                        "undefined" !== typeof i && (n.sourcePath = i),
                        n)
                    },
                    populateWithProperties: function(e, t, i) {
                        if (i && "[object Array]" === Object.prototype.toString.call(i))
                            for (var n = 0, o = i.length; n < o; n++)
                                i[n]in e && (t[i[n]] = e[i[n]])
                    },
                    drawDashedLine: function(e, n, o, r, a, s) {
                        var l = r - n
                          , c = a - o
                          , d = t(l * l + c * c)
                          , u = i(c, l)
                          , p = s.length
                          , h = 0
                          , m = !0;
                        e.save(),
                        e.translate(n, o),
                        e.moveTo(0, 0),
                        e.rotate(u),
                        n = 0;
                        while (d > n)
                            n += s[h++ % p],
                            n > d && (n = d),
                            e[m ? "lineTo" : "moveTo"](n, 0),
                            m = !m;
                        e.restore()
                    },
                    createCanvasElement: function() {
                        return o.document.createElement("canvas")
                    },
                    copyCanvasElement: function(e) {
                        var t = o.util.createCanvasElement();
                        return t.width = e.width,
                        t.height = e.height,
                        t.getContext("2d").drawImage(e, 0, 0),
                        t
                    },
                    toDataURL: function(e, t, i) {
                        return e.toDataURL("image/" + t, i)
                    },
                    createImage: function() {
                        return o.document.createElement("img")
                    },
                    clipContext: function(e, t) {
                        t.save(),
                        t.beginPath(),
                        e.clipTo(t),
                        t.clip()
                    },
                    multiplyTransformMatrices: function(e, t, i) {
                        return [e[0] * t[0] + e[2] * t[1], e[1] * t[0] + e[3] * t[1], e[0] * t[2] + e[2] * t[3], e[1] * t[2] + e[3] * t[3], i ? 0 : e[0] * t[4] + e[2] * t[5] + e[4], i ? 0 : e[1] * t[4] + e[3] * t[5] + e[5]]
                    },
                    qrDecompose: function(e) {
                        var o = i(e[1], e[0])
                          , a = n(e[0], 2) + n(e[1], 2)
                          , s = t(a)
                          , l = (e[0] * e[3] - e[2] * e[1]) / s
                          , c = i(e[0] * e[2] + e[1] * e[3], a);
                        return {
                            angle: o / r,
                            scaleX: s,
                            scaleY: l,
                            skewX: c / r,
                            skewY: 0,
                            translateX: e[4],
                            translateY: e[5]
                        }
                    },
                    calcRotateMatrix: function(e) {
                        if (!e.angle)
                            return o.iMatrix.concat();
                        var t = o.util.degreesToRadians(e.angle)
                          , i = o.util.cos(t)
                          , n = o.util.sin(t);
                        return [i, n, -n, i, 0, 0]
                    },
                    calcDimensionsMatrix: function(e) {
                        var t = "undefined" === typeof e.scaleX ? 1 : e.scaleX
                          , i = "undefined" === typeof e.scaleY ? 1 : e.scaleY
                          , n = [e.flipX ? -t : t, 0, 0, e.flipY ? -i : i, 0, 0]
                          , r = o.util.multiplyTransformMatrices
                          , a = o.util.degreesToRadians;
                        return e.skewX && (n = r(n, [1, 0, Math.tan(a(e.skewX)), 1], !0)),
                        e.skewY && (n = r(n, [1, Math.tan(a(e.skewY)), 0, 1], !0)),
                        n
                    },
                    composeMatrix: function(e) {
                        var t = [1, 0, 0, 1, e.translateX || 0, e.translateY || 0]
                          , i = o.util.multiplyTransformMatrices;
                        return e.angle && (t = i(t, o.util.calcRotateMatrix(e))),
                        (e.scaleX || e.scaleY || e.skewX || e.skewY || e.flipX || e.flipY) && (t = i(t, o.util.calcDimensionsMatrix(e))),
                        t
                    },
                    customTransformMatrix: function(e, t, i) {
                        return o.util.composeMatrix({
                            scaleX: e,
                            scaleY: t,
                            skewX: i
                        })
                    },
                    resetObjectTransform: function(e) {
                        e.scaleX = 1,
                        e.scaleY = 1,
                        e.skewX = 0,
                        e.skewY = 0,
                        e.flipX = !1,
                        e.flipY = !1,
                        e.rotate(0)
                    },
                    saveObjectTransform: function(e) {
                        return {
                            scaleX: e.scaleX,
                            scaleY: e.scaleY,
                            skewX: e.skewX,
                            skewY: e.skewY,
                            angle: e.angle,
                            left: e.left,
                            flipX: e.flipX,
                            flipY: e.flipY,
                            top: e.top
                        }
                    },
                    getFunctionBody: function(e) {
                        return (String(e).match(/function[^{]*\{([\s\S]*)\}/) || {})[1]
                    },
                    isTransparent: function(e, t, i, n) {
                        n > 0 && (t > n ? t -= n : t = 0,
                        i > n ? i -= n : i = 0);
                        var o, r, a = !0, s = e.getImageData(t, i, 2 * n || 1, 2 * n || 1), l = s.data.length;
                        for (o = 3; o < l; o += 4)
                            if (r = s.data[o],
                            a = r <= 0,
                            !1 === a)
                                break;
                        return s = null,
                        a
                    },
                    parsePreserveAspectRatioAttribute: function(e) {
                        var t, i = "meet", n = "Mid", o = "Mid", r = e.split(" ");
                        return r && r.length && (i = r.pop(),
                        "meet" !== i && "slice" !== i ? (t = i,
                        i = "meet") : r.length && (t = r.pop())),
                        n = "none" !== t ? t.slice(1, 4) : "none",
                        o = "none" !== t ? t.slice(5, 8) : "none",
                        {
                            meetOrSlice: i,
                            alignX: n,
                            alignY: o
                        }
                    },
                    clearFabricFontCache: function(e) {
                        e = (e || "").toLowerCase(),
                        e ? o.charWidthsCache[e] && delete o.charWidthsCache[e] : o.charWidthsCache = {}
                    },
                    limitDimsByArea: function(e, t) {
                        var i = Math.sqrt(t * e)
                          , n = Math.floor(t / i);
                        return {
                            x: Math.floor(i),
                            y: n
                        }
                    },
                    capValue: function(e, t, i) {
                        return Math.max(e, Math.min(t, i))
                    },
                    findScaleToFit: function(e, t) {
                        return Math.min(t.width / e.width, t.height / e.height)
                    },
                    findScaleToCover: function(e, t) {
                        return Math.max(t.width / e.width, t.height / e.height)
                    },
                    matrixToSVG: function(e) {
                        return "matrix(" + e.map((function(e) {
                            return o.util.toFixed(e, o.Object.NUM_FRACTION_DIGITS)
                        }
                        )).join(" ") + ")"
                    }
                }
            }(i),
            function() {
                var e = Array.prototype.join;
                function t(t, r, a, s, l, c, d) {
                    var u = e.call(arguments);
                    if (o.arcToSegmentsCache[u])
                        return o.arcToSegmentsCache[u];
                    var p = Math.PI
                      , h = d * p / 180
                      , m = o.util.sin(h)
                      , g = o.util.cos(h)
                      , f = 0
                      , v = 0;
                    a = Math.abs(a),
                    s = Math.abs(s);
                    var b = -g * t * .5 - m * r * .5
                      , y = -g * r * .5 + m * t * .5
                      , w = a * a
                      , C = s * s
                      , x = y * y
                      , S = b * b
                      , P = w * C - w * x - C * S
                      , k = 0;
                    if (P < 0) {
                        var _ = Math.sqrt(1 - P / (w * C));
                        a *= _,
                        s *= _
                    } else
                        k = (l === c ? -1 : 1) * Math.sqrt(P / (w * x + C * S));
                    var A = k * a * y / s
                      , T = -k * s * b / a
                      , E = g * A - m * T + .5 * t
                      , O = m * A + g * T + .5 * r
                      , I = n(1, 0, (b - A) / a, (y - T) / s)
                      , D = n((b - A) / a, (y - T) / s, (-b - A) / a, (-y - T) / s);
                    0 === c && D > 0 ? D -= 2 * p : 1 === c && D < 0 && (D += 2 * p);
                    for (var F = Math.ceil(Math.abs(D / p * 2)), M = [], $ = D / F, B = 8 / 3 * Math.sin($ / 4) * Math.sin($ / 4) / Math.sin($ / 2), j = I + $, L = 0; L < F; L++)
                        M[L] = i(I, j, g, m, a, s, E, O, B, f, v),
                        f = M[L][4],
                        v = M[L][5],
                        I = j,
                        j += $;
                    return o.arcToSegmentsCache[u] = M,
                    M
                }
                function i(e, t, i, n, r, a, s, l, c, d, u) {
                    var p = o.util.cos(e)
                      , h = o.util.sin(e)
                      , m = o.util.cos(t)
                      , g = o.util.sin(t)
                      , f = i * r * m - n * a * g + s
                      , v = n * r * m + i * a * g + l
                      , b = d + c * (-i * r * h - n * a * p)
                      , y = u + c * (-n * r * h + i * a * p)
                      , w = f + c * (i * r * g + n * a * m)
                      , C = v + c * (n * r * g - i * a * m);
                    return [b, y, w, C, f, v]
                }
                function n(e, t, i, n) {
                    var o = Math.atan2(t, e)
                      , r = Math.atan2(n, i);
                    return r >= o ? r - o : 2 * Math.PI - (o - r)
                }
                function r(t, i, n, r, a, s, l, c) {
                    var d;
                    if (o.cachesBoundsOfCurve && (d = e.call(arguments),
                    o.boundsOfCurveCache[d]))
                        return o.boundsOfCurveCache[d];
                    var u, p, h, m, g, f, v, b, y = Math.sqrt, w = Math.min, C = Math.max, x = Math.abs, S = [], P = [[], []];
                    p = 6 * t - 12 * n + 6 * a,
                    u = -3 * t + 9 * n - 9 * a + 3 * l,
                    h = 3 * n - 3 * t;
                    for (var k = 0; k < 2; ++k)
                        if (k > 0 && (p = 6 * i - 12 * r + 6 * s,
                        u = -3 * i + 9 * r - 9 * s + 3 * c,
                        h = 3 * r - 3 * i),
                        x(u) < 1e-12) {
                            if (x(p) < 1e-12)
                                continue;
                            m = -h / p,
                            0 < m && m < 1 && S.push(m)
                        } else
                            v = p * p - 4 * h * u,
                            v < 0 || (b = y(v),
                            g = (-p + b) / (2 * u),
                            0 < g && g < 1 && S.push(g),
                            f = (-p - b) / (2 * u),
                            0 < f && f < 1 && S.push(f));
                    var _, A, T, E = S.length, O = E;
                    while (E--)
                        m = S[E],
                        T = 1 - m,
                        _ = T * T * T * t + 3 * T * T * m * n + 3 * T * m * m * a + m * m * m * l,
                        P[0][E] = _,
                        A = T * T * T * i + 3 * T * T * m * r + 3 * T * m * m * s + m * m * m * c,
                        P[1][E] = A;
                    P[0][O] = t,
                    P[1][O] = i,
                    P[0][O + 1] = l,
                    P[1][O + 1] = c;
                    var I = [{
                        x: w.apply(null, P[0]),
                        y: w.apply(null, P[1])
                    }, {
                        x: C.apply(null, P[0]),
                        y: C.apply(null, P[1])
                    }];
                    return o.cachesBoundsOfCurve && (o.boundsOfCurveCache[d] = I),
                    I
                }
                o.util.drawArc = function(e, i, n, o) {
                    for (var r = o[0], a = o[1], s = o[2], l = o[3], c = o[4], d = o[5], u = o[6], p = [[], [], [], []], h = t(d - i, u - n, r, a, l, c, s), m = 0, g = h.length; m < g; m++)
                        p[m][0] = h[m][0] + i,
                        p[m][1] = h[m][1] + n,
                        p[m][2] = h[m][2] + i,
                        p[m][3] = h[m][3] + n,
                        p[m][4] = h[m][4] + i,
                        p[m][5] = h[m][5] + n,
                        e.bezierCurveTo.apply(e, p[m])
                }
                ,
                o.util.getBoundsOfArc = function(e, i, n, o, a, s, l, c, d) {
                    for (var u, p = 0, h = 0, m = [], g = t(c - e, d - i, n, o, s, l, a), f = 0, v = g.length; f < v; f++)
                        u = r(p, h, g[f][0], g[f][1], g[f][2], g[f][3], g[f][4], g[f][5]),
                        m.push({
                            x: u[0].x + e,
                            y: u[0].y + i
                        }),
                        m.push({
                            x: u[1].x + e,
                            y: u[1].y + i
                        }),
                        p = g[f][4],
                        h = g[f][5];
                    return m
                }
                ,
                o.util.getBoundsOfCurve = r
            }(),
            function() {
                var e = Array.prototype.slice;
                function t(t, i) {
                    for (var n = e.call(arguments, 2), o = [], r = 0, a = t.length; r < a; r++)
                        o[r] = n.length ? t[r][i].apply(t[r], n) : t[r][i].call(t[r]);
                    return o
                }
                function i(e, t) {
                    return a(e, t, (function(e, t) {
                        return e >= t
                    }
                    ))
                }
                function n(e, t) {
                    return a(e, t, (function(e, t) {
                        return e < t
                    }
                    ))
                }
                function r(e, t) {
                    var i = e.length;
                    while (i--)
                        e[i] = t;
                    return e
                }
                function a(e, t, i) {
                    if (e && 0 !== e.length) {
                        var n = e.length - 1
                          , o = t ? e[n][t] : e[n];
                        if (t)
                            while (n--)
                                i(e[n][t], o) && (o = e[n][t]);
                        else
                            while (n--)
                                i(e[n], o) && (o = e[n]);
                        return o
                    }
                }
                o.util.array = {
                    fill: r,
                    invoke: t,
                    min: n,
                    max: i
                }
            }(),
            function() {
                function e(t, i, n) {
                    if (n)
                        if (!o.isLikelyNode && i instanceof Element)
                            t = i;
                        else if (i instanceof Array) {
                            t = [];
                            for (var r = 0, a = i.length; r < a; r++)
                                t[r] = e({}, i[r], n)
                        } else if (i && "object" === typeof i)
                            for (var s in i)
                                "canvas" === s ? t[s] = e({}, i[s]) : i.hasOwnProperty(s) && (t[s] = e({}, i[s], n));
                        else
                            t = i;
                    else
                        for (var s in i)
                            t[s] = i[s];
                    return t
                }
                function t(t, i) {
                    return e({}, t, i)
                }
                o.util.object = {
                    extend: e,
                    clone: t
                },
                o.util.object.extend(o.util, o.Observable)
            }(),
            function() {
                function e(e) {
                    return e.replace(/-+(.)?/g, (function(e, t) {
                        return t ? t.toUpperCase() : ""
                    }
                    ))
                }
                function t(e, t) {
                    return e.charAt(0).toUpperCase() + (t ? e.slice(1) : e.slice(1).toLowerCase())
                }
                function i(e) {
                    return e.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&apos;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
                }
                function n(e) {
                    var t, i = 0, n = [];
                    for (i = 0,
                    t; i < e.length; i++)
                        !1 !== (t = r(e, i)) && n.push(t);
                    return n
                }
                function r(e, t) {
                    var i = e.charCodeAt(t);
                    if (isNaN(i))
                        return "";
                    if (i < 55296 || i > 57343)
                        return e.charAt(t);
                    if (55296 <= i && i <= 56319) {
                        if (e.length <= t + 1)
                            throw "High surrogate without following low surrogate";
                        var n = e.charCodeAt(t + 1);
                        if (56320 > n || n > 57343)
                            throw "High surrogate without following low surrogate";
                        return e.charAt(t) + e.charAt(t + 1)
                    }
                    if (0 === t)
                        throw "Low surrogate without preceding high surrogate";
                    var o = e.charCodeAt(t - 1);
                    if (55296 > o || o > 56319)
                        throw "Low surrogate without preceding high surrogate";
                    return !1
                }
                o.util.string = {
                    camelize: e,
                    capitalize: t,
                    escapeXml: i,
                    graphemeSplit: n
                }
            }(),
            function() {
                var e = Array.prototype.slice
                  , t = function() {}
                  , i = function() {
                    for (var e in {
                        toString: 1
                    })
                        if ("toString" === e)
                            return !1;
                    return !0
                }()
                  , n = function(e, t, n) {
                    for (var o in t)
                        o in e.prototype && "function" === typeof e.prototype[o] && (t[o] + "").indexOf("callSuper") > -1 ? e.prototype[o] = function(e) {
                            return function() {
                                var i = this.constructor.superclass;
                                this.constructor.superclass = n;
                                var o = t[e].apply(this, arguments);
                                if (this.constructor.superclass = i,
                                "initialize" !== e)
                                    return o
                            }
                        }(o) : e.prototype[o] = t[o],
                        i && (t.toString !== Object.prototype.toString && (e.prototype.toString = t.toString),
                        t.valueOf !== Object.prototype.valueOf && (e.prototype.valueOf = t.valueOf))
                };
                function r() {}
                function a(t) {
                    var i = null
                      , n = this;
                    while (n.constructor.superclass) {
                        var o = n.constructor.superclass.prototype[t];
                        if (n[t] !== o) {
                            i = o;
                            break
                        }
                        n = n.constructor.superclass.prototype
                    }
                    return i ? arguments.length > 1 ? i.apply(this, e.call(arguments, 1)) : i.call(this) : console.log("tried to callSuper " + t + ", method not found in prototype chain", this)
                }
                function s() {
                    var i = null
                      , o = e.call(arguments, 0);
                    function s() {
                        this.initialize.apply(this, arguments)
                    }
                    "function" === typeof o[0] && (i = o.shift()),
                    s.superclass = i,
                    s.subclasses = [],
                    i && (r.prototype = i.prototype,
                    s.prototype = new r,
                    i.subclasses.push(s));
                    for (var l = 0, c = o.length; l < c; l++)
                        n(s, o[l], i);
                    return s.prototype.initialize || (s.prototype.initialize = t),
                    s.prototype.constructor = s,
                    s.prototype.callSuper = a,
                    s
                }
                o.util.createClass = s
            }(),
            function() {
                var e = !!o.document.createElement("div").attachEvent;
                function t(e) {
                    var t = e.changedTouches;
                    return t && t[0] ? t[0] : e
                }
                o.util.addListener = function(t, i, n, o) {
                    t && t.addEventListener(i, n, !e && o)
                }
                ,
                o.util.removeListener = function(t, i, n, o) {
                    t && t.removeEventListener(i, n, !e && o)
                }
                ,
                o.util.getPointer = function(e) {
                    var i = e.target
                      , n = o.util.getScrollLeftTop(i)
                      , r = t(e);
                    return {
                        x: r.clientX + n.left,
                        y: r.clientY + n.top
                    }
                }
            }(),
            function() {
                function e(e, t) {
                    var i = e.style;
                    if (!i)
                        return e;
                    if ("string" === typeof t)
                        return e.style.cssText += ";" + t,
                        t.indexOf("opacity") > -1 ? a(e, t.match(/opacity:\s*(\d?\.?\d*)/)[1]) : e;
                    for (var n in t)
                        if ("opacity" === n)
                            a(e, t[n]);
                        else {
                            var o = "float" === n || "cssFloat" === n ? "undefined" === typeof i.styleFloat ? "cssFloat" : "styleFloat" : n;
                            i[o] = t[n]
                        }
                    return e
                }
                var t = o.document.createElement("div")
                  , i = "string" === typeof t.style.opacity
                  , n = "string" === typeof t.style.filter
                  , r = /alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/
                  , a = function(e) {
                    return e
                };
                i ? a = function(e, t) {
                    return e.style.opacity = t,
                    e
                }
                : n && (a = function(e, t) {
                    var i = e.style;
                    return e.currentStyle && !e.currentStyle.hasLayout && (i.zoom = 1),
                    r.test(i.filter) ? (t = t >= .9999 ? "" : "alpha(opacity=" + 100 * t + ")",
                    i.filter = i.filter.replace(r, t)) : i.filter += " alpha(opacity=" + 100 * t + ")",
                    e
                }
                ),
                o.util.setStyle = e
            }(),
            function() {
                var e = Array.prototype.slice;
                function t(e) {
                    return "string" === typeof e ? o.document.getElementById(e) : e
                }
                var i, n, r = function(t) {
                    return e.call(t, 0)
                };
                try {
                    i = r(o.document.childNodes)instanceof Array
                } catch (h) {}
                function a(e, t) {
                    var i = o.document.createElement(e);
                    for (var n in t)
                        "class" === n ? i.className = t[n] : "for" === n ? i.htmlFor = t[n] : i.setAttribute(n, t[n]);
                    return i
                }
                function s(e, t) {
                    e && -1 === (" " + e.className + " ").indexOf(" " + t + " ") && (e.className += (e.className ? " " : "") + t)
                }
                function l(e, t, i) {
                    return "string" === typeof t && (t = a(t, i)),
                    e.parentNode && e.parentNode.replaceChild(t, e),
                    t.appendChild(e),
                    t
                }
                function c(e) {
                    var t = 0
                      , i = 0
                      , n = o.document.documentElement
                      , r = o.document.body || {
                        scrollLeft: 0,
                        scrollTop: 0
                    };
                    while (e && (e.parentNode || e.host))
                        if (e = e.parentNode || e.host,
                        e === o.document ? (t = r.scrollLeft || n.scrollLeft || 0,
                        i = r.scrollTop || n.scrollTop || 0) : (t += e.scrollLeft || 0,
                        i += e.scrollTop || 0),
                        1 === e.nodeType && "fixed" === e.style.position)
                            break;
                    return {
                        left: t,
                        top: i
                    }
                }
                function d(e) {
                    var t, i, o = e && e.ownerDocument, r = {
                        left: 0,
                        top: 0
                    }, a = {
                        left: 0,
                        top: 0
                    }, s = {
                        borderLeftWidth: "left",
                        borderTopWidth: "top",
                        paddingLeft: "left",
                        paddingTop: "top"
                    };
                    if (!o)
                        return a;
                    for (var l in s)
                        a[s[l]] += parseInt(n(e, l), 10) || 0;
                    return t = o.documentElement,
                    "undefined" !== typeof e.getBoundingClientRect && (r = e.getBoundingClientRect()),
                    i = c(e),
                    {
                        left: r.left + i.left - (t.clientLeft || 0) + a.left,
                        top: r.top + i.top - (t.clientTop || 0) + a.top
                    }
                }
                function u(e) {
                    var t = o.jsdomImplForWrapper(e);
                    return t._canvas || t._image
                }
                function p(e) {
                    if (o.isLikelyNode) {
                        var t = o.jsdomImplForWrapper(e);
                        t && (t._image = null,
                        t._canvas = null,
                        t._currentSrc = null,
                        t._attributes = null,
                        t._classList = null)
                    }
                }
                i || (r = function(e) {
                    var t = new Array(e.length)
                      , i = e.length;
                    while (i--)
                        t[i] = e[i];
                    return t
                }
                ),
                n = o.document.defaultView && o.document.defaultView.getComputedStyle ? function(e, t) {
                    var i = o.document.defaultView.getComputedStyle(e, null);
                    return i ? i[t] : void 0
                }
                : function(e, t) {
                    var i = e.style[t];
                    return !i && e.currentStyle && (i = e.currentStyle[t]),
                    i
                }
                ,
                function() {
                    var e = o.document.documentElement.style
                      , t = "userSelect"in e ? "userSelect" : "MozUserSelect"in e ? "MozUserSelect" : "WebkitUserSelect"in e ? "WebkitUserSelect" : "KhtmlUserSelect"in e ? "KhtmlUserSelect" : "";
                    function i(e) {
                        return "undefined" !== typeof e.onselectstart && (e.onselectstart = o.util.falseFunction),
                        t ? e.style[t] = "none" : "string" === typeof e.unselectable && (e.unselectable = "on"),
                        e
                    }
                    function n(e) {
                        return "undefined" !== typeof e.onselectstart && (e.onselectstart = null),
                        t ? e.style[t] = "" : "string" === typeof e.unselectable && (e.unselectable = ""),
                        e
                    }
                    o.util.makeElementUnselectable = i,
                    o.util.makeElementSelectable = n
                }(),
                function() {
                    function e(e, t) {
                        var i = o.document.getElementsByTagName("head")[0]
                          , n = o.document.createElement("script")
                          , r = !0;
                        n.onload = n.onreadystatechange = function(e) {
                            if (r) {
                                if ("string" === typeof this.readyState && "loaded" !== this.readyState && "complete" !== this.readyState)
                                    return;
                                r = !1,
                                t(e || o.window.event),
                                n = n.onload = n.onreadystatechange = null
                            }
                        }
                        ,
                        n.src = e,
                        i.appendChild(n)
                    }
                    o.util.getScript = e
                }(),
                o.util.getById = t,
                o.util.toArray = r,
                o.util.makeElement = a,
                o.util.addClass = s,
                o.util.wrapElement = l,
                o.util.getScrollLeftTop = c,
                o.util.getElementOffset = d,
                o.util.getElementStyle = n,
                o.util.getNodeCanvas = u,
                o.util.cleanUpJsdomNode = p
            }(),
            function() {
                function e(e, t) {
                    return e + (/\?/.test(e) ? "&" : "?") + t
                }
                function t() {}
                function i(i, n) {
                    n || (n = {});
                    var r = n.method ? n.method.toUpperCase() : "GET"
                      , a = n.onComplete || function() {}
                      , s = new o.window.XMLHttpRequest
                      , l = n.body || n.parameters;
                    return s.onreadystatechange = function() {
                        4 === s.readyState && (a(s),
                        s.onreadystatechange = t)
                    }
                    ,
                    "GET" === r && (l = null,
                    "string" === typeof n.parameters && (i = e(i, n.parameters))),
                    s.open(r, i, !0),
                    "POST" !== r && "PUT" !== r || s.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"),
                    s.send(l),
                    s
                }
                o.util.request = i
            }(),
            o.log = function() {}
            ,
            o.warn = function() {}
            ,
            "undefined" !== typeof console && ["log", "warn"].forEach((function(e) {
                "undefined" !== typeof console[e] && "function" === typeof console[e].apply && (o[e] = function() {
                    return console[e].apply(console, arguments)
                }
                )
            }
            )),
            function() {
                function e() {
                    return !1
                }
                function t(e, t, i, n) {
                    return -i * Math.cos(e / n * (Math.PI / 2)) + i + t
                }
                function i(i) {
                    a((function(n) {
                        i || (i = {});
                        var o, r = n || +new Date, s = i.duration || 500, l = r + s, c = i.onChange || e, d = i.abort || e, u = i.onComplete || e, p = i.easing || t, h = "startValue"in i ? i.startValue : 0, m = "endValue"in i ? i.endValue : 100, g = i.byValue || m - h;
                        i.onStart && i.onStart(),
                        function e(t) {
                            o = t || +new Date;
                            var i = o > l ? s : o - r
                              , n = i / s
                              , f = p(i, h, g, s)
                              , v = Math.abs((f - h) / g);
                            if (!d())
                                return o > l ? (c(m, 1, 1),
                                void u(m, 1, 1)) : (c(f, v, n),
                                void a(e));
                            u(m, 1, 1)
                        }(r)
                    }
                    ))
                }
                var n = o.window.requestAnimationFrame || o.window.webkitRequestAnimationFrame || o.window.mozRequestAnimationFrame || o.window.oRequestAnimationFrame || o.window.msRequestAnimationFrame || function(e) {
                    return o.window.setTimeout(e, 1e3 / 60)
                }
                  , r = o.window.cancelAnimationFrame || o.window.clearTimeout;
                function a() {
                    return n.apply(o.window, arguments)
                }
                function s() {
                    return r.apply(o.window, arguments)
                }
                o.util.animate = i,
                o.util.requestAnimFrame = a,
                o.util.cancelAnimFrame = s
            }(),
            function() {
                function e(e, t, i) {
                    var n = "rgba(" + parseInt(e[0] + i * (t[0] - e[0]), 10) + "," + parseInt(e[1] + i * (t[1] - e[1]), 10) + "," + parseInt(e[2] + i * (t[2] - e[2]), 10);
                    return n += "," + (e && t ? parseFloat(e[3] + i * (t[3] - e[3])) : 1),
                    n += ")",
                    n
                }
                function t(t, i, n, r) {
                    var a = new o.Color(t).getSource()
                      , s = new o.Color(i).getSource();
                    r = r || {},
                    o.util.animate(o.util.object.extend(r, {
                        duration: n || 500,
                        startValue: a,
                        endValue: s,
                        byValue: s,
                        easing: function(t, i, n, o) {
                            var a = r.colorEasing ? r.colorEasing(t, o) : 1 - Math.cos(t / o * (Math.PI / 2));
                            return e(i, n, a)
                        }
                    }))
                }
                o.util.animateColor = t
            }(),
            function() {
                function e(e, t, i, n) {
                    return e < Math.abs(t) ? (e = t,
                    n = i / 4) : n = 0 === t && 0 === e ? i / (2 * Math.PI) * Math.asin(1) : i / (2 * Math.PI) * Math.asin(t / e),
                    {
                        a: e,
                        c: t,
                        p: i,
                        s: n
                    }
                }
                function t(e, t, i) {
                    return e.a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * i - e.s) * (2 * Math.PI) / e.p)
                }
                function i(e, t, i, n) {
                    return i * ((e = e / n - 1) * e * e + 1) + t
                }
                function n(e, t, i, n) {
                    return e /= n / 2,
                    e < 1 ? i / 2 * e * e * e + t : i / 2 * ((e -= 2) * e * e + 2) + t
                }
                function r(e, t, i, n) {
                    return i * (e /= n) * e * e * e + t
                }
                function a(e, t, i, n) {
                    return -i * ((e = e / n - 1) * e * e * e - 1) + t
                }
                function s(e, t, i, n) {
                    return e /= n / 2,
                    e < 1 ? i / 2 * e * e * e * e + t : -i / 2 * ((e -= 2) * e * e * e - 2) + t
                }
                function l(e, t, i, n) {
                    return i * (e /= n) * e * e * e * e + t
                }
                function c(e, t, i, n) {
                    return i * ((e = e / n - 1) * e * e * e * e + 1) + t
                }
                function d(e, t, i, n) {
                    return e /= n / 2,
                    e < 1 ? i / 2 * e * e * e * e * e + t : i / 2 * ((e -= 2) * e * e * e * e + 2) + t
                }
                function u(e, t, i, n) {
                    return -i * Math.cos(e / n * (Math.PI / 2)) + i + t
                }
                function p(e, t, i, n) {
                    return i * Math.sin(e / n * (Math.PI / 2)) + t
                }
                function h(e, t, i, n) {
                    return -i / 2 * (Math.cos(Math.PI * e / n) - 1) + t
                }
                function m(e, t, i, n) {
                    return 0 === e ? t : i * Math.pow(2, 10 * (e / n - 1)) + t
                }
                function g(e, t, i, n) {
                    return e === n ? t + i : i * (1 - Math.pow(2, -10 * e / n)) + t
                }
                function f(e, t, i, n) {
                    return 0 === e ? t : e === n ? t + i : (e /= n / 2,
                    e < 1 ? i / 2 * Math.pow(2, 10 * (e - 1)) + t : i / 2 * (2 - Math.pow(2, -10 * --e)) + t)
                }
                function v(e, t, i, n) {
                    return -i * (Math.sqrt(1 - (e /= n) * e) - 1) + t
                }
                function b(e, t, i, n) {
                    return i * Math.sqrt(1 - (e = e / n - 1) * e) + t
                }
                function y(e, t, i, n) {
                    return e /= n / 2,
                    e < 1 ? -i / 2 * (Math.sqrt(1 - e * e) - 1) + t : i / 2 * (Math.sqrt(1 - (e -= 2) * e) + 1) + t
                }
                function w(i, n, o, r) {
                    var a = 1.70158
                      , s = 0
                      , l = o;
                    if (0 === i)
                        return n;
                    if (i /= r,
                    1 === i)
                        return n + o;
                    s || (s = .3 * r);
                    var c = e(l, o, s, a);
                    return -t(c, i, r) + n
                }
                function C(t, i, n, o) {
                    var r = 1.70158
                      , a = 0
                      , s = n;
                    if (0 === t)
                        return i;
                    if (t /= o,
                    1 === t)
                        return i + n;
                    a || (a = .3 * o);
                    var l = e(s, n, a, r);
                    return l.a * Math.pow(2, -10 * t) * Math.sin((t * o - l.s) * (2 * Math.PI) / l.p) + l.c + i
                }
                function x(i, n, o, r) {
                    var a = 1.70158
                      , s = 0
                      , l = o;
                    if (0 === i)
                        return n;
                    if (i /= r / 2,
                    2 === i)
                        return n + o;
                    s || (s = r * (.3 * 1.5));
                    var c = e(l, o, s, a);
                    return i < 1 ? -.5 * t(c, i, r) + n : c.a * Math.pow(2, -10 * (i -= 1)) * Math.sin((i * r - c.s) * (2 * Math.PI) / c.p) * .5 + c.c + n
                }
                function S(e, t, i, n, o) {
                    return void 0 === o && (o = 1.70158),
                    i * (e /= n) * e * ((o + 1) * e - o) + t
                }
                function P(e, t, i, n, o) {
                    return void 0 === o && (o = 1.70158),
                    i * ((e = e / n - 1) * e * ((o + 1) * e + o) + 1) + t
                }
                function k(e, t, i, n, o) {
                    return void 0 === o && (o = 1.70158),
                    e /= n / 2,
                    e < 1 ? i / 2 * (e * e * ((1 + (o *= 1.525)) * e - o)) + t : i / 2 * ((e -= 2) * e * ((1 + (o *= 1.525)) * e + o) + 2) + t
                }
                function _(e, t, i, n) {
                    return i - A(n - e, 0, i, n) + t
                }
                function A(e, t, i, n) {
                    return (e /= n) < 1 / 2.75 ? i * (7.5625 * e * e) + t : e < 2 / 2.75 ? i * (7.5625 * (e -= 1.5 / 2.75) * e + .75) + t : e < 2.5 / 2.75 ? i * (7.5625 * (e -= 2.25 / 2.75) * e + .9375) + t : i * (7.5625 * (e -= 2.625 / 2.75) * e + .984375) + t
                }
                function T(e, t, i, n) {
                    return e < n / 2 ? .5 * _(2 * e, 0, i, n) + t : .5 * A(2 * e - n, 0, i, n) + .5 * i + t
                }
                o.util.ease = {
                    easeInQuad: function(e, t, i, n) {
                        return i * (e /= n) * e + t
                    },
                    easeOutQuad: function(e, t, i, n) {
                        return -i * (e /= n) * (e - 2) + t
                    },
                    easeInOutQuad: function(e, t, i, n) {
                        return e /= n / 2,
                        e < 1 ? i / 2 * e * e + t : -i / 2 * (--e * (e - 2) - 1) + t
                    },
                    easeInCubic: function(e, t, i, n) {
                        return i * (e /= n) * e * e + t
                    },
                    easeOutCubic: i,
                    easeInOutCubic: n,
                    easeInQuart: r,
                    easeOutQuart: a,
                    easeInOutQuart: s,
                    easeInQuint: l,
                    easeOutQuint: c,
                    easeInOutQuint: d,
                    easeInSine: u,
                    easeOutSine: p,
                    easeInOutSine: h,
                    easeInExpo: m,
                    easeOutExpo: g,
                    easeInOutExpo: f,
                    easeInCirc: v,
                    easeOutCirc: b,
                    easeInOutCirc: y,
                    easeInElastic: w,
                    easeOutElastic: C,
                    easeInOutElastic: x,
                    easeInBack: S,
                    easeOutBack: P,
                    easeInOutBack: k,
                    easeInBounce: _,
                    easeOutBounce: A,
                    easeInOutBounce: T
                }
            }(),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.util.object.extend
                  , n = t.util.object.clone
                  , o = t.util.toFixed
                  , r = t.util.parseUnit
                  , a = t.util.multiplyTransformMatrices
                  , s = ["path", "circle", "polygon", "polyline", "ellipse", "rect", "line", "image", "text"]
                  , l = ["symbol", "image", "marker", "pattern", "view", "svg"]
                  , c = ["pattern", "defs", "symbol", "metadata", "clipPath", "mask", "desc"]
                  , d = ["symbol", "g", "a", "svg", "clipPath", "defs"]
                  , u = {
                    cx: "left",
                    x: "left",
                    r: "radius",
                    cy: "top",
                    y: "top",
                    display: "visible",
                    visibility: "visible",
                    transform: "transformMatrix",
                    "fill-opacity": "fillOpacity",
                    "fill-rule": "fillRule",
                    "font-family": "fontFamily",
                    "font-size": "fontSize",
                    "font-style": "fontStyle",
                    "font-weight": "fontWeight",
                    "letter-spacing": "charSpacing",
                    "paint-order": "paintFirst",
                    "stroke-dasharray": "strokeDashArray",
                    "stroke-dashoffset": "strokeDashOffset",
                    "stroke-linecap": "strokeLineCap",
                    "stroke-linejoin": "strokeLineJoin",
                    "stroke-miterlimit": "strokeMiterLimit",
                    "stroke-opacity": "strokeOpacity",
                    "stroke-width": "strokeWidth",
                    "text-decoration": "textDecoration",
                    "text-anchor": "textAnchor",
                    opacity: "opacity",
                    "clip-path": "clipPath",
                    "clip-rule": "clipRule",
                    "vector-effect": "strokeUniform"
                }
                  , p = {
                    stroke: "strokeOpacity",
                    fill: "fillOpacity"
                };
                function h(e) {
                    return e in u ? u[e] : e
                }
                function m(e, i, n, o) {
                    var s, l = "[object Array]" === Object.prototype.toString.call(i);
                    if ("fill" !== e && "stroke" !== e || "none" !== i)
                        if ("vector-effect" === e)
                            i = "non-scaling-stroke" === i;
                        else if ("strokeDashArray" === e)
                            i = "none" === i ? null : i.replace(/,/g, " ").split(/\s+/).map(parseFloat);
                        else if ("transformMatrix" === e)
                            i = n && n.transformMatrix ? a(n.transformMatrix, t.parseTransformAttribute(i)) : t.parseTransformAttribute(i);
                        else if ("visible" === e)
                            i = "none" !== i && "hidden" !== i,
                            n && !1 === n.visible && (i = !1);
                        else if ("opacity" === e)
                            i = parseFloat(i),
                            n && "undefined" !== typeof n.opacity && (i *= n.opacity);
                        else if ("textAnchor" === e)
                            i = "start" === i ? "left" : "end" === i ? "right" : "center";
                        else if ("charSpacing" === e)
                            s = r(i, o) / o * 1e3;
                        else if ("paintFirst" === e) {
                            var c = i.indexOf("fill")
                              , d = i.indexOf("stroke");
                            i = "fill";
                            (c > -1 && d > -1 && d < c || -1 === c && d > -1) && (i = "stroke")
                        } else {
                            if ("href" === e || "xlink:href" === e)
                                return i;
                            s = l ? i.map(r) : r(i, o)
                        }
                    else
                        i = "";
                    return !l && isNaN(s) ? i : s
                }
                function g(e) {
                    return new RegExp("^(" + e.join("|") + ")\\b","i")
                }
                function f(e) {
                    for (var i in p)
                        if ("undefined" !== typeof e[p[i]] && "" !== e[i]) {
                            if ("undefined" === typeof e[i]) {
                                if (!t.Object.prototype[i])
                                    continue;
                                e[i] = t.Object.prototype[i]
                            }
                            if (0 !== e[i].indexOf("url(")) {
                                var n = new t.Color(e[i]);
                                e[i] = n.setAlpha(o(n.getAlpha() * e[p[i]], 2)).toRgba()
                            }
                        }
                    return e
                }
                function v(e, t) {
                    var i, n, o, r, a = [];
                    for (o = 0,
                    r = t.length; o < r; o++)
                        i = t[o],
                        n = e.getElementsByTagName(i),
                        a = a.concat(Array.prototype.slice.call(n));
                    return a
                }
                function b(e, t) {
                    var i, n;
                    e.replace(/;\s*$/, "").split(";").forEach((function(e) {
                        var o = e.split(":");
                        i = o[0].trim().toLowerCase(),
                        n = o[1].trim(),
                        t[i] = n
                    }
                    ))
                }
                function y(e, t) {
                    var i, n;
                    for (var o in e)
                        "undefined" !== typeof e[o] && (i = o.toLowerCase(),
                        n = e[o],
                        t[i] = n)
                }
                function w(e, i) {
                    var n = {};
                    for (var o in t.cssRules[i])
                        if (C(e, o.split(" ")))
                            for (var r in t.cssRules[i][o])
                                n[r] = t.cssRules[i][o][r];
                    return n
                }
                function C(e, t) {
                    var i, n = !0;
                    return i = S(e, t.pop()),
                    i && t.length && (n = x(e, t)),
                    i && n && 0 === t.length
                }
                function x(e, t) {
                    var i, n = !0;
                    while (e.parentNode && 1 === e.parentNode.nodeType && t.length)
                        n && (i = t.pop()),
                        e = e.parentNode,
                        n = S(e, i);
                    return 0 === t.length
                }
                function S(e, t) {
                    var i, n, o = e.nodeName, r = e.getAttribute("class"), a = e.getAttribute("id");
                    if (i = new RegExp("^" + o,"i"),
                    t = t.replace(i, ""),
                    a && t.length && (i = new RegExp("#" + a + "(?![a-zA-Z\\-]+)","i"),
                    t = t.replace(i, "")),
                    r && t.length)
                        for (r = r.split(" "),
                        n = r.length; n--; )
                            i = new RegExp("\\." + r[n] + "(?![a-zA-Z\\-]+)","i"),
                            t = t.replace(i, "");
                    return 0 === t.length
                }
                function P(e, t) {
                    var i;
                    if (e.getElementById && (i = e.getElementById(t)),
                    i)
                        return i;
                    var n, o, r, a = e.getElementsByTagName("*");
                    for (o = 0,
                    r = a.length; o < r; o++)
                        if (n = a[o],
                        t === n.getAttribute("id"))
                            return n
                }
                function k(e) {
                    var t = v(e, ["use", "svg:use"])
                      , i = 0;
                    while (t.length && i < t.length) {
                        var n, o, r, a, s, l = t[i], c = (l.getAttribute("xlink:href") || l.getAttribute("href")).substr(1), d = l.getAttribute("x") || 0, u = l.getAttribute("y") || 0, p = P(e, c).cloneNode(!0), h = (p.getAttribute("transform") || "") + " translate(" + d + ", " + u + ")", m = t.length;
                        if (A(p),
                        /^svg$/i.test(p.nodeName)) {
                            var g = p.ownerDocument.createElement("g");
                            for (r = 0,
                            a = p.attributes,
                            s = a.length; r < s; r++)
                                o = a.item(r),
                                g.setAttribute(o.nodeName, o.nodeValue);
                            while (p.firstChild)
                                g.appendChild(p.firstChild);
                            p = g
                        }
                        for (r = 0,
                        a = l.attributes,
                        s = a.length; r < s; r++)
                            o = a.item(r),
                            "x" !== o.nodeName && "y" !== o.nodeName && "xlink:href" !== o.nodeName && "href" !== o.nodeName && ("transform" === o.nodeName ? h = o.nodeValue + " " + h : p.setAttribute(o.nodeName, o.nodeValue));
                        p.setAttribute("transform", h),
                        p.setAttribute("instantiated_by_use", "1"),
                        p.removeAttribute("id"),
                        n = l.parentNode,
                        n.replaceChild(p, l),
                        t.length === m && i++
                    }
                }
                t.svgValidTagNamesRegEx = g(s),
                t.svgViewBoxElementsRegEx = g(l),
                t.svgInvalidAncestorsRegEx = g(c),
                t.svgValidParentsRegEx = g(d),
                t.cssRules = {},
                t.gradientDefs = {},
                t.clipPaths = {},
                t.parseTransformAttribute = function() {
                    function e(e, i) {
                        var n = t.util.cos(i[0])
                          , o = t.util.sin(i[0])
                          , r = 0
                          , a = 0;
                        3 === i.length && (r = i[1],
                        a = i[2]),
                        e[0] = n,
                        e[1] = o,
                        e[2] = -o,
                        e[3] = n,
                        e[4] = r - (n * r - o * a),
                        e[5] = a - (o * r + n * a)
                    }
                    function i(e, t) {
                        var i = t[0]
                          , n = 2 === t.length ? t[1] : t[0];
                        e[0] = i,
                        e[3] = n
                    }
                    function n(e, i, n) {
                        e[n] = Math.tan(t.util.degreesToRadians(i[0]))
                    }
                    function o(e, t) {
                        e[4] = t[0],
                        2 === t.length && (e[5] = t[1])
                    }
                    var r = t.iMatrix
                      , a = t.reNum
                      , s = "(?:\\s+,?\\s*|,\\s*)"
                      , l = "(?:(skewX)\\s*\\(\\s*(" + a + ")\\s*\\))"
                      , c = "(?:(skewY)\\s*\\(\\s*(" + a + ")\\s*\\))"
                      , d = "(?:(rotate)\\s*\\(\\s*(" + a + ")(?:" + s + "(" + a + ")" + s + "(" + a + "))?\\s*\\))"
                      , u = "(?:(scale)\\s*\\(\\s*(" + a + ")(?:" + s + "(" + a + "))?\\s*\\))"
                      , p = "(?:(translate)\\s*\\(\\s*(" + a + ")(?:" + s + "(" + a + "))?\\s*\\))"
                      , h = "(?:(matrix)\\s*\\(\\s*(" + a + ")" + s + "(" + a + ")" + s + "(" + a + ")" + s + "(" + a + ")" + s + "(" + a + ")" + s + "(" + a + ")\\s*\\))"
                      , m = "(?:" + h + "|" + p + "|" + u + "|" + d + "|" + l + "|" + c + ")"
                      , g = "(?:" + m + "(?:" + s + "*" + m + ")*)"
                      , f = "^\\s*(?:" + g + "?)\\s*$"
                      , v = new RegExp(f)
                      , b = new RegExp(m,"g");
                    return function(a) {
                        var s = r.concat()
                          , l = [];
                        if (!a || a && !v.test(a))
                            return s;
                        a.replace(b, (function(a) {
                            var c = new RegExp(m).exec(a).filter((function(e) {
                                return !!e
                            }
                            ))
                              , d = c[1]
                              , u = c.slice(2).map(parseFloat);
                            switch (d) {
                            case "translate":
                                o(s, u);
                                break;
                            case "rotate":
                                u[0] = t.util.degreesToRadians(u[0]),
                                e(s, u);
                                break;
                            case "scale":
                                i(s, u);
                                break;
                            case "skewX":
                                n(s, u, 2);
                                break;
                            case "skewY":
                                n(s, u, 1);
                                break;
                            case "matrix":
                                s = u;
                                break
                            }
                            l.push(s.concat()),
                            s = r.concat()
                        }
                        ));
                        var c = l[0];
                        while (l.length > 1)
                            l.shift(),
                            c = t.util.multiplyTransformMatrices(c, l[0]);
                        return c
                    }
                }();
                var _ = new RegExp("^\\s*(" + t.reNum + "+)\\s*,?\\s*(" + t.reNum + "+)\\s*,?\\s*(" + t.reNum + "+)\\s*,?\\s*(" + t.reNum + "+)\\s*$");
                function A(e) {
                    var i, n, o, a, s = e.getAttribute("viewBox"), l = 1, c = 1, d = 0, u = 0, p = e.getAttribute("width"), h = e.getAttribute("height"), m = e.getAttribute("x") || 0, g = e.getAttribute("y") || 0, f = e.getAttribute("preserveAspectRatio") || "", v = !s || !t.svgViewBoxElementsRegEx.test(e.nodeName) || !(s = s.match(_)), b = !p || !h || "100%" === p || "100%" === h, y = v && b, w = {}, C = "", x = 0, S = 0;
                    if (w.width = 0,
                    w.height = 0,
                    w.toBeParsed = y,
                    y)
                        return w;
                    if (v)
                        return w.width = r(p),
                        w.height = r(h),
                        w;
                    if (d = -parseFloat(s[1]),
                    u = -parseFloat(s[2]),
                    i = parseFloat(s[3]),
                    n = parseFloat(s[4]),
                    w.minX = d,
                    w.minY = u,
                    w.viewBoxWidth = i,
                    w.viewBoxHeight = n,
                    b ? (w.width = i,
                    w.height = n) : (w.width = r(p),
                    w.height = r(h),
                    l = w.width / i,
                    c = w.height / n),
                    f = t.util.parsePreserveAspectRatioAttribute(f),
                    "none" !== f.alignX && ("meet" === f.meetOrSlice && (c = l = l > c ? c : l),
                    "slice" === f.meetOrSlice && (c = l = l > c ? l : c),
                    x = w.width - i * l,
                    S = w.height - n * l,
                    "Mid" === f.alignX && (x /= 2),
                    "Mid" === f.alignY && (S /= 2),
                    "Min" === f.alignX && (x = 0),
                    "Min" === f.alignY && (S = 0)),
                    1 === l && 1 === c && 0 === d && 0 === u && 0 === m && 0 === g)
                        return w;
                    if ((m || g) && (C = " translate(" + r(m) + " " + r(g) + ") "),
                    o = C + " matrix(" + l + " 0 0 " + c + " " + (d * l + x) + " " + (u * c + S) + ") ",
                    w.viewboxTransform = t.parseTransformAttribute(o),
                    "svg" === e.nodeName) {
                        a = e.ownerDocument.createElement("g");
                        while (e.firstChild)
                            a.appendChild(e.firstChild);
                        e.appendChild(a)
                    } else
                        a = e,
                        o = a.getAttribute("transform") + o;
                    return a.setAttribute("transform", o),
                    w
                }
                function T(e, t) {
                    while (e && (e = e.parentNode))
                        if (e.nodeName && t.test(e.nodeName.replace("svg:", "")) && !e.getAttribute("instantiated_by_use"))
                            return !0;
                    return !1
                }
                function E(e, t) {
                    var i = ["gradientTransform", "x1", "x2", "y1", "y2", "gradientUnits", "cx", "cy", "r", "fx", "fy"]
                      , n = "xlink:href"
                      , o = t.getAttribute(n).substr(1)
                      , r = P(e, o);
                    if (r && r.getAttribute(n) && E(e, r),
                    i.forEach((function(e) {
                        r && !t.hasAttribute(e) && r.hasAttribute(e) && t.setAttribute(e, r.getAttribute(e))
                    }
                    )),
                    !t.children.length) {
                        var a = r.cloneNode(!0);
                        while (a.firstChild)
                            t.appendChild(a.firstChild)
                    }
                    t.removeAttribute(n)
                }
                t.parseSVGDocument = function(e, i, o, r) {
                    if (e) {
                        k(e);
                        var a, s, l = t.Object.__uid++, c = A(e), d = t.util.toArray(e.getElementsByTagName("*"));
                        if (c.crossOrigin = r && r.crossOrigin,
                        c.svgUid = l,
                        0 === d.length && t.isLikelyNode) {
                            d = e.selectNodes('//*[name(.)!="svg"]');
                            var u = [];
                            for (a = 0,
                            s = d.length; a < s; a++)
                                u[a] = d[a];
                            d = u
                        }
                        var p = d.filter((function(e) {
                            return A(e),
                            t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:", "")) && !T(e, t.svgInvalidAncestorsRegEx)
                        }
                        ));
                        if (!p || p && !p.length)
                            i && i([], {});
                        else {
                            var h = {};
                            d.filter((function(e) {
                                return "clipPath" === e.nodeName.replace("svg:", "")
                            }
                            )).forEach((function(e) {
                                var i = e.getAttribute("id");
                                h[i] = t.util.toArray(e.getElementsByTagName("*")).filter((function(e) {
                                    return t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:", ""))
                                }
                                ))
                            }
                            )),
                            t.gradientDefs[l] = t.getGradientDefs(e),
                            t.cssRules[l] = t.getCSSRules(e),
                            t.clipPaths[l] = h,
                            t.parseElements(p, (function(e, n) {
                                i && (i(e, c, n, d),
                                delete t.gradientDefs[l],
                                delete t.cssRules[l],
                                delete t.clipPaths[l])
                            }
                            ), n(c), o, r)
                        }
                    }
                }
                ;
                var O = new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*(" + t.reNum + "(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|" + t.reNum + "))?\\s+(.*)");
                i(t, {
                    parseFontDeclaration: function(e, t) {
                        var i = e.match(O);
                        if (i) {
                            var n = i[1]
                              , o = i[3]
                              , a = i[4]
                              , s = i[5]
                              , l = i[6];
                            n && (t.fontStyle = n),
                            o && (t.fontWeight = isNaN(parseFloat(o)) ? o : parseFloat(o)),
                            a && (t.fontSize = r(a)),
                            l && (t.fontFamily = l),
                            s && (t.lineHeight = "normal" === s ? 1 : s)
                        }
                    },
                    getGradientDefs: function(e) {
                        var t, i = ["linearGradient", "radialGradient", "svg:linearGradient", "svg:radialGradient"], n = v(e, i), o = 0, r = {};
                        o = n.length;
                        while (o--)
                            t = n[o],
                            t.getAttribute("xlink:href") && E(e, t),
                            r[t.getAttribute("id")] = t;
                        return r
                    },
                    parseAttributes: function(e, n, o) {
                        if (e) {
                            var a, s, l, c = {};
                            "undefined" === typeof o && (o = e.getAttribute("svgUid")),
                            e.parentNode && t.svgValidParentsRegEx.test(e.parentNode.nodeName) && (c = t.parseAttributes(e.parentNode, n, o));
                            var d = n.reduce((function(t, i) {
                                return a = e.getAttribute(i),
                                a && (t[i] = a),
                                t
                            }
                            ), {});
                            d = i(d, i(w(e, o), t.parseStyleAttribute(e))),
                            s = l = c.fontSize || t.Text.DEFAULT_SVG_FONT_SIZE,
                            d["font-size"] && (d["font-size"] = s = r(d["font-size"], l));
                            var u, p, g = {};
                            for (var v in d)
                                u = h(v),
                                p = m(u, d[v], c, s),
                                g[u] = p;
                            g && g.font && t.parseFontDeclaration(g.font, g);
                            var b = i(c, g);
                            return t.svgValidParentsRegEx.test(e.nodeName) ? b : f(b)
                        }
                    },
                    parseElements: function(e, i, n, o, r) {
                        new t.ElementsParser(e,i,n,o,r).parse()
                    },
                    parseStyleAttribute: function(e) {
                        var t = {}
                          , i = e.getAttribute("style");
                        return i ? ("string" === typeof i ? b(i, t) : y(i, t),
                        t) : t
                    },
                    parsePointsAttribute: function(e) {
                        if (!e)
                            return null;
                        e = e.replace(/,/g, " ").trim(),
                        e = e.split(/\s+/);
                        var t, i, n = [];
                        for (t = 0,
                        i = e.length; t < i; t += 2)
                            n.push({
                                x: parseFloat(e[t]),
                                y: parseFloat(e[t + 1])
                            });
                        return n
                    },
                    getCSSRules: function(e) {
                        var i, n, o, r = e.getElementsByTagName("style"), a = {};
                        for (i = 0,
                        n = r.length; i < n; i++) {
                            var s = r[i].textContent || r[i].text;
                            s = s.replace(/\/\*[\s\S]*?\*\//g, ""),
                            "" !== s.trim() && (o = s.match(/[^{]*\{[\s\S]*?\}/g),
                            o = o.map((function(e) {
                                return e.trim()
                            }
                            )),
                            o.forEach((function(e) {
                                var o = e.match(/([\s\S]*?)\s*\{([^}]*)\}/)
                                  , r = {}
                                  , s = o[2].trim()
                                  , l = s.replace(/;$/, "").split(/\s*;\s*/);
                                for (i = 0,
                                n = l.length; i < n; i++) {
                                    var c = l[i].split(/\s*:\s*/)
                                      , d = c[0]
                                      , u = c[1];
                                    r[d] = u
                                }
                                e = o[1],
                                e.split(",").forEach((function(e) {
                                    e = e.replace(/^svg/i, "").trim(),
                                    "" !== e && (a[e] ? t.util.object.extend(a[e], r) : a[e] = t.util.object.clone(r))
                                }
                                ))
                            }
                            )))
                        }
                        return a
                    },
                    loadSVGFromURL: function(e, i, n, o) {
                        function r(e) {
                            var r = e.responseXML;
                            if (r && !r.documentElement && t.window.ActiveXObject && e.responseText && (r = new ActiveXObject("Microsoft.XMLDOM"),
                            r.async = "false",
                            r.loadXML(e.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i, ""))),
                            !r || !r.documentElement)
                                return i && i(null),
                                !1;
                            t.parseSVGDocument(r.documentElement, (function(e, t, n, o) {
                                i && i(e, t, n, o)
                            }
                            ), n, o)
                        }
                        e = e.replace(/^\n\s*/, "").trim(),
                        new t.util.request(e,{
                            method: "get",
                            onComplete: r
                        })
                    },
                    loadSVGFromString: function(e, i, n, o) {
                        var r;
                        if (e = e.trim(),
                        "undefined" !== typeof t.window.DOMParser) {
                            var a = new t.window.DOMParser;
                            a && a.parseFromString && (r = a.parseFromString(e, "text/xml"))
                        } else
                            t.window.ActiveXObject && (r = new ActiveXObject("Microsoft.XMLDOM"),
                            r.async = "false",
                            r.loadXML(e.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i, "")));
                        t.parseSVGDocument(r.documentElement, (function(e, t, n, o) {
                            i(e, t, n, o)
                        }
                        ), n, o)
                    }
                })
            }(i),
            o.ElementsParser = function(e, t, i, n, o) {
                this.elements = e,
                this.callback = t,
                this.options = i,
                this.reviver = n,
                this.svgUid = i && i.svgUid || 0,
                this.parsingOptions = o,
                this.regexUrl = /^url\(['"]?#([^'"]+)['"]?\)/g
            }
            ,
            function(e) {
                e.parse = function() {
                    this.instances = new Array(this.elements.length),
                    this.numElements = this.elements.length,
                    this.createObjects()
                }
                ,
                e.createObjects = function() {
                    var e = this;
                    this.elements.forEach((function(t, i) {
                        t.setAttribute("svgUid", e.svgUid),
                        e.createObject(t, i)
                    }
                    ))
                }
                ,
                e.findTag = function(e) {
                    return o[o.util.string.capitalize(e.tagName.replace("svg:", ""))]
                }
                ,
                e.createObject = function(e, t) {
                    var i = this.findTag(e);
                    if (i && i.fromElement)
                        try {
                            i.fromElement(e, this.createCallback(t, e), this.options)
                        } catch (n) {
                            o.log(n)
                        }
                    else
                        this.checkIfDone()
                }
                ,
                e.createCallback = function(e, t) {
                    var i = this;
                    return function(n) {
                        var r;
                        i.resolveGradient(n, t, "fill"),
                        i.resolveGradient(n, t, "stroke"),
                        n instanceof o.Image && n._originalElement && (r = n.parsePreserveAspectRatioAttribute(t)),
                        n._removeTransformMatrix(r),
                        i.resolveClipPath(n),
                        i.reviver && i.reviver(t, n),
                        i.instances[e] = n,
                        i.checkIfDone()
                    }
                }
                ,
                e.extractPropertyDefinition = function(e, t, i) {
                    var n = e[t];
                    if (/^url\(/.test(n)) {
                        var r = this.regexUrl.exec(n)[1];
                        return this.regexUrl.lastIndex = 0,
                        o[i][this.svgUid][r]
                    }
                }
                ,
                e.resolveGradient = function(e, t, i) {
                    var n = this.extractPropertyDefinition(e, i, "gradientDefs");
                    if (n) {
                        var r = t.getAttribute(i + "-opacity")
                          , a = o.Gradient.fromElement(n, e, r, this.options);
                        e.set(i, a)
                    }
                }
                ,
                e.createClipPathCallback = function(e, t) {
                    return function(e) {
                        e._removeTransformMatrix(),
                        e.fillRule = e.clipRule,
                        t.push(e)
                    }
                }
                ,
                e.resolveClipPath = function(e) {
                    var t, i, n, r, a, s = this.extractPropertyDefinition(e, "clipPath", "clipPaths");
                    if (s) {
                        r = [],
                        n = o.util.invertTransform(e.calcTransformMatrix());
                        for (var l = 0; l < s.length; l++)
                            t = s[l],
                            i = this.findTag(t),
                            i.fromElement(t, this.createClipPathCallback(e, r), this.options);
                        s = 1 === r.length ? r[0] : new o.Group(r),
                        a = o.util.multiplyTransformMatrices(n, s.calcTransformMatrix());
                        var c = o.util.qrDecompose(a);
                        s.flipX = !1,
                        s.flipY = !1,
                        s.set("scaleX", c.scaleX),
                        s.set("scaleY", c.scaleY),
                        s.angle = c.angle,
                        s.skewX = c.skewX,
                        s.skewY = 0,
                        s.setPositionByOrigin({
                            x: c.translateX,
                            y: c.translateY
                        }, "center", "center"),
                        e.clipPath = s
                    }
                }
                ,
                e.checkIfDone = function() {
                    0 === --this.numElements && (this.instances = this.instances.filter((function(e) {
                        return null != e
                    }
                    )),
                    this.callback(this.instances, this.elements))
                }
            }(o.ElementsParser.prototype),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {});
                function i(e, t) {
                    this.x = e,
                    this.y = t
                }
                t.Point ? t.warn("fabric.Point is already defined") : (t.Point = i,
                i.prototype = {
                    type: "point",
                    constructor: i,
                    add: function(e) {
                        return new i(this.x + e.x,this.y + e.y)
                    },
                    addEquals: function(e) {
                        return this.x += e.x,
                        this.y += e.y,
                        this
                    },
                    scalarAdd: function(e) {
                        return new i(this.x + e,this.y + e)
                    },
                    scalarAddEquals: function(e) {
                        return this.x += e,
                        this.y += e,
                        this
                    },
                    subtract: function(e) {
                        return new i(this.x - e.x,this.y - e.y)
                    },
                    subtractEquals: function(e) {
                        return this.x -= e.x,
                        this.y -= e.y,
                        this
                    },
                    scalarSubtract: function(e) {
                        return new i(this.x - e,this.y - e)
                    },
                    scalarSubtractEquals: function(e) {
                        return this.x -= e,
                        this.y -= e,
                        this
                    },
                    multiply: function(e) {
                        return new i(this.x * e,this.y * e)
                    },
                    multiplyEquals: function(e) {
                        return this.x *= e,
                        this.y *= e,
                        this
                    },
                    divide: function(e) {
                        return new i(this.x / e,this.y / e)
                    },
                    divideEquals: function(e) {
                        return this.x /= e,
                        this.y /= e,
                        this
                    },
                    eq: function(e) {
                        return this.x === e.x && this.y === e.y
                    },
                    lt: function(e) {
                        return this.x < e.x && this.y < e.y
                    },
                    lte: function(e) {
                        return this.x <= e.x && this.y <= e.y
                    },
                    gt: function(e) {
                        return this.x > e.x && this.y > e.y
                    },
                    gte: function(e) {
                        return this.x >= e.x && this.y >= e.y
                    },
                    lerp: function(e, t) {
                        return "undefined" === typeof t && (t = .5),
                        t = Math.max(Math.min(1, t), 0),
                        new i(this.x + (e.x - this.x) * t,this.y + (e.y - this.y) * t)
                    },
                    distanceFrom: function(e) {
                        var t = this.x - e.x
                          , i = this.y - e.y;
                        return Math.sqrt(t * t + i * i)
                    },
                    midPointFrom: function(e) {
                        return this.lerp(e)
                    },
                    min: function(e) {
                        return new i(Math.min(this.x, e.x),Math.min(this.y, e.y))
                    },
                    max: function(e) {
                        return new i(Math.max(this.x, e.x),Math.max(this.y, e.y))
                    },
                    toString: function() {
                        return this.x + "," + this.y
                    },
                    setXY: function(e, t) {
                        return this.x = e,
                        this.y = t,
                        this
                    },
                    setX: function(e) {
                        return this.x = e,
                        this
                    },
                    setY: function(e) {
                        return this.y = e,
                        this
                    },
                    setFromPoint: function(e) {
                        return this.x = e.x,
                        this.y = e.y,
                        this
                    },
                    swap: function(e) {
                        var t = this.x
                          , i = this.y;
                        this.x = e.x,
                        this.y = e.y,
                        e.x = t,
                        e.y = i
                    },
                    clone: function() {
                        return new i(this.x,this.y)
                    }
                })
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {});
                function i(e) {
                    this.status = e,
                    this.points = []
                }
                t.Intersection ? t.warn("fabric.Intersection is already defined") : (t.Intersection = i,
                t.Intersection.prototype = {
                    constructor: i,
                    appendPoint: function(e) {
                        return this.points.push(e),
                        this
                    },
                    appendPoints: function(e) {
                        return this.points = this.points.concat(e),
                        this
                    }
                },
                t.Intersection.intersectLineLine = function(e, n, o, r) {
                    var a, s = (r.x - o.x) * (e.y - o.y) - (r.y - o.y) * (e.x - o.x), l = (n.x - e.x) * (e.y - o.y) - (n.y - e.y) * (e.x - o.x), c = (r.y - o.y) * (n.x - e.x) - (r.x - o.x) * (n.y - e.y);
                    if (0 !== c) {
                        var d = s / c
                          , u = l / c;
                        0 <= d && d <= 1 && 0 <= u && u <= 1 ? (a = new i("Intersection"),
                        a.appendPoint(new t.Point(e.x + d * (n.x - e.x),e.y + d * (n.y - e.y)))) : a = new i
                    } else
                        a = new i(0 === s || 0 === l ? "Coincident" : "Parallel");
                    return a
                }
                ,
                t.Intersection.intersectLinePolygon = function(e, t, n) {
                    var o, r, a, s, l = new i, c = n.length;
                    for (s = 0; s < c; s++)
                        o = n[s],
                        r = n[(s + 1) % c],
                        a = i.intersectLineLine(e, t, o, r),
                        l.appendPoints(a.points);
                    return l.points.length > 0 && (l.status = "Intersection"),
                    l
                }
                ,
                t.Intersection.intersectPolygonPolygon = function(e, t) {
                    var n, o = new i, r = e.length;
                    for (n = 0; n < r; n++) {
                        var a = e[n]
                          , s = e[(n + 1) % r]
                          , l = i.intersectLinePolygon(a, s, t);
                        o.appendPoints(l.points)
                    }
                    return o.points.length > 0 && (o.status = "Intersection"),
                    o
                }
                ,
                t.Intersection.intersectPolygonRectangle = function(e, n, o) {
                    var r = n.min(o)
                      , a = n.max(o)
                      , s = new t.Point(a.x,r.y)
                      , l = new t.Point(r.x,a.y)
                      , c = i.intersectLinePolygon(r, s, e)
                      , d = i.intersectLinePolygon(s, a, e)
                      , u = i.intersectLinePolygon(a, l, e)
                      , p = i.intersectLinePolygon(l, r, e)
                      , h = new i;
                    return h.appendPoints(c.points),
                    h.appendPoints(d.points),
                    h.appendPoints(u.points),
                    h.appendPoints(p.points),
                    h.points.length > 0 && (h.status = "Intersection"),
                    h
                }
                )
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {});
                function i(e) {
                    e ? this._tryParsingColor(e) : this.setSource([0, 0, 0, 1])
                }
                function n(e, t, i) {
                    return i < 0 && (i += 1),
                    i > 1 && (i -= 1),
                    i < 1 / 6 ? e + 6 * (t - e) * i : i < .5 ? t : i < 2 / 3 ? e + (t - e) * (2 / 3 - i) * 6 : e
                }
                t.Color ? t.warn("fabric.Color is already defined.") : (t.Color = i,
                t.Color.prototype = {
                    _tryParsingColor: function(e) {
                        var t;
                        e in i.colorNameMap && (e = i.colorNameMap[e]),
                        "transparent" === e && (t = [255, 255, 255, 0]),
                        t || (t = i.sourceFromHex(e)),
                        t || (t = i.sourceFromRgb(e)),
                        t || (t = i.sourceFromHsl(e)),
                        t || (t = [0, 0, 0, 1]),
                        t && this.setSource(t)
                    },
                    _rgbToHsl: function(e, i, n) {
                        e /= 255,
                        i /= 255,
                        n /= 255;
                        var o, r, a, s = t.util.array.max([e, i, n]), l = t.util.array.min([e, i, n]);
                        if (a = (s + l) / 2,
                        s === l)
                            o = r = 0;
                        else {
                            var c = s - l;
                            switch (r = a > .5 ? c / (2 - s - l) : c / (s + l),
                            s) {
                            case e:
                                o = (i - n) / c + (i < n ? 6 : 0);
                                break;
                            case i:
                                o = (n - e) / c + 2;
                                break;
                            case n:
                                o = (e - i) / c + 4;
                                break
                            }
                            o /= 6
                        }
                        return [Math.round(360 * o), Math.round(100 * r), Math.round(100 * a)]
                    },
                    getSource: function() {
                        return this._source
                    },
                    setSource: function(e) {
                        this._source = e
                    },
                    toRgb: function() {
                        var e = this.getSource();
                        return "rgb(" + e[0] + "," + e[1] + "," + e[2] + ")"
                    },
                    toRgba: function() {
                        var e = this.getSource();
                        return "rgba(" + e[0] + "," + e[1] + "," + e[2] + "," + e[3] + ")"
                    },
                    toHsl: function() {
                        var e = this.getSource()
                          , t = this._rgbToHsl(e[0], e[1], e[2]);
                        return "hsl(" + t[0] + "," + t[1] + "%," + t[2] + "%)"
                    },
                    toHsla: function() {
                        var e = this.getSource()
                          , t = this._rgbToHsl(e[0], e[1], e[2]);
                        return "hsla(" + t[0] + "," + t[1] + "%," + t[2] + "%," + e[3] + ")"
                    },
                    toHex: function() {
                        var e, t, i, n = this.getSource();
                        return e = n[0].toString(16),
                        e = 1 === e.length ? "0" + e : e,
                        t = n[1].toString(16),
                        t = 1 === t.length ? "0" + t : t,
                        i = n[2].toString(16),
                        i = 1 === i.length ? "0" + i : i,
                        e.toUpperCase() + t.toUpperCase() + i.toUpperCase()
                    },
                    toHexa: function() {
                        var e, t = this.getSource();
                        return e = Math.round(255 * t[3]),
                        e = e.toString(16),
                        e = 1 === e.length ? "0" + e : e,
                        this.toHex() + e.toUpperCase()
                    },
                    getAlpha: function() {
                        return this.getSource()[3]
                    },
                    setAlpha: function(e) {
                        var t = this.getSource();
                        return t[3] = e,
                        this.setSource(t),
                        this
                    },
                    toGrayscale: function() {
                        var e = this.getSource()
                          , t = parseInt((.3 * e[0] + .59 * e[1] + .11 * e[2]).toFixed(0), 10)
                          , i = e[3];
                        return this.setSource([t, t, t, i]),
                        this
                    },
                    toBlackWhite: function(e) {
                        var t = this.getSource()
                          , i = (.3 * t[0] + .59 * t[1] + .11 * t[2]).toFixed(0)
                          , n = t[3];
                        return e = e || 127,
                        i = Number(i) < Number(e) ? 0 : 255,
                        this.setSource([i, i, i, n]),
                        this
                    },
                    overlayWith: function(e) {
                        e instanceof i || (e = new i(e));
                        var t, n = [], o = this.getAlpha(), r = .5, a = this.getSource(), s = e.getSource();
                        for (t = 0; t < 3; t++)
                            n.push(Math.round(a[t] * (1 - r) + s[t] * r));
                        return n[3] = o,
                        this.setSource(n),
                        this
                    }
                },
                t.Color.reRGBa = /^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,
                t.Color.reHSLa = /^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,
                t.Color.reHex = /^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,
                t.Color.colorNameMap = {
                    aliceblue: "#F0F8FF",
                    antiquewhite: "#FAEBD7",
                    aqua: "#00FFFF",
                    aquamarine: "#7FFFD4",
                    azure: "#F0FFFF",
                    beige: "#F5F5DC",
                    bisque: "#FFE4C4",
                    black: "#000000",
                    blanchedalmond: "#FFEBCD",
                    blue: "#0000FF",
                    blueviolet: "#8A2BE2",
                    brown: "#A52A2A",
                    burlywood: "#DEB887",
                    cadetblue: "#5F9EA0",
                    chartreuse: "#7FFF00",
                    chocolate: "#D2691E",
                    coral: "#FF7F50",
                    cornflowerblue: "#6495ED",
                    cornsilk: "#FFF8DC",
                    crimson: "#DC143C",
                    cyan: "#00FFFF",
                    darkblue: "#00008B",
                    darkcyan: "#008B8B",
                    darkgoldenrod: "#B8860B",
                    darkgray: "#A9A9A9",
                    darkgrey: "#A9A9A9",
                    darkgreen: "#006400",
                    darkkhaki: "#BDB76B",
                    darkmagenta: "#8B008B",
                    darkolivegreen: "#556B2F",
                    darkorange: "#FF8C00",
                    darkorchid: "#9932CC",
                    darkred: "#8B0000",
                    darksalmon: "#E9967A",
                    darkseagreen: "#8FBC8F",
                    darkslateblue: "#483D8B",
                    darkslategray: "#2F4F4F",
                    darkslategrey: "#2F4F4F",
                    darkturquoise: "#00CED1",
                    darkviolet: "#9400D3",
                    deeppink: "#FF1493",
                    deepskyblue: "#00BFFF",
                    dimgray: "#696969",
                    dimgrey: "#696969",
                    dodgerblue: "#1E90FF",
                    firebrick: "#B22222",
                    floralwhite: "#FFFAF0",
                    forestgreen: "#228B22",
                    fuchsia: "#FF00FF",
                    gainsboro: "#DCDCDC",
                    ghostwhite: "#F8F8FF",
                    gold: "#FFD700",
                    goldenrod: "#DAA520",
                    gray: "#808080",
                    grey: "#808080",
                    green: "#008000",
                    greenyellow: "#ADFF2F",
                    honeydew: "#F0FFF0",
                    hotpink: "#FF69B4",
                    indianred: "#CD5C5C",
                    indigo: "#4B0082",
                    ivory: "#FFFFF0",
                    khaki: "#F0E68C",
                    lavender: "#E6E6FA",
                    lavenderblush: "#FFF0F5",
                    lawngreen: "#7CFC00",
                    lemonchiffon: "#FFFACD",
                    lightblue: "#ADD8E6",
                    lightcoral: "#F08080",
                    lightcyan: "#E0FFFF",
                    lightgoldenrodyellow: "#FAFAD2",
                    lightgray: "#D3D3D3",
                    lightgrey: "#D3D3D3",
                    lightgreen: "#90EE90",
                    lightpink: "#FFB6C1",
                    lightsalmon: "#FFA07A",
                    lightseagreen: "#20B2AA",
                    lightskyblue: "#87CEFA",
                    lightslategray: "#778899",
                    lightslategrey: "#778899",
                    lightsteelblue: "#B0C4DE",
                    lightyellow: "#FFFFE0",
                    lime: "#00FF00",
                    limegreen: "#32CD32",
                    linen: "#FAF0E6",
                    magenta: "#FF00FF",
                    maroon: "#800000",
                    mediumaquamarine: "#66CDAA",
                    mediumblue: "#0000CD",
                    mediumorchid: "#BA55D3",
                    mediumpurple: "#9370DB",
                    mediumseagreen: "#3CB371",
                    mediumslateblue: "#7B68EE",
                    mediumspringgreen: "#00FA9A",
                    mediumturquoise: "#48D1CC",
                    mediumvioletred: "#C71585",
                    midnightblue: "#191970",
                    mintcream: "#F5FFFA",
                    mistyrose: "#FFE4E1",
                    moccasin: "#FFE4B5",
                    navajowhite: "#FFDEAD",
                    navy: "#000080",
                    oldlace: "#FDF5E6",
                    olive: "#808000",
                    olivedrab: "#6B8E23",
                    orange: "#FFA500",
                    orangered: "#FF4500",
                    orchid: "#DA70D6",
                    palegoldenrod: "#EEE8AA",
                    palegreen: "#98FB98",
                    paleturquoise: "#AFEEEE",
                    palevioletred: "#DB7093",
                    papayawhip: "#FFEFD5",
                    peachpuff: "#FFDAB9",
                    peru: "#CD853F",
                    pink: "#FFC0CB",
                    plum: "#DDA0DD",
                    powderblue: "#B0E0E6",
                    purple: "#800080",
                    rebeccapurple: "#663399",
                    red: "#FF0000",
                    rosybrown: "#BC8F8F",
                    royalblue: "#4169E1",
                    saddlebrown: "#8B4513",
                    salmon: "#FA8072",
                    sandybrown: "#F4A460",
                    seagreen: "#2E8B57",
                    seashell: "#FFF5EE",
                    sienna: "#A0522D",
                    silver: "#C0C0C0",
                    skyblue: "#87CEEB",
                    slateblue: "#6A5ACD",
                    slategray: "#708090",
                    slategrey: "#708090",
                    snow: "#FFFAFA",
                    springgreen: "#00FF7F",
                    steelblue: "#4682B4",
                    tan: "#D2B48C",
                    teal: "#008080",
                    thistle: "#D8BFD8",
                    tomato: "#FF6347",
                    turquoise: "#40E0D0",
                    violet: "#EE82EE",
                    wheat: "#F5DEB3",
                    white: "#FFFFFF",
                    whitesmoke: "#F5F5F5",
                    yellow: "#FFFF00",
                    yellowgreen: "#9ACD32"
                },
                t.Color.fromRgb = function(e) {
                    return i.fromSource(i.sourceFromRgb(e))
                }
                ,
                t.Color.sourceFromRgb = function(e) {
                    var t = e.match(i.reRGBa);
                    if (t) {
                        var n = parseInt(t[1], 10) / (/%$/.test(t[1]) ? 100 : 1) * (/%$/.test(t[1]) ? 255 : 1)
                          , o = parseInt(t[2], 10) / (/%$/.test(t[2]) ? 100 : 1) * (/%$/.test(t[2]) ? 255 : 1)
                          , r = parseInt(t[3], 10) / (/%$/.test(t[3]) ? 100 : 1) * (/%$/.test(t[3]) ? 255 : 1);
                        return [parseInt(n, 10), parseInt(o, 10), parseInt(r, 10), t[4] ? parseFloat(t[4]) : 1]
                    }
                }
                ,
                t.Color.fromRgba = i.fromRgb,
                t.Color.fromHsl = function(e) {
                    return i.fromSource(i.sourceFromHsl(e))
                }
                ,
                t.Color.sourceFromHsl = function(e) {
                    var t = e.match(i.reHSLa);
                    if (t) {
                        var o, r, a, s = (parseFloat(t[1]) % 360 + 360) % 360 / 360, l = parseFloat(t[2]) / (/%$/.test(t[2]) ? 100 : 1), c = parseFloat(t[3]) / (/%$/.test(t[3]) ? 100 : 1);
                        if (0 === l)
                            o = r = a = c;
                        else {
                            var d = c <= .5 ? c * (l + 1) : c + l - c * l
                              , u = 2 * c - d;
                            o = n(u, d, s + 1 / 3),
                            r = n(u, d, s),
                            a = n(u, d, s - 1 / 3)
                        }
                        return [Math.round(255 * o), Math.round(255 * r), Math.round(255 * a), t[4] ? parseFloat(t[4]) : 1]
                    }
                }
                ,
                t.Color.fromHsla = i.fromHsl,
                t.Color.fromHex = function(e) {
                    return i.fromSource(i.sourceFromHex(e))
                }
                ,
                t.Color.sourceFromHex = function(e) {
                    if (e.match(i.reHex)) {
                        var t = e.slice(e.indexOf("#") + 1)
                          , n = 3 === t.length || 4 === t.length
                          , o = 8 === t.length || 4 === t.length
                          , r = n ? t.charAt(0) + t.charAt(0) : t.substring(0, 2)
                          , a = n ? t.charAt(1) + t.charAt(1) : t.substring(2, 4)
                          , s = n ? t.charAt(2) + t.charAt(2) : t.substring(4, 6)
                          , l = o ? n ? t.charAt(3) + t.charAt(3) : t.substring(6, 8) : "FF";
                        return [parseInt(r, 16), parseInt(a, 16), parseInt(s, 16), parseFloat((parseInt(l, 16) / 255).toFixed(2))]
                    }
                }
                ,
                t.Color.fromSource = function(e) {
                    var t = new i;
                    return t.setSource(e),
                    t
                }
                )
            }(i),
            function() {
                function e(e, t) {
                    var i, n, r, a, s = e.getAttribute("style"), l = e.getAttribute("offset") || 0;
                    if (l = parseFloat(l) / (/%$/.test(l) ? 100 : 1),
                    l = l < 0 ? 0 : l > 1 ? 1 : l,
                    s) {
                        var c = s.split(/\s*;\s*/);
                        for ("" === c[c.length - 1] && c.pop(),
                        a = c.length; a--; ) {
                            var d = c[a].split(/\s*:\s*/)
                              , u = d[0].trim()
                              , p = d[1].trim();
                            "stop-color" === u ? i = p : "stop-opacity" === u && (r = p)
                        }
                    }
                    return i || (i = e.getAttribute("stop-color") || "rgb(0,0,0)"),
                    r || (r = e.getAttribute("stop-opacity")),
                    i = new o.Color(i),
                    n = i.getAlpha(),
                    r = isNaN(parseFloat(r)) ? 1 : parseFloat(r),
                    r *= n * t,
                    {
                        offset: l,
                        color: i.toRgb(),
                        opacity: r
                    }
                }
                function t(e) {
                    return {
                        x1: e.getAttribute("x1") || 0,
                        y1: e.getAttribute("y1") || 0,
                        x2: e.getAttribute("x2") || "100%",
                        y2: e.getAttribute("y2") || 0
                    }
                }
                function i(e) {
                    return {
                        x1: e.getAttribute("fx") || e.getAttribute("cx") || "50%",
                        y1: e.getAttribute("fy") || e.getAttribute("cy") || "50%",
                        r1: 0,
                        x2: e.getAttribute("cx") || "50%",
                        y2: e.getAttribute("cy") || "50%",
                        r2: e.getAttribute("r") || "50%"
                    }
                }
                var n = o.util.object.clone;
                function r(e, t, i, n) {
                    var o, r;
                    Object.keys(t).forEach((function(e) {
                        o = t[e],
                        "Infinity" === o ? r = 1 : "-Infinity" === o ? r = 0 : (r = parseFloat(t[e], 10),
                        "string" === typeof o && /^(\d+\.\d+)%|(\d+)%$/.test(o) && (r *= .01,
                        "pixels" === n && ("x1" !== e && "x2" !== e && "r2" !== e || (r *= i.viewBoxWidth || i.width),
                        "y1" !== e && "y2" !== e || (r *= i.viewBoxHeight || i.height)))),
                        t[e] = r
                    }
                    ))
                }
                o.Gradient = o.util.createClass({
                    offsetX: 0,
                    offsetY: 0,
                    gradientTransform: null,
                    gradientUnits: "pixels",
                    type: "linear",
                    initialize: function(e) {
                        e || (e = {}),
                        e.coords || (e.coords = {});
                        var t, i = this;
                        Object.keys(e).forEach((function(t) {
                            i[t] = e[t]
                        }
                        )),
                        this.id ? this.id += "_" + o.Object.__uid++ : this.id = o.Object.__uid++,
                        t = {
                            x1: e.coords.x1 || 0,
                            y1: e.coords.y1 || 0,
                            x2: e.coords.x2 || 0,
                            y2: e.coords.y2 || 0
                        },
                        "radial" === this.type && (t.r1 = e.coords.r1 || 0,
                        t.r2 = e.coords.r2 || 0),
                        this.coords = t,
                        this.colorStops = e.colorStops.slice()
                    },
                    addColorStop: function(e) {
                        for (var t in e) {
                            var i = new o.Color(e[t]);
                            this.colorStops.push({
                                offset: parseFloat(t),
                                color: i.toRgb(),
                                opacity: i.getAlpha()
                            })
                        }
                        return this
                    },
                    toObject: function(e) {
                        var t = {
                            type: this.type,
                            coords: this.coords,
                            colorStops: this.colorStops,
                            offsetX: this.offsetX,
                            offsetY: this.offsetY,
                            gradientUnits: this.gradientUnits,
                            gradientTransform: this.gradientTransform ? this.gradientTransform.concat() : this.gradientTransform
                        };
                        return o.util.populateWithProperties(this, t, e),
                        t
                    },
                    toSVG: function(e, t) {
                        var i, r, a, s, l = n(this.coords, !0), c = (t = t || {},
                        n(this.colorStops, !0)), d = l.r1 > l.r2, u = this.gradientTransform ? this.gradientTransform.concat() : o.iMatrix.concat(), p = -this.offsetX, h = -this.offsetY, m = !!t.additionalTransform, g = "pixels" === this.gradientUnits ? "userSpaceOnUse" : "objectBoundingBox";
                        if (c.sort((function(e, t) {
                            return e.offset - t.offset
                        }
                        )),
                        "objectBoundingBox" === g ? (p /= e.width,
                        h /= e.height) : (p += e.width / 2,
                        h += e.height / 2),
                        "path" === e.type && (p -= e.pathOffset.x,
                        h -= e.pathOffset.y),
                        u[4] -= p,
                        u[5] -= h,
                        s = 'id="SVGID_' + this.id + '" gradientUnits="' + g + '"',
                        s += ' gradientTransform="' + (m ? t.additionalTransform + " " : "") + o.util.matrixToSVG(u) + '" ',
                        "linear" === this.type ? a = ["<linearGradient ", s, ' x1="', l.x1, '" y1="', l.y1, '" x2="', l.x2, '" y2="', l.y2, '">\n'] : "radial" === this.type && (a = ["<radialGradient ", s, ' cx="', d ? l.x1 : l.x2, '" cy="', d ? l.y1 : l.y2, '" r="', d ? l.r1 : l.r2, '" fx="', d ? l.x2 : l.x1, '" fy="', d ? l.y2 : l.y1, '">\n']),
                        "radial" === this.type) {
                            if (d)
                                for (c = c.concat(),
                                c.reverse(),
                                i = 0,
                                r = c.length; i < r; i++)
                                    c[i].offset = 1 - c[i].offset;
                            var f = Math.min(l.r1, l.r2);
                            if (f > 0) {
                                var v = Math.max(l.r1, l.r2)
                                  , b = f / v;
                                for (i = 0,
                                r = c.length; i < r; i++)
                                    c[i].offset += b * (1 - c[i].offset)
                            }
                        }
                        for (i = 0,
                        r = c.length; i < r; i++) {
                            var y = c[i];
                            a.push("<stop ", 'offset="', 100 * y.offset + "%", '" style="stop-color:', y.color, "undefined" !== typeof y.opacity ? ";stop-opacity: " + y.opacity : ";", '"/>\n')
                        }
                        return a.push("linear" === this.type ? "</linearGradient>\n" : "</radialGradient>\n"),
                        a.join("")
                    },
                    toLive: function(e) {
                        var t, i, n, r = o.util.object.clone(this.coords);
                        if (this.type) {
                            for ("linear" === this.type ? t = e.createLinearGradient(r.x1, r.y1, r.x2, r.y2) : "radial" === this.type && (t = e.createRadialGradient(r.x1, r.y1, r.r1, r.x2, r.y2, r.r2)),
                            i = 0,
                            n = this.colorStops.length; i < n; i++) {
                                var a = this.colorStops[i].color
                                  , s = this.colorStops[i].opacity
                                  , l = this.colorStops[i].offset;
                                "undefined" !== typeof s && (a = new o.Color(a).setAlpha(s).toRgba()),
                                t.addColorStop(l, a)
                            }
                            return t
                        }
                    }
                }),
                o.util.object.extend(o.Gradient, {
                    fromElement: function(n, a, s, l) {
                        var c = parseFloat(s) / (/%$/.test(s) ? 100 : 1);
                        c = c < 0 ? 0 : c > 1 ? 1 : c,
                        isNaN(c) && (c = 1);
                        var d, u, p, h, m = n.getElementsByTagName("stop"), g = "userSpaceOnUse" === n.getAttribute("gradientUnits") ? "pixels" : "percentage", f = n.getAttribute("gradientTransform") || "", v = [], b = 0, y = 0;
                        for ("linearGradient" === n.nodeName || "LINEARGRADIENT" === n.nodeName ? (d = "linear",
                        u = t(n)) : (d = "radial",
                        u = i(n)),
                        p = m.length; p--; )
                            v.push(e(m[p], c));
                        h = o.parseTransformAttribute(f),
                        r(a, u, l, g),
                        "pixels" === g && (b = -a.left,
                        y = -a.top);
                        var w = new o.Gradient({
                            id: n.getAttribute("id"),
                            type: d,
                            coords: u,
                            colorStops: v,
                            gradientUnits: g,
                            gradientTransform: h,
                            offsetX: b,
                            offsetY: y
                        });
                        return w
                    },
                    forObject: function(e, t) {
                        return t || (t = {}),
                        r(e, t.coords, t.gradientUnits, {
                            viewBoxWidth: 100,
                            viewBoxHeight: 100
                        }),
                        new o.Gradient(t)
                    }
                })
            }(),
            function() {
                "use strict";
                var e = o.util.toFixed;
                o.Pattern = o.util.createClass({
                    repeat: "repeat",
                    offsetX: 0,
                    offsetY: 0,
                    crossOrigin: "",
                    patternTransform: null,
                    initialize: function(e, t) {
                        if (e || (e = {}),
                        this.id = o.Object.__uid++,
                        this.setOptions(e),
                        !e.source || e.source && "string" !== typeof e.source)
                            t && t(this);
                        else if ("undefined" !== typeof o.util.getFunctionBody(e.source))
                            this.source = new Function(o.util.getFunctionBody(e.source)),
                            t && t(this);
                        else {
                            var i = this;
                            this.source = o.util.createImage(),
                            o.util.loadImage(e.source, (function(e) {
                                i.source = e,
                                t && t(i)
                            }
                            ), null, this.crossOrigin)
                        }
                    },
                    toObject: function(t) {
                        var i, n, r = o.Object.NUM_FRACTION_DIGITS;
                        return "function" === typeof this.source ? i = String(this.source) : "string" === typeof this.source.src ? i = this.source.src : "object" === typeof this.source && this.source.toDataURL && (i = this.source.toDataURL()),
                        n = {
                            type: "pattern",
                            source: i,
                            repeat: this.repeat,
                            crossOrigin: this.crossOrigin,
                            offsetX: e(this.offsetX, r),
                            offsetY: e(this.offsetY, r),
                            patternTransform: this.patternTransform ? this.patternTransform.concat() : null
                        },
                        o.util.populateWithProperties(this, n, t),
                        n
                    },
                    toSVG: function(e) {
                        var t = "function" === typeof this.source ? this.source() : this.source
                          , i = t.width / e.width
                          , n = t.height / e.height
                          , o = this.offsetX / e.width
                          , r = this.offsetY / e.height
                          , a = "";
                        return "repeat-x" !== this.repeat && "no-repeat" !== this.repeat || (n = 1,
                        r && (n += Math.abs(r))),
                        "repeat-y" !== this.repeat && "no-repeat" !== this.repeat || (i = 1,
                        o && (i += Math.abs(o))),
                        t.src ? a = t.src : t.toDataURL && (a = t.toDataURL()),
                        '<pattern id="SVGID_' + this.id + '" x="' + o + '" y="' + r + '" width="' + i + '" height="' + n + '">\n<image x="0" y="0" width="' + t.width + '" height="' + t.height + '" xlink:href="' + a + '"></image>\n</pattern>\n'
                    },
                    setOptions: function(e) {
                        for (var t in e)
                            this[t] = e[t]
                    },
                    toLive: function(e) {
                        var t = "function" === typeof this.source ? this.source() : this.source;
                        if (!t)
                            return "";
                        if ("undefined" !== typeof t.src) {
                            if (!t.complete)
                                return "";
                            if (0 === t.naturalWidth || 0 === t.naturalHeight)
                                return ""
                        }
                        return e.createPattern(t, this.repeat)
                    }
                })
            }(),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.util.toFixed;
                t.Shadow ? t.warn("fabric.Shadow is already defined.") : (t.Shadow = t.util.createClass({
                    color: "rgb(0,0,0)",
                    blur: 0,
                    offsetX: 0,
                    offsetY: 0,
                    affectStroke: !1,
                    includeDefaultValues: !0,
                    nonScaling: !1,
                    initialize: function(e) {
                        for (var i in "string" === typeof e && (e = this._parseShadow(e)),
                        e)
                            this[i] = e[i];
                        this.id = t.Object.__uid++
                    },
                    _parseShadow: function(e) {
                        var i = e.trim()
                          , n = t.Shadow.reOffsetsAndBlur.exec(i) || []
                          , o = i.replace(t.Shadow.reOffsetsAndBlur, "") || "rgb(0,0,0)";
                        return {
                            color: o.trim(),
                            offsetX: parseInt(n[1], 10) || 0,
                            offsetY: parseInt(n[2], 10) || 0,
                            blur: parseInt(n[3], 10) || 0
                        }
                    },
                    toString: function() {
                        return [this.offsetX, this.offsetY, this.blur, this.color].join("px ")
                    },
                    toSVG: function(e) {
                        var n = 40
                          , o = 40
                          , r = t.Object.NUM_FRACTION_DIGITS
                          , a = t.util.rotateVector({
                            x: this.offsetX,
                            y: this.offsetY
                        }, t.util.degreesToRadians(-e.angle))
                          , s = 20
                          , l = new t.Color(this.color);
                        return e.width && e.height && (n = 100 * i((Math.abs(a.x) + this.blur) / e.width, r) + s,
                        o = 100 * i((Math.abs(a.y) + this.blur) / e.height, r) + s),
                        e.flipX && (a.x *= -1),
                        e.flipY && (a.y *= -1),
                        '<filter id="SVGID_' + this.id + '" y="-' + o + '%" height="' + (100 + 2 * o) + '%" x="-' + n + '%" width="' + (100 + 2 * n) + '%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="' + i(this.blur ? this.blur / 2 : 0, r) + '"></feGaussianBlur>\n\t<feOffset dx="' + i(a.x, r) + '" dy="' + i(a.y, r) + '" result="oBlur" ></feOffset>\n\t<feFlood flood-color="' + l.toRgb() + '" flood-opacity="' + l.getAlpha() + '"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'
                    },
                    toObject: function() {
                        if (this.includeDefaultValues)
                            return {
                                color: this.color,
                                blur: this.blur,
                                offsetX: this.offsetX,
                                offsetY: this.offsetY,
                                affectStroke: this.affectStroke,
                                nonScaling: this.nonScaling
                            };
                        var e = {}
                          , i = t.Shadow.prototype;
                        return ["color", "blur", "offsetX", "offsetY", "affectStroke", "nonScaling"].forEach((function(t) {
                            this[t] !== i[t] && (e[t] = this[t])
                        }
                        ), this),
                        e
                    }
                }),
                t.Shadow.reOffsetsAndBlur = /(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)
            }(i),
            function() {
                "use strict";
                if (o.StaticCanvas)
                    o.warn("fabric.StaticCanvas is already defined.");
                else {
                    var e = o.util.object.extend
                      , t = o.util.getElementOffset
                      , i = o.util.removeFromArray
                      , n = o.util.toFixed
                      , r = o.util.transformPoint
                      , a = o.util.invertTransform
                      , s = o.util.getNodeCanvas
                      , l = o.util.createCanvasElement
                      , c = new Error("Could not initialize `canvas` element");
                    o.StaticCanvas = o.util.createClass(o.CommonMethods, {
                        initialize: function(e, t) {
                            t || (t = {}),
                            this.renderAndResetBound = this.renderAndReset.bind(this),
                            this.requestRenderAllBound = this.requestRenderAll.bind(this),
                            this._initStatic(e, t)
                        },
                        backgroundColor: "",
                        backgroundImage: null,
                        overlayColor: "",
                        overlayImage: null,
                        includeDefaultValues: !0,
                        stateful: !1,
                        renderOnAddRemove: !0,
                        clipTo: null,
                        controlsAboveOverlay: !1,
                        allowTouchScrolling: !1,
                        imageSmoothingEnabled: !0,
                        viewportTransform: o.iMatrix.concat(),
                        backgroundVpt: !0,
                        overlayVpt: !0,
                        onBeforeScaleRotate: function() {},
                        enableRetinaScaling: !0,
                        vptCoords: {},
                        skipOffscreen: !0,
                        clipPath: void 0,
                        _initStatic: function(e, t) {
                            var i = this.requestRenderAllBound;
                            this._objects = [],
                            this._createLowerCanvas(e),
                            this._initOptions(t),
                            this._setImageSmoothing(),
                            this.interactive || this._initRetinaScaling(),
                            t.overlayImage && this.setOverlayImage(t.overlayImage, i),
                            t.backgroundImage && this.setBackgroundImage(t.backgroundImage, i),
                            t.backgroundColor && this.setBackgroundColor(t.backgroundColor, i),
                            t.overlayColor && this.setOverlayColor(t.overlayColor, i),
                            this.calcOffset()
                        },
                        _isRetinaScaling: function() {
                            return 1 !== o.devicePixelRatio && this.enableRetinaScaling
                        },
                        getRetinaScaling: function() {
                            return this._isRetinaScaling() ? o.devicePixelRatio : 1
                        },
                        _initRetinaScaling: function() {
                            this._isRetinaScaling() && (this.lowerCanvasEl.setAttribute("width", this.width * o.devicePixelRatio),
                            this.lowerCanvasEl.setAttribute("height", this.height * o.devicePixelRatio),
                            this.contextContainer.scale(o.devicePixelRatio, o.devicePixelRatio))
                        },
                        calcOffset: function() {
                            return this._offset = t(this.lowerCanvasEl),
                            this
                        },
                        setOverlayImage: function(e, t, i) {
                            return this.__setBgOverlayImage("overlayImage", e, t, i)
                        },
                        setBackgroundImage: function(e, t, i) {
                            return this.__setBgOverlayImage("backgroundImage", e, t, i)
                        },
                        setOverlayColor: function(e, t) {
                            return this.__setBgOverlayColor("overlayColor", e, t)
                        },
                        setBackgroundColor: function(e, t) {
                            return this.__setBgOverlayColor("backgroundColor", e, t)
                        },
                        _setImageSmoothing: function() {
                            var e = this.getContext();
                            e.imageSmoothingEnabled = e.imageSmoothingEnabled || e.webkitImageSmoothingEnabled || e.mozImageSmoothingEnabled || e.msImageSmoothingEnabled || e.oImageSmoothingEnabled,
                            e.imageSmoothingEnabled = this.imageSmoothingEnabled
                        },
                        __setBgOverlayImage: function(e, t, i, n) {
                            return "string" === typeof t ? o.util.loadImage(t, (function(t) {
                                if (t) {
                                    var r = new o.Image(t,n);
                                    this[e] = r,
                                    r.canvas = this
                                }
                                i && i(t)
                            }
                            ), this, n && n.crossOrigin) : (n && t.setOptions(n),
                            this[e] = t,
                            t && (t.canvas = this),
                            i && i(t)),
                            this
                        },
                        __setBgOverlayColor: function(e, t, i) {
                            return this[e] = t,
                            this._initGradient(t, e),
                            this._initPattern(t, e, i),
                            this
                        },
                        _createCanvasElement: function() {
                            var e = l();
                            if (!e)
                                throw c;
                            if (e.style || (e.style = {}),
                            "undefined" === typeof e.getContext)
                                throw c;
                            return e
                        },
                        _initOptions: function(e) {
                            var t = this.lowerCanvasEl;
                            this._setOptions(e),
                            this.width = this.width || parseInt(t.width, 10) || 0,
                            this.height = this.height || parseInt(t.height, 10) || 0,
                            this.lowerCanvasEl.style && (t.width = this.width,
                            t.height = this.height,
                            t.style.width = this.width + "px",
                            t.style.height = this.height + "px",
                            this.viewportTransform = this.viewportTransform.slice())
                        },
                        _createLowerCanvas: function(e) {
                            e && e.getContext ? this.lowerCanvasEl = e : this.lowerCanvasEl = o.util.getById(e) || this._createCanvasElement(),
                            o.util.addClass(this.lowerCanvasEl, "lower-canvas"),
                            this.interactive && this._applyCanvasStyle(this.lowerCanvasEl),
                            this.contextContainer = this.lowerCanvasEl.getContext("2d")
                        },
                        getWidth: function() {
                            return this.width
                        },
                        getHeight: function() {
                            return this.height
                        },
                        setWidth: function(e, t) {
                            return this.setDimensions({
                                width: e
                            }, t)
                        },
                        setHeight: function(e, t) {
                            return this.setDimensions({
                                height: e
                            }, t)
                        },
                        setDimensions: function(e, t) {
                            var i;
                            for (var n in t = t || {},
                            e)
                                i = e[n],
                                t.cssOnly || (this._setBackstoreDimension(n, e[n]),
                                i += "px",
                                this.hasLostContext = !0),
                                t.backstoreOnly || this._setCssDimension(n, i);
                            return this._isCurrentlyDrawing && this.freeDrawingBrush && this.freeDrawingBrush._setBrushStyles(),
                            this._initRetinaScaling(),
                            this._setImageSmoothing(),
                            this.calcOffset(),
                            t.cssOnly || this.requestRenderAll(),
                            this
                        },
                        _setBackstoreDimension: function(e, t) {
                            return this.lowerCanvasEl[e] = t,
                            this.upperCanvasEl && (this.upperCanvasEl[e] = t),
                            this.cacheCanvasEl && (this.cacheCanvasEl[e] = t),
                            this[e] = t,
                            this
                        },
                        _setCssDimension: function(e, t) {
                            return this.lowerCanvasEl.style[e] = t,
                            this.upperCanvasEl && (this.upperCanvasEl.style[e] = t),
                            this.wrapperEl && (this.wrapperEl.style[e] = t),
                            this
                        },
                        getZoom: function() {
                            return this.viewportTransform[0]
                        },
                        setViewportTransform: function(e) {
                            var t, i, n, o = this._activeObject, r = !1, a = !0;
                            for (this.viewportTransform = e,
                            i = 0,
                            n = this._objects.length; i < n; i++)
                                t = this._objects[i],
                                t.group || t.setCoords(r, a);
                            return o && "activeSelection" === o.type && o.setCoords(r, a),
                            this.calcViewportBoundaries(),
                            this.renderOnAddRemove && this.requestRenderAll(),
                            this
                        },
                        zoomToPoint: function(e, t) {
                            var i = e
                              , n = this.viewportTransform.slice(0);
                            e = r(e, a(this.viewportTransform)),
                            n[0] = t,
                            n[3] = t;
                            var o = r(e, n);
                            return n[4] += i.x - o.x,
                            n[5] += i.y - o.y,
                            this.setViewportTransform(n)
                        },
                        setZoom: function(e) {
                            return this.zoomToPoint(new o.Point(0,0), e),
                            this
                        },
                        absolutePan: function(e) {
                            var t = this.viewportTransform.slice(0);
                            return t[4] = -e.x,
                            t[5] = -e.y,
                            this.setViewportTransform(t)
                        },
                        relativePan: function(e) {
                            return this.absolutePan(new o.Point(-e.x - this.viewportTransform[4],-e.y - this.viewportTransform[5]))
                        },
                        getElement: function() {
                            return this.lowerCanvasEl
                        },
                        _onObjectAdded: function(e) {
                            this.stateful && e.setupState(),
                            e._set("canvas", this),
                            e.setCoords(),
                            this.fire("object:added", {
                                target: e
                            }),
                            e.fire("added")
                        },
                        _onObjectRemoved: function(e) {
                            this.fire("object:removed", {
                                target: e
                            }),
                            e.fire("removed"),
                            delete e.canvas
                        },
                        clearContext: function(e) {
                            return e.clearRect(0, 0, this.width, this.height),
                            this
                        },
                        getContext: function() {
                            return this.contextContainer
                        },
                        clear: function() {
                            return this._objects.length = 0,
                            this.backgroundImage = null,
                            this.overlayImage = null,
                            this.backgroundColor = "",
                            this.overlayColor = "",
                            this._hasITextHandlers && (this.off("mouse:up", this._mouseUpITextHandler),
                            this._iTextInstances = null,
                            this._hasITextHandlers = !1),
                            this.clearContext(this.contextContainer),
                            this.fire("canvas:cleared"),
                            this.renderOnAddRemove && this.requestRenderAll(),
                            this
                        },
                        renderAll: function() {
                            var e = this.contextContainer;
                            return this.renderCanvas(e, this._objects),
                            this
                        },
                        renderAndReset: function() {
                            this.isRendering = 0,
                            this.renderAll()
                        },
                        requestRenderAll: function() {
                            return this.isRendering || (this.isRendering = o.util.requestAnimFrame(this.renderAndResetBound)),
                            this
                        },
                        calcViewportBoundaries: function() {
                            var e = {}
                              , t = this.width
                              , i = this.height
                              , n = a(this.viewportTransform);
                            return e.tl = r({
                                x: 0,
                                y: 0
                            }, n),
                            e.br = r({
                                x: t,
                                y: i
                            }, n),
                            e.tr = new o.Point(e.br.x,e.tl.y),
                            e.bl = new o.Point(e.tl.x,e.br.y),
                            this.vptCoords = e,
                            e
                        },
                        cancelRequestedRender: function() {
                            this.isRendering && (o.util.cancelAnimFrame(this.isRendering),
                            this.isRendering = 0)
                        },
                        renderCanvas: function(e, t) {
                            var i = this.viewportTransform
                              , n = this.clipPath;
                            this.cancelRequestedRender(),
                            this.calcViewportBoundaries(),
                            this.clearContext(e),
                            this.fire("before:render", {
                                ctx: e
                            }),
                            this.clipTo && o.util.clipContext(this, e),
                            this._renderBackground(e),
                            e.save(),
                            e.transform(i[0], i[1], i[2], i[3], i[4], i[5]),
                            this._renderObjects(e, t),
                            e.restore(),
                            !this.controlsAboveOverlay && this.interactive && this.drawControls(e),
                            this.clipTo && e.restore(),
                            n && (n.canvas = this,
                            n.shouldCache(),
                            n._transformDone = !0,
                            n.renderCache({
                                forClipping: !0
                            }),
                            this.drawClipPathOnCanvas(e)),
                            this._renderOverlay(e),
                            this.controlsAboveOverlay && this.interactive && this.drawControls(e),
                            this.fire("after:render", {
                                ctx: e
                            })
                        },
                        drawClipPathOnCanvas: function(e) {
                            var t = this.viewportTransform
                              , i = this.clipPath;
                            e.save(),
                            e.transform(t[0], t[1], t[2], t[3], t[4], t[5]),
                            e.globalCompositeOperation = "destination-in",
                            i.transform(e),
                            e.scale(1 / i.zoomX, 1 / i.zoomY),
                            e.drawImage(i._cacheCanvas, -i.cacheTranslationX, -i.cacheTranslationY),
                            e.restore()
                        },
                        _renderObjects: function(e, t) {
                            var i, n;
                            for (i = 0,
                            n = t.length; i < n; ++i)
                                t[i] && t[i].render(e)
                        },
                        _renderBackgroundOrOverlay: function(e, t) {
                            var i = this[t + "Color"]
                              , n = this[t + "Image"]
                              , o = this.viewportTransform
                              , r = this[t + "Vpt"];
                            if (i || n) {
                                if (i) {
                                    e.save(),
                                    e.beginPath(),
                                    e.moveTo(0, 0),
                                    e.lineTo(this.width, 0),
                                    e.lineTo(this.width, this.height),
                                    e.lineTo(0, this.height),
                                    e.closePath(),
                                    e.fillStyle = i.toLive ? i.toLive(e, this) : i,
                                    r && e.transform(o[0], o[1], o[2], o[3], o[4] + (i.offsetX || 0), o[5] + (i.offsetY || 0));
                                    var a = i.gradientTransform || i.patternTransform;
                                    a && e.transform(a[0], a[1], a[2], a[3], a[4], a[5]),
                                    e.fill(),
                                    e.restore()
                                }
                                n && (e.save(),
                                r && e.transform(o[0], o[1], o[2], o[3], o[4], o[5]),
                                n.render(e),
                                e.restore())
                            }
                        },
                        _renderBackground: function(e) {
                            this._renderBackgroundOrOverlay(e, "background")
                        },
                        _renderOverlay: function(e) {
                            this._renderBackgroundOrOverlay(e, "overlay")
                        },
                        getCenter: function() {
                            return {
                                top: this.height / 2,
                                left: this.width / 2
                            }
                        },
                        centerObjectH: function(e) {
                            return this._centerObject(e, new o.Point(this.getCenter().left,e.getCenterPoint().y))
                        },
                        centerObjectV: function(e) {
                            return this._centerObject(e, new o.Point(e.getCenterPoint().x,this.getCenter().top))
                        },
                        centerObject: function(e) {
                            var t = this.getCenter();
                            return this._centerObject(e, new o.Point(t.left,t.top))
                        },
                        viewportCenterObject: function(e) {
                            var t = this.getVpCenter();
                            return this._centerObject(e, t)
                        },
                        viewportCenterObjectH: function(e) {
                            var t = this.getVpCenter();
                            return this._centerObject(e, new o.Point(t.x,e.getCenterPoint().y)),
                            this
                        },
                        viewportCenterObjectV: function(e) {
                            var t = this.getVpCenter();
                            return this._centerObject(e, new o.Point(e.getCenterPoint().x,t.y))
                        },
                        getVpCenter: function() {
                            var e = this.getCenter()
                              , t = a(this.viewportTransform);
                            return r({
                                x: e.left,
                                y: e.top
                            }, t)
                        },
                        _centerObject: function(e, t) {
                            return e.setPositionByOrigin(t, "center", "center"),
                            e.setCoords(),
                            this.renderOnAddRemove && this.requestRenderAll(),
                            this
                        },
                        toDatalessJSON: function(e) {
                            return this.toDatalessObject(e)
                        },
                        toObject: function(e) {
                            return this._toObjectMethod("toObject", e)
                        },
                        toDatalessObject: function(e) {
                            return this._toObjectMethod("toDatalessObject", e)
                        },
                        _toObjectMethod: function(t, i) {
                            var n = this.clipPath
                              , r = {
                                version: o.version,
                                objects: this._toObjects(t, i)
                            };
                            return n && (r.clipPath = this._toObject(this.clipPath, t, i)),
                            e(r, this.__serializeBgOverlay(t, i)),
                            o.util.populateWithProperties(this, r, i),
                            r
                        },
                        _toObjects: function(e, t) {
                            return this._objects.filter((function(e) {
                                return !e.excludeFromExport
                            }
                            )).map((function(i) {
                                return this._toObject(i, e, t)
                            }
                            ), this)
                        },
                        _toObject: function(e, t, i) {
                            var n;
                            this.includeDefaultValues || (n = e.includeDefaultValues,
                            e.includeDefaultValues = !1);
                            var o = e[t](i);
                            return this.includeDefaultValues || (e.includeDefaultValues = n),
                            o
                        },
                        __serializeBgOverlay: function(e, t) {
                            var i = {}
                              , n = this.backgroundImage
                              , o = this.overlayImage;
                            return this.backgroundColor && (i.background = this.backgroundColor.toObject ? this.backgroundColor.toObject(t) : this.backgroundColor),
                            this.overlayColor && (i.overlay = this.overlayColor.toObject ? this.overlayColor.toObject(t) : this.overlayColor),
                            n && !n.excludeFromExport && (i.backgroundImage = this._toObject(n, e, t)),
                            o && !o.excludeFromExport && (i.overlayImage = this._toObject(o, e, t)),
                            i
                        },
                        svgViewportTransformation: !0,
                        toSVG: function(e, t) {
                            e || (e = {}),
                            e.reviver = t;
                            var i = [];
                            return this._setSVGPreamble(i, e),
                            this._setSVGHeader(i, e),
                            this.clipPath && i.push('<g clip-path="url(#' + this.clipPath.clipPathId + ')" >\n'),
                            this._setSVGBgOverlayColor(i, "background"),
                            this._setSVGBgOverlayImage(i, "backgroundImage", t),
                            this._setSVGObjects(i, t),
                            this.clipPath && i.push("</g>\n"),
                            this._setSVGBgOverlayColor(i, "overlay"),
                            this._setSVGBgOverlayImage(i, "overlayImage", t),
                            i.push("</svg>"),
                            i.join("")
                        },
                        _setSVGPreamble: function(e, t) {
                            t.suppressPreamble || e.push('<?xml version="1.0" encoding="', t.encoding || "UTF-8", '" standalone="no" ?>\n', '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ', '"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')
                        },
                        _setSVGHeader: function(e, t) {
                            var i, r = t.width || this.width, a = t.height || this.height, s = 'viewBox="0 0 ' + this.width + " " + this.height + '" ', l = o.Object.NUM_FRACTION_DIGITS;
                            t.viewBox ? s = 'viewBox="' + t.viewBox.x + " " + t.viewBox.y + " " + t.viewBox.width + " " + t.viewBox.height + '" ' : this.svgViewportTransformation && (i = this.viewportTransform,
                            s = 'viewBox="' + n(-i[4] / i[0], l) + " " + n(-i[5] / i[3], l) + " " + n(this.width / i[0], l) + " " + n(this.height / i[3], l) + '" '),
                            e.push("<svg ", 'xmlns="http://www.w3.org/2000/svg" ', 'xmlns:xlink="http://www.w3.org/1999/xlink" ', 'version="1.1" ', 'width="', r, '" ', 'height="', a, '" ', s, 'xml:space="preserve">\n', "<desc>Created with Fabric.js ", o.version, "</desc>\n", "<defs>\n", this.createSVGFontFacesMarkup(), this.createSVGRefElementsMarkup(), this.createSVGClipPathMarkup(t), "</defs>\n")
                        },
                        createSVGClipPathMarkup: function(e) {
                            var t = this.clipPath;
                            return t ? (t.clipPathId = "CLIPPATH_" + o.Object.__uid++,
                            '<clipPath id="' + t.clipPathId + '" >\n' + this.clipPath.toClipPathSVG(e.reviver) + "</clipPath>\n") : ""
                        },
                        createSVGRefElementsMarkup: function() {
                            var e = this
                              , t = ["background", "overlay"].map((function(t) {
                                var i = e[t + "Color"];
                                if (i && i.toLive) {
                                    var n = e[t + "Vpt"]
                                      , r = e.viewportTransform
                                      , a = {
                                        width: e.width / (n ? r[0] : 1),
                                        height: e.height / (n ? r[3] : 1)
                                    };
                                    return i.toSVG(a, {
                                        additionalTransform: n ? o.util.matrixToSVG(r) : ""
                                    })
                                }
                            }
                            ));
                            return t.join("")
                        },
                        createSVGFontFacesMarkup: function() {
                            var e, t, i, n, r, a, s, l, c, d = "", u = {}, p = o.fontPaths, h = this._objects;
                            for (l = 0,
                            c = h.length; l < c; l++)
                                if (e = h[l],
                                t = e.fontFamily,
                                -1 !== e.type.indexOf("text") && !u[t] && p[t] && (u[t] = !0,
                                e.styles))
                                    for (r in i = e.styles,
                                    i)
                                        for (s in n = i[r],
                                        n)
                                            a = n[s],
                                            t = a.fontFamily,
                                            !u[t] && p[t] && (u[t] = !0);
                            for (var m in u)
                                d += ["\t\t@font-face {\n", "\t\t\tfont-family: '", m, "';\n", "\t\t\tsrc: url('", p[m], "');\n", "\t\t}\n"].join("");
                            return d && (d = ['\t<style type="text/css">', "<![CDATA[\n", d, "]]>", "</style>\n"].join("")),
                            d
                        },
                        _setSVGObjects: function(e, t) {
                            var i, n, o, r = this._objects;
                            for (n = 0,
                            o = r.length; n < o; n++)
                                i = r[n],
                                i.excludeFromExport || this._setSVGObject(e, i, t)
                        },
                        _setSVGObject: function(e, t, i) {
                            e.push(t.toSVG(i))
                        },
                        _setSVGBgOverlayImage: function(e, t, i) {
                            this[t] && !this[t].excludeFromExport && this[t].toSVG && e.push(this[t].toSVG(i))
                        },
                        _setSVGBgOverlayColor: function(e, t) {
                            var i = this[t + "Color"]
                              , n = this.viewportTransform
                              , r = this.width
                              , a = this.height;
                            if (i)
                                if (i.toLive) {
                                    var s = i.repeat
                                      , l = o.util.invertTransform(n)
                                      , c = this[t + "Vpt"]
                                      , d = c ? o.util.matrixToSVG(l) : "";
                                    e.push('<rect transform="' + d + " translate(", r / 2, ",", a / 2, ')"', ' x="', i.offsetX - r / 2, '" y="', i.offsetY - a / 2, '" ', 'width="', "repeat-y" === s || "no-repeat" === s ? i.source.width : r, '" height="', "repeat-x" === s || "no-repeat" === s ? i.source.height : a, '" fill="url(#SVGID_' + i.id + ')"', "></rect>\n")
                                } else
                                    e.push('<rect x="0" y="0" width="100%" height="100%" ', 'fill="', i, '"', "></rect>\n")
                        },
                        sendToBack: function(e) {
                            if (!e)
                                return this;
                            var t, n, o, r = this._activeObject;
                            if (e === r && "activeSelection" === e.type)
                                for (o = r._objects,
                                t = o.length; t--; )
                                    n = o[t],
                                    i(this._objects, n),
                                    this._objects.unshift(n);
                            else
                                i(this._objects, e),
                                this._objects.unshift(e);
                            return this.renderOnAddRemove && this.requestRenderAll(),
                            this
                        },
                        bringToFront: function(e) {
                            if (!e)
                                return this;
                            var t, n, o, r = this._activeObject;
                            if (e === r && "activeSelection" === e.type)
                                for (o = r._objects,
                                t = 0; t < o.length; t++)
                                    n = o[t],
                                    i(this._objects, n),
                                    this._objects.push(n);
                            else
                                i(this._objects, e),
                                this._objects.push(e);
                            return this.renderOnAddRemove && this.requestRenderAll(),
                            this
                        },
                        sendBackwards: function(e, t) {
                            if (!e)
                                return this;
                            var n, o, r, a, s, l = this._activeObject, c = 0;
                            if (e === l && "activeSelection" === e.type)
                                for (s = l._objects,
                                n = 0; n < s.length; n++)
                                    o = s[n],
                                    r = this._objects.indexOf(o),
                                    r > 0 + c && (a = r - 1,
                                    i(this._objects, o),
                                    this._objects.splice(a, 0, o)),
                                    c++;
                            else
                                r = this._objects.indexOf(e),
                                0 !== r && (a = this._findNewLowerIndex(e, r, t),
                                i(this._objects, e),
                                this._objects.splice(a, 0, e));
                            return this.renderOnAddRemove && this.requestRenderAll(),
                            this
                        },
                        _findNewLowerIndex: function(e, t, i) {
                            var n, o;
                            if (i)
                                for (n = t,
                                o = t - 1; o >= 0; --o) {
                                    var r = e.intersectsWithObject(this._objects[o]) || e.isContainedWithinObject(this._objects[o]) || this._objects[o].isContainedWithinObject(e);
                                    if (r) {
                                        n = o;
                                        break
                                    }
                                }
                            else
                                n = t - 1;
                            return n
                        },
                        bringForward: function(e, t) {
                            if (!e)
                                return this;
                            var n, o, r, a, s, l = this._activeObject, c = 0;
                            if (e === l && "activeSelection" === e.type)
                                for (s = l._objects,
                                n = s.length; n--; )
                                    o = s[n],
                                    r = this._objects.indexOf(o),
                                    r < this._objects.length - 1 - c && (a = r + 1,
                                    i(this._objects, o),
                                    this._objects.splice(a, 0, o)),
                                    c++;
                            else
                                r = this._objects.indexOf(e),
                                r !== this._objects.length - 1 && (a = this._findNewUpperIndex(e, r, t),
                                i(this._objects, e),
                                this._objects.splice(a, 0, e));
                            return this.renderOnAddRemove && this.requestRenderAll(),
                            this
                        },
                        _findNewUpperIndex: function(e, t, i) {
                            var n, o, r;
                            if (i)
                                for (n = t,
                                o = t + 1,
                                r = this._objects.length; o < r; ++o) {
                                    var a = e.intersectsWithObject(this._objects[o]) || e.isContainedWithinObject(this._objects[o]) || this._objects[o].isContainedWithinObject(e);
                                    if (a) {
                                        n = o;
                                        break
                                    }
                                }
                            else
                                n = t + 1;
                            return n
                        },
                        moveTo: function(e, t) {
                            return i(this._objects, e),
                            this._objects.splice(t, 0, e),
                            this.renderOnAddRemove && this.requestRenderAll()
                        },
                        dispose: function() {
                            return this.isRendering && (o.util.cancelAnimFrame(this.isRendering),
                            this.isRendering = 0),
                            this.forEachObject((function(e) {
                                e.dispose && e.dispose()
                            }
                            )),
                            this._objects = [],
                            this.backgroundImage && this.backgroundImage.dispose && this.backgroundImage.dispose(),
                            this.backgroundImage = null,
                            this.overlayImage && this.overlayImage.dispose && this.overlayImage.dispose(),
                            this.overlayImage = null,
                            this._iTextInstances = null,
                            this.contextContainer = null,
                            o.util.cleanUpJsdomNode(this.lowerCanvasEl),
                            this.lowerCanvasEl = void 0,
                            this
                        },
                        toString: function() {
                            return "#<fabric.Canvas (" + this.complexity() + "): { objects: " + this._objects.length + " }>"
                        }
                    }),
                    e(o.StaticCanvas.prototype, o.Observable),
                    e(o.StaticCanvas.prototype, o.Collection),
                    e(o.StaticCanvas.prototype, o.DataURLExporter),
                    e(o.StaticCanvas, {
                        EMPTY_JSON: '{"objects": [], "background": "white"}',
                        supports: function(e) {
                            var t = l();
                            if (!t || !t.getContext)
                                return null;
                            var i = t.getContext("2d");
                            if (!i)
                                return null;
                            switch (e) {
                            case "setLineDash":
                                return "undefined" !== typeof i.setLineDash;
                            default:
                                return null
                            }
                        }
                    }),
                    o.StaticCanvas.prototype.toJSON = o.StaticCanvas.prototype.toObject,
                    o.isLikelyNode && (o.StaticCanvas.prototype.createPNGStream = function() {
                        var e = s(this.lowerCanvasEl);
                        return e && e.createPNGStream()
                    }
                    ,
                    o.StaticCanvas.prototype.createJPEGStream = function(e) {
                        var t = s(this.lowerCanvasEl);
                        return t && t.createJPEGStream(e)
                    }
                    )
                }
            }(),
            o.BaseBrush = o.util.createClass({
                color: "rgb(0, 0, 0)",
                width: 1,
                shadow: null,
                strokeLineCap: "round",
                strokeLineJoin: "round",
                strokeMiterLimit: 10,
                strokeDashArray: null,
                setShadow: function(e) {
                    return this.shadow = new o.Shadow(e),
                    this
                },
                _setBrushStyles: function() {
                    var e = this.canvas.contextTop;
                    e.strokeStyle = this.color,
                    e.lineWidth = this.width,
                    e.lineCap = this.strokeLineCap,
                    e.miterLimit = this.strokeMiterLimit,
                    e.lineJoin = this.strokeLineJoin,
                    o.StaticCanvas.supports("setLineDash") && e.setLineDash(this.strokeDashArray || [])
                },
                _saveAndTransform: function(e) {
                    var t = this.canvas.viewportTransform;
                    e.save(),
                    e.transform(t[0], t[1], t[2], t[3], t[4], t[5])
                },
                _setShadow: function() {
                    if (this.shadow) {
                        var e = this.canvas.contextTop
                          , t = this.canvas.getZoom();
                        e.shadowColor = this.shadow.color,
                        e.shadowBlur = this.shadow.blur * t,
                        e.shadowOffsetX = this.shadow.offsetX * t,
                        e.shadowOffsetY = this.shadow.offsetY * t
                    }
                },
                needsFullRender: function() {
                    var e = new o.Color(this.color);
                    return e.getAlpha() < 1 || !!this.shadow
                },
                _resetShadow: function() {
                    var e = this.canvas.contextTop;
                    e.shadowColor = "",
                    e.shadowBlur = e.shadowOffsetX = e.shadowOffsetY = 0
                }
            }),
            function() {
                o.PencilBrush = o.util.createClass(o.BaseBrush, {
                    decimate: .4,
                    initialize: function(e) {
                        this.canvas = e,
                        this._points = []
                    },
                    _drawSegment: function(e, t, i) {
                        var n = t.midPointFrom(i);
                        return e.quadraticCurveTo(t.x, t.y, n.x, n.y),
                        n
                    },
                    onMouseDown: function(e, t) {
                        this.canvas._isMainEvent(t.e) && (this._prepareForDrawing(e),
                        this._captureDrawingPath(e),
                        this._render())
                    },
                    onMouseMove: function(e, t) {
                        if (this.canvas._isMainEvent(t.e) && this._captureDrawingPath(e) && this._points.length > 1)
                            if (this.needsFullRender())
                                this.canvas.clearContext(this.canvas.contextTop),
                                this._render();
                            else {
                                var i = this._points
                                  , n = i.length
                                  , o = this.canvas.contextTop;
                                this._saveAndTransform(o),
                                this.oldEnd && (o.beginPath(),
                                o.moveTo(this.oldEnd.x, this.oldEnd.y)),
                                this.oldEnd = this._drawSegment(o, i[n - 2], i[n - 1], !0),
                                o.stroke(),
                                o.restore()
                            }
                    },
                    onMouseUp: function(e) {
                        return !this.canvas._isMainEvent(e.e) || (this.oldEnd = void 0,
                        this._finalizeAndAddPath(),
                        !1)
                    },
                    _prepareForDrawing: function(e) {
                        var t = new o.Point(e.x,e.y);
                        this._reset(),
                        this._addPoint(t),
                        this.canvas.contextTop.moveTo(t.x, t.y)
                    },
                    _addPoint: function(e) {
                        return !(this._points.length > 1 && e.eq(this._points[this._points.length - 1])) && (this._points.push(e),
                        !0)
                    },
                    _reset: function() {
                        this._points = [],
                        this._setBrushStyles(),
                        this._setShadow()
                    },
                    _captureDrawingPath: function(e) {
                        var t = new o.Point(e.x,e.y);
                        return this._addPoint(t)
                    },
                    _render: function() {
                        var e, t, i = this.canvas.contextTop, n = this._points[0], r = this._points[1];
                        if (this._saveAndTransform(i),
                        i.beginPath(),
                        2 === this._points.length && n.x === r.x && n.y === r.y) {
                            var a = this.width / 1e3;
                            n = new o.Point(n.x,n.y),
                            r = new o.Point(r.x,r.y),
                            n.x -= a,
                            r.x += a
                        }
                        for (i.moveTo(n.x, n.y),
                        e = 1,
                        t = this._points.length; e < t; e++)
                            this._drawSegment(i, n, r),
                            n = this._points[e],
                            r = this._points[e + 1];
                        i.lineTo(n.x, n.y),
                        i.stroke(),
                        i.restore()
                    },
                    convertPointsToSVGPath: function(e) {
                        var t, i = [], n = this.width / 1e3, r = new o.Point(e[0].x,e[0].y), a = new o.Point(e[1].x,e[1].y), s = e.length, l = 1, c = 0, d = s > 2;
                        for (d && (l = e[2].x < a.x ? -1 : e[2].x === a.x ? 0 : 1,
                        c = e[2].y < a.y ? -1 : e[2].y === a.y ? 0 : 1),
                        i.push("M ", r.x - l * n, " ", r.y - c * n, " "),
                        t = 1; t < s; t++) {
                            if (!r.eq(a)) {
                                var u = r.midPointFrom(a);
                                i.push("Q ", r.x, " ", r.y, " ", u.x, " ", u.y, " ")
                            }
                            r = e[t],
                            t + 1 < e.length && (a = e[t + 1])
                        }
                        return d && (l = r.x > e[t - 2].x ? 1 : r.x === e[t - 2].x ? 0 : -1,
                        c = r.y > e[t - 2].y ? 1 : r.y === e[t - 2].y ? 0 : -1),
                        i.push("L ", r.x + l * n, " ", r.y + c * n),
                        i
                    },
                    createPath: function(e) {
                        var t = new o.Path(e,{
                            fill: null,
                            stroke: this.color,
                            strokeWidth: this.width,
                            strokeLineCap: this.strokeLineCap,
                            strokeMiterLimit: this.strokeMiterLimit,
                            strokeLineJoin: this.strokeLineJoin,
                            strokeDashArray: this.strokeDashArray
                        });
                        return this.shadow && (this.shadow.affectStroke = !0,
                        t.setShadow(this.shadow)),
                        t
                    },
                    decimatePoints: function(e, t) {
                        if (e.length <= 2)
                            return e;
                        var i, n, r = this.canvas.getZoom(), a = Math.pow(t / r, 2), s = e.length - 1, l = e[0], c = [l];
                        for (i = 1; i < s; i++)
                            n = Math.pow(l.x - e[i].x, 2) + Math.pow(l.y - e[i].y, 2),
                            n >= a && (l = e[i],
                            c.push(l));
                        return 1 === c.length && c.push(new o.Point(c[0].x,c[0].y)),
                        c
                    },
                    _finalizeAndAddPath: function() {
                        var e = this.canvas.contextTop;
                        e.closePath(),
                        this.decimate && (this._points = this.decimatePoints(this._points, this.decimate));
                        var t = this.convertPointsToSVGPath(this._points).join("");
                        if ("M 0 0 Q 0 0 0 0 L 0 0" !== t) {
                            var i = this.createPath(t);
                            this.canvas.clearContext(this.canvas.contextTop),
                            this.canvas.add(i),
                            this.canvas.renderAll(),
                            i.setCoords(),
                            this._resetShadow(),
                            this.canvas.fire("path:created", {
                                path: i
                            })
                        } else
                            this.canvas.requestRenderAll()
                    }
                })
            }(),
            o.CircleBrush = o.util.createClass(o.BaseBrush, {
                width: 10,
                initialize: function(e) {
                    this.canvas = e,
                    this.points = []
                },
                drawDot: function(e) {
                    var t = this.addPoint(e)
                      , i = this.canvas.contextTop;
                    this._saveAndTransform(i),
                    this.dot(i, t),
                    i.restore()
                },
                dot: function(e, t) {
                    e.fillStyle = t.fill,
                    e.beginPath(),
                    e.arc(t.x, t.y, t.radius, 0, 2 * Math.PI, !1),
                    e.closePath(),
                    e.fill()
                },
                onMouseDown: function(e) {
                    this.points.length = 0,
                    this.canvas.clearContext(this.canvas.contextTop),
                    this._setShadow(),
                    this.drawDot(e)
                },
                _render: function() {
                    var e, t, i = this.canvas.contextTop, n = this.points;
                    for (this._saveAndTransform(i),
                    e = 0,
                    t = n.length; e < t; e++)
                        this.dot(i, n[e]);
                    i.restore()
                },
                onMouseMove: function(e) {
                    this.needsFullRender() ? (this.canvas.clearContext(this.canvas.contextTop),
                    this.addPoint(e),
                    this._render()) : this.drawDot(e)
                },
                onMouseUp: function() {
                    var e, t, i = this.canvas.renderOnAddRemove;
                    this.canvas.renderOnAddRemove = !1;
                    var n = [];
                    for (e = 0,
                    t = this.points.length; e < t; e++) {
                        var r = this.points[e]
                          , a = new o.Circle({
                            radius: r.radius,
                            left: r.x,
                            top: r.y,
                            originX: "center",
                            originY: "center",
                            fill: r.fill
                        });
                        this.shadow && a.setShadow(this.shadow),
                        n.push(a)
                    }
                    var s = new o.Group(n);
                    s.canvas = this.canvas,
                    this.canvas.add(s),
                    this.canvas.fire("path:created", {
                        path: s
                    }),
                    this.canvas.clearContext(this.canvas.contextTop),
                    this._resetShadow(),
                    this.canvas.renderOnAddRemove = i,
                    this.canvas.requestRenderAll()
                },
                addPoint: function(e) {
                    var t = new o.Point(e.x,e.y)
                      , i = o.util.getRandomInt(Math.max(0, this.width - 20), this.width + 20) / 2
                      , n = new o.Color(this.color).setAlpha(o.util.getRandomInt(0, 100) / 100).toRgba();
                    return t.radius = i,
                    t.fill = n,
                    this.points.push(t),
                    t
                }
            }),
            o.SprayBrush = o.util.createClass(o.BaseBrush, {
                width: 10,
                density: 20,
                dotWidth: 1,
                dotWidthVariance: 1,
                randomOpacity: !1,
                optimizeOverlapping: !0,
                initialize: function(e) {
                    this.canvas = e,
                    this.sprayChunks = []
                },
                onMouseDown: function(e) {
                    this.sprayChunks.length = 0,
                    this.canvas.clearContext(this.canvas.contextTop),
                    this._setShadow(),
                    this.addSprayChunk(e),
                    this.render(this.sprayChunkPoints)
                },
                onMouseMove: function(e) {
                    this.addSprayChunk(e),
                    this.render(this.sprayChunkPoints)
                },
                onMouseUp: function() {
                    var e = this.canvas.renderOnAddRemove;
                    this.canvas.renderOnAddRemove = !1;
                    for (var t = [], i = 0, n = this.sprayChunks.length; i < n; i++)
                        for (var r = this.sprayChunks[i], a = 0, s = r.length; a < s; a++) {
                            var l = new o.Rect({
                                width: r[a].width,
                                height: r[a].width,
                                left: r[a].x + 1,
                                top: r[a].y + 1,
                                originX: "center",
                                originY: "center",
                                fill: this.color
                            });
                            t.push(l)
                        }
                    this.optimizeOverlapping && (t = this._getOptimizedRects(t));
                    var c = new o.Group(t);
                    this.shadow && c.setShadow(this.shadow),
                    this.canvas.add(c),
                    this.canvas.fire("path:created", {
                        path: c
                    }),
                    this.canvas.clearContext(this.canvas.contextTop),
                    this._resetShadow(),
                    this.canvas.renderOnAddRemove = e,
                    this.canvas.requestRenderAll()
                },
                _getOptimizedRects: function(e) {
                    var t, i, n, o = {};
                    for (i = 0,
                    n = e.length; i < n; i++)
                        t = e[i].left + "" + e[i].top,
                        o[t] || (o[t] = e[i]);
                    var r = [];
                    for (t in o)
                        r.push(o[t]);
                    return r
                },
                render: function(e) {
                    var t, i, n = this.canvas.contextTop;
                    for (n.fillStyle = this.color,
                    this._saveAndTransform(n),
                    t = 0,
                    i = e.length; t < i; t++) {
                        var o = e[t];
                        "undefined" !== typeof o.opacity && (n.globalAlpha = o.opacity),
                        n.fillRect(o.x, o.y, o.width, o.width)
                    }
                    n.restore()
                },
                _render: function() {
                    var e, t, i = this.canvas.contextTop;
                    for (i.fillStyle = this.color,
                    this._saveAndTransform(i),
                    e = 0,
                    t = this.sprayChunks.length; e < t; e++)
                        this.render(this.sprayChunks[e]);
                    i.restore()
                },
                addSprayChunk: function(e) {
                    this.sprayChunkPoints = [];
                    var t, i, n, r, a = this.width / 2;
                    for (r = 0; r < this.density; r++) {
                        t = o.util.getRandomInt(e.x - a, e.x + a),
                        i = o.util.getRandomInt(e.y - a, e.y + a),
                        n = this.dotWidthVariance ? o.util.getRandomInt(Math.max(1, this.dotWidth - this.dotWidthVariance), this.dotWidth + this.dotWidthVariance) : this.dotWidth;
                        var s = new o.Point(t,i);
                        s.width = n,
                        this.randomOpacity && (s.opacity = o.util.getRandomInt(0, 100) / 100),
                        this.sprayChunkPoints.push(s)
                    }
                    this.sprayChunks.push(this.sprayChunkPoints)
                }
            }),
            o.PatternBrush = o.util.createClass(o.PencilBrush, {
                getPatternSrc: function() {
                    var e = 20
                      , t = 5
                      , i = o.util.createCanvasElement()
                      , n = i.getContext("2d");
                    return i.width = i.height = e + t,
                    n.fillStyle = this.color,
                    n.beginPath(),
                    n.arc(e / 2, e / 2, e / 2, 0, 2 * Math.PI, !1),
                    n.closePath(),
                    n.fill(),
                    i
                },
                getPatternSrcFunction: function() {
                    return String(this.getPatternSrc).replace("this.color", '"' + this.color + '"')
                },
                getPattern: function() {
                    return this.canvas.contextTop.createPattern(this.source || this.getPatternSrc(), "repeat")
                },
                _setBrushStyles: function() {
                    this.callSuper("_setBrushStyles"),
                    this.canvas.contextTop.strokeStyle = this.getPattern()
                },
                createPath: function(e) {
                    var t = this.callSuper("createPath", e)
                      , i = t._getLeftTopCoords().scalarAdd(t.strokeWidth / 2);
                    return t.stroke = new o.Pattern({
                        source: this.source || this.getPatternSrcFunction(),
                        offsetX: -i.x,
                        offsetY: -i.y
                    }),
                    t
                }
            }),
            function() {
                var e = o.util.getPointer
                  , t = o.util.degreesToRadians
                  , i = o.util.radiansToDegrees
                  , n = Math.atan2
                  , r = Math.abs
                  , a = o.StaticCanvas.supports("setLineDash")
                  , s = .5;
                for (var l in o.Canvas = o.util.createClass(o.StaticCanvas, {
                    initialize: function(e, t) {
                        t || (t = {}),
                        this.renderAndResetBound = this.renderAndReset.bind(this),
                        this.requestRenderAllBound = this.requestRenderAll.bind(this),
                        this._initStatic(e, t),
                        this._initInteractive(),
                        this._createCacheCanvas()
                    },
                    uniScaleTransform: !1,
                    uniScaleKey: "shiftKey",
                    centeredScaling: !1,
                    centeredRotation: !1,
                    centeredKey: "altKey",
                    altActionKey: "shiftKey",
                    interactive: !0,
                    selection: !0,
                    selectionKey: "shiftKey",
                    altSelectionKey: null,
                    selectionColor: "rgba(100, 100, 255, 0.3)",
                    selectionDashArray: [],
                    selectionBorderColor: "rgba(255, 255, 255, 0.3)",
                    selectionLineWidth: 1,
                    selectionFullyContained: !1,
                    hoverCursor: "move",
                    moveCursor: "move",
                    defaultCursor: "default",
                    freeDrawingCursor: "crosshair",
                    rotationCursor: "crosshair",
                    notAllowedCursor: "not-allowed",
                    containerClass: "canvas-container",
                    perPixelTargetFind: !1,
                    targetFindTolerance: 0,
                    skipTargetFind: !1,
                    isDrawingMode: !1,
                    preserveObjectStacking: !1,
                    snapAngle: 0,
                    snapThreshold: null,
                    stopContextMenu: !1,
                    fireRightClick: !1,
                    fireMiddleClick: !1,
                    _initInteractive: function() {
                        this._currentTransform = null,
                        this._groupSelector = null,
                        this._initWrapperElement(),
                        this._createUpperCanvas(),
                        this._initEventListeners(),
                        this._initRetinaScaling(),
                        this.freeDrawingBrush = o.PencilBrush && new o.PencilBrush(this),
                        this.calcOffset()
                    },
                    _chooseObjectsToRender: function() {
                        var e, t, i, n = this.getActiveObjects();
                        if (n.length > 0 && !this.preserveObjectStacking) {
                            t = [],
                            i = [];
                            for (var o = 0, r = this._objects.length; o < r; o++)
                                e = this._objects[o],
                                -1 === n.indexOf(e) ? t.push(e) : i.push(e);
                            n.length > 1 && (this._activeObject._objects = i),
                            t.push.apply(t, i)
                        } else
                            t = this._objects;
                        return t
                    },
                    renderAll: function() {
                        !this.contextTopDirty || this._groupSelector || this.isDrawingMode || (this.clearContext(this.contextTop),
                        this.contextTopDirty = !1),
                        this.hasLostContext && this.renderTopLayer(this.contextTop);
                        var e = this.contextContainer;
                        return this.renderCanvas(e, this._chooseObjectsToRender()),
                        this
                    },
                    renderTopLayer: function(e) {
                        e.save(),
                        this.isDrawingMode && this._isCurrentlyDrawing && (this.freeDrawingBrush && this.freeDrawingBrush._render(),
                        this.contextTopDirty = !0),
                        this.selection && this._groupSelector && (this._drawSelection(e),
                        this.contextTopDirty = !0),
                        e.restore()
                    },
                    renderTop: function() {
                        var e = this.contextTop;
                        return this.clearContext(e),
                        this.renderTopLayer(e),
                        this.fire("after:render"),
                        this
                    },
                    _resetCurrentTransform: function() {
                        var e = this._currentTransform;
                        e.target.set({
                            scaleX: e.original.scaleX,
                            scaleY: e.original.scaleY,
                            skewX: e.original.skewX,
                            skewY: e.original.skewY,
                            left: e.original.left,
                            top: e.original.top
                        }),
                        this._shouldCenterTransform(e.target) ? ("center" !== e.originX && ("right" === e.originX ? e.mouseXSign = -1 : e.mouseXSign = 1),
                        "center" !== e.originY && ("bottom" === e.originY ? e.mouseYSign = -1 : e.mouseYSign = 1),
                        e.originX = "center",
                        e.originY = "center") : (e.originX = e.original.originX,
                        e.originY = e.original.originY)
                    },
                    containsPoint: function(e, t, i) {
                        var n, o = !0, r = i || this.getPointer(e, o);
                        return n = t.group && t.group === this._activeObject && "activeSelection" === t.group.type ? this._normalizePointer(t.group, r) : {
                            x: r.x,
                            y: r.y
                        },
                        t.containsPoint(n) || t._findTargetCorner(r)
                    },
                    _normalizePointer: function(e, t) {
                        var i = e.calcTransformMatrix()
                          , n = o.util.invertTransform(i)
                          , r = this.restorePointerVpt(t);
                        return o.util.transformPoint(r, n)
                    },
                    isTargetTransparent: function(e, t, i) {
                        if (e.shouldCache() && e._cacheCanvas && e !== this._activeObject) {
                            var n = this._normalizePointer(e, {
                                x: t,
                                y: i
                            })
                              , r = Math.max(e.cacheTranslationX + n.x * e.zoomX, 0)
                              , a = Math.max(e.cacheTranslationY + n.y * e.zoomY, 0)
                              , s = o.util.isTransparent(e._cacheContext, Math.round(r), Math.round(a), this.targetFindTolerance);
                            return s
                        }
                        var l = this.contextCache
                          , c = e.selectionBackgroundColor
                          , d = this.viewportTransform;
                        e.selectionBackgroundColor = "",
                        this.clearContext(l),
                        l.save(),
                        l.transform(d[0], d[1], d[2], d[3], d[4], d[5]),
                        e.render(l),
                        l.restore(),
                        e === this._activeObject && e._renderControls(l, {
                            hasBorders: !1,
                            transparentCorners: !1
                        }, {
                            hasBorders: !1
                        }),
                        e.selectionBackgroundColor = c;
                        s = o.util.isTransparent(l, t, i, this.targetFindTolerance);
                        return s
                    },
                    _isSelectionKeyPressed: function(e) {
                        var t = !1;
                        return t = "[object Array]" === Object.prototype.toString.call(this.selectionKey) ? !!this.selectionKey.find((function(t) {
                            return !0 === e[t]
                        }
                        )) : e[this.selectionKey],
                        t
                    },
                    _shouldClearSelection: function(e, t) {
                        var i = this.getActiveObjects()
                          , n = this._activeObject;
                        return !t || t && n && i.length > 1 && -1 === i.indexOf(t) && n !== t && !this._isSelectionKeyPressed(e) || t && !t.evented || t && !t.selectable && n && n !== t
                    },
                    _shouldCenterTransform: function(e) {
                        if (e) {
                            var t, i = this._currentTransform;
                            return "scale" === i.action || "scaleX" === i.action || "scaleY" === i.action ? t = this.centeredScaling || e.centeredScaling : "rotate" === i.action && (t = this.centeredRotation || e.centeredRotation),
                            t ? !i.altKey : i.altKey
                        }
                    },
                    _getOriginFromCorner: function(e, t) {
                        var i = {
                            x: e.originX,
                            y: e.originY
                        };
                        return "ml" === t || "tl" === t || "bl" === t ? i.x = "right" : "mr" !== t && "tr" !== t && "br" !== t || (i.x = "left"),
                        "tl" === t || "mt" === t || "tr" === t ? i.y = "bottom" : "bl" !== t && "mb" !== t && "br" !== t || (i.y = "top"),
                        i
                    },
                    _getActionFromCorner: function(e, t, i) {
                        if (!t || !e)
                            return "drag";
                        switch (t) {
                        case "mtr":
                            return "rotate";
                        case "ml":
                        case "mr":
                            return i[this.altActionKey] ? "skewY" : "scaleX";
                        case "mt":
                        case "mb":
                            return i[this.altActionKey] ? "skewX" : "scaleY";
                        default:
                            return "scale"
                        }
                    },
                    _setupCurrentTransform: function(e, i, n) {
                        if (i) {
                            var r = this.getPointer(e)
                              , a = i._findTargetCorner(this.getPointer(e, !0))
                              , s = this._getActionFromCorner(n, a, e, i)
                              , l = this._getOriginFromCorner(i, a);
                            this._currentTransform = {
                                target: i,
                                action: s,
                                corner: a,
                                scaleX: i.scaleX,
                                scaleY: i.scaleY,
                                skewX: i.skewX,
                                skewY: i.skewY,
                                offsetX: r.x - i.left,
                                offsetY: r.y - i.top,
                                originX: l.x,
                                originY: l.y,
                                ex: r.x,
                                ey: r.y,
                                lastX: r.x,
                                lastY: r.y,
                                theta: t(i.angle),
                                width: i.width * i.scaleX,
                                mouseXSign: 1,
                                mouseYSign: 1,
                                shiftKey: e.shiftKey,
                                altKey: e[this.centeredKey],
                                original: o.util.saveObjectTransform(i)
                            },
                            this._currentTransform.original.originX = l.x,
                            this._currentTransform.original.originY = l.y,
                            this._resetCurrentTransform(),
                            this._beforeTransform(e)
                        }
                    },
                    _translateObject: function(e, t) {
                        var i = this._currentTransform
                          , n = i.target
                          , o = e - i.offsetX
                          , r = t - i.offsetY
                          , a = !n.get("lockMovementX") && n.left !== o
                          , s = !n.get("lockMovementY") && n.top !== r;
                        return a && n.set("left", o),
                        s && n.set("top", r),
                        a || s
                    },
                    _changeSkewTransformOrigin: function(e, t, i) {
                        var n = "originX"
                          , o = {
                            0: "center"
                        }
                          , r = t.target.skewX
                          , a = "left"
                          , s = "right"
                          , l = "mt" === t.corner || "ml" === t.corner ? 1 : -1
                          , c = 1;
                        e = e > 0 ? 1 : -1,
                        "y" === i && (r = t.target.skewY,
                        a = "top",
                        s = "bottom",
                        n = "originY"),
                        o[-1] = a,
                        o[1] = s,
                        t.target.flipX && (c *= -1),
                        t.target.flipY && (c *= -1),
                        0 === r ? (t.skewSign = -l * e * c,
                        t[n] = o[-e]) : (r = r > 0 ? 1 : -1,
                        t.skewSign = r,
                        t[n] = o[r * l * c])
                    },
                    _skewObject: function(e, t, i) {
                        var n = this._currentTransform
                          , r = n.target
                          , a = !1
                          , s = r.get("lockSkewingX")
                          , l = r.get("lockSkewingY");
                        if (s && "x" === i || l && "y" === i)
                            return !1;
                        var c, d, u = r.getCenterPoint(), p = r.toLocalPoint(new o.Point(e,t), "center", "center")[i], h = r.toLocalPoint(new o.Point(n.lastX,n.lastY), "center", "center")[i], m = r._getTransformedDimensions();
                        return this._changeSkewTransformOrigin(p - h, n, i),
                        c = r.toLocalPoint(new o.Point(e,t), n.originX, n.originY)[i],
                        d = r.translateToOriginPoint(u, n.originX, n.originY),
                        a = this._setObjectSkew(c, n, i, m),
                        n.lastX = e,
                        n.lastY = t,
                        r.setPositionByOrigin(d, n.originX, n.originY),
                        a
                    },
                    _setObjectSkew: function(e, t, i, n) {
                        var r, a, s, l, c, d, u, p, h, m = t.target, g = !1, f = t.skewSign;
                        return "x" === i ? (l = "y",
                        c = "Y",
                        d = "X",
                        p = 0,
                        h = m.skewY) : (l = "x",
                        c = "X",
                        d = "Y",
                        p = m.skewX,
                        h = 0),
                        s = m._getTransformedDimensions(p, h),
                        u = 2 * Math.abs(e) - s[i],
                        u <= 2 ? r = 0 : (r = f * Math.atan(u / m["scale" + d] / (s[l] / m["scale" + c])),
                        r = o.util.radiansToDegrees(r)),
                        g = m["skew" + d] !== r,
                        m.set("skew" + d, r),
                        0 !== m["skew" + c] && (a = m._getTransformedDimensions(),
                        r = n[l] / a[l] * m["scale" + c],
                        m.set("scale" + c, r)),
                        g
                    },
                    _scaleObject: function(e, t, i) {
                        var n = this._currentTransform
                          , r = n.target
                          , a = r.lockScalingX
                          , s = r.lockScalingY
                          , l = r.lockScalingFlip;
                        if (a && s)
                            return !1;
                        var c = r.translateToOriginPoint(r.getCenterPoint(), n.originX, n.originY)
                          , d = r.toLocalPoint(new o.Point(e,t), n.originX, n.originY)
                          , u = r._getTransformedDimensions()
                          , p = !1;
                        return this._setLocalMouse(d, n),
                        p = this._setObjectScale(d, n, a, s, i, l, u),
                        r.setPositionByOrigin(c, n.originX, n.originY),
                        p
                    },
                    _setObjectScale: function(e, t, i, n, r, a, s) {
                        var l = t.target
                          , c = !1
                          , d = !1
                          , u = !1
                          , p = e.x * l.scaleX / s.x
                          , h = e.y * l.scaleY / s.y
                          , m = l.scaleX !== p
                          , g = l.scaleY !== h;
                        if (t.newScaleX = p,
                        t.newScaleY = h,
                        "x" === r && l instanceof o.Textbox) {
                            var f = l.width * (e.x / s.x);
                            return f >= l.getMinWidth() && (u = f !== l.width,
                            l.set("width", f),
                            u)
                        }
                        return a && p <= 0 && p < l.scaleX && (c = !0,
                        e.x = 0),
                        a && h <= 0 && h < l.scaleY && (d = !0,
                        e.y = 0),
                        "equally" !== r || i || n ? r ? "x" !== r || l.get("lockUniScaling") ? "y" !== r || l.get("lockUniScaling") || d || n || l.set("scaleY", h) && (u = g) : c || i || l.set("scaleX", p) && (u = m) : (c || i || l.set("scaleX", p) && (u = u || m),
                        d || n || l.set("scaleY", h) && (u = u || g)) : u = this._scaleObjectEqually(e, l, t, s),
                        c || d || this._flipObject(t, r),
                        u
                    },
                    _scaleObjectEqually: function(e, t, i, n) {
                        var o, r, a, s = e.y + e.x, l = n.y * i.original.scaleY / t.scaleY + n.x * i.original.scaleX / t.scaleX, c = e.x < 0 ? -1 : 1, d = e.y < 0 ? -1 : 1;
                        return r = c * Math.abs(i.original.scaleX * s / l),
                        a = d * Math.abs(i.original.scaleY * s / l),
                        o = r !== t.scaleX || a !== t.scaleY,
                        t.set("scaleX", r),
                        t.set("scaleY", a),
                        o
                    },
                    _flipObject: function(e, t) {
                        e.newScaleX < 0 && "y" !== t && ("left" === e.originX ? e.originX = "right" : "right" === e.originX && (e.originX = "left")),
                        e.newScaleY < 0 && "x" !== t && ("top" === e.originY ? e.originY = "bottom" : "bottom" === e.originY && (e.originY = "top"))
                    },
                    _setLocalMouse: function(e, t) {
                        var i = t.target
                          , n = this.getZoom()
                          , o = i.padding / n;
                        "right" === t.originX ? e.x *= -1 : "center" === t.originX && (e.x *= 2 * t.mouseXSign,
                        e.x < 0 && (t.mouseXSign = -t.mouseXSign)),
                        "bottom" === t.originY ? e.y *= -1 : "center" === t.originY && (e.y *= 2 * t.mouseYSign,
                        e.y < 0 && (t.mouseYSign = -t.mouseYSign)),
                        r(e.x) > o ? e.x < 0 ? e.x += o : e.x -= o : e.x = 0,
                        r(e.y) > o ? e.y < 0 ? e.y += o : e.y -= o : e.y = 0
                    },
                    _rotateObject: function(e, t) {
                        var o = this._currentTransform
                          , r = o.target
                          , a = r.translateToOriginPoint(r.getCenterPoint(), o.originX, o.originY);
                        if (r.lockRotation)
                            return !1;
                        var s = n(o.ey - a.y, o.ex - a.x)
                          , l = n(t - a.y, e - a.x)
                          , c = i(l - s + o.theta)
                          , d = !0;
                        if (r.snapAngle > 0) {
                            var u = r.snapAngle
                              , p = r.snapThreshold || u
                              , h = Math.ceil(c / u) * u
                              , m = Math.floor(c / u) * u;
                            Math.abs(c - m) < p ? c = m : Math.abs(c - h) < p && (c = h)
                        }
                        return c < 0 && (c = 360 + c),
                        c %= 360,
                        r.angle === c ? d = !1 : (r.angle = c,
                        r.setPositionByOrigin(a, o.originX, o.originY)),
                        d
                    },
                    setCursor: function(e) {
                        this.upperCanvasEl.style.cursor = e
                    },
                    _drawSelection: function(e) {
                        var t = this._groupSelector
                          , i = t.left
                          , n = t.top
                          , l = r(i)
                          , c = r(n);
                        if (this.selectionColor && (e.fillStyle = this.selectionColor,
                        e.fillRect(t.ex - (i > 0 ? 0 : -i), t.ey - (n > 0 ? 0 : -n), l, c)),
                        this.selectionLineWidth && this.selectionBorderColor)
                            if (e.lineWidth = this.selectionLineWidth,
                            e.strokeStyle = this.selectionBorderColor,
                            this.selectionDashArray.length > 1 && !a) {
                                var d = t.ex + s - (i > 0 ? 0 : l)
                                  , u = t.ey + s - (n > 0 ? 0 : c);
                                e.beginPath(),
                                o.util.drawDashedLine(e, d, u, d + l, u, this.selectionDashArray),
                                o.util.drawDashedLine(e, d, u + c - 1, d + l, u + c - 1, this.selectionDashArray),
                                o.util.drawDashedLine(e, d, u, d, u + c, this.selectionDashArray),
                                o.util.drawDashedLine(e, d + l - 1, u, d + l - 1, u + c, this.selectionDashArray),
                                e.closePath(),
                                e.stroke()
                            } else
                                o.Object.prototype._setLineDash.call(this, e, this.selectionDashArray),
                                e.strokeRect(t.ex + s - (i > 0 ? 0 : l), t.ey + s - (n > 0 ? 0 : c), l, c)
                    },
                    findTarget: function(e, t) {
                        if (!this.skipTargetFind) {
                            var i, n, o = !0, r = this.getPointer(e, o), a = this._activeObject, s = this.getActiveObjects();
                            if (this.targets = [],
                            s.length > 1 && !t && a === this._searchPossibleTargets([a], r))
                                return a;
                            if (1 === s.length && a._findTargetCorner(r))
                                return a;
                            if (1 === s.length && a === this._searchPossibleTargets([a], r)) {
                                if (!this.preserveObjectStacking)
                                    return a;
                                i = a,
                                n = this.targets,
                                this.targets = []
                            }
                            var l = this._searchPossibleTargets(this._objects, r);
                            return e[this.altSelectionKey] && l && i && l !== i && (l = i,
                            this.targets = n),
                            l
                        }
                    },
                    _checkTarget: function(e, t, i) {
                        if (t && t.visible && t.evented && this.containsPoint(null, t, e)) {
                            if (!this.perPixelTargetFind && !t.perPixelTargetFind || t.isEditing)
                                return !0;
                            var n = this.isTargetTransparent(t, i.x, i.y);
                            if (!n)
                                return !0
                        }
                    },
                    _searchPossibleTargets: function(e, t) {
                        var i, n, r = e.length;
                        while (r--) {
                            var a = e[r]
                              , s = a.group && "activeSelection" !== a.group.type ? this._normalizePointer(a.group, t) : t;
                            if (this._checkTarget(s, a, t)) {
                                i = e[r],
                                i.subTargetCheck && i instanceof o.Group && (n = this._searchPossibleTargets(i._objects, t),
                                n && this.targets.push(n));
                                break
                            }
                        }
                        return i
                    },
                    restorePointerVpt: function(e) {
                        return o.util.transformPoint(e, o.util.invertTransform(this.viewportTransform))
                    },
                    getPointer: function(t, i) {
                        if (this._absolutePointer && !i)
                            return this._absolutePointer;
                        if (this._pointer && i)
                            return this._pointer;
                        var n, o = e(t), r = this.upperCanvasEl, a = r.getBoundingClientRect(), s = a.width || 0, l = a.height || 0;
                        return s && l || ("top"in a && "bottom"in a && (l = Math.abs(a.top - a.bottom)),
                        "right"in a && "left"in a && (s = Math.abs(a.right - a.left))),
                        this.calcOffset(),
                        o.x = o.x - this._offset.left,
                        o.y = o.y - this._offset.top,
                        i || (o = this.restorePointerVpt(o)),
                        n = 0 === s || 0 === l ? {
                            width: 1,
                            height: 1
                        } : {
                            width: r.width / s,
                            height: r.height / l
                        },
                        {
                            x: o.x * n.width,
                            y: o.y * n.height
                        }
                    },
                    _createUpperCanvas: function() {
                        var e = this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/, "");
                        this.upperCanvasEl ? this.upperCanvasEl.className = "" : this.upperCanvasEl = this._createCanvasElement(),
                        o.util.addClass(this.upperCanvasEl, "upper-canvas " + e),
                        this.wrapperEl.appendChild(this.upperCanvasEl),
                        this._copyCanvasStyle(this.lowerCanvasEl, this.upperCanvasEl),
                        this._applyCanvasStyle(this.upperCanvasEl),
                        this.contextTop = this.upperCanvasEl.getContext("2d")
                    },
                    _createCacheCanvas: function() {
                        this.cacheCanvasEl = this._createCanvasElement(),
                        this.cacheCanvasEl.setAttribute("width", this.width),
                        this.cacheCanvasEl.setAttribute("height", this.height),
                        this.contextCache = this.cacheCanvasEl.getContext("2d")
                    },
                    _initWrapperElement: function() {
                        this.wrapperEl = o.util.wrapElement(this.lowerCanvasEl, "div", {
                            class: this.containerClass
                        }),
                        o.util.setStyle(this.wrapperEl, {
                            width: this.width + "px",
                            height: this.height + "px",
                            position: "relative"
                        }),
                        o.util.makeElementUnselectable(this.wrapperEl)
                    },
                    _applyCanvasStyle: function(e) {
                        var t = this.width || e.width
                          , i = this.height || e.height;
                        o.util.setStyle(e, {
                            position: "absolute",
                            width: t + "px",
                            height: i + "px",
                            left: 0,
                            top: 0,
                            "touch-action": this.allowTouchScrolling ? "manipulation" : "none",
                            "-ms-touch-action": this.allowTouchScrolling ? "manipulation" : "none"
                        }),
                        e.width = t,
                        e.height = i,
                        o.util.makeElementUnselectable(e)
                    },
                    _copyCanvasStyle: function(e, t) {
                        t.style.cssText = e.style.cssText
                    },
                    getSelectionContext: function() {
                        return this.contextTop
                    },
                    getSelectionElement: function() {
                        return this.upperCanvasEl
                    },
                    getActiveObject: function() {
                        return this._activeObject
                    },
                    getActiveObjects: function() {
                        var e = this._activeObject;
                        return e ? "activeSelection" === e.type && e._objects ? e._objects.slice(0) : [e] : []
                    },
                    _onObjectRemoved: function(e) {
                        e === this._activeObject && (this.fire("before:selection:cleared", {
                            target: e
                        }),
                        this._discardActiveObject(),
                        this.fire("selection:cleared", {
                            target: e
                        }),
                        e.fire("deselected")),
                        this._hoveredTarget === e && (this._hoveredTarget = null),
                        this.callSuper("_onObjectRemoved", e)
                    },
                    _fireSelectionEvents: function(e, t) {
                        var i = !1
                          , n = this.getActiveObjects()
                          , o = []
                          , r = []
                          , a = {
                            e: t
                        };
                        e.forEach((function(e) {
                            -1 === n.indexOf(e) && (i = !0,
                            e.fire("deselected", a),
                            r.push(e))
                        }
                        )),
                        n.forEach((function(t) {
                            -1 === e.indexOf(t) && (i = !0,
                            t.fire("selected", a),
                            o.push(t))
                        }
                        )),
                        e.length > 0 && n.length > 0 ? (a.selected = o,
                        a.deselected = r,
                        a.updated = o[0] || r[0],
                        a.target = this._activeObject,
                        i && this.fire("selection:updated", a)) : n.length > 0 ? (1 === n.length && (a.target = o[0],
                        this.fire("object:selected", a)),
                        a.selected = o,
                        a.target = this._activeObject,
                        this.fire("selection:created", a)) : e.length > 0 && (a.deselected = r,
                        this.fire("selection:cleared", a))
                    },
                    setActiveObject: function(e, t) {
                        var i = this.getActiveObjects();
                        return this._setActiveObject(e, t),
                        this._fireSelectionEvents(i, t),
                        this
                    },
                    _setActiveObject: function(e, t) {
                        return this._activeObject !== e && (!!this._discardActiveObject(t, e) && (!e.onSelect({
                            e: t
                        }) && (this._activeObject = e,
                        !0)))
                    },
                    _discardActiveObject: function(e, t) {
                        var i = this._activeObject;
                        if (i) {
                            if (i.onDeselect({
                                e: e,
                                object: t
                            }))
                                return !1;
                            this._activeObject = null
                        }
                        return !0
                    },
                    discardActiveObject: function(e) {
                        var t = this.getActiveObjects()
                          , i = this.getActiveObject();
                        return t.length && this.fire("before:selection:cleared", {
                            target: i,
                            e: e
                        }),
                        this._discardActiveObject(e),
                        this._fireSelectionEvents(t, e),
                        this
                    },
                    dispose: function() {
                        var e = this.wrapperEl;
                        return this.removeListeners(),
                        e.removeChild(this.upperCanvasEl),
                        e.removeChild(this.lowerCanvasEl),
                        this.contextCache = null,
                        this.contextTop = null,
                        ["upperCanvasEl", "cacheCanvasEl"].forEach(function(e) {
                            o.util.cleanUpJsdomNode(this[e]),
                            this[e] = void 0
                        }
                        .bind(this)),
                        e.parentNode && e.parentNode.replaceChild(this.lowerCanvasEl, this.wrapperEl),
                        delete this.wrapperEl,
                        o.StaticCanvas.prototype.dispose.call(this),
                        this
                    },
                    clear: function() {
                        return this.discardActiveObject(),
                        this.clearContext(this.contextTop),
                        this.callSuper("clear")
                    },
                    drawControls: function(e) {
                        var t = this._activeObject;
                        t && t._renderControls(e)
                    },
                    _toObject: function(e, t, i) {
                        var n = this._realizeGroupTransformOnObject(e)
                          , o = this.callSuper("_toObject", e, t, i);
                        return this._unwindGroupTransformOnObject(e, n),
                        o
                    },
                    _realizeGroupTransformOnObject: function(e) {
                        if (e.group && "activeSelection" === e.group.type && this._activeObject === e.group) {
                            var t = ["angle", "flipX", "flipY", "left", "scaleX", "scaleY", "skewX", "skewY", "top"]
                              , i = {};
                            return t.forEach((function(t) {
                                i[t] = e[t]
                            }
                            )),
                            this._activeObject.realizeTransform(e),
                            i
                        }
                        return null
                    },
                    _unwindGroupTransformOnObject: function(e, t) {
                        t && e.set(t)
                    },
                    _setSVGObject: function(e, t, i) {
                        var n = this._realizeGroupTransformOnObject(t);
                        this.callSuper("_setSVGObject", e, t, i),
                        this._unwindGroupTransformOnObject(t, n)
                    },
                    setViewportTransform: function(e) {
                        this.renderOnAddRemove && this._activeObject && this._activeObject.isEditing && this._activeObject.clearContextTop(),
                        o.StaticCanvas.prototype.setViewportTransform.call(this, e)
                    }
                }),
                o.StaticCanvas)
                    "prototype" !== l && (o.Canvas[l] = o.StaticCanvas[l])
            }(),
            function() {
                var e = {
                    mt: 0,
                    tr: 1,
                    mr: 2,
                    br: 3,
                    mb: 4,
                    bl: 5,
                    ml: 6,
                    tl: 7
                }
                  , t = o.util.addListener
                  , i = o.util.removeListener
                  , n = 3
                  , r = 2
                  , a = 1
                  , s = {
                    passive: !1
                };
                function l(e, t) {
                    return e.button && e.button === t - 1
                }
                o.util.object.extend(o.Canvas.prototype, {
                    cursorMap: ["n-resize", "ne-resize", "e-resize", "se-resize", "s-resize", "sw-resize", "w-resize", "nw-resize"],
                    mainTouchId: null,
                    _initEventListeners: function() {
                        this.removeListeners(),
                        this._bindEvents(),
                        this.addOrRemove(t, "add")
                    },
                    _getEventPrefix: function() {
                        return this.enablePointerEvents ? "pointer" : "mouse"
                    },
                    addOrRemove: function(e, t) {
                        var i = this.upperCanvasEl
                          , n = this._getEventPrefix();
                        e(o.window, "resize", this._onResize),
                        e(i, n + "down", this._onMouseDown),
                        e(i, n + "move", this._onMouseMove, s),
                        e(i, n + "out", this._onMouseOut),
                        e(i, n + "enter", this._onMouseEnter),
                        e(i, "wheel", this._onMouseWheel),
                        e(i, "contextmenu", this._onContextMenu),
                        e(i, "dblclick", this._onDoubleClick),
                        e(i, "dragover", this._onDragOver),
                        e(i, "dragenter", this._onDragEnter),
                        e(i, "dragleave", this._onDragLeave),
                        e(i, "drop", this._onDrop),
                        this.enablePointerEvents || e(i, "touchstart", this._onTouchStart, s),
                        "undefined" !== typeof eventjs && t in eventjs && (eventjs[t](i, "gesture", this._onGesture),
                        eventjs[t](i, "drag", this._onDrag),
                        eventjs[t](i, "orientation", this._onOrientationChange),
                        eventjs[t](i, "shake", this._onShake),
                        eventjs[t](i, "longpress", this._onLongPress))
                    },
                    removeListeners: function() {
                        this.addOrRemove(i, "remove");
                        var e = this._getEventPrefix();
                        i(o.document, e + "up", this._onMouseUp),
                        i(o.document, "touchend", this._onTouchEnd, s),
                        i(o.document, e + "move", this._onMouseMove, s),
                        i(o.document, "touchmove", this._onMouseMove, s)
                    },
                    _bindEvents: function() {
                        this.eventsBound || (this._onMouseDown = this._onMouseDown.bind(this),
                        this._onTouchStart = this._onTouchStart.bind(this),
                        this._onMouseMove = this._onMouseMove.bind(this),
                        this._onMouseUp = this._onMouseUp.bind(this),
                        this._onTouchEnd = this._onTouchEnd.bind(this),
                        this._onResize = this._onResize.bind(this),
                        this._onGesture = this._onGesture.bind(this),
                        this._onDrag = this._onDrag.bind(this),
                        this._onShake = this._onShake.bind(this),
                        this._onLongPress = this._onLongPress.bind(this),
                        this._onOrientationChange = this._onOrientationChange.bind(this),
                        this._onMouseWheel = this._onMouseWheel.bind(this),
                        this._onMouseOut = this._onMouseOut.bind(this),
                        this._onMouseEnter = this._onMouseEnter.bind(this),
                        this._onContextMenu = this._onContextMenu.bind(this),
                        this._onDoubleClick = this._onDoubleClick.bind(this),
                        this._onDragOver = this._onDragOver.bind(this),
                        this._onDragEnter = this._simpleEventHandler.bind(this, "dragenter"),
                        this._onDragLeave = this._simpleEventHandler.bind(this, "dragleave"),
                        this._onDrop = this._simpleEventHandler.bind(this, "drop"),
                        this.eventsBound = !0)
                    },
                    _onGesture: function(e, t) {
                        this.__onTransformGesture && this.__onTransformGesture(e, t)
                    },
                    _onDrag: function(e, t) {
                        this.__onDrag && this.__onDrag(e, t)
                    },
                    _onMouseWheel: function(e) {
                        this.__onMouseWheel(e)
                    },
                    _onMouseOut: function(e) {
                        var t = this._hoveredTarget;
                        this.fire("mouse:out", {
                            target: t,
                            e: e
                        }),
                        this._hoveredTarget = null,
                        t && t.fire("mouseout", {
                            e: e
                        }),
                        this._iTextInstances && this._iTextInstances.forEach((function(e) {
                            e.isEditing && e.hiddenTextarea.focus()
                        }
                        ))
                    },
                    _onMouseEnter: function(e) {
                        this.currentTransform || this.findTarget(e) || (this.fire("mouse:over", {
                            target: null,
                            e: e
                        }),
                        this._hoveredTarget = null)
                    },
                    _onOrientationChange: function(e, t) {
                        this.__onOrientationChange && this.__onOrientationChange(e, t)
                    },
                    _onShake: function(e, t) {
                        this.__onShake && this.__onShake(e, t)
                    },
                    _onLongPress: function(e, t) {
                        this.__onLongPress && this.__onLongPress(e, t)
                    },
                    _onDragOver: function(e) {
                        e.preventDefault();
                        var t = this._simpleEventHandler("dragover", e);
                        this._fireEnterLeaveEvents(t, e)
                    },
                    _onContextMenu: function(e) {
                        return this.stopContextMenu && (e.stopPropagation(),
                        e.preventDefault()),
                        !1
                    },
                    _onDoubleClick: function(e) {
                        this._cacheTransformEventData(e),
                        this._handleEvent(e, "dblclick"),
                        this._resetTransformEventData(e)
                    },
                    getPointerId: function(e) {
                        var t = e.changedTouches;
                        return t ? t[0] && t[0].identifier : this.enablePointerEvents ? e.pointerId : -1
                    },
                    _isMainEvent: function(e) {
                        return !0 === e.isPrimary || !1 !== e.isPrimary && ("touchend" === e.type && 0 === e.touches.length || (!e.changedTouches || e.changedTouches[0].identifier === this.mainTouchId))
                    },
                    _onTouchStart: function(e) {
                        e.preventDefault(),
                        null === this.mainTouchId && (this.mainTouchId = this.getPointerId(e)),
                        this.__onMouseDown(e),
                        this._resetTransformEventData();
                        var n = this.upperCanvasEl
                          , r = this._getEventPrefix();
                        t(o.document, "touchend", this._onTouchEnd, s),
                        t(o.document, "touchmove", this._onMouseMove, s),
                        i(n, r + "down", this._onMouseDown)
                    },
                    _onMouseDown: function(e) {
                        this.__onMouseDown(e),
                        this._resetTransformEventData();
                        var n = this.upperCanvasEl
                          , r = this._getEventPrefix();
                        i(n, r + "move", this._onMouseMove, s),
                        t(o.document, r + "up", this._onMouseUp),
                        t(o.document, r + "move", this._onMouseMove, s)
                    },
                    _onTouchEnd: function(e) {
                        if (!(e.touches.length > 0)) {
                            this.__onMouseUp(e),
                            this._resetTransformEventData(),
                            this.mainTouchId = null;
                            var n = this._getEventPrefix();
                            i(o.document, "touchend", this._onTouchEnd, s),
                            i(o.document, "touchmove", this._onMouseMove, s);
                            var r = this;
                            this._willAddMouseDown && clearTimeout(this._willAddMouseDown),
                            this._willAddMouseDown = setTimeout((function() {
                                t(r.upperCanvasEl, n + "down", r._onMouseDown),
                                r._willAddMouseDown = 0
                            }
                            ), 400)
                        }
                    },
                    _onMouseUp: function(e) {
                        this.__onMouseUp(e),
                        this._resetTransformEventData();
                        var n = this.upperCanvasEl
                          , r = this._getEventPrefix();
                        this._isMainEvent(e) && (i(o.document, r + "up", this._onMouseUp),
                        i(o.document, r + "move", this._onMouseMove, s),
                        t(n, r + "move", this._onMouseMove, s))
                    },
                    _onMouseMove: function(e) {
                        !this.allowTouchScrolling && e.preventDefault && e.preventDefault(),
                        this.__onMouseMove(e)
                    },
                    _onResize: function() {
                        this.calcOffset()
                    },
                    _shouldRender: function(e) {
                        var t = this._activeObject;
                        return !!(!!t !== !!e || t && e && t !== e) || (t && t.isEditing,
                        !1)
                    },
                    __onMouseUp: function(e) {
                        var t, i = this._currentTransform, o = this._groupSelector, s = !1, c = !o || 0 === o.left && 0 === o.top;
                        if (this._cacheTransformEventData(e),
                        t = this._target,
                        this._handleEvent(e, "up:before"),
                        !l(e, n))
                            return l(e, r) ? (this.fireMiddleClick && this._handleEvent(e, "up", r, c),
                            void this._resetTransformEventData()) : void (this.isDrawingMode && this._isCurrentlyDrawing ? this._onMouseUpInDrawingMode(e) : this._isMainEvent(e) && (i && (this._finalizeCurrentTransform(e),
                            s = i.actionPerformed),
                            c || (this._maybeGroupObjects(e),
                            s || (s = this._shouldRender(t))),
                            t && (t.isMoving = !1),
                            this._setCursorFromEvent(e, t),
                            this._handleEvent(e, "up", a, c),
                            this._groupSelector = null,
                            this._currentTransform = null,
                            t && (t.__corner = 0),
                            s ? this.requestRenderAll() : c || this.renderTop()));
                        this.fireRightClick && this._handleEvent(e, "up", n, c)
                    },
                    _simpleEventHandler: function(e, t) {
                        var i = this.findTarget(t)
                          , n = this.targets
                          , o = {
                            e: t,
                            target: i,
                            subTargets: n
                        };
                        if (this.fire(e, o),
                        i && i.fire(e, o),
                        !n)
                            return i;
                        for (var r = 0; r < n.length; r++)
                            n[r].fire(e, o);
                        return i
                    },
                    _handleEvent: function(e, t, i, n) {
                        var o = this._target
                          , r = this.targets || []
                          , s = {
                            e: e,
                            target: o,
                            subTargets: r,
                            button: i || a,
                            isClick: n || !1,
                            pointer: this._pointer,
                            absolutePointer: this._absolutePointer,
                            transform: this._currentTransform
                        };
                        this.fire("mouse:" + t, s),
                        o && o.fire("mouse" + t, s);
                        for (var l = 0; l < r.length; l++)
                            r[l].fire("mouse" + t, s)
                    },
                    _finalizeCurrentTransform: function(e) {
                        var t, i = this._currentTransform, n = i.target, o = {
                            e: e,
                            target: n,
                            transform: i
                        };
                        n._scaling && (n._scaling = !1),
                        n.setCoords(),
                        (i.actionPerformed || this.stateful && n.hasStateChanged()) && (i.actionPerformed && (t = this._addEventOptions(o, i),
                        this._fire(t, o)),
                        this._fire("modified", o))
                    },
                    _addEventOptions: function(e, t) {
                        var i, n;
                        switch (t.action) {
                        case "scaleX":
                            i = "scaled",
                            n = "x";
                            break;
                        case "scaleY":
                            i = "scaled",
                            n = "y";
                            break;
                        case "skewX":
                            i = "skewed",
                            n = "x";
                            break;
                        case "skewY":
                            i = "skewed",
                            n = "y";
                            break;
                        case "scale":
                            i = "scaled",
                            n = "equally";
                            break;
                        case "rotate":
                            i = "rotated";
                            break;
                        case "drag":
                            i = "moved";
                            break
                        }
                        return e.by = n,
                        i
                    },
                    _onMouseDownInDrawingMode: function(e) {
                        this._isCurrentlyDrawing = !0,
                        this.getActiveObject() && this.discardActiveObject(e).requestRenderAll(),
                        this.clipTo && o.util.clipContext(this, this.contextTop);
                        var t = this.getPointer(e);
                        this.freeDrawingBrush.onMouseDown(t, {
                            e: e,
                            pointer: t
                        }),
                        this._handleEvent(e, "down")
                    },
                    _onMouseMoveInDrawingMode: function(e) {
                        if (this._isCurrentlyDrawing) {
                            var t = this.getPointer(e);
                            this.freeDrawingBrush.onMouseMove(t, {
                                e: e,
                                pointer: t
                            })
                        }
                        this.setCursor(this.freeDrawingCursor),
                        this._handleEvent(e, "move")
                    },
                    _onMouseUpInDrawingMode: function(e) {
                        this.clipTo && this.contextTop.restore();
                        var t = this.getPointer(e);
                        this._isCurrentlyDrawing = this.freeDrawingBrush.onMouseUp({
                            e: e,
                            pointer: t
                        }),
                        this._handleEvent(e, "up")
                    },
                    __onMouseDown: function(e) {
                        this._cacheTransformEventData(e),
                        this._handleEvent(e, "down:before");
                        var t = this._target;
                        if (l(e, n))
                            this.fireRightClick && this._handleEvent(e, "down", n);
                        else if (l(e, r))
                            this.fireMiddleClick && this._handleEvent(e, "down", r);
                        else if (this.isDrawingMode)
                            this._onMouseDownInDrawingMode(e);
                        else if (this._isMainEvent(e) && !this._currentTransform) {
                            var i = this._pointer;
                            this._previousPointer = i;
                            var o = this._shouldRender(t)
                              , a = this._shouldGroup(e, t);
                            if (this._shouldClearSelection(e, t) ? this.discardActiveObject(e) : a && (this._handleGrouping(e, t),
                            t = this._activeObject),
                            !this.selection || t && (t.selectable || t.isEditing || t === this._activeObject) || (this._groupSelector = {
                                ex: i.x,
                                ey: i.y,
                                top: 0,
                                left: 0
                            }),
                            t) {
                                var s = t === this._activeObject;
                                t.selectable && this.setActiveObject(t, e),
                                t !== this._activeObject || !t.__corner && a || this._setupCurrentTransform(e, t, s)
                            }
                            this._handleEvent(e, "down"),
                            (o || a) && this.requestRenderAll()
                        }
                    },
                    _resetTransformEventData: function() {
                        this._target = null,
                        this._pointer = null,
                        this._absolutePointer = null
                    },
                    _cacheTransformEventData: function(e) {
                        this._resetTransformEventData(),
                        this._pointer = this.getPointer(e, !0),
                        this._absolutePointer = this.restorePointerVpt(this._pointer),
                        this._target = this._currentTransform ? this._currentTransform.target : this.findTarget(e) || null
                    },
                    _beforeTransform: function(e) {
                        var t = this._currentTransform;
                        this.stateful && t.target.saveState(),
                        this.fire("before:transform", {
                            e: e,
                            transform: t
                        }),
                        t.corner && this.onBeforeScaleRotate(t.target)
                    },
                    __onMouseMove: function(e) {
                        var t, i;
                        if (this._handleEvent(e, "move:before"),
                        this._cacheTransformEventData(e),
                        this.isDrawingMode)
                            this._onMouseMoveInDrawingMode(e);
                        else if (this._isMainEvent(e)) {
                            var n = this._groupSelector;
                            n ? (i = this._pointer,
                            n.left = i.x - n.ex,
                            n.top = i.y - n.ey,
                            this.renderTop()) : this._currentTransform ? this._transformObject(e) : (t = this.findTarget(e) || null,
                            this._setCursorFromEvent(e, t),
                            this._fireOverOutEvents(t, e)),
                            this._handleEvent(e, "move"),
                            this._resetTransformEventData()
                        }
                    },
                    _fireOverOutEvents: function(e, t) {
                        this.fireSyntheticInOutEvents(e, t, {
                            targetName: "_hoveredTarget",
                            canvasEvtOut: "mouse:out",
                            evtOut: "mouseout",
                            canvasEvtIn: "mouse:over",
                            evtIn: "mouseover"
                        })
                    },
                    _fireEnterLeaveEvents: function(e, t) {
                        this.fireSyntheticInOutEvents(e, t, {
                            targetName: "_draggedoverTarget",
                            evtOut: "dragleave",
                            evtIn: "dragenter"
                        })
                    },
                    fireSyntheticInOutEvents: function(e, t, i) {
                        var n, o, r, a, s = this[i.targetName], l = s !== e, c = i.canvasEvtIn, d = i.canvasEvtOut;
                        l && (n = {
                            e: t,
                            target: e,
                            previousTarget: s
                        },
                        o = {
                            e: t,
                            target: s,
                            nextTarget: e
                        },
                        this[i.targetName] = e),
                        a = e && l,
                        r = s && l,
                        r && (d && this.fire(d, o),
                        s.fire(i.evtOut, o)),
                        a && (c && this.fire(c, n),
                        e.fire(i.evtIn, n))
                    },
                    __onMouseWheel: function(e) {
                        this._cacheTransformEventData(e),
                        this._handleEvent(e, "wheel"),
                        this._resetTransformEventData()
                    },
                    _transformObject: function(e) {
                        var t = this.getPointer(e)
                          , i = this._currentTransform;
                        i.reset = !1,
                        i.target.isMoving = !0,
                        i.shiftKey = e.shiftKey,
                        i.altKey = e[this.centeredKey],
                        this._beforeScaleTransform(e, i),
                        this._performTransformAction(e, i, t),
                        i.actionPerformed && this.requestRenderAll()
                    },
                    _performTransformAction: function(e, t, i) {
                        var n = i.x
                          , o = i.y
                          , r = t.action
                          , a = !1
                          , s = {
                            target: t.target,
                            e: e,
                            transform: t,
                            pointer: i
                        };
                        "rotate" === r ? (a = this._rotateObject(n, o)) && this._fire("rotating", s) : "scale" === r ? (a = this._onScale(e, t, n, o)) && this._fire("scaling", s) : "scaleX" === r ? (a = this._scaleObject(n, o, "x")) && this._fire("scaling", s) : "scaleY" === r ? (a = this._scaleObject(n, o, "y")) && this._fire("scaling", s) : "skewX" === r ? (a = this._skewObject(n, o, "x")) && this._fire("skewing", s) : "skewY" === r ? (a = this._skewObject(n, o, "y")) && this._fire("skewing", s) : (a = this._translateObject(n, o),
                        a && (this._fire("moving", s),
                        this.setCursor(s.target.moveCursor || this.moveCursor))),
                        t.actionPerformed = t.actionPerformed || a
                    },
                    _fire: function(e, t) {
                        this.fire("object:" + e, t),
                        t.target.fire(e, t)
                    },
                    _beforeScaleTransform: function(e, t) {
                        if ("scale" === t.action || "scaleX" === t.action || "scaleY" === t.action) {
                            var i = this._shouldCenterTransform(t.target);
                            (i && ("center" !== t.originX || "center" !== t.originY) || !i && "center" === t.originX && "center" === t.originY) && (this._resetCurrentTransform(),
                            t.reset = !0)
                        }
                    },
                    _onScale: function(e, t, i, n) {
                        return this._isUniscalePossible(e, t.target) ? (t.currentAction = "scale",
                        this._scaleObject(i, n)) : (t.reset || "scale" !== t.currentAction || this._resetCurrentTransform(),
                        t.currentAction = "scaleEqually",
                        this._scaleObject(i, n, "equally"))
                    },
                    _isUniscalePossible: function(e, t) {
                        return (e[this.uniScaleKey] || this.uniScaleTransform) && !t.get("lockUniScaling")
                    },
                    _setCursorFromEvent: function(e, t) {
                        if (!t)
                            return this.setCursor(this.defaultCursor),
                            !1;
                        var i = t.hoverCursor || this.hoverCursor
                          , n = this._activeObject && "activeSelection" === this._activeObject.type ? this._activeObject : null
                          , o = (!n || !n.contains(t)) && t._findTargetCorner(this.getPointer(e, !0));
                        o ? this.setCursor(this.getCornerCursor(o, t, e)) : this.setCursor(i)
                    },
                    getCornerCursor: function(t, i, n) {
                        return this.actionIsDisabled(t, i, n) ? this.notAllowedCursor : t in e ? this._getRotatedCornerCursor(t, i, n) : "mtr" === t && i.hasRotatingPoint ? this.rotationCursor : this.defaultCursor
                    },
                    actionIsDisabled: function(e, t, i) {
                        return "mt" === e || "mb" === e ? i[this.altActionKey] ? t.lockSkewingX : t.lockScalingY : "ml" === e || "mr" === e ? i[this.altActionKey] ? t.lockSkewingY : t.lockScalingX : "mtr" === e ? t.lockRotation : this._isUniscalePossible(i, t) ? t.lockScalingX && t.lockScalingY : t.lockScalingX || t.lockScalingY
                    },
                    _getRotatedCornerCursor: function(t, i, n) {
                        var o = Math.round(i.angle % 360 / 45);
                        return o < 0 && (o += 8),
                        o += e[t],
                        n[this.altActionKey] && e[t] % 2 === 0 && (o += 2),
                        o %= 8,
                        this.cursorMap[o]
                    }
                })
            }(),
            function() {
                var e = Math.min
                  , t = Math.max;
                o.util.object.extend(o.Canvas.prototype, {
                    _shouldGroup: function(e, t) {
                        var i = this._activeObject;
                        return i && this._isSelectionKeyPressed(e) && t && t.selectable && this.selection && (i !== t || "activeSelection" === i.type) && !t.onSelect({
                            e: e
                        })
                    },
                    _handleGrouping: function(e, t) {
                        var i = this._activeObject;
                        i.__corner || (t !== i || (t = this.findTarget(e, !0),
                        t && t.selectable)) && (i && "activeSelection" === i.type ? this._updateActiveSelection(t, e) : this._createActiveSelection(t, e))
                    },
                    _updateActiveSelection: function(e, t) {
                        var i = this._activeObject
                          , n = i._objects.slice(0);
                        i.contains(e) ? (i.removeWithUpdate(e),
                        this._hoveredTarget = e,
                        1 === i.size() && this._setActiveObject(i.item(0), t)) : (i.addWithUpdate(e),
                        this._hoveredTarget = i),
                        this._fireSelectionEvents(n, t)
                    },
                    _createActiveSelection: function(e, t) {
                        var i = this.getActiveObjects()
                          , n = this._createGroup(e);
                        this._hoveredTarget = n,
                        this._setActiveObject(n, t),
                        this._fireSelectionEvents(i, t)
                    },
                    _createGroup: function(e) {
                        var t = this._objects
                          , i = t.indexOf(this._activeObject) < t.indexOf(e)
                          , n = i ? [this._activeObject, e] : [e, this._activeObject];
                        return this._activeObject.isEditing && this._activeObject.exitEditing(),
                        new o.ActiveSelection(n,{
                            canvas: this
                        })
                    },
                    _groupSelectedObjects: function(e) {
                        var t, i = this._collectObjects(e);
                        1 === i.length ? this.setActiveObject(i[0], e) : i.length > 1 && (t = new o.ActiveSelection(i.reverse(),{
                            canvas: this
                        }),
                        this.setActiveObject(t, e))
                    },
                    _collectObjects: function(i) {
                        for (var n, r = [], a = this._groupSelector.ex, s = this._groupSelector.ey, l = a + this._groupSelector.left, c = s + this._groupSelector.top, d = new o.Point(e(a, l),e(s, c)), u = new o.Point(t(a, l),t(s, c)), p = !this.selectionFullyContained, h = a === l && s === c, m = this._objects.length; m--; )
                            if (n = this._objects[m],
                            n && n.selectable && n.visible && (p && n.intersectsWithRect(d, u) || n.isContainedWithinRect(d, u) || p && n.containsPoint(d) || p && n.containsPoint(u)) && (r.push(n),
                            h))
                                break;
                        return r.length > 1 && (r = r.filter((function(e) {
                            return !e.onSelect({
                                e: i
                            })
                        }
                        ))),
                        r
                    },
                    _maybeGroupObjects: function(e) {
                        this.selection && this._groupSelector && this._groupSelectedObjects(e),
                        this.setCursor(this.defaultCursor),
                        this._groupSelector = null
                    }
                })
            }(),
            function() {
                o.util.object.extend(o.StaticCanvas.prototype, {
                    toDataURL: function(e) {
                        e || (e = {});
                        var t = e.format || "png"
                          , i = e.quality || 1
                          , n = (e.multiplier || 1) * (e.enableRetinaScaling ? this.getRetinaScaling() : 1)
                          , r = this.toCanvasElement(n, e);
                        return o.util.toDataURL(r, t, i)
                    },
                    toCanvasElement: function(e, t) {
                        e = e || 1,
                        t = t || {};
                        var i = (t.width || this.width) * e
                          , n = (t.height || this.height) * e
                          , r = this.getZoom()
                          , a = this.width
                          , s = this.height
                          , l = r * e
                          , c = this.viewportTransform
                          , d = (c[4] - (t.left || 0)) * e
                          , u = (c[5] - (t.top || 0)) * e
                          , p = this.interactive
                          , h = [l, 0, 0, l, d, u]
                          , m = this.enableRetinaScaling
                          , g = o.util.createCanvasElement()
                          , f = this.contextTop;
                        return g.width = i,
                        g.height = n,
                        this.contextTop = null,
                        this.enableRetinaScaling = !1,
                        this.interactive = !1,
                        this.viewportTransform = h,
                        this.width = i,
                        this.height = n,
                        this.calcViewportBoundaries(),
                        this.renderCanvas(g.getContext("2d"), this._objects),
                        this.viewportTransform = c,
                        this.width = a,
                        this.height = s,
                        this.calcViewportBoundaries(),
                        this.interactive = p,
                        this.enableRetinaScaling = m,
                        this.contextTop = f,
                        g
                    }
                })
            }(),
            o.util.object.extend(o.StaticCanvas.prototype, {
                loadFromDatalessJSON: function(e, t, i) {
                    return this.loadFromJSON(e, t, i)
                },
                loadFromJSON: function(e, t, i) {
                    if (e) {
                        var n = "string" === typeof e ? JSON.parse(e) : o.util.object.clone(e)
                          , r = this
                          , a = n.clipPath
                          , s = this.renderOnAddRemove;
                        return this.renderOnAddRemove = !1,
                        delete n.clipPath,
                        this._enlivenObjects(n.objects, (function(e) {
                            r.clear(),
                            r._setBgOverlay(n, (function() {
                                a ? r._enlivenObjects([a], (function(i) {
                                    r.clipPath = i[0],
                                    r.__setupCanvas.call(r, n, e, s, t)
                                }
                                )) : r.__setupCanvas.call(r, n, e, s, t)
                            }
                            ))
                        }
                        ), i),
                        this
                    }
                },
                __setupCanvas: function(e, t, i, n) {
                    var o = this;
                    t.forEach((function(e, t) {
                        o.insertAt(e, t)
                    }
                    )),
                    this.renderOnAddRemove = i,
                    delete e.objects,
                    delete e.backgroundImage,
                    delete e.overlayImage,
                    delete e.background,
                    delete e.overlay,
                    this._setOptions(e),
                    this.renderAll(),
                    n && n()
                },
                _setBgOverlay: function(e, t) {
                    var i = {
                        backgroundColor: !1,
                        overlayColor: !1,
                        backgroundImage: !1,
                        overlayImage: !1
                    };
                    if (e.backgroundImage || e.overlayImage || e.background || e.overlay) {
                        var n = function() {
                            i.backgroundImage && i.overlayImage && i.backgroundColor && i.overlayColor && t && t()
                        };
                        this.__setBgOverlay("backgroundImage", e.backgroundImage, i, n),
                        this.__setBgOverlay("overlayImage", e.overlayImage, i, n),
                        this.__setBgOverlay("backgroundColor", e.background, i, n),
                        this.__setBgOverlay("overlayColor", e.overlay, i, n)
                    } else
                        t && t()
                },
                __setBgOverlay: function(e, t, i, n) {
                    var r = this;
                    if (!t)
                        return i[e] = !0,
                        void (n && n());
                    "backgroundImage" === e || "overlayImage" === e ? o.util.enlivenObjects([t], (function(t) {
                        r[e] = t[0],
                        i[e] = !0,
                        n && n()
                    }
                    )) : this["set" + o.util.string.capitalize(e, !0)](t, (function() {
                        i[e] = !0,
                        n && n()
                    }
                    ))
                },
                _enlivenObjects: function(e, t, i) {
                    e && 0 !== e.length ? o.util.enlivenObjects(e, (function(e) {
                        t && t(e)
                    }
                    ), null, i) : t && t([])
                },
                _toDataURL: function(e, t) {
                    this.clone((function(i) {
                        t(i.toDataURL(e))
                    }
                    ))
                },
                _toDataURLWithMultiplier: function(e, t, i) {
                    this.clone((function(n) {
                        i(n.toDataURLWithMultiplier(e, t))
                    }
                    ))
                },
                clone: function(e, t) {
                    var i = JSON.stringify(this.toJSON(t));
                    this.cloneWithoutData((function(t) {
                        t.loadFromJSON(i, (function() {
                            e && e(t)
                        }
                        ))
                    }
                    ))
                },
                cloneWithoutData: function(e) {
                    var t = o.util.createCanvasElement();
                    t.width = this.width,
                    t.height = this.height;
                    var i = new o.Canvas(t);
                    i.clipTo = this.clipTo,
                    this.backgroundImage ? (i.setBackgroundImage(this.backgroundImage.src, (function() {
                        i.renderAll(),
                        e && e(i)
                    }
                    )),
                    i.backgroundImageOpacity = this.backgroundImageOpacity,
                    i.backgroundImageStretch = this.backgroundImageStretch) : e && e(i)
                }
            }),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.util.object.extend
                  , n = t.util.object.clone
                  , o = t.util.toFixed
                  , r = t.util.string.capitalize
                  , a = t.util.degreesToRadians
                  , s = t.StaticCanvas.supports("setLineDash")
                  , l = !t.isLikelyNode
                  , c = 2;
                t.Object || (t.Object = t.util.createClass(t.CommonMethods, {
                    type: "object",
                    originX: "left",
                    originY: "top",
                    top: 0,
                    left: 0,
                    width: 0,
                    height: 0,
                    scaleX: 1,
                    scaleY: 1,
                    flipX: !1,
                    flipY: !1,
                    opacity: 1,
                    angle: 0,
                    skewX: 0,
                    skewY: 0,
                    cornerSize: 13,
                    transparentCorners: !0,
                    hoverCursor: null,
                    moveCursor: null,
                    padding: 0,
                    borderColor: "rgba(102,153,255,0.75)",
                    borderDashArray: null,
                    cornerColor: "rgba(102,153,255,0.5)",
                    cornerStrokeColor: null,
                    cornerStyle: "rect",
                    cornerDashArray: null,
                    centeredScaling: !1,
                    centeredRotation: !0,
                    fill: "rgb(0,0,0)",
                    fillRule: "nonzero",
                    globalCompositeOperation: "source-over",
                    backgroundColor: "",
                    selectionBackgroundColor: "",
                    stroke: null,
                    strokeWidth: 1,
                    strokeDashArray: null,
                    strokeDashOffset: 0,
                    strokeLineCap: "butt",
                    strokeLineJoin: "miter",
                    strokeMiterLimit: 4,
                    shadow: null,
                    borderOpacityWhenMoving: .4,
                    borderScaleFactor: 1,
                    transformMatrix: null,
                    minScaleLimit: 0,
                    selectable: !0,
                    evented: !0,
                    visible: !0,
                    hasControls: !0,
                    hasBorders: !0,
                    hasRotatingPoint: !0,
                    rotatingPointOffset: 40,
                    perPixelTargetFind: !1,
                    includeDefaultValues: !0,
                    clipTo: null,
                    lockMovementX: !1,
                    lockMovementY: !1,
                    lockRotation: !1,
                    lockScalingX: !1,
                    lockScalingY: !1,
                    lockUniScaling: !1,
                    lockSkewingX: !1,
                    lockSkewingY: !1,
                    lockScalingFlip: !1,
                    excludeFromExport: !1,
                    objectCaching: l,
                    statefullCache: !1,
                    noScaleCache: !0,
                    strokeUniform: !1,
                    dirty: !0,
                    __corner: 0,
                    paintFirst: "fill",
                    stateProperties: "top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),
                    cacheProperties: "fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),
                    clipPath: void 0,
                    inverted: !1,
                    absolutePositioned: !1,
                    initialize: function(e) {
                        e && this.setOptions(e)
                    },
                    _createCacheCanvas: function() {
                        this._cacheProperties = {},
                        this._cacheCanvas = t.util.createCanvasElement(),
                        this._cacheContext = this._cacheCanvas.getContext("2d"),
                        this._updateCacheCanvas(),
                        this.dirty = !0
                    },
                    _limitCacheSize: function(e) {
                        var i = t.perfLimitSizeTotal
                          , n = e.width
                          , o = e.height
                          , r = t.maxCacheSideLimit
                          , a = t.minCacheSideLimit;
                        if (n <= r && o <= r && n * o <= i)
                            return n < a && (e.width = a),
                            o < a && (e.height = a),
                            e;
                        var s = n / o
                          , l = t.util.limitDimsByArea(s, i)
                          , c = t.util.capValue
                          , d = c(a, l.x, r)
                          , u = c(a, l.y, r);
                        return n > d && (e.zoomX /= n / d,
                        e.width = d,
                        e.capped = !0),
                        o > u && (e.zoomY /= o / u,
                        e.height = u,
                        e.capped = !0),
                        e
                    },
                    _getCacheCanvasDimensions: function() {
                        var e = this.getTotalObjectScaling()
                          , t = this._getTransformedDimensions(0, 0)
                          , i = t.x * e.scaleX / this.scaleX
                          , n = t.y * e.scaleY / this.scaleY;
                        return {
                            width: i + c,
                            height: n + c,
                            zoomX: e.scaleX,
                            zoomY: e.scaleY,
                            x: i,
                            y: n
                        }
                    },
                    _updateCacheCanvas: function() {
                        var e = this.canvas;
                        if (this.noScaleCache && e && e._currentTransform) {
                            var i = e._currentTransform.target
                              , n = e._currentTransform.action;
                            if (this === i && n.slice && "scale" === n.slice(0, 5))
                                return !1
                        }
                        var o, r, a = this._cacheCanvas, s = this._limitCacheSize(this._getCacheCanvasDimensions()), l = t.minCacheSideLimit, c = s.width, d = s.height, u = s.zoomX, p = s.zoomY, h = c !== this.cacheWidth || d !== this.cacheHeight, m = this.zoomX !== u || this.zoomY !== p, g = h || m, f = 0, v = 0, b = !1;
                        if (h) {
                            var y = this._cacheCanvas.width
                              , w = this._cacheCanvas.height
                              , C = c > y || d > w
                              , x = (c < .9 * y || d < .9 * w) && y > l && w > l;
                            b = C || x,
                            C && !s.capped && (c > l || d > l) && (f = .1 * c,
                            v = .1 * d)
                        }
                        return !!g && (b ? (a.width = Math.ceil(c + f),
                        a.height = Math.ceil(d + v)) : (this._cacheContext.setTransform(1, 0, 0, 1, 0, 0),
                        this._cacheContext.clearRect(0, 0, a.width, a.height)),
                        o = s.x / 2,
                        r = s.y / 2,
                        this.cacheTranslationX = Math.round(a.width / 2 - o) + o,
                        this.cacheTranslationY = Math.round(a.height / 2 - r) + r,
                        this.cacheWidth = c,
                        this.cacheHeight = d,
                        this._cacheContext.translate(this.cacheTranslationX, this.cacheTranslationY),
                        this._cacheContext.scale(u, p),
                        this.zoomX = u,
                        this.zoomY = p,
                        !0)
                    },
                    setOptions: function(e) {
                        this._setOptions(e),
                        this._initGradient(e.fill, "fill"),
                        this._initGradient(e.stroke, "stroke"),
                        this._initClipping(e),
                        this._initPattern(e.fill, "fill"),
                        this._initPattern(e.stroke, "stroke")
                    },
                    transform: function(e) {
                        var t;
                        t = this.group && !this.group._transformDone ? this.calcTransformMatrix() : this.calcOwnMatrix(),
                        e.transform(t[0], t[1], t[2], t[3], t[4], t[5])
                    },
                    toObject: function(e) {
                        var i = t.Object.NUM_FRACTION_DIGITS
                          , n = {
                            type: this.type,
                            version: t.version,
                            originX: this.originX,
                            originY: this.originY,
                            left: o(this.left, i),
                            top: o(this.top, i),
                            width: o(this.width, i),
                            height: o(this.height, i),
                            fill: this.fill && this.fill.toObject ? this.fill.toObject() : this.fill,
                            stroke: this.stroke && this.stroke.toObject ? this.stroke.toObject() : this.stroke,
                            strokeWidth: o(this.strokeWidth, i),
                            strokeDashArray: this.strokeDashArray ? this.strokeDashArray.concat() : this.strokeDashArray,
                            strokeLineCap: this.strokeLineCap,
                            strokeDashOffset: this.strokeDashOffset,
                            strokeLineJoin: this.strokeLineJoin,
                            strokeMiterLimit: o(this.strokeMiterLimit, i),
                            scaleX: o(this.scaleX, i),
                            scaleY: o(this.scaleY, i),
                            angle: o(this.angle, i),
                            flipX: this.flipX,
                            flipY: this.flipY,
                            opacity: o(this.opacity, i),
                            shadow: this.shadow && this.shadow.toObject ? this.shadow.toObject() : this.shadow,
                            visible: this.visible,
                            clipTo: this.clipTo && String(this.clipTo),
                            backgroundColor: this.backgroundColor,
                            fillRule: this.fillRule,
                            paintFirst: this.paintFirst,
                            globalCompositeOperation: this.globalCompositeOperation,
                            transformMatrix: this.transformMatrix ? this.transformMatrix.concat() : null,
                            skewX: o(this.skewX, i),
                            skewY: o(this.skewY, i)
                        };
                        return this.clipPath && (n.clipPath = this.clipPath.toObject(e),
                        n.clipPath.inverted = this.clipPath.inverted,
                        n.clipPath.absolutePositioned = this.clipPath.absolutePositioned),
                        t.util.populateWithProperties(this, n, e),
                        this.includeDefaultValues || (n = this._removeDefaultValues(n)),
                        n
                    },
                    toDatalessObject: function(e) {
                        return this.toObject(e)
                    },
                    _removeDefaultValues: function(e) {
                        var i = t.util.getKlass(e.type).prototype
                          , n = i.stateProperties;
                        return n.forEach((function(t) {
                            if ("left" !== t && "top" !== t) {
                                e[t] === i[t] && delete e[t];
                                var n = "[object Array]" === Object.prototype.toString.call(e[t]) && "[object Array]" === Object.prototype.toString.call(i[t]);
                                n && 0 === e[t].length && 0 === i[t].length && delete e[t]
                            }
                        }
                        )),
                        e
                    },
                    toString: function() {
                        return "#<fabric." + r(this.type) + ">"
                    },
                    getObjectScaling: function() {
                        var e = this.scaleX
                          , t = this.scaleY;
                        if (this.group) {
                            var i = this.group.getObjectScaling();
                            e *= i.scaleX,
                            t *= i.scaleY
                        }
                        return {
                            scaleX: e,
                            scaleY: t
                        }
                    },
                    getTotalObjectScaling: function() {
                        var e = this.getObjectScaling()
                          , t = e.scaleX
                          , i = e.scaleY;
                        if (this.canvas) {
                            var n = this.canvas.getZoom()
                              , o = this.canvas.getRetinaScaling();
                            t *= n * o,
                            i *= n * o
                        }
                        return {
                            scaleX: t,
                            scaleY: i
                        }
                    },
                    getObjectOpacity: function() {
                        var e = this.opacity;
                        return this.group && (e *= this.group.getObjectOpacity()),
                        e
                    },
                    _set: function(e, i) {
                        var n = "scaleX" === e || "scaleY" === e
                          , o = this[e] !== i
                          , r = !1;
                        return n && (i = this._constrainScale(i)),
                        "scaleX" === e && i < 0 ? (this.flipX = !this.flipX,
                        i *= -1) : "scaleY" === e && i < 0 ? (this.flipY = !this.flipY,
                        i *= -1) : "shadow" !== e || !i || i instanceof t.Shadow ? "dirty" === e && this.group && this.group.set("dirty", i) : i = new t.Shadow(i),
                        this[e] = i,
                        o && (r = this.group && this.group.isOnACache(),
                        this.cacheProperties.indexOf(e) > -1 ? (this.dirty = !0,
                        r && this.group.set("dirty", !0)) : r && this.stateProperties.indexOf(e) > -1 && this.group.set("dirty", !0)),
                        this
                    },
                    setOnGroup: function() {},
                    getViewportTransform: function() {
                        return this.canvas && this.canvas.viewportTransform ? this.canvas.viewportTransform : t.iMatrix.concat()
                    },
                    isNotVisible: function() {
                        return 0 === this.opacity || 0 === this.width && 0 === this.height && 0 === this.strokeWidth || !this.visible
                    },
                    render: function(e) {
                        this.isNotVisible() || this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen() || (e.save(),
                        this._setupCompositeOperation(e),
                        this.drawSelectionBackground(e),
                        this.transform(e),
                        this._setOpacity(e),
                        this._setShadow(e, this),
                        this.transformMatrix && e.transform.apply(e, this.transformMatrix),
                        this.clipTo && t.util.clipContext(this, e),
                        this.shouldCache() ? (this.renderCache(),
                        this.drawCacheOnCanvas(e)) : (this._removeCacheCanvas(),
                        this.dirty = !1,
                        this.drawObject(e),
                        this.objectCaching && this.statefullCache && this.saveState({
                            propertySet: "cacheProperties"
                        })),
                        this.clipTo && e.restore(),
                        e.restore())
                    },
                    renderCache: function(e) {
                        e = e || {},
                        this._cacheCanvas || this._createCacheCanvas(),
                        this.isCacheDirty() && (this.statefullCache && this.saveState({
                            propertySet: "cacheProperties"
                        }),
                        this.drawObject(this._cacheContext, e.forClipping),
                        this.dirty = !1)
                    },
                    _removeCacheCanvas: function() {
                        this._cacheCanvas = null,
                        this.cacheWidth = 0,
                        this.cacheHeight = 0
                    },
                    hasStroke: function() {
                        return this.stroke && "transparent" !== this.stroke && 0 !== this.strokeWidth
                    },
                    hasFill: function() {
                        return this.fill && "transparent" !== this.fill
                    },
                    needsItsOwnCache: function() {
                        return !("stroke" !== this.paintFirst || !this.hasFill() || !this.hasStroke() || "object" !== typeof this.shadow) || !!this.clipPath
                    },
                    shouldCache: function() {
                        return this.ownCaching = this.needsItsOwnCache() || this.objectCaching && (!this.group || !this.group.isOnACache()),
                        this.ownCaching
                    },
                    willDrawShadow: function() {
                        return !!this.shadow && (0 !== this.shadow.offsetX || 0 !== this.shadow.offsetY)
                    },
                    drawClipPathOnCache: function(e) {
                        var i = this.clipPath;
                        if (e.save(),
                        i.inverted ? e.globalCompositeOperation = "destination-out" : e.globalCompositeOperation = "destination-in",
                        i.absolutePositioned) {
                            var n = t.util.invertTransform(this.calcTransformMatrix());
                            e.transform(n[0], n[1], n[2], n[3], n[4], n[5])
                        }
                        i.transform(e),
                        e.scale(1 / i.zoomX, 1 / i.zoomY),
                        e.drawImage(i._cacheCanvas, -i.cacheTranslationX, -i.cacheTranslationY),
                        e.restore()
                    },
                    drawObject: function(e, t) {
                        var i = this.fill
                          , n = this.stroke;
                        t ? (this.fill = "black",
                        this.stroke = "",
                        this._setClippingProperties(e)) : (this._renderBackground(e),
                        this._setStrokeStyles(e, this),
                        this._setFillStyles(e, this)),
                        this._render(e),
                        this._drawClipPath(e),
                        this.fill = i,
                        this.stroke = n
                    },
                    _drawClipPath: function(e) {
                        var t = this.clipPath;
                        t && (t.canvas = this.canvas,
                        t.shouldCache(),
                        t._transformDone = !0,
                        t.renderCache({
                            forClipping: !0
                        }),
                        this.drawClipPathOnCache(e))
                    },
                    drawCacheOnCanvas: function(e) {
                        e.scale(1 / this.zoomX, 1 / this.zoomY),
                        e.drawImage(this._cacheCanvas, -this.cacheTranslationX, -this.cacheTranslationY)
                    },
                    isCacheDirty: function(e) {
                        if (this.isNotVisible())
                            return !1;
                        if (this._cacheCanvas && !e && this._updateCacheCanvas())
                            return !0;
                        if (this.dirty || this.clipPath && this.clipPath.absolutePositioned || this.statefullCache && this.hasStateChanged("cacheProperties")) {
                            if (this._cacheCanvas && !e) {
                                var t = this.cacheWidth / this.zoomX
                                  , i = this.cacheHeight / this.zoomY;
                                this._cacheContext.clearRect(-t / 2, -i / 2, t, i)
                            }
                            return !0
                        }
                        return !1
                    },
                    _renderBackground: function(e) {
                        if (this.backgroundColor) {
                            var t = this._getNonTransformedDimensions();
                            e.fillStyle = this.backgroundColor,
                            e.fillRect(-t.x / 2, -t.y / 2, t.x, t.y),
                            this._removeShadow(e)
                        }
                    },
                    _setOpacity: function(e) {
                        this.group && !this.group._transformDone ? e.globalAlpha = this.getObjectOpacity() : e.globalAlpha *= this.opacity
                    },
                    _setStrokeStyles: function(e, t) {
                        t.stroke && (e.lineWidth = t.strokeWidth,
                        e.lineCap = t.strokeLineCap,
                        e.lineDashOffset = t.strokeDashOffset,
                        e.lineJoin = t.strokeLineJoin,
                        e.miterLimit = t.strokeMiterLimit,
                        e.strokeStyle = t.stroke.toLive ? t.stroke.toLive(e, this) : t.stroke)
                    },
                    _setFillStyles: function(e, t) {
                        t.fill && (e.fillStyle = t.fill.toLive ? t.fill.toLive(e, this) : t.fill)
                    },
                    _setClippingProperties: function(e) {
                        e.globalAlpha = 1,
                        e.strokeStyle = "transparent",
                        e.fillStyle = "#000000"
                    },
                    _setLineDash: function(e, t, i) {
                        t && (1 & t.length && t.push.apply(t, t),
                        s ? e.setLineDash(t) : i && i(e),
                        this.strokeUniform && e.setLineDash(e.getLineDash().map((function(t) {
                            return t * e.lineWidth
                        }
                        ))))
                    },
                    _renderControls: function(e, i) {
                        var n, o, r, s = this.getViewportTransform(), l = this.calcTransformMatrix();
                        i = i || {},
                        o = "undefined" !== typeof i.hasBorders ? i.hasBorders : this.hasBorders,
                        r = "undefined" !== typeof i.hasControls ? i.hasControls : this.hasControls,
                        l = t.util.multiplyTransformMatrices(s, l),
                        n = t.util.qrDecompose(l),
                        e.save(),
                        e.translate(n.translateX, n.translateY),
                        e.lineWidth = 1 * this.borderScaleFactor,
                        this.group || (e.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1),
                        i.forActiveSelection ? (e.rotate(a(n.angle)),
                        o && this.drawBordersInGroup(e, n, i)) : (e.rotate(a(this.angle)),
                        o && this.drawBorders(e, i)),
                        r && this.drawControls(e, i),
                        e.restore()
                    },
                    _setShadow: function(e) {
                        if (this.shadow) {
                            var i, n = this.shadow, o = this.canvas, r = o && o.viewportTransform[0] || 1, a = o && o.viewportTransform[3] || 1;
                            i = n.nonScaling ? {
                                scaleX: 1,
                                scaleY: 1
                            } : this.getObjectScaling(),
                            o && o._isRetinaScaling() && (r *= t.devicePixelRatio,
                            a *= t.devicePixelRatio),
                            e.shadowColor = n.color,
                            e.shadowBlur = n.blur * t.browserShadowBlurConstant * (r + a) * (i.scaleX + i.scaleY) / 4,
                            e.shadowOffsetX = n.offsetX * r * i.scaleX,
                            e.shadowOffsetY = n.offsetY * a * i.scaleY
                        }
                    },
                    _removeShadow: function(e) {
                        this.shadow && (e.shadowColor = "",
                        e.shadowBlur = e.shadowOffsetX = e.shadowOffsetY = 0)
                    },
                    _applyPatternGradientTransform: function(e, t) {
                        if (!t || !t.toLive)
                            return {
                                offsetX: 0,
                                offsetY: 0
                            };
                        var i = t.gradientTransform || t.patternTransform
                          , n = -this.width / 2 + t.offsetX || 0
                          , o = -this.height / 2 + t.offsetY || 0;
                        return "percentage" === t.gradientUnits ? e.transform(this.width, 0, 0, this.height, n, o) : e.transform(1, 0, 0, 1, n, o),
                        i && e.transform(i[0], i[1], i[2], i[3], i[4], i[5]),
                        {
                            offsetX: n,
                            offsetY: o
                        }
                    },
                    _renderPaintInOrder: function(e) {
                        "stroke" === this.paintFirst ? (this._renderStroke(e),
                        this._renderFill(e)) : (this._renderFill(e),
                        this._renderStroke(e))
                    },
                    _render: function() {},
                    _renderFill: function(e) {
                        this.fill && (e.save(),
                        this._applyPatternGradientTransform(e, this.fill),
                        "evenodd" === this.fillRule ? e.fill("evenodd") : e.fill(),
                        e.restore())
                    },
                    _renderStroke: function(e) {
                        this.stroke && 0 !== this.strokeWidth && (this.shadow && !this.shadow.affectStroke && this._removeShadow(e),
                        e.save(),
                        this.strokeUniform && e.scale(1 / this.scaleX, 1 / this.scaleY),
                        this._setLineDash(e, this.strokeDashArray, this._renderDashedStroke),
                        this.stroke.toLive && "percentage" === this.stroke.gradientUnits ? this._applyPatternForTransformedGradient(e, this.stroke) : this._applyPatternGradientTransform(e, this.stroke),
                        e.stroke(),
                        e.restore())
                    },
                    _applyPatternForTransformedGradient: function(e, i) {
                        var n, o = this._limitCacheSize(this._getCacheCanvasDimensions()), r = t.util.createCanvasElement(), a = this.canvas.getRetinaScaling(), s = o.x / this.scaleX / a, l = o.y / this.scaleY / a;
                        r.width = s,
                        r.height = l,
                        n = r.getContext("2d"),
                        n.beginPath(),
                        n.moveTo(0, 0),
                        n.lineTo(s, 0),
                        n.lineTo(s, l),
                        n.lineTo(0, l),
                        n.closePath(),
                        n.translate(s / 2, l / 2),
                        n.scale(o.zoomX / this.scaleX / a, o.zoomY / this.scaleY / a),
                        this._applyPatternGradientTransform(n, i),
                        n.fillStyle = i.toLive(e),
                        n.fill(),
                        e.translate(-this.width / 2 - this.strokeWidth / 2, -this.height / 2 - this.strokeWidth / 2),
                        e.scale(a * this.scaleX / o.zoomX, a * this.scaleY / o.zoomY),
                        e.strokeStyle = n.createPattern(r, "no-repeat")
                    },
                    _findCenterFromElement: function() {
                        return {
                            x: this.left + this.width / 2,
                            y: this.top + this.height / 2
                        }
                    },
                    _assignTransformMatrixProps: function() {
                        if (this.transformMatrix) {
                            var e = t.util.qrDecompose(this.transformMatrix);
                            this.flipX = !1,
                            this.flipY = !1,
                            this.set("scaleX", e.scaleX),
                            this.set("scaleY", e.scaleY),
                            this.angle = e.angle,
                            this.skewX = e.skewX,
                            this.skewY = 0
                        }
                    },
                    _removeTransformMatrix: function(e) {
                        var i = this._findCenterFromElement();
                        this.transformMatrix && (this._assignTransformMatrixProps(),
                        i = t.util.transformPoint(i, this.transformMatrix)),
                        this.transformMatrix = null,
                        e && (this.scaleX *= e.scaleX,
                        this.scaleY *= e.scaleY,
                        this.cropX = e.cropX,
                        this.cropY = e.cropY,
                        i.x += e.offsetLeft,
                        i.y += e.offsetTop,
                        this.width = e.width,
                        this.height = e.height),
                        this.setPositionByOrigin(i, "center", "center")
                    },
                    clone: function(e, i) {
                        var n = this.toObject(i);
                        this.constructor.fromObject ? this.constructor.fromObject(n, e) : t.Object._fromObject("Object", n, e)
                    },
                    cloneAsImage: function(e, i) {
                        var n = this.toCanvasElement(i);
                        return e && e(new t.Image(n)),
                        this
                    },
                    toCanvasElement: function(e) {
                        e || (e = {});
                        var i = t.util
                          , n = i.saveObjectTransform(this)
                          , o = this.shadow
                          , r = Math.abs
                          , a = (e.multiplier || 1) * (e.enableRetinaScaling ? t.devicePixelRatio : 1);
                        e.withoutTransform && i.resetObjectTransform(this),
                        e.withoutShadow && (this.shadow = null);
                        var s, l, c = t.util.createCanvasElement(), d = this.getBoundingRect(!0, !0), u = this.shadow, p = {
                            x: 0,
                            y: 0
                        };
                        u && (l = u.blur,
                        s = u.nonScaling ? {
                            scaleX: 1,
                            scaleY: 1
                        } : this.getObjectScaling(),
                        p.x = 2 * Math.round(r(u.offsetX) + l) * r(s.scaleX),
                        p.y = 2 * Math.round(r(u.offsetY) + l) * r(s.scaleY)),
                        c.width = d.width + p.x,
                        c.height = d.height + p.y,
                        c.width += c.width % 2 ? 2 - c.width % 2 : 0,
                        c.height += c.height % 2 ? 2 - c.height % 2 : 0;
                        var h = new t.StaticCanvas(c,{
                            enableRetinaScaling: !1,
                            renderOnAddRemove: !1,
                            skipOffscreen: !1
                        });
                        "jpeg" === e.format && (h.backgroundColor = "#fff"),
                        this.setPositionByOrigin(new t.Point(h.width / 2,h.height / 2), "center", "center");
                        var m = this.canvas;
                        h.add(this);
                        var g = h.toCanvasElement(a || 1, e);
                        return this.shadow = o,
                        this.canvas = m,
                        this.set(n).setCoords(),
                        h._objects = [],
                        h.dispose(),
                        h = null,
                        g
                    },
                    toDataURL: function(e) {
                        return e || (e = {}),
                        t.util.toDataURL(this.toCanvasElement(e), e.format || "png", e.quality || 1)
                    },
                    isType: function(e) {
                        return this.type === e
                    },
                    complexity: function() {
                        return 1
                    },
                    toJSON: function(e) {
                        return this.toObject(e)
                    },
                    setGradient: function(e, i) {
                        i || (i = {});
                        var n = {
                            colorStops: []
                        };
                        return n.type = i.type || (i.r1 || i.r2 ? "radial" : "linear"),
                        n.coords = {
                            x1: i.x1,
                            y1: i.y1,
                            x2: i.x2,
                            y2: i.y2
                        },
                        n.gradientUnits = i.gradientUnits || "pixels",
                        (i.r1 || i.r2) && (n.coords.r1 = i.r1,
                        n.coords.r2 = i.r2),
                        n.gradientTransform = i.gradientTransform,
                        t.Gradient.prototype.addColorStop.call(n, i.colorStops),
                        this.set(e, t.Gradient.forObject(this, n))
                    },
                    setPatternFill: function(e, i) {
                        return this.set("fill", new t.Pattern(e,i))
                    },
                    setShadow: function(e) {
                        return this.set("shadow", e ? new t.Shadow(e) : null)
                    },
                    setColor: function(e) {
                        return this.set("fill", e),
                        this
                    },
                    rotate: function(e) {
                        var t = ("center" !== this.originX || "center" !== this.originY) && this.centeredRotation;
                        return t && this._setOriginToCenter(),
                        this.set("angle", e),
                        t && this._resetOrigin(),
                        this
                    },
                    centerH: function() {
                        return this.canvas && this.canvas.centerObjectH(this),
                        this
                    },
                    viewportCenterH: function() {
                        return this.canvas && this.canvas.viewportCenterObjectH(this),
                        this
                    },
                    centerV: function() {
                        return this.canvas && this.canvas.centerObjectV(this),
                        this
                    },
                    viewportCenterV: function() {
                        return this.canvas && this.canvas.viewportCenterObjectV(this),
                        this
                    },
                    center: function() {
                        return this.canvas && this.canvas.centerObject(this),
                        this
                    },
                    viewportCenter: function() {
                        return this.canvas && this.canvas.viewportCenterObject(this),
                        this
                    },
                    getLocalPointer: function(e, i) {
                        i = i || this.canvas.getPointer(e);
                        var n = new t.Point(i.x,i.y)
                          , o = this._getLeftTopCoords();
                        return this.angle && (n = t.util.rotatePoint(n, o, a(-this.angle))),
                        {
                            x: n.x - o.x,
                            y: n.y - o.y
                        }
                    },
                    _setupCompositeOperation: function(e) {
                        this.globalCompositeOperation && (e.globalCompositeOperation = this.globalCompositeOperation)
                    }
                }),
                t.util.createAccessors && t.util.createAccessors(t.Object),
                i(t.Object.prototype, t.Observable),
                t.Object.NUM_FRACTION_DIGITS = 2,
                t.Object._fromObject = function(e, i, o, r) {
                    var a = t[e];
                    i = n(i, !0),
                    t.util.enlivenPatterns([i.fill, i.stroke], (function(e) {
                        "undefined" !== typeof e[0] && (i.fill = e[0]),
                        "undefined" !== typeof e[1] && (i.stroke = e[1]),
                        t.util.enlivenObjects([i.clipPath], (function(e) {
                            i.clipPath = e[0];
                            var t = r ? new a(i[r],i) : new a(i);
                            o && o(t)
                        }
                        ))
                    }
                    ))
                }
                ,
                t.Object.__uid = 0)
            }(i),
            function() {
                var e = o.util.degreesToRadians
                  , t = {
                    left: -.5,
                    center: 0,
                    right: .5
                }
                  , i = {
                    top: -.5,
                    center: 0,
                    bottom: .5
                };
                o.util.object.extend(o.Object.prototype, {
                    translateToGivenOrigin: function(e, n, r, a, s) {
                        var l, c, d, u = e.x, p = e.y;
                        return "string" === typeof n ? n = t[n] : n -= .5,
                        "string" === typeof a ? a = t[a] : a -= .5,
                        l = a - n,
                        "string" === typeof r ? r = i[r] : r -= .5,
                        "string" === typeof s ? s = i[s] : s -= .5,
                        c = s - r,
                        (l || c) && (d = this._getTransformedDimensions(),
                        u = e.x + l * d.x,
                        p = e.y + c * d.y),
                        new o.Point(u,p)
                    },
                    translateToCenterPoint: function(t, i, n) {
                        var r = this.translateToGivenOrigin(t, i, n, "center", "center");
                        return this.angle ? o.util.rotatePoint(r, t, e(this.angle)) : r
                    },
                    translateToOriginPoint: function(t, i, n) {
                        var r = this.translateToGivenOrigin(t, "center", "center", i, n);
                        return this.angle ? o.util.rotatePoint(r, t, e(this.angle)) : r
                    },
                    getCenterPoint: function() {
                        var e = new o.Point(this.left,this.top);
                        return this.translateToCenterPoint(e, this.originX, this.originY)
                    },
                    getPointByOrigin: function(e, t) {
                        var i = this.getCenterPoint();
                        return this.translateToOriginPoint(i, e, t)
                    },
                    toLocalPoint: function(t, i, n) {
                        var r, a, s = this.getCenterPoint();
                        return r = "undefined" !== typeof i && "undefined" !== typeof n ? this.translateToGivenOrigin(s, "center", "center", i, n) : new o.Point(this.left,this.top),
                        a = new o.Point(t.x,t.y),
                        this.angle && (a = o.util.rotatePoint(a, s, -e(this.angle))),
                        a.subtractEquals(r)
                    },
                    setPositionByOrigin: function(e, t, i) {
                        var n = this.translateToCenterPoint(e, t, i)
                          , o = this.translateToOriginPoint(n, this.originX, this.originY);
                        this.set("left", o.x),
                        this.set("top", o.y)
                    },
                    adjustPosition: function(i) {
                        var n, r, a = e(this.angle), s = this.getScaledWidth(), l = o.util.cos(a) * s, c = o.util.sin(a) * s;
                        n = "string" === typeof this.originX ? t[this.originX] : this.originX - .5,
                        r = "string" === typeof i ? t[i] : i - .5,
                        this.left += l * (r - n),
                        this.top += c * (r - n),
                        this.setCoords(),
                        this.originX = i
                    },
                    _setOriginToCenter: function() {
                        this._originalOriginX = this.originX,
                        this._originalOriginY = this.originY;
                        var e = this.getCenterPoint();
                        this.originX = "center",
                        this.originY = "center",
                        this.left = e.x,
                        this.top = e.y
                    },
                    _resetOrigin: function() {
                        var e = this.translateToOriginPoint(this.getCenterPoint(), this._originalOriginX, this._originalOriginY);
                        this.originX = this._originalOriginX,
                        this.originY = this._originalOriginY,
                        this.left = e.x,
                        this.top = e.y,
                        this._originalOriginX = null,
                        this._originalOriginY = null
                    },
                    _getLeftTopCoords: function() {
                        return this.translateToOriginPoint(this.getCenterPoint(), "left", "top")
                    }
                })
            }(),
            function() {
                function e(e) {
                    return [new o.Point(e.tl.x,e.tl.y), new o.Point(e.tr.x,e.tr.y), new o.Point(e.br.x,e.br.y), new o.Point(e.bl.x,e.bl.y)]
                }
                var t = o.util.degreesToRadians
                  , i = o.util.multiplyTransformMatrices
                  , n = o.util.transformPoint;
                o.util.object.extend(o.Object.prototype, {
                    oCoords: null,
                    aCoords: null,
                    ownMatrixCache: null,
                    matrixCache: null,
                    getCoords: function(t, i) {
                        this.oCoords || this.setCoords();
                        var n = t ? this.aCoords : this.oCoords;
                        return e(i ? this.calcCoords(t) : n)
                    },
                    intersectsWithRect: function(e, t, i, n) {
                        var r = this.getCoords(i, n)
                          , a = o.Intersection.intersectPolygonRectangle(r, e, t);
                        return "Intersection" === a.status
                    },
                    intersectsWithObject: function(e, t, i) {
                        var n = o.Intersection.intersectPolygonPolygon(this.getCoords(t, i), e.getCoords(t, i));
                        return "Intersection" === n.status || e.isContainedWithinObject(this, t, i) || this.isContainedWithinObject(e, t, i)
                    },
                    isContainedWithinObject: function(e, t, i) {
                        for (var n = this.getCoords(t, i), o = 0, r = e._getImageLines(i ? e.calcCoords(t) : t ? e.aCoords : e.oCoords); o < 4; o++)
                            if (!e.containsPoint(n[o], r))
                                return !1;
                        return !0
                    },
                    isContainedWithinRect: function(e, t, i, n) {
                        var o = this.getBoundingRect(i, n);
                        return o.left >= e.x && o.left + o.width <= t.x && o.top >= e.y && o.top + o.height <= t.y
                    },
                    containsPoint: function(e, t, i, n) {
                        t = t || this._getImageLines(n ? this.calcCoords(i) : i ? this.aCoords : this.oCoords);
                        var o = this._findCrossPoints(e, t);
                        return 0 !== o && o % 2 === 1
                    },
                    isOnScreen: function(e) {
                        if (!this.canvas)
                            return !1;
                        for (var t, i = this.canvas.vptCoords.tl, n = this.canvas.vptCoords.br, o = this.getCoords(!0, e), r = 0; r < 4; r++)
                            if (t = o[r],
                            t.x <= n.x && t.x >= i.x && t.y <= n.y && t.y >= i.y)
                                return !0;
                        return !!this.intersectsWithRect(i, n, !0, e) || this._containsCenterOfCanvas(i, n, e)
                    },
                    _containsCenterOfCanvas: function(e, t, i) {
                        var n = {
                            x: (e.x + t.x) / 2,
                            y: (e.y + t.y) / 2
                        };
                        return !!this.containsPoint(n, null, !0, i)
                    },
                    isPartiallyOnScreen: function(e) {
                        if (!this.canvas)
                            return !1;
                        var t = this.canvas.vptCoords.tl
                          , i = this.canvas.vptCoords.br;
                        return !!this.intersectsWithRect(t, i, !0, e) || this._containsCenterOfCanvas(t, i, e)
                    },
                    _getImageLines: function(e) {
                        return {
                            topline: {
                                o: e.tl,
                                d: e.tr
                            },
                            rightline: {
                                o: e.tr,
                                d: e.br
                            },
                            bottomline: {
                                o: e.br,
                                d: e.bl
                            },
                            leftline: {
                                o: e.bl,
                                d: e.tl
                            }
                        }
                    },
                    _findCrossPoints: function(e, t) {
                        var i, n, o, r, a, s, l = 0;
                        for (var c in t)
                            if (s = t[c],
                            !(s.o.y < e.y && s.d.y < e.y) && !(s.o.y >= e.y && s.d.y >= e.y) && (s.o.x === s.d.x && s.o.x >= e.x ? a = s.o.x : (i = 0,
                            n = (s.d.y - s.o.y) / (s.d.x - s.o.x),
                            o = e.y - i * e.x,
                            r = s.o.y - n * s.o.x,
                            a = -(o - r) / (i - n)),
                            a >= e.x && (l += 1),
                            2 === l))
                                break;
                        return l
                    },
                    getBoundingRect: function(e, t) {
                        var i = this.getCoords(e, t);
                        return o.util.makeBoundingBoxFromPoints(i)
                    },
                    getScaledWidth: function() {
                        return this._getTransformedDimensions().x
                    },
                    getScaledHeight: function() {
                        return this._getTransformedDimensions().y
                    },
                    _constrainScale: function(e) {
                        return Math.abs(e) < this.minScaleLimit ? e < 0 ? -this.minScaleLimit : this.minScaleLimit : 0 === e ? 1e-4 : e
                    },
                    scale: function(e) {
                        return this._set("scaleX", e),
                        this._set("scaleY", e),
                        this.setCoords()
                    },
                    scaleToWidth: function(e, t) {
                        var i = this.getBoundingRect(t).width / this.getScaledWidth();
                        return this.scale(e / this.width / i)
                    },
                    scaleToHeight: function(e, t) {
                        var i = this.getBoundingRect(t).height / this.getScaledHeight();
                        return this.scale(e / this.height / i)
                    },
                    calcCoords: function(e) {
                        var r = this._calcRotateMatrix()
                          , a = this._calcTranslateMatrix()
                          , s = i(a, r)
                          , l = this.getViewportTransform()
                          , c = e ? s : i(l, s)
                          , d = this._getTransformedDimensions()
                          , u = d.x / 2
                          , p = d.y / 2
                          , h = n({
                            x: -u,
                            y: -p
                        }, c)
                          , m = n({
                            x: u,
                            y: -p
                        }, c)
                          , g = n({
                            x: -u,
                            y: p
                        }, c)
                          , f = n({
                            x: u,
                            y: p
                        }, c);
                        if (!e) {
                            var v = this.padding
                              , b = t(this.angle)
                              , y = o.util.cos(b)
                              , w = o.util.sin(b)
                              , C = y * v
                              , x = w * v
                              , S = C + x
                              , P = C - x;
                            v && (h.x -= P,
                            h.y -= S,
                            m.x += S,
                            m.y -= P,
                            g.x -= S,
                            g.y += P,
                            f.x += P,
                            f.y += S);
                            var k = new o.Point((h.x + g.x) / 2,(h.y + g.y) / 2)
                              , _ = new o.Point((m.x + h.x) / 2,(m.y + h.y) / 2)
                              , A = new o.Point((f.x + m.x) / 2,(f.y + m.y) / 2)
                              , T = new o.Point((f.x + g.x) / 2,(f.y + g.y) / 2)
                              , E = new o.Point(_.x + w * this.rotatingPointOffset,_.y - y * this.rotatingPointOffset)
                        }
                        var O = {
                            tl: h,
                            tr: m,
                            br: f,
                            bl: g
                        };
                        return e || (O.ml = k,
                        O.mt = _,
                        O.mr = A,
                        O.mb = T,
                        O.mtr = E),
                        O
                    },
                    setCoords: function(e, t) {
                        return this.oCoords = this.calcCoords(e),
                        t || (this.aCoords = this.calcCoords(!0)),
                        e || this._setCornerCoords && this._setCornerCoords(),
                        this
                    },
                    _calcRotateMatrix: function() {
                        return o.util.calcRotateMatrix(this)
                    },
                    _calcTranslateMatrix: function() {
                        var e = this.getCenterPoint();
                        return [1, 0, 0, 1, e.x, e.y]
                    },
                    transformMatrixKey: function(e) {
                        var t = "_"
                          , i = "";
                        return !e && this.group && (i = this.group.transformMatrixKey(e) + t),
                        i + this.top + t + this.left + t + this.scaleX + t + this.scaleY + t + this.skewX + t + this.skewY + t + this.angle + t + this.originX + t + this.originY + t + this.width + t + this.height + t + this.strokeWidth + this.flipX + this.flipY
                    },
                    calcTransformMatrix: function(e) {
                        if (e)
                            return this.calcOwnMatrix();
                        var t = this.transformMatrixKey()
                          , n = this.matrixCache || (this.matrixCache = {});
                        if (n.key === t)
                            return n.value;
                        var o = this.calcOwnMatrix();
                        return this.group && (o = i(this.group.calcTransformMatrix(), o)),
                        n.key = t,
                        n.value = o,
                        o
                    },
                    calcOwnMatrix: function() {
                        var e = this.transformMatrixKey(!0)
                          , t = this.ownMatrixCache || (this.ownMatrixCache = {});
                        if (t.key === e)
                            return t.value;
                        var i = this._calcTranslateMatrix();
                        return this.translateX = i[4],
                        this.translateY = i[5],
                        t.key = e,
                        t.value = o.util.composeMatrix(this),
                        t.value
                    },
                    _calcDimensionsTransformMatrix: function(e, t, i) {
                        return o.util.calcDimensionsMatrix({
                            skewX: e,
                            skewY: t,
                            scaleX: this.scaleX * (i && this.flipX ? -1 : 1),
                            scaleY: this.scaleY * (i && this.flipY ? -1 : 1)
                        })
                    },
                    _getNonTransformedDimensions: function() {
                        var e = this.strokeWidth
                          , t = this.width + e
                          , i = this.height + e;
                        return {
                            x: t,
                            y: i
                        }
                    },
                    _getTransformedDimensions: function(e, t) {
                        "undefined" === typeof e && (e = this.skewX),
                        "undefined" === typeof t && (t = this.skewY);
                        var i, n, r = this._getNonTransformedDimensions(), a = 0 === e && 0 === t;
                        if (this.strokeUniform ? (i = this.width,
                        n = this.height) : (i = r.x,
                        n = r.y),
                        a)
                            return this._finalizeDimensions(i * this.scaleX, n * this.scaleY);
                        i /= 2,
                        n /= 2;
                        var s = [{
                            x: -i,
                            y: -n
                        }, {
                            x: i,
                            y: -n
                        }, {
                            x: -i,
                            y: n
                        }, {
                            x: i,
                            y: n
                        }]
                          , l = o.util.calcDimensionsMatrix({
                            scaleX: this.scaleX,
                            scaleY: this.scaleY,
                            skewX: this.skewX,
                            skewY: this.skewY
                        })
                          , c = o.util.makeBoundingBoxFromPoints(s, l);
                        return this._finalizeDimensions(c.width, c.height)
                    },
                    _finalizeDimensions: function(e, t) {
                        return this.strokeUniform ? {
                            x: e + this.strokeWidth,
                            y: t + this.strokeWidth
                        } : {
                            x: e,
                            y: t
                        }
                    },
                    _calculateCurrentDimensions: function() {
                        var e = this.getViewportTransform()
                          , t = this._getTransformedDimensions()
                          , i = o.util.transformPoint(t, e, !0);
                        return i.scalarAdd(2 * this.padding)
                    }
                })
            }(),
            o.util.object.extend(o.Object.prototype, {
                sendToBack: function() {
                    return this.group ? o.StaticCanvas.prototype.sendToBack.call(this.group, this) : this.canvas.sendToBack(this),
                    this
                },
                bringToFront: function() {
                    return this.group ? o.StaticCanvas.prototype.bringToFront.call(this.group, this) : this.canvas.bringToFront(this),
                    this
                },
                sendBackwards: function(e) {
                    return this.group ? o.StaticCanvas.prototype.sendBackwards.call(this.group, this, e) : this.canvas.sendBackwards(this, e),
                    this
                },
                bringForward: function(e) {
                    return this.group ? o.StaticCanvas.prototype.bringForward.call(this.group, this, e) : this.canvas.bringForward(this, e),
                    this
                },
                moveTo: function(e) {
                    return this.group && "activeSelection" !== this.group.type ? o.StaticCanvas.prototype.moveTo.call(this.group, this, e) : this.canvas.moveTo(this, e),
                    this
                }
            }),
            function() {
                function e(e, t) {
                    if (t) {
                        if (t.toLive)
                            return e + ": url(#SVGID_" + t.id + "); ";
                        var i = new o.Color(t)
                          , n = e + ": " + i.toRgb() + "; "
                          , r = i.getAlpha();
                        return 1 !== r && (n += e + "-opacity: " + r.toString() + "; "),
                        n
                    }
                    return e + ": none; "
                }
                var t = o.util.toFixed;
                o.util.object.extend(o.Object.prototype, {
                    getSvgStyles: function(t) {
                        var i = this.fillRule ? this.fillRule : "nonzero"
                          , n = this.strokeWidth ? this.strokeWidth : "0"
                          , o = this.strokeDashArray ? this.strokeDashArray.join(" ") : "none"
                          , r = this.strokeDashOffset ? this.strokeDashOffset : "0"
                          , a = this.strokeLineCap ? this.strokeLineCap : "butt"
                          , s = this.strokeLineJoin ? this.strokeLineJoin : "miter"
                          , l = this.strokeMiterLimit ? this.strokeMiterLimit : "4"
                          , c = "undefined" !== typeof this.opacity ? this.opacity : "1"
                          , d = this.visible ? "" : " visibility: hidden;"
                          , u = t ? "" : this.getSvgFilter()
                          , p = e("fill", this.fill)
                          , h = e("stroke", this.stroke);
                        return [h, "stroke-width: ", n, "; ", "stroke-dasharray: ", o, "; ", "stroke-linecap: ", a, "; ", "stroke-dashoffset: ", r, "; ", "stroke-linejoin: ", s, "; ", "stroke-miterlimit: ", l, "; ", p, "fill-rule: ", i, "; ", "opacity: ", c, ";", u, d].join("")
                    },
                    getSvgSpanStyles: function(t, i) {
                        var n = "; "
                          , o = t.fontFamily ? "font-family: " + (-1 === t.fontFamily.indexOf("'") && -1 === t.fontFamily.indexOf('"') ? "'" + t.fontFamily + "'" : t.fontFamily) + n : ""
                          , r = t.strokeWidth ? "stroke-width: " + t.strokeWidth + n : ""
                          , a = (o = o,
                        t.fontSize ? "font-size: " + t.fontSize + "px" + n : "")
                          , s = t.fontStyle ? "font-style: " + t.fontStyle + n : ""
                          , l = t.fontWeight ? "font-weight: " + t.fontWeight + n : ""
                          , c = t.fill ? e("fill", t.fill) : ""
                          , d = t.stroke ? e("stroke", t.stroke) : ""
                          , u = this.getSvgTextDecoration(t)
                          , p = t.deltaY ? "baseline-shift: " + -t.deltaY + "; " : "";
                        return u && (u = "text-decoration: " + u + n),
                        [d, r, o, a, s, l, u, c, p, i ? "white-space: pre; " : ""].join("")
                    },
                    getSvgTextDecoration: function(e) {
                        return "overline"in e || "underline"in e || "linethrough"in e ? (e.overline ? "overline " : "") + (e.underline ? "underline " : "") + (e.linethrough ? "line-through " : "") : ""
                    },
                    getSvgFilter: function() {
                        return this.shadow ? "filter: url(#SVGID_" + this.shadow.id + ");" : ""
                    },
                    getSvgCommons: function() {
                        return [this.id ? 'id="' + this.id + '" ' : "", this.clipPath ? 'clip-path="url(#' + this.clipPath.clipPathId + ')" ' : ""].join("")
                    },
                    getSvgTransform: function(e, t) {
                        var i = e ? this.calcTransformMatrix() : this.calcOwnMatrix()
                          , n = 'transform="' + o.util.matrixToSVG(i);
                        return n + (t || "") + this.getSvgTransformMatrix() + '" '
                    },
                    getSvgTransformMatrix: function() {
                        return this.transformMatrix ? " " + o.util.matrixToSVG(this.transformMatrix) : ""
                    },
                    _setSVGBg: function(e) {
                        if (this.backgroundColor) {
                            var i = o.Object.NUM_FRACTION_DIGITS;
                            e.push("\t\t<rect ", this._getFillAttributes(this.backgroundColor), ' x="', t(-this.width / 2, i), '" y="', t(-this.height / 2, i), '" width="', t(this.width, i), '" height="', t(this.height, i), '"></rect>\n')
                        }
                    },
                    toSVG: function(e) {
                        return this._createBaseSVGMarkup(this._toSVG(e), {
                            reviver: e
                        })
                    },
                    toClipPathSVG: function(e) {
                        return "\t" + this._createBaseClipPathSVGMarkup(this._toSVG(e), {
                            reviver: e
                        })
                    },
                    _createBaseClipPathSVGMarkup: function(e, t) {
                        t = t || {};
                        var i = t.reviver
                          , n = t.additionalTransform || ""
                          , o = [this.getSvgTransform(!0, n), this.getSvgCommons()].join("")
                          , r = e.indexOf("COMMON_PARTS");
                        return e[r] = o,
                        i ? i(e.join("")) : e.join("")
                    },
                    _createBaseSVGMarkup: function(e, t) {
                        t = t || {};
                        var i, n, r = t.noStyle, a = t.reviver, s = r ? "" : 'style="' + this.getSvgStyles() + '" ', l = t.withShadow ? 'style="' + this.getSvgFilter() + '" ' : "", c = this.clipPath, d = this.strokeUniform ? 'vector-effect="non-scaling-stroke" ' : "", u = c && c.absolutePositioned, p = this.stroke, h = this.fill, m = this.shadow, g = [], f = e.indexOf("COMMON_PARTS"), v = t.additionalTransform;
                        return c && (c.clipPathId = "CLIPPATH_" + o.Object.__uid++,
                        n = '<clipPath id="' + c.clipPathId + '" >\n' + c.toClipPathSVG(a) + "</clipPath>\n"),
                        u && g.push("<g ", l, this.getSvgCommons(), " >\n"),
                        g.push("<g ", this.getSvgTransform(!1), u ? "" : l + this.getSvgCommons(), " >\n"),
                        i = [s, d, r ? "" : this.addPaintOrder(), " ", v ? 'transform="' + v + '" ' : ""].join(""),
                        e[f] = i,
                        h && h.toLive && g.push(h.toSVG(this)),
                        p && p.toLive && g.push(p.toSVG(this)),
                        m && g.push(m.toSVG(this)),
                        c && g.push(n),
                        g.push(e.join("")),
                        g.push("</g>\n"),
                        u && g.push("</g>\n"),
                        a ? a(g.join("")) : g.join("")
                    },
                    addPaintOrder: function() {
                        return "fill" !== this.paintFirst ? ' paint-order="' + this.paintFirst + '" ' : ""
                    }
                })
            }(),
            function() {
                var e = o.util.object.extend
                  , t = "stateProperties";
                function i(t, i, n) {
                    var o = {}
                      , r = !0;
                    n.forEach((function(e) {
                        o[e] = t[e]
                    }
                    )),
                    e(t[i], o, r)
                }
                function n(e, t, i) {
                    if (e === t)
                        return !0;
                    if (Array.isArray(e)) {
                        if (!Array.isArray(t) || e.length !== t.length)
                            return !1;
                        for (var o = 0, r = e.length; o < r; o++)
                            if (!n(e[o], t[o]))
                                return !1;
                        return !0
                    }
                    if (e && "object" === typeof e) {
                        var a, s = Object.keys(e);
                        if (!t || "object" !== typeof t || !i && s.length !== Object.keys(t).length)
                            return !1;
                        for (o = 0,
                        r = s.length; o < r; o++)
                            if (a = s[o],
                            "canvas" !== a && !n(e[a], t[a]))
                                return !1;
                        return !0
                    }
                }
                o.util.object.extend(o.Object.prototype, {
                    hasStateChanged: function(e) {
                        e = e || t;
                        var i = "_" + e;
                        return Object.keys(this[i]).length < this[e].length || !n(this[i], this, !0)
                    },
                    saveState: function(e) {
                        var n = e && e.propertySet || t
                          , o = "_" + n;
                        return this[o] ? (i(this, o, this[n]),
                        e && e.stateProperties && i(this, o, e.stateProperties),
                        this) : this.setupState(e)
                    },
                    setupState: function(e) {
                        e = e || {};
                        var i = e.propertySet || t;
                        return e.propertySet = i,
                        this["_" + i] = {},
                        this.saveState(e),
                        this
                    }
                })
            }(),
            function() {
                var e = o.util.degreesToRadians;
                o.util.object.extend(o.Object.prototype, {
                    _controlsVisibility: null,
                    _findTargetCorner: function(e) {
                        if (!this.hasControls || this.group || !this.canvas || this.canvas._activeObject !== this)
                            return !1;
                        var t, i, n = e.x, o = e.y;
                        for (var r in this.__corner = 0,
                        this.oCoords)
                            if (this.isControlVisible(r) && ("mtr" !== r || this.hasRotatingPoint) && (!this.get("lockUniScaling") || "mt" !== r && "mr" !== r && "mb" !== r && "ml" !== r) && (i = this._getImageLines(this.oCoords[r].corner),
                            t = this._findCrossPoints({
                                x: n,
                                y: o
                            }, i),
                            0 !== t && t % 2 === 1))
                                return this.__corner = r,
                                r;
                        return !1
                    },
                    _setCornerCoords: function() {
                        var t, i, n = this.oCoords, r = e(45 - this.angle), a = .707106 * this.cornerSize, s = a * o.util.cos(r), l = a * o.util.sin(r);
                        for (var c in n)
                            t = n[c].x,
                            i = n[c].y,
                            n[c].corner = {
                                tl: {
                                    x: t - l,
                                    y: i - s
                                },
                                tr: {
                                    x: t + s,
                                    y: i - l
                                },
                                bl: {
                                    x: t - s,
                                    y: i + l
                                },
                                br: {
                                    x: t + l,
                                    y: i + s
                                }
                            }
                    },
                    drawSelectionBackground: function(t) {
                        if (!this.selectionBackgroundColor || this.canvas && !this.canvas.interactive || this.canvas && this.canvas._activeObject !== this)
                            return this;
                        t.save();
                        var i = this.getCenterPoint()
                          , n = this._calculateCurrentDimensions()
                          , o = this.canvas.viewportTransform;
                        return t.translate(i.x, i.y),
                        t.scale(1 / o[0], 1 / o[3]),
                        t.rotate(e(this.angle)),
                        t.fillStyle = this.selectionBackgroundColor,
                        t.fillRect(-n.x / 2, -n.y / 2, n.x, n.y),
                        t.restore(),
                        this
                    },
                    drawBorders: function(e, t) {
                        t = t || {};
                        var i = this._calculateCurrentDimensions()
                          , n = 1 / this.borderScaleFactor
                          , o = i.x + n
                          , r = i.y + n
                          , a = "undefined" !== typeof t.hasRotatingPoint ? t.hasRotatingPoint : this.hasRotatingPoint
                          , s = "undefined" !== typeof t.hasControls ? t.hasControls : this.hasControls
                          , l = "undefined" !== typeof t.rotatingPointOffset ? t.rotatingPointOffset : this.rotatingPointOffset;
                        if (e.save(),
                        e.strokeStyle = t.borderColor || this.borderColor,
                        this._setLineDash(e, t.borderDashArray || this.borderDashArray, null),
                        e.strokeRect(-o / 2, -r / 2, o, r),
                        a && this.isControlVisible("mtr") && s) {
                            var c = -r / 2;
                            e.beginPath(),
                            e.moveTo(0, c),
                            e.lineTo(0, c - l),
                            e.stroke()
                        }
                        return e.restore(),
                        this
                    },
                    drawBordersInGroup: function(e, t, i) {
                        i = i || {};
                        var n = this._getNonTransformedDimensions()
                          , r = o.util.composeMatrix({
                            scaleX: t.scaleX,
                            scaleY: t.scaleY,
                            skewX: t.skewX
                        })
                          , a = o.util.transformPoint(n, r)
                          , s = 1 / this.borderScaleFactor
                          , l = a.x + s
                          , c = a.y + s;
                        return e.save(),
                        this._setLineDash(e, i.borderDashArray || this.borderDashArray, null),
                        e.strokeStyle = i.borderColor || this.borderColor,
                        e.strokeRect(-l / 2, -c / 2, l, c),
                        e.restore(),
                        this
                    },
                    drawControls: function(e, t) {
                        t = t || {};
                        var i = this._calculateCurrentDimensions()
                          , n = i.x
                          , o = i.y
                          , r = t.cornerSize || this.cornerSize
                          , a = -(n + r) / 2
                          , s = -(o + r) / 2
                          , l = "undefined" !== typeof t.transparentCorners ? t.transparentCorners : this.transparentCorners
                          , c = "undefined" !== typeof t.hasRotatingPoint ? t.hasRotatingPoint : this.hasRotatingPoint
                          , d = l ? "stroke" : "fill";
                        return e.save(),
                        e.strokeStyle = e.fillStyle = t.cornerColor || this.cornerColor,
                        this.transparentCorners || (e.strokeStyle = t.cornerStrokeColor || this.cornerStrokeColor),
                        this._setLineDash(e, t.cornerDashArray || this.cornerDashArray, null),
                        this._drawControl("tl", e, d, a, s, t),
                        this._drawControl("tr", e, d, a + n, s, t),
                        this._drawControl("bl", e, d, a, s + o, t),
                        this._drawControl("br", e, d, a + n, s + o, t),
                        this.get("lockUniScaling") || (this._drawControl("mt", e, d, a + n / 2, s, t),
                        this._drawControl("mb", e, d, a + n / 2, s + o, t),
                        this._drawControl("mr", e, d, a + n, s + o / 2, t),
                        this._drawControl("ml", e, d, a, s + o / 2, t)),
                        c && this._drawControl("mtr", e, d, a + n / 2, s - this.rotatingPointOffset, t),
                        e.restore(),
                        this
                    },
                    _drawControl: function(e, t, i, n, o, r) {
                        if (r = r || {},
                        this.isControlVisible(e)) {
                            var a = this.cornerSize
                              , s = !this.transparentCorners && this.cornerStrokeColor;
                            switch (r.cornerStyle || this.cornerStyle) {
                            case "circle":
                                t.beginPath(),
                                t.arc(n + a / 2, o + a / 2, a / 2, 0, 2 * Math.PI, !1),
                                t[i](),
                                s && t.stroke();
                                break;
                            default:
                                this.transparentCorners || t.clearRect(n, o, a, a),
                                t[i + "Rect"](n, o, a, a),
                                s && t.strokeRect(n, o, a, a)
                            }
                        }
                    },
                    isControlVisible: function(e) {
                        return this._getControlsVisibility()[e]
                    },
                    setControlVisible: function(e, t) {
                        return this._getControlsVisibility()[e] = t,
                        this
                    },
                    setControlsVisibility: function(e) {
                        for (var t in e || (e = {}),
                        e)
                            this.setControlVisible(t, e[t]);
                        return this
                    },
                    _getControlsVisibility: function() {
                        return this._controlsVisibility || (this._controlsVisibility = {
                            tl: !0,
                            tr: !0,
                            br: !0,
                            bl: !0,
                            ml: !0,
                            mt: !0,
                            mr: !0,
                            mb: !0,
                            mtr: !0
                        }),
                        this._controlsVisibility
                    },
                    onDeselect: function() {},
                    onSelect: function() {}
                })
            }(),
            o.util.object.extend(o.StaticCanvas.prototype, {
                FX_DURATION: 500,
                fxCenterObjectH: function(e, t) {
                    t = t || {};
                    var i = function() {}
                      , n = t.onComplete || i
                      , r = t.onChange || i
                      , a = this;
                    return o.util.animate({
                        startValue: e.left,
                        endValue: this.getCenter().left,
                        duration: this.FX_DURATION,
                        onChange: function(t) {
                            e.set("left", t),
                            a.requestRenderAll(),
                            r()
                        },
                        onComplete: function() {
                            e.setCoords(),
                            n()
                        }
                    }),
                    this
                },
                fxCenterObjectV: function(e, t) {
                    t = t || {};
                    var i = function() {}
                      , n = t.onComplete || i
                      , r = t.onChange || i
                      , a = this;
                    return o.util.animate({
                        startValue: e.top,
                        endValue: this.getCenter().top,
                        duration: this.FX_DURATION,
                        onChange: function(t) {
                            e.set("top", t),
                            a.requestRenderAll(),
                            r()
                        },
                        onComplete: function() {
                            e.setCoords(),
                            n()
                        }
                    }),
                    this
                },
                fxRemove: function(e, t) {
                    t = t || {};
                    var i = function() {}
                      , n = t.onComplete || i
                      , r = t.onChange || i
                      , a = this;
                    return o.util.animate({
                        startValue: e.opacity,
                        endValue: 0,
                        duration: this.FX_DURATION,
                        onChange: function(t) {
                            e.set("opacity", t),
                            a.requestRenderAll(),
                            r()
                        },
                        onComplete: function() {
                            a.remove(e),
                            n()
                        }
                    }),
                    this
                }
            }),
            o.util.object.extend(o.Object.prototype, {
                animate: function() {
                    if (arguments[0] && "object" === typeof arguments[0]) {
                        var e, t, i = [];
                        for (e in arguments[0])
                            i.push(e);
                        for (var n = 0, o = i.length; n < o; n++)
                            e = i[n],
                            t = n !== o - 1,
                            this._animate(e, arguments[0][e], arguments[1], t)
                    } else
                        this._animate.apply(this, arguments);
                    return this
                },
                _animate: function(e, t, i, n) {
                    var r, a = this;
                    t = t.toString(),
                    i = i ? o.util.object.clone(i) : {},
                    ~e.indexOf(".") && (r = e.split("."));
                    var s = r ? this.get(r[0])[r[1]] : this.get(e);
                    "from"in i || (i.from = s),
                    t = ~t.indexOf("=") ? s + parseFloat(t.replace("=", "")) : parseFloat(t),
                    o.util.animate({
                        startValue: i.from,
                        endValue: t,
                        byValue: i.by,
                        easing: i.easing,
                        duration: i.duration,
                        abort: i.abort && function() {
                            return i.abort.call(a)
                        }
                        ,
                        onChange: function(t, o, s) {
                            r ? a[r[0]][r[1]] = t : a.set(e, t),
                            n || i.onChange && i.onChange(t, o, s)
                        },
                        onComplete: function(e, t, o) {
                            n || (a.setCoords(),
                            i.onComplete && i.onComplete(e, t, o))
                        }
                    })
                }
            }),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.util.object.extend
                  , n = t.util.object.clone
                  , o = {
                    x1: 1,
                    x2: 1,
                    y1: 1,
                    y2: 1
                }
                  , r = t.StaticCanvas.supports("setLineDash");
                function a(e, t) {
                    var i = e.origin
                      , n = e.axis1
                      , o = e.axis2
                      , r = e.dimension
                      , a = t.nearest
                      , s = t.center
                      , l = t.farthest;
                    return function() {
                        switch (this.get(i)) {
                        case a:
                            return Math.min(this.get(n), this.get(o));
                        case s:
                            return Math.min(this.get(n), this.get(o)) + .5 * this.get(r);
                        case l:
                            return Math.max(this.get(n), this.get(o))
                        }
                    }
                }
                t.Line ? t.warn("fabric.Line is already defined") : (t.Line = t.util.createClass(t.Object, {
                    type: "line",
                    x1: 0,
                    y1: 0,
                    x2: 0,
                    y2: 0,
                    cacheProperties: t.Object.prototype.cacheProperties.concat("x1", "x2", "y1", "y2"),
                    initialize: function(e, t) {
                        e || (e = [0, 0, 0, 0]),
                        this.callSuper("initialize", t),
                        this.set("x1", e[0]),
                        this.set("y1", e[1]),
                        this.set("x2", e[2]),
                        this.set("y2", e[3]),
                        this._setWidthHeight(t)
                    },
                    _setWidthHeight: function(e) {
                        e || (e = {}),
                        this.width = Math.abs(this.x2 - this.x1),
                        this.height = Math.abs(this.y2 - this.y1),
                        this.left = "left"in e ? e.left : this._getLeftToOriginX(),
                        this.top = "top"in e ? e.top : this._getTopToOriginY()
                    },
                    _set: function(e, t) {
                        return this.callSuper("_set", e, t),
                        "undefined" !== typeof o[e] && this._setWidthHeight(),
                        this
                    },
                    _getLeftToOriginX: a({
                        origin: "originX",
                        axis1: "x1",
                        axis2: "x2",
                        dimension: "width"
                    }, {
                        nearest: "left",
                        center: "center",
                        farthest: "right"
                    }),
                    _getTopToOriginY: a({
                        origin: "originY",
                        axis1: "y1",
                        axis2: "y2",
                        dimension: "height"
                    }, {
                        nearest: "top",
                        center: "center",
                        farthest: "bottom"
                    }),
                    _render: function(e) {
                        if (e.beginPath(),
                        !this.strokeDashArray || this.strokeDashArray && r) {
                            var t = this.calcLinePoints();
                            e.moveTo(t.x1, t.y1),
                            e.lineTo(t.x2, t.y2)
                        }
                        e.lineWidth = this.strokeWidth;
                        var i = e.strokeStyle;
                        e.strokeStyle = this.stroke || e.fillStyle,
                        this.stroke && this._renderStroke(e),
                        e.strokeStyle = i
                    },
                    _renderDashedStroke: function(e) {
                        var i = this.calcLinePoints();
                        e.beginPath(),
                        t.util.drawDashedLine(e, i.x1, i.y1, i.x2, i.y2, this.strokeDashArray),
                        e.closePath()
                    },
                    _findCenterFromElement: function() {
                        return {
                            x: (this.x1 + this.x2) / 2,
                            y: (this.y1 + this.y2) / 2
                        }
                    },
                    toObject: function(e) {
                        return i(this.callSuper("toObject", e), this.calcLinePoints())
                    },
                    _getNonTransformedDimensions: function() {
                        var e = this.callSuper("_getNonTransformedDimensions");
                        return "butt" === this.strokeLineCap && (0 === this.width && (e.y -= this.strokeWidth),
                        0 === this.height && (e.x -= this.strokeWidth)),
                        e
                    },
                    calcLinePoints: function() {
                        var e = this.x1 <= this.x2 ? -1 : 1
                          , t = this.y1 <= this.y2 ? -1 : 1
                          , i = e * this.width * .5
                          , n = t * this.height * .5
                          , o = e * this.width * -.5
                          , r = t * this.height * -.5;
                        return {
                            x1: i,
                            x2: o,
                            y1: n,
                            y2: r
                        }
                    },
                    _toSVG: function() {
                        var e = this.calcLinePoints();
                        return ["<line ", "COMMON_PARTS", 'x1="', e.x1, '" y1="', e.y1, '" x2="', e.x2, '" y2="', e.y2, '" />\n']
                    }
                }),
                t.Line.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),
                t.Line.fromElement = function(e, n, o) {
                    o = o || {};
                    var r = t.parseAttributes(e, t.Line.ATTRIBUTE_NAMES)
                      , a = [r.x1 || 0, r.y1 || 0, r.x2 || 0, r.y2 || 0];
                    n(new t.Line(a,i(r, o)))
                }
                ,
                t.Line.fromObject = function(e, i) {
                    function o(e) {
                        delete e.points,
                        i && i(e)
                    }
                    var r = n(e, !0);
                    r.points = [e.x1, e.y1, e.x2, e.y2],
                    t.Object._fromObject("Line", r, o, "points")
                }
                )
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = Math.PI;
                function n(e) {
                    return "radius"in e && e.radius >= 0
                }
                t.Circle ? t.warn("fabric.Circle is already defined.") : (t.Circle = t.util.createClass(t.Object, {
                    type: "circle",
                    radius: 0,
                    startAngle: 0,
                    endAngle: 2 * i,
                    cacheProperties: t.Object.prototype.cacheProperties.concat("radius", "startAngle", "endAngle"),
                    _set: function(e, t) {
                        return this.callSuper("_set", e, t),
                        "radius" === e && this.setRadius(t),
                        this
                    },
                    toObject: function(e) {
                        return this.callSuper("toObject", ["radius", "startAngle", "endAngle"].concat(e))
                    },
                    _toSVG: function() {
                        var e, n = 0, o = 0, r = (this.endAngle - this.startAngle) % (2 * i);
                        if (0 === r)
                            e = ["<circle ", "COMMON_PARTS", 'cx="' + n + '" cy="' + o + '" ', 'r="', this.radius, '" />\n'];
                        else {
                            var a = t.util.cos(this.startAngle) * this.radius
                              , s = t.util.sin(this.startAngle) * this.radius
                              , l = t.util.cos(this.endAngle) * this.radius
                              , c = t.util.sin(this.endAngle) * this.radius
                              , d = r > i ? "1" : "0";
                            e = ['<path d="M ' + a + " " + s, " A " + this.radius + " " + this.radius, " 0 ", +d + " 1", " " + l + " " + c, '" ', "COMMON_PARTS", " />\n"]
                        }
                        return e
                    },
                    _render: function(e) {
                        e.beginPath(),
                        e.arc(0, 0, this.radius, this.startAngle, this.endAngle, !1),
                        this._renderPaintInOrder(e)
                    },
                    getRadiusX: function() {
                        return this.get("radius") * this.get("scaleX")
                    },
                    getRadiusY: function() {
                        return this.get("radius") * this.get("scaleY")
                    },
                    setRadius: function(e) {
                        return this.radius = e,
                        this.set("width", 2 * e).set("height", 2 * e)
                    }
                }),
                t.Circle.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),
                t.Circle.fromElement = function(e, i) {
                    var o = t.parseAttributes(e, t.Circle.ATTRIBUTE_NAMES);
                    if (!n(o))
                        throw new Error("value of `r` attribute is required and can not be negative");
                    o.left = (o.left || 0) - o.radius,
                    o.top = (o.top || 0) - o.radius,
                    i(new t.Circle(o))
                }
                ,
                t.Circle.fromObject = function(e, i) {
                    return t.Object._fromObject("Circle", e, i)
                }
                )
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {});
                t.Triangle ? t.warn("fabric.Triangle is already defined") : (t.Triangle = t.util.createClass(t.Object, {
                    type: "triangle",
                    width: 100,
                    height: 100,
                    _render: function(e) {
                        var t = this.width / 2
                          , i = this.height / 2;
                        e.beginPath(),
                        e.moveTo(-t, i),
                        e.lineTo(0, -i),
                        e.lineTo(t, i),
                        e.closePath(),
                        this._renderPaintInOrder(e)
                    },
                    _renderDashedStroke: function(e) {
                        var i = this.width / 2
                          , n = this.height / 2;
                        e.beginPath(),
                        t.util.drawDashedLine(e, -i, n, 0, -n, this.strokeDashArray),
                        t.util.drawDashedLine(e, 0, -n, i, n, this.strokeDashArray),
                        t.util.drawDashedLine(e, i, n, -i, n, this.strokeDashArray),
                        e.closePath()
                    },
                    _toSVG: function() {
                        var e = this.width / 2
                          , t = this.height / 2
                          , i = [-e + " " + t, "0 " + -t, e + " " + t].join(",");
                        return ["<polygon ", "COMMON_PARTS", 'points="', i, '" />']
                    }
                }),
                t.Triangle.fromObject = function(e, i) {
                    return t.Object._fromObject("Triangle", e, i)
                }
                )
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = 2 * Math.PI;
                t.Ellipse ? t.warn("fabric.Ellipse is already defined.") : (t.Ellipse = t.util.createClass(t.Object, {
                    type: "ellipse",
                    rx: 0,
                    ry: 0,
                    cacheProperties: t.Object.prototype.cacheProperties.concat("rx", "ry"),
                    initialize: function(e) {
                        this.callSuper("initialize", e),
                        this.set("rx", e && e.rx || 0),
                        this.set("ry", e && e.ry || 0)
                    },
                    _set: function(e, t) {
                        switch (this.callSuper("_set", e, t),
                        e) {
                        case "rx":
                            this.rx = t,
                            this.set("width", 2 * t);
                            break;
                        case "ry":
                            this.ry = t,
                            this.set("height", 2 * t);
                            break
                        }
                        return this
                    },
                    getRx: function() {
                        return this.get("rx") * this.get("scaleX")
                    },
                    getRy: function() {
                        return this.get("ry") * this.get("scaleY")
                    },
                    toObject: function(e) {
                        return this.callSuper("toObject", ["rx", "ry"].concat(e))
                    },
                    _toSVG: function() {
                        return ["<ellipse ", "COMMON_PARTS", 'cx="0" cy="0" ', 'rx="', this.rx, '" ry="', this.ry, '" />\n']
                    },
                    _render: function(e) {
                        e.beginPath(),
                        e.save(),
                        e.transform(1, 0, 0, this.ry / this.rx, 0, 0),
                        e.arc(0, 0, this.rx, 0, i, !1),
                        e.restore(),
                        this._renderPaintInOrder(e)
                    }
                }),
                t.Ellipse.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),
                t.Ellipse.fromElement = function(e, i) {
                    var n = t.parseAttributes(e, t.Ellipse.ATTRIBUTE_NAMES);
                    n.left = (n.left || 0) - n.rx,
                    n.top = (n.top || 0) - n.ry,
                    i(new t.Ellipse(n))
                }
                ,
                t.Ellipse.fromObject = function(e, i) {
                    return t.Object._fromObject("Ellipse", e, i)
                }
                )
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.util.object.extend;
                t.Rect ? t.warn("fabric.Rect is already defined") : (t.Rect = t.util.createClass(t.Object, {
                    stateProperties: t.Object.prototype.stateProperties.concat("rx", "ry"),
                    type: "rect",
                    rx: 0,
                    ry: 0,
                    cacheProperties: t.Object.prototype.cacheProperties.concat("rx", "ry"),
                    initialize: function(e) {
                        this.callSuper("initialize", e),
                        this._initRxRy()
                    },
                    _initRxRy: function() {
                        this.rx && !this.ry ? this.ry = this.rx : this.ry && !this.rx && (this.rx = this.ry)
                    },
                    _render: function(e) {
                        var t = this.rx ? Math.min(this.rx, this.width / 2) : 0
                          , i = this.ry ? Math.min(this.ry, this.height / 2) : 0
                          , n = this.width
                          , o = this.height
                          , r = -this.width / 2
                          , a = -this.height / 2
                          , s = 0 !== t || 0 !== i
                          , l = .4477152502;
                        e.beginPath(),
                        e.moveTo(r + t, a),
                        e.lineTo(r + n - t, a),
                        s && e.bezierCurveTo(r + n - l * t, a, r + n, a + l * i, r + n, a + i),
                        e.lineTo(r + n, a + o - i),
                        s && e.bezierCurveTo(r + n, a + o - l * i, r + n - l * t, a + o, r + n - t, a + o),
                        e.lineTo(r + t, a + o),
                        s && e.bezierCurveTo(r + l * t, a + o, r, a + o - l * i, r, a + o - i),
                        e.lineTo(r, a + i),
                        s && e.bezierCurveTo(r, a + l * i, r + l * t, a, r + t, a),
                        e.closePath(),
                        this._renderPaintInOrder(e)
                    },
                    _renderDashedStroke: function(e) {
                        var i = -this.width / 2
                          , n = -this.height / 2
                          , o = this.width
                          , r = this.height;
                        e.beginPath(),
                        t.util.drawDashedLine(e, i, n, i + o, n, this.strokeDashArray),
                        t.util.drawDashedLine(e, i + o, n, i + o, n + r, this.strokeDashArray),
                        t.util.drawDashedLine(e, i + o, n + r, i, n + r, this.strokeDashArray),
                        t.util.drawDashedLine(e, i, n + r, i, n, this.strokeDashArray),
                        e.closePath()
                    },
                    toObject: function(e) {
                        return this.callSuper("toObject", ["rx", "ry"].concat(e))
                    },
                    _toSVG: function() {
                        var e = -this.width / 2
                          , t = -this.height / 2;
                        return ["<rect ", "COMMON_PARTS", 'x="', e, '" y="', t, '" rx="', this.rx, '" ry="', this.ry, '" width="', this.width, '" height="', this.height, '" />\n']
                    }
                }),
                t.Rect.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),
                t.Rect.fromElement = function(e, n, o) {
                    if (!e)
                        return n(null);
                    o = o || {};
                    var r = t.parseAttributes(e, t.Rect.ATTRIBUTE_NAMES);
                    r.left = r.left || 0,
                    r.top = r.top || 0,
                    r.height = r.height || 0,
                    r.width = r.width || 0;
                    var a = new t.Rect(i(o ? t.util.object.clone(o) : {}, r));
                    a.visible = a.visible && a.width > 0 && a.height > 0,
                    n(a)
                }
                ,
                t.Rect.fromObject = function(e, i) {
                    return t.Object._fromObject("Rect", e, i)
                }
                )
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.util.object.extend
                  , n = t.util.array.min
                  , o = t.util.array.max
                  , r = t.util.toFixed;
                t.Polyline ? t.warn("fabric.Polyline is already defined") : (t.Polyline = t.util.createClass(t.Object, {
                    type: "polyline",
                    points: null,
                    cacheProperties: t.Object.prototype.cacheProperties.concat("points"),
                    initialize: function(e, t) {
                        t = t || {},
                        this.points = e || [],
                        this.callSuper("initialize", t),
                        this._setPositionDimensions(t)
                    },
                    _setPositionDimensions: function(e) {
                        var t, i = this._calcDimensions(e);
                        this.width = i.width,
                        this.height = i.height,
                        e.fromSVG || (t = this.translateToGivenOrigin({
                            x: i.left - this.strokeWidth / 2,
                            y: i.top - this.strokeWidth / 2
                        }, "left", "top", this.originX, this.originY)),
                        "undefined" === typeof e.left && (this.left = e.fromSVG ? i.left : t.x),
                        "undefined" === typeof e.top && (this.top = e.fromSVG ? i.top : t.y),
                        this.pathOffset = {
                            x: i.left + this.width / 2,
                            y: i.top + this.height / 2
                        }
                    },
                    _calcDimensions: function() {
                        var e = this.points
                          , t = n(e, "x") || 0
                          , i = n(e, "y") || 0
                          , r = o(e, "x") || 0
                          , a = o(e, "y") || 0
                          , s = r - t
                          , l = a - i;
                        return {
                            left: t,
                            top: i,
                            width: s,
                            height: l
                        }
                    },
                    toObject: function(e) {
                        return i(this.callSuper("toObject", e), {
                            points: this.points.concat()
                        })
                    },
                    _toSVG: function() {
                        for (var e = [], i = this.pathOffset.x, n = this.pathOffset.y, o = t.Object.NUM_FRACTION_DIGITS, a = 0, s = this.points.length; a < s; a++)
                            e.push(r(this.points[a].x - i, o), ",", r(this.points[a].y - n, o), " ");
                        return ["<" + this.type + " ", "COMMON_PARTS", 'points="', e.join(""), '" />\n']
                    },
                    commonRender: function(e) {
                        var t, i = this.points.length, n = this.pathOffset.x, o = this.pathOffset.y;
                        if (!i || isNaN(this.points[i - 1].y))
                            return !1;
                        e.beginPath(),
                        e.moveTo(this.points[0].x - n, this.points[0].y - o);
                        for (var r = 0; r < i; r++)
                            t = this.points[r],
                            e.lineTo(t.x - n, t.y - o);
                        return !0
                    },
                    _render: function(e) {
                        this.commonRender(e) && this._renderPaintInOrder(e)
                    },
                    _renderDashedStroke: function(e) {
                        var i, n;
                        e.beginPath();
                        for (var o = 0, r = this.points.length; o < r; o++)
                            i = this.points[o],
                            n = this.points[o + 1] || i,
                            t.util.drawDashedLine(e, i.x, i.y, n.x, n.y, this.strokeDashArray)
                    },
                    complexity: function() {
                        return this.get("points").length
                    }
                }),
                t.Polyline.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat(),
                t.Polyline.fromElementGenerator = function(e) {
                    return function(n, o, r) {
                        if (!n)
                            return o(null);
                        r || (r = {});
                        var a = t.parsePointsAttribute(n.getAttribute("points"))
                          , s = t.parseAttributes(n, t[e].ATTRIBUTE_NAMES);
                        s.fromSVG = !0,
                        o(new t[e](a,i(s, r)))
                    }
                }
                ,
                t.Polyline.fromElement = t.Polyline.fromElementGenerator("Polyline"),
                t.Polyline.fromObject = function(e, i) {
                    return t.Object._fromObject("Polyline", e, i, "points")
                }
                )
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {});
                t.Polygon ? t.warn("fabric.Polygon is already defined") : (t.Polygon = t.util.createClass(t.Polyline, {
                    type: "polygon",
                    _render: function(e) {
                        this.commonRender(e) && (e.closePath(),
                        this._renderPaintInOrder(e))
                    },
                    _renderDashedStroke: function(e) {
                        this.callSuper("_renderDashedStroke", e),
                        e.closePath()
                    }
                }),
                t.Polygon.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat(),
                t.Polygon.fromElement = t.Polyline.fromElementGenerator("Polygon"),
                t.Polygon.fromObject = function(e, i) {
                    return t.Object._fromObject("Polygon", e, i, "points")
                }
                )
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.util.array.min
                  , n = t.util.array.max
                  , o = t.util.object.extend
                  , r = Object.prototype.toString
                  , a = t.util.drawArc
                  , s = t.util.toFixed
                  , l = {
                    m: 2,
                    l: 2,
                    h: 1,
                    v: 1,
                    c: 6,
                    s: 4,
                    q: 4,
                    t: 2,
                    a: 7
                }
                  , c = {
                    m: "l",
                    M: "L"
                };
                t.Path ? t.warn("fabric.Path is already defined") : (t.Path = t.util.createClass(t.Object, {
                    type: "path",
                    path: null,
                    cacheProperties: t.Object.prototype.cacheProperties.concat("path", "fillRule"),
                    stateProperties: t.Object.prototype.stateProperties.concat("path"),
                    initialize: function(e, i) {
                        i = i || {},
                        this.callSuper("initialize", i),
                        e || (e = []);
                        var n = "[object Array]" === r.call(e);
                        this.path = n ? e : e.match && e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),
                        this.path && (n || (this.path = this._parsePath()),
                        t.Polyline.prototype._setPositionDimensions.call(this, i))
                    },
                    _renderPathCommands: function(e) {
                        var t, i, n, o = null, r = 0, s = 0, l = 0, c = 0, d = 0, u = 0, p = -this.pathOffset.x, h = -this.pathOffset.y;
                        e.beginPath();
                        for (var m = 0, g = this.path.length; m < g; ++m) {
                            switch (t = this.path[m],
                            t[0]) {
                            case "l":
                                l += t[1],
                                c += t[2],
                                e.lineTo(l + p, c + h);
                                break;
                            case "L":
                                l = t[1],
                                c = t[2],
                                e.lineTo(l + p, c + h);
                                break;
                            case "h":
                                l += t[1],
                                e.lineTo(l + p, c + h);
                                break;
                            case "H":
                                l = t[1],
                                e.lineTo(l + p, c + h);
                                break;
                            case "v":
                                c += t[1],
                                e.lineTo(l + p, c + h);
                                break;
                            case "V":
                                c = t[1],
                                e.lineTo(l + p, c + h);
                                break;
                            case "m":
                                l += t[1],
                                c += t[2],
                                r = l,
                                s = c,
                                e.moveTo(l + p, c + h);
                                break;
                            case "M":
                                l = t[1],
                                c = t[2],
                                r = l,
                                s = c,
                                e.moveTo(l + p, c + h);
                                break;
                            case "c":
                                i = l + t[5],
                                n = c + t[6],
                                d = l + t[3],
                                u = c + t[4],
                                e.bezierCurveTo(l + t[1] + p, c + t[2] + h, d + p, u + h, i + p, n + h),
                                l = i,
                                c = n;
                                break;
                            case "C":
                                l = t[5],
                                c = t[6],
                                d = t[3],
                                u = t[4],
                                e.bezierCurveTo(t[1] + p, t[2] + h, d + p, u + h, l + p, c + h);
                                break;
                            case "s":
                                i = l + t[3],
                                n = c + t[4],
                                null === o[0].match(/[CcSs]/) ? (d = l,
                                u = c) : (d = 2 * l - d,
                                u = 2 * c - u),
                                e.bezierCurveTo(d + p, u + h, l + t[1] + p, c + t[2] + h, i + p, n + h),
                                d = l + t[1],
                                u = c + t[2],
                                l = i,
                                c = n;
                                break;
                            case "S":
                                i = t[3],
                                n = t[4],
                                null === o[0].match(/[CcSs]/) ? (d = l,
                                u = c) : (d = 2 * l - d,
                                u = 2 * c - u),
                                e.bezierCurveTo(d + p, u + h, t[1] + p, t[2] + h, i + p, n + h),
                                l = i,
                                c = n,
                                d = t[1],
                                u = t[2];
                                break;
                            case "q":
                                i = l + t[3],
                                n = c + t[4],
                                d = l + t[1],
                                u = c + t[2],
                                e.quadraticCurveTo(d + p, u + h, i + p, n + h),
                                l = i,
                                c = n;
                                break;
                            case "Q":
                                i = t[3],
                                n = t[4],
                                e.quadraticCurveTo(t[1] + p, t[2] + h, i + p, n + h),
                                l = i,
                                c = n,
                                d = t[1],
                                u = t[2];
                                break;
                            case "t":
                                i = l + t[1],
                                n = c + t[2],
                                null === o[0].match(/[QqTt]/) ? (d = l,
                                u = c) : (d = 2 * l - d,
                                u = 2 * c - u),
                                e.quadraticCurveTo(d + p, u + h, i + p, n + h),
                                l = i,
                                c = n;
                                break;
                            case "T":
                                i = t[1],
                                n = t[2],
                                null === o[0].match(/[QqTt]/) ? (d = l,
                                u = c) : (d = 2 * l - d,
                                u = 2 * c - u),
                                e.quadraticCurveTo(d + p, u + h, i + p, n + h),
                                l = i,
                                c = n;
                                break;
                            case "a":
                                a(e, l + p, c + h, [t[1], t[2], t[3], t[4], t[5], t[6] + l + p, t[7] + c + h]),
                                l += t[6],
                                c += t[7];
                                break;
                            case "A":
                                a(e, l + p, c + h, [t[1], t[2], t[3], t[4], t[5], t[6] + p, t[7] + h]),
                                l = t[6],
                                c = t[7];
                                break;
                            case "z":
                            case "Z":
                                l = r,
                                c = s,
                                e.closePath();
                                break
                            }
                            o = t
                        }
                    },
                    _render: function(e) {
                        this._renderPathCommands(e),
                        this._renderPaintInOrder(e)
                    },
                    toString: function() {
                        return "#<fabric.Path (" + this.complexity() + '): { "top": ' + this.top + ', "left": ' + this.left + " }>"
                    },
                    toObject: function(e) {
                        return o(this.callSuper("toObject", e), {
                            path: this.path.map((function(e) {
                                return e.slice()
                            }
                            ))
                        })
                    },
                    toDatalessObject: function(e) {
                        var t = this.toObject(["sourcePath"].concat(e));
                        return t.sourcePath && delete t.path,
                        t
                    },
                    _toSVG: function() {
                        var e = this.path.map((function(e) {
                            return e.join(" ")
                        }
                        )).join(" ");
                        return ["<path ", "COMMON_PARTS", 'd="', e, '" stroke-linecap="round" ', "/>\n"]
                    },
                    _getOffsetTransform: function() {
                        var e = t.Object.NUM_FRACTION_DIGITS;
                        return " translate(" + s(-this.pathOffset.x, e) + ", " + s(-this.pathOffset.y, e) + ")"
                    },
                    toClipPathSVG: function(e) {
                        var t = this._getOffsetTransform();
                        return "\t" + this._createBaseClipPathSVGMarkup(this._toSVG(), {
                            reviver: e,
                            additionalTransform: t
                        })
                    },
                    toSVG: function(e) {
                        var t = this._getOffsetTransform();
                        return this._createBaseSVGMarkup(this._toSVG(), {
                            reviver: e,
                            additionalTransform: t
                        })
                    },
                    complexity: function() {
                        return this.path.length
                    },
                    _parsePath: function() {
                        for (var e, t, i, n, o, r = [], a = [], s = /([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi, d = 0, u = this.path.length; d < u; d++) {
                            e = this.path[d],
                            n = e.slice(1).trim(),
                            a.length = 0;
                            while (i = s.exec(n))
                                a.push(i[0]);
                            o = [e.charAt(0)];
                            for (var p = 0, h = a.length; p < h; p++)
                                t = parseFloat(a[p]),
                                isNaN(t) || o.push(t);
                            var m = o[0]
                              , g = l[m.toLowerCase()]
                              , f = c[m] || m;
                            if (o.length - 1 > g)
                                for (var v = 1, b = o.length; v < b; v += g)
                                    r.push([m].concat(o.slice(v, v + g))),
                                    m = f;
                            else
                                r.push(o)
                        }
                        return r
                    },
                    _calcDimensions: function() {
                        for (var e, o, r, a, s = [], l = [], c = null, d = 0, u = 0, p = 0, h = 0, m = 0, g = 0, f = 0, v = this.path.length; f < v; ++f) {
                            switch (e = this.path[f],
                            e[0]) {
                            case "l":
                                p += e[1],
                                h += e[2],
                                a = [];
                                break;
                            case "L":
                                p = e[1],
                                h = e[2],
                                a = [];
                                break;
                            case "h":
                                p += e[1],
                                a = [];
                                break;
                            case "H":
                                p = e[1],
                                a = [];
                                break;
                            case "v":
                                h += e[1],
                                a = [];
                                break;
                            case "V":
                                h = e[1],
                                a = [];
                                break;
                            case "m":
                                p += e[1],
                                h += e[2],
                                d = p,
                                u = h,
                                a = [];
                                break;
                            case "M":
                                p = e[1],
                                h = e[2],
                                d = p,
                                u = h,
                                a = [];
                                break;
                            case "c":
                                o = p + e[5],
                                r = h + e[6],
                                m = p + e[3],
                                g = h + e[4],
                                a = t.util.getBoundsOfCurve(p, h, p + e[1], h + e[2], m, g, o, r),
                                p = o,
                                h = r;
                                break;
                            case "C":
                                m = e[3],
                                g = e[4],
                                a = t.util.getBoundsOfCurve(p, h, e[1], e[2], m, g, e[5], e[6]),
                                p = e[5],
                                h = e[6];
                                break;
                            case "s":
                                o = p + e[3],
                                r = h + e[4],
                                null === c[0].match(/[CcSs]/) ? (m = p,
                                g = h) : (m = 2 * p - m,
                                g = 2 * h - g),
                                a = t.util.getBoundsOfCurve(p, h, m, g, p + e[1], h + e[2], o, r),
                                m = p + e[1],
                                g = h + e[2],
                                p = o,
                                h = r;
                                break;
                            case "S":
                                o = e[3],
                                r = e[4],
                                null === c[0].match(/[CcSs]/) ? (m = p,
                                g = h) : (m = 2 * p - m,
                                g = 2 * h - g),
                                a = t.util.getBoundsOfCurve(p, h, m, g, e[1], e[2], o, r),
                                p = o,
                                h = r,
                                m = e[1],
                                g = e[2];
                                break;
                            case "q":
                                o = p + e[3],
                                r = h + e[4],
                                m = p + e[1],
                                g = h + e[2],
                                a = t.util.getBoundsOfCurve(p, h, m, g, m, g, o, r),
                                p = o,
                                h = r;
                                break;
                            case "Q":
                                m = e[1],
                                g = e[2],
                                a = t.util.getBoundsOfCurve(p, h, m, g, m, g, e[3], e[4]),
                                p = e[3],
                                h = e[4];
                                break;
                            case "t":
                                o = p + e[1],
                                r = h + e[2],
                                null === c[0].match(/[QqTt]/) ? (m = p,
                                g = h) : (m = 2 * p - m,
                                g = 2 * h - g),
                                a = t.util.getBoundsOfCurve(p, h, m, g, m, g, o, r),
                                p = o,
                                h = r;
                                break;
                            case "T":
                                o = e[1],
                                r = e[2],
                                null === c[0].match(/[QqTt]/) ? (m = p,
                                g = h) : (m = 2 * p - m,
                                g = 2 * h - g),
                                a = t.util.getBoundsOfCurve(p, h, m, g, m, g, o, r),
                                p = o,
                                h = r;
                                break;
                            case "a":
                                a = t.util.getBoundsOfArc(p, h, e[1], e[2], e[3], e[4], e[5], e[6] + p, e[7] + h),
                                p += e[6],
                                h += e[7];
                                break;
                            case "A":
                                a = t.util.getBoundsOfArc(p, h, e[1], e[2], e[3], e[4], e[5], e[6], e[7]),
                                p = e[6],
                                h = e[7];
                                break;
                            case "z":
                            case "Z":
                                p = d,
                                h = u;
                                break
                            }
                            c = e,
                            a.forEach((function(e) {
                                s.push(e.x),
                                l.push(e.y)
                            }
                            )),
                            s.push(p),
                            l.push(h)
                        }
                        var b = i(s) || 0
                          , y = i(l) || 0
                          , w = n(s) || 0
                          , C = n(l) || 0
                          , x = w - b
                          , S = C - y;
                        return {
                            left: b,
                            top: y,
                            width: x,
                            height: S
                        }
                    }
                }),
                t.Path.fromObject = function(e, i) {
                    if ("string" === typeof e.sourcePath) {
                        var n = e.sourcePath;
                        t.loadSVGFromURL(n, (function(t) {
                            var n = t[0];
                            n.setOptions(e),
                            i && i(n)
                        }
                        ))
                    } else
                        t.Object._fromObject("Path", e, i, "path")
                }
                ,
                t.Path.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat(["d"]),
                t.Path.fromElement = function(e, i, n) {
                    var r = t.parseAttributes(e, t.Path.ATTRIBUTE_NAMES);
                    r.fromSVG = !0,
                    i(new t.Path(r.d,o(r, n)))
                }
                )
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.util.array.min
                  , n = t.util.array.max;
                t.Group || (t.Group = t.util.createClass(t.Object, t.Collection, {
                    type: "group",
                    strokeWidth: 0,
                    subTargetCheck: !1,
                    cacheProperties: [],
                    useSetOnGroup: !1,
                    initialize: function(e, t, i) {
                        t = t || {},
                        this._objects = [],
                        i && this.callSuper("initialize", t),
                        this._objects = e || [];
                        for (var n = this._objects.length; n--; )
                            this._objects[n].group = this;
                        if (i)
                            this._updateObjectsACoords();
                        else {
                            var o = t && t.centerPoint;
                            void 0 !== t.originX && (this.originX = t.originX),
                            void 0 !== t.originY && (this.originY = t.originY),
                            o || this._calcBounds(),
                            this._updateObjectsCoords(o),
                            delete t.centerPoint,
                            this.callSuper("initialize", t)
                        }
                        this.setCoords()
                    },
                    _updateObjectsACoords: function() {
                        for (var e = !0, t = !0, i = this._objects.length; i--; )
                            this._objects[i].setCoords(e, t)
                    },
                    _updateObjectsCoords: function(e) {
                        e = e || this.getCenterPoint();
                        for (var t = this._objects.length; t--; )
                            this._updateObjectCoords(this._objects[t], e)
                    },
                    _updateObjectCoords: function(e, t) {
                        var i = e.left
                          , n = e.top
                          , o = !0
                          , r = !0;
                        e.set({
                            left: i - t.x,
                            top: n - t.y
                        }),
                        e.group = this,
                        e.setCoords(o, r)
                    },
                    toString: function() {
                        return "#<fabric.Group: (" + this.complexity() + ")>"
                    },
                    addWithUpdate: function(e) {
                        return this._restoreObjectsState(),
                        t.util.resetObjectTransform(this),
                        e && (this._objects.push(e),
                        e.group = this,
                        e._set("canvas", this.canvas)),
                        this._calcBounds(),
                        this._updateObjectsCoords(),
                        this.setCoords(),
                        this.dirty = !0,
                        this
                    },
                    removeWithUpdate: function(e) {
                        return this._restoreObjectsState(),
                        t.util.resetObjectTransform(this),
                        this.remove(e),
                        this._calcBounds(),
                        this._updateObjectsCoords(),
                        this.setCoords(),
                        this.dirty = !0,
                        this
                    },
                    _onObjectAdded: function(e) {
                        this.dirty = !0,
                        e.group = this,
                        e._set("canvas", this.canvas)
                    },
                    _onObjectRemoved: function(e) {
                        this.dirty = !0,
                        delete e.group
                    },
                    _set: function(e, i) {
                        var n = this._objects.length;
                        if (this.useSetOnGroup)
                            while (n--)
                                this._objects[n].setOnGroup(e, i);
                        if ("canvas" === e)
                            while (n--)
                                this._objects[n]._set(e, i);
                        t.Object.prototype._set.call(this, e, i)
                    },
                    toObject: function(e) {
                        var i = this.includeDefaultValues
                          , n = this._objects.map((function(t) {
                            var n = t.includeDefaultValues;
                            t.includeDefaultValues = i;
                            var o = t.toObject(e);
                            return t.includeDefaultValues = n,
                            o
                        }
                        ))
                          , o = t.Object.prototype.toObject.call(this, e);
                        return o.objects = n,
                        o
                    },
                    toDatalessObject: function(e) {
                        var i, n = this.sourcePath;
                        if (n)
                            i = n;
                        else {
                            var o = this.includeDefaultValues;
                            i = this._objects.map((function(t) {
                                var i = t.includeDefaultValues;
                                t.includeDefaultValues = o;
                                var n = t.toDatalessObject(e);
                                return t.includeDefaultValues = i,
                                n
                            }
                            ))
                        }
                        var r = t.Object.prototype.toDatalessObject.call(this, e);
                        return r.objects = i,
                        r
                    },
                    render: function(e) {
                        this._transformDone = !0,
                        this.callSuper("render", e),
                        this._transformDone = !1
                    },
                    shouldCache: function() {
                        var e = t.Object.prototype.shouldCache.call(this);
                        if (e)
                            for (var i = 0, n = this._objects.length; i < n; i++)
                                if (this._objects[i].willDrawShadow())
                                    return this.ownCaching = !1,
                                    !1;
                        return e
                    },
                    willDrawShadow: function() {
                        if (this.shadow)
                            return t.Object.prototype.willDrawShadow.call(this);
                        for (var e = 0, i = this._objects.length; e < i; e++)
                            if (this._objects[e].willDrawShadow())
                                return !0;
                        return !1
                    },
                    isOnACache: function() {
                        return this.ownCaching || this.group && this.group.isOnACache()
                    },
                    drawObject: function(e) {
                        for (var t = 0, i = this._objects.length; t < i; t++)
                            this._objects[t].render(e);
                        this._drawClipPath(e)
                    },
                    isCacheDirty: function(e) {
                        if (this.callSuper("isCacheDirty", e))
                            return !0;
                        if (!this.statefullCache)
                            return !1;
                        for (var t = 0, i = this._objects.length; t < i; t++)
                            if (this._objects[t].isCacheDirty(!0)) {
                                if (this._cacheCanvas) {
                                    var n = this.cacheWidth / this.zoomX
                                      , o = this.cacheHeight / this.zoomY;
                                    this._cacheContext.clearRect(-n / 2, -o / 2, n, o)
                                }
                                return !0
                            }
                        return !1
                    },
                    _restoreObjectsState: function() {
                        return this._objects.forEach(this._restoreObjectState, this),
                        this
                    },
                    realizeTransform: function(e) {
                        var i = e.calcTransformMatrix()
                          , n = t.util.qrDecompose(i)
                          , o = new t.Point(n.translateX,n.translateY);
                        return e.flipX = !1,
                        e.flipY = !1,
                        e.set("scaleX", n.scaleX),
                        e.set("scaleY", n.scaleY),
                        e.skewX = n.skewX,
                        e.skewY = n.skewY,
                        e.angle = n.angle,
                        e.setPositionByOrigin(o, "center", "center"),
                        e
                    },
                    _restoreObjectState: function(e) {
                        return this.realizeTransform(e),
                        e.setCoords(),
                        delete e.group,
                        this
                    },
                    destroy: function() {
                        return this._objects.forEach((function(e) {
                            e.set("dirty", !0)
                        }
                        )),
                        this._restoreObjectsState()
                    },
                    toActiveSelection: function() {
                        if (this.canvas) {
                            var e = this._objects
                              , i = this.canvas;
                            this._objects = [];
                            var n = this.toObject();
                            delete n.objects;
                            var o = new t.ActiveSelection([]);
                            return o.set(n),
                            o.type = "activeSelection",
                            i.remove(this),
                            e.forEach((function(e) {
                                e.group = o,
                                e.dirty = !0,
                                i.add(e)
                            }
                            )),
                            o.canvas = i,
                            o._objects = e,
                            i._activeObject = o,
                            o.setCoords(),
                            o
                        }
                    },
                    ungroupOnCanvas: function() {
                        return this._restoreObjectsState()
                    },
                    setObjectsCoords: function() {
                        var e = !0
                          , t = !0;
                        return this.forEachObject((function(i) {
                            i.setCoords(e, t)
                        }
                        )),
                        this
                    },
                    _calcBounds: function(e) {
                        for (var t, i, n, o = [], r = [], a = ["tr", "br", "bl", "tl"], s = 0, l = this._objects.length, c = a.length, d = !0; s < l; ++s)
                            for (t = this._objects[s],
                            t.setCoords(d),
                            n = 0; n < c; n++)
                                i = a[n],
                                o.push(t.oCoords[i].x),
                                r.push(t.oCoords[i].y);
                        this._getBounds(o, r, e)
                    },
                    _getBounds: function(e, o, r) {
                        var a = new t.Point(i(e),i(o))
                          , s = new t.Point(n(e),n(o))
                          , l = a.y || 0
                          , c = a.x || 0
                          , d = s.x - a.x || 0
                          , u = s.y - a.y || 0;
                        this.width = d,
                        this.height = u,
                        r || this.setPositionByOrigin({
                            x: c,
                            y: l
                        }, "left", "top")
                    },
                    _toSVG: function(e) {
                        for (var t = ["<g ", "COMMON_PARTS", " >\n"], i = 0, n = this._objects.length; i < n; i++)
                            t.push("\t\t", this._objects[i].toSVG(e));
                        return t.push("</g>\n"),
                        t
                    },
                    getSvgStyles: function() {
                        var e = "undefined" !== typeof this.opacity && 1 !== this.opacity ? "opacity: " + this.opacity + ";" : ""
                          , t = this.visible ? "" : " visibility: hidden;";
                        return [e, this.getSvgFilter(), t].join("")
                    },
                    toClipPathSVG: function(e) {
                        for (var t = [], i = 0, n = this._objects.length; i < n; i++)
                            t.push("\t", this._objects[i].toClipPathSVG(e));
                        return this._createBaseClipPathSVGMarkup(t, {
                            reviver: e
                        })
                    }
                }),
                t.Group.fromObject = function(e, i) {
                    t.util.enlivenObjects(e.objects, (function(n) {
                        t.util.enlivenObjects([e.clipPath], (function(o) {
                            var r = t.util.object.clone(e, !0);
                            r.clipPath = o[0],
                            delete r.objects,
                            i && i(new t.Group(n,r,!0))
                        }
                        ))
                    }
                    ))
                }
                )
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {});
                t.ActiveSelection || (t.ActiveSelection = t.util.createClass(t.Group, {
                    type: "activeSelection",
                    initialize: function(e, i) {
                        i = i || {},
                        this._objects = e || [];
                        for (var n = this._objects.length; n--; )
                            this._objects[n].group = this;
                        i.originX && (this.originX = i.originX),
                        i.originY && (this.originY = i.originY),
                        this._calcBounds(),
                        this._updateObjectsCoords(),
                        t.Object.prototype.initialize.call(this, i),
                        this.setCoords()
                    },
                    toGroup: function() {
                        var e = this._objects.concat();
                        this._objects = [];
                        var i = t.Object.prototype.toObject.call(this)
                          , n = new t.Group([]);
                        if (delete i.type,
                        n.set(i),
                        e.forEach((function(e) {
                            e.canvas.remove(e),
                            e.group = n
                        }
                        )),
                        n._objects = e,
                        !this.canvas)
                            return n;
                        var o = this.canvas;
                        return o.add(n),
                        o._activeObject = n,
                        n.setCoords(),
                        n
                    },
                    onDeselect: function() {
                        return this.destroy(),
                        !1
                    },
                    toString: function() {
                        return "#<fabric.ActiveSelection: (" + this.complexity() + ")>"
                    },
                    shouldCache: function() {
                        return !1
                    },
                    isOnACache: function() {
                        return !1
                    },
                    _renderControls: function(e, t, i) {
                        e.save(),
                        e.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1,
                        this.callSuper("_renderControls", e, t),
                        i = i || {},
                        "undefined" === typeof i.hasControls && (i.hasControls = !1),
                        "undefined" === typeof i.hasRotatingPoint && (i.hasRotatingPoint = !1),
                        i.forActiveSelection = !0;
                        for (var n = 0, o = this._objects.length; n < o; n++)
                            this._objects[n]._renderControls(e, i);
                        e.restore()
                    }
                }),
                t.ActiveSelection.fromObject = function(e, i) {
                    t.util.enlivenObjects(e.objects, (function(n) {
                        delete e.objects,
                        i && i(new t.ActiveSelection(n,e,!0))
                    }
                    ))
                }
                )
            }(i),
            function(e) {
                "use strict";
                var t = o.util.object.extend;
                e.fabric || (e.fabric = {}),
                e.fabric.Image ? o.warn("fabric.Image is already defined.") : (o.Image = o.util.createClass(o.Object, {
                    type: "image",
                    crossOrigin: "",
                    strokeWidth: 0,
                    srcFromAttribute: !1,
                    _lastScaleX: 1,
                    _lastScaleY: 1,
                    _filterScalingX: 1,
                    _filterScalingY: 1,
                    minimumScaleTrigger: .5,
                    stateProperties: o.Object.prototype.stateProperties.concat("cropX", "cropY"),
                    cacheKey: "",
                    cropX: 0,
                    cropY: 0,
                    initialize: function(e, t) {
                        t || (t = {}),
                        this.filters = [],
                        this.cacheKey = "texture" + o.Object.__uid++,
                        this.callSuper("initialize", t),
                        this._initElement(e, t)
                    },
                    getElement: function() {
                        return this._element || {}
                    },
                    setElement: function(e, t) {
                        return this.removeTexture(this.cacheKey),
                        this.removeTexture(this.cacheKey + "_filtered"),
                        this._element = e,
                        this._originalElement = e,
                        this._initConfig(t),
                        0 !== this.filters.length && this.applyFilters(),
                        this.resizeFilter && this.applyResizeFilters(),
                        this
                    },
                    removeTexture: function(e) {
                        var t = o.filterBackend;
                        t && t.evictCachesForKey && t.evictCachesForKey(e)
                    },
                    dispose: function() {
                        this.removeTexture(this.cacheKey),
                        this.removeTexture(this.cacheKey + "_filtered"),
                        this._cacheContext = void 0,
                        ["_originalElement", "_element", "_filteredEl", "_cacheCanvas"].forEach(function(e) {
                            o.util.cleanUpJsdomNode(this[e]),
                            this[e] = void 0
                        }
                        .bind(this))
                    },
                    setCrossOrigin: function(e) {
                        return this.crossOrigin = e,
                        this._element.crossOrigin = e,
                        this
                    },
                    getOriginalSize: function() {
                        var e = this.getElement();
                        return {
                            width: e.naturalWidth || e.width,
                            height: e.naturalHeight || e.height
                        }
                    },
                    _stroke: function(e) {
                        if (this.stroke && 0 !== this.strokeWidth) {
                            var t = this.width / 2
                              , i = this.height / 2;
                            e.beginPath(),
                            e.moveTo(-t, -i),
                            e.lineTo(t, -i),
                            e.lineTo(t, i),
                            e.lineTo(-t, i),
                            e.lineTo(-t, -i),
                            e.closePath()
                        }
                    },
                    _renderDashedStroke: function(e) {
                        var t = -this.width / 2
                          , i = -this.height / 2
                          , n = this.width
                          , r = this.height;
                        e.save(),
                        this._setStrokeStyles(e, this),
                        e.beginPath(),
                        o.util.drawDashedLine(e, t, i, t + n, i, this.strokeDashArray),
                        o.util.drawDashedLine(e, t + n, i, t + n, i + r, this.strokeDashArray),
                        o.util.drawDashedLine(e, t + n, i + r, t, i + r, this.strokeDashArray),
                        o.util.drawDashedLine(e, t, i + r, t, i, this.strokeDashArray),
                        e.closePath(),
                        e.restore()
                    },
                    toObject: function(e) {
                        var i = [];
                        this.filters.forEach((function(e) {
                            e && i.push(e.toObject())
                        }
                        ));
                        var n = t(this.callSuper("toObject", ["crossOrigin", "cropX", "cropY"].concat(e)), {
                            src: this.getSrc(),
                            filters: i
                        });
                        return this.resizeFilter && (n.resizeFilter = this.resizeFilter.toObject()),
                        n
                    },
                    hasCrop: function() {
                        return this.cropX || this.cropY || this.width < this._element.width || this.height < this._element.height
                    },
                    _toSVG: function() {
                        var e, t = [], i = [], n = -this.width / 2, r = -this.height / 2, a = "";
                        if (this.hasCrop()) {
                            var s = o.Object.__uid++;
                            t.push('<clipPath id="imageCrop_' + s + '">\n', '\t<rect x="' + n + '" y="' + r + '" width="' + this.width + '" height="' + this.height + '" />\n', "</clipPath>\n"),
                            a = ' clip-path="url(#imageCrop_' + s + ')" '
                        }
                        if (i.push("\t<image ", "COMMON_PARTS", 'xlink:href="', this.getSvgSrc(!0), '" x="', n - this.cropX, '" y="', r - this.cropY, '" width="', this._element.width || this._element.naturalWidth, '" height="', this._element.height || this._element.height, '"', a, "></image>\n"),
                        this.stroke || this.strokeDashArray) {
                            var l = this.fill;
                            this.fill = null,
                            e = ["\t<rect ", 'x="', n, '" y="', r, '" width="', this.width, '" height="', this.height, '" style="', this.getSvgStyles(), '"/>\n'],
                            this.fill = l
                        }
                        return t = "fill" !== this.paintFirst ? t.concat(e, i) : t.concat(i, e),
                        t
                    },
                    getSrc: function(e) {
                        var t = e ? this._element : this._originalElement;
                        return t ? t.toDataURL ? t.toDataURL() : this.srcFromAttribute ? t.getAttribute("src") : t.src : this.src || ""
                    },
                    setSrc: function(e, t, i) {
                        return o.util.loadImage(e, (function(e) {
                            this.setElement(e, i),
                            this._setWidthHeight(),
                            t && t(this)
                        }
                        ), this, i && i.crossOrigin),
                        this
                    },
                    toString: function() {
                        return '#<fabric.Image: { src: "' + this.getSrc() + '" }>'
                    },
                    applyResizeFilters: function() {
                        var e = this.resizeFilter
                          , t = this.minimumScaleTrigger
                          , i = this.getTotalObjectScaling()
                          , n = i.scaleX
                          , r = i.scaleY
                          , a = this._filteredEl || this._originalElement;
                        if (this.group && this.set("dirty", !0),
                        !e || n > t && r > t)
                            return this._element = a,
                            this._filterScalingX = 1,
                            this._filterScalingY = 1,
                            this._lastScaleX = n,
                            void (this._lastScaleY = r);
                        o.filterBackend || (o.filterBackend = o.initFilterBackend());
                        var s = o.util.createCanvasElement()
                          , l = this._filteredEl ? this.cacheKey + "_filtered" : this.cacheKey
                          , c = a.width
                          , d = a.height;
                        s.width = c,
                        s.height = d,
                        this._element = s,
                        this._lastScaleX = e.scaleX = n,
                        this._lastScaleY = e.scaleY = r,
                        o.filterBackend.applyFilters([e], a, c, d, this._element, l),
                        this._filterScalingX = s.width / this._originalElement.width,
                        this._filterScalingY = s.height / this._originalElement.height
                    },
                    applyFilters: function(e) {
                        if (e = e || this.filters || [],
                        e = e.filter((function(e) {
                            return e && !e.isNeutralState()
                        }
                        )),
                        this.set("dirty", !0),
                        this.removeTexture(this.cacheKey + "_filtered"),
                        0 === e.length)
                            return this._element = this._originalElement,
                            this._filteredEl = null,
                            this._filterScalingX = 1,
                            this._filterScalingY = 1,
                            this;
                        var t = this._originalElement
                          , i = t.naturalWidth || t.width
                          , n = t.naturalHeight || t.height;
                        if (this._element === this._originalElement) {
                            var r = o.util.createCanvasElement();
                            r.width = i,
                            r.height = n,
                            this._element = r,
                            this._filteredEl = r
                        } else
                            this._element = this._filteredEl,
                            this._filteredEl.getContext("2d").clearRect(0, 0, i, n),
                            this._lastScaleX = 1,
                            this._lastScaleY = 1;
                        return o.filterBackend || (o.filterBackend = o.initFilterBackend()),
                        o.filterBackend.applyFilters(e, this._originalElement, i, n, this._element, this.cacheKey),
                        this._originalElement.width === this._element.width && this._originalElement.height === this._element.height || (this._filterScalingX = this._element.width / this._originalElement.width,
                        this._filterScalingY = this._element.height / this._originalElement.height),
                        this
                    },
                    _render: function(e) {
                        !0 !== this.isMoving && this.resizeFilter && this._needsResize() && this.applyResizeFilters(),
                        this._stroke(e),
                        this._renderPaintInOrder(e)
                    },
                    shouldCache: function() {
                        return this.needsItsOwnCache()
                    },
                    _renderFill: function(e) {
                        var t = this._element
                          , i = this.width
                          , n = this.height
                          , o = Math.min(t.naturalWidth || t.width, i * this._filterScalingX)
                          , r = Math.min(t.naturalHeight || t.height, n * this._filterScalingY)
                          , a = -i / 2
                          , s = -n / 2
                          , l = Math.max(0, this.cropX * this._filterScalingX)
                          , c = Math.max(0, this.cropY * this._filterScalingY);
                        t && e.drawImage(t, l, c, o, r, a, s, i, n)
                    },
                    _needsResize: function() {
                        var e = this.getTotalObjectScaling();
                        return e.scaleX !== this._lastScaleX || e.scaleY !== this._lastScaleY
                    },
                    _resetWidthHeight: function() {
                        this.set(this.getOriginalSize())
                    },
                    _initElement: function(e, t) {
                        this.setElement(o.util.getById(e), t),
                        o.util.addClass(this.getElement(), o.Image.CSS_CANVAS)
                    },
                    _initConfig: function(e) {
                        e || (e = {}),
                        this.setOptions(e),
                        this._setWidthHeight(e),
                        this._element && this.crossOrigin && (this._element.crossOrigin = this.crossOrigin)
                    },
                    _initFilters: function(e, t) {
                        e && e.length ? o.util.enlivenObjects(e, (function(e) {
                            t && t(e)
                        }
                        ), "fabric.Image.filters") : t && t()
                    },
                    _setWidthHeight: function(e) {
                        e || (e = {});
                        var t = this.getElement();
                        this.width = e.width || t.naturalWidth || t.width || 0,
                        this.height = e.height || t.naturalHeight || t.height || 0
                    },
                    parsePreserveAspectRatioAttribute: function() {
                        var e, t = o.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio || ""), i = this._element.width, n = this._element.height, r = 1, a = 1, s = 0, l = 0, c = 0, d = 0, u = this.width, p = this.height, h = {
                            width: u,
                            height: p
                        };
                        return !t || "none" === t.alignX && "none" === t.alignY ? (r = u / i,
                        a = p / n) : ("meet" === t.meetOrSlice && (r = a = o.util.findScaleToFit(this._element, h),
                        e = (u - i * r) / 2,
                        "Min" === t.alignX && (s = -e),
                        "Max" === t.alignX && (s = e),
                        e = (p - n * a) / 2,
                        "Min" === t.alignY && (l = -e),
                        "Max" === t.alignY && (l = e)),
                        "slice" === t.meetOrSlice && (r = a = o.util.findScaleToCover(this._element, h),
                        e = i - u / r,
                        "Mid" === t.alignX && (c = e / 2),
                        "Max" === t.alignX && (c = e),
                        e = n - p / a,
                        "Mid" === t.alignY && (d = e / 2),
                        "Max" === t.alignY && (d = e),
                        i = u / r,
                        n = p / a)),
                        {
                            width: i,
                            height: n,
                            scaleX: r,
                            scaleY: a,
                            offsetLeft: s,
                            offsetTop: l,
                            cropX: c,
                            cropY: d
                        }
                    }
                }),
                o.Image.CSS_CANVAS = "canvas-img",
                o.Image.prototype.getSvgSrc = o.Image.prototype.getSrc,
                o.Image.fromObject = function(e, t) {
                    var i = o.util.object.clone(e);
                    o.util.loadImage(i.src, (function(e, n) {
                        n ? t && t(null, n) : o.Image.prototype._initFilters.call(i, i.filters, (function(n) {
                            i.filters = n || [],
                            o.Image.prototype._initFilters.call(i, [i.resizeFilter], (function(n) {
                                i.resizeFilter = n[0],
                                o.util.enlivenObjects([i.clipPath], (function(n) {
                                    i.clipPath = n[0];
                                    var r = new o.Image(e,i);
                                    t(r)
                                }
                                ))
                            }
                            ))
                        }
                        ))
                    }
                    ), null, i.crossOrigin)
                }
                ,
                o.Image.fromURL = function(e, t, i) {
                    o.util.loadImage(e, (function(e) {
                        t && t(new o.Image(e,i))
                    }
                    ), null, i && i.crossOrigin)
                }
                ,
                o.Image.ATTRIBUTE_NAMES = o.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),
                o.Image.fromElement = function(e, i, n) {
                    var r = o.parseAttributes(e, o.Image.ATTRIBUTE_NAMES);
                    o.Image.fromURL(r["xlink:href"], i, t(n ? o.util.object.clone(n) : {}, r))
                }
                )
            }(i),
            o.util.object.extend(o.Object.prototype, {
                _getAngleValueForStraighten: function() {
                    var e = this.angle % 360;
                    return e > 0 ? 90 * Math.round((e - 1) / 90) : 90 * Math.round(e / 90)
                },
                straighten: function() {
                    return this.rotate(this._getAngleValueForStraighten()),
                    this
                },
                fxStraighten: function(e) {
                    e = e || {};
                    var t = function() {}
                      , i = e.onComplete || t
                      , n = e.onChange || t
                      , r = this;
                    return o.util.animate({
                        startValue: this.get("angle"),
                        endValue: this._getAngleValueForStraighten(),
                        duration: this.FX_DURATION,
                        onChange: function(e) {
                            r.rotate(e),
                            n()
                        },
                        onComplete: function() {
                            r.setCoords(),
                            i()
                        }
                    }),
                    this
                }
            }),
            o.util.object.extend(o.StaticCanvas.prototype, {
                straightenObject: function(e) {
                    return e.straighten(),
                    this.requestRenderAll(),
                    this
                },
                fxStraightenObject: function(e) {
                    return e.fxStraighten({
                        onChange: this.requestRenderAllBound
                    }),
                    this
                }
            }),
            function() {
                "use strict";
                function t(e, t) {
                    var i = "precision " + t + " float;\nvoid main(){}"
                      , n = e.createShader(e.FRAGMENT_SHADER);
                    return e.shaderSource(n, i),
                    e.compileShader(n),
                    !!e.getShaderParameter(n, e.COMPILE_STATUS)
                }
                function i(e) {
                    e && e.tileSize && (this.tileSize = e.tileSize),
                    this.setupGLContext(this.tileSize, this.tileSize),
                    this.captureGPUInfo()
                }
                o.isWebglSupported = function(e) {
                    if (o.isLikelyNode)
                        return !1;
                    e = e || o.WebglFilterBackend.prototype.tileSize;
                    var i = document.createElement("canvas")
                      , n = i.getContext("webgl") || i.getContext("experimental-webgl")
                      , r = !1;
                    if (n) {
                        o.maxTextureSize = n.getParameter(n.MAX_TEXTURE_SIZE),
                        r = o.maxTextureSize >= e;
                        for (var a = ["highp", "mediump", "lowp"], s = 0; s < 3; s++)
                            if (t(n, a[s])) {
                                o.webGlPrecision = a[s];
                                break
                            }
                    }
                    return this.isSupported = r,
                    r
                }
                ,
                o.WebglFilterBackend = i,
                i.prototype = {
                    tileSize: 2048,
                    resources: {},
                    setupGLContext: function(e, t) {
                        this.dispose(),
                        this.createWebGLCanvas(e, t),
                        this.aPosition = new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]),
                        this.chooseFastestCopyGLTo2DMethod(e, t)
                    },
                    chooseFastestCopyGLTo2DMethod: function(t, i) {
                        var n, r = "undefined" !== typeof window.performance;
                        try {
                            new ImageData(1,1),
                            n = !0
                        } catch (e) {
                            n = !1
                        }
                        var l = "undefined" !== typeof ArrayBuffer
                          , c = "undefined" !== typeof Uint8ClampedArray;
                        if (r && n && l && c) {
                            var d = o.util.createCanvasElement()
                              , u = new ArrayBuffer(t * i * 4);
                            if (o.forceGLPutImageData)
                                return this.imageBuffer = u,
                                void (this.copyGLTo2D = s);
                            var p, h, m, g = {
                                imageBuffer: u,
                                destinationWidth: t,
                                destinationHeight: i,
                                targetCanvas: d
                            };
                            d.width = t,
                            d.height = i,
                            p = window.performance.now(),
                            a.call(g, this.gl, g),
                            h = window.performance.now() - p,
                            p = window.performance.now(),
                            s.call(g, this.gl, g),
                            m = window.performance.now() - p,
                            h > m ? (this.imageBuffer = u,
                            this.copyGLTo2D = s) : this.copyGLTo2D = a
                        }
                    },
                    createWebGLCanvas: function(e, t) {
                        var i = o.util.createCanvasElement();
                        i.width = e,
                        i.height = t;
                        var n = {
                            alpha: !0,
                            premultipliedAlpha: !1,
                            depth: !1,
                            stencil: !1,
                            antialias: !1
                        }
                          , r = i.getContext("webgl", n);
                        r || (r = i.getContext("experimental-webgl", n)),
                        r && (r.clearColor(0, 0, 0, 0),
                        this.canvas = i,
                        this.gl = r)
                    },
                    applyFilters: function(e, t, i, n, o, a) {
                        var s, l = this.gl;
                        a && (s = this.getCachedTexture(a, t));
                        var c = {
                            originalWidth: t.width || t.originalWidth,
                            originalHeight: t.height || t.originalHeight,
                            sourceWidth: i,
                            sourceHeight: n,
                            destinationWidth: i,
                            destinationHeight: n,
                            context: l,
                            sourceTexture: this.createTexture(l, i, n, !s && t),
                            targetTexture: this.createTexture(l, i, n),
                            originalTexture: s || this.createTexture(l, i, n, !s && t),
                            passes: e.length,
                            webgl: !0,
                            aPosition: this.aPosition,
                            programCache: this.programCache,
                            pass: 0,
                            filterBackend: this,
                            targetCanvas: o
                        }
                          , d = l.createFramebuffer();
                        return l.bindFramebuffer(l.FRAMEBUFFER, d),
                        e.forEach((function(e) {
                            e && e.applyTo(c)
                        }
                        )),
                        r(c),
                        this.copyGLTo2D(l, c),
                        l.bindTexture(l.TEXTURE_2D, null),
                        l.deleteTexture(c.sourceTexture),
                        l.deleteTexture(c.targetTexture),
                        l.deleteFramebuffer(d),
                        o.getContext("2d").setTransform(1, 0, 0, 1, 0, 0),
                        c
                    },
                    dispose: function() {
                        this.canvas && (this.canvas = null,
                        this.gl = null),
                        this.clearWebGLCaches()
                    },
                    clearWebGLCaches: function() {
                        this.programCache = {},
                        this.textureCache = {}
                    },
                    createTexture: function(e, t, i, n) {
                        var o = e.createTexture();
                        return e.bindTexture(e.TEXTURE_2D, o),
                        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.NEAREST),
                        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.NEAREST),
                        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
                        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
                        n ? e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, e.RGBA, e.UNSIGNED_BYTE, n) : e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, t, i, 0, e.RGBA, e.UNSIGNED_BYTE, null),
                        o
                    },
                    getCachedTexture: function(e, t) {
                        if (this.textureCache[e])
                            return this.textureCache[e];
                        var i = this.createTexture(this.gl, t.width, t.height, t);
                        return this.textureCache[e] = i,
                        i
                    },
                    evictCachesForKey: function(e) {
                        this.textureCache[e] && (this.gl.deleteTexture(this.textureCache[e]),
                        delete this.textureCache[e])
                    },
                    copyGLTo2D: a,
                    captureGPUInfo: function() {
                        if (this.gpuInfo)
                            return this.gpuInfo;
                        var e = this.gl
                          , t = {
                            renderer: "",
                            vendor: ""
                        };
                        if (!e)
                            return t;
                        var i = e.getExtension("WEBGL_debug_renderer_info");
                        if (i) {
                            var n = e.getParameter(i.UNMASKED_RENDERER_WEBGL)
                              , o = e.getParameter(i.UNMASKED_VENDOR_WEBGL);
                            n && (t.renderer = n.toLowerCase()),
                            o && (t.vendor = o.toLowerCase())
                        }
                        return this.gpuInfo = t,
                        t
                    }
                }
            }(),
            function() {
                "use strict";
                var e = function() {};
                function t() {}
                o.Canvas2dFilterBackend = t,
                t.prototype = {
                    evictCachesForKey: e,
                    dispose: e,
                    clearWebGLCaches: e,
                    resources: {},
                    applyFilters: function(e, t, i, n, o) {
                        var r = o.getContext("2d");
                        r.drawImage(t, 0, 0, i, n);
                        var a = r.getImageData(0, 0, i, n)
                          , s = r.getImageData(0, 0, i, n)
                          , l = {
                            sourceWidth: i,
                            sourceHeight: n,
                            imageData: a,
                            originalEl: t,
                            originalImageData: s,
                            canvasEl: o,
                            ctx: r,
                            filterBackend: this
                        };
                        return e.forEach((function(e) {
                            e.applyTo(l)
                        }
                        )),
                        l.imageData.width === i && l.imageData.height === n || (o.width = l.imageData.width,
                        o.height = l.imageData.height),
                        r.putImageData(l.imageData, 0, 0),
                        l
                    }
                }
            }(),
            o.Image = o.Image || {},
            o.Image.filters = o.Image.filters || {},
            o.Image.filters.BaseFilter = o.util.createClass({
                type: "BaseFilter",
                vertexSource: "attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",
                fragmentSource: "precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",
                initialize: function(e) {
                    e && this.setOptions(e)
                },
                setOptions: function(e) {
                    for (var t in e)
                        this[t] = e[t]
                },
                createProgram: function(e, t, i) {
                    t = t || this.fragmentSource,
                    i = i || this.vertexSource,
                    "highp" !== o.webGlPrecision && (t = t.replace(/precision highp float/g, "precision " + o.webGlPrecision + " float"));
                    var n = e.createShader(e.VERTEX_SHADER);
                    if (e.shaderSource(n, i),
                    e.compileShader(n),
                    !e.getShaderParameter(n, e.COMPILE_STATUS))
                        throw new Error("Vertex shader compile error for " + this.type + ": " + e.getShaderInfoLog(n));
                    var r = e.createShader(e.FRAGMENT_SHADER);
                    if (e.shaderSource(r, t),
                    e.compileShader(r),
                    !e.getShaderParameter(r, e.COMPILE_STATUS))
                        throw new Error("Fragment shader compile error for " + this.type + ": " + e.getShaderInfoLog(r));
                    var a = e.createProgram();
                    if (e.attachShader(a, n),
                    e.attachShader(a, r),
                    e.linkProgram(a),
                    !e.getProgramParameter(a, e.LINK_STATUS))
                        throw new Error('Shader link error for "${this.type}" ' + e.getProgramInfoLog(a));
                    var s = this.getAttributeLocations(e, a)
                      , l = this.getUniformLocations(e, a) || {};
                    return l.uStepW = e.getUniformLocation(a, "uStepW"),
                    l.uStepH = e.getUniformLocation(a, "uStepH"),
                    {
                        program: a,
                        attributeLocations: s,
                        uniformLocations: l
                    }
                },
                getAttributeLocations: function(e, t) {
                    return {
                        aPosition: e.getAttribLocation(t, "aPosition")
                    }
                },
                getUniformLocations: function() {
                    return {}
                },
                sendAttributeData: function(e, t, i) {
                    var n = t.aPosition
                      , o = e.createBuffer();
                    e.bindBuffer(e.ARRAY_BUFFER, o),
                    e.enableVertexAttribArray(n),
                    e.vertexAttribPointer(n, 2, e.FLOAT, !1, 0, 0),
                    e.bufferData(e.ARRAY_BUFFER, i, e.STATIC_DRAW)
                },
                _setupFrameBuffer: function(e) {
                    var t, i, n = e.context;
                    e.passes > 1 ? (t = e.destinationWidth,
                    i = e.destinationHeight,
                    e.sourceWidth === t && e.sourceHeight === i || (n.deleteTexture(e.targetTexture),
                    e.targetTexture = e.filterBackend.createTexture(n, t, i)),
                    n.framebufferTexture2D(n.FRAMEBUFFER, n.COLOR_ATTACHMENT0, n.TEXTURE_2D, e.targetTexture, 0)) : (n.bindFramebuffer(n.FRAMEBUFFER, null),
                    n.finish())
                },
                _swapTextures: function(e) {
                    e.passes--,
                    e.pass++;
                    var t = e.targetTexture;
                    e.targetTexture = e.sourceTexture,
                    e.sourceTexture = t
                },
                isNeutralState: function() {
                    var e = this.mainParameter
                      , t = o.Image.filters[this.type].prototype;
                    if (e) {
                        if (Array.isArray(t[e])) {
                            for (var i = t[e].length; i--; )
                                if (this[e][i] !== t[e][i])
                                    return !1;
                            return !0
                        }
                        return t[e] === this[e]
                    }
                    return !1
                },
                applyTo: function(e) {
                    e.webgl ? (this._setupFrameBuffer(e),
                    this.applyToWebGL(e),
                    this._swapTextures(e)) : this.applyTo2d(e)
                },
                retrieveShader: function(e) {
                    return e.programCache.hasOwnProperty(this.type) || (e.programCache[this.type] = this.createProgram(e.context)),
                    e.programCache[this.type]
                },
                applyToWebGL: function(e) {
                    var t = e.context
                      , i = this.retrieveShader(e);
                    0 === e.pass && e.originalTexture ? t.bindTexture(t.TEXTURE_2D, e.originalTexture) : t.bindTexture(t.TEXTURE_2D, e.sourceTexture),
                    t.useProgram(i.program),
                    this.sendAttributeData(t, i.attributeLocations, e.aPosition),
                    t.uniform1f(i.uniformLocations.uStepW, 1 / e.sourceWidth),
                    t.uniform1f(i.uniformLocations.uStepH, 1 / e.sourceHeight),
                    this.sendUniformData(t, i.uniformLocations),
                    t.viewport(0, 0, e.destinationWidth, e.destinationHeight),
                    t.drawArrays(t.TRIANGLE_STRIP, 0, 4)
                },
                bindAdditionalTexture: function(e, t, i) {
                    e.activeTexture(i),
                    e.bindTexture(e.TEXTURE_2D, t),
                    e.activeTexture(e.TEXTURE0)
                },
                unbindAdditionalTexture: function(e, t) {
                    e.activeTexture(t),
                    e.bindTexture(e.TEXTURE_2D, null),
                    e.activeTexture(e.TEXTURE0)
                },
                getMainParameter: function() {
                    return this[this.mainParameter]
                },
                setMainParameter: function(e) {
                    this[this.mainParameter] = e
                },
                sendUniformData: function() {},
                createHelpLayer: function(e) {
                    if (!e.helpLayer) {
                        var t = document.createElement("canvas");
                        t.width = e.sourceWidth,
                        t.height = e.sourceHeight,
                        e.helpLayer = t
                    }
                },
                toObject: function() {
                    var e = {
                        type: this.type
                    }
                      , t = this.mainParameter;
                    return t && (e[t] = this[t]),
                    e
                },
                toJSON: function() {
                    return this.toObject()
                }
            }),
            o.Image.filters.BaseFilter.fromObject = function(e, t) {
                var i = new o.Image.filters[e.type](e);
                return t && t(i),
                i
            }
            ,
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.Image.filters
                  , n = t.util.createClass;
                i.ColorMatrix = n(i.BaseFilter, {
                    type: "ColorMatrix",
                    fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",
                    matrix: [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0],
                    mainParameter: "matrix",
                    colorsOnly: !0,
                    initialize: function(e) {
                        this.callSuper("initialize", e),
                        this.matrix = this.matrix.slice(0)
                    },
                    applyTo2d: function(e) {
                        var t, i, n, o, r, a = e.imageData, s = a.data, l = s.length, c = this.matrix, d = this.colorsOnly;
                        for (r = 0; r < l; r += 4)
                            t = s[r],
                            i = s[r + 1],
                            n = s[r + 2],
                            d ? (s[r] = t * c[0] + i * c[1] + n * c[2] + 255 * c[4],
                            s[r + 1] = t * c[5] + i * c[6] + n * c[7] + 255 * c[9],
                            s[r + 2] = t * c[10] + i * c[11] + n * c[12] + 255 * c[14]) : (o = s[r + 3],
                            s[r] = t * c[0] + i * c[1] + n * c[2] + o * c[3] + 255 * c[4],
                            s[r + 1] = t * c[5] + i * c[6] + n * c[7] + o * c[8] + 255 * c[9],
                            s[r + 2] = t * c[10] + i * c[11] + n * c[12] + o * c[13] + 255 * c[14],
                            s[r + 3] = t * c[15] + i * c[16] + n * c[17] + o * c[18] + 255 * c[19])
                    },
                    getUniformLocations: function(e, t) {
                        return {
                            uColorMatrix: e.getUniformLocation(t, "uColorMatrix"),
                            uConstants: e.getUniformLocation(t, "uConstants")
                        }
                    },
                    sendUniformData: function(e, t) {
                        var i = this.matrix
                          , n = [i[0], i[1], i[2], i[3], i[5], i[6], i[7], i[8], i[10], i[11], i[12], i[13], i[15], i[16], i[17], i[18]]
                          , o = [i[4], i[9], i[14], i[19]];
                        e.uniformMatrix4fv(t.uColorMatrix, !1, n),
                        e.uniform4fv(t.uConstants, o)
                    }
                }),
                t.Image.filters.ColorMatrix.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.Image.filters
                  , n = t.util.createClass;
                i.Brightness = n(i.BaseFilter, {
                    type: "Brightness",
                    fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",
                    brightness: 0,
                    mainParameter: "brightness",
                    applyTo2d: function(e) {
                        if (0 !== this.brightness) {
                            var t, i = e.imageData, n = i.data, o = n.length, r = Math.round(255 * this.brightness);
                            for (t = 0; t < o; t += 4)
                                n[t] = n[t] + r,
                                n[t + 1] = n[t + 1] + r,
                                n[t + 2] = n[t + 2] + r
                        }
                    },
                    getUniformLocations: function(e, t) {
                        return {
                            uBrightness: e.getUniformLocation(t, "uBrightness")
                        }
                    },
                    sendUniformData: function(e, t) {
                        e.uniform1f(t.uBrightness, this.brightness)
                    }
                }),
                t.Image.filters.Brightness.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.util.object.extend
                  , n = t.Image.filters
                  , o = t.util.createClass;
                n.Convolute = o(n.BaseFilter, {
                    type: "Convolute",
                    opaque: !1,
                    matrix: [0, 0, 0, 0, 1, 0, 0, 0, 0],
                    fragmentSource: {
                        Convolute_3_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                        Convolute_3_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                        Convolute_5_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                        Convolute_5_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                        Convolute_7_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                        Convolute_7_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                        Convolute_9_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                        Convolute_9_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"
                    },
                    retrieveShader: function(e) {
                        var t = Math.sqrt(this.matrix.length)
                          , i = this.type + "_" + t + "_" + (this.opaque ? 1 : 0)
                          , n = this.fragmentSource[i];
                        return e.programCache.hasOwnProperty(i) || (e.programCache[i] = this.createProgram(e.context, n)),
                        e.programCache[i]
                    },
                    applyTo2d: function(e) {
                        var t, i, n, o, r, a, s, l, c, d, u, p, h, m = e.imageData, g = m.data, f = this.matrix, v = Math.round(Math.sqrt(f.length)), b = Math.floor(v / 2), y = m.width, w = m.height, C = e.ctx.createImageData(y, w), x = C.data, S = this.opaque ? 1 : 0;
                        for (u = 0; u < w; u++)
                            for (d = 0; d < y; d++) {
                                for (r = 4 * (u * y + d),
                                t = 0,
                                i = 0,
                                n = 0,
                                o = 0,
                                h = 0; h < v; h++)
                                    for (p = 0; p < v; p++)
                                        s = u + h - b,
                                        a = d + p - b,
                                        s < 0 || s > w || a < 0 || a > y || (l = 4 * (s * y + a),
                                        c = f[h * v + p],
                                        t += g[l] * c,
                                        i += g[l + 1] * c,
                                        n += g[l + 2] * c,
                                        S || (o += g[l + 3] * c));
                                x[r] = t,
                                x[r + 1] = i,
                                x[r + 2] = n,
                                x[r + 3] = S ? g[r + 3] : o
                            }
                        e.imageData = C
                    },
                    getUniformLocations: function(e, t) {
                        return {
                            uMatrix: e.getUniformLocation(t, "uMatrix"),
                            uOpaque: e.getUniformLocation(t, "uOpaque"),
                            uHalfSize: e.getUniformLocation(t, "uHalfSize"),
                            uSize: e.getUniformLocation(t, "uSize")
                        }
                    },
                    sendUniformData: function(e, t) {
                        e.uniform1fv(t.uMatrix, this.matrix)
                    },
                    toObject: function() {
                        return i(this.callSuper("toObject"), {
                            opaque: this.opaque,
                            matrix: this.matrix
                        })
                    }
                }),
                t.Image.filters.Convolute.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.Image.filters
                  , n = t.util.createClass;
                i.Grayscale = n(i.BaseFilter, {
                    type: "Grayscale",
                    fragmentSource: {
                        average: "precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",
                        lightness: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",
                        luminosity: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"
                    },
                    mode: "average",
                    mainParameter: "mode",
                    applyTo2d: function(e) {
                        var t, i, n = e.imageData, o = n.data, r = o.length, a = this.mode;
                        for (t = 0; t < r; t += 4)
                            "average" === a ? i = (o[t] + o[t + 1] + o[t + 2]) / 3 : "lightness" === a ? i = (Math.min(o[t], o[t + 1], o[t + 2]) + Math.max(o[t], o[t + 1], o[t + 2])) / 2 : "luminosity" === a && (i = .21 * o[t] + .72 * o[t + 1] + .07 * o[t + 2]),
                            o[t] = i,
                            o[t + 1] = i,
                            o[t + 2] = i
                    },
                    retrieveShader: function(e) {
                        var t = this.type + "_" + this.mode;
                        if (!e.programCache.hasOwnProperty(t)) {
                            var i = this.fragmentSource[this.mode];
                            e.programCache[t] = this.createProgram(e.context, i)
                        }
                        return e.programCache[t]
                    },
                    getUniformLocations: function(e, t) {
                        return {
                            uMode: e.getUniformLocation(t, "uMode")
                        }
                    },
                    sendUniformData: function(e, t) {
                        var i = 1;
                        e.uniform1i(t.uMode, i)
                    },
                    isNeutralState: function() {
                        return !1
                    }
                }),
                t.Image.filters.Grayscale.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.Image.filters
                  , n = t.util.createClass;
                i.Invert = n(i.BaseFilter, {
                    type: "Invert",
                    fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",
                    invert: !0,
                    mainParameter: "invert",
                    applyTo2d: function(e) {
                        var t, i = e.imageData, n = i.data, o = n.length;
                        for (t = 0; t < o; t += 4)
                            n[t] = 255 - n[t],
                            n[t + 1] = 255 - n[t + 1],
                            n[t + 2] = 255 - n[t + 2]
                    },
                    isNeutralState: function() {
                        return !this.invert
                    },
                    getUniformLocations: function(e, t) {
                        return {
                            uInvert: e.getUniformLocation(t, "uInvert")
                        }
                    },
                    sendUniformData: function(e, t) {
                        e.uniform1i(t.uInvert, this.invert)
                    }
                }),
                t.Image.filters.Invert.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.util.object.extend
                  , n = t.Image.filters
                  , o = t.util.createClass;
                n.Noise = o(n.BaseFilter, {
                    type: "Noise",
                    fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",
                    mainParameter: "noise",
                    noise: 0,
                    applyTo2d: function(e) {
                        if (0 !== this.noise) {
                            var t, i, n = e.imageData, o = n.data, r = o.length, a = this.noise;
                            for (t = 0,
                            r = o.length; t < r; t += 4)
                                i = (.5 - Math.random()) * a,
                                o[t] += i,
                                o[t + 1] += i,
                                o[t + 2] += i
                        }
                    },
                    getUniformLocations: function(e, t) {
                        return {
                            uNoise: e.getUniformLocation(t, "uNoise"),
                            uSeed: e.getUniformLocation(t, "uSeed")
                        }
                    },
                    sendUniformData: function(e, t) {
                        e.uniform1f(t.uNoise, this.noise / 255),
                        e.uniform1f(t.uSeed, Math.random())
                    },
                    toObject: function() {
                        return i(this.callSuper("toObject"), {
                            noise: this.noise
                        })
                    }
                }),
                t.Image.filters.Noise.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.Image.filters
                  , n = t.util.createClass;
                i.Pixelate = n(i.BaseFilter, {
                    type: "Pixelate",
                    blocksize: 4,
                    mainParameter: "blocksize",
                    fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",
                    applyTo2d: function(e) {
                        var t, i, n, o, r, a, s, l, c, d, u, p = e.imageData, h = p.data, m = p.height, g = p.width;
                        for (i = 0; i < m; i += this.blocksize)
                            for (n = 0; n < g; n += this.blocksize)
                                for (t = 4 * i * g + 4 * n,
                                o = h[t],
                                r = h[t + 1],
                                a = h[t + 2],
                                s = h[t + 3],
                                d = Math.min(i + this.blocksize, m),
                                u = Math.min(n + this.blocksize, g),
                                l = i; l < d; l++)
                                    for (c = n; c < u; c++)
                                        t = 4 * l * g + 4 * c,
                                        h[t] = o,
                                        h[t + 1] = r,
                                        h[t + 2] = a,
                                        h[t + 3] = s
                    },
                    isNeutralState: function() {
                        return 1 === this.blocksize
                    },
                    getUniformLocations: function(e, t) {
                        return {
                            uBlocksize: e.getUniformLocation(t, "uBlocksize"),
                            uStepW: e.getUniformLocation(t, "uStepW"),
                            uStepH: e.getUniformLocation(t, "uStepH")
                        }
                    },
                    sendUniformData: function(e, t) {
                        e.uniform1f(t.uBlocksize, this.blocksize)
                    }
                }),
                t.Image.filters.Pixelate.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.util.object.extend
                  , n = t.Image.filters
                  , o = t.util.createClass;
                n.RemoveColor = o(n.BaseFilter, {
                    type: "RemoveColor",
                    color: "#FFFFFF",
                    fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",
                    distance: .02,
                    useAlpha: !1,
                    applyTo2d: function(e) {
                        var i, n, o, r, a = e.imageData, s = a.data, l = 255 * this.distance, c = new t.Color(this.color).getSource(), d = [c[0] - l, c[1] - l, c[2] - l], u = [c[0] + l, c[1] + l, c[2] + l];
                        for (i = 0; i < s.length; i += 4)
                            n = s[i],
                            o = s[i + 1],
                            r = s[i + 2],
                            n > d[0] && o > d[1] && r > d[2] && n < u[0] && o < u[1] && r < u[2] && (s[i + 3] = 0)
                    },
                    getUniformLocations: function(e, t) {
                        return {
                            uLow: e.getUniformLocation(t, "uLow"),
                            uHigh: e.getUniformLocation(t, "uHigh")
                        }
                    },
                    sendUniformData: function(e, i) {
                        var n = new t.Color(this.color).getSource()
                          , o = parseFloat(this.distance)
                          , r = [0 + n[0] / 255 - o, 0 + n[1] / 255 - o, 0 + n[2] / 255 - o, 1]
                          , a = [n[0] / 255 + o, n[1] / 255 + o, n[2] / 255 + o, 1];
                        e.uniform4fv(i.uLow, r),
                        e.uniform4fv(i.uHigh, a)
                    },
                    toObject: function() {
                        return i(this.callSuper("toObject"), {
                            color: this.color,
                            distance: this.distance
                        })
                    }
                }),
                t.Image.filters.RemoveColor.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.Image.filters
                  , n = t.util.createClass
                  , o = {
                    Brownie: [.5997, .34553, -.27082, 0, .186, -.0377, .86095, .15059, 0, -.1449, .24113, -.07441, .44972, 0, -.02965, 0, 0, 0, 1, 0],
                    Vintage: [.62793, .32021, -.03965, 0, .03784, .02578, .64411, .03259, 0, .02926, .0466, -.08512, .52416, 0, .02023, 0, 0, 0, 1, 0],
                    Kodachrome: [1.12855, -.39673, -.03992, 0, .24991, -.16404, 1.08352, -.05498, 0, .09698, -.16786, -.56034, 1.60148, 0, .13972, 0, 0, 0, 1, 0],
                    Technicolor: [1.91252, -.85453, -.09155, 0, .04624, -.30878, 1.76589, -.10601, 0, -.27589, -.2311, -.75018, 1.84759, 0, .12137, 0, 0, 0, 1, 0],
                    Polaroid: [1.438, -.062, -.062, 0, 0, -.122, 1.378, -.122, 0, 0, -.016, -.016, 1.483, 0, 0, 0, 0, 0, 1, 0],
                    Sepia: [.393, .769, .189, 0, 0, .349, .686, .168, 0, 0, .272, .534, .131, 0, 0, 0, 0, 0, 1, 0],
                    BlackWhite: [1.5, 1.5, 1.5, 0, -1, 1.5, 1.5, 1.5, 0, -1, 1.5, 1.5, 1.5, 0, -1, 0, 0, 0, 1, 0]
                };
                for (var r in o)
                    i[r] = n(i.ColorMatrix, {
                        type: r,
                        matrix: o[r],
                        mainParameter: !1,
                        colorsOnly: !0
                    }),
                    t.Image.filters[r].fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric
                  , i = t.Image.filters
                  , n = t.util.createClass;
                i.BlendColor = n(i.BaseFilter, {
                    type: "BlendColor",
                    color: "#F95C63",
                    mode: "multiply",
                    alpha: 1,
                    fragmentSource: {
                        multiply: "gl_FragColor.rgb *= uColor.rgb;\n",
                        screen: "gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",
                        add: "gl_FragColor.rgb += uColor.rgb;\n",
                        diff: "gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",
                        subtract: "gl_FragColor.rgb -= uColor.rgb;\n",
                        lighten: "gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",
                        darken: "gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",
                        exclusion: "gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",
                        overlay: "if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",
                        tint: "gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"
                    },
                    buildSource: function(e) {
                        return "precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n" + this.fragmentSource[e] + "}\n}"
                    },
                    retrieveShader: function(e) {
                        var t, i = this.type + "_" + this.mode;
                        return e.programCache.hasOwnProperty(i) || (t = this.buildSource(this.mode),
                        e.programCache[i] = this.createProgram(e.context, t)),
                        e.programCache[i]
                    },
                    applyTo2d: function(e) {
                        var i, n, o, r, a, s, l, c = e.imageData, d = c.data, u = d.length, p = 1 - this.alpha;
                        l = new t.Color(this.color).getSource(),
                        i = l[0] * this.alpha,
                        n = l[1] * this.alpha,
                        o = l[2] * this.alpha;
                        for (var h = 0; h < u; h += 4)
                            switch (r = d[h],
                            a = d[h + 1],
                            s = d[h + 2],
                            this.mode) {
                            case "multiply":
                                d[h] = r * i / 255,
                                d[h + 1] = a * n / 255,
                                d[h + 2] = s * o / 255;
                                break;
                            case "screen":
                                d[h] = 255 - (255 - r) * (255 - i) / 255,
                                d[h + 1] = 255 - (255 - a) * (255 - n) / 255,
                                d[h + 2] = 255 - (255 - s) * (255 - o) / 255;
                                break;
                            case "add":
                                d[h] = r + i,
                                d[h + 1] = a + n,
                                d[h + 2] = s + o;
                                break;
                            case "diff":
                            case "difference":
                                d[h] = Math.abs(r - i),
                                d[h + 1] = Math.abs(a - n),
                                d[h + 2] = Math.abs(s - o);
                                break;
                            case "subtract":
                                d[h] = r - i,
                                d[h + 1] = a - n,
                                d[h + 2] = s - o;
                                break;
                            case "darken":
                                d[h] = Math.min(r, i),
                                d[h + 1] = Math.min(a, n),
                                d[h + 2] = Math.min(s, o);
                                break;
                            case "lighten":
                                d[h] = Math.max(r, i),
                                d[h + 1] = Math.max(a, n),
                                d[h + 2] = Math.max(s, o);
                                break;
                            case "overlay":
                                d[h] = i < 128 ? 2 * r * i / 255 : 255 - 2 * (255 - r) * (255 - i) / 255,
                                d[h + 1] = n < 128 ? 2 * a * n / 255 : 255 - 2 * (255 - a) * (255 - n) / 255,
                                d[h + 2] = o < 128 ? 2 * s * o / 255 : 255 - 2 * (255 - s) * (255 - o) / 255;
                                break;
                            case "exclusion":
                                d[h] = i + r - 2 * i * r / 255,
                                d[h + 1] = n + a - 2 * n * a / 255,
                                d[h + 2] = o + s - 2 * o * s / 255;
                                break;
                            case "tint":
                                d[h] = i + r * p,
                                d[h + 1] = n + a * p,
                                d[h + 2] = o + s * p
                            }
                    },
                    getUniformLocations: function(e, t) {
                        return {
                            uColor: e.getUniformLocation(t, "uColor")
                        }
                    },
                    sendUniformData: function(e, i) {
                        var n = new t.Color(this.color).getSource();
                        n[0] = this.alpha * n[0] / 255,
                        n[1] = this.alpha * n[1] / 255,
                        n[2] = this.alpha * n[2] / 255,
                        n[3] = this.alpha,
                        e.uniform4fv(i.uColor, n)
                    },
                    toObject: function() {
                        return {
                            type: this.type,
                            color: this.color,
                            mode: this.mode,
                            alpha: this.alpha
                        }
                    }
                }),
                t.Image.filters.BlendColor.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric
                  , i = t.Image.filters
                  , n = t.util.createClass;
                i.BlendImage = n(i.BaseFilter, {
                    type: "BlendImage",
                    image: null,
                    mode: "multiply",
                    alpha: 1,
                    vertexSource: "attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",
                    fragmentSource: {
                        multiply: "precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",
                        mask: "precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"
                    },
                    retrieveShader: function(e) {
                        var t = this.type + "_" + this.mode
                          , i = this.fragmentSource[this.mode];
                        return e.programCache.hasOwnProperty(t) || (e.programCache[t] = this.createProgram(e.context, i)),
                        e.programCache[t]
                    },
                    applyToWebGL: function(e) {
                        var t = e.context
                          , i = this.createTexture(e.filterBackend, this.image);
                        this.bindAdditionalTexture(t, i, t.TEXTURE1),
                        this.callSuper("applyToWebGL", e),
                        this.unbindAdditionalTexture(t, t.TEXTURE1)
                    },
                    createTexture: function(e, t) {
                        return e.getCachedTexture(t.cacheKey, t._element)
                    },
                    calculateMatrix: function() {
                        var e = this.image
                          , t = e._element.width
                          , i = e._element.height;
                        return [1 / e.scaleX, 0, 0, 0, 1 / e.scaleY, 0, -e.left / t, -e.top / i, 1]
                    },
                    applyTo2d: function(e) {
                        var i, n, o, r, a, s, l, c, d, u, p, h = e.imageData, m = e.filterBackend.resources, g = h.data, f = g.length, v = h.width, b = h.height, y = this.image;
                        m.blendImage || (m.blendImage = t.util.createCanvasElement()),
                        d = m.blendImage,
                        u = d.getContext("2d"),
                        d.width !== v || d.height !== b ? (d.width = v,
                        d.height = b) : u.clearRect(0, 0, v, b),
                        u.setTransform(y.scaleX, 0, 0, y.scaleY, y.left, y.top),
                        u.drawImage(y._element, 0, 0, v, b),
                        p = u.getImageData(0, 0, v, b).data;
                        for (var w = 0; w < f; w += 4)
                            switch (a = g[w],
                            s = g[w + 1],
                            l = g[w + 2],
                            c = g[w + 3],
                            i = p[w],
                            n = p[w + 1],
                            o = p[w + 2],
                            r = p[w + 3],
                            this.mode) {
                            case "multiply":
                                g[w] = a * i / 255,
                                g[w + 1] = s * n / 255,
                                g[w + 2] = l * o / 255,
                                g[w + 3] = c * r / 255;
                                break;
                            case "mask":
                                g[w + 3] = r;
                                break
                            }
                    },
                    getUniformLocations: function(e, t) {
                        return {
                            uTransformMatrix: e.getUniformLocation(t, "uTransformMatrix"),
                            uImage: e.getUniformLocation(t, "uImage")
                        }
                    },
                    sendUniformData: function(e, t) {
                        var i = this.calculateMatrix();
                        e.uniform1i(t.uImage, 1),
                        e.uniformMatrix3fv(t.uTransformMatrix, !1, i)
                    },
                    toObject: function() {
                        return {
                            type: this.type,
                            image: this.image && this.image.toObject(),
                            mode: this.mode,
                            alpha: this.alpha
                        }
                    }
                }),
                t.Image.filters.BlendImage.fromObject = function(e, i) {
                    t.Image.fromObject(e.image, (function(n) {
                        var o = t.util.object.clone(e);
                        o.image = n,
                        i(new t.Image.filters.BlendImage(o))
                    }
                    ))
                }
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = Math.pow
                  , n = Math.floor
                  , o = Math.sqrt
                  , r = Math.abs
                  , a = Math.round
                  , s = Math.sin
                  , l = Math.ceil
                  , c = t.Image.filters
                  , d = t.util.createClass;
                c.Resize = d(c.BaseFilter, {
                    type: "Resize",
                    resizeType: "hermite",
                    scaleX: 1,
                    scaleY: 1,
                    lanczosLobes: 3,
                    getUniformLocations: function(e, t) {
                        return {
                            uDelta: e.getUniformLocation(t, "uDelta"),
                            uTaps: e.getUniformLocation(t, "uTaps")
                        }
                    },
                    sendUniformData: function(e, t) {
                        e.uniform2fv(t.uDelta, this.horizontal ? [1 / this.width, 0] : [0, 1 / this.height]),
                        e.uniform1fv(t.uTaps, this.taps)
                    },
                    retrieveShader: function(e) {
                        var t = this.getFilterWindow()
                          , i = this.type + "_" + t;
                        if (!e.programCache.hasOwnProperty(i)) {
                            var n = this.generateShader(t);
                            e.programCache[i] = this.createProgram(e.context, n)
                        }
                        return e.programCache[i]
                    },
                    getFilterWindow: function() {
                        var e = this.tempScale;
                        return Math.ceil(this.lanczosLobes / e)
                    },
                    getTaps: function() {
                        for (var e = this.lanczosCreate(this.lanczosLobes), t = this.tempScale, i = this.getFilterWindow(), n = new Array(i), o = 1; o <= i; o++)
                            n[o - 1] = e(o * t);
                        return n
                    },
                    generateShader: function(e) {
                        for (var t = new Array(e), i = this.fragmentSourceTOP, n = 1; n <= e; n++)
                            t[n - 1] = n + ".0 * uDelta";
                        return i += "uniform float uTaps[" + e + "];\n",
                        i += "void main() {\n",
                        i += "  vec4 color = texture2D(uTexture, vTexCoord);\n",
                        i += "  float sum = 1.0;\n",
                        t.forEach((function(e, t) {
                            i += "  color += texture2D(uTexture, vTexCoord + " + e + ") * uTaps[" + t + "];\n",
                            i += "  color += texture2D(uTexture, vTexCoord - " + e + ") * uTaps[" + t + "];\n",
                            i += "  sum += 2.0 * uTaps[" + t + "];\n"
                        }
                        )),
                        i += "  gl_FragColor = color / sum;\n",
                        i += "}",
                        i
                    },
                    fragmentSourceTOP: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",
                    applyTo: function(e) {
                        e.webgl ? (e.passes++,
                        this.width = e.sourceWidth,
                        this.horizontal = !0,
                        this.dW = Math.round(this.width * this.scaleX),
                        this.dH = e.sourceHeight,
                        this.tempScale = this.dW / this.width,
                        this.taps = this.getTaps(),
                        e.destinationWidth = this.dW,
                        this._setupFrameBuffer(e),
                        this.applyToWebGL(e),
                        this._swapTextures(e),
                        e.sourceWidth = e.destinationWidth,
                        this.height = e.sourceHeight,
                        this.horizontal = !1,
                        this.dH = Math.round(this.height * this.scaleY),
                        this.tempScale = this.dH / this.height,
                        this.taps = this.getTaps(),
                        e.destinationHeight = this.dH,
                        this._setupFrameBuffer(e),
                        this.applyToWebGL(e),
                        this._swapTextures(e),
                        e.sourceHeight = e.destinationHeight) : this.applyTo2d(e)
                    },
                    isNeutralState: function() {
                        return 1 === this.scaleX && 1 === this.scaleY
                    },
                    lanczosCreate: function(e) {
                        return function(t) {
                            if (t >= e || t <= -e)
                                return 0;
                            if (t < 1.1920929e-7 && t > -1.1920929e-7)
                                return 1;
                            t *= Math.PI;
                            var i = t / e;
                            return s(t) / t * s(i) / i
                        }
                    },
                    applyTo2d: function(e) {
                        var t = e.imageData
                          , i = this.scaleX
                          , n = this.scaleY;
                        this.rcpScaleX = 1 / i,
                        this.rcpScaleY = 1 / n;
                        var o, r = t.width, s = t.height, l = a(r * i), c = a(s * n);
                        "sliceHack" === this.resizeType ? o = this.sliceByTwo(e, r, s, l, c) : "hermite" === this.resizeType ? o = this.hermiteFastResize(e, r, s, l, c) : "bilinear" === this.resizeType ? o = this.bilinearFiltering(e, r, s, l, c) : "lanczos" === this.resizeType && (o = this.lanczosResize(e, r, s, l, c)),
                        e.imageData = o
                    },
                    sliceByTwo: function(e, i, o, r, a) {
                        var s, l, c = e.imageData, d = .5, u = !1, p = !1, h = i * d, m = o * d, g = t.filterBackend.resources, f = 0, v = 0, b = i, y = 0;
                        g.sliceByTwo || (g.sliceByTwo = document.createElement("canvas")),
                        s = g.sliceByTwo,
                        (s.width < 1.5 * i || s.height < o) && (s.width = 1.5 * i,
                        s.height = o),
                        l = s.getContext("2d"),
                        l.clearRect(0, 0, 1.5 * i, o),
                        l.putImageData(c, 0, 0),
                        r = n(r),
                        a = n(a);
                        while (!u || !p)
                            i = h,
                            o = m,
                            r < n(h * d) ? h = n(h * d) : (h = r,
                            u = !0),
                            a < n(m * d) ? m = n(m * d) : (m = a,
                            p = !0),
                            l.drawImage(s, f, v, i, o, b, y, h, m),
                            f = b,
                            v = y,
                            y += m;
                        return l.getImageData(f, v, r, a)
                    },
                    lanczosResize: function(e, t, a, s, c) {
                        function d(e) {
                            var l, P, k, _, A, T, E, O, I, D, F;
                            for (x.x = (e + .5) * g,
                            S.x = n(x.x),
                            l = 0; l < c; l++) {
                                for (x.y = (l + .5) * f,
                                S.y = n(x.y),
                                A = 0,
                                T = 0,
                                E = 0,
                                O = 0,
                                I = 0,
                                P = S.x - y; P <= S.x + y; P++)
                                    if (!(P < 0 || P >= t)) {
                                        D = n(1e3 * r(P - x.x)),
                                        C[D] || (C[D] = {});
                                        for (var M = S.y - w; M <= S.y + w; M++)
                                            M < 0 || M >= a || (F = n(1e3 * r(M - x.y)),
                                            C[D][F] || (C[D][F] = m(o(i(D * v, 2) + i(F * b, 2)) / 1e3)),
                                            k = C[D][F],
                                            k > 0 && (_ = 4 * (M * t + P),
                                            A += k,
                                            T += k * u[_],
                                            E += k * u[_ + 1],
                                            O += k * u[_ + 2],
                                            I += k * u[_ + 3]))
                                    }
                                _ = 4 * (l * s + e),
                                h[_] = T / A,
                                h[_ + 1] = E / A,
                                h[_ + 2] = O / A,
                                h[_ + 3] = I / A
                            }
                            return ++e < s ? d(e) : p
                        }
                        var u = e.imageData.data
                          , p = e.ctx.createImageData(s, c)
                          , h = p.data
                          , m = this.lanczosCreate(this.lanczosLobes)
                          , g = this.rcpScaleX
                          , f = this.rcpScaleY
                          , v = 2 / this.rcpScaleX
                          , b = 2 / this.rcpScaleY
                          , y = l(g * this.lanczosLobes / 2)
                          , w = l(f * this.lanczosLobes / 2)
                          , C = {}
                          , x = {}
                          , S = {};
                        return d(0)
                    },
                    bilinearFiltering: function(e, t, i, o, r) {
                        var a, s, l, c, d, u, p, h, m, g, f, v, b, y = 0, w = this.rcpScaleX, C = this.rcpScaleY, x = 4 * (t - 1), S = e.imageData, P = S.data, k = e.ctx.createImageData(o, r), _ = k.data;
                        for (p = 0; p < r; p++)
                            for (h = 0; h < o; h++)
                                for (d = n(w * h),
                                u = n(C * p),
                                m = w * h - d,
                                g = C * p - u,
                                b = 4 * (u * t + d),
                                f = 0; f < 4; f++)
                                    a = P[b + f],
                                    s = P[b + 4 + f],
                                    l = P[b + x + f],
                                    c = P[b + x + 4 + f],
                                    v = a * (1 - m) * (1 - g) + s * m * (1 - g) + l * g * (1 - m) + c * m * g,
                                    _[y++] = v;
                        return k
                    },
                    hermiteFastResize: function(e, t, i, a, s) {
                        for (var c = this.rcpScaleX, d = this.rcpScaleY, u = l(c / 2), p = l(d / 2), h = e.imageData, m = h.data, g = e.ctx.createImageData(a, s), f = g.data, v = 0; v < s; v++)
                            for (var b = 0; b < a; b++) {
                                for (var y = 4 * (b + v * a), w = 0, C = 0, x = 0, S = 0, P = 0, k = 0, _ = 0, A = (v + .5) * d, T = n(v * d); T < (v + 1) * d; T++)
                                    for (var E = r(A - (T + .5)) / p, O = (b + .5) * c, I = E * E, D = n(b * c); D < (b + 1) * c; D++) {
                                        var F = r(O - (D + .5)) / u
                                          , M = o(I + F * F);
                                        M > 1 && M < -1 || (w = 2 * M * M * M - 3 * M * M + 1,
                                        w > 0 && (F = 4 * (D + T * t),
                                        _ += w * m[F + 3],
                                        x += w,
                                        m[F + 3] < 255 && (w = w * m[F + 3] / 250),
                                        S += w * m[F],
                                        P += w * m[F + 1],
                                        k += w * m[F + 2],
                                        C += w))
                                    }
                                f[y] = S / C,
                                f[y + 1] = P / C,
                                f[y + 2] = k / C,
                                f[y + 3] = _ / x
                            }
                        return g
                    },
                    toObject: function() {
                        return {
                            type: this.type,
                            scaleX: this.scaleX,
                            scaleY: this.scaleY,
                            resizeType: this.resizeType,
                            lanczosLobes: this.lanczosLobes
                        }
                    }
                }),
                t.Image.filters.Resize.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.Image.filters
                  , n = t.util.createClass;
                i.Contrast = n(i.BaseFilter, {
                    type: "Contrast",
                    fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",
                    contrast: 0,
                    mainParameter: "contrast",
                    applyTo2d: function(e) {
                        if (0 !== this.contrast) {
                            var t, i = e.imageData, n = i.data, o = n.length, r = Math.floor(255 * this.contrast), a = 259 * (r + 255) / (255 * (259 - r));
                            for (t = 0; t < o; t += 4)
                                n[t] = a * (n[t] - 128) + 128,
                                n[t + 1] = a * (n[t + 1] - 128) + 128,
                                n[t + 2] = a * (n[t + 2] - 128) + 128
                        }
                    },
                    getUniformLocations: function(e, t) {
                        return {
                            uContrast: e.getUniformLocation(t, "uContrast")
                        }
                    },
                    sendUniformData: function(e, t) {
                        e.uniform1f(t.uContrast, this.contrast)
                    }
                }),
                t.Image.filters.Contrast.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.Image.filters
                  , n = t.util.createClass;
                i.Saturation = n(i.BaseFilter, {
                    type: "Saturation",
                    fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",
                    saturation: 0,
                    mainParameter: "saturation",
                    applyTo2d: function(e) {
                        if (0 !== this.saturation) {
                            var t, i, n = e.imageData, o = n.data, r = o.length, a = -this.saturation;
                            for (t = 0; t < r; t += 4)
                                i = Math.max(o[t], o[t + 1], o[t + 2]),
                                o[t] += i !== o[t] ? (i - o[t]) * a : 0,
                                o[t + 1] += i !== o[t + 1] ? (i - o[t + 1]) * a : 0,
                                o[t + 2] += i !== o[t + 2] ? (i - o[t + 2]) * a : 0
                        }
                    },
                    getUniformLocations: function(e, t) {
                        return {
                            uSaturation: e.getUniformLocation(t, "uSaturation")
                        }
                    },
                    sendUniformData: function(e, t) {
                        e.uniform1f(t.uSaturation, -this.saturation)
                    }
                }),
                t.Image.filters.Saturation.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.Image.filters
                  , n = t.util.createClass;
                i.Blur = n(i.BaseFilter, {
                    type: "Blur",
                    fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",
                    blur: 0,
                    mainParameter: "blur",
                    applyTo: function(e) {
                        e.webgl ? (this.aspectRatio = e.sourceWidth / e.sourceHeight,
                        e.passes++,
                        this._setupFrameBuffer(e),
                        this.horizontal = !0,
                        this.applyToWebGL(e),
                        this._swapTextures(e),
                        this._setupFrameBuffer(e),
                        this.horizontal = !1,
                        this.applyToWebGL(e),
                        this._swapTextures(e)) : this.applyTo2d(e)
                    },
                    applyTo2d: function(e) {
                        e.imageData = this.simpleBlur(e)
                    },
                    simpleBlur: function(e) {
                        var i, n, o = e.filterBackend.resources, r = e.imageData.width, a = e.imageData.height;
                        o.blurLayer1 || (o.blurLayer1 = t.util.createCanvasElement(),
                        o.blurLayer2 = t.util.createCanvasElement()),
                        i = o.blurLayer1,
                        n = o.blurLayer2,
                        i.width === r && i.height === a || (n.width = i.width = r,
                        n.height = i.height = a);
                        var s, l, c, d, u = i.getContext("2d"), p = n.getContext("2d"), h = 15, m = .06 * this.blur * .5;
                        for (u.putImageData(e.imageData, 0, 0),
                        p.clearRect(0, 0, r, a),
                        d = -h; d <= h; d++)
                            s = (Math.random() - .5) / 4,
                            l = d / h,
                            c = m * l * r + s,
                            p.globalAlpha = 1 - Math.abs(l),
                            p.drawImage(i, c, s),
                            u.drawImage(n, 0, 0),
                            p.globalAlpha = 1,
                            p.clearRect(0, 0, n.width, n.height);
                        for (d = -h; d <= h; d++)
                            s = (Math.random() - .5) / 4,
                            l = d / h,
                            c = m * l * a + s,
                            p.globalAlpha = 1 - Math.abs(l),
                            p.drawImage(i, s, c),
                            u.drawImage(n, 0, 0),
                            p.globalAlpha = 1,
                            p.clearRect(0, 0, n.width, n.height);
                        e.ctx.drawImage(i, 0, 0);
                        var g = e.ctx.getImageData(0, 0, i.width, i.height);
                        return u.globalAlpha = 1,
                        u.clearRect(0, 0, i.width, i.height),
                        g
                    },
                    getUniformLocations: function(e, t) {
                        return {
                            delta: e.getUniformLocation(t, "uDelta")
                        }
                    },
                    sendUniformData: function(e, t) {
                        var i = this.chooseRightDelta();
                        e.uniform2fv(t.delta, i)
                    },
                    chooseRightDelta: function() {
                        var e, t = 1, i = [0, 0];
                        return this.horizontal ? this.aspectRatio > 1 && (t = 1 / this.aspectRatio) : this.aspectRatio < 1 && (t = this.aspectRatio),
                        e = t * this.blur * .12,
                        this.horizontal ? i[0] = e : i[1] = e,
                        i
                    }
                }),
                i.Blur.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.Image.filters
                  , n = t.util.createClass;
                i.Gamma = n(i.BaseFilter, {
                    type: "Gamma",
                    fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",
                    gamma: [1, 1, 1],
                    mainParameter: "gamma",
                    initialize: function(e) {
                        this.gamma = [1, 1, 1],
                        i.BaseFilter.prototype.initialize.call(this, e)
                    },
                    applyTo2d: function(e) {
                        var t, i = e.imageData, n = i.data, o = this.gamma, r = n.length, a = 1 / o[0], s = 1 / o[1], l = 1 / o[2];
                        for (this.rVals || (this.rVals = new Uint8Array(256),
                        this.gVals = new Uint8Array(256),
                        this.bVals = new Uint8Array(256)),
                        t = 0,
                        r = 256; t < r; t++)
                            this.rVals[t] = 255 * Math.pow(t / 255, a),
                            this.gVals[t] = 255 * Math.pow(t / 255, s),
                            this.bVals[t] = 255 * Math.pow(t / 255, l);
                        for (t = 0,
                        r = n.length; t < r; t += 4)
                            n[t] = this.rVals[n[t]],
                            n[t + 1] = this.gVals[n[t + 1]],
                            n[t + 2] = this.bVals[n[t + 2]]
                    },
                    getUniformLocations: function(e, t) {
                        return {
                            uGamma: e.getUniformLocation(t, "uGamma")
                        }
                    },
                    sendUniformData: function(e, t) {
                        e.uniform3fv(t.uGamma, this.gamma)
                    }
                }),
                t.Image.filters.Gamma.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.Image.filters
                  , n = t.util.createClass;
                i.Composed = n(i.BaseFilter, {
                    type: "Composed",
                    subFilters: [],
                    initialize: function(e) {
                        this.callSuper("initialize", e),
                        this.subFilters = this.subFilters.slice(0)
                    },
                    applyTo: function(e) {
                        e.passes += this.subFilters.length - 1,
                        this.subFilters.forEach((function(t) {
                            t.applyTo(e)
                        }
                        ))
                    },
                    toObject: function() {
                        return t.util.object.extend(this.callSuper("toObject"), {
                            subFilters: this.subFilters.map((function(e) {
                                return e.toObject()
                            }
                            ))
                        })
                    },
                    isNeutralState: function() {
                        return !this.subFilters.some((function(e) {
                            return !e.isNeutralState()
                        }
                        ))
                    }
                }),
                t.Image.filters.Composed.fromObject = function(e, i) {
                    var n = e.subFilters || []
                      , o = n.map((function(e) {
                        return new t.Image.filters[e.type](e)
                    }
                    ))
                      , r = new t.Image.filters.Composed({
                        subFilters: o
                    });
                    return i && i(r),
                    r
                }
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.Image.filters
                  , n = t.util.createClass;
                i.HueRotation = n(i.ColorMatrix, {
                    type: "HueRotation",
                    rotation: 0,
                    mainParameter: "rotation",
                    calculateMatrix: function() {
                        var e = this.rotation * Math.PI
                          , i = t.util.cos(e)
                          , n = t.util.sin(e)
                          , o = 1 / 3
                          , r = Math.sqrt(o) * n
                          , a = 1 - i;
                        this.matrix = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0],
                        this.matrix[0] = i + a / 3,
                        this.matrix[1] = o * a - r,
                        this.matrix[2] = o * a + r,
                        this.matrix[5] = o * a + r,
                        this.matrix[6] = i + o * a,
                        this.matrix[7] = o * a - r,
                        this.matrix[10] = o * a - r,
                        this.matrix[11] = o * a + r,
                        this.matrix[12] = i + o * a
                    },
                    isNeutralState: function(e) {
                        return this.calculateMatrix(),
                        i.BaseFilter.prototype.isNeutralState.call(this, e)
                    },
                    applyTo: function(e) {
                        this.calculateMatrix(),
                        i.BaseFilter.prototype.applyTo.call(this, e)
                    }
                }),
                t.Image.filters.HueRotation.fromObject = t.Image.filters.BaseFilter.fromObject
            }(i),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {})
                  , i = t.util.object.clone;
                t.Text ? t.warn("fabric.Text is already defined") : (t.Text = t.util.createClass(t.Object, {
                    _dimensionAffectingProps: ["fontSize", "fontWeight", "fontFamily", "fontStyle", "lineHeight", "text", "charSpacing", "textAlign", "styles"],
                    _reNewline: /\r?\n/,
                    _reSpacesAndTabs: /[ \t\r]/g,
                    _reSpaceAndTab: /[ \t\r]/,
                    _reWords: /\S+/g,
                    type: "text",
                    fontSize: 40,
                    fontWeight: "normal",
                    fontFamily: "Times New Roman",
                    underline: !1,
                    overline: !1,
                    linethrough: !1,
                    textAlign: "left",
                    fontStyle: "normal",
                    lineHeight: 1.16,
                    superscript: {
                        size: .6,
                        baseline: -.35
                    },
                    subscript: {
                        size: .6,
                        baseline: .11
                    },
                    textBackgroundColor: "",
                    stateProperties: t.Object.prototype.stateProperties.concat("fontFamily", "fontWeight", "fontSize", "text", "underline", "overline", "linethrough", "textAlign", "fontStyle", "lineHeight", "textBackgroundColor", "charSpacing", "styles"),
                    cacheProperties: t.Object.prototype.cacheProperties.concat("fontFamily", "fontWeight", "fontSize", "text", "underline", "overline", "linethrough", "textAlign", "fontStyle", "lineHeight", "textBackgroundColor", "charSpacing", "styles"),
                    stroke: null,
                    shadow: null,
                    _fontSizeFraction: .222,
                    offsets: {
                        underline: .1,
                        linethrough: -.315,
                        overline: -.88
                    },
                    _fontSizeMult: 1.13,
                    charSpacing: 0,
                    styles: null,
                    _measuringContext: null,
                    deltaY: 0,
                    _styleProperties: ["stroke", "strokeWidth", "fill", "fontFamily", "fontSize", "fontWeight", "fontStyle", "underline", "overline", "linethrough", "deltaY", "textBackgroundColor"],
                    __charBounds: [],
                    CACHE_FONT_SIZE: 400,
                    MIN_TEXT_WIDTH: 2,
                    initialize: function(e, t) {
                        this.styles = t && t.styles || {},
                        this.text = e,
                        this.__skipDimension = !0,
                        this.callSuper("initialize", t),
                        this.__skipDimension = !1,
                        this.initDimensions(),
                        this.setCoords(),
                        this.setupState({
                            propertySet: "_dimensionAffectingProps"
                        })
                    },
                    getMeasuringContext: function() {
                        return t._measuringContext || (t._measuringContext = this.canvas && this.canvas.contextCache || t.util.createCanvasElement().getContext("2d")),
                        t._measuringContext
                    },
                    _splitText: function() {
                        var e = this._splitTextIntoLines(this.text);
                        return this.textLines = e.lines,
                        this._textLines = e.graphemeLines,
                        this._unwrappedTextLines = e._unwrappedLines,
                        this._text = e.graphemeText,
                        e
                    },
                    initDimensions: function() {
                        this.__skipDimension || (this._splitText(),
                        this._clearCache(),
                        this.width = this.calcTextWidth() || this.cursorWidth || this.MIN_TEXT_WIDTH,
                        -1 !== this.textAlign.indexOf("justify") && this.enlargeSpaces(),
                        this.height = this.calcTextHeight(),
                        this.saveState({
                            propertySet: "_dimensionAffectingProps"
                        }))
                    },
                    enlargeSpaces: function() {
                        for (var e, t, i, n, o, r, a, s = 0, l = this._textLines.length; s < l; s++)
                            if (("justify" === this.textAlign || s !== l - 1 && !this.isEndOfWrapping(s)) && (n = 0,
                            o = this._textLines[s],
                            t = this.getLineWidth(s),
                            t < this.width && (a = this.textLines[s].match(this._reSpacesAndTabs)))) {
                                i = a.length,
                                e = (this.width - t) / i;
                                for (var c = 0, d = o.length; c <= d; c++)
                                    r = this.__charBounds[s][c],
                                    this._reSpaceAndTab.test(o[c]) ? (r.width += e,
                                    r.kernedWidth += e,
                                    r.left += n,
                                    n += e) : r.left += n
                            }
                    },
                    isEndOfWrapping: function(e) {
                        return e === this._textLines.length - 1
                    },
                    missingNewlineOffset: function() {
                        return 1
                    },
                    toString: function() {
                        return "#<fabric.Text (" + this.complexity() + '): { "text": "' + this.text + '", "fontFamily": "' + this.fontFamily + '" }>'
                    },
                    _getCacheCanvasDimensions: function() {
                        var e = this.callSuper("_getCacheCanvasDimensions")
                          , t = this.fontSize;
                        return e.width += t * e.zoomX,
                        e.height += t * e.zoomY,
                        e
                    },
                    _render: function(e) {
                        this._setTextStyles(e),
                        this._renderTextLinesBackground(e),
                        this._renderTextDecoration(e, "underline"),
                        this._renderText(e),
                        this._renderTextDecoration(e, "overline"),
                        this._renderTextDecoration(e, "linethrough")
                    },
                    _renderText: function(e) {
                        "stroke" === this.paintFirst ? (this._renderTextStroke(e),
                        this._renderTextFill(e)) : (this._renderTextFill(e),
                        this._renderTextStroke(e))
                    },
                    _setTextStyles: function(e, t, i) {
                        e.textBaseline = "alphabetic",
                        e.font = this._getFontDeclaration(t, i)
                    },
                    calcTextWidth: function() {
                        for (var e = this.getLineWidth(0), t = 1, i = this._textLines.length; t < i; t++) {
                            var n = this.getLineWidth(t);
                            n > e && (e = n)
                        }
                        return e
                    },
                    _renderTextLine: function(e, t, i, n, o, r) {
                        this._renderChars(e, t, i, n, o, r)
                    },
                    _renderTextLinesBackground: function(e) {
                        if (this.textBackgroundColor || this.styleHas("textBackgroundColor")) {
                            for (var t, i, n, o, r, a, s = 0, l = e.fillStyle, c = this._getLeftOffset(), d = this._getTopOffset(), u = 0, p = 0, h = 0, m = this._textLines.length; h < m; h++)
                                if (t = this.getHeightOfLine(h),
                                this.textBackgroundColor || this.styleHas("textBackgroundColor", h)) {
                                    n = this._textLines[h],
                                    i = this._getLineLeftOffset(h),
                                    p = 0,
                                    u = 0,
                                    o = this.getValueOfPropertyAt(h, 0, "textBackgroundColor");
                                    for (var g = 0, f = n.length; g < f; g++)
                                        r = this.__charBounds[h][g],
                                        a = this.getValueOfPropertyAt(h, g, "textBackgroundColor"),
                                        a !== o ? (e.fillStyle = o,
                                        o && e.fillRect(c + i + u, d + s, p, t / this.lineHeight),
                                        u = r.left,
                                        p = r.width,
                                        o = a) : p += r.kernedWidth;
                                    a && (e.fillStyle = a,
                                    e.fillRect(c + i + u, d + s, p, t / this.lineHeight)),
                                    s += t
                                } else
                                    s += t;
                            e.fillStyle = l,
                            this._removeShadow(e)
                        }
                    },
                    getFontCache: function(e) {
                        var i = e.fontFamily.toLowerCase();
                        t.charWidthsCache[i] || (t.charWidthsCache[i] = {});
                        var n = t.charWidthsCache[i]
                          , o = e.fontStyle.toLowerCase() + "_" + (e.fontWeight + "").toLowerCase();
                        return n[o] || (n[o] = {}),
                        n[o]
                    },
                    _applyCharStyles: function(e, t, i, n, o) {
                        this._setFillStyles(t, o),
                        this._setStrokeStyles(t, o),
                        t.font = this._getFontDeclaration(o)
                    },
                    _measureChar: function(e, t, i, n) {
                        var o, r, a, s, l = this.getFontCache(t), c = this._getFontDeclaration(t), d = this._getFontDeclaration(n), u = i + e, p = c === d, h = t.fontSize / this.CACHE_FONT_SIZE;
                        if (i && void 0 !== l[i] && (a = l[i]),
                        void 0 !== l[e] && (s = o = l[e]),
                        p && void 0 !== l[u] && (r = l[u],
                        s = r - a),
                        void 0 === o || void 0 === a || void 0 === r) {
                            var m = this.getMeasuringContext();
                            this._setTextStyles(m, t, !0)
                        }
                        return void 0 === o && (s = o = m.measureText(e).width,
                        l[e] = o),
                        void 0 === a && p && i && (a = m.measureText(i).width,
                        l[i] = a),
                        p && void 0 === r && (r = m.measureText(u).width,
                        l[u] = r,
                        s = r - a),
                        {
                            width: o * h,
                            kernedWidth: s * h
                        }
                    },
                    getHeightOfChar: function(e, t) {
                        return this.getValueOfPropertyAt(e, t, "fontSize")
                    },
                    measureLine: function(e) {
                        var t = this._measureLine(e);
                        return 0 !== this.charSpacing && (t.width -= this._getWidthOfCharSpacing()),
                        t.width < 0 && (t.width = 0),
                        t
                    },
                    _measureLine: function(e) {
                        var t, i, n, o, r = 0, a = this._textLines[e], s = 0, l = new Array(a.length);
                        for (this.__charBounds[e] = l,
                        t = 0; t < a.length; t++)
                            i = a[t],
                            o = this._getGraphemeBox(i, e, t, n),
                            l[t] = o,
                            r += o.kernedWidth,
                            n = i;
                        return l[t] = {
                            left: o ? o.left + o.width : 0,
                            width: 0,
                            kernedWidth: 0,
                            height: this.fontSize
                        },
                        {
                            width: r,
                            numOfSpaces: s
                        }
                    },
                    _getGraphemeBox: function(e, t, i, n, o) {
                        var r, a = this.getCompleteStyleDeclaration(t, i), s = n ? this.getCompleteStyleDeclaration(t, i - 1) : {}, l = this._measureChar(e, a, n, s), c = l.kernedWidth, d = l.width;
                        0 !== this.charSpacing && (r = this._getWidthOfCharSpacing(),
                        d += r,
                        c += r);
                        var u = {
                            width: d,
                            left: 0,
                            height: a.fontSize,
                            kernedWidth: c,
                            deltaY: a.deltaY
                        };
                        if (i > 0 && !o) {
                            var p = this.__charBounds[t][i - 1];
                            u.left = p.left + p.width + l.kernedWidth - l.width
                        }
                        return u
                    },
                    getHeightOfLine: function(e) {
                        if (this.__lineHeights[e])
                            return this.__lineHeights[e];
                        for (var t = this._textLines[e], i = this.getHeightOfChar(e, 0), n = 1, o = t.length; n < o; n++)
                            i = Math.max(this.getHeightOfChar(e, n), i);
                        return this.__lineHeights[e] = i * this.lineHeight * this._fontSizeMult
                    },
                    calcTextHeight: function() {
                        for (var e, t = 0, i = 0, n = this._textLines.length; i < n; i++)
                            e = this.getHeightOfLine(i),
                            t += i === n - 1 ? e / this.lineHeight : e;
                        return t
                    },
                    _getLeftOffset: function() {
                        return -this.width / 2
                    },
                    _getTopOffset: function() {
                        return -this.height / 2
                    },
                    _renderTextCommon: function(e, t) {
                        e.save();
                        for (var i = 0, n = this._getLeftOffset(), o = this._getTopOffset(), r = this._applyPatternGradientTransform(e, "fillText" === t ? this.fill : this.stroke), a = 0, s = this._textLines.length; a < s; a++) {
                            var l = this.getHeightOfLine(a)
                              , c = l / this.lineHeight
                              , d = this._getLineLeftOffset(a);
                            this._renderTextLine(t, e, this._textLines[a], n + d - r.offsetX, o + i + c - r.offsetY, a),
                            i += l
                        }
                        e.restore()
                    },
                    _renderTextFill: function(e) {
                        (this.fill || this.styleHas("fill")) && this._renderTextCommon(e, "fillText")
                    },
                    _renderTextStroke: function(e) {
                        (this.stroke && 0 !== this.strokeWidth || !this.isEmptyStyles()) && (this.shadow && !this.shadow.affectStroke && this._removeShadow(e),
                        e.save(),
                        this._setLineDash(e, this.strokeDashArray),
                        e.beginPath(),
                        this._renderTextCommon(e, "strokeText"),
                        e.closePath(),
                        e.restore())
                    },
                    _renderChars: function(e, t, i, n, o, r) {
                        var a, s, l, c, d = this.getHeightOfLine(r), u = -1 !== this.textAlign.indexOf("justify"), p = "", h = 0, m = !u && 0 === this.charSpacing && this.isEmptyStyles(r);
                        if (t.save(),
                        o -= d * this._fontSizeFraction / this.lineHeight,
                        m)
                            return this._renderChar(e, t, r, 0, this.textLines[r], n, o, d),
                            void t.restore();
                        for (var g = 0, f = i.length - 1; g <= f; g++)
                            c = g === f || this.charSpacing,
                            p += i[g],
                            l = this.__charBounds[r][g],
                            0 === h ? (n += l.kernedWidth - l.width,
                            h += l.width) : h += l.kernedWidth,
                            u && !c && this._reSpaceAndTab.test(i[g]) && (c = !0),
                            c || (a = a || this.getCompleteStyleDeclaration(r, g),
                            s = this.getCompleteStyleDeclaration(r, g + 1),
                            c = this._hasStyleChanged(a, s)),
                            c && (this._renderChar(e, t, r, g, p, n, o, d),
                            p = "",
                            a = s,
                            n += h,
                            h = 0);
                        t.restore()
                    },
                    _renderChar: function(e, t, i, n, o, r, a) {
                        var s = this._getStyleDeclaration(i, n)
                          , l = this.getCompleteStyleDeclaration(i, n)
                          , c = "fillText" === e && l.fill
                          , d = "strokeText" === e && l.stroke && l.strokeWidth;
                        (d || c) && (s && t.save(),
                        this._applyCharStyles(e, t, i, n, l),
                        s && s.textBackgroundColor && this._removeShadow(t),
                        s && s.deltaY && (a += s.deltaY),
                        c && t.fillText(o, r, a),
                        d && t.strokeText(o, r, a),
                        s && t.restore())
                    },
                    setSuperscript: function(e, t) {
                        return this._setScript(e, t, this.superscript)
                    },
                    setSubscript: function(e, t) {
                        return this._setScript(e, t, this.subscript)
                    },
                    _setScript: function(e, t, i) {
                        var n = this.get2DCursorLocation(e, !0)
                          , o = this.getValueOfPropertyAt(n.lineIndex, n.charIndex, "fontSize")
                          , r = this.getValueOfPropertyAt(n.lineIndex, n.charIndex, "deltaY")
                          , a = {
                            fontSize: o * i.size,
                            deltaY: r + o * i.baseline
                        };
                        return this.setSelectionStyles(a, e, t),
                        this
                    },
                    _hasStyleChanged: function(e, t) {
                        return e.fill !== t.fill || e.stroke !== t.stroke || e.strokeWidth !== t.strokeWidth || e.fontSize !== t.fontSize || e.fontFamily !== t.fontFamily || e.fontWeight !== t.fontWeight || e.fontStyle !== t.fontStyle || e.deltaY !== t.deltaY
                    },
                    _hasStyleChangedForSvg: function(e, t) {
                        return this._hasStyleChanged(e, t) || e.overline !== t.overline || e.underline !== t.underline || e.linethrough !== t.linethrough
                    },
                    _getLineLeftOffset: function(e) {
                        var t = this.getLineWidth(e);
                        return "center" === this.textAlign ? (this.width - t) / 2 : "right" === this.textAlign ? this.width - t : "justify-center" === this.textAlign && this.isEndOfWrapping(e) ? (this.width - t) / 2 : "justify-right" === this.textAlign && this.isEndOfWrapping(e) ? this.width - t : 0
                    },
                    _clearCache: function() {
                        this.__lineWidths = [],
                        this.__lineHeights = [],
                        this.__charBounds = []
                    },
                    _shouldClearDimensionCache: function() {
                        var e = this._forceClearCache;
                        return e || (e = this.hasStateChanged("_dimensionAffectingProps")),
                        e && (this.dirty = !0,
                        this._forceClearCache = !1),
                        e
                    },
                    getLineWidth: function(e) {
                        if (this.__lineWidths[e])
                            return this.__lineWidths[e];
                        var t, i, n = this._textLines[e];
                        return "" === n ? t = 0 : (i = this.measureLine(e),
                        t = i.width),
                        this.__lineWidths[e] = t,
                        t
                    },
                    _getWidthOfCharSpacing: function() {
                        return 0 !== this.charSpacing ? this.fontSize * this.charSpacing / 1e3 : 0
                    },
                    getValueOfPropertyAt: function(e, t, i) {
                        var n = this._getStyleDeclaration(e, t);
                        return n && "undefined" !== typeof n[i] ? n[i] : this[i]
                    },
                    _renderTextDecoration: function(e, t) {
                        if (this[t] || this.styleHas(t)) {
                            for (var i, n, o, r, a, s, l, c, d, u, p, h, m, g, f, v, b = this._getLeftOffset(), y = this._getTopOffset(), w = this._getWidthOfCharSpacing(), C = 0, x = this._textLines.length; C < x; C++)
                                if (i = this.getHeightOfLine(C),
                                this[t] || this.styleHas(t, C)) {
                                    l = this._textLines[C],
                                    g = i / this.lineHeight,
                                    r = this._getLineLeftOffset(C),
                                    u = 0,
                                    p = 0,
                                    c = this.getValueOfPropertyAt(C, 0, t),
                                    v = this.getValueOfPropertyAt(C, 0, "fill"),
                                    d = y + g * (1 - this._fontSizeFraction),
                                    n = this.getHeightOfChar(C, 0),
                                    a = this.getValueOfPropertyAt(C, 0, "deltaY");
                                    for (var S = 0, P = l.length; S < P; S++)
                                        h = this.__charBounds[C][S],
                                        m = this.getValueOfPropertyAt(C, S, t),
                                        f = this.getValueOfPropertyAt(C, S, "fill"),
                                        o = this.getHeightOfChar(C, S),
                                        s = this.getValueOfPropertyAt(C, S, "deltaY"),
                                        (m !== c || f !== v || o !== n || s !== a) && p > 0 ? (e.fillStyle = v,
                                        c && v && e.fillRect(b + r + u, d + this.offsets[t] * n + a, p, this.fontSize / 15),
                                        u = h.left,
                                        p = h.width,
                                        c = m,
                                        v = f,
                                        n = o,
                                        a = s) : p += h.kernedWidth;
                                    e.fillStyle = f,
                                    m && f && e.fillRect(b + r + u, d + this.offsets[t] * n + a, p - w, this.fontSize / 15),
                                    y += i
                                } else
                                    y += i;
                            this._removeShadow(e)
                        }
                    },
                    _getFontDeclaration: function(e, i) {
                        var n = e || this
                          , o = this.fontFamily
                          , r = t.Text.genericFonts.indexOf(o.toLowerCase()) > -1
                          , a = void 0 === o || o.indexOf("'") > -1 || o.indexOf(",") > -1 || o.indexOf('"') > -1 || r ? n.fontFamily : '"' + n.fontFamily + '"';
                        return [t.isLikelyNode ? n.fontWeight : n.fontStyle, t.isLikelyNode ? n.fontStyle : n.fontWeight, i ? this.CACHE_FONT_SIZE + "px" : n.fontSize + "px", a].join(" ")
                    },
                    render: function(e) {
                        this.visible && (this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen() || (this._shouldClearDimensionCache() && this.initDimensions(),
                        this.callSuper("render", e)))
                    },
                    _splitTextIntoLines: function(e) {
                        for (var i = e.split(this._reNewline), n = new Array(i.length), o = ["\n"], r = [], a = 0; a < i.length; a++)
                            n[a] = t.util.string.graphemeSplit(i[a]),
                            r = r.concat(n[a], o);
                        return r.pop(),
                        {
                            _unwrappedLines: n,
                            lines: i,
                            graphemeText: r,
                            graphemeLines: n
                        }
                    },
                    toObject: function(e) {
                        var t = ["text", "fontSize", "fontWeight", "fontFamily", "fontStyle", "lineHeight", "underline", "overline", "linethrough", "textAlign", "textBackgroundColor", "charSpacing"].concat(e)
                          , n = this.callSuper("toObject", t);
                        return n.styles = i(this.styles, !0),
                        n
                    },
                    set: function(e, t) {
                        this.callSuper("set", e, t);
                        var i = !1;
                        if ("object" === typeof e)
                            for (var n in e)
                                i = i || -1 !== this._dimensionAffectingProps.indexOf(n);
                        else
                            i = -1 !== this._dimensionAffectingProps.indexOf(e);
                        return i && (this.initDimensions(),
                        this.setCoords()),
                        this
                    },
                    complexity: function() {
                        return 1
                    }
                }),
                t.Text.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),
                t.Text.DEFAULT_SVG_FONT_SIZE = 16,
                t.Text.fromElement = function(e, n, o) {
                    if (!e)
                        return n(null);
                    var r = t.parseAttributes(e, t.Text.ATTRIBUTE_NAMES)
                      , a = r.textAnchor || "left";
                    if (o = t.util.object.extend(o ? i(o) : {}, r),
                    o.top = o.top || 0,
                    o.left = o.left || 0,
                    r.textDecoration) {
                        var s = r.textDecoration;
                        -1 !== s.indexOf("underline") && (o.underline = !0),
                        -1 !== s.indexOf("overline") && (o.overline = !0),
                        -1 !== s.indexOf("line-through") && (o.linethrough = !0),
                        delete o.textDecoration
                    }
                    "dx"in r && (o.left += r.dx),
                    "dy"in r && (o.top += r.dy),
                    "fontSize"in o || (o.fontSize = t.Text.DEFAULT_SVG_FONT_SIZE);
                    var l = "";
                    "textContent"in e ? l = e.textContent : "firstChild"in e && null !== e.firstChild && "data"in e.firstChild && null !== e.firstChild.data && (l = e.firstChild.data),
                    l = l.replace(/^\s+|\s+$|\n+/g, "").replace(/\s+/g, " ");
                    var c = o.strokeWidth;
                    o.strokeWidth = 0;
                    var d = new t.Text(l,o)
                      , u = d.getScaledHeight() / d.height
                      , p = (d.height + d.strokeWidth) * d.lineHeight - d.height
                      , h = p * u
                      , m = d.getScaledHeight() + h
                      , g = 0;
                    "center" === a && (g = d.getScaledWidth() / 2),
                    "right" === a && (g = d.getScaledWidth()),
                    d.set({
                        left: d.left - g,
                        top: d.top - (m - d.fontSize * (.07 + d._fontSizeFraction)) / d.lineHeight,
                        strokeWidth: "undefined" !== typeof c ? c : 1
                    }),
                    n(d)
                }
                ,
                t.Text.fromObject = function(e, i) {
                    return t.Object._fromObject("Text", e, i, "text")
                }
                ,
                t.Text.genericFonts = ["sans-serif", "serif", "cursive", "fantasy", "monospace"],
                t.util.createAccessors && t.util.createAccessors(t.Text))
            }(i),
            function() {
                o.util.object.extend(o.Text.prototype, {
                    isEmptyStyles: function(e) {
                        if (!this.styles)
                            return !0;
                        if ("undefined" !== typeof e && !this.styles[e])
                            return !0;
                        var t = "undefined" === typeof e ? this.styles : {
                            line: this.styles[e]
                        };
                        for (var i in t)
                            for (var n in t[i])
                                for (var o in t[i][n])
                                    return !1;
                        return !0
                    },
                    styleHas: function(e, t) {
                        if (!this.styles || !e || "" === e)
                            return !1;
                        if ("undefined" !== typeof t && !this.styles[t])
                            return !1;
                        var i = "undefined" === typeof t ? this.styles : {
                            0: this.styles[t]
                        };
                        for (var n in i)
                            for (var o in i[n])
                                if ("undefined" !== typeof i[n][o][e])
                                    return !0;
                        return !1
                    },
                    cleanStyle: function(e) {
                        if (!this.styles || !e || "" === e)
                            return !1;
                        var t, i, n = this.styles, o = 0, r = !0, a = 0;
                        for (var s in n) {
                            for (var l in t = 0,
                            n[s]) {
                                var c = n[s][l]
                                  , d = c.hasOwnProperty(e);
                                o++,
                                d ? (i ? c[e] !== i && (r = !1) : i = c[e],
                                c[e] === this[e] && delete c[e]) : r = !1,
                                0 !== Object.keys(c).length ? t++ : delete n[s][l]
                            }
                            0 === t && delete n[s]
                        }
                        for (var u = 0; u < this._textLines.length; u++)
                            a += this._textLines[u].length;
                        r && o === a && (this[e] = i,
                        this.removeStyle(e))
                    },
                    removeStyle: function(e) {
                        if (this.styles && e && "" !== e) {
                            var t, i, n, o = this.styles;
                            for (i in o) {
                                for (n in t = o[i],
                                t)
                                    delete t[n][e],
                                    0 === Object.keys(t[n]).length && delete t[n];
                                0 === Object.keys(t).length && delete o[i]
                            }
                        }
                    },
                    _extendStyles: function(e, t) {
                        var i = this.get2DCursorLocation(e);
                        this._getLineStyle(i.lineIndex) || this._setLineStyle(i.lineIndex),
                        this._getStyleDeclaration(i.lineIndex, i.charIndex) || this._setStyleDeclaration(i.lineIndex, i.charIndex, {}),
                        o.util.object.extend(this._getStyleDeclaration(i.lineIndex, i.charIndex), t)
                    },
                    get2DCursorLocation: function(e, t) {
                        "undefined" === typeof e && (e = this.selectionStart);
                        for (var i = t ? this._unwrappedTextLines : this._textLines, n = i.length, o = 0; o < n; o++) {
                            if (e <= i[o].length)
                                return {
                                    lineIndex: o,
                                    charIndex: e
                                };
                            e -= i[o].length + this.missingNewlineOffset(o)
                        }
                        return {
                            lineIndex: o - 1,
                            charIndex: i[o - 1].length < e ? i[o - 1].length : e
                        }
                    },
                    getSelectionStyles: function(e, t, i) {
                        "undefined" === typeof e && (e = this.selectionStart || 0),
                        "undefined" === typeof t && (t = this.selectionEnd || e);
                        for (var n = [], o = e; o < t; o++)
                            n.push(this.getStyleAtPosition(o, i));
                        return n
                    },
                    getStyleAtPosition: function(e, t) {
                        var i = this.get2DCursorLocation(e)
                          , n = t ? this.getCompleteStyleDeclaration(i.lineIndex, i.charIndex) : this._getStyleDeclaration(i.lineIndex, i.charIndex);
                        return n || {}
                    },
                    setSelectionStyles: function(e, t, i) {
                        "undefined" === typeof t && (t = this.selectionStart || 0),
                        "undefined" === typeof i && (i = this.selectionEnd || t);
                        for (var n = t; n < i; n++)
                            this._extendStyles(n, e);
                        return this._forceClearCache = !0,
                        this
                    },
                    _getStyleDeclaration: function(e, t) {
                        var i = this.styles && this.styles[e];
                        return i ? i[t] : null
                    },
                    getCompleteStyleDeclaration: function(e, t) {
                        for (var i, n = this._getStyleDeclaration(e, t) || {}, o = {}, r = 0; r < this._styleProperties.length; r++)
                            i = this._styleProperties[r],
                            o[i] = "undefined" === typeof n[i] ? this[i] : n[i];
                        return o
                    },
                    _setStyleDeclaration: function(e, t, i) {
                        this.styles[e][t] = i
                    },
                    _deleteStyleDeclaration: function(e, t) {
                        delete this.styles[e][t]
                    },
                    _getLineStyle: function(e) {
                        return !!this.styles[e]
                    },
                    _setLineStyle: function(e) {
                        this.styles[e] = {}
                    },
                    _deleteLineStyle: function(e) {
                        delete this.styles[e]
                    }
                })
            }(),
            function() {
                function e(e) {
                    e.textDecoration && (e.textDecoration.indexOf("underline") > -1 && (e.underline = !0),
                    e.textDecoration.indexOf("line-through") > -1 && (e.linethrough = !0),
                    e.textDecoration.indexOf("overline") > -1 && (e.overline = !0),
                    delete e.textDecoration)
                }
                o.IText = o.util.createClass(o.Text, o.Observable, {
                    type: "i-text",
                    selectionStart: 0,
                    selectionEnd: 0,
                    selectionColor: "rgba(17,119,255,0.3)",
                    isEditing: !1,
                    editable: !0,
                    editingBorderColor: "rgba(102,153,255,0.25)",
                    cursorWidth: 2,
                    cursorColor: "#333",
                    cursorDelay: 1e3,
                    cursorDuration: 600,
                    caching: !0,
                    _reSpace: /\s|\n/,
                    _currentCursorOpacity: 0,
                    _selectionDirection: null,
                    _abortCursorAnimation: !1,
                    __widthOfSpace: [],
                    inCompositionMode: !1,
                    initialize: function(e, t) {
                        this.callSuper("initialize", e, t),
                        this.initBehavior()
                    },
                    setSelectionStart: function(e) {
                        e = Math.max(e, 0),
                        this._updateAndFire("selectionStart", e)
                    },
                    setSelectionEnd: function(e) {
                        e = Math.min(e, this.text.length),
                        this._updateAndFire("selectionEnd", e)
                    },
                    _updateAndFire: function(e, t) {
                        this[e] !== t && (this._fireSelectionChanged(),
                        this[e] = t),
                        this._updateTextarea()
                    },
                    _fireSelectionChanged: function() {
                        this.fire("selection:changed"),
                        this.canvas && this.canvas.fire("text:selection:changed", {
                            target: this
                        })
                    },
                    initDimensions: function() {
                        this.isEditing && this.initDelayedCursor(),
                        this.clearContextTop(),
                        this.callSuper("initDimensions")
                    },
                    render: function(e) {
                        this.clearContextTop(),
                        this.callSuper("render", e),
                        this.cursorOffsetCache = {},
                        this.renderCursorOrSelection()
                    },
                    _render: function(e) {
                        this.callSuper("_render", e)
                    },
                    clearContextTop: function(e) {
                        if (this.isEditing && this.canvas && this.canvas.contextTop) {
                            var t = this.canvas.contextTop
                              , i = this.canvas.viewportTransform;
                            t.save(),
                            t.transform(i[0], i[1], i[2], i[3], i[4], i[5]),
                            this.transform(t),
                            this.transformMatrix && t.transform.apply(t, this.transformMatrix),
                            this._clearTextArea(t),
                            e || t.restore()
                        }
                    },
                    renderCursorOrSelection: function() {
                        if (this.isEditing && this.canvas && this.canvas.contextTop) {
                            var e = this._getCursorBoundaries()
                              , t = this.canvas.contextTop;
                            this.clearContextTop(!0),
                            this.selectionStart === this.selectionEnd ? this.renderCursor(e, t) : this.renderSelection(e, t),
                            t.restore()
                        }
                    },
                    _clearTextArea: function(e) {
                        var t = this.width + 4
                          , i = this.height + 4;
                        e.clearRect(-t / 2, -i / 2, t, i)
                    },
                    _getCursorBoundaries: function(e) {
                        "undefined" === typeof e && (e = this.selectionStart);
                        var t = this._getLeftOffset()
                          , i = this._getTopOffset()
                          , n = this._getCursorBoundariesOffsets(e);
                        return {
                            left: t,
                            top: i,
                            leftOffset: n.left,
                            topOffset: n.top
                        }
                    },
                    _getCursorBoundariesOffsets: function(e) {
                        if (this.cursorOffsetCache && "top"in this.cursorOffsetCache)
                            return this.cursorOffsetCache;
                        var t, i, n, o, r = 0, a = 0, s = this.get2DCursorLocation(e);
                        n = s.charIndex,
                        i = s.lineIndex;
                        for (var l = 0; l < i; l++)
                            r += this.getHeightOfLine(l);
                        t = this._getLineLeftOffset(i);
                        var c = this.__charBounds[i][n];
                        return c && (a = c.left),
                        0 !== this.charSpacing && n === this._textLines[i].length && (a -= this._getWidthOfCharSpacing()),
                        o = {
                            top: r,
                            left: t + (a > 0 ? a : 0)
                        },
                        this.cursorOffsetCache = o,
                        this.cursorOffsetCache
                    },
                    renderCursor: function(e, t) {
                        var i = this.get2DCursorLocation()
                          , n = i.lineIndex
                          , o = i.charIndex > 0 ? i.charIndex - 1 : 0
                          , r = this.getValueOfPropertyAt(n, o, "fontSize")
                          , a = this.scaleX * this.canvas.getZoom()
                          , s = this.cursorWidth / a
                          , l = e.topOffset
                          , c = this.getValueOfPropertyAt(n, o, "deltaY");
                        l += (1 - this._fontSizeFraction) * this.getHeightOfLine(n) / this.lineHeight - r * (1 - this._fontSizeFraction),
                        this.inCompositionMode && this.renderSelection(e, t),
                        t.fillStyle = this.getValueOfPropertyAt(n, o, "fill"),
                        t.globalAlpha = this.__isMousedown ? 1 : this._currentCursorOpacity,
                        t.fillRect(e.left + e.leftOffset - s / 2, l + e.top + c, s, r)
                    },
                    renderSelection: function(e, t) {
                        for (var i = this.inCompositionMode ? this.hiddenTextarea.selectionStart : this.selectionStart, n = this.inCompositionMode ? this.hiddenTextarea.selectionEnd : this.selectionEnd, o = -1 !== this.textAlign.indexOf("justify"), r = this.get2DCursorLocation(i), a = this.get2DCursorLocation(n), s = r.lineIndex, l = a.lineIndex, c = r.charIndex < 0 ? 0 : r.charIndex, d = a.charIndex < 0 ? 0 : a.charIndex, u = s; u <= l; u++) {
                            var p = this._getLineLeftOffset(u) || 0
                              , h = this.getHeightOfLine(u)
                              , m = 0
                              , g = 0
                              , f = 0;
                            if (u === s && (g = this.__charBounds[s][c].left),
                            u >= s && u < l)
                                f = o && !this.isEndOfWrapping(u) ? this.width : this.getLineWidth(u) || 5;
                            else if (u === l)
                                if (0 === d)
                                    f = this.__charBounds[l][d].left;
                                else {
                                    var v = this._getWidthOfCharSpacing();
                                    f = this.__charBounds[l][d - 1].left + this.__charBounds[l][d - 1].width - v
                                }
                            m = h,
                            (this.lineHeight < 1 || u === l && this.lineHeight > 1) && (h /= this.lineHeight),
                            this.inCompositionMode ? (t.fillStyle = this.compositionColor || "black",
                            t.fillRect(e.left + p + g, e.top + e.topOffset + h, f - g, 1)) : (t.fillStyle = this.selectionColor,
                            t.fillRect(e.left + p + g, e.top + e.topOffset, f - g, h)),
                            e.topOffset += m
                        }
                    },
                    getCurrentCharFontSize: function() {
                        var e = this._getCurrentCharIndex();
                        return this.getValueOfPropertyAt(e.l, e.c, "fontSize")
                    },
                    getCurrentCharColor: function() {
                        var e = this._getCurrentCharIndex();
                        return this.getValueOfPropertyAt(e.l, e.c, "fill")
                    },
                    _getCurrentCharIndex: function() {
                        var e = this.get2DCursorLocation(this.selectionStart, !0)
                          , t = e.charIndex > 0 ? e.charIndex - 1 : 0;
                        return {
                            l: e.lineIndex,
                            c: t
                        }
                    }
                }),
                o.IText.fromObject = function(t, i) {
                    if (e(t),
                    t.styles)
                        for (var n in t.styles)
                            for (var r in t.styles[n])
                                e(t.styles[n][r]);
                    o.Object._fromObject("IText", t, i, "text")
                }
            }(),
            function() {
                var e = o.util.object.clone;
                o.util.object.extend(o.IText.prototype, {
                    initBehavior: function() {
                        this.initAddedHandler(),
                        this.initRemovedHandler(),
                        this.initCursorSelectionHandlers(),
                        this.initDoubleClickSimulation(),
                        this.mouseMoveHandler = this.mouseMoveHandler.bind(this)
                    },
                    onDeselect: function() {
                        this.isEditing && this.exitEditing(),
                        this.selected = !1
                    },
                    initAddedHandler: function() {
                        var e = this;
                        this.on("added", (function() {
                            var t = e.canvas;
                            t && (t._hasITextHandlers || (t._hasITextHandlers = !0,
                            e._initCanvasHandlers(t)),
                            t._iTextInstances = t._iTextInstances || [],
                            t._iTextInstances.push(e))
                        }
                        ))
                    },
                    initRemovedHandler: function() {
                        var e = this;
                        this.on("removed", (function() {
                            var t = e.canvas;
                            t && (t._iTextInstances = t._iTextInstances || [],
                            o.util.removeFromArray(t._iTextInstances, e),
                            0 === t._iTextInstances.length && (t._hasITextHandlers = !1,
                            e._removeCanvasHandlers(t)))
                        }
                        ))
                    },
                    _initCanvasHandlers: function(e) {
                        e._mouseUpITextHandler = function() {
                            e._iTextInstances && e._iTextInstances.forEach((function(e) {
                                e.__isMousedown = !1
                            }
                            ))
                        }
                        ,
                        e.on("mouse:up", e._mouseUpITextHandler)
                    },
                    _removeCanvasHandlers: function(e) {
                        e.off("mouse:up", e._mouseUpITextHandler)
                    },
                    _tick: function() {
                        this._currentTickState = this._animateCursor(this, 1, this.cursorDuration, "_onTickComplete")
                    },
                    _animateCursor: function(e, t, i, n) {
                        var o;
                        return o = {
                            isAborted: !1,
                            abort: function() {
                                this.isAborted = !0
                            }
                        },
                        e.animate("_currentCursorOpacity", t, {
                            duration: i,
                            onComplete: function() {
                                o.isAborted || e[n]()
                            },
                            onChange: function() {
                                e.canvas && e.selectionStart === e.selectionEnd && e.renderCursorOrSelection()
                            },
                            abort: function() {
                                return o.isAborted
                            }
                        }),
                        o
                    },
                    _onTickComplete: function() {
                        var e = this;
                        this._cursorTimeout1 && clearTimeout(this._cursorTimeout1),
                        this._cursorTimeout1 = setTimeout((function() {
                            e._currentTickCompleteState = e._animateCursor(e, 0, this.cursorDuration / 2, "_tick")
                        }
                        ), 100)
                    },
                    initDelayedCursor: function(e) {
                        var t = this
                          , i = e ? 0 : this.cursorDelay;
                        this.abortCursorAnimation(),
                        this._currentCursorOpacity = 1,
                        this._cursorTimeout2 = setTimeout((function() {
                            t._tick()
                        }
                        ), i)
                    },
                    abortCursorAnimation: function() {
                        var e = this._currentTickState || this._currentTickCompleteState
                          , t = this.canvas;
                        this._currentTickState && this._currentTickState.abort(),
                        this._currentTickCompleteState && this._currentTickCompleteState.abort(),
                        clearTimeout(this._cursorTimeout1),
                        clearTimeout(this._cursorTimeout2),
                        this._currentCursorOpacity = 0,
                        e && t && t.clearContext(t.contextTop || t.contextContainer)
                    },
                    selectAll: function() {
                        return this.selectionStart = 0,
                        this.selectionEnd = this._text.length,
                        this._fireSelectionChanged(),
                        this._updateTextarea(),
                        this
                    },
                    getSelectedText: function() {
                        return this._text.slice(this.selectionStart, this.selectionEnd).join("")
                    },
                    findWordBoundaryLeft: function(e) {
                        var t = 0
                          , i = e - 1;
                        if (this._reSpace.test(this._text[i]))
                            while (this._reSpace.test(this._text[i]))
                                t++,
                                i--;
                        while (/\S/.test(this._text[i]) && i > -1)
                            t++,
                            i--;
                        return e - t
                    },
                    findWordBoundaryRight: function(e) {
                        var t = 0
                          , i = e;
                        if (this._reSpace.test(this._text[i]))
                            while (this._reSpace.test(this._text[i]))
                                t++,
                                i++;
                        while (/\S/.test(this._text[i]) && i < this._text.length)
                            t++,
                            i++;
                        return e + t
                    },
                    findLineBoundaryLeft: function(e) {
                        var t = 0
                          , i = e - 1;
                        while (!/\n/.test(this._text[i]) && i > -1)
                            t++,
                            i--;
                        return e - t
                    },
                    findLineBoundaryRight: function(e) {
                        var t = 0
                          , i = e;
                        while (!/\n/.test(this._text[i]) && i < this._text.length)
                            t++,
                            i++;
                        return e + t
                    },
                    searchWordBoundary: function(e, t) {
                        var i = this._reSpace.test(this._text[e]) ? e - 1 : e
                          , n = this._text[i]
                          , o = /[ \n\.,;!\?\-]/;
                        while (!o.test(n) && i > 0 && i < this._text.length)
                            i += t,
                            n = this._text[i];
                        return o.test(n) && "\n" !== n && (i += 1 === t ? 0 : 1),
                        i
                    },
                    selectWord: function(e) {
                        e = e || this.selectionStart;
                        var t = this.searchWordBoundary(e, -1)
                          , i = this.searchWordBoundary(e, 1);
                        this.selectionStart = t,
                        this.selectionEnd = i,
                        this._fireSelectionChanged(),
                        this._updateTextarea(),
                        this.renderCursorOrSelection()
                    },
                    selectLine: function(e) {
                        e = e || this.selectionStart;
                        var t = this.findLineBoundaryLeft(e)
                          , i = this.findLineBoundaryRight(e);
                        return this.selectionStart = t,
                        this.selectionEnd = i,
                        this._fireSelectionChanged(),
                        this._updateTextarea(),
                        this
                    },
                    enterEditing: function(e) {
                        if (!this.isEditing && this.editable)
                            return this.canvas && (this.canvas.calcOffset(),
                            this.exitEditingOnOthers(this.canvas)),
                            this.isEditing = !0,
                            this.initHiddenTextarea(e),
                            this.hiddenTextarea.focus(),
                            this.hiddenTextarea.value = this.text,
                            this._updateTextarea(),
                            this._saveEditingProps(),
                            this._setEditingProps(),
                            this._textBeforeEdit = this.text,
                            this._tick(),
                            this.fire("editing:entered"),
                            this._fireSelectionChanged(),
                            this.canvas ? (this.canvas.fire("text:editing:entered", {
                                target: this
                            }),
                            this.initMouseMoveHandler(),
                            this.canvas.requestRenderAll(),
                            this) : this
                    },
                    exitEditingOnOthers: function(e) {
                        e._iTextInstances && e._iTextInstances.forEach((function(e) {
                            e.selected = !1,
                            e.isEditing && e.exitEditing()
                        }
                        ))
                    },
                    initMouseMoveHandler: function() {
                        this.canvas.on("mouse:move", this.mouseMoveHandler)
                    },
                    mouseMoveHandler: function(e) {
                        if (this.__isMousedown && this.isEditing) {
                            var t = this.getSelectionStartFromPointer(e.e)
                              , i = this.selectionStart
                              , n = this.selectionEnd;
                            (t === this.__selectionStartOnMouseDown && i !== n || i !== t && n !== t) && (t > this.__selectionStartOnMouseDown ? (this.selectionStart = this.__selectionStartOnMouseDown,
                            this.selectionEnd = t) : (this.selectionStart = t,
                            this.selectionEnd = this.__selectionStartOnMouseDown),
                            this.selectionStart === i && this.selectionEnd === n || (this.restartCursorIfNeeded(),
                            this._fireSelectionChanged(),
                            this._updateTextarea(),
                            this.renderCursorOrSelection()))
                        }
                    },
                    _setEditingProps: function() {
                        this.hoverCursor = "text",
                        this.canvas && (this.canvas.defaultCursor = this.canvas.moveCursor = "text"),
                        this.borderColor = this.editingBorderColor,
                        this.hasControls = this.selectable = !1,
                        this.lockMovementX = this.lockMovementY = !0
                    },
                    fromStringToGraphemeSelection: function(e, t, i) {
                        var n = i.slice(0, e)
                          , r = o.util.string.graphemeSplit(n).length;
                        if (e === t)
                            return {
                                selectionStart: r,
                                selectionEnd: r
                            };
                        var a = i.slice(e, t)
                          , s = o.util.string.graphemeSplit(a).length;
                        return {
                            selectionStart: r,
                            selectionEnd: r + s
                        }
                    },
                    fromGraphemeToStringSelection: function(e, t, i) {
                        var n = i.slice(0, e)
                          , o = n.join("").length;
                        if (e === t)
                            return {
                                selectionStart: o,
                                selectionEnd: o
                            };
                        var r = i.slice(e, t)
                          , a = r.join("").length;
                        return {
                            selectionStart: o,
                            selectionEnd: o + a
                        }
                    },
                    _updateTextarea: function() {
                        if (this.cursorOffsetCache = {},
                        this.hiddenTextarea) {
                            if (!this.inCompositionMode) {
                                var e = this.fromGraphemeToStringSelection(this.selectionStart, this.selectionEnd, this._text);
                                this.hiddenTextarea.selectionStart = e.selectionStart,
                                this.hiddenTextarea.selectionEnd = e.selectionEnd
                            }
                            this.updateTextareaPosition()
                        }
                    },
                    updateFromTextArea: function() {
                        if (this.hiddenTextarea) {
                            this.cursorOffsetCache = {},
                            this.text = this.hiddenTextarea.value,
                            this._shouldClearDimensionCache() && (this.initDimensions(),
                            this.setCoords());
                            var e = this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value);
                            this.selectionEnd = this.selectionStart = e.selectionEnd,
                            this.inCompositionMode || (this.selectionStart = e.selectionStart),
                            this.updateTextareaPosition()
                        }
                    },
                    updateTextareaPosition: function() {
                        if (this.selectionStart === this.selectionEnd) {
                            var e = this._calcTextareaPosition();
                            this.hiddenTextarea.style.left = e.left,
                            this.hiddenTextarea.style.top = e.top
                        }
                    },
                    _calcTextareaPosition: function() {
                        if (!this.canvas)
                            return {
                                x: 1,
                                y: 1
                            };
                        var e = this.inCompositionMode ? this.compositionStart : this.selectionStart
                          , t = this._getCursorBoundaries(e)
                          , i = this.get2DCursorLocation(e)
                          , n = i.lineIndex
                          , r = i.charIndex
                          , a = this.getValueOfPropertyAt(n, r, "fontSize") * this.lineHeight
                          , s = t.leftOffset
                          , l = this.calcTransformMatrix()
                          , c = {
                            x: t.left + s,
                            y: t.top + t.topOffset + a
                        }
                          , d = this.canvas.upperCanvasEl
                          , u = d.width
                          , p = d.height
                          , h = u - a
                          , m = p - a
                          , g = d.clientWidth / u
                          , f = d.clientHeight / p;
                        return c = o.util.transformPoint(c, l),
                        c = o.util.transformPoint(c, this.canvas.viewportTransform),
                        c.x *= g,
                        c.y *= f,
                        c.x < 0 && (c.x = 0),
                        c.x > h && (c.x = h),
                        c.y < 0 && (c.y = 0),
                        c.y > m && (c.y = m),
                        c.x += this.canvas._offset.left,
                        c.y += this.canvas._offset.top,
                        {
                            left: c.x + "px",
                            top: c.y + "px",
                            fontSize: a + "px",
                            charHeight: a
                        }
                    },
                    _saveEditingProps: function() {
                        this._savedProps = {
                            hasControls: this.hasControls,
                            borderColor: this.borderColor,
                            lockMovementX: this.lockMovementX,
                            lockMovementY: this.lockMovementY,
                            hoverCursor: this.hoverCursor,
                            selectable: this.selectable,
                            defaultCursor: this.canvas && this.canvas.defaultCursor,
                            moveCursor: this.canvas && this.canvas.moveCursor
                        }
                    },
                    _restoreEditingProps: function() {
                        this._savedProps && (this.hoverCursor = this._savedProps.hoverCursor,
                        this.hasControls = this._savedProps.hasControls,
                        this.borderColor = this._savedProps.borderColor,
                        this.selectable = this._savedProps.selectable,
                        this.lockMovementX = this._savedProps.lockMovementX,
                        this.lockMovementY = this._savedProps.lockMovementY,
                        this.canvas && (this.canvas.defaultCursor = this._savedProps.defaultCursor,
                        this.canvas.moveCursor = this._savedProps.moveCursor))
                    },
                    exitEditing: function() {
                        var e = this._textBeforeEdit !== this.text;
                        return this.selected = !1,
                        this.isEditing = !1,
                        this.selectionEnd = this.selectionStart,
                        this.hiddenTextarea && (this.hiddenTextarea.blur && this.hiddenTextarea.blur(),
                        this.canvas && this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),
                        this.hiddenTextarea = null),
                        this.abortCursorAnimation(),
                        this._restoreEditingProps(),
                        this._currentCursorOpacity = 0,
                        this._shouldClearDimensionCache() && (this.initDimensions(),
                        this.setCoords()),
                        this.fire("editing:exited"),
                        e && this.fire("modified"),
                        this.canvas && (this.canvas.off("mouse:move", this.mouseMoveHandler),
                        this.canvas.fire("text:editing:exited", {
                            target: this
                        }),
                        e && this.canvas.fire("object:modified", {
                            target: this
                        })),
                        this
                    },
                    _removeExtraneousStyles: function() {
                        for (var e in this.styles)
                            this._textLines[e] || delete this.styles[e]
                    },
                    removeStyleFromTo: function(e, t) {
                        var i, n, o = this.get2DCursorLocation(e, !0), r = this.get2DCursorLocation(t, !0), a = o.lineIndex, s = o.charIndex, l = r.lineIndex, c = r.charIndex;
                        if (a !== l) {
                            if (this.styles[a])
                                for (i = s; i < this._unwrappedTextLines[a].length; i++)
                                    delete this.styles[a][i];
                            if (this.styles[l])
                                for (i = c; i < this._unwrappedTextLines[l].length; i++)
                                    n = this.styles[l][i],
                                    n && (this.styles[a] || (this.styles[a] = {}),
                                    this.styles[a][s + i - c] = n);
                            for (i = a + 1; i <= l; i++)
                                delete this.styles[i];
                            this.shiftLineStyles(l, a - l)
                        } else if (this.styles[a]) {
                            n = this.styles[a];
                            var d, u, p = c - s;
                            for (i = s; i < c; i++)
                                delete n[i];
                            for (u in this.styles[a])
                                d = parseInt(u, 10),
                                d >= c && (n[d - p] = n[u],
                                delete n[u])
                        }
                    },
                    shiftLineStyles: function(t, i) {
                        var n = e(this.styles);
                        for (var o in this.styles) {
                            var r = parseInt(o, 10);
                            r > t && (this.styles[r + i] = n[r],
                            n[r - i] || delete this.styles[r])
                        }
                    },
                    restartCursorIfNeeded: function() {
                        this._currentTickState && !this._currentTickState.isAborted && this._currentTickCompleteState && !this._currentTickCompleteState.isAborted || this.initDelayedCursor()
                    },
                    insertNewlineStyleObject: function(t, i, n, o) {
                        var r, a = {}, s = !1;
                        for (var l in n || (n = 1),
                        this.shiftLineStyles(t, n),
                        this.styles[t] && (r = this.styles[t][0 === i ? i : i - 1]),
                        this.styles[t]) {
                            var c = parseInt(l, 10);
                            c >= i && (s = !0,
                            a[c - i] = this.styles[t][l],
                            delete this.styles[t][l])
                        }
                        s ? this.styles[t + n] = a : delete this.styles[t + n];
                        while (n > 1)
                            n--,
                            o && o[n] ? this.styles[t + n] = {
                                0: e(o[n])
                            } : r ? this.styles[t + n] = {
                                0: e(r)
                            } : delete this.styles[t + n];
                        this._forceClearCache = !0
                    },
                    insertCharStyleObject: function(t, i, n, o) {
                        this.styles || (this.styles = {});
                        var r = this.styles[t]
                          , a = r ? e(r) : {};
                        for (var s in n || (n = 1),
                        a) {
                            var l = parseInt(s, 10);
                            l >= i && (r[l + n] = a[l],
                            a[l - n] || delete r[l])
                        }
                        if (this._forceClearCache = !0,
                        o)
                            while (n--)
                                Object.keys(o[n]).length && (this.styles[t] || (this.styles[t] = {}),
                                this.styles[t][i + n] = e(o[n]));
                        else if (r) {
                            var c = r[i ? i - 1 : 1];
                            while (c && n--)
                                this.styles[t][i + n] = e(c)
                        }
                    },
                    insertNewStyleBlock: function(e, t, i) {
                        for (var n = this.get2DCursorLocation(t, !0), o = [0], r = 0, a = 0; a < e.length; a++)
                            "\n" === e[a] ? (r++,
                            o[r] = 0) : o[r]++;
                        o[0] > 0 && (this.insertCharStyleObject(n.lineIndex, n.charIndex, o[0], i),
                        i = i && i.slice(o[0] + 1)),
                        r && this.insertNewlineStyleObject(n.lineIndex, n.charIndex + o[0], r);
                        for (a = 1; a < r; a++)
                            o[a] > 0 ? this.insertCharStyleObject(n.lineIndex + a, 0, o[a], i) : i && (this.styles[n.lineIndex + a][0] = i[0]),
                            i = i && i.slice(o[a] + 1);
                        o[a] > 0 && this.insertCharStyleObject(n.lineIndex + a, 0, o[a], i)
                    },
                    setSelectionStartEndWithShift: function(e, t, i) {
                        i <= e ? (t === e ? this._selectionDirection = "left" : "right" === this._selectionDirection && (this._selectionDirection = "left",
                        this.selectionEnd = e),
                        this.selectionStart = i) : i > e && i < t ? "right" === this._selectionDirection ? this.selectionEnd = i : this.selectionStart = i : (t === e ? this._selectionDirection = "right" : "left" === this._selectionDirection && (this._selectionDirection = "right",
                        this.selectionStart = t),
                        this.selectionEnd = i)
                    },
                    setSelectionInBoundaries: function() {
                        var e = this.text.length;
                        this.selectionStart > e ? this.selectionStart = e : this.selectionStart < 0 && (this.selectionStart = 0),
                        this.selectionEnd > e ? this.selectionEnd = e : this.selectionEnd < 0 && (this.selectionEnd = 0)
                    }
                })
            }(),
            o.util.object.extend(o.IText.prototype, {
                initDoubleClickSimulation: function() {
                    this.__lastClickTime = +new Date,
                    this.__lastLastClickTime = +new Date,
                    this.__lastPointer = {},
                    this.on("mousedown", this.onMouseDown)
                },
                onMouseDown: function(e) {
                    if (this.canvas) {
                        this.__newClickTime = +new Date;
                        var t = e.pointer;
                        this.isTripleClick(t) && (this.fire("tripleclick", e),
                        this._stopEvent(e.e)),
                        this.__lastLastClickTime = this.__lastClickTime,
                        this.__lastClickTime = this.__newClickTime,
                        this.__lastPointer = t,
                        this.__lastIsEditing = this.isEditing,
                        this.__lastSelected = this.selected
                    }
                },
                isTripleClick: function(e) {
                    return this.__newClickTime - this.__lastClickTime < 500 && this.__lastClickTime - this.__lastLastClickTime < 500 && this.__lastPointer.x === e.x && this.__lastPointer.y === e.y
                },
                _stopEvent: function(e) {
                    e.preventDefault && e.preventDefault(),
                    e.stopPropagation && e.stopPropagation()
                },
                initCursorSelectionHandlers: function() {
                    this.initMousedownHandler(),
                    this.initMouseupHandler(),
                    this.initClicks()
                },
                initClicks: function() {
                    this.on("mousedblclick", (function(e) {
                        this.selectWord(this.getSelectionStartFromPointer(e.e))
                    }
                    )),
                    this.on("tripleclick", (function(e) {
                        this.selectLine(this.getSelectionStartFromPointer(e.e))
                    }
                    ))
                },
                _mouseDownHandler: function(e) {
                    !this.canvas || !this.editable || e.e.button && 1 !== e.e.button || (this.__isMousedown = !0,
                    this.selected && this.setCursorByClick(e.e),
                    this.isEditing && (this.__selectionStartOnMouseDown = this.selectionStart,
                    this.selectionStart === this.selectionEnd && this.abortCursorAnimation(),
                    this.renderCursorOrSelection()))
                },
                _mouseDownHandlerBefore: function(e) {
                    !this.canvas || !this.editable || e.e.button && 1 !== e.e.button || this === this.canvas._activeObject && (this.selected = !0)
                },
                initMousedownHandler: function() {
                    this.on("mousedown", this._mouseDownHandler),
                    this.on("mousedown:before", this._mouseDownHandlerBefore)
                },
                initMouseupHandler: function() {
                    this.on("mouseup", this.mouseUpHandler)
                },
                mouseUpHandler: function(e) {
                    if (this.__isMousedown = !1,
                    !(!this.editable || this.group || e.transform && e.transform.actionPerformed || e.e.button && 1 !== e.e.button)) {
                        if (this.canvas) {
                            var t = this.canvas._activeObject;
                            if (t && t !== this)
                                return
                        }
                        this.__lastSelected && !this.__corner ? (this.selected = !1,
                        this.__lastSelected = !1,
                        this.enterEditing(e.e),
                        this.selectionStart === this.selectionEnd ? this.initDelayedCursor(!0) : this.renderCursorOrSelection()) : this.selected = !0
                    }
                },
                setCursorByClick: function(e) {
                    var t = this.getSelectionStartFromPointer(e)
                      , i = this.selectionStart
                      , n = this.selectionEnd;
                    e.shiftKey ? this.setSelectionStartEndWithShift(i, n, t) : (this.selectionStart = t,
                    this.selectionEnd = t),
                    this.isEditing && (this._fireSelectionChanged(),
                    this._updateTextarea())
                },
                getSelectionStartFromPointer: function(e) {
                    for (var t, i, n = this.getLocalPointer(e), o = 0, r = 0, a = 0, s = 0, l = 0, c = 0, d = this._textLines.length; c < d; c++) {
                        if (!(a <= n.y))
                            break;
                        a += this.getHeightOfLine(c) * this.scaleY,
                        l = c,
                        c > 0 && (s += this._textLines[c - 1].length + this.missingNewlineOffset(c - 1))
                    }
                    t = this._getLineLeftOffset(l),
                    r = t * this.scaleX,
                    i = this._textLines[l];
                    for (var u = 0, p = i.length; u < p; u++) {
                        if (o = r,
                        r += this.__charBounds[l][u].kernedWidth * this.scaleX,
                        !(r <= n.x))
                            break;
                        s++
                    }
                    return this._getNewSelectionStartFromOffset(n, o, r, s, p)
                },
                _getNewSelectionStartFromOffset: function(e, t, i, n, o) {
                    var r = e.x - t
                      , a = i - e.x
                      , s = a > r || a < 0 ? 0 : 1
                      , l = n + s;
                    return this.flipX && (l = o - l),
                    l > this._text.length && (l = this._text.length),
                    l
                }
            }),
            o.util.object.extend(o.IText.prototype, {
                initHiddenTextarea: function() {
                    this.hiddenTextarea = o.document.createElement("textarea"),
                    this.hiddenTextarea.setAttribute("autocapitalize", "off"),
                    this.hiddenTextarea.setAttribute("autocorrect", "off"),
                    this.hiddenTextarea.setAttribute("autocomplete", "off"),
                    this.hiddenTextarea.setAttribute("spellcheck", "false"),
                    this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea", ""),
                    this.hiddenTextarea.setAttribute("wrap", "off");
                    var e = this._calcTextareaPosition();
                    this.hiddenTextarea.style.cssText = "position: absolute; top: " + e.top + "; left: " + e.left + "; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingtop: " + e.fontSize + ";",
                    o.document.body.appendChild(this.hiddenTextarea),
                    o.util.addListener(this.hiddenTextarea, "keydown", this.onKeyDown.bind(this)),
                    o.util.addListener(this.hiddenTextarea, "keyup", this.onKeyUp.bind(this)),
                    o.util.addListener(this.hiddenTextarea, "input", this.onInput.bind(this)),
                    o.util.addListener(this.hiddenTextarea, "copy", this.copy.bind(this)),
                    o.util.addListener(this.hiddenTextarea, "cut", this.copy.bind(this)),
                    o.util.addListener(this.hiddenTextarea, "paste", this.paste.bind(this)),
                    o.util.addListener(this.hiddenTextarea, "compositionstart", this.onCompositionStart.bind(this)),
                    o.util.addListener(this.hiddenTextarea, "compositionupdate", this.onCompositionUpdate.bind(this)),
                    o.util.addListener(this.hiddenTextarea, "compositionend", this.onCompositionEnd.bind(this)),
                    !this._clickHandlerInitialized && this.canvas && (o.util.addListener(this.canvas.upperCanvasEl, "click", this.onClick.bind(this)),
                    this._clickHandlerInitialized = !0)
                },
                keysMap: {
                    9: "exitEditing",
                    27: "exitEditing",
                    33: "moveCursorUp",
                    34: "moveCursorDown",
                    35: "moveCursorRight",
                    36: "moveCursorLeft",
                    37: "moveCursorLeft",
                    38: "moveCursorUp",
                    39: "moveCursorRight",
                    40: "moveCursorDown"
                },
                ctrlKeysMapUp: {
                    67: "copy",
                    88: "cut"
                },
                ctrlKeysMapDown: {
                    65: "selectAll"
                },
                onClick: function() {
                    this.hiddenTextarea && this.hiddenTextarea.focus()
                },
                onKeyDown: function(e) {
                    if (this.isEditing && !this.inCompositionMode) {
                        if (e.keyCode in this.keysMap)
                            this[this.keysMap[e.keyCode]](e);
                        else {
                            if (!(e.keyCode in this.ctrlKeysMapDown) || !e.ctrlKey && !e.metaKey)
                                return;
                            this[this.ctrlKeysMapDown[e.keyCode]](e)
                        }
                        e.stopImmediatePropagation(),
                        e.preventDefault(),
                        e.keyCode >= 33 && e.keyCode <= 40 ? (this.clearContextTop(),
                        this.renderCursorOrSelection()) : this.canvas && this.canvas.requestRenderAll()
                    }
                },
                onKeyUp: function(e) {
                    !this.isEditing || this._copyDone || this.inCompositionMode ? this._copyDone = !1 : e.keyCode in this.ctrlKeysMapUp && (e.ctrlKey || e.metaKey) && (this[this.ctrlKeysMapUp[e.keyCode]](e),
                    e.stopImmediatePropagation(),
                    e.preventDefault(),
                    this.canvas && this.canvas.requestRenderAll())
                },
                onInput: function(e) {
                    var t = this.fromPaste;
                    if (this.fromPaste = !1,
                    e && e.stopPropagation(),
                    this.isEditing) {
                        var i, n, r = this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText, a = this._text.length, s = r.length, l = s - a;
                        if ("" === this.hiddenTextarea.value)
                            return this.styles = {},
                            this.updateFromTextArea(),
                            this.fire("changed"),
                            void (this.canvas && (this.canvas.fire("text:changed", {
                                target: this
                            }),
                            this.canvas.requestRenderAll()));
                        var c = this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value)
                          , d = this.selectionStart > c.selectionStart;
                        this.selectionStart !== this.selectionEnd ? (i = this._text.slice(this.selectionStart, this.selectionEnd),
                        l += this.selectionEnd - this.selectionStart) : s < a && (i = d ? this._text.slice(this.selectionEnd + l, this.selectionEnd) : this._text.slice(this.selectionStart, this.selectionStart - l)),
                        n = r.slice(c.selectionEnd - l, c.selectionEnd),
                        i && i.length && (this.selectionStart !== this.selectionEnd ? this.removeStyleFromTo(this.selectionStart, this.selectionEnd) : d ? this.removeStyleFromTo(this.selectionEnd - i.length, this.selectionEnd) : this.removeStyleFromTo(this.selectionEnd, this.selectionEnd + i.length)),
                        n.length && (t && n.join("") === o.copiedText && !o.disableStyleCopyPaste ? this.insertNewStyleBlock(n, this.selectionStart, o.copiedTextStyle) : this.insertNewStyleBlock(n, this.selectionStart)),
                        this.updateFromTextArea(),
                        this.fire("changed"),
                        this.canvas && (this.canvas.fire("text:changed", {
                            target: this
                        }),
                        this.canvas.requestRenderAll())
                    }
                },
                onCompositionStart: function() {
                    this.inCompositionMode = !0
                },
                onCompositionEnd: function() {
                    this.inCompositionMode = !1
                },
                onCompositionUpdate: function(e) {
                    this.compositionStart = e.target.selectionStart,
                    this.compositionEnd = e.target.selectionEnd,
                    this.updateTextareaPosition()
                },
                copy: function() {
                    this.selectionStart !== this.selectionEnd && (o.copiedText = this.getSelectedText(),
                    o.disableStyleCopyPaste ? o.copiedTextStyle = null : o.copiedTextStyle = this.getSelectionStyles(this.selectionStart, this.selectionEnd, !0),
                    this._copyDone = !0)
                },
                paste: function() {
                    this.fromPaste = !0
                },
                _getClipboardData: function(e) {
                    return e && e.clipboardData || o.window.clipboardData
                },
                _getWidthBeforeCursor: function(e, t) {
                    var i, n = this._getLineLeftOffset(e);
                    return t > 0 && (i = this.__charBounds[e][t - 1],
                    n += i.left + i.width),
                    n
                },
                getDownCursorOffset: function(e, t) {
                    var i = this._getSelectionForOffset(e, t)
                      , n = this.get2DCursorLocation(i)
                      , o = n.lineIndex;
                    if (o === this._textLines.length - 1 || e.metaKey || 34 === e.keyCode)
                        return this._text.length - i;
                    var r = n.charIndex
                      , a = this._getWidthBeforeCursor(o, r)
                      , s = this._getIndexOnLine(o + 1, a)
                      , l = this._textLines[o].slice(r);
                    return l.length + s + 1 + this.missingNewlineOffset(o)
                },
                _getSelectionForOffset: function(e, t) {
                    return e.shiftKey && this.selectionStart !== this.selectionEnd && t ? this.selectionEnd : this.selectionStart
                },
                getUpCursorOffset: function(e, t) {
                    var i = this._getSelectionForOffset(e, t)
                      , n = this.get2DCursorLocation(i)
                      , o = n.lineIndex;
                    if (0 === o || e.metaKey || 33 === e.keyCode)
                        return -i;
                    var r = n.charIndex
                      , a = this._getWidthBeforeCursor(o, r)
                      , s = this._getIndexOnLine(o - 1, a)
                      , l = this._textLines[o].slice(0, r)
                      , c = this.missingNewlineOffset(o - 1);
                    return -this._textLines[o - 1].length + s - l.length + (1 - c)
                },
                _getIndexOnLine: function(e, t) {
                    for (var i, n, o = this._textLines[e], r = this._getLineLeftOffset(e), a = r, s = 0, l = 0, c = o.length; l < c; l++)
                        if (i = this.__charBounds[e][l].width,
                        a += i,
                        a > t) {
                            n = !0;
                            var d = a - i
                              , u = a
                              , p = Math.abs(d - t)
                              , h = Math.abs(u - t);
                            s = h < p ? l : l - 1;
                            break
                        }
                    return n || (s = o.length - 1),
                    s
                },
                moveCursorDown: function(e) {
                    this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length || this._moveCursorUpOrDown("Down", e)
                },
                moveCursorUp: function(e) {
                    0 === this.selectionStart && 0 === this.selectionEnd || this._moveCursorUpOrDown("Up", e)
                },
                _moveCursorUpOrDown: function(e, t) {
                    var i = "get" + e + "CursorOffset"
                      , n = this[i](t, "right" === this._selectionDirection);
                    t.shiftKey ? this.moveCursorWithShift(n) : this.moveCursorWithoutShift(n),
                    0 !== n && (this.setSelectionInBoundaries(),
                    this.abortCursorAnimation(),
                    this._currentCursorOpacity = 1,
                    this.initDelayedCursor(),
                    this._fireSelectionChanged(),
                    this._updateTextarea())
                },
                moveCursorWithShift: function(e) {
                    var t = "left" === this._selectionDirection ? this.selectionStart + e : this.selectionEnd + e;
                    return this.setSelectionStartEndWithShift(this.selectionStart, this.selectionEnd, t),
                    0 !== e
                },
                moveCursorWithoutShift: function(e) {
                    return e < 0 ? (this.selectionStart += e,
                    this.selectionEnd = this.selectionStart) : (this.selectionEnd += e,
                    this.selectionStart = this.selectionEnd),
                    0 !== e
                },
                moveCursorLeft: function(e) {
                    0 === this.selectionStart && 0 === this.selectionEnd || this._moveCursorLeftOrRight("Left", e)
                },
                _move: function(e, t, i) {
                    var n;
                    if (e.altKey)
                        n = this["findWordBoundary" + i](this[t]);
                    else {
                        if (!e.metaKey && 35 !== e.keyCode && 36 !== e.keyCode)
                            return this[t] += "Left" === i ? -1 : 1,
                            !0;
                        n = this["findLineBoundary" + i](this[t])
                    }
                    if (void 0 !== typeof n && this[t] !== n)
                        return this[t] = n,
                        !0
                },
                _moveLeft: function(e, t) {
                    return this._move(e, t, "Left")
                },
                _moveRight: function(e, t) {
                    return this._move(e, t, "Right")
                },
                moveCursorLeftWithoutShift: function(e) {
                    var t = !0;
                    return this._selectionDirection = "left",
                    this.selectionEnd === this.selectionStart && 0 !== this.selectionStart && (t = this._moveLeft(e, "selectionStart")),
                    this.selectionEnd = this.selectionStart,
                    t
                },
                moveCursorLeftWithShift: function(e) {
                    return "right" === this._selectionDirection && this.selectionStart !== this.selectionEnd ? this._moveLeft(e, "selectionEnd") : 0 !== this.selectionStart ? (this._selectionDirection = "left",
                    this._moveLeft(e, "selectionStart")) : void 0
                },
                moveCursorRight: function(e) {
                    this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length || this._moveCursorLeftOrRight("Right", e)
                },
                _moveCursorLeftOrRight: function(e, t) {
                    var i = "moveCursor" + e + "With";
                    this._currentCursorOpacity = 1,
                    t.shiftKey ? i += "Shift" : i += "outShift",
                    this[i](t) && (this.abortCursorAnimation(),
                    this.initDelayedCursor(),
                    this._fireSelectionChanged(),
                    this._updateTextarea())
                },
                moveCursorRightWithShift: function(e) {
                    return "left" === this._selectionDirection && this.selectionStart !== this.selectionEnd ? this._moveRight(e, "selectionStart") : this.selectionEnd !== this._text.length ? (this._selectionDirection = "right",
                    this._moveRight(e, "selectionEnd")) : void 0
                },
                moveCursorRightWithoutShift: function(e) {
                    var t = !0;
                    return this._selectionDirection = "right",
                    this.selectionStart === this.selectionEnd ? (t = this._moveRight(e, "selectionStart"),
                    this.selectionEnd = this.selectionStart) : this.selectionStart = this.selectionEnd,
                    t
                },
                removeChars: function(e, t) {
                    "undefined" === typeof t && (t = e + 1),
                    this.removeStyleFromTo(e, t),
                    this._text.splice(e, t - e),
                    this.text = this._text.join(""),
                    this.set("dirty", !0),
                    this._shouldClearDimensionCache() && (this.initDimensions(),
                    this.setCoords()),
                    this._removeExtraneousStyles()
                },
                insertChars: function(e, t, i, n) {
                    "undefined" === typeof n && (n = i),
                    n > i && this.removeStyleFromTo(i, n);
                    var r = o.util.string.graphemeSplit(e);
                    this.insertNewStyleBlock(r, i, t),
                    this._text = [].concat(this._text.slice(0, i), r, this._text.slice(n)),
                    this.text = this._text.join(""),
                    this.set("dirty", !0),
                    this._shouldClearDimensionCache() && (this.initDimensions(),
                    this.setCoords()),
                    this._removeExtraneousStyles()
                }
            }),
            function() {
                var e = o.util.toFixed
                  , t = /  +/g;
                o.util.object.extend(o.Text.prototype, {
                    _toSVG: function() {
                        var e = this._getSVGLeftTopOffsets()
                          , t = this._getSVGTextAndBg(e.textTop, e.textLeft);
                        return this._wrapSVGTextAndBg(t)
                    },
                    toSVG: function(e) {
                        return this._createBaseSVGMarkup(this._toSVG(), {
                            reviver: e,
                            noStyle: !0,
                            withShadow: !0
                        })
                    },
                    _getSVGLeftTopOffsets: function() {
                        return {
                            textLeft: -this.width / 2,
                            textTop: -this.height / 2,
                            lineTop: this.getHeightOfLine(0)
                        }
                    },
                    _wrapSVGTextAndBg: function(e) {
                        var t = !0
                          , i = this.getSvgTextDecoration(this);
                        return [e.textBgRects.join(""), '\t\t<text xml:space="preserve" ', this.fontFamily ? 'font-family="' + this.fontFamily.replace(/"/g, "'") + '" ' : "", this.fontSize ? 'font-size="' + this.fontSize + '" ' : "", this.fontStyle ? 'font-style="' + this.fontStyle + '" ' : "", this.fontWeight ? 'font-weight="' + this.fontWeight + '" ' : "", i ? 'text-decoration="' + i + '" ' : "", 'style="', this.getSvgStyles(t), '"', this.addPaintOrder(), " >", e.textSpans.join(""), "</text>\n"]
                    },
                    _getSVGTextAndBg: function(e, t) {
                        var i, n = [], o = [], r = e;
                        this._setSVGBg(o);
                        for (var a = 0, s = this._textLines.length; a < s; a++)
                            i = this._getLineLeftOffset(a),
                            (this.textBackgroundColor || this.styleHas("textBackgroundColor", a)) && this._setSVGTextLineBg(o, a, t + i, r),
                            this._setSVGTextLineText(n, a, t + i, r),
                            r += this.getHeightOfLine(a);
                        return {
                            textSpans: n,
                            textBgRects: o
                        }
                    },
                    _createTextCharSpan: function(i, n, r, a) {
                        var s = i !== i.trim() || i.match(t)
                          , l = this.getSvgSpanStyles(n, s)
                          , c = l ? 'style="' + l + '"' : ""
                          , d = n.deltaY
                          , u = ""
                          , p = o.Object.NUM_FRACTION_DIGITS;
                        return d && (u = ' dy="' + e(d, p) + '" '),
                        ['<tspan x="', e(r, p), '" y="', e(a, p), '" ', u, c, ">", o.util.string.escapeXml(i), "</tspan>"].join("")
                    },
                    _setSVGTextLineText: function(e, t, i, n) {
                        var o, r, a, s, l, c = this.getHeightOfLine(t), d = -1 !== this.textAlign.indexOf("justify"), u = "", p = 0, h = this._textLines[t];
                        n += c * (1 - this._fontSizeFraction) / this.lineHeight;
                        for (var m = 0, g = h.length - 1; m <= g; m++)
                            l = m === g || this.charSpacing,
                            u += h[m],
                            a = this.__charBounds[t][m],
                            0 === p ? (i += a.kernedWidth - a.width,
                            p += a.width) : p += a.kernedWidth,
                            d && !l && this._reSpaceAndTab.test(h[m]) && (l = !0),
                            l || (o = o || this.getCompleteStyleDeclaration(t, m),
                            r = this.getCompleteStyleDeclaration(t, m + 1),
                            l = this._hasStyleChangedForSvg(o, r)),
                            l && (s = this._getStyleDeclaration(t, m) || {},
                            e.push(this._createTextCharSpan(u, s, i, n)),
                            u = "",
                            o = r,
                            i += p,
                            p = 0)
                    },
                    _pushTextBgRect: function(t, i, n, r, a, s) {
                        var l = o.Object.NUM_FRACTION_DIGITS;
                        t.push("\t\t<rect ", this._getFillAttributes(i), ' x="', e(n, l), '" y="', e(r, l), '" width="', e(a, l), '" height="', e(s, l), '"></rect>\n')
                    },
                    _setSVGTextLineBg: function(e, t, i, n) {
                        for (var o, r, a = this._textLines[t], s = this.getHeightOfLine(t) / this.lineHeight, l = 0, c = 0, d = this.getValueOfPropertyAt(t, 0, "textBackgroundColor"), u = 0, p = a.length; u < p; u++)
                            o = this.__charBounds[t][u],
                            r = this.getValueOfPropertyAt(t, u, "textBackgroundColor"),
                            r !== d ? (d && this._pushTextBgRect(e, d, i + c, n, l, s),
                            c = o.left,
                            l = o.width,
                            d = r) : l += o.kernedWidth;
                        r && this._pushTextBgRect(e, r, i + c, n, l, s)
                    },
                    _getFillAttributes: function(e) {
                        var t = e && "string" === typeof e ? new o.Color(e) : "";
                        return t && t.getSource() && 1 !== t.getAlpha() ? 'opacity="' + t.getAlpha() + '" fill="' + t.setAlpha(1).toRgb() + '"' : 'fill="' + e + '"'
                    },
                    _getSVGLineTopOffset: function(e) {
                        for (var t = 0, i = 0, n = 0; n < e; n++)
                            t += this.getHeightOfLine(n);
                        return i = this.getHeightOfLine(n),
                        {
                            lineTop: t,
                            offset: (this._fontSizeMult - this._fontSizeFraction) * i / (this.lineHeight * this._fontSizeMult)
                        }
                    },
                    getSvgStyles: function(e) {
                        var t = o.Object.prototype.getSvgStyles.call(this, e);
                        return t + " white-space: pre;"
                    }
                })
            }(),
            function(e) {
                "use strict";
                var t = e.fabric || (e.fabric = {});
                t.Textbox = t.util.createClass(t.IText, t.Observable, {
                    type: "textbox",
                    minWidth: 20,
                    dynamicMinWidth: 2,
                    __cachedLines: null,
                    lockScalingFlip: !0,
                    noScaleCache: !1,
                    _dimensionAffectingProps: t.Text.prototype._dimensionAffectingProps.concat("width"),
                    _wordJoiners: /[ \t\r]/,
                    splitByGrapheme: !1,
                    initDimensions: function() {
                        this.__skipDimension || (this.isEditing && this.initDelayedCursor(),
                        this.clearContextTop(),
                        this._clearCache(),
                        this.dynamicMinWidth = 0,
                        this._styleMap = this._generateStyleMap(this._splitText()),
                        this.dynamicMinWidth > this.width && this._set("width", this.dynamicMinWidth),
                        -1 !== this.textAlign.indexOf("justify") && this.enlargeSpaces(),
                        this.height = this.calcTextHeight(),
                        this.saveState({
                            propertySet: "_dimensionAffectingProps"
                        }))
                    },
                    _generateStyleMap: function(e) {
                        for (var t = 0, i = 0, n = 0, o = {}, r = 0; r < e.graphemeLines.length; r++)
                            "\n" === e.graphemeText[n] && r > 0 ? (i = 0,
                            n++,
                            t++) : !this.splitByGrapheme && this._reSpaceAndTab.test(e.graphemeText[n]) && r > 0 && (i++,
                            n++),
                            o[r] = {
                                line: t,
                                offset: i
                            },
                            n += e.graphemeLines[r].length,
                            i += e.graphemeLines[r].length;
                        return o
                    },
                    styleHas: function(e, i) {
                        if (this._styleMap && !this.isWrapping) {
                            var n = this._styleMap[i];
                            n && (i = n.line)
                        }
                        return t.Text.prototype.styleHas.call(this, e, i)
                    },
                    isEmptyStyles: function(e) {
                        var t, i, n = 0, o = e + 1, r = !1, a = this._styleMap[e], s = this._styleMap[e + 1];
                        for (var l in a && (e = a.line,
                        n = a.offset),
                        s && (o = s.line,
                        r = o === e,
                        t = s.offset),
                        i = "undefined" === typeof e ? this.styles : {
                            line: this.styles[e]
                        },
                        i)
                            for (var c in i[l])
                                if (c >= n && (!r || c < t))
                                    for (var d in i[l][c])
                                        return !1;
                        return !0
                    },
                    _getStyleDeclaration: function(e, t) {
                        if (this._styleMap && !this.isWrapping) {
                            var i = this._styleMap[e];
                            if (!i)
                                return null;
                            e = i.line,
                            t = i.offset + t
                        }
                        return this.callSuper("_getStyleDeclaration", e, t)
                    },
                    _setStyleDeclaration: function(e, t, i) {
                        var n = this._styleMap[e];
                        e = n.line,
                        t = n.offset + t,
                        this.styles[e][t] = i
                    },
                    _deleteStyleDeclaration: function(e, t) {
                        var i = this._styleMap[e];
                        e = i.line,
                        t = i.offset + t,
                        delete this.styles[e][t]
                    },
                    _getLineStyle: function(e) {
                        var t = this._styleMap[e];
                        return !!this.styles[t.line]
                    },
                    _setLineStyle: function(e) {
                        var t = this._styleMap[e];
                        this.styles[t.line] = {}
                    },
                    _wrapText: function(e, t) {
                        var i, n = [];
                        for (this.isWrapping = !0,
                        i = 0; i < e.length; i++)
                            n = n.concat(this._wrapLine(e[i], i, t));
                        return this.isWrapping = !1,
                        n
                    },
                    _measureWord: function(e, t, i) {
                        var n, o = 0, r = !0;
                        i = i || 0;
                        for (var a = 0, s = e.length; a < s; a++) {
                            var l = this._getGraphemeBox(e[a], t, a + i, n, r);
                            o += l.kernedWidth,
                            n = e[a]
                        }
                        return o
                    },
                    _wrapLine: function(e, i, n, o) {
                        var r = 0
                          , a = this.splitByGrapheme
                          , s = []
                          , l = []
                          , c = a ? t.util.string.graphemeSplit(e) : e.split(this._wordJoiners)
                          , d = ""
                          , u = 0
                          , p = a ? "" : " "
                          , h = 0
                          , m = 0
                          , g = 0
                          , f = !0
                          , v = a ? 0 : this._getWidthOfCharSpacing();
                        o = o || 0;
                        0 === c.length && c.push([]),
                        n -= o;
                        for (var b = 0; b < c.length; b++)
                            d = a ? c[b] : t.util.string.graphemeSplit(c[b]),
                            h = this._measureWord(d, i, u),
                            u += d.length,
                            r += m + h - v,
                            r >= n && !f ? (s.push(l),
                            l = [],
                            r = h,
                            f = !0) : r += v,
                            f || a || l.push(p),
                            l = l.concat(d),
                            m = this._measureWord([p], i, u),
                            u++,
                            f = !1,
                            h > g && (g = h);
                        return b && s.push(l),
                        g + o > this.dynamicMinWidth && (this.dynamicMinWidth = g - v + o),
                        s
                    },
                    isEndOfWrapping: function(e) {
                        return !this._styleMap[e + 1] || this._styleMap[e + 1].line !== this._styleMap[e].line
                    },
                    missingNewlineOffset: function(e) {
                        return this.splitByGrapheme ? this.isEndOfWrapping(e) ? 1 : 0 : 1
                    },
                    _splitTextIntoLines: function(e) {
                        for (var i = t.Text.prototype._splitTextIntoLines.call(this, e), n = this._wrapText(i.lines, this.width), o = new Array(n.length), r = 0; r < n.length; r++)
                            o[r] = n[r].join("");
                        return i.lines = o,
                        i.graphemeLines = n,
                        i
                    },
                    getMinWidth: function() {
                        return Math.max(this.minWidth, this.dynamicMinWidth)
                    },
                    _removeExtraneousStyles: function() {
                        var e = {};
                        for (var t in this._styleMap)
                            this._textLines[t] && (e[this._styleMap[t].line] = 1);
                        for (var t in this.styles)
                            e[t] || delete this.styles[t]
                    },
                    toObject: function(e) {
                        return this.callSuper("toObject", ["minWidth", "splitByGrapheme"].concat(e))
                    }
                }),
                t.Textbox.fromObject = function(e, i) {
                    return t.Object._fromObject("Textbox", e, i, "text")
                }
            }(i)
        }
        ).call(this, n("b639").Buffer)
    },
    4372: function(e, t, i) {
        "use strict";
        i.d(t, "a", (function() {
            return o
        }
        )),
        i.d(t, "b", (function() {
            return r
        }
        ));
        var n = i("406d");
        const o = async()=>{
            const e = await n["a"].get("Product/GetProductsCount");
            return e.data
        }
          , r = async e=>{
            const t = JSON.stringify(e)
              , i = await n["a"].post("Product/SaveProduct", {
                jsonString: t
            });
            return i.data
        }
    },
    4408: function(e, t, i) {
        e.exports = i.p + "img/replace-base-file.6f2498fa.svg?x-request=html"
    },
    4409: function(e, t, i) {},
    "444d": function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("2ef0")
          , o = i("1424");
        const r = (e,t,i,...n)=>{
            const r = e.getObjects();
            if (e.discardActiveObject(),
            t.isType("activeSelection")) {
                const a = t.getObjects().map(e=>e.isCloned ? r.find(t=>t.uuid === e.uuid) : e);
                return Object(o["h"])(a, e),
                t = e.getActiveObject(),
                i(t, ...n),
                void Object(o["n"])(e)
            }
            t.isCloned && (t = r.find(e=>e.uuid === t.uuid)),
            i(t, ...n),
            e.setActiveObject(t),
            e.renderAll()
        }
          , a = (e,t,i)=>{
            e.set({
                top: t,
                left: i
            }),
            e.setCoords()
        }
          , s = (e,t)=>{
            e.getObjects().forEach((e,i)=>{
                const n = t[i];
                a(e, n.top, n.left)
            }
            )
        }
          , l = (e,t,i)=>{
            if (!e.isType("activeSelection"))
                return e.set({
                    angle: t
                }),
                void e.setCoords();
            e.getObjects().forEach((e,t)=>{
                const n = i[t];
                e.set({
                    angle: n.angle,
                    top: n.top,
                    left: n.left
                })
            }
            ),
            e.setCoords()
        }
          , c = (e,t,i,n,o,r)=>{
            if (e.setScale)
                e.setScale.apply(e, [t, i, e.isType("image-placeholder"), !1]);
            else if (e.isType("path-itext") && e.setRadius)
                e.setRadius.apply(e, [t / 2, i / 2]);
            else if (e.isType("activeSelection")) {
                e.set({
                    width: t,
                    height: i
                });
                for (const [t,i] of e.getObjects().entries()) {
                    const e = r[t];
                    c(i, e.horizontalDiameter || e.width, e.verticalDiameter || e.height, e.top, e.left)
                }
            }
            e.set({
                top: n,
                left: o
            }),
            e.setCoords()
        }
          , d = e=>{
            e.on({
                modified(t) {
                    var i;
                    if (null === t || void 0 === t || !t.transform || null === (i = this.canvas) || void 0 === i || !i.undoManager)
                        return;
                    const {transform: o, target: d} = t
                      , u = null === o || void 0 === o ? void 0 : o.original
                      , p = this.canvas
                      , h = {
                        undo: [],
                        redo: []
                    };
                    switch (null === o || void 0 === o ? void 0 : o.action) {
                    case "drag":
                        h.redo = [p, e, a, d.top, d.left],
                        h.undo = [p, e, a, u.top, u.left];
                        break;
                    case "dragInsideSelection":
                        h.redo = [p, e, s, Object(n["cloneDeep"])(e.getObjects())],
                        h.undo = [p, e, s, u.objects];
                        break;
                    case "rotate":
                        var m;
                        h.redo = [p, e, l, d.angle, Object(n["cloneDeep"])(null === (m = e.getObjects) || void 0 === m ? void 0 : m.call(e))],
                        h.undo = [p, e, l, u.angle, u.objects];
                        break;
                    case "scale":
                    case "scaleX":
                    case "scaleY":
                        {
                            var g;
                            const t = d.isType("activeSelection") ? d.getBoundingRect(!0) : d;
                            h.redo = [p, e, c, d.horizontalDiameter || t.width, d.verticalDiameter || t.height, t.top, t.left, Object(n["cloneDeep"])(null === (g = e.getObjects) || void 0 === g ? void 0 : g.call(e))],
                            h.undo = [p, e, c, u.horizontalDiameter || u.width, u.verticalDiameter || u.height, u.top, u.left, u.objects];
                            break
                        }
                    default:
                        return void console.warn(`Performed action (${null === o || void 0 === o ? void 0 : o.action}) not handle by undo/redo`)
                    }
                    p.undoManager.add(r, h.redo, r, h.undo)
                }
            })
        }
          , u = 2
          , p = (e,t)=>{
            let i = e / t + 2;
            i = Math.floor(i),
            i > 0 && i % 2 === 0 && (i -= 1,
            t += t / i);
            const n = e / t / Math.floor(e / t);
            return t *= n,
            e -= 2 * t,
            e < 0 && (e = 0),
            {
                startOffset: t,
                endOffset: e,
                strokeLength: t
            }
        }
        ;
        fabric.Object.prototype._renderStroke = function(e) {
            if (this.stroke && 0 !== this.strokeWidth) {
                if (this.shadow && !this.shadow.affectStroke && this._removeShadow(e),
                e.save(),
                this.strokeUniform && e.scale(1 / this.scaleX, 1 / this.scaleY),
                this.strokeDashArray && this.strokeDashArray.length && this.centerDashArray) {
                    const t = Math.max(...this.strokeDashArray);
                    let i;
                    e.beginPath();
                    let n = -this.width / 2
                      , o = -this.height / 2;
                    e.moveTo(n, o),
                    e.lineTo(n, o + t / 2),
                    e.moveTo(n, o),
                    e.lineTo(n + t / 2, o),
                    i = p(this.width - t, t),
                    fabric.util.drawDashedLine(e, n + t / 2 + i.startOffset, o, n + t / 2 + i.startOffset + i.endOffset, o, [i.strokeLength, i.strokeLength]),
                    n = this.width / 2,
                    o = -this.height / 2,
                    e.moveTo(n, o),
                    e.lineTo(n, o + t / 2),
                    e.moveTo(n, o),
                    e.lineTo(n - t / 2, o),
                    i = p(this.height - t, t),
                    fabric.util.drawDashedLine(e, n, o + t / 2 + i.startOffset, n, o + t / 2 + i.startOffset + i.endOffset, [i.strokeLength, i.strokeLength]),
                    n = -this.width / 2,
                    o = this.height / 2,
                    e.moveTo(n, o),
                    e.lineTo(n, o - t / 2),
                    e.moveTo(n, o),
                    e.lineTo(n + t / 2, o),
                    i = p(this.height - t, t),
                    fabric.util.drawDashedLine(e, n, o - t / 2 - i.startOffset, n, o - t / 2 - i.startOffset - i.endOffset, [i.strokeLength, i.strokeLength]),
                    n = this.width / 2,
                    o = this.height / 2,
                    e.moveTo(n, o),
                    e.lineTo(n, o - t / 2),
                    e.moveTo(n, o),
                    e.lineTo(n - t / 2, o),
                    i = p(this.width - t, t),
                    fabric.util.drawDashedLine(e, n - t / 2 - i.startOffset, o, n - t / 2 - i.startOffset - i.endOffset, o, [i.strokeLength, i.strokeLength]),
                    e.closePath()
                } else
                    this._setLineDash(e, this.strokeDashArray, this._renderDashedStroke);
                this.stroke.toLive && "percentage" === this.stroke.gradientUnits ? this._applyPatternForTransformedGradient(e, this.stroke) : this._applyPatternGradientTransform(e, this.stroke),
                e.stroke(),
                e.restore()
            }
        }
        ,
        fabric.Object.prototype.cacheProperties = fabric.Object.prototype.cacheProperties.concat("locked", "groupId");
        const h = fabric.Object.prototype._set;
        fabric.Object.prototype._set = function(e, t) {
            const i = h.apply(this, [e, t]);
            return "locked" !== e && "dirty" !== e && "groupId" !== e && "canvas" !== e || this.updateLockStatus(),
            i
        }
        ,
        fabric.Object.prototype.updateLockStatus = function() {
            var e, t;
            const i = !(!this.groupId || null === (e = this.canvas) || void 0 === e || null === (t = e.getElementsGroups().find(e=>e.id === this.groupId)) || void 0 === t || !t.locked)
              , n = i || this.locked;
            if (this.lockedByGroup = i,
            this.evented !== !n)
                switch (this.callSuper("_set", "evented", !n),
                this.callSuper("_set", "selectable", !n),
                this.callSuper("_set", "hasControls", !n),
                this.type) {
                case "bounded-text":
                    n ? (this._backupStroke = this.getStroke(),
                    this.setStroke("#ff0000")) : this.setStroke(this._backupStroke || "#000000");
                    break;
                case "image-placeholder":
                case "vector-placeholder":
                    n ? (this._backupStroke = this.stroke,
                    this.set("stroke", "#ff0000")) : this.set("stroke", this._backupStroke || "#000000");
                    break
                }
        }
        ;
        const m = fabric.Object.prototype.calcCoords;
        fabric.Object.prototype.calcCoords = function(e) {
            let t = null;
            this.canvas && this.canvas.viewportTransform && (t = this.canvas.viewportTransform.slice(0),
            this.canvas.viewportTransform[4] = this.canvas.viewportTransform[4] + this.canvas._artworkOffsetX,
            this.canvas.viewportTransform[5] = this.canvas.viewportTransform[5] + this.canvas._artworkOffsetY);
            const i = m.apply(this, [e]);
            return t && (this.canvas.viewportTransform = t),
            i
        }
        ;
        const g = fabric.Object.prototype.initialize;
        fabric.Object.prototype.initialize = function() {
            this.editedProps = [],
            this.locked = !1,
            this.lockedByGroup = !1,
            this.visible = !0,
            this.groupId = null,
            d(this);
            const e = g.apply(this, arguments);
            return this.updateLockStatus(),
            e
        }
        ,
        fabric.Object.prototype.isEdited = function() {
            return !!this.editedProps.length
        }
        ,
        fabric.Object.prototype.setEditedProp = function(...e) {
            for (const t of e)
                t && !this.editedProps.includes(t) && this.editedProps.push(t)
        }
        ,
        fabric.Object.prototype.isNotVisible = function() {
            var e;
            return 0 === this.opacity || 0 === this.width && 0 === this.height && 0 === this.strokeWidth || !this.visible || this.canvas && !1 === (null === (e = this.canvas.getElementsGroups().find(e=>e.id === this.groupId)) || void 0 === e ? void 0 : e.visible)
        }
        ,
        fabric.Object.prototype.borderScaleFactor = u,
        fabric.Object.prototype.borderColor = "rgba(79,128,255,1)",
        fabric.Object.prototype.centerDashArray = !0
    },
    "44b6": function(e, t) {
        (function() {
            function e() {
                let e = null
                  , t = "";
                const i = {
                    apiBaseURL: window.location.origin + "/api",
                    redirectedFrom: null,
                    customilyOptionsUrl: "https://preview.customily.com",
                    MAX_PREVIEW_IMAGE_SIZE: 1200,
                    cloudFrontUrl: "https://cdn.customily.com",
                    openRoutes: ["/signin", "/signup", "/verify", "/forgotPassword", "/passwordReset", "/invalidStore", "/emailConfirmation", "/stamp/:stampId/:redirectTo?"]
                };
                function n(t) {
                    e = t
                }
                function o() {
                    return e
                }
                function r(e) {
                    t = e
                }
                function a() {
                    return t
                }
                return {
                    dev: i,
                    customilyOptionsUrl: i.customilyOptionsUrl,
                    apiBaseURL: i.apiBaseURL,
                    redirectedFrom: i.redirectedFrom,
                    MAX_PREVIEW_IMAGE_SIZE: i.MAX_PREVIEW_IMAGE_SIZE,
                    cloudFrontUrl: i.cloudFrontUrl,
                    openRoutes: i.openRoutes,
                    getLastSelectedLibrariesTab: o,
                    setLastSelectedLibrariesTab: n,
                    setCurrentOriginalPath: r,
                    getCurrentOriginalPath: a
                }
            }
            angular.module("app.shared.services").service("ConfigService", e)
        }
        )()
    },
    "45cf": function(e, t) {
        /*!
 * angular-aside - v1.4.0
 * https://github.com/dbtek/angular-aside
 * 2017-03-27
 * Copyright (c) 2017 smail Demirbilek
 * License: MIT
 */
        !function() {
            "use strict";
            angular.module("ngAside", ["ui.bootstrap.modal"])
        }(),
        function() {
            "use strict";
            angular.module("ngAside").factory("$aside", ["$uibModal", function(e) {
                var t = this.defaults = {
                    placement: "left"
                }
                  , i = {
                    open: function(i) {
                        var n = angular.extend({}, t, i);
                        -1 === ["left", "right", "bottom", "top"].indexOf(n.placement) && (n.placement = t.placement);
                        var o = -1 === ["left", "right"].indexOf(n.placement) ? "vertical" : "horizontal";
                        return n.windowClass = "ng-aside " + o + " " + n.placement + (n.windowClass ? " " + n.windowClass : ""),
                        delete n.placement,
                        e.open(n)
                    }
                };
                return angular.extend({}, e, i)
            }
            ])
        }()
    },
    "47b8": function(e, t, i) {},
    4811: function(e, t, i) {
        "use strict";
        var n = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", [i("b", [e._v(e._s(e.title))]), i("b-card-body", {
                staticClass: "mt-2 p-0"
            }, [e.items ? e._e() : i("div", {
                staticClass: "d-flex justify-content-center"
            }, [i("b-spinner", {
                attrs: {
                    variant: "primary",
                    label: "Loading"
                }
            })], 1), e.items ? i("div", [e.itemsPerPage && "number" === typeof e.totalCount ? i("div", {
                staticClass: "d-flex justify-content-end w-100"
            }, [i("div", {
                staticClass: "d-flex"
            }, [i("b-pagination", {
                attrs: {
                    size: "md",
                    disabled: e.loading,
                    "total-rows": e.totalCount,
                    "per-page": e.itemsPerPage
                },
                model: {
                    value: e.currentPage,
                    callback: function(t) {
                        e.currentPage = t
                    },
                    expression: "currentPage"
                }
            }), i("b-form-input", {
                staticClass: "mb-3 ml-3",
                staticStyle: {
                    width: "unset"
                },
                attrs: {
                    type: "text",
                    debounce: "400",
                    placeholder: "Search",
                    disabled: e.loading
                },
                model: {
                    value: e.searchString,
                    callback: function(t) {
                        e.searchString = t
                    },
                    expression: "searchString"
                }
            })], 1)]) : e._e(), i("b-table", {
                ref: "itemsTable",
                staticClass: "w-100 h-100 items-table",
                staticStyle: {
                    "white-space": "pre-line"
                },
                attrs: {
                    "table-class": "h-100",
                    "empty-filtered-text": "No items matching your search",
                    "empty-text": "No items",
                    "show-empty": "",
                    striped: "",
                    hover: "",
                    responsive: "",
                    items: e.items || [],
                    fields: e.fields,
                    busy: e.loading,
                    "tbody-tr-class": e.getTrClass,
                    "tbody-tr-attr": e.getTrAttr
                },
                on: {
                    "row-clicked": e.onRowClicked
                },
                scopedSlots: e._u([e._l(e.$scopedSlots, (function(t, n, o) {
                    return {
                        key: n,
                        fn: function(t) {
                            return [i("div", {
                                key: o,
                                staticClass: "row-wrapper"
                            }, [i("div", {
                                staticClass: "row-content"
                            }, [e._t(n, null, null, t)], 2)])]
                        }
                    }
                }
                )), {
                    key: "table-busy",
                    fn: function() {
                        return [i("div", {
                            staticClass: "align-items-center d-flex justify-content-center my-2 text-center my-2"
                        }, [i("b-spinner", {
                            attrs: {
                                variant: "primary"
                            }
                        }), i("strong", {
                            staticClass: "ml-3 primary-text"
                        }, [e._v("Loading...")])], 1)]
                    },
                    proxy: !0
                }, {
                    key: "row-details",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "row-wrapper"
                        }, [i("div", {
                            staticClass: "row-content"
                        }, [e._t("row-details", null, {
                            data: t
                        })], 2)])]
                    }
                }], null, !0)
            })], 1) : e._e()]), e.showDoneButton ? i("b-btn", {
                staticClass: "float-right",
                attrs: {
                    variant: "primary",
                    disabled: !e.canClickDone
                },
                on: {
                    click: e.onDone
                }
            }, [e._v(" " + e._s(e.doneButtonText) + " ")]) : e._e()], 1)
        }
          , o = []
          , r = i("9ab4")
          , a = i("60a3")
          , s = i("c46f");
        let l = class extends a["d"] {
            constructor() {
                super(...arguments),
                this.currentPage = 1,
                this.from = 0,
                this.count = 0,
                this.searchString = "",
                this.internalSelectedItems = [],
                this.internalSelectedIds = []
            }
            get hasDetailsView() {
                return !!this.$scopedSlots["row-details"]
            }
            get canClickDone() {
                var e;
                return ((null === (e = this.selectedItems) || void 0 === e ? void 0 : e.length) || 0) >= this.requiredSelectedItems
            }
            get isMultiPage() {
                return "number" === typeof this.itemsPerPage
            }
            get selectedItemsCount() {
                return this.isMultiPage ? this.internalSelectedIds.length : this.internalSelectedItems.length
            }
            onSearchStringChange() {
                this.dispatchSearch()
            }
            onCurrentPageChange() {
                this.dispatchSearch()
            }
            onItemsChange() {
                this.refreshSelectedRows()
            }
            onSelectedItemsChange() {
                this.refreshSelectedRows()
            }
            dispatchSearch() {
                this.itemsPerPage && this.$emit("search", {
                    search: this.searchString,
                    from: (this.currentPage - 1) * this.itemsPerPage,
                    count: this.itemsPerPage
                })
            }
            getTrClass(e) {
                return (e && this.isMultiPage ? this.internalSelectedIds.some(t=>t == e[this.idKey]) : this.internalSelectedItems.some(t=>s["default"].isEqual(t, e))) ? ["b-table-row-selected", "table-active"] : []
            }
            getTrAttr(e) {
                return (e && this.isMultiPage ? this.internalSelectedIds.some(t=>t == e[this.idKey]) : this.internalSelectedItems.some(t=>s["default"].isEqual(t, e))) ? {
                    "aria-selected": !0
                } : {
                    "aria-selected": !1
                }
            }
            onRowClicked(e) {
                if (this.hasDetailsView)
                    return;
                let t = !1;
                const i = this.isMultiPage ? this.internalSelectedIds.findIndex(t=>t == e[this.idKey]) : this.internalSelectedItems.findIndex(t=>s["default"].isEqual(t, e));
                i > -1 ? this.isMultiPage ? this.internalSelectedIds.splice(i, 1) : this.internalSelectedItems.splice(i, 1) : this.isMultiPage && (0 === this.maxSelections || this.maxSelections > 0 && this.selectedItemsCount < this.maxSelections) ? (t = !0,
                this.internalSelectedIds.push(e[this.idKey])) : !this.isMultiPage && (0 === this.maxSelections || this.maxSelections > 0 && this.selectedItemsCount < this.maxSelections) && (t = !0,
                this.internalSelectedItems.push(e)),
                this.$emit("change", this.isMultiPage ? this.internalSelectedIds : this.internalSelectedItems),
                this.$emit("row-clicked", e),
                t && this.$emit("item-selected", e)
            }
            onDone() {
                this.$emit("selection-finished", this.selectedItems)
            }
            onDetailsVisibilityChange(e) {
                e.detailsShowing = !e.detailsShowing,
                this.$emit("details-visibility-change", e)
            }
            refreshSelectedRows() {
                this.selectedItems && this.selectedItems.length && this.items && (this.isMultiPage ? this.internalSelectedIds = this.selectedItems : this.internalSelectedItems = this.selectedItems)
            }
            mounted() {
                this.refreshSelectedRows(),
                this.dispatchSearch()
            }
        }
        ;
        Object(r["b"])([Object(a["c"])({
            default: ()=>[]
        })], l.prototype, "items", void 0),
        Object(r["b"])([Object(a["c"])({
            default: "Select one or more items"
        })], l.prototype, "title", void 0),
        Object(r["b"])([Object(a["c"])({
            default: !0
        })], l.prototype, "showDoneButton", void 0),
        Object(r["b"])([Object(a["c"])({
            default: "Done"
        })], l.prototype, "doneButtonText", void 0),
        Object(r["b"])([Object(a["c"])({
            default: ()=>[]
        })], l.prototype, "fields", void 0),
        Object(r["b"])([Object(a["c"])({
            default: !1
        })], l.prototype, "loading", void 0),
        Object(r["b"])([Object(a["c"])({
            default: null
        })], l.prototype, "itemsPerPage", void 0),
        Object(r["b"])([Object(a["c"])({
            default: null
        })], l.prototype, "totalCount", void 0),
        Object(r["b"])([Object(a["c"])({
            default: 0
        })], l.prototype, "requiredSelectedItems", void 0),
        Object(r["b"])([Object(a["c"])({
            default: "id"
        })], l.prototype, "idKey", void 0),
        Object(r["b"])([Object(a["c"])({
            default: 0
        })], l.prototype, "maxSelections", void 0),
        Object(r["b"])([Object(a["b"])("change")], l.prototype, "selectedItems", void 0),
        Object(r["b"])([Object(a["e"])("searchString")], l.prototype, "onSearchStringChange", null),
        Object(r["b"])([Object(a["e"])("currentPage")], l.prototype, "onCurrentPageChange", null),
        Object(r["b"])([Object(a["e"])("items")], l.prototype, "onItemsChange", null),
        Object(r["b"])([Object(a["e"])("selectedItems")], l.prototype, "onSelectedItemsChange", null),
        l = Object(r["b"])([Object(a["a"])({
            name: "MultiSelectTable"
        })], l);
        var c = l
          , d = c
          , u = (i("5c58"),
        i("2877"))
          , p = Object(u["a"])(d, n, o, !1, null, "69c8c652", null);
        t["a"] = p.exports
    },
    "48b9": function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("576f")
          , o = i("ec26");
        (function() {
            function e(e, t, i, r, a) {
                var s = {
                    id: "",
                    name: "",
                    referenceId: "",
                    format: "",
                    colorMode: "",
                    preview: {
                        imagePath: "",
                        bgColor: "",
                        width: 0,
                        height: 0,
                        textsPreview: [],
                        circularTextsPreview: [],
                        imagePlaceHoldersPreview: [],
                        vectorEPSPreview: [],
                        textTextures: []
                    },
                    eps: {
                        width: 0,
                        height: 0,
                        dpi: 0,
                        exportPPI: 0,
                        mirror: !1,
                        MergeOutput: !1,
                        baseImage: "",
                        baseEps: "",
                        textsEps: [],
                        circularTextsEps: [],
                        imagePlaceHoldersEps: [],
                        vectorEPSEps: []
                    },
                    groups: []
                }
                  , l = JSON.parse(JSON.stringify(s))
                  , c = !1
                  , d = null
                  , u = null
                  , p = null
                  , h = null
                  , m = null
                  , g = null
                  , f = []
                  , v = ""
                  , b = !1;
                function y() {
                    const e = [...l.preview.textsPreview, ...l.preview.circularTextsPreview, ...l.preview.imagePlaceHoldersPreview, ...l.preview.vectorEPSPreview]
                      , t = [...l.eps.textsEps, ...l.eps.circularTextsEps, ...l.eps.imagePlaceHoldersEps, ...l.eps.vectorEPSEps]
                      , i = w().filter(e=>"eps" === e.type && e.addedOnEdit);
                    for (const n of i) {
                        const i = {
                            ...n,
                            addedOnEdit: !1,
                            type: "preview",
                            id: Object(o["a"])()
                        };
                        C([i]);
                        const r = t.filter(e=>e.groupId === n.id)
                          , a = [];
                        for (const t of r) {
                            const i = e.find(e=>e.uuid === t.uuid);
                            i && a.push(i)
                        }
                        for (const e of a)
                            e.groupId = i.id;
                        n.addedOnEdit = !1
                    }
                }
                function w() {
                    return l.groups
                }
                function C(e) {
                    l.groups.push(...e)
                }
                function x(e) {
                    g = e
                }
                function S() {
                    return g
                }
                function P(e) {
                    u = e
                }
                function k() {
                    return u
                }
                function _() {
                    return p
                }
                function A(e) {
                    p = e
                }
                function T(e) {
                    b = e
                }
                function E() {
                    return b
                }
                function O() {
                    return f
                }
                function I(e) {
                    v = e
                }
                function D() {
                    return v
                }
                function F(e) {
                    const t = e.filter(e=>e.optionId > f.length);
                    t.length && (f = [...f, ...t]),
                    f.length && f.map(t=>{
                        const i = e.find(e=>e.optionId == t.optionId);
                        i && (t.name = i.name)
                    }
                    )
                }
                function M(e) {
                    h = e
                }
                function $() {
                    return h
                }
                function B(e) {
                    m = e
                }
                function j() {
                    return m
                }
                function L() {
                    m = {
                        parentId: null,
                        forChildTemplateProductCreation: null,
                        oldPrintVariantName: null,
                        newPrintVariantName: null,
                        currentTemplate: {
                            oldVariant: null,
                            newVariant: null,
                            dimension: {
                                width: null,
                                height: null,
                                unit: null
                            }
                        },
                        savedTemplates: [],
                        isCompleted: null
                    }
                }
                function R(e, t) {
                    d = {
                        width: e,
                        height: t
                    }
                }
                function U() {
                    return d
                }
                function z(e) {
                    N(),
                    l = e
                }
                function N() {
                    l = JSON.parse(JSON.stringify(s)),
                    c = !1,
                    d = null,
                    u = null,
                    g = null,
                    p = null
                }
                function V() {
                    l.eps = JSON.parse(JSON.stringify(s)).eps,
                    l.groups = l.groups.filter(e=>"eps" !== e.type)
                }
                function G() {
                    l.preview = JSON.parse(JSON.stringify(s)).preview,
                    l.groups = l.groups.filter(e=>"preview" !== e.type),
                    d = null,
                    g = null
                }
                function W(e) {
                    l.id = e
                }
                function H() {
                    return l.id
                }
                function X(e) {
                    l.name = e
                }
                function Y(e) {
                    l.referenceId = e
                }
                function q(e) {
                    l.format = e
                }
                function K(e) {
                    l.colorMode = e
                }
                function Z(e) {
                    l.eps.mirror = e
                }
                function Q(e) {
                    l.eps.MergeOutput = e
                }
                function J() {
                    return l.preview.imagePath
                }
                function ee() {
                    return l.preview.bgColor
                }
                function te(e) {
                    c = e
                }
                function ie() {
                    return c
                }
                function ne(e) {
                    l.preview.imagePath = e
                }
                function oe(e) {
                    l.preview.bgColor = e
                }
                function re(e, t) {
                    l.preview.width = e,
                    l.preview.height = t
                }
                function ae(e, t, i, n, o, r, a, s, c, d, u, p, h, m, g, f, v, b, y, w, C, x, S, P, k, _, A, T, E, O, I, D, F, M) {
                    var $ = {
                        id: v,
                        uuid: b,
                        centerX: e,
                        centerY: t,
                        color: "object" === typeof i ? JSON.stringify(i) : i,
                        rotation: n,
                        horizontalDiameter: a,
                        verticalDiameter: s,
                        fontSize: c,
                        caps: d,
                        fontPath: u,
                        textAlign: p,
                        convex: h,
                        outlineColor: m,
                        outlineWidth: g,
                        skewX: o,
                        skewY: r,
                        zIndex: f,
                        fontsMap: y,
                        fontColorsMap: w,
                        colorLibraryId: C,
                        fontLibraryId: x,
                        startAngle: S,
                        endAngle: P,
                        addedOnEdit: k,
                        locked: _,
                        visible: A,
                        name: T,
                        prefix: E,
                        suffix: O,
                        referenceId: I,
                        isPrintArea: D,
                        isOverlay: F,
                        groupId: M
                    };
                    l.preview.circularTextsPreview.push($)
                }
                function se(e, t, i, n, o, r, a, s, c, d, u, p, h, m, g, f, v, b, y, w, C, x, S, P, k, _, A, T, E, O, I, D, F, M, $, B, j, L, R, U) {
                    var z = {
                        id: b,
                        uuid: y,
                        centerX: e,
                        centerY: t,
                        color: "object" === typeof i ? JSON.stringify(i) : i,
                        rotation: n,
                        width: a,
                        height: s,
                        minSizePx: c,
                        maxSizePx: d,
                        multiline: u,
                        caps: p,
                        fontPath: h,
                        textAlign: m,
                        outlineColor: "object" === typeof g ? JSON.stringify(g) : g,
                        outlineWidth: f,
                        skewX: o,
                        skewY: r,
                        zIndex: v,
                        fontsMap: w,
                        fontColorsMap: C,
                        Itext: x,
                        textures: S,
                        tracking: P,
                        lineSpacing: k,
                        colorLibraryId: _,
                        fontLibraryId: A,
                        Version: T,
                        addedOnEdit: E,
                        locked: O,
                        visible: I,
                        name: D,
                        prefix: F,
                        suffix: M,
                        ligatures: $,
                        referenceId: B,
                        isPrintArea: j,
                        isOverlay: L,
                        groupId: R,
                        textVerticalAlign: U
                    };
                    l.preview.textsPreview.push(z)
                }
                function le(e) {
                    var t = e.uuid || e.id;
                    if ("undefined" !== typeof t && null !== t) {
                        var i = l.preview.textsPreview.findIndex((function(e) {
                            return e.id === t || e.uuid === t
                        }
                        ));
                        i >= 0 && l.preview.textsPreview.splice(i, 1);
                        var n = l.preview.circularTextsPreview.findIndex((function(e) {
                            return e.id === t || e.uuid === t
                        }
                        ));
                        n >= 0 && l.preview.circularTextsPreview.splice(n, 1);
                        var o = l.preview.imagePlaceHoldersPreview.findIndex((function(e) {
                            return e.id === t || e.uuid === t
                        }
                        ));
                        o >= 0 && l.preview.imagePlaceHoldersPreview.splice(o, 1);
                        var r = l.preview.vectorEPSPreview.findIndex((function(e) {
                            return e.id === t || e.uuid === t
                        }
                        ));
                        r >= 0 && l.preview.vectorEPSPreview.splice(r, 1);
                        var a = w().findIndex((function(e) {
                            return e.id === t || e.uuid === t
                        }
                        ));
                        a >= 0 && (l.groups = w().filter(e=>e.uuid != t))
                    }
                }
                function ce(e, t, i, n, o, r, a, s, c, d, u, p, h, m, g, f, v, b, y, w, C, x, S, P, k, _, A, T, E, O, I, D, F, M, $, B, j, L) {
                    var R = {
                        id: h,
                        uuid: m,
                        centerX: e,
                        centerY: t,
                        rotation: i,
                        width: r,
                        height: a,
                        color: "object" === typeof s ? JSON.stringify(s) : s,
                        fullColor: c,
                        grading: d,
                        opacity: u,
                        skewX: n,
                        skewY: o,
                        zIndex: p,
                        hasStaticImage: g,
                        imageUrl: f,
                        maskPath: v,
                        dynamicImagesPath: b instanceof Map ? JSON.stringify(Array.from(b.entries())) : b,
                        imageLibraryId: y,
                        colors: w,
                        colorLibraryId: C,
                        rotationStep: x,
                        coverMaskArea: S,
                        removeWhiteBackground: P,
                        RemoveBackground: k,
                        addedOnEdit: _,
                        locked: A,
                        visible: T,
                        name: E,
                        isPrintArea: O,
                        isOverlay: I,
                        isColorOptions: D,
                        podProductImagesMetadata: F,
                        groupId: M,
                        mapConfig: $,
                        cartoonize: B,
                        CutoutFace: j,
                        removeBackgroundCOP: L
                    };
                    return l.preview.imagePlaceHoldersPreview.push(R),
                    R
                }
                function de(e, t, i, n, o, r, a, s, c, d, u, p, h, m, g, f, v, b, y, w, C, x, S, P, k, _) {
                    var A = {
                        id: h,
                        uuid: m,
                        centerX: e,
                        centerY: t,
                        rotation: i,
                        width: r,
                        height: a,
                        opacity: s,
                        skewX: n,
                        skewY: o,
                        vectors: c,
                        allowUserUpload: u,
                        zIndex: p,
                        colors: d,
                        zIndex: p,
                        colorLibraryId: g,
                        vectorLibraryId: f,
                        applyColoring: v,
                        coverMaskArea: b,
                        rotationStep: y,
                        addedOnEdit: w,
                        locked: C,
                        visible: x,
                        name: S,
                        isPrintArea: P,
                        isOverlay: k,
                        groupId: _
                    };
                    l.preview.vectorEPSPreview.push(A)
                }
                function ue(e, t) {
                    l.eps.width = e,
                    l.eps.height = t
                }
                function pe(e) {
                    l.eps.dpi = e
                }
                function he(e) {
                    l.eps.exportPPI = e
                }
                function me(e, t, i, n, o, r, a, s, c, d, u, p, h, m, g, f, v, b, y, w, C, x, S, P, k, _, A, T, E, O, I, D, F, M, $, B, j, L, R, U) {
                    w && (w = JSON.stringify(Array.from(w.entries()))),
                    C && (C = JSON.stringify(Array.from(C.entries())));
                    var z = {
                        id: b,
                        uuid: y,
                        centerX: e,
                        centerY: t,
                        color: "object" === typeof i ? JSON.stringify(i) : i,
                        rotation: n,
                        width: a,
                        height: s,
                        minSizePx: c,
                        maxSizePx: d,
                        multiline: u,
                        caps: p,
                        fontPath: h,
                        textAlign: m,
                        outlineColor: "object" === typeof g ? JSON.stringify(g) : g,
                        outlineWidth: f,
                        skewX: o,
                        skewY: r,
                        zIndex: v,
                        fontsMap: w,
                        fontColorsMap: C,
                        Itext: x,
                        editedProps: S,
                        editedSize: P,
                        tracking: k,
                        lineSpacing: _,
                        colorLibraryId: A,
                        fontLibraryId: T,
                        Version: E,
                        locked: O,
                        visible: I,
                        name: D,
                        prefix: F,
                        suffix: M,
                        ligatures: $,
                        referenceId: B,
                        isPrintArea: j,
                        isOverlay: L,
                        groupId: R,
                        textVerticalAlign: U
                    }
                      , N = l.eps.textsEps.push(z);
                    return N - 1
                }
                function ge(e) {
                    return a((function(t, n) {
                        e.fontsMap && (e.fontPath = e.fontsMap.get(1)),
                        e.fontColorsMap && (e.color = e.fontColorsMap.get(1));
                        var o = me(e.left, e.top, e.color, e.angle, e.skewX, e.skewY, e.getWidth(), e.getHeight(), e.minSizePx, e.maxSizePx, e.multiline, e.caps, e.fontPath, e.getTextAlign(), e.outlineColor, e.getOutlineWidth(), e.zIndex, e.id, e.uuid, e.fontsMap, e.fontColorsMap, e.Itext, e.editedProps, e.editedSize, e.getTrackingAmount(), e.lineSpacing, e.colorLibraryId, e.fontLibraryId, e.version, e.locked, e.visible, e.name, e.prefix, e.suffix, e.ligatures, e.referenceId, e.isPrintArea, e.isOverlay, e.groupId, e.textVerticalAlign);
                        if (Ae(e, e.id),
                        e.addedOnEdit) {
                            const i = e.left
                              , n = e.top
                              , o = e.width
                              , r = e.height;
                            se(i, n, e.color, e.angle, e.skewX, e.skewY, o, r, e.minSizePx, e.maxSizePx, e.multiline, e.caps, e.fontPath, e.getTextAlign(), e.outlineColor, e.getOutlineWidth(), e.zIndex, e.id, e.uuid, e.fontsMap, e.fontColorsMap, e.Itext, e.textures, e.getTrackingAmount(), e.lineSpacing, e.colorLibraryId, e.fontLibraryId, e.version, !0, e.locked, e.visible, e.name, e.prefix, e.suffix, e.ligatures, e.referenceId, e.isPrintArea, e.isOverlay, e.groupId, e.textVerticalAlign),
                            t()
                        } else {
                            const c = function(e, t, n) {
                                if (Pe().preview.textsPreview && n && t && e) {
                                    if (e.editedSize) {
                                        var o = Math.min(Pe().preview.width / Pe().eps.width, Pe().preview.height / Pe().eps.height)
                                          , r = t.width * o
                                          , a = t.height * o;
                                        n.width = r,
                                        n.height = a;
                                        var s = i.calculateFontSizesFromDimensions(r, t.width, t.minSizePx, t.maxSizePx);
                                        n.minSizePx = s.min,
                                        n.maxSizePx = s.max
                                    }
                                    for (const i of e.editedProps)
                                        "textAlign" === i ? n.textAlign = t.getTextAlign() : "tracking" === i ? n.tracking = t.getTrackingAmount() : "outlineWidth" === i ? n.outlineWidth = t.getOutlineWidth() : "ungroup" === i ? n.groupId = null : n[i] = t[i]
                                }
                            };
                            if (e.isEdited() || e.editedSize)
                                if (e.uuid) {
                                    var r = Pe().preview.textsPreview.find(t=>t.uuid === e.uuid);
                                    r || console.error("Couldn't find preview element with UUID: " + e.uuid),
                                    c(e, e, r)
                                } else {
                                    var a = Ee(Pe().eps.textsEps, e.id);
                                    if (a.length > 0) {
                                        var s = !0;
                                        if (1 == a.length) {
                                            s = !1;
                                            var l = Pe().preview.textsPreview.findIndex((function(t) {
                                                return t.id === e.id
                                            }
                                            ));
                                            l > -1 && (a = [l])
                                        }
                                        let t = 0
                                          , i = null;
                                        for (const r of a) {
                                            let a = r;
                                            s || (a = o);
                                            const l = Pe().eps.textsEps[a];
                                            let d = Pe().preview.textsPreview[r];
                                            if (!d || d.id !== l.id || i && i === d) {
                                                const n = Pe().preview.textsPreview.filter(t=>t.id === e.id);
                                                d = n[t];
                                                let o = t;
                                                while (n.length > 1 && i && i === d)
                                                    d = n[++o];
                                                i = d
                                            }
                                            if (!d || d.id !== l.id)
                                                return void n(new Error("Could not edit the text element with ID " + e.id));
                                            c(l, e, d),
                                            ++t
                                        }
                                    } else if (Pe().preview.textsPreview.length > 0)
                                        return void n(new Error("Could not edit the text element with ID " + e.id))
                                }
                            t()
                        }
                    }
                    ))
                }
                function fe(e, t, i, n, o, r, a, s, c, d, u, p, h, m, g, f, v, b, y, w, C, x, S, P, k, _, A, T, E, O, I, D, F) {
                    y && (y = JSON.stringify(Array.from(y.entries()))),
                    w && (w = JSON.stringify(Array.from(w.entries())));
                    var M = {
                        id: v,
                        uuid: b,
                        centerX: e,
                        centerY: t,
                        color: "object" === typeof i ? JSON.stringify(i) : i,
                        rotation: n,
                        horizontalDiameter: a,
                        verticalDiameter: s,
                        fontSize: c,
                        caps: d,
                        fontPath: u,
                        textAlign: p,
                        convex: h,
                        outlineColor: m,
                        outlineWidth: g,
                        skewX: o,
                        skewY: r,
                        zIndex: f,
                        fontsMap: y,
                        fontColorsMap: w,
                        colorLibraryId: C,
                        fontLibraryId: x,
                        startAngle: S,
                        endAngle: P,
                        locked: k,
                        visible: _,
                        name: A,
                        prefix: T,
                        suffix: E,
                        referenceId: O,
                        isPrintArea: I,
                        isOverlay: D,
                        groupId: F
                    };
                    l.eps.circularTextsEps.push(M)
                }
                function ve(e) {
                    return a((function(t, n) {
                        if (e.fontsMap && (e.fontPath = e.fontsMap.get(1)),
                        e.fontColorsMap && (e.fill = r.colorToWeb(e.fontColorsMap.get(1))),
                        fe(e.left, e.top, e.fill, e.angle, e.skewX, e.skewY, e.horizontalDiameter, e.verticalDiameter, e.fontSize, e.caps, e.fontPath, e.textAlign, e.convex, e.stroke, e.strokeWidth, e.zIndex, e.id, e.uuid, e.fontsMap, e.fontColorsMap, e.colorLibraryId, e.fontLibraryId, e.startAngle, e.endAngle, e.locked, e.visible, e.name, e.prefix, e.suffix, e.referenceId, e.isPrintArea, e.isOverlay, e.groupId),
                        Ae(e, e.id),
                        e.addedOnEdit) {
                            const i = e.left
                              , n = e.top
                              , o = e.horizontalDiameter
                              , r = e.verticalDiameter;
                            ae(i, n, e.fill, e.angle, e.skewX, e.skewY, o, r, e.fontSize, e.caps, e.fontPath, e.textAlign, e.convex, e.stroke, e.strokeWidth, e.zIndex, e.id, e.uuid, e.fontsMap, e.fontColorsMap, e.colorLibraryId, e.fontLibraryId, e.startAngle, e.endAngle, !0, e.locked, e.visible, e.name, e.prefix, e.suffix, e.referenceId, e.isPrintArea, e.isOverlay, e.groupId),
                            t()
                        } else {
                            if (e.isEdited() || e.editedSize || e.fontEdited) {
                                var o = null;
                                if (e.uuid)
                                    o = Pe().preview.circularTextsPreview.find(t=>t.uuid === e.uuid);
                                else {
                                    var a = Pe().preview.circularTextsPreview.findIndex((function(t) {
                                        return t.id === e.id
                                    }
                                    ));
                                    o = Pe().preview.circularTextsPreview[a]
                                }
                                if (o) {
                                    if (e.editedSize) {
                                        var s = Math.min(Pe().preview.width / Pe().eps.width, Pe().preview.height / Pe().eps.height)
                                          , l = e.horizontalDiameter * s
                                          , c = e.verticalDiameter * s;
                                        o.horizontalDiameter = l,
                                        o.verticalDiameter = c,
                                        o.fontSize = i.calculateCircularFontSizeFromDimensions(l, e.horizontalDiameter, e.fontSize)
                                    }
                                    for (const t of e.editedProps)
                                        o[t] = e[t],
                                        "ungroup" === t && (o.groupId = null)
                                } else if (Pe().preview.circularTextsPreview.length > 0)
                                    return void n(new Error("Could not edit the text element with ID " + (e.uuid || e.id)))
                            }
                            t()
                        }
                    }
                    ))
                }
                function be(e, t, i, n, o, r, a, s, c, d, u, p, h, m, g, f, v, b, y, w, C, x, S, P, k, _, A, T, E, O, I, D, F, M, $, B, j) {
                    var L = {
                        id: m,
                        uuid: g,
                        centerX: e,
                        centerY: t,
                        rotation: i,
                        width: r,
                        height: a,
                        color: "object" === typeof s ? JSON.stringify(s) : s,
                        fullColor: c,
                        grading: d,
                        RemoveBackground: u,
                        opacity: p,
                        skewX: n,
                        skewY: o,
                        zIndex: h,
                        hasStaticImage: f,
                        imageUrl: v,
                        maskPath: b,
                        dynamicImagesPath: y,
                        imageLibraryId: w,
                        colors: C,
                        colorLibraryId: x,
                        rotationStep: S,
                        coverMaskArea: P,
                        removeWhiteBackground: k,
                        locked: _,
                        visible: A,
                        name: T,
                        isPrintArea: E,
                        isOverlay: O,
                        isColorOptions: I,
                        podProductImagesMetadata: D,
                        groupId: F,
                        mapConfig: M,
                        cartoonize: $,
                        CutoutFace: B,
                        removeBackgroundCOP: j
                    };
                    l.eps.imagePlaceHoldersEps.push(L)
                }
                function ye(e) {
                    return a((async function(i, o) {
                        function r(e) {
                            if (be(e.left, e.top, e.angle, e.skewX, e.skewY, e.getWidth(), e.getHeight(), e.color, e.fullColor, e.grading, e.RemoveBackground, 1, e.zIndex, e.id, e.uuid, e.hasStaticImage, e.imageUrl, e.maskPath, e.dynamicImagesPath, e.imageLibraryId, e.colors, e.colorLibraryId, e.rotationStep, e.coverMaskArea, e.removeWhiteBackground, e.locked, e.visible, e.name, e.isPrintArea, e.isOverlay, e.isColorOptions, e.podProductImagesMetadata, e.groupId, e.mapConfig, e.cartoonize, e.CutoutFace, e.removeBackgroundCOP),
                            Ae(e, e.id),
                            e.addedOnEdit)
                                try {
                                    const t = e.left
                                      , n = e.top
                                      , o = e.width
                                      , r = e.height
                                      , a = ce(t, n, e.angle, e.skewX, e.skewY, o, r, e.color, e.fullColor, e.grading, 1, e.zIndex, e.id, e.uuid, e.hasStaticImage, e.imageUrl, e.maskPath, e.dynamicImagesPath, e.imageLibraryId, e.colors, e.colorLibraryId, e.rotationStep, e.coverMaskArea, e.removeWhiteBackground, e.RemoveBackground, !0, e.locked, e.visible, e.name, e.isPrintArea, e.isOverlay, e.isColorOptions, e.podProductImagesMetadata, e.groupId, e.mapConfig, e.cartoonize, e.CutoutFace, e.removeBackgroundCOP);
                                    i({
                                        previewElement: a,
                                        newlyAdded: !0
                                    })
                                } catch (error) {
                                    o(error)
                                }
                            else {
                                var t = null;
                                if (e.uuid)
                                    t = Pe().preview.imagePlaceHoldersPreview.find(t=>t.uuid === e.uuid);
                                else {
                                    var n = Pe().preview.imagePlaceHoldersPreview.findIndex((function(t) {
                                        return t.id === e.id
                                    }
                                    ));
                                    t = Pe().preview.imagePlaceHoldersPreview[n]
                                }
                                if (e.isEdited() || e.editedSize)
                                    if (t) {
                                        if (e.editedSize) {
                                            var r = Math.min(Pe().preview.width / Pe().eps.width, Pe().preview.height / Pe().eps.height)
                                              , a = e.width * r
                                              , s = e.height * r;
                                            t.width = a,
                                            t.height = s
                                        }
                                        for (const i of e.editedProps)
                                            "mask" === i ? t["maskPath"] = e["maskPath"] : "ungroup" === i ? t.groupId = null : t[i] = e[i]
                                    } else if (Pe().preview.imagePlaceHoldersPreview.length > 0)
                                        return void o(new Error("Could not edit the image element with ID " + (e.uuid || e.id)));
                                i({
                                    previewElement: t,
                                    newlyAdded: !1
                                })
                            }
                        }
                        e.maskChanged && e.hasMask && "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGElEQVQoU2NkYGD4z0AEYBxViC+UqB88AKk6CgERnGWPAAAAAElFTkSuQmCC" !== await t.imageToBase64(e.originalMaskElement) ? Object(n["d"])("mask", e.originalMaskElement).then((function(t) {
                            e.maskPath = t.Path,
                            r(e)
                        }
                        )) : (e.hasMask || (e.maskPath = null),
                        r(e))
                    }
                    ))
                }
                function we(e, t, i, n, o, r, a, s, c, d, u, p, h, m, g, f, v, b, y, w, C, x, S, P, k) {
                    var _ = {
                        id: h,
                        uuid: m,
                        centerX: e,
                        centerY: t,
                        rotation: i,
                        width: r,
                        height: a,
                        opacity: s,
                        skewX: n,
                        skewY: o,
                        vectors: c,
                        zIndex: p,
                        allowUserUpload: u,
                        colors: d,
                        zIndex: p,
                        colorLibraryId: g,
                        vectorLibraryId: f,
                        applyColoring: v,
                        coverMaskArea: b,
                        rotationStep: y,
                        locked: w,
                        visible: C,
                        name: x,
                        isPrintArea: S,
                        isOverlay: P,
                        groupId: k
                    };
                    l.eps.vectorEPSEps.push(_)
                }
                function Ce(e) {
                    return a((function(t, i) {
                        if (we(e.left, e.top, e.angle, e.skewX, e.skewY, e.width * e.scaleX, e.height * e.scaleY, 1, e.vectors, e.colors, e.allowUserUpload, e.zIndex, e.id, e.uuid, e.colorLibraryId, e.vectorLibraryId, e.applyColoring, e.coverMaskArea, e.rotationStep, e.locked, e.visible, e.name, e.isPrintArea, e.isOverlay, e.groupId),
                        Ae(e, e.id),
                        e.addedOnEdit) {
                            const i = e.left
                              , n = e.top
                              , o = e.width
                              , r = e.height;
                            de(i, n, e.angle, e.skewX, e.skewY, o, r, 1, e.vectors, e.colors, e.allowUserUpload, e.zIndex, e.id, e.uuid, e.colorLibraryId, e.vectorLibraryId, e.applyColoring, e.coverMaskArea, e.rotationStep, !0, e.locked, e.visible, e.name, e.isPrintArea, e.isOverlay, e.groupId),
                            t()
                        } else {
                            if (e.isEdited() || e.editedSize) {
                                var n = null;
                                if (e.uuid)
                                    n = Pe().preview.vectorEPSPreview.find(t=>t.uuid === e.uuid);
                                else {
                                    var o = Pe().preview.vectorEPSPreview.findIndex((function(t) {
                                        return t.id === e.id
                                    }
                                    ));
                                    n = Pe().preview.vectorEPSPreview[o]
                                }
                                if (n) {
                                    if (e.editedSize) {
                                        var r = Math.min(Pe().preview.width / Pe().eps.width, Pe().preview.height / Pe().eps.height)
                                          , a = e.width * r
                                          , s = e.height * r;
                                        n.width = a,
                                        n.height = s
                                    }
                                    for (const t of e.editedProps)
                                        n[t] = e[t]
                                }
                            }
                            t()
                        }
                    }
                    ))
                }
                function xe(e) {
                    l.eps.baseImage = e
                }
                function Se(e) {
                    l.eps.baseEps = e
                }
                function Pe() {
                    return l
                }
                function ke(t) {
                    e.getProductsCount(t)
                }
                function _e(t) {
                    return e.saveProduct(t)
                }
                function Ae(e, t) {
                    e.id = t;
                    var i = e.uuid;
                    if (i) {
                        var n = Pe().preview
                          , o = n.textsPreview.concat(n.circularTextsPreview).concat(n.imagePlaceHoldersPreview).concat(n.vectorEPSPreview)
                          , r = o.find(e=>e.uuid === i);
                        r && (r.id = t)
                    }
                }
                function Te() {
                    var e = 0
                      , t = 0
                      , i = 0
                      , n = 0
                      , o = function(e, t) {
                        return t.id - e.id
                    };
                    return Pe().preview.textsPreview.length > 0 && (e = Pe().preview.textsPreview.sort(o)[0].id),
                    Pe().preview.circularTextsPreview.length > 0 && (t = Pe().preview.circularTextsPreview.sort(o)[0].id),
                    Pe().preview.imagePlaceHoldersPreview.length > 0 && (i = Pe().preview.imagePlaceHoldersPreview.sort(o)[0].id),
                    Pe().preview.vectorEPSPreview.length > 0 && (n = Pe().preview.vectorEPSPreview.sort(o)[0].id),
                    Math.max(e, t, i, n)
                }
                function Ee(e, t) {
                    var i, n = [];
                    for (i = 0; i < e.length; i++)
                        e[i].id === t && n.push(i);
                    return n
                }
                function Oe(e) {
                    const t = Pe();
                    let i = t.eps.textsEps.find(t=>e.uuid ? t.uuid === e.uuid : t.id === e.id);
                    return i || (i = t.eps.circularTextsEps.find(t=>e.uuid ? t.uuid === e.uuid : t.id === e.id),
                    i || (i = t.eps.imagePlaceHoldersEps.find(t=>e.uuid ? t.uuid === e.uuid : t.id === e.id),
                    i || (i = t.eps.vectorEPSEps.find(t=>e.uuid ? t.uuid === e.uuid : t.id === e.id),
                    i || i)))
                }
                function Ie(e) {
                    if (e && e.dynamicImagesPath) {
                        const t = [...Pe().eps.imagePlaceHoldersEps, ...Pe().eps.vectorEPSEps]
                          , i = e.uuid ? t.some(t=>t.uuid === e.uuid) : t.some(t=>t.id == e.id);
                        return !i
                    }
                    return !1
                }
                return {
                    loadProduct: z,
                    addGroups: C,
                    getGroups: w,
                    updatePreviewGroups: y,
                    clearEPS: V,
                    clearPreview: G,
                    clearProduct: N,
                    setProductId: W,
                    getProductId: H,
                    setProductName: X,
                    setMelcoReferenceId: Y,
                    setProductFormat: q,
                    setProductColorMode: K,
                    setPreviewImage: ne,
                    setPreviewBgColor: oe,
                    setPreviewImgSize: re,
                    addPreviewText: se,
                    addPreviewPlaceholderImage: ce,
                    setEPSSize: ue,
                    setEPSdpi: pe,
                    setExportPPI: he,
                    setEPSMirroring: Z,
                    setEpsMergeOutput: Q,
                    setNeedColorsUpgrade: te,
                    getNeedColorsUpgrade: ie,
                    addPreviewCircularText: ae,
                    addEPSText: me,
                    addEPSTextFromObject: ge,
                    addEPSCircularTextFromObject: ve,
                    addEPSPlaceholderImage: be,
                    addEPSPlaceholderImageFromObject: ye,
                    addEPSVectorEPS: we,
                    addEPSVectorEPSFromObject: Ce,
                    addPreviewVectorEPS: de,
                    setEPSBaseImagePath: xe,
                    setEPSBaseEPSPath: Se,
                    getProduct: Pe,
                    getProductsCount: ke,
                    getPreviewImage: J,
                    getPreviewBgColor: ee,
                    saveProduct: _e,
                    removeFromPreview: le,
                    getLastPreviewId: Te,
                    getEpsElementFromPreviewElement: Oe,
                    updateProductionElementId: Ae,
                    isPreviewOnlyElement: Ie,
                    setProductTemplatePreviewTargetSize: R,
                    getProductTemplatePreviewTargetSize: U,
                    setPodAssignments: P,
                    getPodAssignments: k,
                    setPod: A,
                    getPod: _,
                    setDescription: I,
                    getDescription: D,
                    getProductColorsFilenames: O,
                    setProductColorsFilenames: F,
                    setTemplateProductVariants: M,
                    getTemplateProductVariants: $,
                    clearChildTemplateProduct: L,
                    setChildTemplateProduct: B,
                    getChildTemplateProduct: j,
                    setPreviewColorOptionsMetadata: x,
                    getPreviewColorOptionsMetadata: S,
                    setIsProductColorModified: T,
                    getIsProductColorModified: E
                }
            }
            e.$inject = ["ProductAPIService", "ImageUtilService", "GeneralMathUtils", "ElementsColorService", "$q"],
            angular.module("app.shared.services").factory("ProductService", e)
        }
        )()
    },
    "490e": function(e, t, i) {},
    4991: function(e, t, i) {
        "use strict";
        i.d(t, "d", (function() {
            return o
        }
        )),
        i.d(t, "f", (function() {
            return r
        }
        )),
        i.d(t, "b", (function() {
            return a
        }
        )),
        i.d(t, "a", (function() {
            return s
        }
        )),
        i.d(t, "e", (function() {
            return l
        }
        )),
        i.d(t, "g", (function() {
            return c
        }
        )),
        i.d(t, "c", (function() {
            return d
        }
        ));
        var n = i("406d");
        const o = async e=>{
            const t = await n["a"].get("Users/Billing/PaymentMethods/" + Object(n["b"])(e));
            return t.data
        }
          , r = async(e,t)=>{
            const i = await n["a"].post("Users/Billing/PaymentMethods/" + Object(n["b"])(e), Object(n["c"])({
                Token: t
            }), {
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                }
            });
            return i.data
        }
          , a = async(e,t,i,o)=>{
            const r = await n["a"].get("Users/Billing/Invoices/" + Object(n["b"])(e), {
                params: {
                    limit: t,
                    startingAfter: i,
                    endingBefore: o
                }
            });
            return r.data
        }
          , s = async e=>{
            const t = await n["a"].get("Users/Billing/Customer/" + Object(n["b"])(e));
            return t.data
        }
          , l = async()=>{
            const e = await n["a"].get("Users/Billing/Subscriptions");
            return e.data
        }
          , c = async(e,t,i,o,r,a)=>{
            const s = await n["a"].put("Users/Billing/Subscriptions/" + Object(n["b"])(e), Object(n["c"])({
                Password: t,
                Status: i,
                CancellationReasons: r,
                PauseReasons: a,
                CardTokenId: o
            }), {
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                }
            });
            return s.data
        }
          , d = async e=>{
            const t = await n["a"].get("Users/Billing/Prices/Last/" + Object(n["b"])(e));
            return t.data
        }
    },
    "49be": function(e, t) {
        angular.module("app.ctrls").directive("runOnEnter", [function() {
            return {
                restrict: "A",
                scope: {
                    runOnEnter: "&"
                },
                link: function(e, t, i) {
                    $(t).on("keydown", (function(t) {
                        13 == t.which && (t.preventDefault(),
                        e.runOnEnter())
                    }
                    ))
                }
            }
        }
        ])
    },
    "4a58": function(e, t, i) {
        "use strict";
        i("02d1")
    },
    "4af8": function(e, t, i) {
        "use strict";
        var n = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-button", e._b({
                attrs: {
                    disabled: e._loading
                },
                on: {
                    click: function(t) {
                        return e.handleClick(t)
                    }
                }
            }, "b-button", e.$attrs, !1), [i("b-spinner", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e._loading,
                    expression: "_loading"
                }],
                staticClass: "mr-2",
                attrs: {
                    small: ""
                }
            }), i("span", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e._loading,
                    expression: "_loading"
                }]
            }, [e._v(e._s(e.loadingText))]), i("span", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e._loading,
                    expression: "!_loading"
                }]
            }, [e._t("default")], 2)], 1)
        }
          , o = []
          , r = i("9ab4")
          , a = i("2b0e")
          , s = i("2fe1")
          , l = i("60a3");
        let c = class extends a["default"] {
            constructor() {
                super(...arguments),
                this.clickHandler = null,
                this.waitingPromise = !1
            }
            get _loading() {
                return this.loading || this.waitingPromise
            }
            onLoadingChange() {
                this.$emit("change", this._loading)
            }
            onWaitingPromiseChange() {
                this.$emit("change", this._loading)
            }
            created() {
                this.$listeners["click"] && (this.clickHandler = Array.isArray(this.$listeners["click"]) ? this.$listeners["click"][0] : this.$listeners["click"])
            }
            async handleClick(e) {
                const t = this.clickHandler && this.clickHandler(e);
                if (null === this.loading && t instanceof Promise) {
                    this.waitingPromise = !0;
                    try {
                        await t,
                        this.waitingPromise = !1
                    } catch (error) {
                        throw this.waitingPromise = !1,
                        error
                    }
                }
            }
        }
        ;
        Object(r["b"])([Object(l["c"])({
            default: null
        })], c.prototype, "loading", void 0),
        Object(r["b"])([Object(l["c"])({
            default: "Saving"
        })], c.prototype, "loadingText", void 0),
        Object(r["b"])([Object(l["b"])("change")], c.prototype, "status", void 0),
        Object(r["b"])([Object(l["e"])("loading")], c.prototype, "onLoadingChange", null),
        Object(r["b"])([Object(l["e"])("waitingPromise", {
            immediate: !0
        })], c.prototype, "onWaitingPromiseChange", null),
        c = Object(r["b"])([Object(s["b"])({
            name: "LoaderBtn"
        })], c);
        var d = c
          , u = d
          , p = i("2877")
          , h = Object(p["a"])(u, n, o, !1, null, null, null);
        t["a"] = h.exports
    },
    "4c8f": function(e, t) {
        (function() {
            function e(e) {
                function t(t, i) {
                    const n = $.param({
                        username: t,
                        password: i,
                        grant_type: "password"
                    });
                    return e.post("/token", n, "application/x-www-form-urlencoded").then((function(e) {
                        return e
                    }
                    ))
                }
                function i() {
                    const t = $.param({
                        grant_type: "shopify"
                    });
                    return e.post("/token", t, "application/x-www-form-urlencoded").then((function(e) {
                        return e
                    }
                    ))
                }
                return {
                    getPasswordToken: t,
                    getShopifyLoginToken: i
                }
            }
            e.$inject = ["HttpService"],
            angular.module("app.shared.services").factory("TokenAPIService", e)
        }
        )()
    },
    "4db6": function(e, t, i) {},
    "4eb6": function(e, t, i) {
        "use strict";
        i("661f")
    },
    "4f85": function(e, t, i) {
        e.exports = i.p + "img/dynamicvector.316b888c.svg?x-request=html"
    },
    5: function(e, t) {},
    5076: function(e, t, i) {
        (function(e) {
            (function() {
                function t(t) {
                    function i(e) {
                        if ("string" === typeof e)
                            return e;
                        if (e.rgb && e.HEX)
                            return e.alpha < 1 ? "rgba(" + 255 * e.rgb.r + "," + 255 * e.rgb.g + "," + 255 * e.rgb.b + "," + e.alpha + ")" : "#" + e.HEX;
                        if (e.alpha < 1) {
                            var t = new Colors
                              , i = t.convertColor(e.hex.replace("#", ""), "HEX2RGB");
                            return "rgba(" + i.r + "," + i.g + "," + i.b + "," + e.alpha + ")"
                        }
                        return e.hex
                    }
                    function n(e) {
                        const t = i(e);
                        return new fabric.Color(t).toHex()
                    }
                    function o(t, i, n) {
                        const o = {
                            position: i.selectedColorPosition,
                            hex: "#" + t.HEX,
                            cmyk: t.cmyk.c + "," + t.cmyk.m + "," + t.cmyk.y + "," + t.cmyk.k,
                            alpha: t.alpha
                        };
                        i.colors || (i.colors = []);
                        let r = e.find(i.colors, (function(e) {
                            return e.position === i.selectedColorPosition
                        }
                        ));
                        r ? r = Object.assign(r, o) : i.colors.push(o),
                        n && i.setEditedProp("colors")
                    }
                    function r(i, o, r, a) {
                        return new Promise(async(s,l)=>{
                            try {
                                if ("undefined" === typeof o)
                                    return void s();
                                let l;
                                o < 1 && (o = 1),
                                i.selectedColorPosition = o,
                                i.colorLibraryId ? l = await t.getLibraryElementAtPosition(i.colorLibraryId, o) : (i.colors || (i.colors = []),
                                l = e.find(i.colors, (function(e) {
                                    return e.position === o
                                }
                                )),
                                l || "image-placeholder" !== i.type || 1 !== o || (l = {
                                    hex: n(i.color),
                                    alpha: 1
                                }));
                                let c = "rgba(0,0,0,1)";
                                if (l) {
                                    const e = new Colors
                                      , t = e.convertColor(l.hex.replace("#", ""), "HEX2RGB");
                                    c = `rgba(${t.r},${t.g},${t.b},${l.alpha})`
                                } else
                                    console.warn("No color found at position: " + o);
                                switch (r && r.setColor(c),
                                i.type) {
                                case "image-placeholder":
                                case "image":
                                    i.set("imageColor", c);
                                    break;
                                case "vector-placeholder":
                                    i.set("svgColor", c);
                                    break
                                }
                                a.renderAll(),
                                s()
                            } catch (error) {
                                console.error(error),
                                l(error)
                            }
                        }
                        )
                    }
                    return {
                        colorToWeb: i,
                        saveDynamicColor: o,
                        changeDynamicColorPosition: r
                    }
                }
                t.$inject = ["LibrariesAPIService"],
                angular.module("app.shared.services").factory("ElementsColorService", t)
            }
            )()
        }
        ).call(this, i("c46f"))
    },
    "508f": function(e, t, i) {
        "use strict";
        i.r(t),
        function(e) {
            var t = i("1424")
              , n = i("d152")
              , o = i("b421")
              , r = i("576f")
              , a = i("0bad");
            (function() {
                function i(i, s, l, c, d, u, p, h, m, g, f, v, b, y, w, C, x, S, P, k, _, A, T, E, O, I, D, F, M) {
                    var B;
                    (m.headerMode = "single",
                    i.MAX_IMAGE_SIZE = A.MAX_PREVIEW_IMAGE_SIZE,
                    i.bgColor = null,
                    i.backgroundReady = !1,
                    i.backgroundType = null,
                    i.bgColorPickerCtrlMethods = v.createEmptyColorPicker(),
                    i.previewMode = "/createProduct3" == p.$$path,
                    i.editMode = s.getProduct().preview.textsPreview.length > 0 || s.getProduct().preview.imagePlaceHoldersPreview.length > 0 || s.getProduct().preview.circularTextsPreview.length > 0 || s.getProduct().preview.vectorEPSPreview.length > 0,
                    i.colorSamplerActive = !1,
                    i.replacedBackground = !1,
                    i.textures = [],
                    i.canRemoveSelection = !1,
                    i.bgColorForm = {
                        previewWidth: 1e3,
                        previewHeight: 1e3
                    },
                    i.accordionsStatus = {
                        textTransform: !1,
                        textCharacter: !1,
                        circularTextTransform: !1,
                        circularTextColor: !1,
                        imageTransform: !1,
                        imageAppearance: !1,
                        vectorTransform: !1,
                        vectorMode: !1
                    },
                    i.selectedColorLibraryName = "",
                    i.selectedFontLibraryName = "",
                    i.selectedImageLibraryName = "",
                    i.selectedVectorLibraryName = "",
                    i.textSelected = null,
                    i.imageSelected = null,
                    i.selectedTextProperties = {
                        text: "",
                        centerX: 0,
                        centerY: 0,
                        rotation: 0,
                        fontPath: "",
                        fontName: "",
                        color: "#000000",
                        id: 0,
                        skewX: 0,
                        skewY: 0,
                        outlineWidth: 0,
                        fontOption: 0,
                        fontColorOption: 1,
                        textures: [],
                        locked: !0,
                        prefix: "",
                        suffix: ""
                    },
                    i.textFillColorPicker = v.createEmptyColorPicker(),
                    i.textOutlineColorPicker = v.createEmptyColorPicker(),
                    i.textCircularFillColorPicker = v.createEmptyColorPicker(),
                    i.selectedImageProperties = {
                        centerX: 0,
                        centerY: 0,
                        rotation: 0,
                        id: 0,
                        fullColor: !0,
                        grading: !1,
                        opacity: 1,
                        skewX: 0,
                        skewY: 0,
                        width: 0,
                        height: 0,
                        dynamicImageVariation: 1,
                        dynamicImagesPath: null,
                        canChangeColorLibrary: !0,
                        colorPosition: 1,
                        removeWhiteBackground: !1,
                        RemoveBackground: !1,
                        locked: !0
                    },
                    i.imageColorPicker = v.createEmptyColorPicker(),
                    i.hasSelectedElement = !1,
                    i.apiKeys = {
                        removeBg: null,
                        vanceAi: null,
                        cutoutPro: null
                    },
                    i.svgSelected = null,
                    i.selectedSVGProperties = {
                        centerX: 0,
                        centerY: 0,
                        skewX: 0,
                        skewY: 0,
                        rotation: 0,
                        width: 0,
                        height: 0,
                        id: 0,
                        position: 1,
                        allowUserUpload: !1,
                        colorPosition: 1,
                        canChangeColorLibrary: !0,
                        applyColoring: !1,
                        locked: !0
                    },
                    i.svgColorPicker = v.createEmptyColorPicker(),
                    i.layersInstance = null,
                    i.forProductTemplateCreation = !!p.search().forProductTemplateCreation,
                    i.isUserDesignCreation = !!p.search().forUserDesignCreation,
                    i.forMyProductBases = !!p.search().forMyProductBases,
                    i.elementAlignType = "selection",
                    i.isGroupSelected = function() {
                        return !(!i.isUserDesignCreation || i.previewMode) || L.getActiveObjects().length > 1
                    }
                    ,
                    i.$watch("layersInstance", e=>{
                        i.layersInstance = e
                    }
                    ),
                    i.layersElementSelected = function(e) {
                        Object(t["h"])(e.elements, L, 1 === e.elements.length)
                    }
                    ,
                    i.layersOrderUpdated = function() {
                        Object(t["o"])(L),
                        Object(t["d"])(L)
                    }
                    ,
                    i.layersCollapseToggle = function(e) {
                        if (e.collapsed) {
                            for (const e in i.accordionsStatus)
                                i.accordionsStatus[e] = !1;
                            u(()=>i.$apply())
                        }
                        Object(t["d"])(L)
                    }
                    ,
                    i.layersElementLockToggle = function(e) {
                        if (m.isManagedUser && !m.user.UserImpersonatedFromId)
                            return;
                        Object(t["j"])(e.element, L);
                        const n = L.getActiveObject();
                        n && n.fire("modified"),
                        u(()=>i.$apply()),
                        Object(t["n"])(L),
                        Object(t["d"])(L)
                    }
                    ,
                    i.layersElementVisibilityToggle = function(e) {
                        Object(t["m"])(e.element, L),
                        Object(t["n"])(L),
                        Object(t["d"])(L)
                    }
                    ,
                    i.layersElementOverlayToggle = function(e) {
                        Object(t["k"])(e.element, L),
                        Object(t["n"])(L),
                        Object(t["d"])(L)
                    }
                    ,
                    i.layersTitleChange = function(e) {
                        i.editMode && e.element.setEditedProp("name"),
                        Object(t["d"])(L)
                    }
                    ,
                    i.collapseElementsPanels = function() {
                        i.layersInstance && i.layersInstance.$children[0].setCollapse(!1)
                    }
                    ,
                    m.$watch("user", e=>{
                        i.apiKeys = {
                            removeBg: e.RemoveBgAPIKey,
                            vanceAi: e.VanceAiAPIKey,
                            cutoutPro: e.CutoutproAPIKey
                        }
                    }
                    ),
                    i.$watch("backgroundReady", (function(e, t) {
                        if (i.backgroundReady && !i.previewMode) {
                            const e = `${s.getProduct().name}: ${Number(L.getArtworkWidth()).toFixed(0)}x${Number(L.getArtworkHeight()).toFixed(0)} px`;
                            i.previewMode ? m.headerTitleRight = e : m.headerTitleLeft = e,
                            m.headerMode = "dual"
                        }
                    }
                    )),
                    E.getCurrentFlow() == E.WelcomeFlowCPart1) && (null === (B = window.Appcues) || void 0 === B || B.show(E.WelcomeFlowCPart2));
                    i.updateLayers = function() {
                        i.layersInstance && i.layersInstance.$children[0].setCanvasElements(L.getObjects()),
                        m.$broadcast("canvas:updated:stepTwo", {
                            objects: L.getObjects()
                        })
                    }
                    ,
                    i.setLayersActiveItem = function(e, t) {
                        i.layersInstance && i.layersInstance.$children[0].setActiveElement(e, t),
                        m.$broadcast("canvas:selection:stepTwo", {
                            element: e,
                            wasUserEvent: t
                        })
                    }
                    ,
                    i.loadTextures = function() {
                        S.getAllTextures().then((function(e) {
                            console.log("Textures Loaded"),
                            i.textures = e,
                            i.textures.forEach(e=>{
                                e.Name = e.Name.replace(/\.[^/.]+$/, "")
                            }
                            )
                        }
                        ))
                    }
                    ,
                    i.toRgbaString = function(e, t) {
                        var i = new Colors
                          , n = i.convertColor(e.replace("#", ""), "HEX2RGB");
                        return "rgba(" + n.r + "," + n.g + "," + n.b + "," + t + ")"
                    }
                    ,
                    i.bgColorPickerColorChange = function(e) {
                        i.bgColor = e,
                        u((function() {
                            i.$apply()
                        }
                        ))
                    }
                    ,
                    i.onBgColorPickerReady = function() {
                        i.bgColorPickerCtrlMethods.setColor("#ffffff"),
                        i.bgColorPickerCtrlMethods.openInContainer($("#step2-container #pickerContainer").get(0))
                    }
                    ,
                    s.getProduct().eps.textsEps && s.getProduct().eps.textsEps.length > 0 && i.loadTextures(),
                    i.isPreviewOnlyElement = function(e) {
                        return s.isPreviewOnlyElement(e)
                    }
                    ;
                    const j = function(e) {
                        return !(e instanceof fabric.Object) || i.isPreviewOnlyElement(e)
                    };
                    i.undoManager = m.planIncludesFeature ? new a["a"] : null;
                    var L = new fabric.CanvasEx("fabric-canvas-2",{
                        eventContainer: i.previewMode ? "" : "fabric-container-2",
                        altActionKey: "ctrlKey",
                        preserveObjectStacking: !0,
                        seamLessScrollbars: i.previewMode,
                        enableZoom: !i.previewMode,
                        artworkTitle: i.previewMode ? "Preview" : "",
                        isPreviewStep: !0,
                        enableCopyPaste: function(e) {
                            if (e.length && !i.isUserDesignCreation)
                                for (const t of e)
                                    if (!i.isPreviewOnlyElement(t))
                                        return !1;
                            return !0
                        },
                        enableGroups: i.enableGroups,
                        undoManager: i.undoManager
                    });
                    L.canDeleteObject = j,
                    i.canvas = L;
                    const R = function(e) {
                        if (i.canRemoveSelection = j(L.getActiveObject()),
                        i.isGroupSelected() && "activeSelection" === e.target.type)
                            L.fire("selection:cleared"),
                            e.target.set("lockUniScaling", !0),
                            L.renderAll(),
                            i.hasSelectedElement = !0,
                            i.setLayersActiveItem(L.getActiveObject(), !!e.e);
                        else if (!i.isUserDesignCreation) {
                            if (i.hasSelectedElement = !0,
                            i.setLayersActiveItem(L.getActiveObject(), !!e.e),
                            i.textFillColorPicker.terminate(),
                            i.textOutlineColorPicker.terminate(),
                            i.textCircularFillColorPicker.terminate(),
                            i.imageColorPicker.terminate(),
                            i.svgColorPicker.terminate(),
                            i.textSelected = null,
                            i.imageSelected = null,
                            i.svgSelected = null,
                            L.updateCornerSize(L.getActiveObject()),
                            L.getActiveObject() && "bounded-text" == L.getActiveObject().type) {
                                function t() {
                                    i.selectedTextProperties.text = i.textSelected.getText(),
                                    i.selectedTextProperties.centerX = i.textSelected.left,
                                    i.selectedTextProperties.centerY = i.textSelected.top,
                                    i.selectedTextProperties.width = i.textSelected.getWidth(),
                                    i.selectedTextProperties.height = i.textSelected.getHeight(),
                                    i.selectedTextProperties.rotation = i.textSelected.angle,
                                    i.selectedTextProperties.fontPath = i.textSelected.fontPath,
                                    i.selectedTextProperties.fontOption = i.textSelected.fontOption || 1,
                                    i.selectedTextProperties.fontColorOption = i.textSelected.fontColorOption || 1,
                                    i.selectedTextProperties.id = i.textSelected.id,
                                    i.selectedTextProperties.skewX = i.textSelected.skewX,
                                    i.selectedTextProperties.skewY = i.textSelected.skewY,
                                    i.selectedTextProperties.outlineWidth = i.textSelected.getOutlineWidth(),
                                    i.selectedTextProperties.Itext = i.textSelected.Itext,
                                    i.selectedTextProperties.locked = i.textSelected.locked,
                                    i.selectedTextProperties.prefix = i.textSelected.prefix,
                                    i.selectedTextProperties.suffix = i.textSelected.suffix,
                                    i.textSelected.textures && i.textSelected.textures[0] ? i.selectedTextProperties.texture = i.textSelected.textures[0].texturePath : i.selectedTextProperties.texture = "null",
                                    d.changeFontColorOption(i.textFillColorPicker, i.textSelected, i.selectedTextProperties.fontColorOption, L),
                                    i.textOutlineColorPicker.setColor(i.textSelected.outlineColor),
                                    i.textOutlineColorPicker.enable(),
                                    i.selectedTextProperties.canChangeColorLibrary = !0;
                                    var e = s.getEpsElementFromPreviewElement(i.textSelected);
                                    e ? e.colorLibraryId && (i.selectedTextProperties.canChangeColorLibrary = !1) : console.warn("No EPS element with ID " + i.selectedTextProperties.id),
                                    i.textSelected.Itext && i.textOutlineColorPicker.disable();
                                    var t = b.calculateFontSizesFromObject(i.textSelected);
                                    i.textSelected.setMinSizePx(t.min),
                                    i.textSelected.setMaxSizePx(t.max)
                                }
                                var n;
                                if (i.textSelected = L.getActiveObject(),
                                P.updateLibraryNames(i, i.textSelected),
                                t(),
                                i.textSelected.on({
                                    modified: function() {
                                        t(),
                                        u((function() {
                                            i.$apply()
                                        }
                                        ))
                                    }
                                }),
                                i.textSelected.id == i.getLastObjectId() && E.getCurrentFlow() == E.OptionBPart7)
                                    null === (n = window.Appcues) || void 0 === n || n.show(E.OptionBPart8)
                            } else if (L.getActiveObject() && "path-itext" == L.getActiveObject().type) {
                                function o() {
                                    i.selectedTextProperties.text = i.textSelected.text,
                                    i.selectedTextProperties.centerX = i.textSelected.left,
                                    i.selectedTextProperties.centerY = i.textSelected.top,
                                    i.selectedTextProperties.rotation = i.textSelected.angle,
                                    i.selectedTextProperties.verticalDiameter = i.textSelected.verticalDiameter,
                                    i.selectedTextProperties.horizontalDiameter = i.textSelected.horizontalDiameter,
                                    i.selectedTextProperties.skewX = i.textSelected.skewX,
                                    i.selectedTextProperties.skewY = i.textSelected.skewY,
                                    i.selectedTextProperties.caps = i.textSelected.caps,
                                    i.selectedTextProperties.fontPath = i.textSelected.fontPath,
                                    i.selectedTextProperties.fontOption = i.textSelected.fontOption || 1,
                                    i.selectedTextProperties.fontColorOption = i.textSelected.fontColorOption || 1,
                                    i.selectedTextProperties.id = i.textSelected.id,
                                    i.selectedTextProperties.outlineWidth = i.textSelected.strokeWidth,
                                    i.selectedTextProperties.locked = i.textSelected.locked,
                                    i.selectedTextProperties.prefix = i.textSelected.prefix,
                                    i.selectedTextProperties.suffix = i.textSelected.suffix;
                                    var e = b.calculateCircularFontSizeFromDimensions(i.textSelected.horizontalDiameter, i.textSelected.originalHorizontalDiameter, i.textSelected.originalFontSize);
                                    i.textSelected.set("fontSize", e),
                                    L.renderAll(),
                                    i.selectedTextProperties.fontSize = i.textSelected.fontSize,
                                    d.changeFontColorOption(i.textCircularFillColorPicker, i.textSelected, i.selectedTextProperties.fontColorOption, L),
                                    i.selectedTextProperties.canChangeColorLibrary = !0;
                                    var t = s.getEpsElementFromPreviewElement(i.textSelected);
                                    t ? t.colorLibraryId && (i.selectedTextProperties.canChangeColorLibrary = !1) : console.warn("No EPS element with ID " + i.selectedTextProperties.id)
                                }
                                i.textSelected = L.getActiveObject(),
                                P.updateLibraryNames(i, i.textSelected),
                                o(),
                                i.textSelected.on({
                                    modified: function() {
                                        o(),
                                        setTimeout((function() {
                                            i.$apply()
                                        }
                                        ))
                                    }
                                })
                            } else if (L.getActiveObject() && "image-placeholder" == L.getActiveObject().type) {
                                function r() {
                                    i.selectedImageProperties.centerX = i.imageSelected.left,
                                    i.selectedImageProperties.centerY = i.imageSelected.top,
                                    i.selectedImageProperties.rotation = i.imageSelected.angle,
                                    i.selectedImageProperties.id = i.imageSelected.id,
                                    i.selectedImageProperties.fullColor = i.imageSelected.fullColor,
                                    i.selectedImageProperties.grading = i.imageSelected.grading,
                                    i.selectedImageProperties.opacity = i.imageSelected.getOpacity(),
                                    i.selectedImageProperties.skewX = i.imageSelected.skewX,
                                    i.selectedImageProperties.skewY = i.imageSelected.skewY,
                                    i.selectedImageProperties.width = i.imageSelected.getWidth(),
                                    i.selectedImageProperties.height = i.imageSelected.getHeight(),
                                    i.selectedImageProperties.hasStaticImage = i.imageSelected.hasStaticImage,
                                    i.selectedImageProperties.dynamicImagesPath = i.imageSelected.dynamicImagesPath,
                                    i.selectedImageProperties.imageUrl = i.imageSelected.imageUrl,
                                    i.selectedImageProperties.dynamicImageVariation = i.imageSelected.dynamicImageVariation || 1,
                                    i.selectedImageProperties.removeWhiteBackground = i.imageSelected.removeWhiteBackground,
                                    i.selectedImageProperties.cartoonize = i.imageSelected.cartoonize,
                                    i.selectedImageProperties.CutoutFace = i.imageSelected.CutoutFace,
                                    i.selectedImageProperties.removeBackgroundCOP = i.imageSelected.removeBackgroundCOP,
                                    i.selectedImageProperties.RemoveBackground = i.imageSelected.RemoveBackground,
                                    i.selectedImageProperties.locked = i.imageSelected.locked,
                                    i.imageSelected.fullColor || i.imageSelected.grading ? !i.imageSelected.fullColor && i.imageSelected.grading ? i.selectedImageProperties.imageType = "grading" : i.selectedImageProperties.imageType = "full color" : i.selectedImageProperties.imageType = "single color",
                                    i.imageColorPicker.setColor(i.imageSelected.getColor())
                                }
                                var a;
                                if (i.imageSelected = L.getActiveObject(),
                                P.updateLibraryNames(i, i.imageSelected),
                                r(),
                                3 == i.imageSelected.id && E.getCurrentFlow() == E.OptionBPart8)
                                    null === (a = window.Appcues) || void 0 === a || a.show(E.OptionBPart9);
                                i.imageSelected.on({
                                    modified: function() {
                                        r(),
                                        u((function() {
                                            i.$apply()
                                        }
                                        ))
                                    }
                                })
                            } else if (L.getActiveObject() && "vector-placeholder" == L.getActiveObject().type) {
                                function l() {
                                    i.selectedSVGProperties.centerX = i.svgSelected.left,
                                    i.selectedSVGProperties.centerY = i.svgSelected.top,
                                    i.selectedSVGProperties.rotation = i.svgSelected.angle,
                                    i.selectedSVGProperties.width = i.svgSelected.width * i.svgSelected.scaleX,
                                    i.selectedSVGProperties.height = i.svgSelected.height * i.svgSelected.scaleY,
                                    i.selectedSVGProperties.id = i.svgSelected.id,
                                    i.selectedSVGProperties.allowUserUpload = i.svgSelected.allowUserUpload,
                                    i.selectedSVGProperties.applyColoring = i.svgSelected.applyColoring,
                                    i.selectedSVGProperties.skewX = i.svgSelected.skewX,
                                    i.selectedSVGProperties.skewY = i.svgSelected.skewY,
                                    i.selectedSVGProperties.locked = i.svgSelected.locked,
                                    i.selectedSVGProperties.applyColoring && (i.svgSelected.svgColor ? i.svgColorPicker.setColor(i.svgSelected.svgColor) : i.svgColorPicker.setColor("rgba(0,0,0,1)")),
                                    i.selectedSVGProperties.canChangeColorLibrary = !0;
                                    var e = s.getEpsElementFromPreviewElement(i.svgSelected);
                                    e ? e.colorLibraryId && (i.selectedSVGProperties.canChangeColorLibrary = !1) : console.warn("No EPS element with ID " + i.selectedSVGProperties.id)
                                }
                                i.svgSelected = L.getActiveObject(),
                                i.selectedSVGProperties.position = i.svgSelected.selectedPosition,
                                i.selectedSVGProperties.colorPosition = i.svgSelected.selectedColorPosition,
                                P.updateLibraryNames(i, i.svgSelected),
                                l(),
                                i.svgSelected.on({
                                    modified: function() {
                                        l(),
                                        setTimeout((function() {
                                            i.$apply()
                                        }
                                        ))
                                    }
                                })
                            }
                            u((function() {
                                i.$apply()
                            }
                            ))
                        }
                        L.eventContainer && $("#" + L.eventContainer)[0].focus({
                            preventScroll: !0
                        })
                    };
                    if (L.on({
                        "object:added": function() {
                            i.updateLayers(),
                            i.isUserDesignCreation && !i.previewMode && Object(t["h"])(L.getObjects(), L, !0)
                        },
                        "object:removed": function() {
                            i.updateLayers()
                        },
                        "object:selected": function() {
                            i.isUserDesignCreation && !i.previewMode && Object(t["h"])(L.getObjects(), L, !0)
                        },
                        "object:modified": function(e) {
                            L.getActiveObjects().length > 1 && "activeSelection" === e.target.type ? (L.temporaryDiscardActiveObject(()=>{
                                const e = L.getObjects();
                                for (let n = 0; n < e.length; ++n) {
                                    if (e[n].updateFromGroupScaling(),
                                    "path-itext" === e[n].type) {
                                        var t = b.calculateCircularFontSizeFromDimensions(e[n].horizontalDiameter, e[n].originalHorizontalDiameter, e[n].originalFontSize);
                                        e[n].set("fontSize", t)
                                    } else if ("bounded-text" === e[n].type) {
                                        var i = b.calculateFontSizesFromObject(e[n]);
                                        e[n].setMinSizePx(i.min),
                                        e[n].setMaxSizePx(i.max)
                                    }
                                    L.renderAll(),
                                    e[n].updateFromGroupScaling()
                                }
                            }
                            ),
                            L.renderAll()) : i.updateLayers()
                        },
                        "selection:created": R,
                        "selection:updated": R,
                        "selection:cleared": function(e) {
                            i.textFillColorPicker.terminate(),
                            i.textOutlineColorPicker.terminate(),
                            i.textCircularFillColorPicker.terminate(),
                            i.imageColorPicker.terminate(),
                            i.svgColorPicker.terminate(),
                            i.textSelected = null,
                            i.imageSelected = null,
                            i.svgSelected = null,
                            i.hasSelectedElement = !1,
                            u((function() {
                                i.$apply()
                            }
                            )),
                            i.setLayersActiveItem(null, !!e.e)
                        },
                        "mouse:up": function(e) {
                            i.isUserDesignCreation && L.getActiveObject() && L.getObjects() && 0 !== L.getActiveObject().length && L.getActiveObject().length !== L.getObjects().length && !i.previewMode && Object(t["h"])(L.getObjects(), L, !0)
                        },
                        "mouse:down": function(e) {
                            i.colorSamplerActive && v.processColorSelection(e.e, (function(e, t, n) {
                                var o = "#" + e.getColor("HEX");
                                if ("fill" === t)
                                    "bounded-text" === n.type || "path-itext" === n.type ? (n.setColor ? n.setColor(o) : n.set("fill", o),
                                    d.saveFontColorToOption(e.getColors(), n, i.editMode),
                                    L.setActiveObject(n)) : "image-placeholder" === n.type && (z = !0,
                                    i.imageColorSave(e.getColors(), n));
                                else if ("outline" === t && ("bounded-text" === n.type || "path-itext" === n.type)) {
                                    if ("bounded-text" === n.type) {
                                        o = e.getColor();
                                        n.outlineColor = d.createColorObj({
                                            hex: "#" + o.HEX,
                                            cmyk: `${o.cmyk.c},${o.cmyk.m},${o.cmyk.y},${o.cmyk.k}`
                                        })
                                    }
                                    n.setOutlineColor ? (n.setOutlineColor(o),
                                    L.renderAll()) : n.set("stroke", o),
                                    L.setActiveObject(n)
                                }
                                i.colorSamplerActive = !1
                            }
                            ))
                        }
                    }),
                    i.previewMode && (L.selection = !1,
                    L.setArtworkSize(s.getProduct().preview.width, s.getProduct().preview.height),
                    i.$on("updateText:stepTwo", (function(e, t) {
                        const n = L.getObjects().filter(e=>e.id === t.id && ("bounded-text" === e.type || "path-itext" === e.type));
                        for (const o of n)
                            i.updateText(t.text, o)
                    }
                    )),
                    i.$on("updateTextFont:stepTwo", (function(e, t) {
                        const i = L.getObjects().filter(e=>e.id === t.id && ("bounded-text" === e.type || "path-itext" === e.type));
                        for (const n of i)
                            d.changeFontOption(n, t.fontOption, L)
                    }
                    )),
                    i.$on("updateTextFontColor:stepTwo", (function(e, t) {
                        const i = L.getObjects().filter(e=>e.id === t.id && ("bounded-text" === e.type || "path-itext" === e.type));
                        for (const n of i)
                            d.changeFontColorOption(null, n, t.fontColorOption, L)
                    }
                    )),
                    i.$on("updateDynamicElementOption:stepTwo", (function(e, t) {
                        const i = L.getObjects().filter(e=>e.id === t.id && ("image-placeholder" === e.type && e.dynamicImagesPath || "vector-placeholder" === e.type && !e.allowUserUpload));
                        for (const n of i)
                            "image-placeholder" === n.type ? C.showDynamicImage(L, n, t.option) : w.changeDynamicEPSPosition(n, t.option, L)
                    }
                    )),
                    i.$on("uploadImagePlaceholder:stepTwo", (async function(e, t) {
                        const n = t.file;
                        n && (i.selectedImageProperties.RemoveBackground || i.selectedImageProperties.cartoonize || i.selectedImageProperties.CutoutFace || i.selectedImageProperties.removeBackgroundCOP ? (i.imageSelected.imageFile = n,
                        i.selectedImageProperties.cartoonize && i.apiKeys.vanceAi && await i.cartoonize(),
                        i.selectedImageProperties.CutoutFace && i.apiKeys.cutoutPro && await i.faceCutout(!0),
                        i.selectedImageProperties.removeBackgroundCOP && i.apiKeys.cutoutPro && await i.faceCutout(!1),
                        i.selectedImageProperties.RemoveBackground && i.apiKeys.removeBg && i.removeBg()) : f.previewImageOnPlaceholder(n, L, t.id))
                    }
                    )),
                    i.$on("updateImageColorOption:stepTwo", (function(e, t) {
                        const i = L.getObjects().filter(e=>e.id === t.id && "image-placeholder" === e.type && !e.dynamicImagesPath && !e.fullColor && !e.grading);
                        for (const n of i)
                            C.changeDynamicImageColorPosition(n, t.colorOption, null, L)
                    }
                    )),
                    i.$on("updateVectorColorOption:stepTwo", (function(e, t) {
                        const i = L.getObjects().filter(e=>e.id === t.id && "vector-placeholder" === e.type && e.applyColoring);
                        for (const n of i)
                            w.changeDynamicEPSColorPosition(n, t.colorOption, null, L)
                    }
                    )),
                    i.$on("uploadVectorPlaceholder:stepTwo", (function(e, t) {
                        if (t.file) {
                            const e = L.getObjects().filter(e=>e.id === t.id && "vector-placeholder" === e.type && e.allowUserUpload);
                            for (const i of e)
                                w.loadFileOnPlaceholder(t.file, i, L)
                        }
                    }
                    )),
                    i.$on("canvas:previewImageRequest:stepTwo", (async function(e, t) {
                        let n = "";
                        i.deselectAll();
                        const o = t.size || 100
                          , r = await l.limitImageResolution(L.toDataURL(), o, o);
                        n = r.base64,
                        m.$broadcast("canvas:previewImageGenerated:stepTwo", {
                            dataUrl: n
                        })
                    }
                    )),
                    i.$on("canvas:select:stepTwo", (e,i)=>{
                        if (i.uuids) {
                            const e = L.getObjects().filter(e=>i.uuids.includes(e.uuid) || i.uuids.includes(e.zIndex));
                            e && Object(t["h"])(e, L, 1 === e.length)
                        }
                    }
                    )),
                    i.getCurrentElementTitle = function() {
                        if (L && L.getActiveObject) {
                            var e = L.getActiveObject();
                            return Object(t["e"])(e)
                        }
                        return ""
                    }
                    ,
                    i.deleteSelectedElements = function() {
                        L.removeSelection()
                    }
                    ,
                    i.onElementSelectedAlign = function(e) {
                        L.elementsSelectedAlign(e, i.elementAlignType)
                    }
                    ,
                    i.onElementAlingTypeChanged = function(e) {
                        i.elementAlignType = e
                    }
                    ,
                    i.addProductImageElement = e=>{
                        const t = ()=>{
                            const t = F.addProductColorElement(L, null, "Product images");
                            L.moveTo(t, t.zIndex),
                            L.setActiveObject(t, e);
                            const i = document.getElementById("uploadImageFile");
                            setTimeout(()=>i.click(), 10)
                        }
                          , i = L.getObjects().find(e=>e.isColorOptions);
                        i ? h.show(h.confirm().title("Alert").textContent("This product already has product images, creating a new product image will replace the existing one. Do you wish tio continue?").ok("Yes, Replace Images").cancel("Cancel")).then(()=>{
                            L.remove(i),
                            t()
                        }
                        ) : t()
                    }
                    ,
                    i.addMask = ()=>{
                        const e = i.addDynamicImage();
                        e.set("isOverlay", !0),
                        e.set("name", "Mask " + e.id),
                        e.setEditedProp("isOverlay"),
                        e.setEditedProp("name"),
                        L.renderAll()
                    }
                    ,
                    i.startBackgroundReplace = function(e) {
                        if (s.getPreviewImage() || i.backgroundImageFile) {
                            h.show(h.alert().parent(document.body).clickOutsideToClose(!1).title("Background Image Replace").htmlContent("The background image should be replaced with another of a similar size. Using a very different size can result in elements going outside of the preview, if thats the case, we recommend using the <b>Reset Preview</b> option.<br /><br /> The current image size is <b>" + L.getArtworkWidth() + "x" + L.getArtworkHeight() + " px</b>").ok("OK!"));
                            const t = _((function() {
                                $("md-dialog button").length && ($("md-dialog button").on("click", (function() {
                                    $(this).off("click"),
                                    angular.element(document.querySelector("#" + e)).trigger("click")
                                }
                                )),
                                _.cancel(t))
                            }
                            ), 100)
                        } else
                            O.showPickerDialog(null, "rgb").then(e=>{
                                i.replacedBackground = !0,
                                i.backgroundImageFile = null,
                                i.backgroundType = "color",
                                s.setPreviewImage(null),
                                L.setBackgroundColor(i.toRgbaString(e.HEX, e.alpha), ()=>{
                                    L.renderAll()
                                }
                                )
                            }
                            )
                    }
                    ,
                    i.replaceImage = function(e) {
                        if (e && e[0]) {
                            const t = new FileReader;
                            t.onload = function() {
                                let n = new Image;
                                n.onload = async function() {
                                    let t = e[0];
                                    if (n.width > i.MAX_IMAGE_SIZE || n.height > i.MAX_IMAGE_SIZE) {
                                        g.stop(),
                                        u(()=>i.$apply()),
                                        await h.show(h.alert().parent(document.body).clickOutsideToClose(!1).title("Large Image").htmlContent(`The image has a size of <b>${n.width}x${n.height} px</b> which can result in bad performance and slow loading times on your store! It will be scaled down!`).ok("OK!")),
                                        g.start("Uploading Image");
                                        const {base64: e} = await l.limitImageResolution(n, i.MAX_IMAGE_SIZE, i.MAX_IMAGE_SIZE);
                                        n = await l.getImageFromSrc(e),
                                        t = new File([await Object(r["a"])(n)],t.name)
                                    }
                                    L.setArtworkSize(n.width, n.height),
                                    i.backgroundImageFile = t,
                                    fabric.Image.fromURL(n.src, (function(e) {
                                        e.set({
                                            width: L.getArtworkWidth(),
                                            height: L.getArtworkHeight(),
                                            originX: "left",
                                            originY: "top"
                                        }),
                                        L.setBackgroundColor("white"),
                                        L.setBackgroundImage(e, L.renderAll.bind(L)),
                                        $("#inputFileReplace")[0].value = null,
                                        g.stop(),
                                        i.backgroundType = "image",
                                        i.replacedBackground = !0,
                                        u((function() {
                                            i.$apply()
                                        }
                                        ))
                                    }
                                    ))
                                }
                                ,
                                n.crossOrigin = "Anonymous",
                                n.src = t.result
                            }
                            ,
                            t.readAsDataURL(e[0]),
                            g.start("Uploading Image")
                        }
                    }
                    ,
                    i.setBackgroundColor = function(e, t, n) {
                        g.start("Loading Data"),
                        i.replacedBackground = !0,
                        i.backgroundImageFile = null,
                        i.backgroundType = "color",
                        s.setPreviewImage(null),
                        L.clear(),
                        L.setArtworkSize(e, t),
                        L.setBackgroundColor("string" === typeof n ? n : i.toRgbaString(i.bgColor.HEX, i.bgColor.alpha), (function() {
                            L.renderAll(),
                            i.backgroundReady = !0,
                            U(!0).then(()=>{
                                g.stop(),
                                u(()=>i.$apply())
                            }
                            )
                        }
                        ))
                    }
                    ,
                    i.resetPreview = function() {
                        const e = h.confirm().title("Preview Reset").textContent("Resetting the preview will reset all personalizable elements and bring them fresh from step 1. If you have made any adjustments to these elements on step 2, they will be reset. Also, all dynamic images on step 2, will be removed. Do you want to continue?").ok("Yes").cancel("No");
                        h.show(e).then(()=>{
                            i.backgroundReady = !1
                        }
                        )
                    }
                    ,
                    i.uploadImage = function(e) {
                        if (e && e[0]) {
                            i.backgroundReady = !1,
                            g.start("Uploading Image");
                            const t = new FileReader;
                            t.onload = function() {
                                let n = new Image;
                                n.onload = async function() {
                                    let t = e[0];
                                    if (n.width > i.MAX_IMAGE_SIZE || n.height > i.MAX_IMAGE_SIZE) {
                                        g.stop(),
                                        u(()=>i.$apply()),
                                        await h.show(h.alert().parent(document.body).clickOutsideToClose(!1).title("Large image").htmlContent(`The image has a size of <b>${n.width}x${n.height} px</b> which can result in bad performance and slow loading times on your store! It will be scaled down!`).ok("OK!"));
                                        const {base64: e} = await l.limitImageResolution(n, i.MAX_IMAGE_SIZE, i.MAX_IMAGE_SIZE);
                                        n = await l.getImageFromSrc(e),
                                        t = new File([await Object(r["a"])(n)],t.name)
                                    }
                                    g.stop(),
                                    g.start("Loading"),
                                    u(()=>i.$apply()),
                                    L.clear(),
                                    L.setArtworkSize(n.width, n.height),
                                    i.backgroundImageFile = t,
                                    fabric.Image.fromURL(n.src, (async function(e) {
                                        e.set({
                                            width: L.getArtworkWidth(),
                                            height: L.getArtworkHeight(),
                                            originX: "left",
                                            originY: "top"
                                        }),
                                        L.setBackgroundColor("white"),
                                        L.setBackgroundImage(e, L.renderAll.bind(L)),
                                        s.setPreviewBgColor(null),
                                        i.backgroundReady = !0,
                                        i.backgroundType = "image",
                                        $("#inputFile")[0].value = null,
                                        await U(!0),
                                        g.stop(),
                                        i.replacedBackground = !0,
                                        u(()=>i.$apply())
                                    }
                                    ))
                                }
                                ,
                                n.crossOrigin = "Anonymous",
                                n.src = t.result
                            }
                            ,
                            t.readAsDataURL(e[0])
                        }
                    }
                    ,
                    s.getPreviewImage() || s.getPreviewBgColor())
                        if (g.start("Loading Data"),
                        L.clear(),
                        L.setArtworkSize(s.getProduct().preview.width, s.getProduct().preview.height),
                        s.getPreviewImage()) {
                            console.log("Loading preview background image"),
                            i.backgroundType = "image";
                            const e = Object(o["a"])(s.getPreviewImage());
                            L.setBackgroundColor("white"),
                            fabric.Image.fromURL(e, e=>{
                                e.set({
                                    originX: "left",
                                    originY: "top"
                                }),
                                e.scaleToWidth(L.getArtworkWidth()),
                                L.setBackgroundImage(e, ()=>{
                                    L.renderAll(),
                                    i.backgroundReady = !0,
                                    U().then(()=>{
                                        g.stop(),
                                        u(()=>i.$apply())
                                    }
                                    )
                                }
                                , {
                                    originX: "left",
                                    originY: "top"
                                })
                            }
                            , {
                                crossOrigin: "anonymous"
                            })
                        } else
                            console.log("Loading preview background color"),
                            i.backgroundType = "color",
                            L.setBackgroundColor(s.getPreviewBgColor(), (function() {
                                L.renderAll(),
                                i.backgroundReady = !0,
                                U().then(()=>{
                                    i.layersInstance && (i.layersInstance.$children[0].singleGroupSelection(),
                                    i.deselectAll()),
                                    g.stop(),
                                    u(()=>i.$apply())
                                }
                                )
                            }
                            ));
                    else if (i.forProductTemplateCreation && s.getProductTemplatePreviewTargetSize()) {
                        const {width: e, height: t} = s.getProductTemplatePreviewTargetSize();
                        i.setBackgroundColor(e, t, "rgba(255, 255, 255, 1)")
                    }
                    function U(e) {
                        return new Promise(async(t,o)=>{
                            try {
                                const o = !e && (i.previewMode || i.editMode);
                                var r, a;
                                if (o)
                                    n["a"]({
                                        type: "info",
                                        category: "template.step2",
                                        message: "Loading elements on step 2 from saved elements",
                                        level: "info",
                                        data: {
                                            hasText: !(null === (r = s.getProduct().preview.textsPreview) || void 0 === r || !r.length),
                                            hasCircularText: !(null === (a = s.getProduct().preview.circularTextsPreview) || void 0 === a || !a.length),
                                            hasImagePlaceholders: (s.getProduct().preview.imagePlaceHoldersPreview || []).some(e=>!e.dynamicImagesPath),
                                            hasDynamicImages: (s.getProduct().preview.imagePlaceHoldersPreview || []).some(e=>e.dynamicImagesPath),
                                            hasVectorPlaceholder: (s.getProduct().preview.vectorEPSPreview || []).some(e=>e.allowUserUpload),
                                            hasDynamicVector: (s.getProduct().preview.vectorEPSPreview || []).some(e=>!e.allowUserUpload)
                                        }
                                    });
                                else
                                    n["a"]({
                                        type: "info",
                                        category: "template.step2",
                                        message: "Loading elements on step 2 from step 1",
                                        level: "info"
                                    });
                                i.fonts = c.getLoadedFonts();
                                const d = e || !i.previewMode && !i.editMode ? JSON.parse(JSON.stringify(s.getProduct().eps.imagePlaceHoldersEps)) : s.getProduct().preview.imagePlaceHoldersPreview;
                                if (e || !i.previewMode && !i.editMode) {
                                    const e = (s.getProduct().eps.imagePlaceHoldersEps || []).filter(e=>e.dynamicImagesPath);
                                    e.length && (n["a"]({
                                        type: "info",
                                        category: "template.step2",
                                        message: "Checking images size",
                                        level: "info"
                                    }),
                                    await C.limitDynamicImageFileSizes(e, (d || []).filter(e=>e.dynamicImagesPath), i.MAX_IMAGE_SIZE));
                                    const t = (s.getProduct().eps.imagePlaceHoldersEps || []).filter(e=>!e.dynamicImagesPath && e.maskPath);
                                    t.length && (n["a"]({
                                        type: "info",
                                        category: "template.step2",
                                        message: "Checking mask images size",
                                        level: "info"
                                    }),
                                    await l.limitMaskImagesSize(t, (d || []).filter(e=>!e.dynamicImagesPath && e.maskPath), i.MAX_IMAGE_SIZE))
                                }
                                console.log(`Artwork size is ${L.getArtworkWidth()}x${L.getArtworkHeight()}px`);
                                const p = e || !i.previewMode && !i.editMode
                                  , h = p ? s.getProduct().eps.textsEps : s.getProduct().preview.textsPreview
                                  , g = p ? s.getProduct().eps.circularTextsEps : s.getProduct().preview.circularTextsPreview
                                  , f = p ? s.getProduct().eps.vectorEPSEps : s.getProduct().preview.vectorEPSPreview
                                  , v = p ? s.getGroups().filter(e=>"eps" === e.type) : s.getGroups().filter(e=>"preview" === e.type)
                                  , b = s.getChildTemplateProduct();
                                await F.loadStep2IntoCanvas(L, i.fonts, i.previewMode, m.user.Username, h, g, d, f, p, s.getNeedColorsUpgrade(), i.forProductTemplateCreation, s.getPreviewColorOptionsMetadata(), v, i.forMyProductBases, b && b.parentId),
                                i.layersInstance && (i.layersInstance.$children[0].updateGroupsFromCanvas(),
                                i.layersInstance.$children[0].singleGroupSelection()),
                                i.deselectAll(),
                                i.updateLayers(),
                                u(()=>{
                                    i.$apply()
                                }
                                ),
                                t()
                            } catch (error) {
                                console.error(error),
                                o(error)
                            }
                        }
                        )
                    }
                    i.deselectAll = function() {
                        L.discardActiveObject().renderAll(),
                        i.textSelected = null,
                        i.imageSelected = null
                    }
                    ,
                    i.uploadImagesOnPlaceholder = function(e, t) {
                        return new Promise((n,o)=>{
                            i.$apply((async function() {
                                const o = [];
                                let r = !1;
                                if (t)
                                    o.push(e.files[0]);
                                else {
                                    for (const t of e.files) {
                                        const e = await l.limitImageResolutionFromFile(t, i.MAX_IMAGE_SIZE, i.MAX_IMAGE_SIZE);
                                        r = r || e.resized,
                                        o.push(e.file)
                                    }
                                    r && await h.show(h.alert().parent(document.body).clickOutsideToClose(!1).title("Large Images").htmlContent(`At least one image has a size bigger than <b>${i.MAX_IMAGE_SIZE} px</b> which can result in bad performance and slow loading times on your store! It will be scaled down!`).ok("OK!"))
                                }
                                i.imageSelected.imageFile = o[0],
                                await x.uploadMultipleImages(i, L, o),
                                i.selectedImageProperties.cartoonize && i.apiKeys.vanceAi && await i.cartoonize(),
                                i.selectedImageProperties.CutoutFace && i.apiKeys.cutoutPro && await i.faceCutout(!0),
                                i.selectedImageProperties.removeBackgroundCOP && i.apiKeys.cutoutPro && await i.faceCutout(!1),
                                i.selectedImageProperties.RemoveBackground && i.apiKeys.removeBg && i.removeBg(),
                                e.value = null,
                                n()
                            }
                            ))
                        }
                        )
                    }
                    ,
                    i.addDynamicImage = function(e) {
                        const t = C.createDynamicImage(L, i.getLastObjectId() + 1);
                        return t.addedOnEdit = !1,
                        i.editMode && (t.addedOnEdit = !0),
                        L.add(t),
                        L.setActiveObject(t, e),
                        t
                    }
                    ,
                    i.saveDynamicImageToPlaceholder = function(e, t) {
                        C.saveDynamicImageToPlaceholder(e, t, L)
                    }
                    ,
                    i.changeVariation = function() {
                        var e;
                        (C.showDynamicImage(L, L.getActiveObject(), i.selectedImageProperties.dynamicImageVariation),
                        E.getCurrentFlow() == E.OptionBPart9 && 2 == i.selectedImageProperties.dynamicImageVariation) && (null === (e = window.Appcues) || void 0 === e || e.show(E.OptionBPart10))
                    }
                    ,
                    i.convertVectorEPSOverlay = function(e) {
                        var t = i.addDynamicImage();
                        t.id = e.id,
                        t.uuid = e.uuid,
                        L.remove(e),
                        L.discardActiveObject().renderAll(),
                        L.setActiveObject(t),
                        $("form[name='imageForm'] [input-id='inputFileTest']").click()
                    }
                    ,
                    i.changeFontOption = function() {
                        d.changeFontOptionPreview(L.getActiveObject(), i.selectedTextProperties.fontOption, L)
                    }
                    ,
                    i.changeFontColorOption = function() {
                        d.changeFontColorOption(i.textFillColorPicker, i.textSelected, i.selectedTextProperties.fontColorOption, L)
                    }
                    ,
                    i.changeCircularTextFontColorOption = function() {
                        d.changeFontColorOption(i.textCircularFillColorPicker, i.textSelected, i.selectedTextProperties.fontColorOption, L)
                    }
                    ,
                    i.changeFontTexture = function(e, t) {
                        "null" === e && (e = null),
                        S.changeFontTexture(e, t, 1).then(()=>{
                            L.renderAll()
                        }
                        )
                    }
                    ,
                    i.changeDynamicEPSPosition = function() {
                        w.changeDynamicEPSPosition(L.getActiveObject(), i.selectedSVGProperties.position, L)
                    }
                    ,
                    i.changeDynamicEPSColorPosition = function() {
                        w.changeDynamicEPSColorPosition(L.getActiveObject(), i.selectedSVGProperties.colorPosition, i.svgColorPicker, L)
                    }
                    ,
                    i.changeDynamicImageColorPosition = function() {
                        C.changeDynamicImageColorPosition(L.getActiveObject(), i.selectedImageProperties.colorPosition, i.imageColorPicker, L)
                    }
                    ,
                    i.removeBg = function() {
                        g.start("Removing background"),
                        I.removeBackground(i.apiKeys.removeBg, i.imageSelected.imageFile).then(e=>{
                            i.imageSelected.imageFile = e,
                            x.uploadMultipleImages(i, L, [e]),
                            g.stop()
                        }
                        ).catch(e=>{
                            window.rumReportError(e),
                            u(()=>i.$apply()),
                            g.stop(),
                            h.show(h.alert().parent(document.body).clickOutsideToClose(!0).title("Remove.bg Error: " + e.statusText).textContent("Configuration is saved! But image without background it is not shown in the placeholder").ok("OK!"))
                        }
                        )
                    }
                    ,
                    i.cartoonize = ()=>(g.start("Applying filter"),
                    D.cartoonizeImage(i.apiKeys.vanceAi, i.imageSelected.imageFile).then(e=>{
                        i.imageSelected.imageFile = e,
                        x.uploadMultipleImages(i, L, [e]),
                        g.stop()
                    }
                    ).catch(e=>{
                        window.rumReportError(e),
                        u(()=>i.$apply()),
                        g.stop(),
                        h.show(h.alert().parent(document.body).clickOutsideToClose(!0).title("VanceAI Error!").textContent(e.msg || e || "There seems to be an error with your VanceAI account, so the filter could not be applied to the image.").ok("OK!"))
                    }
                    )),
                    i.faceCutout = function(e) {
                        M.faceCutout(i, L, e)
                    }
                    ,
                    i.templateProductColorHasDynamicImages = ()=>{
                        const e = s.getProduct().preview.imagePlaceHoldersPreview.find(e=>e.isColorOptions);
                        if (e && JSON.parse(e.dynamicImagesPath).length)
                            return !0;
                        const t = i.forMyProductBases ? {
                            title: "Alert",
                            msg: "We cant find any produt images. Please make sure you upload your product images before moving forward"
                        } : {
                            title: "Please upload image on " + e.name,
                            msg: "Upload at least 1 image"
                        };
                        return h.show(h.alert().parent(document.body).clickOutsideToClose(!0).title(t.title).textContent(t.msg).ok("OK!")),
                        !1
                    }
                    ,
                    i.goToStep3 = async function() {
                        g.start("Saving data"),
                        n["a"]({
                            type: "info",
                            category: "template.step2",
                            message: "Going to step 3",
                            level: "info"
                        }),
                        await F.saveStep2(L, i.isManagedUser, i.editMode, i.replacedBackground, i.backgroundImageFile, i.backgroundType),
                        g.stop(),
                        i.forProductTemplateCreation && !i.templateProductColorHasDynamicImages() || (i.isUserDesignCreation ? p.path("/createProduct3").search({
                            forUserDesignCreation: "true",
                            flowId: p.search().flowId
                        }) : p.path("/createProduct3"),
                        u(()=>i.$apply()))
                    }
                    ,
                    i.displaySVGOnPlaceholder = async function(e) {
                        e && e[0] && (await w.loadFileOnPlaceholder(e[0], L.getActiveObject(), L),
                        u(()=>i.$apply()))
                    }
                    ,
                    i.updateText = function(e, t) {
                        y.updateTexts(e, t, L),
                        i.selectedTextProperties.currentFontSize = fabric.util.pxToPt(t.getFontSize && t.getFontSize()),
                        i.selectedTextProperties.text = t.getText ? t.getText() : t.text
                    }
                    ,
                    i.updateCenterX = function(e, t) {
                        t.set("left", e),
                        t.setCoords(),
                        L.renderAll()
                    }
                    ,
                    i.updateCenterY = function(e, t) {
                        t.set("top", e),
                        t.setCoords(),
                        L.renderAll()
                    }
                    ,
                    i.updateRotation = function(e, t) {
                        t.set("angle", e),
                        t.setCoords(),
                        L.renderAll()
                    }
                    ,
                    i.updateMinSizePx = function(e, t) {
                        t.setMinSizePx(e),
                        L.renderAll()
                    }
                    ,
                    i.updateMaxSizePx = function(e, t) {
                        t.setMaxSizePx(e),
                        L.renderAll()
                    }
                    ,
                    i.updateOpacity = function(e, t) {
                        t.setOpacity(e),
                        L.renderAll()
                    }
                    ,
                    i.updateSkewX = function(e, t) {
                        t.set("skewX", e),
                        t.setCoords(),
                        L.renderAll()
                    }
                    ,
                    i.updateSkewY = function(e, t) {
                        t.set("skewY", e),
                        t.setCoords(),
                        L.renderAll()
                    }
                    ,
                    i.updateHeight = function(e, t, n) {
                        if (e) {
                            var o = t.width * t.scaleX / (t.height * t.scaleY);
                            "path-itext" === t.type ? (o = t.horizontalDiameter * t.scaleX / (t.verticalDiameter * t.scaleY),
                            t.set("verticalDiameter", e)) : t.setHeight ? t.setHeight(e) : t.set("height", e / t.scaleY),
                            t.setCoords(),
                            i.editMode && (t.editedSize = !0),
                            n && (i.updateWidth(o * e, t),
                            t.trigger("modified", {
                                target: t
                            })),
                            L.renderAll()
                        }
                    }
                    ,
                    i.updateWidth = function(e, t, n) {
                        if (e) {
                            var o = t.width * t.scaleX / (t.height * t.scaleY);
                            "path-itext" === t.type ? (o = t.horizontalDiameter * t.scaleX / (t.verticalDiameter * t.scaleY),
                            t.set("horizontalDiameter", e)) : t.setWidth ? t.setWidth(e) : t.set("width", e / t.scaleX),
                            t.setCoords(),
                            i.editMode && (t.editedSize = !0),
                            n && (i.updateHeight(e / o, t),
                            t.trigger("modified", {
                                target: t
                            })),
                            L.renderAll()
                        }
                    }
                    ,
                    i.updateZIndex = function(e, t) {
                        e < 0 ? e = 0 : e > L.getObjects().length - 1 && (e = L.getObjects().length - 1),
                        t.zIndex = e,
                        L.moveTo(t, e),
                        L.renderAll(),
                        i.updateLayers()
                    }
                    ,
                    i.updateOutlineWidth = function(e, t) {
                        "bounded-text" === t.type ? (t.set("outlineWidth", e),
                        i.selectedTextProperties.currentFontSize = fabric.util.pxToPt(t.getFontSize())) : "path-itext" === t.type && t.set("strokeWidth", e),
                        L.renderAll()
                    }
                    ;
                    var z = !1
                      , N = e.debounce((function(e, t) {
                        !z && t && (t.set("imageColor", "#" + e.HEX),
                        L.renderAll()),
                        z = !1
                    }
                    ), 300);
                    i.imageColorChange = function(e, t) {
                        t && i.imageSelected ? (i.imageSelected.set("imageColor", "#" + e.HEX),
                        L.renderAll()) : N(e, i.imageSelected)
                    }
                    ,
                    i.imageColorSave = function(e, t) {
                        t = t || i.imageSelected,
                        t && (C.saveDynamicImageColor(e, t, i.editMode),
                        t.set("imageColor", "#" + e.HEX),
                        L.renderAll())
                    }
                    ,
                    i.textFillColorChange = function(e) {
                        i.textSelected && (i.textSelected.setColor(T.colorToWeb(e)),
                        L.renderAll())
                    }
                    ,
                    i.textFillColorSave = function(e) {
                        i.textSelected && (i.textSelected.setColor(T.colorToWeb(e)),
                        i.selectedTextProperties.color = T.colorToWeb(e),
                        L.renderAll(),
                        d.saveFontColorToOptionPreview(e, L.getActiveObject(), i.editMode))
                    }
                    ,
                    i.textOutlineColorChange = function(e) {
                        i.textSelected && (i.textSelected.setOutlineColor(T.colorToWeb(e)),
                        L.renderAll())
                    }
                    ,
                    i.textOutlineColorSave = function(e) {
                        if (i.textSelected) {
                            const t = T.colorToWeb(e);
                            i.textSelected.setOutlineColor(t),
                            i.textSelected.outlineColor = t,
                            L.renderAll()
                        }
                    }
                    ,
                    i.textCircularColorFillChange = function(e) {
                        i.textSelected && (i.textSelected.set("fill", T.colorToWeb(e)),
                        L.renderAll())
                    }
                    ,
                    i.textCircularColorFillSave = function(e) {
                        i.textSelected && (i.textSelected.set("fill", T.colorToWeb(e)),
                        L.renderAll(),
                        d.saveFontColorToOptionPreview(e, L.getActiveObject(), i.editMode))
                    }
                    ,
                    i.startFillColorSampler = function(e) {
                        i.colorSamplerActive = !0,
                        v.startColorSampler(L, e, L.getActiveObject(), "fill")
                    }
                    ,
                    i.startOutlineColorSampler = function(e) {
                        i.colorSamplerActive = !0,
                        v.startColorSampler(L, e, L.getActiveObject(), "outline")
                    }
                    ,
                    i.svgColorChange = function(e) {
                        i.svgSelected && (i.svgSelected.set("svgColor", T.colorToWeb(e)),
                        L.renderAll())
                    }
                    ,
                    i.svgColorSave = function(e) {
                        i.svgSelected && (i.svgSelected.set("svgColor", T.colorToWeb(e)),
                        w.saveDynamicEPSColor(e, L.getActiveObject(), i.editMode),
                        L.renderAll())
                    }
                    ,
                    i.getLastObjectId = function() {
                        for (var e = L.getObjects(), t = 0, i = 0; i < e.length; ++i)
                            t = Math.max(t, e[i].id);
                        return t
                    }
                    ,
                    i.updateId = function(e, t) {
                        e && (t.id = e)
                    }
                    ,
                    i.$on("$destroy", (function() {
                        console.log("Cleaning up resources from step 2"),
                        i.bgColorPickerCtrlMethods.destroy(),
                        i.textFillColorPicker.destroy(),
                        i.textOutlineColorPicker.destroy(),
                        i.textCircularFillColorPicker.destroy(),
                        i.imageColorPicker.destroy(),
                        i.svgColorPicker.destroy(),
                        g.stop(),
                        L && (L.dispose(),
                        $("#fabric-container-2").remove())
                    }
                    )),
                    i.pickColorLibrary = async function(e) {
                        P.showColorLibraryPicker().then((function(t) {
                            t && (e.colorLibraryId = t.LibraryId,
                            "bounded-text" === e.type ? (i.selectedTextProperties.fontColorOption = 1,
                            d.changeFontColorOption(i.textFillColorPicker, e, i.selectedTextProperties.fontColorOption, L)) : "path-itext" === e.type ? (i.selectedTextProperties.fontColorOption = 1,
                            d.changeFontColorOption(i.textCircularFillColorPicker, e, i.selectedTextProperties.fontColorOption, L)) : "vector-placeholder" === e.type ? (i.selectedSVGProperties.colorPosition = 1,
                            w.changeDynamicEPSColorPosition(e, 1, i.svgColorPicker, L)) : "image-placeholder" === e.type && (i.selectedImageProperties.colorPosition = 1,
                            C.changeDynamicImageColorPosition(e, 1, i.imageColorPicker, L)),
                            k.getLibraryName(t.LibraryId).then((function(e) {
                                i.selectedColorLibraryName = e
                            }
                            )))
                        }
                        ))
                    }
                    ,
                    i.removeColorLibrary = function(e) {
                        e.colorLibraryId = null,
                        "bounded-text" === e.type ? (i.selectedTextProperties.fontColorOption = 1,
                        d.changeFontColorOption(i.textFillColorPicker, e, i.selectedTextProperties.fontColorOption, L)) : "path-itext" === e.type ? (i.selectedTextProperties.fontColorOption = 1,
                        d.changeFontColorOption(i.textCircularFillColorPicker, e, i.selectedTextProperties.fontColorOption, L)) : "vector-placeholder" === e.type ? (i.selectedSVGProperties.colorPosition = 1,
                        w.changeDynamicEPSColorPosition(e, 1, i.svgColorPicker, L)) : "image-placeholder" === e.type && (i.selectedImageProperties.colorPosition = 1,
                        C.changeDynamicImageColorPosition(e, 1, i.imageColorPicker, L))
                    }
                    ,
                    i.pickImageLibrary = async function(e) {
                        P.showImageLibraryPicker().then((function(t) {
                            t && (e.imageLibraryId = t.LibraryId,
                            "image-placeholder" === e.type && (i.selectedImageProperties.dynamicImageVariation = 1,
                            C.showDynamicImage(L, e, 1)),
                            k.getLibraryName(t.LibraryId).then((function(e) {
                                i.selectedImageLibraryName = e
                            }
                            )))
                        }
                        ))
                    }
                    ,
                    i.removeImageLibrary = function(e) {
                        e.imageLibraryId = null,
                        "image-placeholder" === e.type && (i.selectedImageProperties.dynamicImageVariation = 1,
                        C.showDynamicImage(L, e, 1))
                    }
                    ,
                    i.previewMode || i.$on("$locationChangeStart", (function(e, t, i) {
                        t.includes("/createProduct") || confirm("You're about to exit the template. This means all changes will be lost, do you want to continue?") || (e.preventDefault(),
                        s.clearChildTemplateProduct(),
                        p.url(p.path()))
                    }
                    ))
                }
                i.$inject = ["$scope", "ProductService", "ImageUtilService", "FontManagerService", "MultipleFontService", "$timeout", "$location", "$mdDialog", "$rootScope", "blockUI", "TestImageService", "ColorSamplerService", "GeneralMathUtils", "TextService", "DynamicVectorService", "DynamicImageService", "MultipleFileUploadService", "TextureService", "LibrariesUtilService", "LibrariesAPIService", "$interval", "ConfigService", "ElementsColorService", "AppCuesService", "ColorPickerModalService", "RemoveBgAPIService", "ImageFiltersAPIService", "PreviewUtilService", "CutoutProUtilService"],
                angular.module("app.ctrls").controller("CreateStepTwoCtrl", i)
            }
            )()
        }
        .call(this, i("c46f"))
    },
    "51de": function(e, t) {
        (function() {
            CanvasRenderingContext2D.prototype.textOverflow = "",
            CanvasRenderingContext2D.prototype.textJustify = !1;
            var e = []
              , t = CanvasRenderingContext2D.prototype.save;
            function i(e, t) {
                for (var i = 0, n = t.length - 1; n >= 0; --n) {
                    var o = _measureTextOpentype.call(e, t[n]).width;
                    i += o
                }
                return i
            }
            function n(e, t, i, n, o, r, a, s, l) {
                a = e.atanTan(a, n, o),
                s = e.atanTan(s, n, o),
                e.ellipse(t, i, n, o, r, a, s, l)
            }
            CanvasRenderingContext2D.prototype.save = function() {
                e.push({
                    textOverflow: this.textOverflow,
                    textJustify: this.textJustify
                }),
                t.call(this)
            }
            ;
            var o = CanvasRenderingContext2D.prototype.restore;
            CanvasRenderingContext2D.prototype.restore = function() {
                o.call(this);
                var t = e.pop();
                this.textOverflow = t.textOverflow,
                this.textJustify = t.textJustify
            }
            ,
            CanvasRenderingContext2D.prototype.textPath = function(e, t) {
                this.pathWidth > 0 && (this.save(),
                this.beginPath(),
                this.strokeStyle = "rgba(0, 0, 0, 0.3)",
                this.lineWidth = this.pathWidth,
                n(this, 0, 0, this.a, this.b, 0, fabric.util.degreesToRadians(this.endAngle - 90), fabric.util.degreesToRadians(this.startAngle - 90), this.convex),
                this.stroke(),
                this.beginPath(),
                this.strokeStyle = this.pathColor,
                this.lineWidth = this.pathWidth,
                n(this, 0, 0, this.a, this.b, 0, fabric.util.degreesToRadians(this.startAngle - 90), fabric.util.degreesToRadians(this.endAngle - 90), this.convex),
                this.stroke(),
                this.restore());
                var o = this.pathLength;
                if (!(o < 0)) {
                    if ("visible" != this.textOverflow && this.maxTextArcLength < i(this, e)) {
                        var r = "ellipsis" == this.textOverflow ? "" : this.textOverflow || "";
                        do {
                            e = e.slice(0, -1)
                        } while (e && this.maxTextArcLength < i(this, e));
                        e += r
                    }
                    var a = -o / 4
                      , s = 0
                      , l = !1
                      , c = !1;
                    if (a += this.startArcOffset,
                    this.textJustify) {
                        var d = this.maxTextArcLength
                          , u = i(this, e);
                        if (d && u < d) {
                            l = !0;
                            var p = d - u
                              , h = e.match(/\s+/g);
                            h ? s = p / h.length : (c = !0,
                            s = p / (e.length - 1))
                        }
                    } else {
                        u = i(this, e);
                        "right" === this.textAlign ? a = this.convex ? a + this.maxTextArcLength - u : a - this.maxTextArcLength + u : "center" === this.textAlign && (this.convex ? (a += this.maxTextArcLength / 2,
                        a -= u / 2) : a -= (this.maxTextArcLength - u) / 2)
                    }
                    a = this.wrapDistanceAroundPath(a, o);
                    var m = [];
                    if (this.convex)
                        for (g = !1,
                        f = 0; f < e.length; ++f) {
                            v = e[f],
                            b = _measureTextOpentype.call(this, v),
                            y = b.width;
                            0 === f && (a = this.wrapDistanceAroundPath(a, o)),
                            l && (g || c && 0 !== f) && (a += s,
                            g = !1),
                            l && d && /[ \t\r]/.test(v) && (g = !0);
                            w = a;
                            w = this.wrapDistanceAroundPath(w, o - 1e-5);
                            C = t.getPointAtLength(w),
                            x = this.wrapDistanceAroundPath(w + y / 2, o),
                            S = this.wrapDistanceAroundPath(w + y / 2 + 1e-5, o),
                            P = t.getPointAtLength(x),
                            k = t.getPointAtLength(S),
                            _ = Math.atan2(P.y - k.y, P.x - k.x);
                            this.save(),
                            this.textAlign = "center",
                            this.translate(C.x, C.y),
                            this.rotate(_),
                            this.rotate(Math.PI),
                            _fillTextOpentype.call(this, v, 0, 0),
                            m.push({
                                path: this.lastDrawnData.paths[0],
                                x: C.x,
                                y: C.y,
                                angle: _ + Math.PI
                            }),
                            this.restore(),
                            a += y
                        }
                    else
                        for (var g = !1, f = 0; f < e.length; ++f) {
                            var v = e[f]
                              , b = _measureTextOpentype.call(this, v)
                              , y = b.width;
                            l && (g || c && 0 !== f) && (a -= s,
                            g = !1),
                            l && d && /[ \t\r]/.test(v) && (g = !0);
                            var w = this.wrapDistanceAroundPath(a, o - 1e-5)
                              , C = t.getPointAtLength(w)
                              , x = this.wrapDistanceAroundPath(w - y / 2, o)
                              , S = this.wrapDistanceAroundPath(w - y / 2 + 1e-5, o)
                              , P = t.getPointAtLength(x)
                              , k = t.getPointAtLength(S)
                              , _ = Math.atan2(P.y - k.y, P.x - k.x);
                            this.save(),
                            this.textAlign = "center",
                            this.translate(C.x, C.y),
                            this.rotate(_),
                            _fillTextOpentype.call(this, v, 0, 0),
                            m.push({
                                path: this.lastDrawnData.paths[0],
                                x: C.x,
                                y: C.y,
                                angle: _
                            }),
                            this.restore(),
                            a -= y
                        }
                    return m
                }
            }
        }
        )()
    },
    5288: function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("bb01");
        (function() {
            function e(e) {
                async function t(t, i, o, r, a) {
                    const s = await e.getVectorUploadS3SignedUrl(i, t.name || "");
                    await Object(n["a"])(s.SignedUrl, s.Mime, t, null, e=>{
                        a && a("upload", e)
                    }
                    ),
                    a && a("process", 0);
                    const l = await e.validateVectorFile(i, s.Name, o, r);
                    return a && a("process", 100),
                    l
                }
                async function i(t, i) {
                    const o = await e.getVectorUploadS3SignedUrl("vector", t.name || "");
                    await Object(n["a"])(o.SignedUrl, o.Mime, t, null, e=>{
                        i && i("upload", e)
                    }
                    ),
                    i && i("process", 0);
                    const r = await e.epsFileToSvgString(o.Name);
                    return i && i("process", 100),
                    r
                }
                return {
                    uploadVectorToS3: t,
                    getSvgPathFromEpsFile: i
                }
            }
            e.$inject = ["VectorAPIService"],
            angular.module("app.shared.services").service("VectorUtilService", e)
        }
        )()
    },
    "52b9": function(e, t, i) {
        "use strict";
        i.r(t),
        function() {
            function e(e, t, i, n, o) {
                e.showHeader = !1,
                t.user = "",
                t.password = "",
                t.navigate = function(e) {
                    i.path(e)
                }
                ,
                t.signInLocal = function() {
                    $.trim(t.user).length > 0 && $.trim(t.password).length > 0 && (o.start(),
                    n.passwordLogin(t.user, t.password).then((function() {
                        o.stop()
                    }
                    )).catch((function(e) {
                        var t;
                        "The email or password you entered is incorrect" !== (null === e || void 0 === e || null === (t = e.data) || void 0 === t ? void 0 : t.error) && window.rumReportError(e),
                        o.stop()
                    }
                    )))
                }
                ,
                t.createUser = function() {
                    i.path("/signup")
                }
                ,
                t.forgotPassword = function() {
                    i.path("/forgotPassword")
                }
            }
            e.$inject = ["$rootScope", "$scope", "$location", "AuthService", "blockUI"],
            angular.module("app.ctrls").controller("SignInCtrl", e)
        }()
    },
    "54c6": function(e, t, i) {
        e.exports = i.p + "img/image-placeholder.06b9bf5b.svg?x-request=html"
    },
    5554: function(e, t) {
        var i = '<md-dialog class="vector-library-dialog" run-on-enter="create()"> <form name="resolutionForm"> <md-toolbar> <div class="md-toolbar-tools"> <h2>Add vector(s) to library</h2> <span flex></span> </div> </md-toolbar> <md-dialog-content style="max-width:800px;min-width:400px"> <md-content class="md-padding"> <div class="row" style="margin-right:15px;margin-left:15px"> <p ng-show="errorMessage" style="margin-bottom:30px;color:red">{{ errorMessage }}</p> <md-input-container class="md-block col-xs-6 col-xs-offset-3" style="margin-bottom:0"> <md-tooltip md-direction="bottom"> The position for retrieving the vector through the API </md-tooltip> <label>{{ filesToUpload.length > 1 ? \'Initial position\' : \'Vector position\' }}</label> <input required type="number" step="any" ng-model="vectorPosition" min="1" max="9999999" ng-disabled="element !== null"/> </md-input-container> <div class="clearfix"></div> <md-button class="md-raised col-xs-10 col-xs-offset-1" upload-file input-id="inputFileEPS" ng-disabled="uploadingVectorEPS"> <div ng-if="!uploadingVectorEPS">UPLOAD EPS(S)</div> <div id="uploadDynamicEPS" class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="inputFileEPS" type="file" accept=".eps" multiple="multiple" value="upload" custom-on-change="uploadEPS"/> </div> <div class="col-xs-12" style="text-align:center;padding:5px" ng-if="uploadingVectorEPS"> <md-progress-circular style="margin:auto" md-mode="determinate" value="{{ vectorEPSUploadPercent }}" md-diameter="30px"></md-progress-circular> </div> </md-button> <div class="svg-preview col-xs-10 col-xs-offset-1" ng-show="svgPath"> <img ng-src="{{ svgPath + \'?x-request=html\' }}"/> </div> <div class="col-xs-12" ng-show="filesToUpload.length > 1" style="text-align:center;margin-top:20px"> Selected {{ filesToUpload.length }} files to upload <br/> <b>Existing positions will be overwritten</b> </div> </div> </md-content> </md-dialog-content> <md-dialog-actions layout="row"> <md-button class="md-primary" ng-click="create()" ng-disabled="!filesToUpload.length && !svgPath"> {{ element === null ? \'Create Vector(s)\' : \'Update Vector\' }} </md-button> <md-button ng-click="cancel()"> Cancel </md-button> </md-dialog-actions> </form> </md-dialog> ';
        e.exports = i
    },
    "555b": function(e, t, i) {
        "use strict";
        i.d(t, "e", (function() {
            return o
        }
        )),
        i.d(t, "c", (function() {
            return r
        }
        )),
        i.d(t, "f", (function() {
            return a
        }
        )),
        i.d(t, "g", (function() {
            return s
        }
        )),
        i.d(t, "a", (function() {
            return l
        }
        )),
        i.d(t, "b", (function() {
            return c
        }
        )),
        i.d(t, "d", (function() {
            return d
        }
        ));
        var n = i("406d");
        const o = async(e,t,i,o,r,a)=>{
            const s = await n["a"].get("/Admin/Designs", {
                params: {
                    from: e,
                    count: t,
                    search: i,
                    sortBy: o,
                    sortMode: r,
                    byAdmin: !a
                }
            });
            return s.data
        }
          , r = async e=>{
            const t = await n["a"].get("/Admin/Designs/" + e);
            return t.data
        }
          , a = async(e,t)=>{
            const i = t ? "/Admin/Designs/" + t : "/Admin/Designs"
              , o = await n["a"].put(i, e);
            return o.data
        }
          , s = async(e,t)=>{
            const i = `/Admin/Designs/${t}/Update`
              , o = await n["a"].put(i, e);
            return o.data
        }
          , l = async e=>{
            const t = await n["a"].post(`/Admin/Designs/${e}/Clone`);
            return t.data
        }
          , c = async e=>{
            const t = await n["a"].delete("/Admin/Designs/" + e);
            return t.data
        }
          , d = ()=>n["a"].get("/DesignCategory").then(({data: e})=>e)
    },
    "55a7": function(e, t, i) {
        e.exports = i.p + "img/congrats.ada0162e.svg?x-request=html"
    },
    "56cf": function(e, t, i) {
        e.exports = i.p + "img/signInLogo.ed4ec9d9.png?x-request=html"
    },
    "56ea": function(e, t, i) {
        e.exports = i.p + "img/options.99445899.svg?x-request=html"
    },
    5735: function(e, t, i) {},
    "576f": function(e, t, i) {
        "use strict";
        i.d(t, "c", (function() {
            return l
        }
        )),
        i.d(t, "b", (function() {
            return c
        }
        )),
        i.d(t, "a", (function() {
            return d
        }
        )),
        i.d(t, "d", (function() {
            return u
        }
        ));
        var n = i("406d");
        const o = async(e,t)=>{
            const i = await n["a"].get("/Images/ImageUploadSignedUrl", {
                params: {
                    type: e,
                    format: t
                }
            });
            return i.data
        }
          , r = async()=>{
            const e = await n["a"].get("/Images/ProductThumbnail/SignedUrl");
            return e.data
        }
        ;
        var a = i("b421")
          , s = i("bb01");
        const l = e=>{
            if (!e)
                return "png";
            if (e.name) {
                const t = Object(a["b"])(e.name);
                if (t)
                    return t
            }
            if ("string" === typeof e && e.includes("data:image/")) {
                const t = e.substring("data:image/".length, e.indexOf(";base64"));
                return t
            }
            return "png"
        }
          , c = async e=>new Promise((t,i)=>{
            const n = e=>{
                if (e instanceof HTMLImageElement) {
                    const t = document.createElement("canvas")
                      , i = t.getContext("2d");
                    return t.height = e.height,
                    t.width = e.width,
                    null === i || void 0 === i || i.drawImage(e, 0, 0),
                    t
                }
                return e
            }
            ;
            if ("string" === typeof e) {
                const o = new Image;
                o.onload = ()=>{
                    t(n(o))
                }
                ,
                o.onerror = (e,t,n,o,r)=>{
                    i(r)
                }
                ,
                o.crossOrigin = "Anonymous",
                o.src = e
            } else
                t(n(e))
        }
        )
          , d = e=>new Promise(async(t,i)=>{
            try {
                if (e instanceof Blob || e instanceof File)
                    t(e);
                else {
                    const i = await c(e);
                    i.toBlob((function(e) {
                        t(e)
                    }
                    ))
                }
            } catch (error) {
                i(error)
            }
        }
        )
          , u = async(e,t,i)=>{
            const n = l(t);
            let a;
            a = "productThumb" !== e ? await o(e, n) : await r();
            const c = await d(t);
            if (c)
                return await Object(s["a"])(a.SignedUrl, a.Mime, c, a.CacheControl, i),
                a;
            throw new Error("Could not convert image to blob")
        }
    },
    5861: function(e, t, i) {
        e.exports = i.p + "img/align-top.cc63485b.svg?x-request=html"
    },
    "59c5": function(e, t) {
        fabric.SVGObject = fabric.util.createClass(fabric.Object, {
            type: "svg-object",
            svgString: "",
            svgColor: "",
            svgImage: null,
            coverMaskArea: !1,
            cacheProperties: fabric.Object.prototype.cacheProperties.concat("svgString", "svgImage", "svgColor"),
            _svgDoc: null,
            _svgHeight: 1,
            _svgWidth: 1,
            _colorFilter: null,
            _renderPromise: null,
            initialize: function(e) {
                this.callSuper("initialize", e),
                this._colorFilter = new fabric.Image.filters.BlendColor({
                    color: this.svgColor,
                    mode: "tint",
                    alpha: 1
                })
            },
            _loadImage: function(e) {
                return new Promise((t,i)=>{
                    const n = new Image;
                    n.onerror = function() {
                        i()
                    }
                    ,
                    n.onload = function() {
                        t(n)
                    }
                    ,
                    n.src = e
                }
                )
            },
            _loadSvgString: function(e) {
                const t = this;
                return new Promise(async(i,n)=>{
                    try {
                        if (e) {
                            let n = await this._loadImage("data:image/svg+xml," + encodeURIComponent(e));
                            n.style.opacity = 0,
                            n.style.position = "fixed",
                            document.body.appendChild(n),
                            t._svgHeight = n.naturalHeight,
                            t._svgWidth = n.naturalWidth,
                            document.body.removeChild(n);
                            const o = new DOMParser
                              , r = o.parseFromString(e, "image/svg+xml")
                              , a = r.getElementsByTagName("svg")[0];
                            if (t._svgDoc = r,
                            r && a) {
                                let e = a.getAttribute("width")
                                  , i = a.getAttribute("height");
                                if (!e || !i) {
                                    const o = a.viewBox.baseVal;
                                    o.width && o.height && (e = o.width,
                                    i = o.height,
                                    a.setAttribute("width", o.width + "px"),
                                    a.setAttribute("height", o.height + "px"),
                                    t._svgWidth = e,
                                    t._svgHeight = i,
                                    n = await this._loadImage("data:image/svg+xml," + encodeURIComponent((new XMLSerializer).serializeToString(r))))
                                }
                                const o = /[^\d.px]/;
                                e && i && !o.test(e) && !o.test(i) ? 0 === t._svgHeight && 0 === t._svgWidth && (t._svgWidth = parseFloat(e),
                                t._svgHeight = parseFloat(i)) : (t._svgWidth = null,
                                t._svgHeight = null)
                            } else
                                console.error("Error parsing SVG"),
                                t._svgWidth = null,
                                t._svgHeight = null;
                            t.svgImage = n,
                            t.set("dirty", !0),
                            t._applyCoverScale(),
                            t.canvas && t.canvas.renderAll(),
                            i()
                        } else
                            this.set("svgImage", null),
                            this.set("_svgDoc", null),
                            i()
                    } catch (o) {
                        console.error(o),
                        n(o)
                    }
                }
                )
            },
            _set: function(e, t) {
                if ("svgString" === e)
                    this._renderPromise = this._loadSvgString(t);
                else if ("svgImage" === e)
                    t && (this._svgWidth = t.width,
                    this._svgHeight = t.height);
                else if ("svgColor" === e) {
                    this.callSuper("_set", e, t);
                    var i = new fabric.Color(this.svgColor).getAlpha();
                    this.opacity = i
                }
                this.callSuper("_set", e, t)
            },
            _getSvgScalingToFit: function() {
                let e = 1;
                const t = this.width
                  , i = this.height;
                return this._svgHeight > this._svgWidth ? (e = i / this._svgHeight,
                this._svgWidth * e > t && (e = t / this._svgWidth)) : (e = t / this._svgWidth,
                this._svgHeight * e > i && (e = i / this._svgHeight)),
                e
            },
            _applyCoverScale: function() {
                if (this.coverMaskArea && this._svgWidth && this._svgHeight) {
                    const e = this._getSvgScalingToFit()
                      , t = this.width / (this._svgWidth * e)
                      , i = this.height / (this._svgHeight * e)
                      , n = Math.max(t, i);
                    this.set("scaleX", n),
                    this.set("scaleY", n)
                }
            },
            _render: function(e) {
                if (this.svgImage) {
                    if (this._svgDoc && null === this._svgHeight && null === this._svgWidth) {
                        const i = this._svgDoc.getElementsByTagName("svg")[0];
                        i.setAttribute("width", e.canvas.width + "px"),
                        i.setAttribute("height", e.canvas.height + "px"),
                        this._svgWidth = e.canvas.width,
                        this._svgHeight = e.canvas.height;
                        var t = (new XMLSerializer).serializeToString(this._svgDoc);
                        return void this.set("svgString", t)
                    }
                    const r = this._getSvgScalingToFit();
                    var i = -this._svgWidth * r / 2
                      , n = -this._svgHeight * r / 2;
                    if (e.translate(i, n),
                    e.scale(r, r),
                    e.drawImage(this.svgImage, 0, 0),
                    this.svgColor) {
                        this._colorFilter.color = this.svgColor;
                        var o = e.getImageData(0, 0, e.canvas.width, e.canvas.height);
                        this._colorFilter.applyTo2d({
                            imageData: o
                        }),
                        e.putImageData(o, 0, 0)
                    }
                }
            }
        })
    },
    "5ac8": function(e, t, i) {
        e.exports = i.p + "img/color.f0c215ad.svg?x-request=html"
    },
    "5ba5": function(e, t, i) {
        e.exports = i.p + "img/groupArrowOpen.9823bdd5.svg?x-request=html"
    },
    "5c58": function(e, t, i) {
        "use strict";
        i("33c1")
    },
    "5d2e": function(e, t, i) {
        (function(e) {
            (function() {
                function t(t, i) {
                    function n(e, t, i, n, o) {
                        let r = !1;
                        if (t < o || i < o) {
                            r = !0;
                            const n = Math.max(t / o, i / o)
                              , a = t / n
                              , s = i / n;
                            console.log("Scaling up canvas to: " + parseInt(a) + "x" + parseInt(s)),
                            e.setArtworkSize(a, s),
                            e.setZoom(1 / n),
                            e.fullVisibilityZoom = 1 / n,
                            t = a,
                            i = s
                        }
                        if (t > n || i > n) {
                            const o = Math.max(t / n, i / n)
                              , r = t / o
                              , a = i / o;
                            console.log("Scaling down canvas to: " + parseInt(r) + "x" + parseInt(a)),
                            e.setArtworkSize(r, a),
                            e.setZoom(1 / o),
                            e.fullVisibilityZoom = 1 / o
                        } else
                            r || (e.setZoom(1),
                            e.setArtworkSize(t, i),
                            e.fullVisibilityZoom = 1)
                    }
                    function o(n, o, r=!1) {
                        n.discardActiveObject();
                        const a = e=>e.left - (e.getWidth ? e.getWidth() : e.width) / 2
                          , s = e=>e.left + (e.getWidth ? e.getWidth() : e.width) / 2
                          , l = e=>e.top - (e.getHeight ? e.getHeight() : e.height) / 2
                          , c = e=>e.top + (e.getHeight ? e.getHeight() : e.height) / 2
                          , d = a(e.min(o, a))
                          , u = s(e.max(o, s))
                          , p = l(e.min(o, l))
                          , h = c(e.max(o, c))
                          , m = (u + d) / 2
                          , g = (h + p) / 2
                          , f = m * n.getArtworkWidth() / t.getProduct().eps.width
                          , v = g * n.getArtworkHeight() / t.getProduct().eps.height
                          , b = new fabric.Group(o,{
                            originX: "center",
                            originY: "center",
                            left: f,
                            top: v
                        })
                          , y = Math.min(n.getArtworkWidth() / t.getProduct().eps.width, n.getArtworkHeight() / t.getProduct().eps.height);
                        b.set("scaleX", y),
                        b.set("scaleY", y),
                        b.setCoords(),
                        b.destroy();
                        for (const e of o) {
                            switch (e.updateFromGroupScaling(),
                            e.type) {
                            case "bounded-text":
                                e.setMinSizePx(i.calculateFontSizesFromObject(e).min),
                                e.setMaxSizePx(i.calculateFontSizesFromObject(e).max);
                                break;
                            case "path-itext":
                                const t = i.calculateCircularFontSizeFromDimensions(e.horizontalDiameter, e.originalHorizontalDiameter, e.originalFontSize);
                                e.set("fontSize", t);
                                break
                            }
                            r && e.isPrintArea ? e.set({
                                ...n.getCenter()
                            }) : e.setCoords()
                        }
                    }
                    return {
                        applyCanvasScaling: n,
                        scaleCanvasElementsForPreview: o
                    }
                }
                t.$inject = ["ProductService", "GeneralMathUtils"],
                angular.module("app.shared.services").factory("CanvasUtilService", t)
            }
            )()
        }
        ).call(this, i("c46f"))
    },
    "5daf": function(e, t, i) {
        e.exports = i.p + "img/vectorplaceholder.e73b9ce0.svg?x-request=html"
    },
    "5dcb": function(e, t) {
        (function() {
            function e(e) {
                function t() {
                    var t = "/Font/GetFonts";
                    return e.get(t)
                }
                function i(t) {
                    const i = "/Font/" + encodeURIComponent(t);
                    return e.delete(i)
                }
                function n(t) {
                    const i = "/Font/FontUploadSignedUrl/" + encodeURIComponent(t);
                    return e.get(i)
                }
                function o(t) {
                    const i = "/Font/Validate/" + encodeURIComponent(t);
                    return e.get(i)
                }
                return {
                    getFonts: t,
                    deleteFont: i,
                    getFontUploadSignedUrl: n,
                    validateFont: o
                }
            }
            e.$inject = ["HttpService"],
            angular.module("app.shared.services").factory("FontAPIService", e)
        }
        )()
    },
    "5eb3": function(e, t, i) {},
    "5f44": function(e, t) {
        angular.module("app.directives").directive("smartFloat", ["$filter", function(e) {
            var t = /^-?\$?\d+.(\d{3})*(\,\d*)$/
              , i = /^-?\$?\d+,(\d{3})*(\.\d*)$/
              , n = /^-?\$?\d+(\.\d*)?$/
              , o = /^-?\$?\d+(\,\d*)?$/;
            return {
                require: "ngModel",
                link: function(r, a, s, l) {
                    const c = a[0] && a[0].attributes && "undefined" !== typeof a[0].attributes["decimal-places"] ? parseInt(a[0].attributes["decimal-places"].value) : 2;
                    l.$parsers.unshift((function(e) {
                        return t.test(e) ? (l.$setValidity("float", !0),
                        parseFloat(e.replace(".", "").replace(",", "."))) : i.test(e) ? (l.$setValidity("float", !0),
                        parseFloat(e.replace(",", ""))) : n.test(e) ? (l.$setValidity("float", !0),
                        parseFloat(e)) : o.test(e) ? (l.$setValidity("float", !0),
                        parseFloat(e.replace(",", "."))) : void l.$setValidity("float", !1)
                    }
                    )),
                    l.$formatters.unshift((function(t) {
                        return e("number")(parseFloat(t), c).replace(/,/g, "")
                    }
                    )),
                    a.bind("blur", (function() {
                        "undefined" !== typeof l.$modelValue && (l.$viewValue = e("number")(parseFloat(l.$modelValue), c).replace(/,/g, "")),
                        l.$render()
                    }
                    ))
                }
            }
        }
        ])
    },
    "5f70": function(e, t, i) {},
    6: function(e, t) {},
    6187: function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i, n) {
                e.templateId = i,
                e.titleSaved = n ? "Product Base Saved" : "Template Product Saved",
                e.goToTemplateProducts = function() {
                    t.hide()
                }
            }
            e.$inject = ["$scope", "$mdDialog", "templateId", "forMyProductBases"],
            angular.module("app.ctrls").controller("TemplateProductSavedModalCtrl", e)
        }
        )()
    },
    6238: function(e, t) {
        var i = '<title>Account Settings</title> <div class="h100" ng-controller="AdminPanelCtrl" ng-cloak> <vue-component class="h100" name="AdminRouterWrapper" router="router"/> </div> ';
        e.exports = i
    },
    "625f": function(e, t, i) {
        "use strict";
        i("e0fb")
    },
    "63c9": function(e, t, i) {
        "use strict";
        i.d(t, "b", (function() {
            return o
        }
        )),
        i.d(t, "a", (function() {
            return r
        }
        ));
        var n = i("406d");
        const o = async()=>{
            const e = await n["a"].get("Admin/PodProvider");
            return e.data
        }
          , r = async e=>{
            const t = await n["a"].get("Admin/PodProvider/" + e);
            return t.data
        }
    },
    6444: function(e, t) {
        async function i(e, t, i) {
            const n = []
              , o = [];
            for (const r of t) {
                const a = Promise.resolve().then(()=>i(r, t));
                n.push(a);
                const s = a.then(()=>o.splice(o.indexOf(s), 1));
                o.push(s),
                o.length >= e && await Promise.race(o)
            }
            return Promise.all(n)
        }
        window.asyncPool = i
    },
    "661f": function(e, t, i) {},
    6715: function(e, t, i) {},
    6928: function(e, t, i) {
        "use strict";
        i.r(t),
        function(e) {
            var t = i("b421");
            (function() {
                function i(i, n, o, r, a, s, l, c) {
                    async function d(t, i, n) {
                        if ("undefined" !== typeof i) {
                            i < 1 && (i = 1);
                            var o, r = t;
                            if (r.selectedPosition = i,
                            o = r.vectorLibraryId ? await s.getLibraryElementAtPosition(r.vectorLibraryId, r.selectedPosition) : e.find(r.vectors, (function(e) {
                                return e.position === i - 1
                            }
                            )),
                            o) {
                                const e = await g(o.svgPath);
                                r.set("svgString", e),
                                n.renderAll()
                            } else
                                r.set("svgString", ""),
                                n.renderAll(),
                                console.warn("No vector found at position: " + (i - 1))
                        }
                    }
                    async function u(e, t, i, n) {
                        await c.changeDynamicColorPosition(e, t, i, n)
                    }
                    async function p(e, t, i) {
                        await c.saveDynamicColor(e, t, i)
                    }
                    function h(t, i, n, o, r) {
                        var a = t
                          , s = e.find(a.vectors, (function(e) {
                            return e.position === i - 1
                        }
                        ));
                        s ? (console.log("Editing " + n + " at " + (i - 1)),
                        s.svgPath = n,
                        s.epsPath = o,
                        s.position = i - 1) : (console.log("Adding " + n + " at " + (i - 1)),
                        a.vectors.push({
                            svgPath: n,
                            epsPath: o,
                            position: i - 1
                        })),
                        r && a.setEditedProp("vectors")
                    }
                    async function m(e, t, i, n) {
                        e.vectors.sort((function(e, t) {
                            return e.position - t.position
                        }
                        ));
                        const o = e.width
                          , r = e.height
                          , a = e.centerX
                          , s = e.centerY
                          , l = new fabric.VectorPlaceholder({
                            strokeDashArray: t.getDashedArray(),
                            strokeWidth: i ? 0 : t.getVisibleStrokeWidth(),
                            width: o,
                            height: r,
                            mtr: !0,
                            selectedPosition: 1,
                            selectedColorPosition: 1,
                            vectors: e.vectors || [],
                            colors: e.colors || [],
                            vectorLibraryId: e.vectorLibraryId,
                            colorLibraryId: e.colorLibraryId,
                            applyColoring: e.applyColoring,
                            skewX: e.skewX,
                            skewY: e.skewY,
                            lockUniScalingWithSkew: n,
                            lockSkewingX: !n,
                            lockSkewingY: !n,
                            id: e.id,
                            uuid: e.uuid,
                            coverMaskArea: e.coverMaskArea || !1,
                            rotationStep: e.rotationStep || 1,
                            locked: e.locked,
                            visible: e.visible,
                            name: e.name,
                            preventEditMode: i || !e.allowUserUpload,
                            isPrintArea: e.isPrintArea,
                            isOverlay: e.isOverlay,
                            groupId: e.groupId
                        });
                        return l.set("originX", "center"),
                        l.set("originY", "center"),
                        l.set({
                            left: a,
                            top: s
                        }),
                        l.set("centeredRotation", !0),
                        l.set("cornerSize", .015 * t.getArtworkWidth()),
                        l.set("transparentCorners", !1),
                        l.set("angle", e.rotation),
                        l.set("zIndex", e.zIndex),
                        l.set("allowUserUpload", e.allowUserUpload),
                        i && (l.lockMovementY = !0,
                        l.lockMovementX = !0,
                        l.lockScalingX = !0,
                        l.lockScalingY = !0,
                        l.lockRotation = !0),
                        l.applyColoring && await u(l, l.selectedColorPosition, null, t),
                        await d(l, 1, t),
                        l
                    }
                    function g(e) {
                        return o((async function(i, n) {
                            try {
                                const n = Object(t["a"])(e)
                                  , o = new Headers;
                                o.append("pragma", "no-cache"),
                                o.append("cache-control", "no-cache");
                                const r = {
                                    method: "GET",
                                    headers: o,
                                    mode: "cors"
                                }
                                  , a = await fetch(n, r).then(e=>e.text());
                                i(a)
                            } catch (o) {
                                r.show(r.alert().parent(document.body).clickOutsideToClose(!0).title("Error loading EPS").textContent("There was an error loading the SVG file").ok("OK!")),
                                $("#vectorEPSLoader")[0] && ($("#vectorEPSLoader")[0].value = null),
                                n(o)
                            }
                        }
                        ))
                    }
                    function f(e, t) {
                        return o((async function(o, s) {
                            if (e)
                                try {
                                    a.start(`Uploading EPS '${e.name}' `),
                                    console.log(`Uploading EPS '${e.name}' `);
                                    const r = await l.uploadVectorToS3(e, "vector", !1, !1, (o,r)=>{
                                        "upload" === o ? (t && t(r),
                                        a.message(`Uploading EPS '${e.name}' ${parseInt(r)}%`),
                                        n((function() {
                                            i.$apply()
                                        }
                                        ))) : a.message("Processing")
                                    }
                                    );
                                    console.log("Success on EPS upload!"),
                                    a.stop(),
                                    o(r)
                                } catch (c) {
                                    a.stop(),
                                    s(c),
                                    r.show(r.alert().parent(document.body).clickOutsideToClose(!0).title("EPS Error").textContent("Error uploading EPS file").ok("OK!"))
                                }
                            else
                                s("No file provided")
                        }
                        ))
                    }
                    function v(e, t, o) {
                        return new Promise(async(r,s)=>{
                            if (e) {
                                var c = e.name.split(".").pop().toLowerCase();
                                if ("svg" === c) {
                                    var d = new FileReader;
                                    d.onload = function(e) {
                                        var i = e.target.result;
                                        t.set("svgString", i),
                                        o.renderAll(),
                                        r()
                                    }
                                    ,
                                    d.readAsText(e)
                                } else if ("eps" === c)
                                    try {
                                        a.start("Uploading EPS");
                                        const c = await l.getSvgPathFromEpsFile(e, (e,t)=>{
                                            "upload" === e ? (a.message(`Uploading EPS: ${parseInt(t)}%`),
                                            n(()=>i.$apply())) : a.message("Processing")
                                        }
                                        );
                                        if (c && c.SVG) {
                                            const e = await g(c.SVG);
                                            t.set("svgString", e),
                                            o.renderAll(),
                                            a.stop(),
                                            r()
                                        } else
                                            a.stop(),
                                            console.error("No svg string present"),
                                            s()
                                    } catch (error) {
                                        console.error(error),
                                        a.stop(),
                                        s(error)
                                    }
                                else
                                    "pdf" === c ? t.set("pdf", e) : (console.error("Invalid file extension: " + c),
                                    s("Invalid file extension: " + c))
                            } else
                                r()
                        }
                        )
                    }
                    return {
                        uploadEPSFile: f,
                        setVectorPlaceholderProperties: m,
                        changeDynamicEPSPosition: d,
                        changeDynamicEPSColorPosition: u,
                        addEPSGroup: h,
                        saveDynamicEPSColor: p,
                        loadFileOnPlaceholder: v
                    }
                }
                i.$inject = ["$rootScope", "$timeout", "$q", "$mdDialog", "blockUI", "LibrariesAPIService", "VectorUtilService", "ElementsColorService"],
                angular.module("app.shared.services").factory("DynamicVectorService", i)
            }
            )()
        }
        .call(this, i("c46f"))
    },
    "694b": function(e, t, i) {
        e.exports = i.p + "img/align-center.fe3a9723.svg?x-request=html"
    },
    "69ab": function(e, t, i) {},
    "69bb": function(e, t) {
        (function() {
            function e(e) {
                function t(t, i) {
                    var n = {
                        productId: t,
                        name: i
                    }
                      , o = "/Product/Rename?" + $.param(n);
                    return e.post(o)
                }
                function i() {
                    return e.get("/Product/ProductGUID")
                }
                function n(t) {
                    const i = {
                        productId: t
                    };
                    return e.get("/Product?" + $.param(i))
                }
                function o(t) {
                    var i = "/Product/SaveProduct"
                      , n = {
                        jsonString: JSON.stringify(t)
                    };
                    return e.post(i, n)
                }
                function r(t, i, n, o, r) {
                    var a = {
                        searchString: t,
                        sortBy: i,
                        sortMode: n,
                        from: o,
                        to: r
                    };
                    return e.get("/Product/GetProductsFromTo?" + $.param(a))
                }
                function a(t) {
                    var i = {
                        searchString: t
                    };
                    return e.get("/Product/GetProductsCount?" + $.param(i))
                }
                function s(t) {
                    var i = {
                        productId: t
                    };
                    return e.get("/Product/DeleteProduct?" + $.param(i))
                }
                function l(t) {
                    var i = {
                        productId: t
                    };
                    return e.get("/Product/CloneProduct?" + $.param(i))
                }
                function c(t) {
                    var i = {
                        fontName: t
                    };
                    return e.get("/Product/GetProductsWithFont?" + $.param(i))
                }
                function d(t) {
                    return e.get(`/Product/${encodeURIComponent(t)}/ExportUrl`)
                }
                function u() {
                    return e.get("/Product/ImportSignedUrl")
                }
                function p(t) {
                    return e.get("/Product/Import/" + encodeURIComponent(t))
                }
                return {
                    getProduct: n,
                    generateProductGUID: i,
                    saveProduct: o,
                    getProductsFromTo: r,
                    getProductsCount: a,
                    deleteProduct: s,
                    cloneProduct: l,
                    getProductsWithFont: c,
                    renameProduct: t,
                    getExportUrl: d,
                    getProductImportSignedUrl: u,
                    importProductZip: p
                }
            }
            e.$inject = ["HttpService"],
            angular.module("app.shared.services").factory("ProductAPIService", e)
        }
        )()
    },
    "6a71": function(t, i, n) {
        "use strict";
        n.r(i),
        function() {
            function t(t, i, o, r, a, s, l) {
                t.colorModeStrings = ["RGB", "CMYK"],
                t.filteredLibraries = [],
                t.currentPage = 1,
                t.numPerPage = 15,
                t.maxSize = 5,
                t.begin = 0,
                t.librariesCount = 0,
                t.searchString = "",
                t.libraryType = l.getLastSelectedLibrariesTab() || "color",
                t.currentNavItem = t.libraryType,
                t.viewerSettings = o.getCurrentPickerSettings(),
                t.$watch("currentPage + numPerPage", (function() {
                    t.begin = (t.currentPage - 1) * t.numPerPage,
                    t.getLibraries()
                }
                )),
                t.addLibrary = function() {
                    a.show({
                        locals: {
                            libraryTypeString: t.libraryType
                        },
                        controller: "NewLibraryCtrl",
                        template: n("132b"),
                        parent: angular.element(document.body),
                        clickOutsideToClose: !1
                    }).then((function(e) {
                        console.log("Creating library with name: " + e.name),
                        s.start(),
                        i.createLibrary(e.name, e.colorMode, t.libraryType).then((function() {
                            console.log("Library created!"),
                            s.stop(),
                            t.getLibraries()
                        }
                        )).catch((function(e) {
                            window.rumReportError(e),
                            s.stop()
                        }
                        ))
                    }
                    ), (function() {}
                    ))
                }
                ,
                t.getLibraries = function() {
                    s.start("Loading libraries"),
                    t.searchString = t.searchString.trim(),
                    i.getLibraries(t.searchString, t.begin, t.numPerPage, t.libraryType).then((function(e) {
                        t.filteredLibraries = e,
                        i.getLibrariesCount(t.searchString, t.libraryType).then((function(e) {
                            t.librariesCount = e,
                            s.stop()
                        }
                        )).catch((function(e) {
                            window.rumReportError(e),
                            s.stop()
                        }
                        ))
                    }
                    )).catch((function(e) {
                        window.rumReportError(e),
                        s.stop()
                    }
                    ))
                }
                ,
                t.getCategories = function() {
                    s.start("Loading categories"),
                    t.searchString = t.searchString.trim(),
                    i.getCategories(t.searchString, t.begin, t.numPerPage, t.libraryType).then((function(e) {
                        t.filteredLibraries = e,
                        i.getLibrariesCount(t.searchString, t.libraryType).then((function(e) {
                            t.librariesCount = e,
                            s.stop()
                        }
                        )).catch((function(e) {
                            window.rumReportError(e),
                            s.stop()
                        }
                        ))
                    }
                    )).catch((function(e) {
                        window.rumReportError(e),
                        s.stop()
                    }
                    ))
                }
                ,
                t.delete = function(n, o) {
                    var r = a.confirm().title("Library Deletion").htmlContent('Are you sure you want to delete "<b>' + n.Name + '</b>" with id "<b>' + n.LibraryId + '</b>"?').ok("Yes").cancel("No");
                    a.show(r).then((async function() {
                        s.start("Deleting library");
                        try {
                            await i.deleteLibrary(n.LibraryId),
                            t.filteredLibraries.splice(o, 1),
                            s.stop(),
                            t.getLibraries()
                        } catch (error) {
                            if (409 === error.status && error.data.productIds) {
                                let e = '<p>The library is being used in some products including:</p><table width="100%" border="0" class="font-delete-table"><tbody>';
                                for (const i of error.data.productIds)
                                    e += '<tr><td class="product-id"><b>' + i + "<b/></td></tr>";
                                e += "</tbody></table>",
                                e += '<div class="mt10">Remove it from all products before deleting it.</div>',
                                a.show(a.alert().clickOutsideToClose(!1).multiple(!0).title("Library in use!").htmlContent(e).ok("OK"))
                            } else
                                window.rumReportError(e, e=>{
                                    e.addBreadcrumb({
                                        type: "error",
                                        category: "libraries",
                                        message: "Error deleting library " + n.LibraryId,
                                        level: "error"
                                    })
                                }
                                )
                        }
                    }
                    ), (function() {}
                    ))
                }
                ,
                t.edit = function(e) {
                    r.path("/editLibrary").search({
                        id: e.LibraryId
                    })
                }
                ,
                t.clone = function(e) {
                    s.start("Cloning library"),
                    i.cloneLibrary(e.LibraryId).then((function(e) {
                        s.stop(),
                        t.getLibraries()
                    }
                    )).catch((function(e) {
                        window.rumReportError(e),
                        s.stop(),
                        a.show(a.alert().title("Library cloning!").textContent("Error cloning library").ok("OK"))
                    }
                    ))
                }
                ,
                t.editItem = function(e) {
                    e.editing = !0
                }
                ,
                t.doneEditing = function(e) {
                    e.editing = !1,
                    s.start("Saving name"),
                    i.editLibrary(e.LibraryId, e.Name).then((function(e) {
                        s.stop()
                    }
                    )).catch((function(e) {
                        window.rumReportError(e),
                        s.stop()
                    }
                    ))
                }
                ,
                t.switchLibraryType = function(e) {
                    l.setLastSelectedLibrariesTab(e),
                    e !== t.libraryType && (t.libraryType = e,
                    t.getLibraries())
                }
                ,
                t.selectLibrary = function(e) {
                    a.hide(e)
                }
                ,
                t.viewerSettings && t.switchLibraryType(t.viewerSettings.libraryType)
            }
            t.$inject = ["$scope", "LibrariesAPIService", "LibrariesUtilService", "$location", "$mdDialog", "blockUI", "ConfigService"],
            angular.module("app.ctrls").controller("LibrariesCtrl", t)
        }()
    },
    "6a98": function(e, t, i) {
        e.exports = i.p + "img/lock.dc5717c2.svg?x-request=html"
    },
    "6b48": function(e, t, i) {
        "use strict";
        var n;
        i.d(t, "a", (function() {
            return n
        }
        )),
        function(e) {
            e["PRINTIFY"] = "printify",
            e["PRINTFUL"] = "printful",
            e["STORE"] = "store",
            e["CUSTOMILY"] = "customily",
            e["GEARMENT"] = "gearment",
            e["GELATO"] = "gelato",
            e["GEARLAUNCH"] = "gearlaunch",
            e["CASESTRY"] = "casestry",
            e["SHINEON"] = "shineon"
        }(n || (n = {}))
    },
    "6b63": function(e, t) {
        var i = '<md-dialog> <div> <md-toolbar style="min-height:45px;height:45px"> <div class="md-toolbar-tools" style="background:linear-gradient(141deg,#849dd8 15%,#8bc4d3 75%)"> <div class="text-center w100"> <h2>Design Id: {{ designId }}</h2> </div> </div> </md-toolbar> <md-dialog-content> <md-content class="md-padding m1" style="width:45rem"> <div class="row" style="margin:0 15px"> Youve updated your design, do you want to update the options as well? <b>If you already modified the options for this design, updating them will delete your changes</b> <div class="w100 text-center mt15"> <md-button class="md-raised md-primary m1" ng-click="saveUpdateOptions()">Save and update options </md-button> <md-button class="md-raised md-primary m1" ng-click="save()">Save</md-button> </div> </div> </md-content> </md-dialog-content> </div> </md-dialog> ';
        e.exports = i
    },
    "6c29": function(e, t) {
        /**
 * angular-avatar
 * Angular Avatar is an AngularJS directive that generates a letter's avatar like Google does in several web apps. First letter of each word in a string will be used to generate the avatar.
 * @version v1.3.0 - 2016-11-07
 * @link https://github.com/ajsoriar/angular-avatar
 * @author Andres J. Soria R. <ajsoriar@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
        (function() {
            "use strict";
            var e = angular.module("ngAvatar", []);
            e.directive("ngAvatar", [function() {
                return {
                    restrict: "AE",
                    replace: !0,
                    scope: {
                        initials: "@initials",
                        width: "@width",
                        bgcolor: "@bgColor",
                        textColor: "@textColor",
                        wrapper: "=wrapper",
                        pictureResolution: "@pictureResolution",
                        pixelated: "=pixelated",
                        roundShape: "=roundShape",
                        class: "@class",
                        imgClass: "@imgClass",
                        style: "@style",
                        string: "@string",
                        cornerRadius: "@cornerRadius",
                        pictureFormat: "@pictureFormat",
                        colorsPalette: "=colorsPalette",
                        autoColor: "=autoColor",
                        fontWeight: "@fontWeight",
                        fontScale: "@fontScale",
                        textShadow: "=textShadow",
                        bind: "=bind",
                        maxLength: "@maxLength",
                        upperCase: "=upperCase"
                    },
                    link: function(e, t, i) {
                        var n = 45
                          , o = 256
                          , r = !0
                          , a = ""
                          , s = "#000"
                          , l = "#fff"
                          , c = !1
                          , d = "vertical-align:top;"
                          , u = !1
                          , p = "border-radius:0; display:block; overflow:hidden;"
                          , h = ""
                          , m = ""
                          , g = ""
                          , f = "0"
                          , v = "png"
                          , b = ["#bdc3c7", "#6f7b87", "#2c3e50", "#2f3193", "#662d91", "#922790", "#ec2176", "#ed1c24", "#f36622", "#f8941e", "#fab70f", "#fdde00", "#d1d219", "#8ec73f", "#00a650", "#00aa9c", "#00adef", "#0081cd", "#005bab"]
                          , y = !1
                          , w = 100
                          , C = 100
                          , x = !1
                          , S = !1
                          , P = "100%";
                        function k() {
                            if (void 0 != e.bind && (S = e.bind),
                            void 0 != e.textColor && (l = e.textColor),
                            void 0 != e.pictureResolution && (o = e.pictureResolution),
                            void 0 != e.width && (n = e.width),
                            void 0 != e.wrapper && (r = e.wrapper,
                            !1 === r && (P = n)),
                            void 0 != e.pixelated && (c = e.pixelated,
                            !0 === c && (d += "image-rendering:pixelated; image-rendering:-moz-crisp-edges;")),
                            void 0 != e.roundShape ? (u = e.roundShape,
                            u && (p += "border-radius: " + n + "px;")) : void 0 != e.cornerRadius && (f = e.cornerRadius,
                            p += "border-radius: " + f + "px;"),
                            void 0 != e.class && (h = e.class),
                            void 0 != e.imgClass && (m = e.imgClass),
                            void 0 != e.style && (g = e.style),
                            void 0 != e.initials && (a = e.initials),
                            void 0 != e.string && (a = A(e.string)),
                            void 0 != e.maxLength && (a = a.substr(0, e.maxLength)),
                            "jpeg" === e.pictureFormat && (v = "jpeg"),
                            void 0 != e.colorsPalette && (b = e.colorsPalette),
                            void 0 != e.bgcolor)
                                s = e.bgcolor;
                            else if (void 0 != e.autoColor && (y = e.autoColor,
                            !0 === y)) {
                                var t, i, k = a.length, _ = 0;
                                for (t = 0; t < k; t++)
                                    _ = a.charCodeAt(t);
                                i = _ % b.length,
                                s = b[i]
                            }
                            void 0 != e.fontWeight && (w = e.fontWeight),
                            void 0 != e.fontScale && (C = e.fontScale),
                            void 0 != e.textShadow && (x = e.textShadow),
                            !0 === e.upperCase && (a = a.toUpperCase())
                        }
                        function _(e, t, i, n, o, r) {
                            var s, l, c, d = 256, u = 256;
                            return void 0 != t && t > 0 && void 0 != i && i > 0 && (d = t,
                            u = i),
                            s = document.createElement("canvas"),
                            s.id = "ngAvatar-" + Date.now(),
                            s.width = d,
                            s.height = u,
                            l = s.getContext("2d"),
                            l.fillStyle = n,
                            l.fillRect(0, 0, d, u),
                            c = d / (2 / (C / 100)),
                            l.font = w + " " + c + "px sans-serif",
                            !0 === x && (l.shadowColor = "black",
                            l.shadowOffsetX = 0,
                            l.shadowOffsetY = 0,
                            l.shadowBlur = 5),
                            l.textAlign = "center",
                            l.fillStyle = o,
                            l.fillText(a, d / 2, u - u / 2 + c / 3),
                            s.toDataURL("image/" + v)
                        }
                        function A(e) {
                            var t = ""
                              , i = 0
                              , n = (e = e.split(" "),
                            e.length);
                            for (i; i < n; i++)
                                "" != e[i] && (t += e[i][0]);
                            return t
                        }
                        var T = t;
                        function E() {
                            var e = _(a, o, o, s, l, null)
                              , t = "";
                            r && (t += '<div class="avatar-wrapper ' + h + '" style="' + p + " width:" + n + "px; height:" + n + "px; " + g + '">'),
                            t += '<img src="' + e + '" class="avatar-picture ' + m + '" style="' + d + '" width="' + P + '" height="" />',
                            r && (t += "</div>");
                            var i = angular.element(t);
                            T.replaceWith(i),
                            T = i
                        }
                        k(),
                        !0 === S ? (e.$watch("string", (function(e) {
                            k(),
                            E()
                        }
                        )),
                        e.$watch("initials", (function(e) {
                            k(),
                            E()
                        }
                        ))) : E()
                    }
                }
            }
            ])
        }
        )()
    },
    "6d02": function(e, t) {
        (function() {
            function e(e) {
                function t(t, i) {
                    const n = {
                        type: t,
                        format: i
                    };
                    return e.get("/Images/ImageUploadSignedUrl?" + $.param(n))
                }
                function i() {
                    return e.get("/Images/ProductThumbnail/SignedUrl")
                }
                function n(t, i) {
                    const n = {
                        type: i
                    };
                    return e.get(`/Images/Thumbnail/${encodeURIComponent(t)}?${$.param(n)}`)
                }
                function o(t, i) {
                    const n = {
                        maxSize: i
                    }
                      , o = {
                        filenames: t
                    };
                    return e.post("/Images/DynamicImages/NeedResizing?" + $.param(n), o)
                }
                function r(t, i) {
                    const n = {
                        maxSize: i
                    }
                      , o = {
                        filenames: t
                    };
                    return e.post("/Images/MaskImages/NeedResizing?" + $.param(n), o)
                }
                function a(t, i) {
                    const n = {
                        maxSize: i
                    }
                      , o = {
                        filenames: t
                    };
                    return e.post("/Images/DynamicImages/Resize?" + $.param(n), o)
                }
                function s(t, i) {
                    const n = {
                        maxSize: i
                    }
                      , o = {
                        filenames: t
                    };
                    return e.post("/Images/MaskImages/Resize?" + $.param(n), o)
                }
                return {
                    doDynamicImagesNeedResizing: o,
                    doMaskImagesNeedResizing: r,
                    resizeDynamicImages: a,
                    resizeMaskImages: s,
                    getImageUploadS3SignedUrl: t,
                    getProductThumbnailsS3SignedUrl: i,
                    generateImageThumbnail: n
                }
            }
            e.$inject = ["HttpService"],
            angular.module("app.shared.services").factory("ImageAPIService", e)
        }
        )()
    },
    "6d8c": function(e, t) {
        var i = '<md-dialog class="category-library-dialog" run-on-enter="create()"> <form name="resolutionForm"> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{ thumbnailOnly ? \'Change category thumbnail\' : \'Add category to library\' }}</h2> <span flex></span> </div> </md-toolbar> <md-dialog-content style="max-width:800px;min-width:400px"> <md-content class="md-padding"> <div class="row" style="margin-right:15px;margin-left:15px"> <p ng-show="errorMessage" style="margin-bottom:30px;color:red">{{ errorMessage }}</p> <md-input-container ng-show="!thumbnailOnly" class="md-block"> <label>Category Name</label> <input required name="name" ng-model="categoryName"/> <div ng-messages="libraryForm.name.$error" md-auto-hide="false"> <div ng-message="required">Please enter a name!</div> </div> </md-input-container> <div class="clearfix"></div> <md-button class="md-raised col-xs-10 col-xs-offset-1" upload-file input-id="inputFileTest" ng-if="libraryType === 3"> Add category thumbnail <div id="uploadImageTest" class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="inputFileTest" type="file" accept="image/*" value="upload" custom-on-change="uploadImage"/> </div> </md-button> <div class="image-preview col-xs-10 col-xs-offset-1" ng-show="filePath && libraryType === 3"> <img ng-src="{{ filePath + \'?x-request=html\' }}"/> </div> <md-button class="md-raised col-xs-10 col-xs-offset-1" upload-file input-id="inputFileEPS" ng-disabled="uploadingVectorEPS" ng-if="libraryType === 2"> <div ng-if="!uploadingVectorEPS">UPLOAD EPS(S)</div> <div id="uploadDynamicEPS" class="uploadImage" style="height:0;width:0;overflow:hidden;display:none"> <input id="inputFileEPS" type="file" accept=".eps" value="upload" custom-on-change="uploadEPS"/> </div> <div class="col-xs-12" style="text-align:center;padding:5px" ng-if="uploadingVectorEPS"> <md-progress-circular style="margin:auto" md-mode="determinate" value="{{ vectorEPSUploadPercent }}" md-diameter="30px"></md-progress-circular> </div> </md-button> <div class="svg-preview col-xs-10 col-xs-offset-1" ng-show="filePath && libraryType === 2"> <img ng-src="{{ filePath + \'?x-request=html\' }}"/> </div> </div> </md-content> </md-dialog-content> <md-dialog-actions layout="row"> <md-button class="md-primary" ng-click="create()" ng-disabled="createBtnDisabled"> {{ category === null ? \'Create Category\' : \'Update Category\' }} </md-button> <md-button ng-click="cancel()"> Cancel </md-button> </md-dialog-actions> </form> </md-dialog> ';
        e.exports = i
    },
    "6d9c": function(e, t, i) {
        e.exports = i.p + "img/garbage.5412c96a.svg?x-request=html"
    },
    "6dd0": function(e, t, i) {
        var n = i("4719")
          , o = i("56cf")
          , r = n(o)
          , a = '<title>Customily - Sign in</title> <div class="page page-auth signin-page gradient-customily-bg" style="min-height:100%" ng-controller="SignInCtrl"> <div class="auth-container"> <div class="form-head mb20"> <img class="center-block" src="' + r + '" style="width:150px"/> <h5 class="text-normal h5 text-center">Welcome, sign in to continue</h5> </div> <div class="form-container"> <form class="form-vertical" action="javascript:;"> <br/> <md-input-container class="md-block" flex-gt-sm> <label>User or Email</label> <input id="username" type="text" placeholder="Type your username" ng-model="user" required/> </md-input-container> <md-input-container class="md-block mb0" flex-gt-sm> <label>Password</label> <input id="password" type="password" placeholder="Type your password" ng-model="password" required/> </md-input-container> <div class="clearfix"></div> <a ng-click="forgotPassword()" class="col-xs-12 small mb20 forgot-password">Forgot your password?</a> <div class="btn-group btn-group-justified mb20"> <div class="btn-group-justified" style="display:flex"> <md-button id="submit" type="submit" class="md-raised md-primary w100" ng-click="signInLocal()">Sign In</md-button> </div> </div> <div class="small text-center create-user"> Don\'t have an account? <a ng-click="createUser()">Create one</a> </div> </form> </div> </div> </div> ';
        e.exports = a
    },
    "6e47": function(e, t) {
        (function() {
            function e(e, t, i, n) {
                function o(e, t) {
                    return {
                        method: e,
                        url: n.apiBaseURL + t,
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        cache: !1
                    }
                }
                function r(t, i, n={}) {
                    var r = o("GET", t);
                    return r = {
                        ...r,
                        ...n
                    },
                    i && (r.contentType = i),
                    e(r).then((function(e) {
                        return e.data
                    }
                    ), c)
                }
                function a(t, i, n) {
                    var r = o("POST", t);
                    return i && (r.data = i),
                    n && (r.contentType = n),
                    e(r).then((function(e) {
                        return e.data
                    }
                    ), c)
                }
                function s(t, i) {
                    var n = o("DELETE", t);
                    return i && (n.contentType = i),
                    e(n).then((function(e) {
                        return e.data
                    }
                    ), c)
                }
                function l(t, i) {
                    var n = o("PUT", t);
                    return i && (n.contentType = i),
                    e(n).then((function(e) {
                        return e.data
                    }
                    ), c)
                }
                function c(e) {
                    const o = ["/Users", "Libraries"];
                    throw 500 == e.status ? i.show(i.alert().title("Oops!").htmlContent(e.data.ExceptionMessage || e.data.error || e.data.Message || e.data).ok("OK")) : 401 == e.status ? n.openRoutes.includes(n.getCurrentOriginalPath()) || t.path("/signin") : 400 == e.status ? o.some(t=>e.config.url.indexOf(t) > 0) || i.show(i.alert().title("Oops!").htmlContent(e.data && e.data.Message || e.data && e.data.error || e.data).ok("OK")) : 403 == e.status && (o.some(t=>e.config.url.indexOf(t) > 0) || i.show(i.alert().parent(document.body).clickOutsideToClose(!1).title("Please check your credentials!").ok("close"))),
                    e
                }
                return {
                    get: r,
                    post: a,
                    delete: s,
                    put: l
                }
            }
            e.$inject = ["$http", "$location", "$mdDialog", "ConfigService"],
            angular.module("app.shared.services").factory("HttpService", e)
        }
        )()
    },
    "6e85": function(e, t, i) {
        e.exports = i.p + "img/generic.cdd34e02.svg?x-request=html"
    },
    "6ee0": function(e, t, i) {
        var n = i("4719")
          , o = i("55a7")
          , r = i("3a20")
          , a = i("36be")
          , s = n(o)
          , l = n(r)
          , c = n(a)
          , d = '<md-dialog style="border-radius:10px"> <div> <style>.ur-title{color:#7258e0;font-size:18px;margin:5px 15px 15px 15px}.ur-text{font-size:16px;margin:25px}.ur-button{width:165px;text-transform:none!important}.ur-svgcontainer{margin-right:15px;margin-left:15px}.ur-link{color:#7258e0;text-decoration:underline;cursor:pointer}</style> <md-dialog-content> <md-content class="md-padding" style="width:530px"> <div> <div class="pull-right" style="margin-top:0;margin-right:0"> <button style="border:none;outline:0;background-color:transparent" ng-disabled="false" ng-click="closeDialog()"> <div style="font-size:16px">x</div> </button> </div> <div class="clearfix"></div> <div ng-show="step == \'congrats\'"> <div class="text-center text-bold ur-title"> {{ message }} </div> <div class="text-center ur-svgcontainer"> <object type="image/svg+xml" data="' + s + '" style="max-height:175px"> <img src="' + s + '"/> </object> </div> <div class="text-center ur-text"> Are you enjoying Customily so far? </div> <div class="text-center" style="margin:15px"> <md-button class="md-primary ur-button" style="border:1px solid" ng-click="stepCongratsNo()"> Not really </md-button> <md-button class="md-raised md-primary ur-button" ng-click="stepCongratsYes()"> Yes! </md-button> </div> </div> <div ng-show="step == \'rating\'"> <div class="text-center text-bold ur-title"> &nbsp; </div> <div class="text-center ur-svgcontainer"> <object type="image/svg+xml" data="' + l + '" style="max-height:175px"> <img src="' + l + '"/> </object> </div> <div class="text-center ur-text"> How about rating us in the App Store, then? </div> <div class="text-center" style="margin:15px"> <md-button class="md-primary ur-button" style="border:1px solid" ng-click="stepRatingNo()"> No, thanks </md-button> <md-button class="md-raised md-primary ur-button" ng-click="stepRatingYes()"> Ok, sure </md-button> </div> </div> <div ng-show="step == \'feedback\'"> <div class="text-center text-bold ur-title"> &nbsp; </div> <div class="text-center ur-text"> Would you mind giving us some feedback? </div> <form name="formfeedback"> <div class="text-left" style="font-size:14px;margin:25px"> <textarea ng-model="feedback" rows="5" style="width:100%;resize:none;max-height:200px;min-height:110px" maxlength="2000" required></textarea> </div> <div class="text-center" style="margin:15px"> <md-button class="md-primary ur-button" style="border:1px solid" ng-click="stepFeedbackNotNow()"> Not now </md-button> <md-button class="md-raised md-primary ur-button" ng-click="stepFeedbackSend()" ng-disabled="formfeedback.$invalid"> Send </md-button> </div> </form> </div> <div ng-show="step == \'thanks\'"> <div class="text-center ur-svgcontainer"> <object type="image/svg+xml" data="' + c + '" style="max-height:175px"> <img src="' + c + '"/> </object> </div> <div class="text-center ur-text"> <b> <div style="margin-bottom:15px"> Thank you! </div> <div> Your feedback is extremely valuable for us. </div> <div> Wanna tell us more? <span class="ur-link" ng-click="stepThanksCall()"> Schedule a call with our team, we are always here to help! </span> </div> </b> </div> <div class="text-center" style="margin:15px"> <md-button class="md-raised md-primary ur-button" ng-click="stepThanksClose()"> Close </md-button> </div> </div> </div></md-content> </md-dialog-content> </div> </md-dialog> ';
        e.exports = d
    },
    7: function(e, t) {},
    7178: function(e, t, i) {
        e.exports = i.p + "img/selection.a40ac5ac.svg?x-request=html"
    },
    7189: function(e, t, i) {},
    "71f8": function(e, t, i) {},
    "73b8": function(e, t, i) {},
    "744c": function(e, t, i) {},
    7481: function(e, t, i) {
        e.exports = i.p + "img/align-middle.03d6a042.svg?x-request=html"
    },
    7509: function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("4ff6")
          , o = i.n(n);
        (function() {
            function e(e, t, i, n, r, a) {
                e.iFrameLoading = !0;
                const s = n.path().split("/store")[1]
                  , l = Object.keys(n.search()).map(e=>`${e}=${n.search()[e]}`).join("&");
                e.$on("route:success", (t,r)=>{
                    if (r && r.Stores && r.Stores.filter(e=>1 === e.Type || 3 === e.Type).length) {
                        const t = o()("https://sh.customily.com", s, l ? "?" + l : "");
                        e.iFrameUrl = i.trustAsResourceUrl(t),
                        a(()=>e.$apply())
                    } else
                        n.path("/home")
                }
                ),
                e.createTemplateEvent = function() {
                    window.addEventListener("message", (function(e) {
                        if (e.data && "new-template-creation-flow" === e.data.action) {
                            const t = e.data
                              , i = t.templateId
                              , n = t.forUserDesignCreation
                              , o = t.createDesignOnTemplate
                              , r = t.flowId;
                            this.location.href = "/createProduct1?" + new URLSearchParams({
                                ...i && {
                                    templateId: i
                                },
                                ...n && {
                                    forUserDesignCreation: n
                                },
                                ...o && {
                                    createDesignOnTemplate: o
                                },
                                ...r && {
                                    flowId: r
                                }
                            })
                        }
                    }
                    ))
                }
                ,
                e.createTemplateEvent(),
                e.iFrameLoaded = function() {
                    e.iFrameLoading = !1,
                    window.addEventListener("message", (function(e) {
                        if (e.data && "doesPlanIncludesFeature" === e.data.action) {
                            const i = {
                                action: "doesPlanIncludesFeatureReply",
                                planIncludesFeature: t.planIncludesFeature
                            };
                            e.source.postMessage(i, "*")
                        }
                    }
                    ))
                }
            }
            e.$inject = ["$scope", "$rootScope", "$sce", "$location", "AuthService", "$timeout"],
            angular.module("app.ctrls").controller("StoreCtrl", e)
        }
        )()
    },
    "754a": function(e, t, i) {
        e.exports = i.p + "img/diners-club-colored.bfa77f0b.svg?x-request=html"
    },
    "768e": function(e, t) {
        var i = '<md-dialog class="font-library-dialog" run-on-enter="create()"> <form name="resolutionForm"> <md-toolbar> <div class="md-toolbar-tools"> <h2>Add font to library</h2> <span flex></span> </div> </md-toolbar> <md-dialog-content style="max-width:800px;min-width:400px"> <md-content class="md-padding"> <div class="row" style="margin-right:15px;margin-left:15px"> <p ng-show="errorMessage" style="margin-bottom:30px;color:red">{{ errorMessage }}</p> <md-input-container class="md-block col-xs-4 col-xs-offset-4" style="margin-bottom:0"> <md-tooltip md-direction="bottom"> The position for retrieving the font through the API </md-tooltip> <label>Font Option</label> <input required type="number" step="any" ng-model="fontOption" min="1" max="9999999" ng-disabled="element !== null"/> </md-input-container> <div class="clearfix"></div> <md-input-container class="col-xs-12"> <label>Select a font</label> <md-select ng-model="currentFontPath" md-on-close="isFontSelectOpen=false" md-on-open="isFontSelectOpen=true"> <md-option ng-repeat="font in fonts | orderBy: \'Name\'" value="{{ font.Path }}"> <span class="font-span">{{font.Name}} ({{font.Style}})</span> <i class="fa fa-trash" style="float:right;position:absolute;right:20px;font-size:16px" ng-click="deleteFont(font)" ng-if="font.Name.toLowerCase() !== \'arial\'" ng-show="isFontSelectOpen"></i> </md-option> </md-select> </md-input-container> <div class="clearfix"></div> <div class="col-xs-6 col-xs-offset-3"> <md-button class="col-xs-12 md-raised" upload-file input-id="fontLoader" ng-disabled="uploadingFont"> <div ng-if="!uploadingFont">Upload Font</div> <div class="col-xs-12" style="text-align:center;padding:5px" ng-if="uploadingFont"> <md-progress-circular style="margin:auto" md-mode="determinate" value="{{ fontUploadPercent }}" md-diameter="30px"></md-progress-circular> </div> <div id="uploadFont" class="uploadFont" style="height:0;width:0;overflow:hidden;display:none"> <input id="fontLoader" type="file" accept=".ttf,.otf" value="upload" custom-on-change="uploadFont"/> </div> </md-button> </div> </div> </md-content> </md-dialog-content> <md-dialog-actions layout="row"> <md-button class="md-primary" ng-click="create()"> {{ element === null ? \'Create Font\' : \'Update Font\' }} </md-button> <md-button ng-click="cancel()"> Cancel </md-button> </md-dialog-actions> </form> </md-dialog> ';
        e.exports = i
    },
    "777b": function(e, t, i) {
        "use strict";
        i.d(t, "b", (function() {
            return o
        }
        )),
        i.d(t, "c", (function() {
            return r
        }
        )),
        i.d(t, "a", (function() {
            return a
        }
        ));
        var n = i("3af5");
        const o = async(e,t)=>{
            const i = await n["a"].get("printful/products/" + e, {
                params: {
                    shop: t
                },
                cache: {
                    maxAge: 36e5
                }
            });
            return i.data
        }
          , r = async e=>{
            const t = await n["a"].get("printful/products", {
                params: {
                    shop: e
                },
                cache: {
                    maxAge: 36e5
                }
            });
            return t.data
        }
          , a = async(e,t)=>{
            const i = await n["a"].get("printful/printfiles/" + t, {
                params: {
                    shop: e
                },
                cache: {
                    maxAge: 36e5
                }
            });
            return i.data
        }
    },
    7821: function(e, t, i) {
        "use strict";
        i.r(t),
        function(e) {
            i("13d5");
            var t = i("2b0e")
              , n = i("0613")
              , o = i("78d7")
              , r = angular
              , a = /^(attrs|props|on|nativeOn|class|style|hook)$/
              , s = function(e) {
                return e.reduce((function(e, t) {
                    var i, n, o, r, s;
                    for (o in t)
                        if (i = e[o],
                        n = t[o],
                        i && a.test(o))
                            if ("class" === o && ("string" == typeof i && (s = i,
                            e[o] = i = {},
                            i[s] = !0),
                            "string" == typeof n && (s = n,
                            t[o] = n = {},
                            n[s] = !0)),
                            "on" === o || "nativeOn" === o || "hook" === o)
                                for (r in n)
                                    i[r] = l(i[r], n[r]);
                            else if (Array.isArray(i))
                                e[o] = i.concat(n);
                            else if (Array.isArray(n))
                                e[o] = [i].concat(n);
                            else
                                for (r in n)
                                    i[r] = n[r];
                        else
                            e[o] = t[o];
                    return e
                }
                ), {})
            };
            function l(e, t) {
                return function() {
                    e && e.apply(this, arguments),
                    t && t.apply(this, arguments)
                }
            }
            function c(e, t) {
                var i = {
                    props: "vProps",
                    data: "vData",
                    on: "vOn"
                }[e]
                  , n = new RegExp(i,"i")
                  , o = t[i];
                if (r.isDefined(o))
                    return o;
                var a = void 0;
                if (0 === (a = "htmlAttributes" === e ? function(e) {
                    return Object.keys(e).filter((function(e) {
                        var t = /^(vProps|vData|vOn|vDirectives|watchDepth|ng)/i.test(e)
                          , i = "$" === e[0];
                        return !t && !i && "class" !== e && "style" !== e
                    }
                    ))
                }(t) : Object.keys(t).filter((function(e) {
                    return n.test(e)
                }
                ))).length)
                    return null;
                var s = {};
                return a.forEach((function(e) {
                    if (i) {
                        var n = function(e, t) {
                            if (!new RegExp("^" + t).test(e))
                                return null;
                            var i, n = e.slice(t.length);
                            return (i = n).charAt(0).toLowerCase() + i.slice(1)
                        }(e, i);
                        if (!n)
                            return;
                        s[n] = t[e],
                        "vOn" === i && (s[n.replace(/([a-z0-9])([A-Z])/g, "$1-$2").toLowerCase()] = t[e])
                    } else {
                        var o = t.$attr[e]
                          , r = void 0;
                        r = "" === t[e] ? "'" + e + "'" : t[e],
                        s[o] = r
                    }
                }
                )),
                s
            }
            var d = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var i = arguments[t];
                    for (var n in i)
                        Object.prototype.hasOwnProperty.call(i, n) && (e[n] = i[n])
                }
                return e
            }
              , u = function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, i = Array(e.length); t < e.length; t++)
                        i[t] = e[t];
                    return i
                }
                return Array.from(e)
            };
            function p(e, t) {
                return function(i) {
                    var n = i;
                    t && (n = angular.isArray(i) ? [].concat(u(i)) : angular.isObject(i) ? d({}, i) : i),
                    e(n)
                }
            }
            function h(e, i, n, o, r) {
                var a = void 0;
                if ("props" === r ? a = e.props ? e.props : e.data : "attrs" === r && (a = e.htmlAttributes),
                a) {
                    var s = n.depth
                      , l = n.quirk
                      , c = function(e, i, n) {
                        return function(o) {
                            angular.isString(e) ? o(e, t["default"].set.bind(t["default"], i._v, n)) : Object.keys(e).forEach((function(r) {
                                o(e[r], t["default"].set.bind(t["default"], i._v[n], r))
                            }
                            ))
                        }
                    }(a, i, r);
                    switch (s) {
                    case "value":
                        c((function(e, t) {
                            o.$watch(e, p(t, l), !0)
                        }
                        ));
                        break;
                    case "collection":
                        c((function(e, t) {
                            o.$watchCollection(e, p(t, l))
                        }
                        ));
                        break;
                    case "reference":
                    default:
                        c((function(e, t) {
                            o.$watch(e, p(t, l))
                        }
                        ))
                    }
                }
            }
            function m(e, t) {
                if (!e)
                    return null;
                if (r.isString(e))
                    return t.$eval(e);
                var i = {};
                return Object.keys(e).forEach((function(n) {
                    i[n] = t.$eval(e[n])
                }
                )),
                i
            }
            var g = {
                Object: function(e) {
                    return [e]
                },
                Array: function(e) {
                    return e
                },
                String: function(e) {
                    return e.split(/\s*,\s*/g).filter(Boolean).map((function(e) {
                        return {
                            name: e
                        }
                    }
                    ))
                }
            }
              , f = ["class", "style"];
            function v(e, i, a, l, u) {
                if (!i.parent().length)
                    throw new Error("ngVue components must have a parent tag or they will not render");
                var p, v = u.has("$ngVue") ? u.get("$ngVue") : null, b = {
                    data: c("data", p = a),
                    props: c("props", p),
                    events: c("on", p),
                    htmlAttributes: c("htmlAttributes", p)
                }, y = function(e, t) {
                    return r.isFunction(e) ? e : t.get(e)
                }(e, u), w = function(e, t) {
                    var i = e.vDirectives;
                    if (r.isUndefined(i))
                        return null;
                    var n = t.$eval(i)
                      , o = g[n.constructor.name];
                    return o ? o(n) : null
                }(a, l) || [], C = {
                    _v: {
                        props: m(b.props || b.data, l) || {},
                        attrs: m(b.htmlAttributes, l) || {},
                        special: function(e) {
                            return f.reduce((function(t, i) {
                                var n = e[i];
                                return (n || e[e.$normalize("ng-" + i)]) && (t[i] = n),
                                t
                            }
                            ), {})
                        }(a)
                    }
                }, x = function(e, t) {
                    var i = e.events;
                    if (!i || !r.isObject(i))
                        return null;
                    var n = {};
                    return Object.keys(i).forEach((function(e) {
                        n[e] = t.$eval(i[e]);
                        var o = n[e];
                        r.isFunction(o) && (n[e] = function() {
                            var e = arguments;
                            return t.$evalAsync((function() {
                                return o.apply(null, e)
                            }
                            ))
                        }
                        )
                    }
                    )),
                    n
                }(b, l) || {}, S = !!v && v.inQuirkMode(), P = v ? v.getRootProps() : {}, k = P.mounted, _ = Object.assign({}, P);
                _.mounted = function() {
                    var e = i[0];
                    if (e.innerHTML.trim()) {
                        var t = void 0;
                        if (0 === e.children.length) {
                            var n = document.createElement("span");
                            n.innerHTML = e.innerHTML.trim(),
                            t = n
                        } else
                            t = e.children[0];
                        var o = this.$refs.__slot__;
                        o.parentNode.replaceChild(t, o)
                    }
                    r.isFunction(k) && k.apply(this, arguments)
                }
                ;
                var A = {
                    depth: a.watchDepth,
                    quirk: S
                };
                h(b, C, A, l, "props"),
                h(b, C, A, l, "attrs"),
                function(e, i, n) {
                    Object.keys(e._v.special).forEach((function(o) {
                        n.$watch((function() {
                            return i.attr(o)
                        }
                        ), (function(i) {
                            t["default"].set(e._v.special, o, i)
                        }
                        ))
                    }
                    ))
                }(C, i, l),
                t["default"].filter("date", o["a"]);
                var T = new t["default"](d({
                    name: "NgVue",
                    el: i[0],
                    data: C,
                    store: n["a"],
                    router: l.$eval(a.router),
                    render: function(e) {
                        return e(y, s([{
                            directives: w
                        }, {
                            props: C._v.props,
                            on: x,
                            attrs: C._v.attrs
                        }, C._v.special]), [e("span", {
                            ref: "__slot__"
                        })])
                    }
                }, _));
                "undefined" !== typeof a.instance && (l[a.instance] = T),
                l.$on("$destroy", (function() {
                    T.$destroy(),
                    r.element(T.$el).remove(),
                    T = null
                }
                ))
            }
            var b = "undefined" != typeof e && void 0 !== Object({
                NODE_ENV: "production",
                VUE_APP_APPCUES_SUFIX: "",
                VUE_APP_CLOUDFRONT_URL: "https://cdn.customily.com",
                VUE_APP_CUSTOMILY_OPTIONS_URL: "https://preview.customily.com",
                VUE_APP_DD_RUM_KEY: "pub8df6b90666feda9bdd905b6bdf3ac642",
                VUE_APP_ENABLE_SENTRY: "true",
                VUE_APP_ENVIRONMENT: "prod",
                VUE_APP_MAPBOX_API_URL: "https://api.mapbox.com",
                VUE_APP_MAPBOX_CDN_PATH: "mapbox-gl-js/v2.7.0/mapbox-gl.js",
                VUE_APP_MAPBOX_CSS_PATH: "mapbox-gl-js/v2.7.0/mapbox-gl.css",
                VUE_APP_MAPBOX_GEOCODER_CDN_PATH: "mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.min.js",
                VUE_APP_MAPBOX_GEOCODER_CSS_PATH: "mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.css",
                VUE_APP_MAPBOX_TOKEN: "pk.eyJ1IjoibWFydHVtbyIsImEiOiJjbDNzdHhoZXcxdWZwM2JvZW9ra2IxcTFlIn0.g5db6-dbMh4AiG1W5ctaNw",
                VUE_APP_SENTRY_AUTH_TOKEN: "2323255848e94c9c9940705fbdab4712ce42c2acd6de4469acb73537bbecbd33",
                VUE_APP_SHOPIFY_APP_URL: "https://sh.customily.com",
                VUE_APP_STAMP_COOKIE_DOMAIN: ".customily.com",
                VUE_APP_STRIPE_PUBLIC_KEY: "pk_live_yCFqcL8TXwEAiWFw4YU2zTsE00MctQk3v6",
                BASE_URL: "https://cdn.customily.com/app/",
                APP_VERSION: "1.8.7",
                APP_RELEASE: "customily-client@1.8.7",
                APP_ENVIRONMENT: "prod",
                DD_RUM_KEY: "pub8df6b90666feda9bdd905b6bdf3ac642"
            }) && ("test" === Object({
                NODE_ENV: "production",
                VUE_APP_APPCUES_SUFIX: "",
                VUE_APP_CLOUDFRONT_URL: "https://cdn.customily.com",
                VUE_APP_CUSTOMILY_OPTIONS_URL: "https://preview.customily.com",
                VUE_APP_DD_RUM_KEY: "pub8df6b90666feda9bdd905b6bdf3ac642",
                VUE_APP_ENABLE_SENTRY: "true",
                VUE_APP_ENVIRONMENT: "prod",
                VUE_APP_MAPBOX_API_URL: "https://api.mapbox.com",
                VUE_APP_MAPBOX_CDN_PATH: "mapbox-gl-js/v2.7.0/mapbox-gl.js",
                VUE_APP_MAPBOX_CSS_PATH: "mapbox-gl-js/v2.7.0/mapbox-gl.css",
                VUE_APP_MAPBOX_GEOCODER_CDN_PATH: "mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.min.js",
                VUE_APP_MAPBOX_GEOCODER_CSS_PATH: "mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.css",
                VUE_APP_MAPBOX_TOKEN: "pk.eyJ1IjoibWFydHVtbyIsImEiOiJjbDNzdHhoZXcxdWZwM2JvZW9ra2IxcTFlIn0.g5db6-dbMh4AiG1W5ctaNw",
                VUE_APP_SENTRY_AUTH_TOKEN: "2323255848e94c9c9940705fbdab4712ce42c2acd6de4469acb73537bbecbd33",
                VUE_APP_SHOPIFY_APP_URL: "https://sh.customily.com",
                VUE_APP_STAMP_COOKIE_DOMAIN: ".customily.com",
                VUE_APP_STRIPE_PUBLIC_KEY: "pk_live_yCFqcL8TXwEAiWFw4YU2zTsE00MctQk3v6",
                BASE_URL: "https://cdn.customily.com/app/",
                APP_VERSION: "1.8.7",
                APP_RELEASE: "customily-client@1.8.7",
                APP_ENVIRONMENT: "prod",
                DD_RUM_KEY: "pub8df6b90666feda9bdd905b6bdf3ac642"
            }).BABEL_ENV || !0);
            "undefined" == typeof console || "function" != typeof console.warn || b || console.warn.bind(console),
            r.module("ngVue", []).run((function() {}
            )).directive("vueComponent", ["$injector", function(e) {
                return {
                    restrict: "E",
                    link: function(t, i, n) {
                        v(n.name, i, n, t, e)
                    }
                }
            }
            ]).factory("createVueComponent", ["$injector", function(e) {
                return function(t, i) {
                    var n = {
                        restrict: "E",
                        link: function(i, n, o) {
                            v(t, n, o, i, e)
                        }
                    };
                    return r.extend(n, i)
                }
            }
            ])
        }
        .call(this, i("4362"))
    },
    7826: function(e, t, i) {
        i("490e"),
        i("69ab"),
        i("02f0"),
        i("25e6"),
        i("0e4a"),
        i("22b0"),
        i("73b8"),
        i("b65d"),
        i("a99e"),
        i("e17b"),
        i("744c"),
        i("5735"),
        i("3bfc"),
        i("5eb3"),
        i("10e3"),
        i("1b4e"),
        i("9e94"),
        i("ea0b"),
        i("d53b"),
        i("6715"),
        i("ea5b"),
        i("e1ea"),
        i("7dd0")
    },
    "78bc": function(e, t, i) {
        "use strict";
        i.r(t),
        function(e) {
            var t = i("1c46")
              , n = i.n(t);
            (function() {
                function t(t, i) {
                    const o = "https://client.livedesignerfusion.com";
                    function r(t, i, o) {
                        var r = `${t}:${i}:${o}`;
                        return n.a.createHash("md5").update(e.from(r, "utf-8")).digest("hex").toUpperCase()
                    }
                    async function a(e) {
                        var n = await i.getMe()
                          , a = `/${encodeURI(n.MelcoUsername)}/Designs/GetMetaData?ReferenceID=${e}&format=json`;
                        a += "&LDFAuth=" + r(n.MelcoUsername, n.MelcoApiKey, a);
                        var s = {
                            method: "GET",
                            url: `${o}${a}`,
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            cache: !1
                        };
                        return t.get("", null, s)
                    }
                    return {
                        getMetaData: a
                    }
                }
                t.$inject = ["HttpService", "UsersAPIService"],
                angular.module("app.shared.services").factory("MelcoAPIService", t)
            }
            )()
        }
        .call(this, i("b639").Buffer)
    },
    "78d7": function(e, t, i) {
        "use strict";
        i.d(t, "a", (function() {
            return o
        }
        ));
        var n = i("1315");
        const o = e=>{
            if (e) {
                const t = n["DateTime"].fromISO(String(e));
                return t.toLocaleString(n["DateTime"].DATETIME_MED)
            }
            return e
        }
    },
    "78fb": function(e, t, i) {
        "use strict";
        i.r(t),
        i.d(t, "VANCE_ERROR_CODE", (function() {
            return r
        }
        ));
        const n = "https://api-service.vanceai.com/web_api/v1"
          , o = Object.freeze({
            cartoonize: {
                job: "cartoonize",
                config: {
                    module: "cartoonize",
                    module_params: {
                        model_name: "CartoonizeStable"
                    }
                }
            },
            anime: {
                job: "animegan",
                config: {
                    module: "animegan2",
                    module_params: {
                        model_name: "Animegan2Stable",
                        single_face: !0
                    }
                }
            }
        })
          , r = Object.freeze({
            invalid_token: 30001,
            insufficient_credits: 30004,
            internal_error: 10010
        })
          , a = Object.freeze({
            finish: "finish",
            waiting: "waiting",
            process: "process",
            fatal: "fatal"
        })
          , s = (e,t,i="json")=>new Promise((o,r)=>{
            const a = new XMLHttpRequest;
            a.onload = ()=>200 != a.status ? r(a) : a.response.code && 200 != a.response.code ? r({
                msg: a.response.msg,
                code: a.response.code
            }) : o(a.response.data || a.response),
            a.open("POST", `${n}/${t}`),
            a.responseType = i,
            a.send(e)
        }
        );
        (function() {
            function e() {
                const e = (e,t)=>{
                    const i = new FormData;
                    return i.append("api_token", e),
                    i.append("file", t),
                    s(i, "upload")
                }
                  , t = (e,t,i=o.anime)=>{
                    const n = new FormData;
                    return n.append("api_token", e),
                    n.append("uid", t),
                    n.append("jconfig", JSON.stringify(i)),
                    s(n, "transform")
                }
                  , i = (e,t)=>{
                    const i = new FormData;
                    return i.append("api_token", e),
                    i.append("trans_id", t),
                    s(i, "download", "blob")
                }
                  , n = (e,t)=>{
                    const i = new FormData;
                    return i.append("api_token", e),
                    i.append("trans_id", t),
                    s(i, "progress")
                }
                  , r = async(e,t,i)=>{
                    switch (i) {
                    case a.finish:
                        return;
                    case a.fatal:
                        throw "There seems to be an error with VanceAI. Please try again or contact VanceAI support.";
                    case a.waiting:
                    case a.process:
                        await new Promise(e=>setTimeout(e, 200));
                        const {status: i} = await n(e, t);
                        await r(e, t, i);
                        break
                    }
                }
                  , l = async(n,o)=>{
                    let a, s;
                    const l = new Promise((e,t)=>{
                        a = e,
                        s = t
                    }
                    );
                    try {
                        const {uid: s} = await e(n, o)
                          , {trans_id: l, status: c} = await t(n, s);
                        await r(n, l, c);
                        const d = await i(n, l);
                        a(d)
                    } catch (error) {
                        s(error)
                    }
                    return l
                }
                ;
                return {
                    cartoonizeImage: l
                }
            }
            angular.module("app.shared.services").factory("ImageFiltersAPIService", e)
        }
        )()
    },
    7912: function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i, n, o, r, a) {
                t.showHeader = !1,
                e.showRegistrationForm = !0,
                e.recaptchaPublicKey = "6LdxWcYUAAAAAE8LVGxSGubGleKfjYF5LqjKR9HP",
                e.managedBy = n.search().mngBy,
                e.storeType = "chipadmin" === e.managedBy ? "Custom" : "WooCommerce",
                e.storeUrlRegex = "",
                e.storeChanged = function() {
                    switch (e.storeType) {
                    case "Shopify":
                        e.storeUrlRegex = /^[a-zA-Z-0-9]+\.myshopify\.com$/;
                        break;
                    default:
                        e.storeUrlRegex = /^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@%._\+~#=]{1,256}\.[a-zA-Z0-9()]{2,63}\b([-a-zA-Z0-9()@%_\+.~#?&//=]*)$/;
                        break
                    }
                }
                ,
                e.storeChanged(),
                e.signUp = function() {
                    "" === r.getResponse() ? i.show(i.alert().parent(document.body).clickOutsideToClose(!0).title("User creation").textContent("Resolve the captcha first").ok("OK!")) : e.password === e.passwordConfirmation ? (a.start(),
                    o.registerUser(e.name, e.username, e.email, e.password, e.passwordConfirmation, e.managedBy, e.storeType, e.storeUrl, r.getResponse()).then((function() {
                        e.showRegistrationForm = !1,
                        a.stop()
                    }
                    )).catch((function(e) {
                        a.stop(),
                        r.reload(),
                        i.show(i.alert().parent(document.body).clickOutsideToClose(!0).title("User creation").textContent(e.data).ok("OK!"))
                    }
                    ))) : i.show(i.alert().parent(document.body).clickOutsideToClose(!0).title("Password error").textContent("Passwords don't match").ok("OK!"))
                }
            }
            e.$inject = ["$scope", "$rootScope", "$mdDialog", "$location", "UsersAPIService", "vcRecaptchaService", "blockUI"],
            angular.module("app.ctrls").controller("SignUpCtrl", e)
        }
        )()
    },
    "7a30": function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("b421")
          , o = i("576f")
          , r = i("1424")
          , a = i("ec26")
          , s = i("c5c6");
        (function() {
            function e(e, t, i, l, c, d, u, p, h, m, g, f) {
                async function v(t, o, v, y, w, C, x, S, P, k, _, A, T, E, O) {
                    const I = []
                      , D = {}
                      , {eps: F} = e.getProduct()
                      , M = F.imagePlaceHoldersEps.find(e=>e.isPrintArea);
                    for (const e of T) {
                        let i = e;
                        if (P) {
                            const t = Object(a["a"])();
                            D[e.id] = t,
                            i = {
                                ...e,
                                id: t,
                                type: "preview"
                            }
                        }
                        t.addGroup(i, !0)
                    }
                    if (console.log("Adding texts"),
                    w)
                        for (let e = 0; e < w.length; e++) {
                            const n = async function(e) {
                                var n = o.find((function(t) {
                                    return t.Path == e.fontPath
                                }
                                ));
                                const r = e.centerX
                                  , a = e.centerY
                                  , s = e.width
                                  , d = e.height
                                  , u = e.width;
                                var p = new Map;
                                !e.fontsMap || e.fontsMap instanceof Map ? p = e.fontsMap : JSON.parse(e.fontsMap).map((function(e) {
                                    p.set(e[0], e[1])
                                }
                                ));
                                var h = new Map;
                                !e.fontColorsMap || e.fontColorsMap instanceof Map ? h = e.fontColorsMap : JSON.parse(e.fontColorsMap).map((function(e) {
                                    h.set(e[0], e[1])
                                }
                                ));
                                var m = i.parseColorFromProperty(e.color)
                                  , g = i.parseColorFromProperty(e.outlineColor)
                                  , f = new fabric.BoundedText({
                                    version: e.Version,
                                    width: s,
                                    height: d,
                                    originX: "center",
                                    originY: "center",
                                    left: r,
                                    top: a,
                                    strokeDashArray: t.getDashedArray(),
                                    angle: e.rotation,
                                    centeredRotation: !0,
                                    textAlign: e.textAlign,
                                    textVerticalAlign: e.textVerticalAlign,
                                    skewX: e.skewX,
                                    skewY: e.skewY,
                                    disableSkewing: !1,
                                    lockUniScalingWithSkew: !0,
                                    lockScalingFlip: !0,
                                    originalMinSizePx: e.minSizePx,
                                    originalMaxSizePx: e.maxSizePx,
                                    originalWidth: u,
                                    originalHeight: e.height,
                                    multiline: e.multiline,
                                    caps: e.caps,
                                    fontPath: n.Path,
                                    fontName: n.Name,
                                    color: m,
                                    outlineColor: g,
                                    fontLibraryId: e.fontLibraryId,
                                    colorLibraryId: e.colorLibraryId,
                                    fontOption: 1,
                                    fontColorOption: 1,
                                    id: e.id,
                                    uuid: e.uuid,
                                    zIndex: e.zIndex,
                                    fontsMap: p,
                                    fontColorsMap: h,
                                    Itext: e.Itext,
                                    textures: e.textures,
                                    tracking: e.tracking,
                                    addedOnEdit: e.addedOnEdit,
                                    lineSpacing: e.lineSpacing,
                                    locked: e.locked,
                                    visible: e.visible,
                                    name: e.name,
                                    prefix: e.prefix,
                                    suffix: e.suffix,
                                    ligatures: e.ligatures,
                                    isOverlay: e.isOverlay,
                                    isPrintArea: e.isPrintArea,
                                    groupId: D[e.groupId] || e.groupId
                                });
                                return f.setMinSizePx(l.calculateFontSizesFromObject(f).min),
                                f.setMaxSizePx(l.calculateFontSizesFromObject(f).max),
                                f.setColor(c.colorToWeb(m)),
                                f.setFontFamily(n.Name + "_" + n.Style),
                                f.setCaps(e.caps),
                                f.setOutlineColor(c.colorToWeb(g)),
                                f.setOutlineWidth(e.outlineWidth),
                                f.setStrokeWidth(t.getVisibleStrokeWidth()),
                                v && (f.lockMovementY = !0,
                                f.lockMovementX = !0,
                                f.lockScalingX = !0,
                                f.lockScalingY = !0,
                                f.lockRotation = !0,
                                f.setStrokeWidth(0)),
                                await i.changeFontColorOption(null, f, 1, t),
                                await i.changeFontOption(f, 1, t),
                                f
                            }
                              , r = w[e];
                            I.push(async()=>await n(r))
                        }
                    if (console.log("Adding circular texts"),
                    C)
                        for (let e = 0; e < C.length; e++) {
                            const n = async function(e) {
                                var n = o.find((function(t) {
                                    return t.Path == e.fontPath
                                }
                                ));
                                const r = e.centerX
                                  , a = e.centerY
                                  , s = e.horizontalDiameter
                                  , d = e.verticalDiameter;
                                var u = new Map;
                                !e.fontsMap || e.fontsMap instanceof Map ? u = e.fontsMap : JSON.parse(e.fontsMap).map((function(e) {
                                    u.set(e[0], e[1])
                                }
                                ));
                                var p = new Map;
                                !e.fontColorsMap || e.fontColorsMap instanceof Map ? p = e.fontColorsMap : JSON.parse(e.fontColorsMap).map((function(e) {
                                    p.set(e[0], e[1])
                                }
                                ));
                                var h = i.parseColorFromProperty(e.color)
                                  , m = new fabric.PathIText("A",{
                                    pathWidth: t.getVisibleStrokeWidth(),
                                    originX: "center",
                                    originY: "center",
                                    left: r,
                                    top: a,
                                    angle: e.rotation,
                                    centeredRotation: !0,
                                    textAlign: e.textAlign,
                                    skewX: e.skewX,
                                    skewY: e.skewY,
                                    disableSkewing: !1,
                                    lockUniScalingWithSkew: !0,
                                    lockScalingFlip: !0,
                                    startAngle: e.startAngle,
                                    endAngle: e.endAngle,
                                    lockAngleControls: !0,
                                    originalFontSize: e.fontSize,
                                    originalHorizontalDiameter: e.horizontalDiameter,
                                    fontSize: l.calculateCircularFontSizeFromDimensions(s, e.horizontalDiameter, e.fontSize),
                                    horizontalDiameter: s,
                                    verticalDiameter: d,
                                    convex: e.convex,
                                    caps: e.caps,
                                    fontPath: n.Path,
                                    fontName: n.Name + "_" + n.Style,
                                    fontFamily: n.Name + "_" + n.Style,
                                    fill: c.colorToWeb(h),
                                    color: h,
                                    fontLibraryId: e.fontLibraryId,
                                    colorLibraryId: e.colorLibraryId,
                                    stroke: e.outlineColor,
                                    strokeWidth: e.outlineWidth,
                                    id: e.id,
                                    uuid: e.uuid,
                                    zIndex: "undefined" === typeof e.zIndex ? 0 : e.zIndex,
                                    fontsMap: u,
                                    fontColorsMap: p,
                                    addedOnEdit: e.addedOnEdit,
                                    locked: e.locked,
                                    visible: e.visible,
                                    name: e.name,
                                    prefix: e.prefix,
                                    suffix: e.suffix,
                                    isOverlay: e.isOverlay,
                                    isPrintArea: e.isPrintArea,
                                    groupId: D[e.groupId] || e.groupId
                                });
                                return v && (m.lockMovementY = !0,
                                m.lockMovementX = !0,
                                m.lockScalingX = !0,
                                m.lockScalingY = !0,
                                m.lockRotation = !0,
                                m.set("pathWidth", 0)),
                                await i.changeFontColorOption(null, m, 1, t),
                                await i.changeFontOption(m, 1, t),
                                m
                            }
                              , r = C[e];
                            I.push(async()=>await n(r))
                        }
                    if (console.log("Adding image placeholders"),
                    x)
                        for (let e = 0; e < x.length; e++) {
                            const o = function(e) {
                                return new Promise(async(o,r)=>{
                                    const a = e.centerX
                                      , l = e.centerY;
                                    let h = e.width
                                      , m = e.height;
                                    M && O && e.isPrintArea && !v && (h = M.width,
                                    m = M.height,
                                    e = M);
                                    var g = new Map;
                                    !e.dynamicImagesPath || e.dynamicImagesPath instanceof Map ? g = null : JSON.parse(e.dynamicImagesPath).map((function(e) {
                                        Array.isArray(e) ? g.set(e[0], e[1]) : g.set(Number(e.position), e.path)
                                    }
                                    ));
                                    var f = i.parseColorFromProperty(e.color);
                                    let b = !1;
                                    "stopandstair" === y && (b = !0);
                                    var w = new fabric.ImagePlaceholder(null,{
                                        width: h,
                                        height: m,
                                        left: a,
                                        top: l,
                                        originX: "center",
                                        originY: "center",
                                        angle: e.rotation,
                                        id: e.id,
                                        uuid: e.uuid,
                                        strokeWidth: v ? 0 : t.getVisibleStrokeWidth(),
                                        strokeDashArray: t.getDashedArray(),
                                        stroke: "black",
                                        type: "image-placeholder",
                                        centeredRotation: !0,
                                        skewX: e.skewX,
                                        skewY: e.skewY,
                                        disableSkewing: !1,
                                        lockUniScalingWithSkew: !b,
                                        lockScalingFlip: !0,
                                        coverMaskArea: e.coverMaskArea,
                                        fullColor: e.fullColor,
                                        grading: e.grading,
                                        zIndex: e.zIndex,
                                        hasStaticImage: e.hasStaticImage,
                                        imageUrl: e.imageUrl,
                                        maskPath: e.maskPath,
                                        dynamicImagesPath: g,
                                        color: f,
                                        imageLibraryId: e.imageLibraryId,
                                        colorLibraryId: e.colorLibraryId,
                                        colors: e.colors || [],
                                        selectedColorPosition: 1,
                                        rotationStep: e.rotationStep,
                                        removeWhiteBackground: e.removeWhiteBackground,
                                        RemoveBackground: e.RemoveBackground,
                                        addedOnEdit: e.addedOnEdit,
                                        cartoonize: e.cartoonize,
                                        CutoutFace: e.CutoutFace,
                                        removeBackgroundCOP: e.removeBackgroundCOP,
                                        locked: e.locked,
                                        selectable: !e.locked,
                                        visible: e.visible,
                                        name: e.name,
                                        preventEditMode: v || g,
                                        isOverlay: e.isOverlay,
                                        isPrintArea: e.isPrintArea,
                                        isColorOptions: e.isColorOptions,
                                        podProductImagesMetadata: e.podProductImagesMetadata,
                                        groupId: D[e.groupId] || e.groupId,
                                        mapConfig: e.mapConfig
                                    });
                                    if (w.setOpacity(e.opacity),
                                    w.fullColor || w.grading ? !w.fullColor && w.grading ? w.setMode(fabric.IMAGE_MODE_GRADING) : w.setMode(fabric.IMAGE_MODE_FULL_COLOR) : w.setMode(fabric.IMAGE_MODE_SINGLE_COLOR),
                                    w.set("imageColor", c.colorToWeb(f)),
                                    v && (w.lockMovementY = !0,
                                    w.lockMovementX = !0,
                                    w.lockScalingX = !0,
                                    w.lockScalingY = !0,
                                    w.lockRotation = !0),
                                    e.hasStaticImage)
                                        d.showStaticImage(t, w, e);
                                    else if (e.mapConfig) {
                                        const i = "string" == typeof e.mapConfig ? JSON.parse(e.mapConfig) : e.mapConfig
                                          , n = await s["getStaticMapImage"](i);
                                        d.showStaticImage(t, w, {
                                            imageUrl: n
                                        })
                                    } else
                                        e.dynamicImagesPath && await u.showDynamicImage(t, w, 1);
                                    if (await u.changeDynamicImageColorPosition(w, 1, null, t),
                                    P && _ && w.isColorOptions && (w.locked = !1,
                                    w.visible = !0),
                                    w.maskPath) {
                                        const e = new Image;
                                        e.onload = function() {
                                            p.isFullMask(e) ? w.maskPath = null : w.setMask(this),
                                            o(w)
                                        }
                                        ,
                                        e.onerror = function() {
                                            r()
                                        }
                                        ,
                                        e.crossOrigin = "Anonymous",
                                        e.src = Object(n["a"])(w.maskPath)
                                    } else
                                        o(w)
                                }
                                )
                            }
                              , r = x[e];
                            I.push(async()=>await o(r))
                        }
                    if (console.log("Adding vectors"),
                    S)
                        for (const e of S) {
                            const i = async function(e) {
                                const i = {
                                    ...e
                                };
                                i.groupId = D[i.groupId] || i.groupId;
                                const n = await h.setVectorPlaceholderProperties(i, t, v, !0);
                                return n.addedOnEdit = i.addedOnEdit,
                                n
                            };
                            I.push(async()=>await i(e))
                        }
                    const $ = await f.runTasksInChunks(I);
                    if (P)
                        m.scaleCanvasElementsForPreview(t, $);
                    else if (O && !v)
                        m.scaleCanvasElementsForPreview(t, $.filter(e=>e.isPrintArea), !0);
                    else if ($.some(e=>e.addedOnEdit)) {
                        const e = $.filter(e=>e.addedOnEdit);
                        m.scaleCanvasElementsForPreview(t, e);
                        for (const t of e)
                            t.addedOnEdit = !1
                    }
                    for (const e of $)
                        e && (t.add(e, !0, !1),
                        "bounded-text" === e.type && e.textures && e.textures.length > 0 && g.changeFontTexture(e.textures[0].texturePath, e, 1).then(()=>{
                            t.renderAll()
                        }
                        ));
                    if (P && _ && !E && b(t, A, "Product colors", !1),
                    Object(r["o"])(t),
                    t.renderAll(),
                    k) {
                        console.log("Upgrading colors!");
                        for (var B = t._objects, j = 0; j < B.length; j++) {
                            var L = B[j];
                            "bounded-text" === L.type ? (L.fontColorsMap.forEach((function(e, t, n) {
                                n.set(t, i.upgradeOldColor(e))
                            }
                            )),
                            L.color = i.upgradeOldColor(L.color),
                            L.outlineColor = i.upgradeOldColor(L.outlineColor)) : "path-itext" === L.type ? (L.fontColorsMap.forEach((function(e, t, n) {
                                n.set(t, i.upgradeOldColor(e))
                            }
                            )),
                            L.color = i.upgradeOldColor(L.color)) : "image-placeholder" === L.type && (L.color = i.upgradeOldColor(L.color))
                        }
                    }
                }
                function b(e, t, i="Product colors", n=!0) {
                    const o = u.createDynamicImage(e, Math.max(...e.getObjects().map(e=>e.id)) + 1);
                    e.add(o, !0, n),
                    o.name = i,
                    Object(r["i"])(o, e),
                    o.set("locked", !!t),
                    o.set("visible", !0),
                    o.setWidth(e.getArtworkWidth()),
                    o.setHeight(e.getArtworkHeight()),
                    o.setCoords();
                    const a = e.getObjects().find(e=>e.isPrintArea);
                    if (a && (o.zIndex = a.zIndex - 1),
                    t) {
                        o.podProductImagesMetadata = t;
                        for (const e of t.images)
                            o.dynamicImagesPath.set(e.position, e.path)
                    }
                    return u.showDynamicImage(e, o, 1),
                    o
                }
                function y(t, i, n) {
                    for (let o = 0; o < t.getObjects().length; o++) {
                        const i = t.getObjects()[o];
                        let n = null
                          , r = null;
                        "bounded-text" == i.type ? (i.fontsMap && (i.fontPath = i.fontsMap.get(1),
                        n = JSON.stringify(Array.from(i.fontsMap.entries()))),
                        i.fontColorsMap && (i.color = i.fontColorsMap.get(1),
                        r = JSON.stringify(Array.from(i.fontColorsMap.entries()))),
                        e.addPreviewText(i.left, i.top, i.color, i.angle, i.skewX, i.skewY, i.width, i.height, i.minSizePx, i.maxSizePx, i.multiline, i.caps, i.fontPath, i.getTextAlign(), i.outlineColor, i.getOutlineWidth(), i.zIndex, i.id, i.uuid, n, r, i.Itext, i.textures, i.tracking, i.lineSpacing, i.colorLibraryId, i.fontLibraryId, i.version, !1, i.locked, i.visible, i.name, i.prefix, i.suffix, i.ligatures, i.referenceId, i.isPrintArea, i.isOverlay, i.groupId, i.textVerticalAlign)) : "path-itext" == i.type ? (i.fontsMap && (i.fontPath = i.fontsMap.get(1),
                        n = JSON.stringify(Array.from(i.fontsMap.entries()))),
                        i.fontColorsMap && (i.fill = c.colorToWeb(i.fontColorsMap.get(1)),
                        r = JSON.stringify(Array.from(i.fontColorsMap.entries()))),
                        e.addPreviewCircularText(i.left, i.top, i.fill, i.angle, i.skewX, i.skewY, i.horizontalDiameter, i.verticalDiameter, i.fontSize, i.caps, i.fontPath, i.textAlign, i.convex, i.stroke, i.strokeWidth, i.zIndex, i.id, i.uuid, n, r, i.colorLibraryId, i.fontLibraryId, i.startAngle, i.endAngle, !1, i.locked, i.visible, i.name, i.prefix, i.suffix, i.referenceId, i.isPrintArea, i.isOverlay, i.groupId)) : "image-placeholder" == i.type ? e.addPreviewPlaceholderImage(i.left, i.top, i.angle, i.skewX, i.skewY, i.getWidth(), i.getHeight(), i.color, i.fullColor, i.grading, i.getOpacity(), i.zIndex, i.id, i.uuid, i.hasStaticImage, i.imageUrl, i.maskPath, i.dynamicImagesPath, i.imageLibraryId, i.colors, i.colorLibraryId, i.rotationStep, i.coverMaskArea, i.removeWhiteBackground, i.RemoveBackground, !1, i.locked, i.visible, i.name, i.isPrintArea, i.isOverlay, i.isColorOptions, i.podProductImagesMetadata, i.groupId, i.mapConfig, i.cartoonize, i.CutoutFace, i.removeBackgroundCOP) : "vector-placeholder" === i.type && e.addPreviewVectorEPS(i.left, i.top, i.angle, i.skewX, i.skewY, i.width, i.height, i.opacity, i.vectors, i.colors, i.allowUserUpload, i.zIndex, i.id, i.uuid, i.colorLibraryId, i.vectorLibraryId, i.applyColoring, i.coverMaskArea, i.rotationStep, !1, i.locked, i.visible, i.name, i.isPrintArea, i.isOverlay, i.groupId)
                    }
                    "image" === i ? (e.setPreviewImage(n),
                    e.setPreviewBgColor(null)) : (e.setPreviewImage(null),
                    e.setPreviewBgColor(t.backgroundColor)),
                    e.setPreviewImgSize(t.getArtworkWidth(), t.getArtworkHeight())
                }
                async function w(i, n, a, s, l, c) {
                    let d;
                    if (n && a) {
                        const i = e.getProduct().id;
                        d = await t.getProduct(i)
                    }
                    Object(r["o"])(i),
                    i.discardActiveObject().renderAll();
                    const u = e.getPreviewImage();
                    if (e.clearPreview(),
                    e.addGroups(i.getElementsGroups()),
                    d)
                        for (let e = 0; e < i.getObjects().length; e++) {
                            const t = i.getObjects()[e];
                            if (t.locked)
                                if ("bounded-text" === t.type) {
                                    const e = d.preview.textsPreview.find(e=>e.uuid === t.uuid);
                                    e && (t.visible = e.visible)
                                } else if ("path-itext" === t.type) {
                                    const e = d.preview.circularTextsPreview.find(e=>e.uuid === t.uuid);
                                    e && (t.visible = e.visible)
                                } else if ("image-placeholder" === t.type) {
                                    const e = d.preview.imagePlaceHoldersPreview.find(e=>e.uuid === t.uuid);
                                    e && (t.visible = e.visible)
                                } else if ("vector-placeholder" === t.type) {
                                    const e = d.preview.vectorEPSPreview.find(e=>e.uuid === t.uuid);
                                    e && (t.visible = e.visible)
                                }
                        }
                    if (!s && a)
                        y(i, c, u);
                    else if (l) {
                        const e = await Object(o["d"])("preview", l);
                        y(i, c, e.Path)
                    } else
                        y(i, c, u)
                }
                return {
                    saveStep2: w,
                    loadStep2IntoCanvas: v,
                    addProductColorElement: b
                }
            }
            e.$inject = ["ProductService", "ProductAPIService", "MultipleFontService", "GeneralMathUtils", "ElementsColorService", "TestImageService", "DynamicImageService", "ImageUtilService", "DynamicVectorService", "CanvasUtilService", "TextureService", "ExecutionService"],
            angular.module("app.shared.services").factory("PreviewUtilService", e)
        }
        )()
    },
    "7b21": function(e, t, i) {
        e.exports = i.p + "img/groupOpen.5c53b3dd.svg?x-request=html"
    },
    "7b5f": function(e, t, i) {},
    "7b87": function(e, t, i) {
        var n = i("4719")
          , o = i("56cf")
          , r = n(o)
          , a = '<title>Customily - Sign up</title> <div class="page page-auth signup-page gradient-customily-bg" style="min-height:100%" ng-controller="SignUpCtrl" ng-cloak> <div class="auth-container row" ng-show="showRegistrationForm"> <div class="form-head mb20 col-xs-12"> <img class="center-block" style="width:100px" src="' + r + '"/> <h5 class="text-normal h5 text-center">Register your new account</h5> </div> <div class="form-container col-xs-12"> <form name="signUpForm" class="form-vertical" ng-submit="signUp()"> <md-input-container class="col-xs-6"> <label>Ecommerce Platform</label> <md-select ng-model="storeType" ng-change="storeChanged()" required ng-disabled="managedBy === \'chipadmin\'"> <md-option ng-value="\'Shopify\'">Shopify</md-option> <md-option ng-value="\'BigCommerce\'">BigCommerce</md-option> <md-option ng-value="\'WooCommerce\'">WooCommerce</md-option> <md-option ng-value="\'Magento\'">Magento</md-option> <md-option ng-value="\'Walmart\'">Walmart</md-option> <md-option ng-value="\'Weebly\'">Weebly</md-option> <md-option ng-value="\'Wix\'">Wix</md-option> <md-option ng-value="\'Etsy\'">Etsy</md-option> <md-option ng-value="\'Miva\'">Miva</md-option> <md-option ng-value="\'Custom\'">Custom</md-option> </md-select> </md-input-container> <md-input-container class="md-block col-xs-6" ng-show="storeType !== \'Shopify\'" flex-gt-sm> <label>Ecommerce Url</label> <input name="storeUrl" type="text" placeholder="{{ storeType === \'Shopify\' ? \'domain.myshopify.com\' : \'Ecommerce Url\' }}" ng-model="storeUrl" ng-pattern="storeUrlRegex" required/> <div ng-messages="signUpForm.storeUrl.$error" multiple="multiple"> <div ng-message="required">Ecommerce URL is required!</div> <div ng-message="pattern"> <span ng-show="storeType === \'Shopify\'">Shopify URL must be given as <b><u>domain.myshopify.com</u></b></span> <span ng-show="storeType !== \'Shopify\'">Invalid URL</span> </div> </div> </md-input-container> <div ng-show="storeType !== \'Shopify\'"> <md-input-container class="md-block col-xs-12" flex-gt-sm> <label>Company Name</label> <input name="name" type="text" placeholder="Type your company name" ng-model="name" required/> <div ng-messages="signUpForm.name.$error" multiple="multiple"> <div ng-message="required">Your name is required!</div> </div> </md-input-container> <md-input-container class="md-block col-xs-6" flex-gt-sm> <label>Username</label> <input name="username" type="text" placeholder="Type your username" ng-model="username" ng-pattern="/^[a-zA-Z0-9]*$/" required/> <div ng-messages="signUpForm.username.$error" multiple="multiple"> <div ng-message="required">A username is required!</div> <div ng-message="pattern">Username can only contain letters and numbers</div> </div> </md-input-container> <md-input-container class="md-block col-xs-6" flex-gt-sm> <label>Email</label> <input name="email" type="email" placeholder="Type your email" ng-model="email" required/> <div ng-messages="signUpForm.email.$error" multiple="multiple"> <div ng-message="required">Email is required!</div> <div ng-message="pattern">Not a valid email</div> </div> </md-input-container> <md-input-container class="md-block col-xs-6" flex-gt-sm> <label>Password</label> <input name="password" type="password" placeholder="Type your password" minlength="8" ng-model="password" required/> <div ng-messages="signUpForm.password.$error" multiple="multiple"> <div ng-message="required">A password is required!</div> <div ng-message="minlength">Password must be at least 8 characters long</div> </div> </md-input-container> <md-input-container class="md-block col-xs-6" flex-gt-sm> <label>Confirm Password</label> <input name="passwordConfirmation" type="password" placeholder="Re-enter your password" ng-minlength="8" ng-model="passwordConfirmation" required/> <div ng-messages="signUpForm.passwordConfirmation.$error" multiple="multiple"> <div ng-message="required">Password confirmation is required!</div> <div ng-message="minlength">Password must be at least 8 characters long</div> </div> </md-input-container> <div class="mb20 col-xs-12 recaptcha" vc-recaptcha key="recaptchaPublicKey"></div> <div class="btn-group-justified col-xs-12"> <md-button id="submit" type="submit" class="md-raised md-primary w100 m0" ng-disabled="!signUpForm.$valid">Sign Up</md-button> </div> </div> <div ng-show="storeType === \'Shopify\'" class="col-xs-12 text-center mb20 mt20"> <div>Find us on the Shopify App Store!</div> <div class="mt10"> <md-button style="padding-left:20px;padding-right:20px" class="btn-small md-raised md-primary m0" href="https://apps.shopify.com/customily-options-3">Install Customily</md-button> </div> </div> </form> </div> </div> <div class="form-container" ng-show="!showRegistrationForm" style="color:#fff"> <h1><b>Thank you!</b></h1> <p> Your account has been registered! Once we have reviewed it, you\'ll receive a confirmation email at <a style="cursor:pointer">{{ email }}</a> </p> </div> </div> ';
        e.exports = a
    },
    "7bce": function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i, n) {
                t.showHeader = !1,
                e.verificationComplete = !1,
                e.verificationError = !1;
                var o = i.search().token;
                if (o) {
                    let t;
                    const i = ()=>{
                        n.verifyUser(o).then((function(n) {
                            "Succeeded" === n ? (e.verificationComplete = !0,
                            clearTimeout(t)) : "Failed" === n ? (e.verificationError = !0,
                            clearTimeout(t)) : setTimeout(i, 2e3)
                        }
                        )).catch((function() {
                            e.verificationError = !0,
                            clearTimeout(t)
                        }
                        ))
                    }
                    ;
                    i()
                } else
                    e.verificationError = !0;
                e.goToLogin = function() {
                    i.path("/signin")
                }
            }
            e.$inject = ["$scope", "$rootScope", "$location", "UsersAPIService"],
            angular.module("app.ctrls").controller("ValidationCtrl", e)
        }
        )()
    },
    "7dd0": function(e, t, i) {},
    "7e40": function(e, t, i) {
        e.exports = i.p + "img/x.7d170ab9.svg?x-request=html"
    },
    "7ec2": function(e, t, i) {
        "use strict";
        i("f6ec")
    },
    8: function(e, t) {},
    8007: function(e, t) {
        var i = '<md-dialog> <div style="width:500px"> <md-toolbar style="min-height:45px;height:45px"> <div class="md-toolbar-tools" style="background:linear-gradient(141deg,#849dd8 15%,#8bc4d3 75%)"> <div class="text-center w100"> <h2>Design Name</h2> </div> </div> </md-toolbar> <md-dialog-content> <md-content class="md-padding"> <form name="designNameModalForm" ng-submit="onSubmit()"> <div class="row" style="margin-right:15px;margin-left:15px"> <md-input-container class="md-block mb0"> <label style="padding-left:0">Design Name</label> <input required md-no-asterisk type="text" name="designName" ng-model="name"/> </md-input-container> <md-button class="md-raised md-primary w100 m0" style="margin-bottom:15px;margin-top:15px" type="submit">Create Design</md-button> </div> </form> </md-content> </md-dialog-content> </div> </md-dialog> ';
        e.exports = i
    },
    8057: function(e, t) {
        (function() {
            function e() {
                const e = async e=>new Promise((t,i)=>{
                    requestAnimationFrame(async()=>{
                        try {
                            await Promise.resolve(e()),
                            t()
                        } catch (error) {
                            console.error(error),
                            i(error)
                        }
                    }
                    )
                }
                )
                  , t = async t=>{
                    await e(t)
                }
                  , i = async(e,t=6)=>(e = e || [],
                e.length ? await asyncPool(t, e, async e=>await e()) : []);
                return {
                    delayedExecution: t,
                    runTasksInChunks: i
                }
            }
            angular.module("app.shared.services").factory("ExecutionService", e)
        }
        )()
    },
    8065: function(e, t, i) {
        "use strict";
        i.r(t),
        function(e) {
            var t = i("ec26")
              , n = i("1424")
              , o = i("0bad")
              , r = i("afd9")
              , a = i("d152")
              , s = i("a528")
              , l = i("13c1")
              , c = i("b961")
              , d = i("63c9")
              , u = i("2e3a")
              , p = i("b421")
              , h = i("576f")
              , m = i("10a3")
              , g = i("4372")
              , f = i("c5c6")
              , v = i("78fb")
              , b = i("555b");
            const y = i("fbd1");
            (function() {
                function w(w, C, x, S, P, k, _, A, T, E, O, I, D, F, M, B, j, L, R, U, z, N, V, G, W, H, X, Y, q, K, Z, Q, J, ee, te) {
                    I.headerMode = "single",
                    I.showTemplateResizeBtn = !0,
                    w.page = {
                        pageWidthDim: 100,
                        pageHeightDim: 100,
                        productName: "Sample Template",
                        fromImage: null,
                        exportFormat: "eps",
                        exportColorMode: "rgb",
                        mergeOutput: !1,
                        referenceId: null
                    },
                    w.designTitle = "";
                    var ie = !1;
                    w.skipTemplateExitAlert = !1,
                    w.canEditId = !1,
                    w.pngPpiError = !1,
                    w.hasPrintAreaElements = !1,
                    w.previewMode = "/createProduct3" == x.$$path,
                    w.childTemplateProduct = E.getChildTemplateProduct(),
                    w.isChildTemplateProduct = w.childTemplateProduct && w.childTemplateProduct.parentId,
                    w.editMode = !w.isChildTemplateProduct && "" != E.getProduct().id,
                    w.productGuidPromise = w.editMode ? Promise.resolve(E.getProduct().id) : D.generateProductGUID(),
                    w.colorSamplerActive = !1,
                    w.isBackgroundEPS = !1,
                    w.reloadedNonEPSBaseImage = !1,
                    w.showBaseFileReplace = !1,
                    w.showPodProductAssignerModal = !1,
                    w.melcoTextIds = [],
                    w.melcoIsValidId = !0,
                    w.forMyDesigns = !!x.search().forMyDesigns,
                    w.accordionsStatus = {
                        textTransform: !1,
                        textCharacter: !1,
                        textColor: !1,
                        circularTextTransform: !1,
                        circularTextCharacter: !1,
                        circularTextColor: !1,
                        imageTransform: !1,
                        imageBehaviour: !1,
                        mapBehavior: !1,
                        vectorTransform: !1,
                        vectorBehaviour: !1,
                        vectorMode: !1
                    },
                    w.DPI = 300,
                    w.exportPPI = 72;
                    const ne = 1024
                      , oe = 1024;
                    w.elementAlignType = "selection";
                    var re = 0
                      , ae = 0
                      , se = null
                      , le = ""
                      , ce = ""
                      , de = null;
                    w.selectedColorLibraryName = "",
                    w.selectedFontLibraryName = "",
                    w.selectedImageLibraryName = "",
                    w.selectedVectorLibraryName = "",
                    w.textSelected = null,
                    w.selectedTextProperties = {
                        text: "",
                        centerX: 0,
                        centerY: 0,
                        rotation: 0,
                        width: 0,
                        height: 0,
                        minSizePx: 0,
                        maxSizePx: 0,
                        multiline: !1,
                        caps: !1,
                        fontPath: "",
                        fontName: "",
                        color: "#000000",
                        id: 0,
                        currentFontSize: 0,
                        outlineWidth: 0,
                        textAlign: "center",
                        fontOption: 0,
                        fontColorOption: 1,
                        fontsMap: null,
                        fontColorsMap: null,
                        tracking: 0,
                        lineSpacing: 0,
                        skewX: 0,
                        skewY: 0,
                        startAngle: 0,
                        endAngle: 0,
                        locked: !0,
                        prefix: "",
                        suffix: "",
                        referenceId: null
                    },
                    w.fonts = [],
                    w.textFillColorPicker = j.createEmptyColorPicker(),
                    w.textOutlineColorPicker = j.createEmptyColorPicker(),
                    w.textCircularFillColorPicker = j.createEmptyColorPicker(),
                    w.imageSelected = null,
                    w.selectedImageProperties = {
                        centerX: 0,
                        centerY: 0,
                        rotation: 0,
                        width: 0,
                        height: 0,
                        id: 0,
                        fullColor: !0,
                        grading: !1,
                        hasStaticImage: !1,
                        dynamicImageVariation: 1,
                        dynamicImagesPath: null,
                        colorPosition: 1,
                        hasMask: !1,
                        rotationLock: !1,
                        coverMaskArea: !1,
                        removeWhiteBackground: !1,
                        RemoveBackground: !1,
                        cartoonize: !1,
                        CutoutFace: !1,
                        removeBackgroundCOP: !1,
                        locked: !0
                    };
                    const ue = [{
                        label: "Streets",
                        value: "streets-v11"
                    }, {
                        label: "Satellite",
                        value: "satellite-v9"
                    }, {
                        label: "Light",
                        value: "light-v10"
                    }, {
                        label: "Dark",
                        value: "dark-v10"
                    }, {
                        label: "Romantic",
                        value: "martumo/cl3oxhe7r008o15l7fkejdet2"
                    }, {
                        label: "Vintage",
                        value: "martumo/cl3ovcfkc000e14pkj9cg6joc"
                    }, {
                        label: "Noir",
                        value: "martumo/cl3ov42hh001j14p43atfipz6"
                    }, {
                        label: "Modern",
                        value: "martumo/cl3ou4lhn002h15qeeemrhc98"
                    }, {
                        label: "Pop Art",
                        value: "martumo/cl3osfplf000c14qksywdcecr"
                    }, {
                        label: "Blueprint",
                        value: "martumo/cl3osaw99001315qytxna4rs8"
                    }, {
                        label: "Monochrome - Green",
                        value: "martumo/cl3os4jdf000x15o2uh3idliu"
                    }, {
                        label: "Monochrome - Red",
                        value: "martumo/cl3orr3hq002k15nt90aat5bi"
                    }, {
                        label: "Monochrome - Blue",
                        value: "martumo/cl3orhqu7001h14o8r8vceq4h"
                    }, {
                        label: "Monochrome - Dark Blue",
                        value: "martumo/cl3or5hnk000w14o8g3w0v6g9"
                    }, {
                        label: "Monochrome - Light Blue",
                        value: "martumo/cl3onxf2f001214ple0x3ced8"
                    }, {
                        label: "Monochrome - White",
                        value: "martumo/cl3oq78jg000t15o2prbs9wou"
                    }, {
                        label: "Monochrome - Black",
                        value: "martumo/cl3oqhe0d001314l1utt27q85"
                    }];
                    function pe() {
                        return new S((function(e) {
                            E && (a["b"]("product", {
                                id: E.getProduct().id,
                                editing: !0
                            }),
                            A.getAllFonts().then((async function(t) {
                                var i, o;
                                a["a"]({
                                    type: "info",
                                    category: "template.step1",
                                    message: "Loading elements on step 1",
                                    level: "info",
                                    data: {
                                        hasText: !(null === (i = E.getProduct().eps.textsEps) || void 0 === i || !i.length),
                                        hasCircularText: !(null === (o = E.getProduct().eps.circularTextsEps) || void 0 === o || !o.length),
                                        hasImagePlaceholders: (E.getProduct().eps.imagePlaceHoldersEps || []).some(e=>!e.dynamicImagesPath),
                                        hasDynamicImages: (E.getProduct().eps.imagePlaceHoldersEps || []).some(e=>e.dynamicImagesPath),
                                        hasVectorPlaceholder: (E.getProduct().eps.vectorEPSEps || []).some(e=>e.allowUserUpload),
                                        hasDynamicVector: (E.getProduct().eps.vectorEPSEps || []).some(e=>!e.allowUserUpload)
                                    }
                                }),
                                w.fonts = t,
                                w.page.pageWidthDim = Object(r["c"])(re, w.DPI),
                                w.page.pageHeightDim = Object(r["c"])(ae, w.DPI),
                                w.page.productName = E.getProduct().name,
                                w.page.referenceId = E.getProduct().referenceId,
                                w.page.exportColorMode = E.getProduct().colorMode,
                                w.exportPPI = E.getProduct().eps.exportPPI;
                                for (const e of E.getGroups().filter(e=>"eps" === e.type))
                                    se.addGroup(e, !0);
                                const s = [];
                                if (E.getProduct().eps.textsEps)
                                    for (let e = 0; e < E.getProduct().eps.textsEps.length; e++) {
                                        const t = async function(e) {
                                            var t = w.fonts.find((function(t) {
                                                return t.Path == e.fontPath
                                            }
                                            ));
                                            w.objectCenterX = e.centerX,
                                            w.objectCenterY = e.centerY,
                                            w.boundingRectWidth = e.width,
                                            w.boundingRectHeight = e.height;
                                            var i = new Map
                                              , n = new Map;
                                            T.initializeFontsMap(i, t.Path, e),
                                            T.initializeFontColorsMap(n, e);
                                            var o = T.parseColorFromProperty(e.color)
                                              , r = T.parseColorFromProperty(e.outlineColor)
                                              , a = new fabric.BoundedText({
                                                version: e.Version,
                                                width: w.boundingRectWidth,
                                                height: w.boundingRectHeight,
                                                originX: "center",
                                                originY: "center",
                                                left: w.objectCenterX,
                                                top: w.objectCenterY,
                                                strokeDashArray: se.getDashedArray(),
                                                angle: e.rotation,
                                                centeredRotation: !0,
                                                textAlign: e.textAlign,
                                                textVerticalAlign: e.textVerticalAlign,
                                                skewX: e.skewX,
                                                skewY: e.skewY,
                                                lockScalingFlip: !0,
                                                minSizePx: e.minSizePx,
                                                maxSizePx: e.maxSizePx,
                                                multiline: e.multiline,
                                                caps: e.caps,
                                                fontPath: t.Path,
                                                fontName: t.Name + "_" + t.Style,
                                                color: o,
                                                outlineColor: r,
                                                fontLibraryId: e.fontLibraryId,
                                                colorLibraryId: e.colorLibraryId,
                                                id: e.id,
                                                uuid: e.uuid,
                                                zIndex: "undefined" === typeof e.zIndex ? 0 : e.zIndex,
                                                fontsMap: i,
                                                fontColorsMap: n,
                                                Itext: e.Itext,
                                                tracking: e.tracking,
                                                lineSpacing: e.lineSpacing,
                                                locked: e.locked,
                                                visible: e.visible,
                                                name: e.name,
                                                prefix: e.prefix,
                                                suffix: e.suffix,
                                                referenceId: e.referenceId,
                                                ligatures: e.ligatures,
                                                isPrintArea: e.isPrintArea,
                                                isOverlay: e.isOverlay,
                                                groupId: e.groupId
                                            });
                                            return a.setFontSize(e.minSizePx),
                                            a.setColor(W.colorToWeb(o)),
                                            a.setFontFamily(t.Name + "_" + t.Style),
                                            a.set("caps", e.caps),
                                            a.setOutlineColor(W.colorToWeb(r)),
                                            a.setOutlineWidth(e.outlineWidth),
                                            a.setStrokeWidth(se.getVisibleStrokeWidth()),
                                            a.setText(a.getText()),
                                            w.previewMode && (a.lockMovementY = !0,
                                            a.lockMovementX = !0,
                                            a.lockScalingX = !0,
                                            a.lockScalingY = !0,
                                            a.lockRotation = !0,
                                            a.setStrokeWidth(0)),
                                            w.selectedTextProperties.fontColorOption = 1,
                                            await T.changeFontColorOption(w.textFillColorPicker, a, w.selectedTextProperties.fontColorOption, se),
                                            await T.changeFontOption(a, 1, se),
                                            a
                                        }
                                          , i = E.getProduct().eps.textsEps[e];
                                        s.push(async()=>await t(i))
                                    }
                                if (E.getProduct().eps.circularTextsEps)
                                    for (let e = 0; e < E.getProduct().eps.circularTextsEps.length; e++) {
                                        const t = async function(e) {
                                            var t = w.fonts.find((function(t) {
                                                return t.Path == e.fontPath
                                            }
                                            ))
                                              , i = new Map
                                              , n = new Map;
                                            T.initializeFontsMap(i, t.Path, e),
                                            T.initializeFontColorsMap(n, e);
                                            var o = T.parseColorFromProperty(e.color)
                                              , r = new fabric.PathIText("A",{
                                                pathWidth: se.getVisibleStrokeWidth(),
                                                originX: "center",
                                                originY: "center",
                                                left: e.centerX,
                                                top: e.centerY,
                                                angle: e.rotation,
                                                centeredRotation: !0,
                                                textAlign: e.textAlign,
                                                skewX: e.skewX,
                                                skewY: e.skewY,
                                                lockSkewingX: !0,
                                                lockSkewingY: !0,
                                                lockScalingFlip: !0,
                                                startAngle: e.startAngle,
                                                endAngle: e.endAngle,
                                                fontSize: e.fontSize,
                                                horizontalDiameter: e.horizontalDiameter,
                                                verticalDiameter: e.verticalDiameter,
                                                convex: e.convex,
                                                caps: e.caps,
                                                fontPath: t.Path,
                                                fontName: t.Name + "_" + t.Style,
                                                fontFamily: t.Name + "_" + t.Style,
                                                fill: W.colorToWeb(o),
                                                color: o,
                                                fontLibraryId: e.fontLibraryId,
                                                colorLibraryId: e.colorLibraryId,
                                                stroke: e.outlineColor,
                                                strokeWidth: e.outlineWidth,
                                                id: e.id,
                                                uuid: e.uuid,
                                                fontsMap: i,
                                                fontColorsMap: n,
                                                zIndex: "undefined" === typeof e.zIndex ? 0 : e.zIndex,
                                                locked: e.locked,
                                                visible: e.visible,
                                                name: e.name,
                                                prefix: e.prefix,
                                                suffix: e.suffix,
                                                referenceId: e.referenceId,
                                                isPrintArea: e.isPrintArea,
                                                isOverlay: e.isOverlay,
                                                groupId: e.groupId
                                            });
                                            return w.previewMode && (r.lockMovementY = !0,
                                            r.lockMovementX = !0,
                                            r.lockScalingX = !0,
                                            r.lockScalingY = !0,
                                            r.lockRotation = !0),
                                            w.selectedTextProperties.fontColorOption = 1,
                                            await T.changeFontColorOption(w.textCircularFillColorPicker, r, w.selectedTextProperties.fontColorOption, se),
                                            await T.changeFontOption(r, 1, se),
                                            r
                                        }
                                          , i = E.getProduct().eps.circularTextsEps[e];
                                        s.push(async()=>await t(i))
                                    }
                                if (E.getProduct().eps.imagePlaceHoldersEps)
                                    for (let e = 0; e < E.getProduct().eps.imagePlaceHoldersEps.length; e++) {
                                        const t = function(e) {
                                            return new Promise(async(t,i)=>{
                                                R.initializeDynamicImagesMap(e);
                                                var n = e.centerX
                                                  , o = e.centerY
                                                  , r = e.width
                                                  , a = e.height
                                                  , s = T.parseColorFromProperty(e.color)
                                                  , l = new fabric.ImagePlaceholder(null,{
                                                    width: r,
                                                    height: a,
                                                    left: n,
                                                    top: o,
                                                    originX: "center",
                                                    originY: "center",
                                                    angle: e.rotation,
                                                    id: e.id,
                                                    uuid: e.uuid,
                                                    strokeWidth: se.getVisibleStrokeWidth(),
                                                    strokeDashArray: se.getDashedArray(),
                                                    stroke: "black",
                                                    type: "image-placeholder",
                                                    centeredRotation: !0,
                                                    skewX: e.skewX,
                                                    skewY: e.skewY,
                                                    lockSkewingX: !0,
                                                    lockSkewingY: !0,
                                                    lockScalingFlip: !0,
                                                    coverMaskArea: e.coverMaskArea,
                                                    RemoveBackground: e.RemoveBackground,
                                                    cartoonize: e.cartoonize,
                                                    CutoutFace: e.CutoutFace,
                                                    removeBackgroundCOP: e.removeBackgroundCOP,
                                                    fullColor: e.fullColor,
                                                    grading: e.grading,
                                                    zIndex: "undefined" === typeof e.zIndex ? 0 : e.zIndex,
                                                    color: s,
                                                    hasStaticImage: e.hasStaticImage,
                                                    maskPath: e.maskPath,
                                                    dynamicImagesPath: e.dynamicImagesPath,
                                                    imageLibraryId: e.imageLibraryId,
                                                    colorLibraryId: e.colorLibraryId,
                                                    colors: e.colors || [],
                                                    selectedColorPosition: 1,
                                                    rotationStep: e.rotationStep,
                                                    removeWhiteBackground: e.removeWhiteBackground,
                                                    locked: e.locked,
                                                    visible: e.visible,
                                                    name: e.name,
                                                    preventEditMode: w.previewMode || e.dynamicImagesPath,
                                                    isPrintArea: e.isPrintArea,
                                                    isOverlay: e.isOverlay,
                                                    isColorOptions: e.isColorOptions,
                                                    podProductImagesMetadata: e.podProductImagesMetadata,
                                                    groupId: e.groupId,
                                                    mapConfig: e.mapConfig
                                                });
                                                if (l.dynamicImagesPath && (l.preventEditMode = !0),
                                                l.fullColor || l.grading ? !l.fullColor && l.grading ? l.setMode(fabric.IMAGE_MODE_GRADING) : l.setMode(fabric.IMAGE_MODE_FULL_COLOR) : l.setMode(fabric.IMAGE_MODE_SINGLE_COLOR),
                                                l.set("imageColor", W.colorToWeb(s)),
                                                w.previewMode && (l.lockMovementY = !0,
                                                l.lockMovementX = !0,
                                                l.lockScalingX = !0,
                                                l.lockScalingY = !0,
                                                l.lockRotation = !0),
                                                e.hasStaticImage)
                                                    B.showStaticImage(se, l, e);
                                                else if (e.mapConfig) {
                                                    const t = "string" == typeof e.mapConfig ? JSON.parse(e.mapConfig) : e.mapConfig
                                                      , i = await f["getStaticMapImage"](t);
                                                    B.showStaticImage(se, l, {
                                                        imageUrl: i
                                                    })
                                                } else
                                                    e.dynamicImagesPath && await R.showDynamicImage(se, l, 1);
                                                if (await R.changeDynamicImageColorPosition(l, 1, w.imageColorPicker, se),
                                                l.maskPath) {
                                                    const e = new Image;
                                                    e.onload = function() {
                                                        O.isFullMask(e) ? l.maskPath = null : l.setMask(this),
                                                        t(l)
                                                    }
                                                    ,
                                                    e.onerror = function(e, t, n, o, r) {
                                                        i(r)
                                                    }
                                                    ,
                                                    e.crossOrigin = "Anonymous",
                                                    e.src = Object(p["a"])(l.maskPath)
                                                } else
                                                    t(l)
                                            }
                                            )
                                        }
                                          , i = E.getProduct().eps.imagePlaceHoldersEps[e];
                                        s.push(async()=>await t(i))
                                    }
                                if (E.getProduct().eps.vectorEPSEps)
                                    for (let e = 0; e < E.getProduct().eps.vectorEPSEps.length; e++) {
                                        const t = async function(e) {
                                            const t = await L.setVectorPlaceholderProperties(e, se, w.previewMode, !1);
                                            return t
                                        }
                                          , i = E.getProduct().eps.vectorEPSEps[e];
                                        s.push(async()=>await t(i))
                                    }
                                const l = await X.runTasksInChunks(s);
                                for (const e of l)
                                    e && se.add(e, !0, !1);
                                Object(n["o"])(se),
                                w.updateLayers(),
                                w.isBackgroundEPS = !!E.getProduct().eps.baseEps,
                                E.getProduct().eps.baseImage ? fabric.Image.fromURL(Object(p["a"])(E.getProduct().eps.baseImage), (function(t) {
                                    t.set({
                                        originX: "left",
                                        originY: "top"
                                    }),
                                    t.scaleToWidth(re),
                                    se.setBackgroundImage(t, ()=>{
                                        se.renderAll()
                                    }
                                    ),
                                    e()
                                }
                                ), {
                                    crossOrigin: "Anonymous"
                                }) : e()
                            }
                            )))
                        }
                        ))
                    }
                    w.selectedMapProps = {
                        defaultStyle: ue[0].value,
                        hasPin: !1,
                        latitude: 17.9,
                        longitude: -37.34,
                        coordinates: "-37.34, 17.90",
                        availableMapStyles: ue
                    },
                    w.mapElements = null,
                    w.imageColorPicker = j.createEmptyColorPicker(),
                    w.apiKeys = {
                        removeBg: null,
                        vanceAi: null,
                        cutoutPro: null
                    },
                    w.showApiKeyInput = {
                        removeBg: !1,
                        vanceAi: !1,
                        cutoutPro: !1
                    },
                    w.creditsSelected = !1,
                    w.svgSelected = null,
                    w.selectedSVGProperties = {
                        centerX: 0,
                        centerY: 0,
                        rotation: 0,
                        width: 0,
                        height: 0,
                        id: 0,
                        position: 1,
                        allowUserUpload: !1,
                        colorPosition: 1,
                        applyColoring: !1,
                        rotationLock: !1,
                        coverMaskArea: !1,
                        locked: !0
                    },
                    w.svgColorPicker = j.createEmptyColorPicker(),
                    w.hasSelectedElement = !1,
                    w.layersInstance = null,
                    w.groupsSelected = [],
                    w.undoManager = null,
                    w.forProductTemplateCreation = !!x.search().forProductTemplateCreation,
                    w.forDesignTemplateCreation = !!x.search().forDesignTemplateCreation,
                    w.isUserDesignCreation = !!x.search().forUserDesignCreation,
                    w.createDesignOnTemplate = !!x.search().createDesignOnTemplate,
                    w.forMyProductBases = !!x.search().forMyProductBases,
                    w.dimensionsModalSubmittedData = null,
                    w.isGroupSelected = function() {
                        return !(!w.isUserDesignCreation || w.previewMode) || se.getActiveObjects().length > 1
                    }
                    ,
                    w.$watch("layersInstance", e=>{
                        w.layersInstance = e
                    }
                    ),
                    w.$watch("enableGroups", ()=>{
                        se && se.set("enableGroups", I.enableGroups)
                    }
                    ),
                    w.layersElementSelected = function(e) {
                        Object(n["h"])(e.elements, se, 1 === e.elements.length)
                    }
                    ,
                    w.layersOrderUpdated = function() {
                        Object(n["o"])(se),
                        Object(n["d"])(se)
                    }
                    ,
                    w.layersCollapseToggle = function(e) {
                        if (e.collapsed) {
                            for (const e in w.accordionsStatus)
                                w.accordionsStatus[e] = !1;
                            C(()=>w.$apply())
                        }
                        Object(n["d"])(se)
                    }
                    ,
                    w.layersElementLockToggle = function(e) {
                        if (I.isManagedUser && !I.user.UserImpersonatedFromId)
                            return;
                        Object(n["j"])(e.element, se);
                        const t = se.getActiveObject();
                        t && t.fire("modified"),
                        C(()=>w.$apply()),
                        Object(n["n"])(se),
                        Object(n["d"])(se)
                    }
                    ,
                    w.layersElementVisibilityToggle = function(e) {
                        Object(n["m"])(e.element, se),
                        Object(n["n"])(se),
                        Object(n["d"])(se)
                    }
                    ,
                    w.layersElementPrintAreaToggle = function(e) {
                        Object(n["l"])(e.element, se),
                        Object(n["n"])(se),
                        Object(n["d"])(se)
                    }
                    ,
                    w.layersElementOverlayToggle = function(e) {
                        Object(n["k"])(e.element, se),
                        Object(n["n"])(se),
                        Object(n["d"])(se)
                    }
                    ,
                    w.layersTitleChange = function(e) {
                        w.editMode && e.element.setEditedProp("name"),
                        Object(n["d"])(se)
                    }
                    ,
                    w.collapseElementsPanels = function() {
                        w.layersInstance && w.layersInstance.$children[0].setCollapse(!1)
                    }
                    ,
                    w.forDesignTemplateCreation && (I.headerTitleRight = "Design settings"),
                    I.$watch("user", e=>{
                        e && (w.apiKeys = {
                            removeBg: e.RemoveBgAPIKey,
                            vanceAi: e.VanceAiAPIKey,
                            cutoutPro: e.CutoutproAPIKey
                        })
                    }
                    ),
                    w.$watchGroup(["page.pageWidthDim", "page.pageHeightDim", "page.productName"], (function(e, t) {
                        if (!w.previewMode) {
                            const e = `${w.page.productName}: ${Number(w.page.pageWidthDim).toFixed(2)}x${Number(w.page.pageHeightDim).toFixed(2)} mm`;
                            I.headerMode = "dual",
                            I.headerTitleLeft = e
                        }
                    }
                    )),
                    w.$watchGroup(["exportPPI", "page.pageWidthDim", "page.pageHeightDim", "page.exportFormat"], (function(e, t) {
                        if ("png" === w.page.exportFormat || "jpg" === w.page.exportFormat) {
                            const e = Object(r["b"])(w.page.pageWidthDim, w.exportPPI)
                              , t = Object(r["b"])(w.page.pageHeightDim, w.exportPPI);
                            w.pngPpiError = e > 16e3 || t > 16e3
                        } else
                            w.pngPpiError = !1
                    }
                    )),
                    w.$watchGroup(["svgSelected", "imageSelected", "textSelected"], (function() {
                        w.canEditId = !1,
                        w.svgSelected && w.svgSelected.uuid && (w.canEditId = !0),
                        w.imageSelected && w.imageSelected.uuid && (w.canEditId = !0),
                        w.textSelected && w.textSelected.uuid && (w.canEditId = !0)
                    }
                    )),
                    w.updateHasPrintAreaElements = function() {
                        se && (w.hasPrintAreaElements = se.getObjects().some(e=>e.isPrintArea),
                        C(()=>w.$apply()))
                    }
                    ,
                    w.$on("template:resize-btn-click", ()=>{
                        w.resizePage()
                    }
                    ),
                    w.getLastElementId = function() {
                        if (se) {
                            const t = e.max(se.getObjects(), e=>e.id).id || 0
                              , i = E.getLastPreviewId();
                            return Math.max(t, i)
                        }
                        return 0
                    }
                    ,
                    w.loadFonts = function(e) {
                        let t = i("d0a0");
                        M.start("Loading fonts"),
                        A.initFonts().then((function(o) {
                            var r;
                            w.fonts = o,
                            se && se.renderAll(),
                            M.stop(),
                            C((function() {
                                w.$apply()
                            }
                            ));
                            const a = x.search().templateId
                              , p = a && (null === (r = E.getProduct()) || void 0 === r ? void 0 : r.id) !== a;
                            if (w.previewMode || !w.forDesignTemplateCreation || a || w.designTitle)
                                if (!w.previewMode && w.forMyProductBases && w.forProductTemplateCreation && !a)
                                    w.pageDimensionsEntered(!1, !1),
                                    F.show({
                                        controller: "PageDimensionsModalCtrl",
                                        template: i("f125"),
                                        parent: angular.element(document.body),
                                        clickOutsideToClose: !1,
                                        escapeToClose: !1,
                                        locals: {
                                            mode: "create",
                                            initialWidth: w.page.pageWidthDim,
                                            initialHeight: w.page.pageHeightDim
                                        }
                                    }).then((async function(e) {
                                        M.reset(),
                                        M.start("Loading...");
                                        const i = e.page
                                          , o = await Object(u["a"])();
                                        E.setPod({
                                            id: o.id,
                                            apiKeyReference: "",
                                            isUserPod: o.isUserPod
                                        }),
                                        w.manualTemplateProductResize(i),
                                        w.page.productName = i.productName;
                                        const r = w.addDynamicImage(null, !0);
                                        r.name = "Print Area",
                                        Object(n["l"])(r, se),
                                        await w.showAndUploadDynamicImageToS3(r, t),
                                        w.updateWidth(w.page.pageWidthDim, r),
                                        w.updateHeight(w.page.pageHeightDim, r),
                                        w.pageDimensionsEntered(!0, !1),
                                        C(()=>{
                                            M.stop()
                                        }
                                        , 2500)
                                    }
                                    ));
                                else if (!w.previewMode && (w.forProductTemplateCreation || w.forMyProductBases) && w.childTemplateProduct && a) {
                                    let e = w.forMyProductBases ? Object(l["c"])(a) : Object(s["d"])(a);
                                    e.then((async function(e) {
                                        if (E.loadProduct(e),
                                        w.forProductTemplateCreation && !w.forMyProductBases)
                                            Object(d["a"])(e.podId).then(e=>{
                                                E.setPod({
                                                    id: e.id,
                                                    apiKeyReference: e.apiKeyReference
                                                })
                                            }
                                            );
                                        else if (w.forMyProductBases) {
                                            const {id: e, apiKeyReference: t, isUserPod: i} = await Object(u["a"])();
                                            E.setPod({
                                                id: e,
                                                apiKeyReference: t,
                                                isUserPod: i
                                            })
                                        }
                                        M.stop(),
                                        w.loadEPS()
                                    }
                                    )).catch((function(e) {
                                        M.stop(),
                                        window.rumReportError(e),
                                        console.log(e),
                                        x.path("/home")
                                    }
                                    )),
                                    F.show({
                                        controller: "PageDimensionsModalCtrl",
                                        template: i("f125"),
                                        parent: angular.element(document.body),
                                        clickOutsideToClose: !1,
                                        escapeToClose: !1,
                                        locals: {
                                            mode: "create",
                                            initialWidth: w.page.pageWidthDim,
                                            initialHeight: w.page.pageHeightDim
                                        }
                                    }).then((async function(e) {
                                        const t = se.getObjects().find(e=>e.isPrintArea);
                                        t && (w.manualTemplateProductResize(e.page),
                                        w.updateWidth(e.page.pageWidthDim, t),
                                        w.updateHeight(e.page.pageHeightDim, t),
                                        t.set({
                                            ...se.getCenter()
                                        }),
                                        se.renderAll())
                                    }
                                    ))
                                } else if (w.previewMode || !w.forProductTemplateCreation || a)
                                    if (!w.previewMode && a && p) {
                                        let e;
                                        M.start(`Loading template with id ${a} ...`),
                                        w.forProductTemplateCreation ? (console.log(`Loading ${w.forMyProductBases ? "product base" : "template product"} ${a}`),
                                        e = w.forMyProductBases ? Object(l["c"])(a) : Object(s["d"])(a)) : w.forDesignTemplateCreation ? (console.log("Loading design template " + a),
                                        e = Object(c["d"])(a)) : (console.log("Loading template " + a),
                                        e = D.getProduct(a)),
                                        e.then((async function(e) {
                                            if (E.loadProduct(e),
                                            w.forProductTemplateCreation && !w.forMyProductBases)
                                                Object(d["a"])(e.podId).then(e=>{
                                                    E.setPod({
                                                        id: e.id,
                                                        apiKeyReference: e.apiKeyReference
                                                    })
                                                }
                                                );
                                            else if (w.forMyProductBases) {
                                                const e = await Object(u["a"])();
                                                E.setPod({
                                                    id: e.id,
                                                    apiKeyReference: e.apiKeyReference,
                                                    isUserPod: e.isUserPod
                                                })
                                            }
                                            M.stop(),
                                            w.editMode = !0,
                                            w.loadEPS()
                                        }
                                        )).catch((function(e) {
                                            M.stop(),
                                            window.rumReportError(e),
                                            x.path("/home")
                                        }
                                        ))
                                    } else
                                        e && w.loadEPS();
                                else
                                    E.clearProduct(),
                                    w.showPodProductAssignerModal = !0;
                            else
                                E.clearProduct(),
                                F.show({
                                    controller: "DesignNameModalCtrl",
                                    template: i("8007"),
                                    parent: angular.element(document.body),
                                    clickOutsideToClose: !1,
                                    escapeToClose: !1,
                                    locals: {
                                        initialName: "Sample Design"
                                    }
                                }).then(e=>{
                                    w.pageDimensionsEntered(!1, !1),
                                    w.page.productName = e.name,
                                    w.page.pageWidthDim = 1e3,
                                    w.page.pageHeightDim = 1e3,
                                    w.designTitle = e.name,
                                    I.showTemplateResizeBtn = !0,
                                    w.showBaseFileReplace = !1,
                                    w.pageDimensionsEntered(!0, !1)
                                }
                                )
                        }
                        )).catch((function(e) {
                            window.rumReportError(e)
                        }
                        ))
                    }
                    ,
                    w.loadMap = async function() {
                        if (await f["addMapDependencies"](),
                        !w.mapElements) {
                            const e = f["createModal"]()
                              , {map: t, geocoder: i} = f["createMapWrapper"](e);
                            f["createModalActions"](e),
                            w.mapElements = {
                                modal: e,
                                map: t,
                                geocoder: i
                            }
                        }
                    }
                    ,
                    w.loadMap().then(()=>{
                        w.loadFonts(!0)
                    }
                    ),
                    w.updateLayers = function() {
                        w.layersInstance && w.layersInstance.$children[0].setCanvasElements(se.getObjects()),
                        I.$broadcast("canvas:updated:stepOne", {
                            objects: se.getObjects()
                        })
                    }
                    ,
                    w.setLayersActiveItem = function(e, t) {
                        w.layersInstance && w.layersInstance.$children[0].setActiveElement(e, t),
                        I.$broadcast("canvas:selection:stepOne", {
                            element: e,
                            wasUserEvent: t
                        })
                    }
                    ,
                    w.initFabric = function() {
                        w.undoManager = I.planIncludesFeature ? new o["a"] : null,
                        se = new fabric.CanvasEx("fabric-canvas",{
                            eventContainer: w.previewMode ? "" : "fabric-container",
                            altActionKey: "ctrlKey",
                            enableCopyPaste: !w.isUserDesignCreation,
                            backgroundColor: "rgb(255,255,255)",
                            width: re,
                            height: ae,
                            preserveObjectStacking: !0,
                            isPreviewStep: !1,
                            seamLessScrollbars: w.previewMode,
                            enableZoom: !w.previewMode,
                            artworkTitle: w.previewMode ? "Production file" : "",
                            enableGroups: w.enableGroups,
                            undoManager: w.undoManager
                        }),
                        w.canvas = se,
                        se.lastElementIdCalculator = w.getLastElementId,
                        fabric.DPI = w.DPI,
                        se.DPI = w.DPI;
                        const e = function(e) {
                            if (w.isGroupSelected() && "activeSelection" === e.target.type)
                                se.fire("selection:cleared"),
                                e.target.set("lockUniScaling", !0),
                                se.renderAll(),
                                w.hasSelectedElement = !0,
                                w.setLayersActiveItem(se.getActiveObject(), !!e.e);
                            else if (!w.isUserDesignCreation) {
                                if (w.hasSelectedElement = !0,
                                w.setLayersActiveItem(se.getActiveObject(), !!e.e),
                                w.textFillColorPicker.terminate(),
                                w.textOutlineColorPicker.terminate(),
                                w.textCircularFillColorPicker.terminate(),
                                w.imageColorPicker.terminate(),
                                w.svgColorPicker.terminate(),
                                w.textSelected = null,
                                w.imageSelected = null,
                                w.svgSelected = null,
                                se.updateCornerSize(se.getActiveObject()),
                                se.getActiveObject() && "bounded-text" == se.getActiveObject().type)
                                    w.textSelected = se.getActiveObject(),
                                    N.updateLibraryNames(w, w.textSelected),
                                    G.loadTextData(w, se),
                                    w.textSelected.on({
                                        modified: function() {
                                            G.loadTextData(w, se),
                                            setTimeout((function() {
                                                w.$apply()
                                            }
                                            ))
                                        }
                                    });
                                else if (se.getActiveObject() && "path-itext" == se.getActiveObject().type)
                                    w.textSelected = se.getActiveObject(),
                                    N.updateLibraryNames(w, w.textSelected),
                                    G.loadCircularTextData(w, se),
                                    w.textSelected.on({
                                        modified: function(e) {
                                            const t = "path-itext" === e.type ? e : e.target;
                                            !t || t.startAngle === w.selectedTextProperties.startAngle && t.endAngle === w.selectedTextProperties.endAngle || w.editMode && t.setEditedProp("startAngle", "endAngle"),
                                            G.loadCircularTextData(w, se),
                                            setTimeout((function() {
                                                w.$apply()
                                            }
                                            ))
                                        }
                                    });
                                else if (!se.getActiveObject() || "image" != se.getActiveObject().type && "image-placeholder" != se.getActiveObject().type) {
                                    if (se.getActiveObject() && "vector-placeholder" == se.getActiveObject().type) {
                                        function t() {
                                            w.svgSelected && (w.selectedSVGProperties.centerX = Object(r["c"])(w.svgSelected.left, w.DPI),
                                            w.selectedSVGProperties.centerY = Object(r["c"])(w.svgSelected.top, w.DPI),
                                            w.selectedSVGProperties.rotation = w.svgSelected.angle,
                                            w.selectedSVGProperties.width = Object(r["c"])(w.svgSelected.width * w.svgSelected.scaleX, w.DPI),
                                            w.selectedSVGProperties.height = Object(r["c"])(w.svgSelected.height * w.svgSelected.scaleY, w.DPI),
                                            w.selectedSVGProperties.id = w.svgSelected.id,
                                            w.selectedSVGProperties.allowUserUpload = w.svgSelected.allowUserUpload,
                                            w.selectedSVGProperties.applyColoring = w.svgSelected.applyColoring,
                                            w.selectedSVGProperties.coverMaskArea = w.svgSelected.coverMaskArea,
                                            w.selectedSVGProperties.rotationLock = 90 === w.svgSelected.rotationStep,
                                            w.selectedSVGProperties.locked = w.svgSelected.locked,
                                            w.selectedSVGProperties.applyColoring && (w.svgSelected.svgColor ? w.svgColorPicker.setColor(w.svgSelected.svgColor) : w.svgColorPicker.setColor("rgba(0,0,0,1)")))
                                        }
                                        w.svgSelected = se.getActiveObject(),
                                        w.selectedSVGProperties.position = w.svgSelected.selectedPosition,
                                        w.selectedSVGProperties.colorPosition = w.svgSelected.selectedColorPosition,
                                        N.updateLibraryNames(w, w.svgSelected),
                                        t(),
                                        w.svgSelected.on({
                                            modified: function() {
                                                t(),
                                                setTimeout((function() {
                                                    w.$apply()
                                                }
                                                ))
                                            }
                                        })
                                    }
                                } else {
                                    function i() {
                                        var e;
                                        if (!w.imageSelected)
                                            return;
                                        w.selectedImageProperties.centerX = Object(r["c"])(w.imageSelected.left, w.DPI),
                                        w.selectedImageProperties.centerY = Object(r["c"])(w.imageSelected.top, w.DPI),
                                        w.selectedImageProperties.rotation = w.imageSelected.angle,
                                        w.selectedImageProperties.width = Object(r["c"])(w.imageSelected.getWidth(), w.DPI),
                                        w.selectedImageProperties.height = Object(r["c"])(w.imageSelected.getHeight(), w.DPI),
                                        w.selectedImageProperties.id = w.imageSelected.id,
                                        w.selectedImageProperties.fullColor = w.imageSelected.fullColor,
                                        w.selectedImageProperties.grading = w.imageSelected.grading,
                                        w.selectedImageProperties.hasStaticImage = w.imageSelected.hasStaticImage,
                                        w.selectedImageProperties.hasStaticImage = w.imageSelected.hasStaticImage,
                                        w.selectedImageProperties.dynamicImagesPath = w.imageSelected.dynamicImagesPath,
                                        w.selectedImageProperties.dynamicImageVariation = w.imageSelected.dynamicImageVariation || 1,
                                        w.selectedImageProperties.hasMask = w.imageSelected.hasMask,
                                        w.selectedImageProperties.coverMaskArea = w.imageSelected.coverMaskArea,
                                        w.selectedImageProperties.rotationLock = 90 === w.imageSelected.rotationStep,
                                        w.selectedImageProperties.removeWhiteBackground = w.imageSelected.removeWhiteBackground,
                                        w.selectedImageProperties.cartoonize = w.imageSelected.cartoonize,
                                        w.selectedImageProperties.RemoveBackground = w.imageSelected.RemoveBackground,
                                        w.selectedImageProperties.CutoutFace = w.imageSelected.CutoutFace,
                                        w.selectedImageProperties.removeBackgroundCOP = w.imageSelected.removeBackgroundCOP,
                                        w.selectedImageProperties.locked = w.imageSelected.locked,
                                        w.imageSelected.fullColor || w.imageSelected.grading ? !w.imageSelected.fullColor && w.imageSelected.grading ? w.selectedImageProperties.imageType = "grading" : w.selectedImageProperties.imageType = "full color" : w.selectedImageProperties.imageType = "single color",
                                        w.imageColorPicker.setColor(w.imageSelected.getColor());
                                        const t = "string" == typeof (null === (e = w.imageSelected) || void 0 === e ? void 0 : e.mapConfig) ? JSON.parse(w.imageSelected.mapConfig) : w.imageSelected.mapConfig;
                                        t && (w.imageSelected.mapConfig = t,
                                        w.selectedMapProps.defaultStyle = t.defaultStyle,
                                        w.selectedMapProps.hasPin = t.hasPin,
                                        w.selectedMapProps.coordinates = `${t.latitude}, ${t.longitude}`,
                                        w.selectedMapProps.latitude = Number(t.latitude),
                                        w.selectedMapProps.longitude = Number(t.longitude),
                                        ue.forEach(e=>{
                                            w.selectedMapProps[e.value] = t.availableStyles.some(t=>t == e.value)
                                        }
                                        ))
                                    }
                                    w.imageSelected = se.getActiveObject(),
                                    w.selectedImageProperties.position = w.imageSelected.selectedPosition,
                                    w.selectedImageProperties.colorPosition = w.imageSelected.selectedColorPosition,
                                    N.updateLibraryNames(w, w.imageSelected),
                                    i(),
                                    w.imageSelected.on({
                                        modified: function() {
                                            i(),
                                            C((function() {
                                                w.$apply()
                                            }
                                            ))
                                        }
                                    })
                                }
                                setTimeout((function() {
                                    w.$apply()
                                }
                                ))
                            }
                            se.eventContainer && $("#" + se.eventContainer)[0].focus({
                                preventScroll: !0
                            })
                        };
                        se.on({
                            "selection:created": e,
                            "selection:updated": e,
                            "object:added": function() {
                                w.isUserDesignCreation && !w.previewMode ? Object(n["h"])(se.getObjects(), se, !0) : se.discardActiveObject(),
                                w.updateLayers(),
                                w.updateHasPrintAreaElements()
                            },
                            "object:removed": function(e) {
                                e.target && "rect" !== e.target.type && E.removeFromPreview(e.target),
                                w.updateLayers(),
                                w.updateHasPrintAreaElements()
                            },
                            "object:selected": function() {
                                w.isUserDesignCreation && !w.previewMode && Object(n["h"])(se.getObjects(), se, !0)
                            },
                            "object:modified": function(e) {
                                w.editMode && e.action && e.target.setEditedProp(e.action),
                                w.isGroupSelected() && "activeSelection" === e.target.type ? (se.temporaryDiscardActiveObject(()=>{
                                    for (const e of se.getObjects())
                                        e.updateFromGroupScaling()
                                }
                                ),
                                se.renderAll()) : w.updateLayers(),
                                w.updateHasPrintAreaElements()
                            },
                            "object:pasted": function(e) {
                                let t = e.cloned;
                                if (e.isGroup || (t = [e.cloned]),
                                w.editMode)
                                    for (const i of t)
                                        i.addedOnEdit = !0;
                                for (const i of t.filter(e=>"bounded-text" === e.type))
                                    i.ligatures || i.set("ligatures", !0)
                            },
                            "group:added": function(e) {
                                w.editMode && (e.group.addedOnEdit = !0)
                            },
                            "group:removed": function(e) {
                                E.removeFromPreview(e.group)
                            },
                            "group:selected": function() {
                                w.groupsSelected = se.getActiveGroups()
                            },
                            "group:deselected": function(e) {
                                const t = w.groupsSelected.indexOf(e.target);
                                t > -1 && w.groupsSelected.splice(t, 1)
                            },
                            "object:scaling": function(e) {
                                e.target && w.editMode && (e.target.editedSize = !0)
                            },
                            "selection:cleared": function(e) {
                                w.textFillColorPicker.terminate(),
                                w.textOutlineColorPicker.terminate(),
                                w.textCircularFillColorPicker.terminate(),
                                w.imageColorPicker.terminate(),
                                w.svgColorPicker.terminate(),
                                w.textSelected = null,
                                w.imageSelected = null,
                                w.svgSelected = null,
                                w.groupsSelected = [],
                                w.hasSelectedElement = !1,
                                setTimeout((function() {
                                    w.$apply()
                                }
                                )),
                                w.setLayersActiveItem(null, !!e.e)
                            },
                            "mouse:up": function(e) {
                                w.isUserDesignCreation && se.getActiveObject() && se.getObjects() && 0 !== se.getActiveObject().length && se.getActiveObject().length !== se.getObjects().length && !w.previewMode && Object(n["h"])(se.getObjects(), se, !0)
                            },
                            "mouse:down": function(e) {
                                w.colorSamplerActive && j.processColorSelection(e.e, (function(e, t, i) {
                                    var n = "#" + e.getColor("HEX");
                                    if ("fill" === t)
                                        "bounded-text" === i.type || "path-itext" === i.type ? (i.setColor ? i.setColor(n) : i.set("fill", n),
                                        T.saveFontColorToOption(e.getColors(), i, w.editMode),
                                        se.setActiveObject(i)) : "image-placeholder" === i.type && (he = !0,
                                        w.imageColorSave(e.getColors(), i));
                                    else if ("outline" === t && ("bounded-text" === i.type || "path-itext" === i.type)) {
                                        if ("bounded-text" === i.type) {
                                            n = e.getColor();
                                            i.outlineColor = T.createColorObj({
                                                hex: "#" + n.HEX,
                                                cmyk: `${n.cmyk.c},${n.cmyk.m},${n.cmyk.y},${n.cmyk.k}`
                                            })
                                        }
                                        i.setOutlineColor ? i.setOutlineColor(n) : i.set("stroke", n),
                                        se.setActiveObject(i)
                                    }
                                    w.colorSamplerActive = !1
                                }
                                ))
                            }
                        }),
                        w.previewMode && (se.selection = !1,
                        w.$on("updateText:stepOne", (function(e, t) {
                            const i = se.getObjects().filter(e=>e.id === t.id && ("bounded-text" === e.type || "path-itext" === e.type));
                            for (const n of i)
                                w.updateText(t.text, n)
                        }
                        )),
                        w.$on("updateTextFont:stepOne", (function(e, t) {
                            const i = se.getObjects().filter(e=>e.id === t.id && ("bounded-text" === e.type || "path-itext" === e.type));
                            for (const n of i)
                                T.changeFontOption(n, t.fontOption, se)
                        }
                        )),
                        w.$on("updateTextFontColor:stepOne", (function(e, t) {
                            const i = se.getObjects().filter(e=>e.id === t.id && ("bounded-text" === e.type || "path-itext" === e.type));
                            for (const n of i)
                                T.changeFontColorOption(null, n, t.fontColorOption, se)
                        }
                        )),
                        w.$on("updateDynamicElementOption:stepOne", (function(e, t) {
                            const i = se.getObjects().filter(e=>e.id === t.id && ("image-placeholder" === e.type && e.dynamicImagesPath || "vector-placeholder" === e.type && !e.allowUserUpload));
                            for (const n of i)
                                "image-placeholder" === n.type ? R.showDynamicImage(se, n, t.option) : L.changeDynamicEPSPosition(n, t.option, se)
                        }
                        )),
                        w.$on("uploadImagePlaceholder:stepOne", async(e,t)=>{
                            const i = t.file;
                            i && (w.selectedImageProperties.RemoveBackground || w.selectedImageProperties.cartoonize || w.selectedImageProperties.CutoutFace || w.selectedImageProperties.removeBackgroundCOP ? (w.imageSelected.imageFile = i,
                            w.selectedImageProperties.cartoonize && w.apiKeys.vanceAi && await w.cartoonize(),
                            w.selectedImageProperties.CutoutFace && w.apiKeys.cutoutPro && await w.faceCutout(!0),
                            w.selectedImageProperties.removeBackgroundCOP && w.apiKeys.cutoutPro && await w.faceCutout(!1),
                            w.selectedImageProperties.RemoveBackground && w.apiKeys.removeBg && w.removeBg()) : B.previewImageOnPlaceholder(i, se, t.id))
                        }
                        ),
                        w.$on("updateImageColorOption:stepOne", (function(e, t) {
                            const i = se.getObjects().filter(e=>e.id === t.id && "image-placeholder" === e.type && !e.dynamicImagesPath && !e.fullColor && !e.grading);
                            for (const n of i)
                                R.changeDynamicImageColorPosition(n, t.colorOption, null, se)
                        }
                        )),
                        w.$on("updateVectorColorOption:stepOne", (function(e, t) {
                            const i = se.getObjects().filter(e=>e.id === t.id && "vector-placeholder" === e.type && e.applyColoring);
                            for (const n of i)
                                L.changeDynamicEPSColorPosition(n, t.colorOption, null, se)
                        }
                        )),
                        w.$on("canvas:select:stepOne", (e,t)=>{
                            if (t.uuids) {
                                const e = se.getObjects().filter(e=>t.uuids.includes(e.uuid) || t.uuids.includes(e.zIndex));
                                e && Object(n["h"])(e, se, 1 === e.length)
                            }
                        }
                        ),
                        w.$on("uploadVectorPlaceholder:stepOne", (function(e, t) {
                            if (t.file) {
                                const e = se.getObjects().filter(e=>e.id === t.id && "vector-placeholder" === e.type && e.allowUserUpload);
                                for (const i of e)
                                    L.loadFileOnPlaceholder(t.file, i, se)
                            }
                        }
                        ))),
                        C(()=>w.$apply())
                    }
                    ,
                    w.getCurrentElementTitle = function() {
                        if (se && se.getActiveObject) {
                            var e = se.getActiveObject();
                            return Object(n["e"])(e)
                        }
                        return ""
                    }
                    ,
                    w.deleteSelectedElements = function() {
                        se.removeSelection()
                    }
                    ,
                    w.cloneSelectedElements = function() {
                        se.cloneSelection()
                    }
                    ,
                    w.onElementSelectedAlign = function(e) {
                        se.elementsSelectedAlign(e, w.elementAlignType)
                    }
                    ,
                    w.onElementAlingTypeChanged = function(e) {
                        w.elementAlignType = e
                    }
                    ,
                    w.startImageOrEPSReplace = function(e) {
                        const t = w.isBackgroundEPS ? "EPS" : "image"
                          , i = w.page.pageWidthDim
                          , n = w.page.pageHeightDim
                          , o = "image" === t ? "(at " + w.DPI + " PPI)" : "";
                        F.show(F.alert().parent(document.body).clickOutsideToClose(!1).title("Base File Replace").htmlContent("The base " + t + " should be replaced with another of a similar size. Using a very different size can result in elements going outside of the canvas. If this is case, we recommend creating a new template.<br /><br />The current " + t + " size is <b>" + parseFloat(Math.round(100 * i) / 100).toFixed(2) + "x" + parseFloat(Math.round(100 * n) / 100).toFixed(2) + "</b> mm " + o).ok("I understand"));
                        const r = k((function() {
                            $("md-dialog button").length && ($("md-dialog button").on("click", (function() {
                                $(this).off("click"),
                                angular.element(document.querySelector("#" + e)).trigger("click")
                            }
                            )),
                            k.cancel(r))
                        }
                        ), 50)
                    }
                    ,
                    w.replaceBaseFile = function(e) {
                        if (e && e[0])
                            if ("eps" == e[0].name.split(".").pop())
                                M.start("Uploading EPS"),
                                C((function() {
                                    w.$apply()
                                }
                                )),
                                Z.uploadVectorToS3(e[0], "base", !0, !1, (function(e, t) {
                                    "upload" === e ? (M.message(`Uploading EPS ${parseInt(t)}%`),
                                    C(()=>{
                                        w.$apply()
                                    }
                                    )) : M.message("Processing")
                                }
                                )).then(e=>{
                                    ce = e.EPS,
                                    le = e.SVG,
                                    de = null,
                                    w.page.pageWidthDim = e.Width,
                                    w.page.pageHeightDim = e.Height,
                                    w.isBackgroundEPS = !0,
                                    w.pageDimensionsEntered(!0, !1),
                                    C((function() {
                                        w.$apply(),
                                        M.reset(),
                                        $("#inputFileReplaceBase")[0].value = null
                                    }
                                    ))
                                }
                                ).catch(e=>{
                                    window.rumReportError(e),
                                    M.reset(),
                                    w.isBackgroundEPS = !1,
                                    $("#inputFileReplaceBase")[0] && ($("#inputFileReplaceBase")[0].value = null),
                                    te.showCommonError(e, "" + (e.data.error || e.data.Message || e.data), "Error uploading EPS"),
                                    C((function() {
                                        w.$apply()
                                    }
                                    ))
                                }
                                );
                            else {
                                M.start("Processing Image");
                                const t = Object(h["c"])(e[0]);
                                y(e[0], (function(n, o) {
                                    const a = function(i) {
                                        O.imageToBase64(i, t).then((function(t) {
                                            ce = "",
                                            le = t,
                                            de = e[0],
                                            w.reloadedNonEPSBaseImage = !0,
                                            w.page.pageWidthDim = Object(r["c"])(i.width, w.DPI),
                                            w.page.pageHeightDim = Object(r["c"])(i.height, w.DPI),
                                            w.pageDimensionsEntered(!0, !0),
                                            C((function() {
                                                w.$apply(),
                                                M.stop(),
                                                w.isBackgroundEPS = !1,
                                                $("#inputFileReplaceBase")[0].value = null
                                            }
                                            ))
                                        }
                                        ))
                                    };
                                    o.exif && o.exif.get("XResolution") ? (w.DPI = o.exif.get("XResolution"),
                                    a(n)) : (M.stop(),
                                    F.show({
                                        controller: ["$scope", "$mdDialog", function(e, t) {
                                            e.resolution = 72,
                                            e.setResolution = function() {
                                                t.hide(e.resolution)
                                            }
                                        }
                                        ],
                                        template: i("d9e0"),
                                        parent: angular.element(document.body),
                                        clickOutsideToClose: !1
                                    }).then((function(e) {
                                        w.DPI = e,
                                        a(n)
                                    }
                                    ), (function() {
                                        console.error("Dialog should never be canceled!")
                                    }
                                    )))
                                }
                                ), {
                                    orientation: !0,
                                    meta: !0
                                })
                            }
                    }
                    ,
                    w.removeMask = function(e) {
                        e && (e.maskChanged = !0,
                        w.editMode && e.setEditedProp("mask"),
                        e.setMask(null),
                        w.selectedImageProperties.hasMask = w.imageSelected.hasMask,
                        se.renderAll())
                    }
                    ,
                    w.uploadMaskImage = function(e) {
                        if (e && e[0]) {
                            var t = new FileReader;
                            t.onload = function() {
                                const e = new Image;
                                e.onload = function() {
                                    w.editMode && w.imageSelected.setEditedProp("mask"),
                                    w.imageSelected.maskChanged = !0,
                                    w.imageSelected.setMask(this),
                                    w.selectedImageProperties.hasMask = w.imageSelected.hasMask,
                                    se.renderAll(),
                                    C((function() {
                                        P.show(P.simple().textContent("Double click images to enter edit mode!").position("top right").hideDelay(2e3)),
                                        w.$apply(),
                                        M.stop()
                                    }
                                    )),
                                    $("#maskFileUpload")[0].value = null
                                }
                                ,
                                e.crossOrigin = "Anonymous",
                                e.src = t.result
                            }
                            ,
                            t.readAsDataURL(e[0]),
                            M.start("Uploading Image")
                        }
                    }
                    ,
                    w.pageDimensionsEntered = async function(e, t) {
                        var i = 25.4;
                        const n = E.getPod();
                        if (n && !["printful", "printify"].includes(n.apiKeyReference) && w.dimensionsModalSubmittedData) {
                            const e = E.getChildTemplateProduct()
                              , t = {
                                width: w.dimensionsModalSubmittedData.width,
                                height: w.dimensionsModalSubmittedData.height,
                                unit: w.dimensionsModalSubmittedData.unit
                            }
                              , {width: i, height: n, unit: o} = t
                              , r = `${i} x ${n} ${o}`
                              , a = e ? {
                                ...e,
                                currentTemplate: {
                                    oldVariant: r,
                                    newVariant: r,
                                    dimension: t
                                }
                            } : {
                                currentTemplate: {
                                    dimension: t
                                }
                            };
                            E.setChildTemplateProduct(e && e.currentTemplate ? {
                                ...angular.copy(e),
                                currentTemplate: {
                                    ...e.currentTemplate,
                                    ...a.currentTemplate
                                }
                            } : a)
                        }
                        if (t || e)
                            re = Object(r["b"])(w.page.pageWidthDim, w.DPI),
                            ae = Object(r["b"])(w.page.pageHeightDim, w.DPI);
                        else if (w.DPI = 300,
                        re = Object(r["b"])(w.page.pageWidthDim, w.DPI),
                        ae = Object(r["b"])(w.page.pageHeightDim, w.DPI),
                        re < ne || ae < ne) {
                            var o = 1;
                            o = ae < re ? ae / ne : re / ne,
                            ae /= o,
                            re /= o,
                            w.DPI = re / (w.page.pageWidthDim * (1 / i))
                        }
                        if (e || w.initFabric(),
                        se.DPI = w.DPI,
                        z.applyCanvasScaling(se, re, ae, oe, ne),
                        console.log("Canvas set to: " + parseInt(re) + "x" + parseInt(ae) + ". DPI: " + w.DPI),
                        console.log("Page size is: " + w.page.pageWidthDim + "x" + w.page.pageHeightDim + "mm"),
                        se.setEffectiveZoom(.9),
                        se.renderAll(),
                        le) {
                            const e = le.includes("data:image/") ? le : Object(p["a"])(le);
                            fabric.Image.fromURL(e, (function(e) {
                                e.set({
                                    originX: "left",
                                    originY: "top"
                                }),
                                e.scaleToWidth(re),
                                se.setBackgroundImage(e, ()=>{
                                    se.renderAll()
                                }
                                ),
                                $("#imageLoader")[0] && ($("#imageLoader")[0].value = null),
                                C(()=>w.$apply())
                            }
                            ), {
                                crossOrigin: "Anonymous"
                            })
                        }
                    }
                    ,
                    w.loadEPS = function() {
                        E.getProduct().id && E.getProduct().name ? (M.start("Loading Data"),
                        w.DPI = E.getProduct().eps.dpi,
                        ae = re = 1,
                        w.initFabric(),
                        re = E.getProduct().eps.width,
                        ae = E.getProduct().eps.height,
                        z.applyCanvasScaling(se, re, ae, oe, ne),
                        le = E.getProduct().eps.baseImage,
                        ce = E.getProduct().eps.baseEps,
                        (le || ce) && (I.showTemplateResizeBtn = !1,
                        w.showBaseFileReplace = !0),
                        w.page.exportFormat = E.getProduct().format,
                        w.page.exportFormat || (w.page.exportFormat = "eps"),
                        w.page.mirror = E.getProduct().eps.mirror,
                        w.page.mergeOutput = E.getProduct().eps.MergeOutput,
                        w.page.productName = E.getProduct().name,
                        w.page.referenceId = E.getProduct().referenceId,
                        w.page.referenceId && w.updateMelcoDesignId(w.page.referenceId),
                        console.log("Canvas set to: " + re + "x" + ae + ". DPI: " + w.DPI),
                        pe().then((function() {
                            w.layersInstance && w.layersInstance.$children[0].singleGroupSelection(),
                            w.deselectAll(),
                            M.stop()
                        }
                        ))) : w.previewMode || (w.pageDimensionsEntered(!1, !1),
                        F.show({
                            controller: "PageDimensionsModalCtrl",
                            template: i("f125"),
                            parent: angular.element(document.body),
                            clickOutsideToClose: !1,
                            escapeToClose: !1,
                            locals: {
                                mode: "create",
                                initialWidth: w.page.pageWidthDim,
                                initialHeight: w.page.pageHeightDim
                            }
                        }).then((function(e) {
                            const t = e.page;
                            w.page.pageWidthDim = t.pageWidthDim,
                            w.page.pageHeightDim = t.pageHeightDim,
                            w.page.productName = t.productName,
                            w.page.referenceId = t.referenceId,
                            w.page.referenceId && w.updateMelcoDesignId(w.page.referenceId),
                            e.eps ? (w.isBackgroundEPS = !0,
                            ce = e.eps.baseEpsPath,
                            le = e.eps.baseImagePath,
                            de = null,
                            w.pageDimensionsEntered(!0, !1)) : e.image ? (w.reloadedNonEPSBaseImage = !0,
                            w.isBackgroundEPS = !1,
                            ce = "",
                            w.DPI = e.image.DPI,
                            le = e.image.baseImagePath,
                            de = e.image.baseImageToUpload,
                            w.pageDimensionsEntered(!0, !0)) : w.pageDimensionsEntered(!0, !1),
                            (le || ce) && (I.showTemplateResizeBtn = !1,
                            w.showBaseFileReplace = !0)
                        }
                        ), (function() {}
                        )))
                    }
                    ,
                    w.resizePage = function() {
                        F.show({
                            controller: "PageDimensionsModalCtrl",
                            template: i("f125"),
                            parent: angular.element(document.body),
                            clickOutsideToClose: !1,
                            escapeToClose: !1,
                            locals: {
                                mode: "edit",
                                initialWidth: w.page.pageWidthDim,
                                initialHeight: w.page.pageHeightDim
                            }
                        }).then((function(e) {
                            const t = e.page;
                            w.page.pageWidthDim = t.pageWidthDim,
                            w.page.pageHeightDim = t.pageHeightDim,
                            w.page.referenceId = t.referenceId,
                            e.eps ? (w.isBackgroundEPS = !0,
                            ce = e.eps.baseEpsPath,
                            le = e.eps.baseImagePath,
                            de = null,
                            w.pageDimensionsEntered(!0, !1)) : e.image ? (w.reloadedNonEPSBaseImage = !0,
                            w.isBackgroundEPS = !1,
                            ce = "",
                            w.DPI = e.image.DPI,
                            le = e.image.baseImagePath,
                            de = e.image.baseImageToUpload,
                            w.pageDimensionsEntered(!0, !0)) : w.pageDimensionsEntered(!0, !1)
                        }
                        ), (function() {}
                        ))
                    }
                    ,
                    w.changeColorMode = function(e) {
                        var t = se._objects;
                        const i = {
                            "bounded-text": {
                                useFontMapForEach: !0,
                                outlineColor: !0
                            },
                            "path-itext": {
                                useFontMapForEach: !0
                            },
                            "image-placeholder": {
                                useFontMapForEach: !1
                            }
                        };
                        for (var n = 0; n < t.length; n++) {
                            var o = t[n];
                            if (Object.keys(i).includes(o.type)) {
                                const e = i[o.type];
                                e.useFontMapForEach && o.fontColorsMap.forEach((function(e, t, i) {
                                    i.set(t, T.upgradeOldColor(e))
                                }
                                )),
                                e.outlineColor && (o.outlineColor = T.upgradeOldColor(o.outlineColor)),
                                o.color = T.upgradeOldColor(o.color)
                            }
                        }
                        ie = !0
                    }
                    ,
                    w.addText = function(e, t) {
                        var i = new Map;
                        i.set(1, A.getDefaultFont().Path);
                        var o = new Map;
                        o.set(1, T.createColorObj({
                            hex: "#000000",
                            cmyk: "0,0,0,1"
                        }));
                        const r = {
                            canvasWidth: re,
                            canvasHeight: ae,
                            strokeDashArray: se.getDashedArray(),
                            fontsMap: i,
                            fontColorsMap: o,
                            id: w.getLastElementId() + 1,
                            zIndex: se.getHighestZIndex() + 1,
                            Itext: e
                        };
                        var a = G.generateBoundedText(r);
                        a.setFontFamily(A.getDefaultFont().Name + "_" + A.getDefaultFont().Style),
                        a.setColor("#000000"),
                        a.setStrokeWidth(se.getVisibleStrokeWidth()),
                        a.name = Object(n["e"])(a),
                        a.Itext = e,
                        a.addedOnEdit = !1,
                        w.editMode && (a.addedOnEdit = !0),
                        se.add(a),
                        se.setActiveObject(a, t),
                        T.changeFontOption(a, 1, se)
                    }
                    ,
                    w.addCircularText = function(e) {
                        var t = new Map;
                        t.set(1, A.getDefaultFont().Path);
                        var i = new Map;
                        i.set(1, T.createColorObj({
                            hex: "#000000",
                            cmyk: "0,0,0,1"
                        }));
                        const o = {
                            canvasWidth: re,
                            canvasHeight: ae,
                            fontsMap: t,
                            fontColorsMap: i,
                            id: w.getLastElementId() + 1,
                            zIndex: se.getHighestZIndex() + 1,
                            pathWidth: se.getVisibleStrokeWidth()
                        }
                          , r = G.generatePathIText(o);
                        r.addedOnEdit = !1,
                        r.name = Object(n["e"])(r),
                        w.editMode && (r.addedOnEdit = !0),
                        se.add(r),
                        se.setActiveObject(r, e),
                        T.changeFontOption(r, 1, se)
                    }
                    ,
                    w.uploadImagesOnPlaceholder = function(e) {
                        return new Promise((t,i)=>{
                            w.$apply((async function() {
                                try {
                                    M.start("Uploading images"),
                                    C(()=>{
                                        w.$apply()
                                    }
                                    ),
                                    w.imageSelected.imageFile = e.files[0],
                                    w.imageSelected.oldImageFile = null,
                                    w.imageSelected.oldVanceImageFile = null,
                                    w.selectedImageProperties.cartoonize && (w.apiKeys.vanceAi ? await w.cartoonize() : w.showApiKeyInput.vanceAi = !0),
                                    w.selectedImageProperties.RemoveBackground && (w.apiKeys.removeBg ? w.removeBg() : w.showApiKeyInput.removeBg = !0),
                                    w.selectedImageProperties.CutoutFace && (w.apiKeys.cutoutPro ? w.faceCutout(!0) : w.showApiKeyInput.cutoutPro = !0),
                                    w.selectedImageProperties.removeBackgroundCOP && (w.apiKeys.cutoutPro ? w.faceCutout(!1) : w.showApiKeyInput.cutoutPro = !0),
                                    w.selectedImageProperties.cartoonize || w.selectedImageProperties.RemoveBackground || await U.uploadMultipleImages(w, se, e.files),
                                    e.value = null,
                                    M.stop(),
                                    C(()=>{
                                        w.$apply()
                                    }
                                    ),
                                    t()
                                } catch (error) {
                                    i(error)
                                }
                            }
                            ))
                        }
                        )
                    }
                    ,
                    w.addImagePlaceholder = function(e) {
                        var i = new fabric.ImagePlaceholder(null,{
                            originX: "center",
                            originY: "center",
                            centeredRotation: !0,
                            left: re / 2,
                            top: ae / 2,
                            stroke: "black",
                            strokeWidth: se.getVisibleStrokeWidth(),
                            strokeDashArray: se.getDashedArray(),
                            id: w.getLastElementId() + 1,
                            uuid: Object(t["a"])(),
                            fullColor: !0,
                            grading: !1,
                            lockSkewingX: !0,
                            lockSkewingY: !0,
                            lockScalingFlip: !0,
                            width: .3 * re,
                            height: .3 * re,
                            zIndex: se.getHighestZIndex() + 1,
                            hasStaticImage: !1,
                            color: T.createColorObj({
                                hex: "#000000",
                                cmyk: "0,0,0,1"
                            }),
                            selectedColorPosition: 1,
                            RemoveBackground: !1,
                            cartoonize: !1,
                            CutoutFace: !1,
                            removeBackgroundCOP: !1,
                            isOverlay: !1,
                            isPrintArea: !1
                        });
                        i.name = Object(n["e"])(i),
                        i.addedOnEdit = !1,
                        w.editMode && (i.addedOnEdit = !0),
                        se.add(i),
                        se.setActiveObject(i, e)
                    }
                    ,
                    w.addMap = async function(e) {
                        const i = new fabric.ImagePlaceholder(null,{
                            originX: "center",
                            originY: "center",
                            centeredRotation: !0,
                            left: re / 2,
                            top: ae / 2,
                            stroke: "black",
                            strokeWidth: se.getVisibleStrokeWidth(),
                            strokeDashArray: se.getDashedArray(),
                            id: w.getLastElementId() + 1,
                            uuid: Object(t["a"])(),
                            fullColor: !0,
                            grading: !1,
                            lockSkewingX: !0,
                            lockSkewingY: !0,
                            lockScalingFlip: !0,
                            width: .3 * re,
                            height: .3 * re,
                            zIndex: se.getObjects().length,
                            color: T.createColorObj({
                                hex: "#000000",
                                cmyk: "0,0,0,1"
                            }),
                            hasStaticImage: !1,
                            isColorOptions: !1,
                            RemoveBackground: !1,
                            isOverlay: !1,
                            isPrintArea: !1,
                            coverMaskArea: !0,
                            mapConfig: {
                                hasPin: !1,
                                latitude: 17.9,
                                longitude: -37.34,
                                zoom: 1.077,
                                availableStyles: [ue[0].value],
                                defaultStyle: ue[0].value
                            }
                        });
                        i.addedOnEdit = !!w.editMode,
                        se.add(i),
                        se.moveTo(i, i.zIndex),
                        se.setActiveObject(i, e);
                        const n = await f["getStaticMapImage"](i.mapConfig);
                        B.showStaticImage(se, i, {
                            imageUrl: n
                        })
                    }
                    ,
                    w.addVectorPlaceholder = function(e) {
                        var i = new fabric.VectorPlaceholder({
                            strokeWidth: se.getVisibleStrokeWidth(),
                            strokeDashArray: se.getDashedArray(),
                            width: .3 * re,
                            height: .3 * ae,
                            left: re / 2,
                            top: ae / 2,
                            allowUserUpload: !0,
                            lockSkewingX: !0,
                            lockSkewingY: !0,
                            id: w.getLastElementId() + 1,
                            uuid: Object(t["a"])(),
                            isOverlay: !1,
                            isPrintArea: !1
                        });
                        i.set("zIndex", se.getHighestZIndex() + 1),
                        i.set("centeredRotation", !0),
                        i.set("cornerSize", .015 * se.width),
                        i.set("transparentCorners", !1),
                        i.vectors = [],
                        i.set("addedOnEdit", !1),
                        w.editMode && i.set("addedOnEdit", !0),
                        $("#vectorEPSLoader")[0] && ($("#vectorEPSLoader")[0].value = null),
                        i.name = Object(n["e"])(i),
                        i.setCoords(),
                        se.add(i),
                        se.setActiveObject(i, e)
                    }
                    ,
                    w.addDynamicImage = function(e, t=!1) {
                        const i = R.createDynamicImage(se, w.getLastElementId() + 1);
                        return i.addedOnEdit = !1,
                        w.editMode && (i.addedOnEdit = !0),
                        se.add(i, !1, !t),
                        se.setActiveObject(i, e),
                        i
                    }
                    ,
                    w.addDynamicEPSPlaceholder = function(e) {
                        var i = new fabric.VectorPlaceholder({
                            strokeWidth: se.getVisibleStrokeWidth(),
                            strokeDashArray: se.getDashedArray(),
                            width: .3 * re,
                            height: .3 * ae,
                            left: re / 2,
                            top: ae / 2,
                            selectedPosition: 1,
                            selectedColorPosition: 1,
                            applyColoring: !1,
                            vectors: [],
                            colors: [],
                            lockSkewingX: !0,
                            lockSkewingY: !0,
                            id: w.getLastElementId() + 1,
                            uuid: Object(t["a"])(),
                            isOverlay: !1,
                            isPrintArea: !1
                        });
                        i.set("zIndex", se.getHighestZIndex() + 1),
                        i.set("centeredRotation", !0),
                        i.set("cornerSize", .015 * se.width),
                        i.set("transparentCorners", !1),
                        i.name = Object(n["e"])(i),
                        i.set("addedOnEdit", !1),
                        w.editMode && i.set("addedOnEdit", !0),
                        $("#vectorEPSLoader")[0] && ($("#vectorEPSLoader")[0].value = null),
                        i.setCoords(),
                        se.add(i),
                        se.setActiveObject(i, e)
                    }
                    ,
                    w.displayVectorsOnPlaceholder = function(e) {
                        U.uploadMultipleVectors(e, se.getActiveObject(), w.selectedSVGProperties.position, se, w.editMode, (function(e) {
                            w.vectorEPSUploadPercent = e,
                            C((function() {
                                w.$apply()
                            }
                            ))
                        }
                        ), (function(e) {
                            w.selectedSVGProperties.position = e,
                            w.uploadingVectorEPS = !0,
                            w.vectorEPSUploadPercent = 0,
                            C((function() {
                                w.$apply()
                            }
                            ))
                        }
                        ), (function(e) {
                            w.selectedSVGProperties.position = e,
                            w.uploadingVectorEPS = !1,
                            C((function() {
                                w.$apply()
                            }
                            ))
                        }
                        ))
                    }
                    ,
                    w.displaySVGOnPlaceholder = async function(e) {
                        e && e[0] && (await L.loadFileOnPlaceholder(e[0], se.getActiveObject(), se),
                        C(()=>w.$apply()))
                    }
                    ,
                    w.changeVariation = function() {
                        R.showDynamicImage(se, se.getActiveObject(), w.selectedImageProperties.dynamicImageVariation)
                    }
                    ,
                    w.changeDynamicEPSPosition = function() {
                        L.changeDynamicEPSPosition(se.getActiveObject(), w.selectedSVGProperties.position, se)
                    }
                    ,
                    w.changeDynamicEPSColorPosition = function() {
                        L.changeDynamicEPSColorPosition(se.getActiveObject(), w.selectedSVGProperties.colorPosition, w.svgColorPicker, se)
                    }
                    ,
                    w.changeDynamicImageColorPosition = function() {
                        R.changeDynamicImageColorPosition(se.getActiveObject(), w.selectedImageProperties.colorPosition, w.imageColorPicker, se)
                    }
                    ,
                    w.setExportPPI = function(e) {
                        w.exportPPI = e
                    }
                    ,
                    w.updateText = function(e, t) {
                        G.updateTexts(e, t, se),
                        w.selectedTextProperties.currentFontSize = fabric.util.pxToPt(t.getFontSize && t.getFontSize()),
                        w.selectedTextProperties.text = t.getText ? t.getText() : t.text
                    }
                    ,
                    w.updateCenterX = function(e, t) {
                        t.set("left", Object(r["b"])(e, w.DPI)),
                        t.setCoords(),
                        se.renderAll()
                    }
                    ,
                    w.updateCenterY = function(e, t) {
                        t.set("top", Object(r["b"])(e, w.DPI)),
                        t.setCoords(),
                        se.renderAll()
                    }
                    ,
                    w.updateRotation = function(e, t) {
                        t.set("angle", e),
                        t.setCoords(),
                        se.renderAll()
                    }
                    ,
                    w.updateStartAngle = function(e, t) {
                        t.set("startAngle", e),
                        w.editMode && t.setEditedProp("startAngle"),
                        se.renderAll()
                    }
                    ,
                    w.updateEndAngle = function(e, t) {
                        t.set("endAngle", e),
                        w.editMode && t.setEditedProp("endAngle"),
                        se.renderAll()
                    }
                    ,
                    w.updateSkewX = function(e, t) {
                        t.set("skewX", e),
                        t.setCoords(),
                        se.renderAll()
                    }
                    ,
                    w.updateSkewY = function(e, t) {
                        t.set("skewY", e),
                        t.setCoords(),
                        se.renderAll()
                    }
                    ,
                    w.updateWidth = function(e, t) {
                        t.setWidth ? t.setWidth(Object(r["b"])(e, w.DPI) / t.scaleX) : t.set("width", Object(r["b"])(e, w.DPI) / t.scaleX),
                        t.setCoords(),
                        w.editMode && (t.editedSize = !0),
                        se.renderAll()
                    }
                    ,
                    w.updateHeight = function(e, t) {
                        t.setHeight ? t.setHeight(Object(r["b"])(e, w.DPI) / t.scaleY) : t.set("height", Object(r["b"])(e, w.DPI) / t.scaleX),
                        t.setCoords(),
                        w.editMode && (t.editedSize = !0),
                        se.renderAll()
                    }
                    ,
                    w.updateMinSizePx = function(e, t) {
                        w.selectedTextProperties && e > w.selectedTextProperties.maxSizePx && (e = w.selectedTextProperties.maxSizePx,
                        w.selectedTextProperties.minSizePx = e),
                        t.setMinSizePx(fabric.util.parseUnit(e + "pt")),
                        w.selectedTextProperties.currentFontSize = fabric.util.pxToPt(t.getFontSize()),
                        w.editMode && (t.editedSize = !0),
                        se.requestRenderAll()
                    }
                    ,
                    w.updateMaxSizePx = function(e, t) {
                        t.setMaxSizePx(fabric.util.parseUnit(e + "pt")),
                        w.selectedTextProperties.currentFontSize = fabric.util.pxToPt(t.getFontSize()),
                        w.editMode && (t.editedSize = !0),
                        se.requestRenderAll()
                    }
                    ,
                    w.updateMultiline = function(e, t) {
                        t.setMultiline(e),
                        w.editMode && t.setEditedProp("multiline"),
                        se.requestRenderAll()
                    }
                    ,
                    w.updateCaps = function(e, t) {
                        t.set("caps", e),
                        w.editMode && t.setEditedProp("caps"),
                        se.requestRenderAll()
                    }
                    ,
                    w.updateMapStyleList = function(e, t, i) {
                        var n, o;
                        let r = (null === (n = i.mapConfig) || void 0 === n ? void 0 : n.availableStyles) || []
                          , a = null === (o = i.mapConfig) || void 0 === o ? void 0 : o.defaultStyle
                          , s = !1;
                        t ? r.push(e.value) : (r = r.filter(t=>t != e.value),
                        s = e.value == a),
                        (1 == r.length || s) && (a = r[0],
                        f["getStaticMapImage"]({
                            ...i.mapConfig,
                            defaultStyle: a
                        }).then(e=>{
                            B.showStaticImage(se, i, {
                                imageUrl: e
                            })
                        }
                        )),
                        i.set("mapConfig", {
                            ...i.mapConfig,
                            defaultStyle: a,
                            availableStyles: r
                        }),
                        w.editMode && i.setEditedProp("mapConfig")
                    }
                    ,
                    w.disableMapStyle = function(e, t) {
                        var i;
                        const n = (null === (i = t.mapConfig) || void 0 === i ? void 0 : i.availableStyles) || [];
                        return 1 == n.length && n.includes(e.value)
                    }
                    ,
                    w.setMapImageDisplay = function(e, t) {
                        const i = {
                            ...t.mapConfig,
                            hasPin: e
                        };
                        t.set("mapConfig", i),
                        w.editMode && t.setEditedProp("mapConfig")
                    }
                    ,
                    w.openMap = async function(e) {
                        if (!w.mapElements)
                            return;
                        const t = ()=>{
                            f["closeModal"](w.mapElements.modal),
                            f["clearGeocoder"](w.mapElements.geocoder)
                        }
                          , i = ()=>{
                            const t = f["getMapSnapshot"](w.mapElements.map)
                              , i = new Image;
                            i.src = t,
                            i.onload = ()=>{
                                e.setElement(i),
                                se.renderAll()
                            }
                        }
                          , n = ()=>{
                            t(),
                            i();
                            const {lng: n, lat: o} = w.mapElements.map.getCenter();
                            w.selectedMapProps.coordinates = `${n}, ${o}`;
                            const r = {
                                ...e.mapConfig,
                                longitude: n,
                                latitude: o,
                                zoom: w.mapElements.map.getZoom()
                            };
                            e.set("mapConfig", r),
                            w.editMode && e.setEditedProp("mapConfig")
                        }
                        ;
                        f["openModal"](w.mapElements.modal),
                        w.mapElements.map.resize(),
                        await f["setMapOptions"](w.mapElements.map, e.mapConfig),
                        f["setActionsCallback"](n, t)
                    }
                    ,
                    w.updateImageType = function(e, t) {
                        "single color" == e ? (t.fullColor = !1,
                        t.grading = !1,
                        w.selectedImageProperties.fullColor = !1,
                        w.selectedImageProperties.grading = !1,
                        t.setMode(fabric.IMAGE_MODE_SINGLE_COLOR)) : "grading" == e ? (t.fullColor = !1,
                        t.grading = !0,
                        w.selectedImageProperties.fullColor = !1,
                        w.selectedImageProperties.grading = !0,
                        w.imageColorPicker.setColor("#000000"),
                        t.setMode(fabric.IMAGE_MODE_GRADING),
                        t.setColor("#000000")) : "full color" == e && (t.fullColor = !0,
                        t.grading = !1,
                        w.selectedImageProperties.fullColor = !0,
                        w.selectedImageProperties.grading = !1,
                        t.setMode(fabric.IMAGE_MODE_FULL_COLOR)),
                        se.renderAll(),
                        w.editMode && t.setEditedProp("fullColor", "grading")
                    }
                    ,
                    w.updateFont = function(e, t) {
                        t.fontPath = e,
                        T.saveFontToOption(e, t, w.selectedTextProperties.fontOption, w.editMode),
                        T.changeFontOption(t, w.selectedTextProperties.fontOption, se)
                    }
                    ,
                    w.updatePrefix = function(e, t) {
                        w.editMode && t.setEditedProp("prefix"),
                        t.set("prefix", e),
                        se.renderAll()
                    }
                    ,
                    w.updateSuffix = function(e, t) {
                        w.editMode && t.setEditedProp("suffix"),
                        t.set("suffix", e),
                        se.renderAll()
                    }
                    ,
                    w.changeFontColorOption = function() {
                        var e;
                        (T.changeFontColorOption(w.textFillColorPicker, w.textSelected, w.selectedTextProperties.fontColorOption, se),
                        Y.getCurrentFlow() == Y.OptionBPart5 && 2 == w.selectedTextProperties.fontColorOption) && (null === (e = window.Appcues) || void 0 === e || e.show(Y.OptionBPart6))
                    }
                    ,
                    w.changeCircularTextFontColorOption = function() {
                        T.changeFontColorOption(w.textCircularFillColorPicker, w.textSelected, w.selectedTextProperties.fontColorOption, se)
                    }
                    ,
                    w.changeFontOption = async function() {
                        var e;
                        (await T.changeFontOption(se.getActiveObject(), w.selectedTextProperties.fontOption, se),
                        w.selectedTextProperties.fontPath = se.getActiveObject().fontPath,
                        C((function() {
                            w.$apply()
                        }
                        )),
                        Y.getCurrentFlow() == Y.OptionBPart2 && 2 == w.selectedTextProperties.fontOption) && (null === (e = window.Appcues) || void 0 === e || e.show(Y.OptionBPart3))
                    }
                    ,
                    w.setFontSize = function(e, t) {
                        w.editMode && (t.editedSize = !0),
                        t.set("fontSize", fabric.util.parseUnit(e + "pt")),
                        se.renderAll()
                    }
                    ,
                    w.resetForceFontSize = function(e) {
                        e.forceFontSize(!1),
                        se.renderAll()
                    }
                    ,
                    w.forceFontSize = function(e, t) {
                        t.forceFontSize(fabric.util.parseUnit(e + "pt")),
                        se.renderAll()
                    }
                    ,
                    w.updateTextAlign = function(e, t) {
                        w.editMode && t.setEditedProp("textAlign"),
                        t.set("textAlign", e),
                        se.renderAll()
                    }
                    ,
                    w.updateTextVerticalAlign = function(e, t) {
                        w.editMode && t.setEditedProp("textVerticalAlign"),
                        t.set("textVerticalAlign", e),
                        se.renderAll()
                    }
                    ,
                    w.updateTracking = function(e, t) {
                        w.editMode && t.setEditedProp("tracking"),
                        t.setTrackingAmount(e),
                        se.renderAll()
                    }
                    ,
                    w.updateLineSpacing = function(e, t) {
                        e = e || 1,
                        w.editMode && t.setEditedProp("lineSpacing"),
                        t.set("lineSpacing", e / 100),
                        se.renderAll()
                    }
                    ,
                    w.updateTextSide = function(e, t) {
                        w.editMode && t.setEditedProp("convex"),
                        t.set("convex", "convex" === e),
                        se.renderAll()
                    }
                    ,
                    w.updateId = function(e, t) {
                        e && (t.id = e)
                    }
                    ,
                    w.updateVectorColoring = function(e, t) {
                        t.applyColoring = e,
                        w.editMode && t.setEditedProp("applyColoring"),
                        e ? L.changeDynamicEPSColorPosition(t, w.selectedSVGProperties.colorPosition, w.svgColorPicker, se) : (t.set("svgColor", null),
                        se.renderAll())
                    }
                    ,
                    w.updateZIndex = function(e, t) {
                        e < 0 ? e = 0 : e > se.getObjects().length - 1 && (e = se.getObjects().length - 1),
                        t.zIndex = e,
                        se.moveTo(t, e),
                        se.renderAll(),
                        w.updateLayers()
                    }
                    ,
                    w.updateOutlineWidth = function(e, t) {
                        "bounded-text" === t.type ? (t.set("outlineWidth", e),
                        w.selectedTextProperties.currentFontSize = fabric.util.pxToPt(t.getFontSize()),
                        w.editMode && t.setEditedProp("outlineWidth")) : "path-itext" === t.type && t.set("strokeWidth", e),
                        se.renderAll()
                    }
                    ,
                    w.updateHorizontalDiameter = function(e, t) {
                        t.set("horizontalDiameter", Object(r["b"])(e, w.DPI)),
                        w.editMode && (t.editedSize = !0),
                        se.renderAll()
                    }
                    ,
                    w.updateVerticalDiameter = function(e, t) {
                        t.set("verticalDiameter", Object(r["b"])(e, w.DPI)),
                        w.editMode && (t.editedSize = !0),
                        se.renderAll()
                    }
                    ,
                    w.updateRotationLock = function(e, t) {
                        t.set("rotationStep", e ? 90 : 1),
                        w.editMode && t.setEditedProp("rotationStep")
                    }
                    ,
                    w.cartoonize = e=>(M.start("Applying filter"),
                    K.cartoonizeImage(w.apiKeys.vanceAi, w.imageSelected.imageFile).then(t=>{
                        w.imageSelected.oldVanceImageFile = w.imageSelected.imageFile,
                        w.imageSelected.imageFile = t,
                        U.uploadMultipleImages(w, se, [t]),
                        M.stop(),
                        e && te.showSuccessModal("Successful integration with VanceAi!", "Let's apply filters!")
                    }
                    ).catch(e=>{
                        window.rumReportError(e.msg || e),
                        w.imageSelected.oldVanceImageFile = null,
                        (null === e || void 0 === e ? void 0 : e.code) == v["VANCE_ERROR_CODE"].invalid_token && (w.showApiKeyInput.vanceAi = !0),
                        C(()=>w.$apply()),
                        M.stop(),
                        te.showImageFilterError("VanceIA", e)
                    }
                    )),
                    w.addCartoonizeFilter = ()=>{
                        if (w.imageSelected.cartoonize = w.selectedImageProperties.cartoonize,
                        w.editMode && w.imageSelected.setEditedProp("cartoonize"),
                        !w.imageSelected.oldVanceImageFile && w.imageSelected.cartoonize)
                            w.apiKeys.vanceAi ? w.imageSelected.imageFile && w.cartoonize() : w.showApiKeyInput.vanceAi = !0;
                        else if (w.imageSelected.oldVanceImageFile) {
                            U.uploadMultipleImages(w, se, [w.imageSelected.oldVanceImageFile]);
                            const e = w.imageSelected.oldVanceImageFile;
                            w.imageSelected.oldVanceImageFile = w.imageSelected.imageFile,
                            w.imageSelected.imageFile = e
                        }
                        w.imageSelected.cartoonize || (C(()=>w.$apply()),
                        w.showApiKeyInput.vanceAi = !1)
                    }
                    ,
                    w.addFaceCutoutFilter = e=>{
                        J.addFaceCutoutFilter(w, se, e)
                    }
                    ,
                    w.faceCutout = function(e) {
                        J.faceCutout(w, se, e)
                    }
                    ,
                    w.openFreeCredits = function() {
                        _.open("https://www.cutout.pro/?vsource=cutout_share-1679178-plan1"),
                        w.creditsSelected = !0
                    }
                    ,
                    w.openFreeMonth = function() {
                        _.open("https://www.cutout.pro/?vsource=cutout_share-1679178-plan2"),
                        w.creditsSelected = !0
                    }
                    ,
                    w.sendRemoveBgAPIKey = async function() {
                        await ee.filterManager(w, "removeBg")
                    }
                    ,
                    w.sendVanceAiAPIKey = async function() {
                        await ee.filterManager(w, "vanceAi")
                    }
                    ,
                    w.sendCutoutproAPIKey = async function() {
                        await ee.filterManager(w, "cutoutPro")
                    }
                    ,
                    w.activateRemoveBG = function() {
                        if (w.imageSelected.RemoveBackground = w.selectedImageProperties.RemoveBackground,
                        w.editMode && w.imageSelected.setEditedProp("RemoveBackground"),
                        !w.imageSelected.oldImageFile && w.imageSelected.RemoveBackground)
                            w.apiKeys.removeBg ? w.imageSelected.imageFile && w.removeBg() : w.showApiKeyInput.removeBg = !0;
                        else if (w.imageSelected.oldImageFile) {
                            U.uploadMultipleImages(w, se, [w.imageSelected.oldImageFile]);
                            const e = w.imageSelected.oldImageFile;
                            w.imageSelected.oldImageFile = w.imageSelected.imageFile,
                            w.imageSelected.imageFile = e
                        }
                        w.apiKeys.removeBg || w.imageSelected.RemoveBackground || (C(()=>w.$apply()),
                        w.showApiKeyInput.removeBg = !1)
                    }
                    ,
                    w.removeBg = function() {
                        M.start("Removing background"),
                        q.removeBackground(w.apiKeys.removeBg, w.imageSelected.imageFile).then(e=>{
                            w.imageSelected.oldImageFile = w.imageSelected.imageFile,
                            w.imageSelected.imageFile = e,
                            U.uploadMultipleImages(w, se, [e]),
                            M.stop()
                        }
                        ).catch(e=>{
                            window.rumReportError(e),
                            w.imageSelected.oldImageFile = null,
                            C(()=>w.$apply()),
                            M.stop(),
                            te.showCommonError(e, "There seems to be an error with your remove.bg account, so the background could not be removed from the image. Please visit your account on remove.bg to correct this.", "Remove.bg Error" + (e.statusText ? ": " + e.statusText : "!"))
                        }
                        )
                    }
                    ,
                    w.uploadFont = function(e) {
                        e && e[0] && (w.uploadingFont = !0,
                        w.fontUploadPercent = 0,
                        A.uploadFont(e[0], (function(e) {
                            w.fontUploadPercent = e
                        }
                        )).then((function() {
                            w.uploadingFont = !1,
                            w.loadFonts(!1)
                        }
                        )).catch((function() {
                            w.uploadingFont = !1
                        }
                        )))
                    }
                    ,
                    w.deleteFont = function(e) {
                        var t = w.selectedTextProperties.fontPath;
                        A.deleteFont(e).then((function(e) {
                            e && w.loadFonts(!1),
                            w.selectedTextProperties.fontPath = t
                        }
                        ))
                    }
                    ,
                    w.deselectAll = function() {
                        se.discardActiveObject().renderAll(),
                        se.discardActiveGroups(),
                        w.textSelected = null,
                        w.imageSelected = null
                    }
                    ,
                    w.saveDesignTemplate = async()=>{
                        E.clearPreview();
                        const e = E.getProduct();
                        M.stop(),
                        M.start("Saving design template"),
                        C(()=>w.$apply()),
                        w.deselectAll();
                        for (const o of se.getObjects())
                            Object(n["c"])(o);
                        se.renderAll();
                        const t = await O.limitImageResolution(se.toDataURL(), 512, 512)
                          , i = await Object(h["d"])("productThumb", t.base64);
                        return e.preview.thumbnailPath = i.Path,
                        e.eps.imagePlaceHoldersEps.forEach(e=>{
                            e.mapConfig && "string" !== typeof e.mapConfig && (e.mapConfig = JSON.stringify(e.mapConfig))
                        }
                        ),
                        await Object(c["f"])(e, e.id),
                        M.stop(),
                        e
                    }
                    ,
                    w.saveProduct = async()=>{
                        E.clearPreview();
                        const e = E.getProduct();
                        M.stop(),
                        M.start("Saving template"),
                        C(()=>w.$apply()),
                        w.deselectAll();
                        const t = await O.limitImageResolution(se.toDataURL(), 512, 512)
                          , i = await Object(h["d"])("productThumb", t.base64);
                        return e.preview.thumbnailPath = i.Path,
                        await Object(g["b"])(e),
                        M.stop(),
                        e
                    }
                    ,
                    w.goToStep2 = async function(e=!1) {
                        var t;
                        let o;
                        if (M.start("Saving data"),
                        this.isManagedUser && w.editMode) {
                            const e = E.getProduct().id;
                            o = await D.getProduct(e)
                        }
                        ie && E.setNeedColorsUpgrade(!0),
                        Object(n["o"])(se),
                        w.deselectAll(),
                        E.clearEPS(),
                        E.setEPSSize(re, ae),
                        E.setEPSdpi(w.DPI),
                        E.setExportPPI(w.exportPPI),
                        E.setProductName(w.page.productName),
                        E.setMelcoReferenceId(w.page.referenceId),
                        E.setEPSBaseEPSPath(ce),
                        E.setProductFormat(w.page.exportFormat),
                        E.setProductColorMode(w.page.exportColorMode),
                        E.setEPSMirroring(w.page.mirror),
                        E.setEpsMergeOutput(w.page.mergeOutput);
                        for (const i of se.getElementsGroups())
                            i.visible = !0,
                            i.locked = !1;
                        E.addGroups(null === (t = se.getElementsGroups()) || void 0 === t ? void 0 : t.filter(e=>se.getGroupElements(e).length > 0));
                        const r = []
                          , s = [];
                        if (console.log(w.editMode, w.productGuidPromise),
                        !w.editMode && w.productGuidPromise) {
                            const e = await w.productGuidPromise;
                            a["b"]("product", {
                                id: e,
                                editing: !1
                            }),
                            E.setProductId(e)
                        }
                        if (!le || de || w.reloadedNonEPSBaseImage) {
                            if (de) {
                                const e = Object(h["d"])("eps", de).then((function(e) {
                                    E.setEPSBaseImagePath(e.Path)
                                }
                                ));
                                r.push(e)
                            }
                        } else
                            E.setEPSBaseImagePath(le);
                        for (const i of se.getObjects()) {
                            const e = {
                                "bounded-text": {
                                    prodEpsProperty: "textsEps",
                                    prodEpsMethod: "addEPSTextFromObject"
                                },
                                "path-itext": {
                                    prodEpsProperty: "circularTextsEps",
                                    prodEpsMethod: "addEPSCircularTextFromObject"
                                },
                                "image-placeholder": {
                                    prodEpsProperty: "imagePlaceHoldersEps",
                                    prodEpsMethod: "addEPSPlaceholderImageFromObject"
                                },
                                "vector-placeholder": {
                                    prodEpsProperty: "vectorEPSEps",
                                    prodEpsMethod: "addEPSVectorEPSFromObject"
                                }
                            }
                              , t = "image-placeholder";
                            if (Object.keys(e).includes(i.type)) {
                                const n = e[i.type];
                                if (o && i.locked) {
                                    const e = o.eps[n.prodEpsProperty].find(e=>e.uuid === i.uuid);
                                    e && (i.visible = e.visible)
                                }
                                i.type !== t ? r.push(E[n.prodEpsMethod](i)) : (i.dynamicImagesPath && (i.dynamicImagesPath = JSON.stringify(Array.from(i.dynamicImagesPath.entries()))),
                                s.push((async()=>{
                                    try {
                                        return {
                                            previewImage: await E.addEPSPlaceholderImageFromObject(i),
                                            prodImage: i
                                        }
                                    } catch (error) {
                                        console.error(error)
                                    }
                                }
                                )()))
                            }
                        }
                        S.all(r).then(()=>{
                            S.all(s).then(async t=>{
                                try {
                                    if (t && t.length) {
                                        const e = t.filter(e=>e && e.previewImage.newlyAdded && e.previewImage.previewElement && e.previewImage.previewElement.dynamicImagesPath)
                                          , i = t.filter(e=>e && e.previewImage.previewElement && !e.previewImage.previewElement.dynamicImagesPath && e.previewImage.previewElement.maskPath && (e.previewImage.newlyAdded || e.prodImage.maskChanged));
                                        e.length && (console.log("Resizing dynamic images"),
                                        await R.limitDynamicImageFileSizes(e.map(e=>e.prodImage), e.map(e=>e.previewImage.previewElement), H.MAX_PREVIEW_IMAGE_SIZE)),
                                        i.length && (console.log("Resizing mask images"),
                                        await O.limitMaskImagesSize(i.map(e=>e.prodImage), i.map(e=>e.previewImage.previewElement), H.MAX_PREVIEW_IMAGE_SIZE))
                                    }
                                    if (E.updatePreviewGroups(),
                                    e) {
                                        let e = null;
                                        if (w.forMyDesigns) {
                                            e = await w.saveDesignTemplate();
                                            const t = x.search().designId || "";
                                            if (t)
                                                F.show({
                                                    controller: "DesignEditModeModalCtrl",
                                                    template: i("6b63"),
                                                    locals: {
                                                        designId: t
                                                    },
                                                    parent: angular.element(document.body),
                                                    clickOutsideToClose: !1,
                                                    escapeToClose: !1
                                                }).then(async i=>{
                                                    await w.publishDesign(e, t, i.action),
                                                    w.confirmDesignSaved(e.id, t)
                                                }
                                                );
                                            else {
                                                const i = await w.publishDesign(e, t);
                                                w.confirmDesignSaved(e.id, i.id)
                                            }
                                        } else
                                            I.user.AccessRoles.Serialized.split(",").includes("admin", "admin-ui") ? (e = await w.saveDesignTemplate(),
                                            w.confirmDesignSaved(e.id)) : (w.skipTemplateExitAlert = !0,
                                            x.path("/home"))
                                    } else
                                        w.isUserDesignCreation ? x.path("/createProduct2").search({
                                            forUserDesignCreation: "true",
                                            flowId: x.search().flowId
                                        }) : w.createDesignOnTemplate ? (await w.saveProduct(),
                                        w.skipTemplateExitAlert = !0,
                                        w.productSaved = !0,
                                        x.search("templateId", null),
                                        x.search("createDesignOnTemplate", null),
                                        x.path("/store/designLibrary")) : (M.stop(),
                                        x.path("/createProduct2"))
                                } catch (error) {
                                    window.rumReportError(error),
                                    M.stop(),
                                    te.showCommonError(error, "Something wrong happened while going to step 2")
                                }
                                C(()=>w.$apply())
                            }
                            ).catch((function(e) {
                                window.rumReportError(e),
                                M.stop(),
                                te.showCommonError(e, "Something wrong happened while going to step 2")
                            }
                            ))
                        }
                        ).catch((function(e) {
                            window.rumReportError(e),
                            M.stop(),
                            te.showCommonError(e, "Something wrong happened while going to step 2")
                        }
                        ))
                    }
                    ,
                    w.confirmDesignSaved = function(e, t="") {
                        F.show({
                            controller: "DesignTemplateSavedModalCtrl",
                            template: i("297c"),
                            locals: {
                                templateId: e,
                                designId: t
                            },
                            parent: angular.element(document.body),
                            clickOutsideToClose: !1,
                            escapeToClose: !1
                        }).then(()=>{
                            w.skipTemplateExitAlert = !0,
                            w.forMyDesigns ? x.path("/designs") : x.path("/admin/designs"),
                            C(()=>w.$apply())
                        }
                        ),
                        C(()=>w.$apply())
                    }
                    ,
                    w.startFillColorSampler = function(e) {
                        w.colorSamplerActive = !0,
                        j.startColorSampler(se, e, se.getActiveObject(), "fill")
                    }
                    ,
                    w.startOutlineColorSampler = function(e) {
                        w.colorSamplerActive = !0,
                        j.startColorSampler(se, e, se.getActiveObject(), "outline")
                    }
                    ,
                    w.updateImageCover = function(e, t) {
                        t.set("coverMaskArea", e),
                        t.originalElement && (t.setElement(t.originalElement),
                        se.renderAll()),
                        w.editMode && t.setEditedProp("coverMaskArea")
                    }
                    ,
                    w.updateVectorCover = function(e, t) {
                        t.set("coverMaskArea", e),
                        t.svgString ? (t.set("svgString", t.svgString),
                        se.renderAll()) : t.pdf && (t.set("pdf", t.pdf),
                        se.renderAll()),
                        w.editMode && t.setEditedProp("coverMaskArea")
                    }
                    ;
                    var he = !1
                      , me = e.debounce((function(e, t) {
                        !he && t && (t.set("imageColor", "#" + e.HEX),
                        se.renderAll()),
                        he = !1
                    }
                    ), 300);
                    w.imageColorChange = function(e, t) {
                        t && w.imageSelected ? (w.imageSelected.set("imageColor", "#" + e.HEX),
                        se.renderAll()) : me(e, w.imageSelected)
                    }
                    ,
                    w.imageColorSave = function(e, t) {
                        if (t = t || w.imageSelected,
                        t) {
                            const i = e.HEX;
                            R.saveDynamicImageColor(e, t, w.editMode),
                            t.set("imageColor", "#" + i),
                            se.renderAll()
                        }
                    }
                    ,
                    w.textFillColorChange = function(e) {
                        w.textSelected && G.textFillColor(w, se, e)
                    }
                    ,
                    w.textFillColorSave = function(e) {
                        w.textSelected && G.textFillColor(w, se, e, !0)
                    }
                    ,
                    w.textOutlineColorChange = function(e) {
                        w.textSelected && G.textOutlineColor(w, se, e)
                    }
                    ,
                    w.textOutlineColorSave = function(e) {
                        w.textSelected && G.textOutlineColor(w, se, e, !0)
                    }
                    ,
                    w.textCircularColorFillChange = function(e) {
                        w.textSelected && G.textCircularColorFill(w, se, e)
                    }
                    ,
                    w.textCircularColorFillSave = function(e) {
                        w.textSelected && G.textCircularColorFill(w, se, e, !0)
                    }
                    ,
                    w.svgColorChange = function(e) {
                        w.svgSelected && w.svgSelected.applyColoring && (w.svgSelected.set("svgColor", W.colorToWeb(e)),
                        se.renderAll())
                    }
                    ,
                    w.svgColorSave = function(e) {
                        w.svgSelected && w.svgSelected.applyColoring && (w.svgSelected.set("svgColor", W.colorToWeb(e)),
                        L.saveDynamicEPSColor(e, se.getActiveObject(), w.editMode),
                        se.renderAll())
                    }
                    ,
                    w.$on("$destroy", (function() {
                        console.log("Cleaning up resources from step 1"),
                        w.textFillColorPicker.destroy(),
                        w.textOutlineColorPicker.destroy(),
                        w.textCircularFillColorPicker.destroy(),
                        w.imageColorPicker.destroy(),
                        w.svgColorPicker.destroy(),
                        M.stop(),
                        se && (se.dispose(),
                        $("#fabric-container").remove())
                    }
                    )),
                    w.pickColorLibrary = async function(e) {
                        N.showColorLibraryPicker().then((function(t) {
                            t && (e.colorLibraryId = t.LibraryId,
                            w.editMode && e.setEditedProp("colorLibraryId"),
                            "bounded-text" === e.type ? (w.selectedTextProperties.fontColorOption = 1,
                            T.changeFontColorOption(w.textFillColorPicker, e, w.selectedTextProperties.fontColorOption, se)) : "path-itext" === e.type ? (w.selectedTextProperties.fontColorOption = 1,
                            T.changeFontColorOption(w.textCircularFillColorPicker, e, w.selectedTextProperties.fontColorOption, se)) : "vector-placeholder" === e.type ? (w.selectedSVGProperties.colorPosition = 1,
                            L.changeDynamicEPSColorPosition(e, 1, w.svgColorPicker, se)) : "image-placeholder" === e.type && (w.selectedImageProperties.colorPosition = 1,
                            R.changeDynamicImageColorPosition(e, 1, w.imageColorPicker, se)),
                            V.getLibraryName(t.LibraryId).then((function(e) {
                                w.selectedColorLibraryName = e
                            }
                            )))
                        }
                        ))
                    }
                    ,
                    w.removeColorLibrary = function(e) {
                        e.colorLibraryId = null,
                        w.editMode && e.setEditedProp("colorLibraryId"),
                        "bounded-text" === e.type ? (w.selectedTextProperties.fontColorOption = 1,
                        T.changeFontColorOption(w.textFillColorPicker, e, w.selectedTextProperties.fontColorOption, se)) : "path-itext" === e.type ? (w.selectedTextProperties.fontColorOption = 1,
                        T.changeFontColorOption(w.textCircularFillColorPicker, e, w.selectedTextProperties.fontColorOption, se)) : "vector-placeholder" === e.type ? (w.selectedSVGProperties.colorPosition = 1,
                        L.changeDynamicEPSColorPosition(e, 1, w.svgColorPicker, se)) : "image-placeholder" === e.type && (w.selectedImageProperties.colorPosition = 1,
                        R.changeDynamicImageColorPosition(e, 1, w.imageColorPicker, se))
                    }
                    ,
                    w.pickFontLibrary = async function(e) {
                        const t = await N.showFontLibraryPicker();
                        t && (e.fontLibraryId = t.LibraryId,
                        w.editMode && e.setEditedProp("fontLibraryId"),
                        "bounded-text" !== e.type && "path-itext" !== e.type || (w.selectedTextProperties.fontOption = 1,
                        await T.changeFontOption(e, w.selectedTextProperties.fontOption, se),
                        w.selectedTextProperties.fontPath = e.fontPath),
                        V.getLibraryName(w.textSelected.fontLibraryId).then((function(e) {
                            w.selectedFontLibraryName = e
                        }
                        )))
                    }
                    ,
                    w.removeFontLibrary = async function(e) {
                        e.fontLibraryId = null,
                        w.editMode && e.setEditedProp("fontLibraryId"),
                        "bounded-text" !== e.type && "path-itext" !== e.type || (w.selectedTextProperties.fontOption = 1,
                        await T.changeFontOption(e, w.selectedTextProperties.fontOption, se),
                        w.selectedTextProperties.fontPath = e.fontPath)
                    }
                    ,
                    w.pickVectorLibrary = async function(e) {
                        N.showVectorLibraryPicker().then((function(t) {
                            t && (e.vectorLibraryId = t.LibraryId,
                            w.editMode && e.setEditedProp("vectorLibraryId"),
                            "vector-placeholder" === e.type && (w.selectedSVGProperties.position = 1,
                            L.changeDynamicEPSPosition(se.getActiveObject(), 1, se)),
                            V.getLibraryName(t.LibraryId).then((function(e) {
                                w.selectedVectorLibraryName = e
                            }
                            )))
                        }
                        ))
                    }
                    ,
                    w.removeVectorLibrary = function(e) {
                        e.vectorLibraryId = null,
                        w.editMode && e.setEditedProp("vectorLibraryId"),
                        "vector-placeholder" === e.type && (w.selectedSVGProperties.position = 1,
                        L.changeDynamicEPSPosition(se.getActiveObject(), 1, se))
                    }
                    ,
                    w.pickImageLibrary = async function(e) {
                        N.showImageLibraryPicker().then((function(t) {
                            t && (e.imageLibraryId = t.LibraryId,
                            "image-placeholder" === e.type && (w.selectedImageProperties.dynamicImageVariation = 1,
                            R.showDynamicImage(se, e, 1)),
                            V.getLibraryName(t.LibraryId).then((function(e) {
                                w.selectedImageLibraryName = e
                            }
                            )))
                        }
                        ))
                    }
                    ,
                    w.removeImageLibrary = function(e) {
                        e.imageLibraryId = null,
                        "image-placeholder" === e.type && (w.selectedImageProperties.dynamicImageVariation = 1,
                        R.showDynamicImage(se, e, 1))
                    }
                    ,
                    w.updateMelcoDesignId = function(e) {
                        e && e.length > 6 && Q.getMetaData(e).then((function(e) {
                            e.design_data && e.design_data.letterings ? (w.melcoTextIds = e.design_data.letterings.map(e=>e.id),
                            w.melcoIsValidId = !0) : (w.melcoTextIds = [],
                            w.melcoIsValidId = !1)
                        }
                        )).catch(e=>{
                            w.melcoTextIds = [],
                            w.melcoIsValidId = !1,
                            window.rumReportError(e)
                        }
                        )
                    }
                    ,
                    w.updateMelcoTextId = async function(e, t) {
                        w.editMode && t.setEditedProp("referenceId"),
                        t.set("referenceId", e),
                        se.renderAll()
                    }
                    ,
                    w.onPodProductAssignerClose = function() {
                        w.skipTemplateExitAlert = !0,
                        x.path("/admin/templateProducts")
                    }
                    ,
                    w.showAndUploadDynamicImageToS3 = async function(e, t) {
                        t && (e.dynamicImagesPath.set(1, (await Object(h["d"])("preview", t)).Path),
                        R.showDynamicImage(se, e, 1))
                    }
                    ,
                    w.manualTemplateProductResize = function(e) {
                        e && (w.dimensionsModalSubmittedData = e.submittedData,
                        w.page.pageWidthDim = e.pageWidthDim,
                        w.page.pageHeightDim = e.pageHeightDim,
                        w.pageDimensionsEntered(!0, !1),
                        E.setProductTemplatePreviewTargetSize(1e3, 1e3))
                    }
                    ,
                    w.addPrintArea = async function(e, t, i, o) {
                        const r = w.addDynamicImage();
                        r.name = "Print Area",
                        Object(n["l"])(r, e),
                        await w.showAndUploadDynamicImageToS3(r, o),
                        w.updateWidth(t, r),
                        w.updateHeight(i, r)
                    }
                    ,
                    w.onPodProductAssigned = async function(e) {
                        w.showPodProductAssignerModal = !1;
                        let t = ""
                          , n = ""
                          , o = i("d0a0");
                        const a = e.biggestPlaceholder
                          , l = e.podAssignments
                          , c = await Object(d["a"])(e.podId);
                        if (E.setPod({
                            id: c.id,
                            apiKeyReference: c.apiKeyReference
                        }),
                        l.length) {
                            M.start("Loading POD data..."),
                            C(()=>w.$apply());
                            let d = "Sample Template Product";
                            w.exportPPI = 300,
                            w.page.exportFormat = "png";
                            let u = 0
                              , h = 0;
                            if (c) {
                                const s = {
                                    printify: {
                                        name: "(Printify)",
                                        property: "size",
                                        printAreaUrl: "printify.png"
                                    },
                                    printful: {
                                        name: "(Printful)",
                                        property: "biggestPlaceholder",
                                        printAreaUrl: "printful.png"
                                    }
                                };
                                if (Object.keys(s).includes(c.name.toLocaleLowerCase())) {
                                    const {name: p, property: g, printAreaUrl: f} = s[c.name.toLocaleLowerCase()]
                                      , v = "printify"
                                      , b = c.name.toLocaleLowerCase() === v
                                      , y = {
                                        [g]: b ? a || await Object(m["a"])(l[0], e.storeUrl) : a
                                    }
                                      , w = await Object(m["b"])(l[0], e.storeUrl);
                                    y[g] && w ? (u = b ? Object(r["c"])(y[g].width, 300) : Object(r["c"])(y[g].width, a.dpi),
                                    h = b ? Object(r["c"])(y[g].height, 300) : Object(r["c"])(y[g].height, a.dpi),
                                    d = `${b ? w.title : w.product.title} ${p} - ${l[0].placeholderId} - ${a.aspectRatio}`,
                                    o = i("414b")("./print-area-" + f)) : (t = "Placeholder Data Error",
                                    n = `Couldn't retrieve the placeholder data for placeholder ${l[0].placeholderId}. Cannot continue.`)
                                } else
                                    t = "Invalid POD service",
                                    n = `'${c.name}' is not a valid POD provider! Cannot continue.`
                            }
                            if (!t) {
                                w.pageDimensionsEntered(!1, !1),
                                w.page.productName = d,
                                w.page.pageWidthDim = u,
                                w.page.pageHeightDim = h,
                                I.showTemplateResizeBtn = !1,
                                w.showBaseFileReplace = !1,
                                w.pageDimensionsEntered(!0, !1),
                                w.addPrintArea(se, u, h, o);
                                const e = await Object(s["e"])(l[0]);
                                if (e && e.images.length > 0 && !e.images[0].path.includes("white-background.png") && E.setPreviewColorOptionsMetadata(e),
                                E.setPodAssignments(l),
                                e.images.length) {
                                    const t = await O.getImageFromSrc(Object(p["a"])(e.images[0].path));
                                    E.setProductTemplatePreviewTargetSize(t.width, t.height)
                                }
                                M.stop(),
                                C(()=>w.$apply()),
                                se.renderAll()
                            }
                        } else if (l.length || !c || ["printify", "printful"].includes(c.apiKeyReference))
                            t = "No POD assignments found!",
                            n = "No POD assignments were found, please try again or report the issue";
                        else {
                            w.pageDimensionsEntered(!1, !1);
                            const e = await F.show({
                                controller: "PageDimensionsModalCtrl",
                                template: i("f125"),
                                parent: angular.element(document.body),
                                clickOutsideToClose: !1,
                                escapeToClose: !1,
                                locals: {
                                    mode: "create",
                                    initialWidth: w.page.pageWidthDim,
                                    initialHeight: w.page.pageHeightDim
                                }
                            });
                            if (e) {
                                M.start("Loading POD data..."),
                                C(()=>w.$apply());
                                const t = e.page;
                                w.page.productName = t.productName,
                                w.manualTemplateProductResize(t),
                                w.addPrintArea(se, w.page.pageWidthDim, w.page.pageHeightDim, o),
                                w.pageDimensionsEntered(!0, !1),
                                C(()=>{
                                    M.stop()
                                }
                                , 2500)
                            }
                        }
                        t && (M.stop(),
                        w.skipTemplateExitAlert = !0,
                        te.showCommonError(t, n, t, ()=>{
                            x.path("/home")
                        }
                        ))
                    }
                    ,
                    w.previewMode || w.$on("$locationChangeStart", (function(e, t, i) {
                        t.includes("/createProduct") || w.skipTemplateExitAlert || confirm("You're about to exit the template. This means all changes will be lost, do you want to continue?") || (e.preventDefault(),
                        E.clearChildTemplateProduct())
                    }
                    )),
                    w.publishDesign = async function(e, t, i=I.saveUpdateAndOptions) {
                        let n = {}
                          , o = {};
                        return t ? (n = await Object(b["c"])(t),
                        n.images = [e.preview.thumbnailPath],
                        i == I.saveUpdateAndOptions && (o = await Object(c["b"])(e.id),
                        n.optionSetId = o.setId)) : (o = await Object(c["b"])(e.id),
                        n = {
                            designTemplateIds: [e.id],
                            id: t,
                            images: [e.preview.thumbnailPath],
                            optionSetId: o.setId,
                            title: e.name,
                            subtitle: "",
                            isMyDesign: !0
                        }),
                        Object(b["f"])(n, t)
                    }
                }
                w.$inject = ["$scope", "$timeout", "$location", "$q", "$mdToast", "$interval", "$window", "FontManagerService", "MultipleFontService", "ProductService", "ImageUtilService", "$rootScope", "ProductAPIService", "$mdDialog", "blockUI", "TestImageService", "ColorSamplerService", "DynamicVectorService", "DynamicImageService", "MultipleFileUploadService", "CanvasUtilService", "LibrariesUtilService", "LibrariesAPIService", "TextService", "ElementsColorService", "ConfigService", "ExecutionService", "AppCuesService", "RemoveBgAPIService", "ImageFiltersAPIService", "VectorUtilService", "MelcoAPIService", "CutoutProUtilService", "ImageFilterManagerService", "MdDialogService"],
                angular.module("app.ctrls").controller("CreateStepOneCtrl", w)
            }
            )()
        }
        .call(this, i("c46f"))
    },
    8098: function(e, t, i) {},
    "80bc": function(e, t) {
        var i = '<title>Customily Options</title> <div class="options-page" ng-controller="OptionsCtrl" ng-cloak> <iframe ng-src="{{ iFrameUrl }}"></iframe> </div> ';
        e.exports = i
    },
    "81aa": function(e, t, i) {
        (function() {
            "use strict";
            function e(e, t, i, n) {
                const o = new Date;
                o.setFullYear(o.getFullYear() + 10);
                var r = n.get("customilyStamp");
                r || (r = ""),
                n.put("customilyStamp", r + "-" + t.stampId, {
                    domain: ".customily.com",
                    expires: o.toUTCString(),
                    secure: !0
                }),
                t.redirectTo ? i.location.href = "https://" + t.redirectTo : i.location.href = "https://apps.shopify.com/customily-options-3"
            }
            e.$inject = ["$scope", "$routeParams", "$window", "$cookies"],
            angular.module("app.ctrls").controller("StampCtrl", e)
        }
        )()
    },
    "81d3": function(e, t, i) {
        e.exports = i.p + "img/placeholderCustomily.3cb07f2e.png?x-request=html"
    },
    8293: function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i) {
                e.showHeader = !1,
                t.shop = i.search().shop,
                t.shop || i.path("/")
            }
            e.$inject = ["$rootScope", "$scope", "$location"],
            angular.module("app.ctrls").controller("InvalidStoreCtrl", e)
        }
        )()
    },
    8336: function(e, t) {
        (function(e, t) {
            e.fn.extend({
                colorPicker: function(i) {
                    var n = function(t, i) {
                        var n = this
                          , o = e(n.input)
                          , r = e(n.patch)
                          , a = (t.RND.rgb,
                        t.RND.hsl,
                        n.isIE8 ? (t.alpha < .16 ? "0" : "") + Math.round(100 * t.alpha).toString(16).toUpperCase() + t.HEX : "")
                          , s = 1 !== t.alpha && !n.isIE8
                          , l = o.data("colorMode");
                        n._instance && (r.css({
                            color: t.rgbaMixCustom.luminance > .22 ? "#222" : "#ddd",
                            "background-color": n._instance.toString(),
                            filter: n.isIE8 ? "progid:DXImageTransform.Microsoft.gradient(startColorstr=#" + a + ",endColorstr=#" + a + ")" : ""
                        }),
                        o.val("HEX" !== l || s ? n._instance.toString(l, n.forceAlpha) : "#" + (n.isIE8 ? a : t.HEX)),
                        n.displayCallback && n.displayCallback(t, i, n))
                    }
                      , o = function(e) {
                        return e.value || e.getAttribute("value") || e.style.backgroundColor || "#FFFFFF"
                    }
                      , r = function(t, i) {
                        var n = this
                          , o = c.current;
                        if ("toMemory" === i) {
                            for (var r, a = o.nodes.memos, s = "", l = 0, d = [], u = 0, p = a.length; u < p; u++)
                                r = e(a[u]),
                                s = r.css("background-color"),
                                l = Math.round(100 * r.css("opacity")) / 100,
                                d.push(s.replace(/, /g, ",").replace("rgb(", "rgba(").replace(")", "," + l + ")"));
                            d = "'" + d.join("','") + "'",
                            e.docCookies("colorPickerMemos" + (n.noAlpha ? "NoAlpha" : ""), d)
                        } else if ("resizeApp" === i)
                            e.docCookies("colorPickerSize", o.color.options.currentSize);
                        else if ("modeChange" === i) {
                            var h = o.color.options.mode;
                            e.docCookies("colorPickerMode", h.type + "-" + h.z)
                        }
                    }
                      , a = function(i, a) {
                        var s, l = {
                            klass: t.ColorPicker,
                            input: i,
                            patch: i,
                            isIE8: !!document.all && !document.addEventListener,
                            animationSpeed: 200,
                            draggable: !0,
                            margin: {
                                left: -1,
                                top: 2
                            },
                            customBG: "#FFFFFF",
                            color: o(i),
                            initStyle: "display: none",
                            enableInputDrag: !1,
                            mode: e.docCookies("colorPickerMode") || "hsv-h",
                            memoryColors: e.docCookies("colorPickerMemos" + ((a || {}).noAlpha ? "NoAlpha" : "")),
                            size: e.docCookies("colorPickerSize") || 1,
                            renderCallback: n,
                            actionCallback: r,
                            onShow: a.onShow,
                            onHide: a.onHide,
                            onSave: a.onSave
                        };
                        for (var c in a)
                            l[c] = a[c];
                        return s = new l.klass(l),
                        s.color.options._instance = s.color,
                        s
                    }
                      , s = function(n, r, s) {
                        var d = s ? "off" : "on";
                        e(n)[d]("focus.colorPicker", (function(t) {
                            var s = e(this)
                              , l = 0;
                            if (r)
                                for (var d = 0; d < c.length; ++d) {
                                    var u = c[d].color.options.input;
                                    if (u === s.get(0)) {
                                        l = d;
                                        break
                                    }
                                }
                            var p = c[l] || (c[l] = a(this, i))
                              , h = s.offset()
                              , m = p.color.options
                              , g = e.ui && m.draggable ? e(p.nodes.colorPicker).draggable({
                                cancel: "." + m.CSSPrefix + "app div"
                            }) : e(p.nodes.colorPicker)
                              , f = e(m.appendTo || document.body)
                              , v = /static/.test(f.css("position"))
                              , b = v ? {
                                left: 0,
                                top: 0
                            } : f[0].getBoundingClientRect()
                              , y = 0;
                            m.color = o(n),
                            g.css({
                                position: "absolute",
                                left: h.left + m.margin.left - b.left,
                                top: h.top - g.height() - m.margin.top
                            }),
                            m.input = n,
                            m.patch = n,
                            c.current = c[l],
                            f.append(g),
                            y = setInterval((function() {
                                c.current.cssIsReady && (y = clearInterval(y),
                                g.show(p.color.options.animationSpeed),
                                p.color.options.onShow && p.color.options.onShow(p))
                            }
                            ), 10)
                        }
                        )),
                        e(t)[d]("mousedown.colorPicker", (function(t) {
                            if (c && c.current && c.current.nodes) {
                                var i = c.current
                                  , n = e(i ? i.nodes.colorPicker : void 0)
                                  , o = i ? i.color.options.animationSpeed : 0
                                  , r = e(t.target).closest(".cp-app")[0]
                                  , a = e(l).index(t.target);
                                r && i && e(c).index(r) ? t.target === i.nodes.exit && (n.hide(o),
                                e(":focus").trigger("blur"),
                                i && i.color.options.onHide && n.is(":visible") && i.color.options.onHide(i)) : -1 !== a || (n.hide(o),
                                i && i.color.options.onHide && n.is(":visible") && i.color.options.onHide(i))
                            }
                        }
                        ))
                    }
                      , l = this
                      , c = e.fn.colorPicker.colorPickers || []
                      , d = new t.Colors({
                        customBG: i && i.customBG || "#FFFFFF",
                        allMixDetails: !0
                    });
                    return e.fn.colorPicker.colorPickers = c,
                    e(this).each((function(n, r) {
                        if (e(r).off(".colorPicker"),
                        e(t).off(".colorPicker"),
                        "destroy" !== i) {
                            var l = o(r)
                              , u = l.split("(");
                            if (e(r).data("colorMode", u[1] ? u[0].substr(0, 3) : "HEX"),
                            s(r, i && i.multipleInstances, !1),
                            i && i.readOnly && (r.readOnly = !0),
                            d.setColor(l),
                            i && i.init) {
                                var p = i.multipleInstances ? c.length : 0
                                  , h = c[p] || (c[p] = a(r, i));
                                h.destroy = function() {
                                    var e = c.indexOf(h);
                                    if (e > -1) {
                                        const t = c[e];
                                        s(r, i && i.multipleInstances, !0),
                                        t.destroyAll(),
                                        c.splice(e, 1)
                                    }
                                }
                                ,
                                i.init(r, d.colors, h)
                            }
                        }
                    }
                    )),
                    this
                }
            }),
            e.docCookies = function(e, t, i) {
                var n, o, r, a, s = encodeURIComponent, l = decodeURIComponent, c = {};
                if (void 0 === t) {
                    for (n = document.cookie.split("; ") || [],
                    o = n.length; o--; )
                        r = n[o].split("="),
                        r[0] && (c[l(r.shift())] = l(r.join("=")));
                    return e ? c[e] : c
                }
                i = i || {},
                ("" === t || i.expires < 0) && (i.expires = -1),
                void 0 !== i.expires && (a = new Date,
                a.setDate(a.getDate() + i.expires)),
                document.cookie = s(e) + "=" + s(t) + (a ? "; expires=" + a.toUTCString() : "") + (i.path ? "; path=" + i.path : "") + (i.domain ? "; domain=" + i.domain : "") + (i.secure ? "; secure" : "")
            }
        }
        )(jQuery, window)
    },
    "847f": function(t, i, n) {
        "use strict";
        var o = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-modal", {
                attrs: {
                    size: "lg",
                    "modal-class": "vue-need-bootstrap",
                    title: e.modalTitle,
                    lazy: "",
                    centered: "",
                    "hide-footer": "",
                    "no-close-on-backdrop": "",
                    "no-close-on-esc": ""
                },
                on: {
                    close: e.onClose
                },
                model: {
                    value: e.isVisible,
                    callback: function(t) {
                        e.isVisible = t
                    },
                    expression: "isVisible"
                }
            }, [e.isManualAssignment ? i("generic-pod-assigner", {
                attrs: {
                    "template-product-id": e.templateProductId,
                    "pod-provider": e.podProvider
                },
                on: {
                    cancel: e.closeModal,
                    saved: e.onAssignment
                }
            }) : i("template-product-pod-assigner", {
                attrs: {
                    templateProductId: e.templateProductId
                },
                on: {
                    save: e.onAssignment
                }
            })], 1)
        }
          , r = []
          , a = n("9ab4")
          , s = n("2fe1")
          , l = n("6aac")
          , c = n("60a3")
          , d = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-row", [i("b-col", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.selectedPod,
                    expression: "!selectedPod"
                }],
                attrs: {
                    cols: "12"
                }
            }, [i("PodSelector", {
                on: {
                    select: e.podSelected
                }
            })], 1), e.podComponentName && e.filteredTemplateProductConfiguration ? i("b-col", {
                attrs: {
                    cols: "12"
                }
            }, [i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.savingVariants,
                    expression: "!savingVariants"
                }]
            }, [i(e.podComponentName, {
                tag: "component",
                attrs: {
                    store: e.storeUrl,
                    initialConfiguration: e.filteredTemplateProductConfiguration
                },
                on: {
                    save: e.onConfigurationSaved
                }
            })], 1), e.savingVariants ? i("b-col", {
                staticClass: "align-items-center d-flex flex-column justify-content-center p-4",
                attrs: {
                    cols: "12"
                }
            }, [i("b-spinner", {
                staticClass: "mr-2",
                attrs: {
                    variant: "primary"
                }
            }), i("div", {
                staticClass: "mt-2"
            }, [e._v("Saving configuration")])], 1) : e._e(), i("b-col", {
                staticClass: "text-center mb-3 mt-3",
                staticStyle: {
                    color: "red"
                },
                attrs: {
                    cols: "12"
                }
            }, [i("b", [e._v(e._s(e.errorMessage))])])], 1) : e._e(), i("b-col", {
                attrs: {
                    cols: "12"
                }
            }, [i("b-btn", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.selectedPod && !e.savingVariants,
                    expression: "selectedPod && !savingVariants"
                }],
                staticClass: "float-left",
                attrs: {
                    variant: "secondary"
                },
                on: {
                    click: function(t) {
                        return e.goToPodSelection()
                    }
                }
            }, [e._v(" Go to POD selection ")])], 1)], 1)
        }
          , u = [];
        let p = class extends c["d"] {
            constructor() {
                super(...arguments),
                this.storeUrl = ""
            }
            onValueChange() {
                this.storeUrl = this.value
            }
            onStoresChange() {
                this.filteredStores.length ? this.storeUrl = this.filteredStores[0].Url : this.storeUrl = ""
            }
            get storeSelectorTitle() {
                return this.storeUrl
            }
            get filteredStores() {
                return this.stores.filter(e=>!!this.includeNoBilling || e.HasBilling)
            }
            setStoreUrl(e) {
                this.storeUrl !== e && (this.storeUrl = e,
                this.$emit("change", e))
            }
            onStoresDropdownClick() {
                this.$refs.storesDropdown.show()
            }
            created() {
                this.filteredStores.length && this.setStoreUrl(this.filteredStores[0].Url)
            }
        }
        ;
        Object(a["b"])([Object(c["c"])({
            default: "Switch stores to browse through your different subscriptions"
        })], p.prototype, "title", void 0),
        Object(a["b"])([Object(c["c"])({
            default: []
        })], p.prototype, "stores", void 0),
        Object(a["b"])([Object(c["c"])({
            default: !1
        })], p.prototype, "includeNoBilling", void 0),
        Object(a["b"])([Object(c["c"])({
            default: ""
        })], p.prototype, "noStoresText", void 0),
        Object(a["b"])([Object(c["b"])("change")], p.prototype, "value", void 0),
        Object(a["b"])([Object(c["e"])("value")], p.prototype, "onValueChange", null),
        Object(a["b"])([Object(c["e"])("stores")], p.prototype, "onStoresChange", null),
        p = Object(a["b"])([Object(c["a"])({
            name: "StoreSelector"
        })], p);
        var h = p
          , m = n("4bb5")
          , g = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-row", [e.productToUnassign ? i("b-modal", {
                attrs: {
                    title: "Product unassign",
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    "no-close-on-backdrop": ""
                },
                on: {
                    ok: function(t) {
                        return e.unassignProduct(e.productToUnassign)
                    }
                },
                model: {
                    value: e.showUnassignConfirmModal,
                    callback: function(t) {
                        e.showUnassignConfirmModal = t
                    },
                    expression: "showUnassignConfirmModal"
                }
            }, [i("div", [e._v("Do you want to unassign the product "), i("b", [e._v('"' + e._s(e.productToUnassign.title) + '"')]), e._v("?")]), i("div", {
                staticClass: "mt-3"
            }, [e._v("If you click "), i("b", [e._v("OK")]), e._v(" there's no oopsies, no refunds, no come backs! I warned you!")])]) : e._e(), "selectProduct" === e.step ? i("b-col", [e.products && e.products.length ? i("ProductSelector", {
                attrs: {
                    products: e.products,
                    selectedProducts: e.selectedProducts
                },
                on: {
                    "product-select": e.onProductSelected,
                    "product-unassign": e.onProductUnassignClick
                }
            }) : i("div", {
                staticClass: "text-center"
            }, [i("b-spinner", {
                staticClass: "my-2",
                attrs: {
                    variant: "primary"
                }
            })], 1)], 1) : e._e(), i("b-col", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: "selectFile" === e.step,
                    expression: "step === 'selectFile'"
                }]
            }, [i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.files || !e.files.length,
                    expression: "!files || !files.length"
                }],
                staticClass: "text-center"
            }, [i("b-spinner", {
                staticClass: "my-2",
                attrs: {
                    variant: "primary"
                }
            })], 1), i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.files.length,
                    expression: "files.length"
                }]
            }, [i("b", [e._v("Select placeholders to link")]), i("b-table", {
                ref: "filesTable",
                staticClass: "w-100 mt-3",
                staticStyle: {
                    "white-space": "pre-line"
                },
                attrs: {
                    "table-class": "h-100",
                    striped: "",
                    hover: "",
                    items: e.uniqueFilesWithSize,
                    fields: e.filesTableFields,
                    responsive: "sm",
                    "select-mode": "single",
                    selectable: ""
                },
                on: {
                    "row-selected": e.onFilesSelectDeselect
                },
                scopedSlots: e._u([{
                    key: "cell(name)",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "align-items-center d-flex h-100"
                        }, [i("div", [e._v(e._s(t.item.biggestFileWithSize.file.title) + " (" + e._s(t.item.biggestFileWithSize.file.type) + ")")])])]
                    }
                }, {
                    key: "cell(size)",
                    fn: function(t) {
                        return [e._v(" " + e._s(t.item.biggestFileWithSize.width) + " x " + e._s(t.item.biggestFileWithSize.height) + " ")]
                    }
                }, {
                    key: "cell(ratio)",
                    fn: function(t) {
                        return [i("div", [e._v(" " + e._s(t.item.aspectRatio) + " ")])]
                    }
                }, {
                    key: "cell(variantsQuantity)",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "text-capitalize"
                        }, [e._v(e._s(t.item.variantIds.length))])]
                    }
                }])
            }), i("b-btn", {
                staticClass: "float-right",
                attrs: {
                    variant: "primary",
                    disabled: !e.selectedFile
                },
                on: {
                    click: function(t) {
                        return e.onFilesSelected()
                    }
                }
            }, [e._v(" Done")])], 1)]), "finalRevision" === e.step && e.selectedProduct && e.selectedFile ? i("b-col", [i("div", {
                staticClass: "mb-3"
            }, [e._v("Final revision! Double check before saving :)")]), i("li", [e._v("Product: "), i("b", [e._v(e._s(e.selectedProduct.title))])]), i("li", [e._v("Selected placeholder: " + e._s(e.selectedFile.biggestFileWithSize.file.title) + " (" + e._s(e.selectedFile.biggestFileWithSize.file.type) + ") in " + e._s(e.selectedFile.variantIds.length) + " variants")]), i("b-btn", {
                staticClass: "float-right",
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.onSave()
                    }
                }
            }, [e._v("Save")])], 1) : e._e()], 1)
        }
          , f = []
          , v = n("777b")
          , b = n("a4f5");
        const y = (e,t)=>{
            const i = new b["Fraction"](e,t);
            return `${i.numerator}:${i.denominator}`
        }
        ;
        var w = n("c46f")
          , C = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "product-selector-wrapper"
            }, [i("b-form", {
                staticClass: "fixed-content justify-content-end",
                attrs: {
                    inline: ""
                },
                on: {
                    submit: function(e) {
                        e.preventDefault()
                    }
                }
            }, [i("b-pagination", {
                attrs: {
                    size: "md",
                    "total-rows": e.totalProductsCount,
                    "per-page": e.productsPerPage
                },
                model: {
                    value: e.currentPage,
                    callback: function(t) {
                        e.currentPage = t
                    },
                    expression: "currentPage"
                }
            }), i("b-form-input", {
                staticClass: "mb-3 ml-3",
                attrs: {
                    placeholder: "Search",
                    debounce: "400"
                },
                on: {
                    update: e.updateSearchString
                }
            })], 1), i("div", {
                staticClass: "list-group scrollable-content mb-3"
            }, e._l(e.filteredProducts, (function(t) {
                return i("div", {
                    key: "product-" + t.id,
                    staticClass: "list-group-item product-item d-flex flex-wrap align-items-center justify-content-between",
                    on: {
                        click: function(i) {
                            return e.onProductSelect(t)
                        }
                    }
                }, [i("div", {
                    staticClass: "d-flex align-items-center"
                }, [t.image ? i("div", {
                    staticClass: "product-img"
                }, [i("b-img", e._b({
                    attrs: {
                        rounded: "",
                        thumbnail: "",
                        src: t.image
                    }
                }, "b-img", e.thumbsProps, !1))], 1) : e._e(), i("strong", {
                    staticClass: "ml-3"
                }, [e._v(e._s(t.title))])]), e.selectedProducts.some((function(e) {
                    return e.id === t.id
                }
                )) ? i("div", {
                    staticClass: "d-flex align-items-center"
                }, [i("b-btn", {
                    attrs: {
                        variant: "danger"
                    },
                    on: {
                        click: function(i) {
                            return i.stopPropagation(),
                            e.onUnassign(t)
                        }
                    }
                }, [e._v("Unassign")])], 1) : e._e()])
            }
            )), 0)], 1)
        }
          , x = [];
        let S = class extends c["d"] {
            constructor() {
                super(...arguments),
                this.internalSelectedProducts = [],
                this.searchString = "",
                this.productsPerPage = 10,
                this.currentPage = 1,
                this.totalProductsCount = 10,
                this.thumbsProps = {
                    width: 50,
                    height: 50
                }
            }
            onSelectedProductsChange() {
                this.internalSelectedProducts = this.selectedProducts
            }
            get filteredProducts() {
                if (!this.products)
                    return [];
                let e = this.products;
                this.searchString && (e = e.filter(e=>e.title.toLowerCase().includes(this.searchString.trim().toLowerCase()) || e.description && e.description.toLowerCase().includes(this.searchString.trim().toLowerCase()))),
                this.searchString ? this.totalProductsCount = e.length : this.totalProductsCount = this.products.length;
                const t = (this.currentPage - 1) * this.productsPerPage
                  , i = t + this.productsPerPage;
                return e = e.slice(t, i),
                e
            }
            updateSearchString(e) {
                this.searchString = e
            }
            onProductSelect(e) {
                this.internalSelectedProducts.some(t=>t.id === e.id) || this.internalSelectedProducts.push(e),
                this.$emit("change", this.internalSelectedProducts),
                this.$emit("product-select", e)
            }
            onUnassign(e) {
                const t = this.internalSelectedProducts.findIndex(t=>t.id === e.id);
                t > -1 && this.internalSelectedProducts.splice(t, 1),
                this.$emit("change", this.internalSelectedProducts),
                this.$emit("product-unassign", e)
            }
        }
        ;
        Object(a["b"])([Object(c["c"])({
            default: ()=>[]
        })], S.prototype, "products", void 0),
        Object(a["b"])([Object(c["b"])("change", {
            default: ()=>[]
        })], S.prototype, "selectedProducts", void 0),
        Object(a["b"])([Object(c["e"])("selectedProducts")], S.prototype, "onSelectedProductsChange", null),
        S = Object(a["b"])([Object(c["a"])({
            name: "ProductSelector"
        })], S);
        var P = S
          , k = P
          , _ = (n("d162"),
        n("2877"))
          , A = Object(_["a"])(k, C, x, !1, null, "ac651044", null)
          , T = A.exports;
        let E = class extends c["d"] {
            constructor() {
                super(...arguments),
                this.filesTableFields = [{
                    key: "name",
                    label: "Placeholder"
                }, {
                    key: "size",
                    label: "Biggest Area"
                }, {
                    key: "ratio",
                    label: "Aspect Ratio"
                }, {
                    key: "variantsQuantity",
                    label: "Used in variants"
                }],
                this.showUnassignConfirmModal = !0,
                this.productToUnassign = null,
                this.printfulProducts = [],
                this.selectedProducts = [],
                this.products = [],
                this.files = [],
                this.step = "selectProduct",
                this.selectedProduct = null,
                this.selectedFile = null,
                this.templateProductConfiguration = this.initialConfiguration
            }
            get uniqueFilesWithSize() {
                const e = (e,t)=>(e.width / e.height).toFixed(2) === (t.width / t.height).toFixed(2)
                  , t = [];
                for (const i of this.files) {
                    const n = t.find(t=>t.biggestFileWithSize.file.type === i.file.type && e(t.biggestFileWithSize, i));
                    if (n) {
                        n.variantIds.push(...i.variantIds),
                        n.variantIds = w["default"].uniq(n.variantIds);
                        const e = i.width * i.height;
                        e > n.biggestFileWithSize.width * n.biggestFileWithSize.height && (n.biggestFileWithSize = i)
                    } else
                        t.push({
                            biggestFileWithSize: i,
                            aspectRatio: i.aspectRatio,
                            variantIds: i.variantIds
                        })
                }
                return t
            }
            async loadProducts() {
                this.printfulProducts = await Object(v["c"])(this.store),
                this.products = this.printfulProducts.map(e=>({
                    id: e.id.toString(),
                    title: e.title || e.model,
                    image: e.image,
                    description: e.description
                }));
                const e = this.templateProductConfiguration.configurations.map(e=>e.productId);
                this.selectedProducts = this.products.filter(t=>e.includes(t.id))
            }
            async onProductSelected(e) {
                var t;
                this.selectedProduct = e;
                const i = null === (t = this.printfulProducts.find(t=>t.id.toString() === e.id)) || void 0 === t ? void 0 : t.files;
                if (!i)
                    throw Error("No files found for Printful product " + e.id);
                {
                    var n;
                    this.step = "selectFile";
                    const t = await Object(v["a"])(this.store, Number(this.selectedProduct.id))
                      , o = [];
                    for (const e of i.filter(e=>"mockup" !== e.type && "label_outside" !== e.type && "label_inside" !== e.type)) {
                        const i = t.variant_printfiles.map(t=>({
                            printFileId: t.placements[e.type],
                            variantId: t.variant_id
                        }));
                        for (const n of i) {
                            const i = t.printfiles.find(e=>n.printFileId === e.printfile_id);
                            if (i) {
                                const t = o.find(t=>t.file.type === e.type && t.height === i.height && t.width === i.width && !t.variantIds.includes(n.variantId));
                                t ? t.variantIds.push(n.variantId) : o.push({
                                    file: e,
                                    width: i.width,
                                    height: i.height,
                                    dpi: i.dpi,
                                    aspectRatio: y(i.width, i.height),
                                    variantIds: [n.variantId]
                                })
                            }
                        }
                    }
                    this.files = o,
                    await this.$nextTick();
                    const r = (null === (n = this.templateProductConfiguration.configurations.find(t=>t.productId === e.id)) || void 0 === n ? void 0 : n.placeholders.map(e=>e.placeholderId)) || [];
                    this.$refs.filesTable.clearSelected();
                    for (const e of r) {
                        const t = this.files.findIndex(t=>t.file.type === e);
                        t > -1 && this.$refs.filesTable.selectRow(t)
                    }
                }
            }
            onProductUnassignClick(e) {
                this.productToUnassign = e,
                this.showUnassignConfirmModal = !0
            }
            unassignProduct(e) {
                e && (this.templateProductConfiguration.configurations = this.templateProductConfiguration.configurations.filter(t=>t.productId !== e.id),
                this.onSave())
            }
            onFilesSelectDeselect(e) {
                this.selectedFile = e[0]
            }
            onFilesSelected() {
                if (this.selectedProduct) {
                    const e = this.selectedProduct;
                    this.step = "finalRevision";
                    let t = this.templateProductConfiguration.configurations.find(t=>t.productId === e.id);
                    const i = [];
                    if (!this.selectedFile)
                        throw new Error(`Cannot save Printful configuration for product ${this.selectedProduct.id} file without a placeholder`);
                    for (const n of this.selectedFile.variantIds)
                        i.push({
                            placeholderId: this.selectedFile.biggestFileWithSize.file.type,
                            variantId: n.toString()
                        });
                    if (t)
                        t.placeholders = i;
                    else {
                        const n = {
                            provider: "printful",
                            productId: e.id,
                            placeholders: i
                        };
                        this.templateProductConfiguration.configurations.push(n),
                        t = n
                    }
                }
            }
            async onSave() {
                if (!this.selectedProduct || !this.selectedFile)
                    throw new Error("No product selected and trying to save configuration");
                this.$emit("save", {
                    configuration: this.templateProductConfiguration,
                    biggestPlaceholder: {
                        width: this.selectedFile.biggestFileWithSize.width,
                        height: this.selectedFile.biggestFileWithSize.height,
                        dpi: this.selectedFile.biggestFileWithSize.dpi,
                        id: this.selectedFile.biggestFileWithSize.file.type,
                        aspectRatio: this.selectedFile.biggestFileWithSize.aspectRatio
                    }
                })
            }
            async created() {
                this.templateProductConfiguration.configurations = this.templateProductConfiguration.configurations.filter(e=>"printful" === e.provider),
                await this.loadProducts()
            }
        }
        ;
        Object(a["b"])([Object(c["c"])({
            required: !0
        })], E.prototype, "store", void 0),
        Object(a["b"])([Object(c["c"])({
            required: !0
        })], E.prototype, "initialConfiguration", void 0),
        E = Object(a["b"])([Object(c["a"])({
            name: "PrintfulConfigurator",
            components: {
                ProductSelector: T
            }
        })], E);
        var O = E
          , I = O
          , D = Object(_["a"])(I, g, f, !1, null, null, null)
          , F = D.exports
          , M = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-row", [e.productToUnassign ? i("b-modal", {
                attrs: {
                    title: "Product unassign",
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    "no-close-on-backdrop": ""
                },
                on: {
                    ok: function(t) {
                        return e.unassignProduct(e.productToUnassign)
                    }
                },
                model: {
                    value: e.showUnassignConfirmModal,
                    callback: function(t) {
                        e.showUnassignConfirmModal = t
                    },
                    expression: "showUnassignConfirmModal"
                }
            }, [i("div", [e._v("Do you want to unassign the product "), i("b", [e._v('"' + e._s(e.productToUnassign.title) + '"')]), e._v("?")]), i("div", {
                staticClass: "mt-3"
            }, [e._v("If you click "), i("b", [e._v("OK")]), e._v(" there's no oopsies, no refunds, no come backs! I warned you!")])]) : e._e(), "selectProduct" === e.step ? i("b-col", [e.products && e.products.length ? e._e() : i("div", {
                staticClass: "text-center"
            }, [i("b-spinner", {
                staticClass: "my-2",
                attrs: {
                    variant: "primary"
                }
            })], 1), e.products && e.products.length ? i("ProductSelector", {
                attrs: {
                    products: e.products,
                    selectedProducts: e.selectedProducts
                },
                on: {
                    "product-select": e.onProductSelected,
                    "product-unassign": e.onProductUnassignClick
                }
            }) : e._e()], 1) : "selectPrintProviders" === e.step ? i("b-col", [e.printProviders ? i("div", [e.printProviders.length ? i("div", [i("MultiSelectTable", {
                attrs: {
                    items: e.printProviders,
                    fields: e.printProvidersTableFields,
                    showDoneButton: e.selectedPrintProviders.length > 0,
                    maxSelections: 1,
                    title: "Select print providers"
                },
                on: {
                    "selection-finished": e.onPrintProvidersSelected
                },
                scopedSlots: e._u([{
                    key: "cell(name)",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "align-items-center d-flex h-100"
                        }, [i("div", [e._v(e._s(t.item.title))])])]
                    }
                }], null, !1, 3826210341),
                model: {
                    value: e.selectedPrintProviders,
                    callback: function(t) {
                        e.selectedPrintProviders = t
                    },
                    expression: "selectedPrintProviders"
                }
            })], 1) : i("div", [e._v(" No print providers available ")])]) : i("div", {
                staticClass: "text-center"
            }, [i("b-spinner", {
                staticClass: "my-2",
                attrs: {
                    variant: "primary"
                }
            })], 1)]) : "selectPlaceholders" === e.step ? i("b-col", [e.loadingVariants ? i("div", {
                staticClass: "text-center"
            }, [i("b-spinner", {
                staticClass: "my-2",
                attrs: {
                    variant: "primary"
                }
            })], 1) : e.printProviders ? i("div", [i("div", [i("b-table", {
                staticClass: "w-100 h-100 items-table",
                attrs: {
                    "table-class": "h-100",
                    striped: "",
                    hover: "",
                    items: e.uniquePlaceholders,
                    "select-mode": "single",
                    fields: e.uniquePlaceholdersTableFields,
                    responsive: "",
                    "show-empty": "",
                    "empty-text": "No items",
                    selectable: ""
                },
                on: {
                    "row-selected": e.onUniquePlaceholderSelected
                },
                scopedSlots: e._u([{
                    key: "cell(name)",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "text-capitalize"
                        }, [e._v(e._s(t.item.placeholder.position.replace("_", " ")))])]
                    }
                }, {
                    key: "cell(size)",
                    fn: function(t) {
                        return [i("PlaceholderSize", {
                            attrs: {
                                placeholder: e.getBiggestPlaceholder(t.item.placeholder)
                            }
                        })]
                    }
                }, {
                    key: "cell(ratio)",
                    fn: function(t) {
                        return [i("div", [e._v(" " + e._s(e.formatAspectRatio(t.item.placeholder)) + " ")])]
                    }
                }, {
                    key: "cell(variantsQuantity)",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "text-capitalize"
                        }, [e._v(e._s(t.item.variants.length))])]
                    }
                }])
            })], 1), i("div", {
                staticClass: "primary-text"
            }, [i("a", {
                attrs: {
                    href: "#"
                },
                on: {
                    click: function(t) {
                        e.showVariantsDetails = !e.showVariantsDetails
                    }
                }
            }, [e._v("Toggle detailed view")])]), e.showVariantsDetails ? i("div", e._l(e.variants, (function(t, n) {
                return i("div", {
                    key: n
                }, [i("div", {
                    staticClass: "w-100 d-flex p-3 variant-table-title"
                }, [i("b", [e._v('Select one or more product variants from "' + e._s(e.getPrintProviderName(n)) + '"')])]), i("VariantSelector", {
                    attrs: {
                        variants: t,
                        title: "",
                        showDoneButton: !1,
                        rowClassSetter: function(t) {
                            return e.getCssClassesForVariantRow(t, n)
                        }
                    },
                    scopedSlots: e._u([{
                        key: "row-details",
                        fn: function(t) {
                            return [i("b-card", [i("MultiSelectTable", {
                                attrs: {
                                    items: e.getPlaceholdersForVariant(n, t.data.item.id),
                                    fields: e.placeholdersTableFields,
                                    showDoneButton: !1
                                },
                                on: {
                                    "selection-finished": e.onPlaceholdersSelectionFinished
                                },
                                scopedSlots: e._u([{
                                    key: "cell(name)",
                                    fn: function(t) {
                                        return [i("div", {
                                            staticClass: "text-capitalize align-self-center"
                                        }, [e._v(" " + e._s(t.item.position.replace("_", " ")) + " (" + e._s(t.item.width) + "x" + e._s(t.item.height) + ") ")])]
                                    }
                                }], null, !0),
                                model: {
                                    value: e.selectedPlaceholdersData[n][t.data.item.id],
                                    callback: function(i) {
                                        e.$set(e.selectedPlaceholdersData[n], t.data.item.id, i)
                                    },
                                    expression: "selectedPlaceholdersData[providerId][row.data.item.id]"
                                }
                            })], 1)]
                        }
                    }], null, !0),
                    model: {
                        value: e.selectedVariants[n],
                        callback: function(t) {
                            e.$set(e.selectedVariants, n, t)
                        },
                        expression: "selectedVariants[providerId]"
                    }
                }), i("hr")], 1)
            }
            )), 0) : e._e(), i("b-btn", {
                staticClass: "float-right",
                attrs: {
                    variant: "primary",
                    disabled: !e.anySelectedPlaceholders
                },
                on: {
                    click: e.onPlaceholdersSelectionFinished
                }
            }, [e._v("Done")])], 1) : i("div", [e.variantsErrors ? i("div", [e._v(e._s(e.variantsErrors))]) : i("div", [e._v("No print providers are available, cannot show variants")])])]) : "finalRevision" === e.step && e.selectedProduct ? i("b-col", [i("div", {
                staticClass: "mb-3"
            }, [e._v("Final revision! Double check before saving :)")]), i("li", [e._v("Product: "), i("b", [e._v(e._s(e.selectedProduct.title))])]), i("li", [e._v("Variants: ")]), i("li", [e._v("Selected placeholders:")]), i("ul", {
                staticStyle: {
                    "max-height": "500px",
                    "overflow-y": "auto"
                }
            }, e._l(e.selectedPlaceholdersData, (function(t, n) {
                return i("li", {
                    key: n,
                    staticClass: "mb-2"
                }, [i("b", [e._v('Print provider: "' + e._s(e.getPrintProviderName(n)) + '"')]), i("ul", e._l(e.selectedPlaceholdersData[n], (function(t, o) {
                    return i("li", {
                        key: o
                    }, [i("b", [e._v('Variant: "' + e._s(e.getVariantName(n, o)) + '"')]), i("ul", e._l(t, (function(t, n) {
                        return i("li", {
                            key: n
                        }, [i("div", {
                            staticStyle: {
                                "text-transform": "capitalize"
                            }
                        }, [e._v(e._s(t.position))])])
                    }
                    )), 0)])
                }
                )), 0)])
            }
            )), 0), i("b-btn", {
                staticClass: "float-right",
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.onSave()
                    }
                }
            }, [e._v("Save")])], 1) : e._e()], 1)
        }
          , $ = []
          , B = n("9bed")
          , j = n("4811")
          , L = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", [i("b", [e._v(e._s(e.title))]), i("b-card-body", {
                staticClass: "mt-2 p-0"
            }, [e.variants ? e._e() : i("div", {
                staticClass: "d-flex justify-content-center"
            }, [i("b-spinner", {
                attrs: {
                    variant: "primary",
                    label: "Loading variants"
                }
            })], 1), e.variants && e.variants.length ? i("div", [i("b-table", {
                ref: "variantsTable",
                staticClass: "w-100 h-100 variants-table",
                staticStyle: {
                    "white-space": "pre-line"
                },
                attrs: {
                    "table-class": "h-100",
                    striped: "",
                    hover: "",
                    items: e.variants,
                    fields: e.variantTableFields,
                    responsive: "sm",
                    "select-mode": "multi",
                    selectable: !e.hasDetailsView
                },
                on: {
                    "row-selected": e.onRowSelected
                },
                scopedSlots: e._u([{
                    key: "cell(name)",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "row-wrapper",
                            class: e.getRowClasses(t),
                            on: {
                                click: function(i) {
                                    t.toggleDetails(),
                                    e.onDetailsVisibilityChange(t)
                                }
                            }
                        }, [i("div", {
                            staticClass: "row-content"
                        }, [t.item.image ? i("div", {
                            staticClass: "d-inline"
                        }, [i("b-img", e._b({
                            attrs: {
                                rounded: "",
                                thumbnail: "",
                                src: t.item.image
                            }
                        }, "b-img", e.thumbsProps, !1))], 1) : e._e(), i("div", {
                            staticClass: "ml-3 variant-name d-inline"
                        }, [e._v(e._s(t.item.name) + " ")])])])]
                    }
                }, {
                    key: "cell(price)",
                    fn: function(t) {
                        return [t.item.price ? i("div", {
                            staticClass: "align-items-center d-flex h-100 justify-content-end row-wrapper",
                            on: {
                                click: function(i) {
                                    t.toggleDetails(),
                                    e.onDetailsVisibilityChange(t)
                                }
                            }
                        }, [i("div", {
                            staticClass: "row-content"
                        }, [i("b", [e._v("$" + e._s(t.item.price))])])]) : e._e()]
                    }
                }, {
                    key: "row-details",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "row-wrapper"
                        }, [i("div", {
                            staticClass: "row-content"
                        }, [e._t("row-details", null, {
                            data: t
                        })], 2)])]
                    }
                }], null, !0)
            })], 1) : e._e(), e.variants && !e.variants.length ? i("div", [e._v(" No variants available ")]) : e._e()]), e.showDoneButton ? i("b-btn", {
                staticClass: "float-right",
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: e.onDone
                }
            }, [e._v("Done")]) : e._e()], 1)
        }
          , R = [];
        let U = class extends c["d"] {
            constructor() {
                super(...arguments),
                this.thumbsProps = {
                    width: 50,
                    height: 50
                },
                this.variantTableFields = [{
                    key: "name",
                    label: ""
                }, {
                    key: "price",
                    label: ""
                }]
            }
            get hasDetailsView() {
                return !!this.$scopedSlots["row-details"]
            }
            onVariantsChanged() {
                this.refreshSelectedRows()
            }
            onSelectedVariantsChanged() {
                this.refreshSelectedRows()
            }
            getRowClasses(e) {
                if (this.rowClassSetter) {
                    const t = this.rowClassSetter(e);
                    if (t) {
                        const e = {};
                        for (const i of t)
                            e[i] = !0;
                        return e
                    }
                }
                return {}
            }
            onRowSelected(e) {
                this.$emit("change", e)
            }
            onDone() {
                this.$emit("selection-finished", this.selectedVariants)
            }
            onDetailsVisibilityChange(e) {
                e.detailsShowing = !e.detailsShowing,
                this.$emit("details-visibility-change", e)
            }
            refreshSelectedRows() {
                if (this.selectedVariants && this.selectedVariants.length && this.variants) {
                    this.$refs.variantsTable.clearSelected();
                    for (const e of this.selectedVariants) {
                        const t = this.variants.findIndex(t=>t.id === e.id);
                        t > -1 && this.$refs.variantsTable.selectRow(t)
                    }
                }
            }
            mounted() {
                this.refreshSelectedRows()
            }
        }
        ;
        Object(a["b"])([Object(c["c"])({
            default: ()=>[]
        })], U.prototype, "variants", void 0),
        Object(a["b"])([Object(c["c"])({
            default: "Select one or more product variants"
        })], U.prototype, "title", void 0),
        Object(a["b"])([Object(c["c"])({
            default: !0
        })], U.prototype, "showDoneButton", void 0),
        Object(a["b"])([Object(c["c"])({
            default: null
        })], U.prototype, "rowClassSetter", void 0),
        Object(a["b"])([Object(c["b"])("change")], U.prototype, "selectedVariants", void 0),
        Object(a["b"])([Object(c["e"])("variants")], U.prototype, "onVariantsChanged", null),
        Object(a["b"])([Object(c["e"])("selectedVariants")], U.prototype, "onSelectedVariantsChanged", null),
        U = Object(a["b"])([Object(c["a"])({
            name: "VariantSelector"
        })], U);
        var z = U
          , N = z
          , V = (n("3dda"),
        Object(_["a"])(N, L, R, !1, null, "34f9702b", null))
          , G = V.exports
          , W = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", [e._v(e._s(e.placeholder.width) + "x" + e._s(e.placeholder.height))])
        }
          , H = [];
        let X = class extends c["d"] {
        }
        ;
        Object(a["b"])([Object(c["c"])({
            required: !0
        })], X.prototype, "placeholder", void 0),
        X = Object(a["b"])([Object(c["a"])({
            name: "PlaceholderSize"
        })], X);
        var Y = X
          , q = Y
          , K = Object(_["a"])(q, W, H, !1, null, null, null)
          , Z = K.exports;
        let Q = class extends c["d"] {
            constructor() {
                super(...arguments),
                this.printProvidersTableFields = [{
                    key: "name",
                    label: "Print Provider"
                }],
                this.placeholdersTableFields = [{
                    key: "name",
                    label: "Placeholder Position"
                }],
                this.uniquePlaceholdersTableFields = [{
                    key: "name",
                    label: "Placeholder Position"
                }, {
                    key: "size",
                    label: "Biggest Area"
                }, {
                    key: "ratio",
                    label: "Aspect Ratio"
                }, {
                    key: "variantsQuantity",
                    label: "Used in variants"
                }],
                this.showVariantsDetails = !1,
                this.showUnassignConfirmModal = !0,
                this.productToUnassign = null,
                this.printifyProducts = [],
                this.products = [],
                this.selectedProducts = [],
                this.selectedProduct = null,
                this.loadingVariants = !0,
                this.variants = {},
                this.variantsErrors = null,
                this.selectedVariants = {},
                this.placeholdersData = {},
                this.selectedPlaceholdersData = {},
                this.printProviders = null,
                this.selectedPrintProviders = [],
                this.step = "selectProduct",
                this.templateProductConfiguration = this.initialConfiguration,
                this.biggestPlaceholder = null
            }
            get uniquePlaceholders() {
                let e = [];
                for (const i in this.variants)
                    e = [...e, ...this.variants[i]];
                const t = [];
                for (const i in this.placeholdersData)
                    for (const n in this.placeholdersData[i]) {
                        const o = this.placeholdersData[i][n];
                        for (const r of o) {
                            const o = t.find(e=>e.placeholder.position === r.position && this.areSameAspectRatio(e.placeholder, r))
                              , a = e.find(e=>e.id === n);
                            a && (o ? o.variants.push({
                                printProvider: i,
                                variant: a
                            }) : t.push({
                                placeholder: r,
                                variants: [{
                                    printProvider: i,
                                    variant: a
                                }]
                            }))
                        }
                    }
                return t
            }
            get anySelectedPlaceholders() {
                for (const e in this.selectedPlaceholdersData)
                    for (const t in this.selectedPlaceholdersData[e])
                        if (this.selectedPlaceholdersData[e][t].length)
                            return !0;
                return !1
            }
            onSelectedPlaceholdersDataChange() {
                for (const e in this.selectedPlaceholdersData) {
                    this.selectedVariants[e] = [];
                    for (const t in this.selectedPlaceholdersData[e])
                        if (this.selectedPlaceholdersData[e][t].length) {
                            const i = this.variants[e].find(e=>e.id === t);
                            i && this.selectedVariants[e].push(i)
                        }
                }
            }
            formatAspectRatio(e) {
                return y(e.width, e.height)
            }
            getBiggestPlaceholder(e) {
                let t = e;
                const i = t.width * t.height;
                for (const n in this.placeholdersData)
                    for (const o in this.placeholdersData[n]) {
                        const r = this.placeholdersData[n][o];
                        for (const n of r)
                            this.areSameAspectRatio(e, n) && n.width * n.height > i && (t = n)
                    }
                return t
            }
            areSameAspectRatio(e, t) {
                return (e.width / e.height).toFixed(2) === (t.width / t.height).toFixed(2)
            }
            getCssClassesForVariantRow(e, t) {
                var i;
                return null !== (i = this.selectedVariants[t]) && void 0 !== i && i.some(t=>t.id === e.item.id) ? ["table-active"] : []
            }
            getPrintProviderName(e) {
                var t;
                return this.printProviders && (null === (t = this.printProviders.find(t=>t.id.toString() === e)) || void 0 === t ? void 0 : t.title) || ""
            }
            getPlaceholdersForVariant(e, t) {
                var i;
                return (null === (i = this.placeholdersData[e]) || void 0 === i ? void 0 : i[t]) || []
            }
            getVariantName(e, t) {
                var i, n;
                return (null === (i = this.variants[e]) || void 0 === i || null === (n = i.find(e=>e.id === t)) || void 0 === n ? void 0 : n.name) || ""
            }
            async loadProducts() {
                this.printifyProducts = await Object(B["b"])(this.store),
                this.products = this.printifyProducts.map(e=>({
                    id: e.id.toString(),
                    title: e.title,
                    image: e.images[0],
                    description: e.description
                }));
                const e = this.templateProductConfiguration.configurations.map(e=>e.productId);
                this.selectedProducts = this.products.filter(t=>e.includes(t.id))
            }
            async onProductSelected(e) {
                if (this.selectedProduct = e,
                this.printProviders = null,
                this.step = "selectPrintProviders",
                this.printProviders = await Object(B["d"])(Number(this.selectedProduct.id), this.store),
                await this.$nextTick(),
                this.printProviders.length) {
                    const t = this.printProviders.filter(t=>{
                        var i;
                        return null === (i = this.templateProductConfiguration.configurations.find(t=>t.productId === e.id)) || void 0 === i ? void 0 : i.placeholders.some(e=>e.printProviderId === t.id.toString())
                    }
                    );
                    t.length ? this.selectedPrintProviders = t : this.selectedPrintProviders = [this.printProviders[0]]
                }
            }
            onProductUnassignClick(e) {
                this.productToUnassign = e,
                this.showUnassignConfirmModal = !0
            }
            unassignProduct(e) {
                e && (this.templateProductConfiguration.configurations = this.templateProductConfiguration.configurations.filter(t=>t.productId !== e.id),
                this.onSave())
            }
            async onPrintProvidersSelected() {
                if (this.selectedProduct) {
                    this.loadingVariants = !0,
                    this.step = "selectPlaceholders",
                    this.variants = {},
                    this.selectedVariants = {},
                    this.placeholdersData = {},
                    this.selectedPlaceholdersData = {},
                    this.variantsErrors = null;
                    const i = [];
                    for (const e of this.selectedPrintProviders)
                        i.push(new Promise(async(t,i)=>{
                            try {
                                var n;
                                const i = (await Object(B["c"])(Number(null === (n = this.selectedProduct) || void 0 === n ? void 0 : n.id), Number(e.id), this.store, !0)).variants
                                  , o = i.map(e=>({
                                    id: e.id.toString(),
                                    name: e.title
                                }))
                                  , r = o.filter(e=>this.templateProductConfiguration.configurations.filter(e=>{
                                    var t;
                                    return e.productId === (null === (t = this.selectedProduct) || void 0 === t ? void 0 : t.id)
                                }
                                ).flatMap(e=>e.placeholders).map(e=>e.variantId).includes(e.id.toString()))
                                  , a = i.map(e=>({
                                    variantId: e.id.toString(),
                                    placeholders: e.placeholders
                                }));
                                t({
                                    providerVariants: o,
                                    selectedVariants: r,
                                    placeholdersData: a,
                                    provider: e
                                })
                            } catch (error) {
                                i(error)
                            }
                        }
                        ));
                    const n = await Promise.allSettled(i);
                    for (const o of n)
                        if ("fulfilled" === o.status) {
                            c["d"].set(this.variants, o.value.provider.id, o.value.providerVariants),
                            c["d"].set(this.selectedVariants, o.value.provider.id, o.value.selectedVariants);
                            for (const e of o.value.placeholdersData)
                                this.placeholdersData[o.value.provider.id] || c["d"].set(this.placeholdersData, o.value.provider.id, {}),
                                this.placeholdersData[o.value.provider.id][e.variantId] = e.placeholders;
                            this.selectedPlaceholdersData[o.value.provider.id] || c["d"].set(this.selectedPlaceholdersData, o.value.provider.id, {});
                            const i = this.templateProductConfiguration.configurations.filter(e=>{
                                var t;
                                return e.productId === (null === (t = this.selectedProduct) || void 0 === t ? void 0 : t.id)
                            }
                            ).flatMap(e=>e.placeholders).filter(e=>e.printProviderId === o.value.provider.id.toString());
                            for (const n of i)
                                if ("undefined" !== typeof n.variantId) {
                                    var e, t;
                                    let i = this.selectedPlaceholdersData[o.value.provider.id][n.variantId];
                                    i || (c["d"].set(this.selectedPlaceholdersData[o.value.provider.id], n.variantId, []),
                                    i = this.selectedPlaceholdersData[o.value.provider.id][n.variantId]);
                                    const r = null === (e = this.placeholdersData[o.value.provider.id]) || void 0 === e || null === (t = e[n.variantId]) || void 0 === t ? void 0 : t.find(e=>e.position === n.placeholderId);
                                    r && !i.some(e=>e.position === r.position) && i.push(r)
                                }
                        } else
                            console.error(o.reason),
                            this.variantsErrors = "Error loading variants from one or more providers";
                    this.loadingVariants = !1
                }
            }
            onUniquePlaceholderSelected(e) {
                for (const t in this.selectedPlaceholdersData) {
                    this.selectedVariants[t] = [];
                    for (const e in this.selectedPlaceholdersData[t])
                        this.selectedPlaceholdersData[t][e].length && c["d"].set(this.selectedPlaceholdersData[t], e, [])
                }
                if (e.length) {
                    const t = e[0];
                    this.selectAllVariantsWithPlaceholder(t.placeholder)
                }
            }
            selectAllVariantsWithPlaceholder(e) {
                for (const i in this.variants) {
                    const n = this.variants[i];
                    for (const o of n) {
                        var t;
                        const n = this.getPlaceholdersForVariant(i, o.id)
                          , r = n.find(t=>t.position === e.position && this.areSameAspectRatio(t, e))
                          , a = null === (t = this.selectedPlaceholdersData[i][o.id]) || void 0 === t ? void 0 : t.some(t=>t.position === e.position && this.areSameAspectRatio(t, e));
                        r && !a && (this.selectedPlaceholdersData[i][o.id] || c["d"].set(this.selectedPlaceholdersData[i], o.id, []),
                        this.selectedPlaceholdersData[i][o.id].push(r))
                    }
                }
            }
            onPlaceholdersSelectionFinished() {
                if (this.step = "finalRevision",
                this.selectedPrintProviders && this.selectedProduct) {
                    const e = this.selectedProduct;
                    let t = this.templateProductConfiguration.configurations.find(t=>t.productId === e.id)
                      , i = null;
                    const n = [];
                    for (const o in this.selectedPlaceholdersData)
                        for (const e in this.selectedPlaceholdersData[o]) {
                            const t = this.selectedPlaceholdersData[o][e];
                            for (const r of t)
                                (null === i || r.width * r.height > i.width * i.height) && (i = r),
                                n.push({
                                    placeholderId: r.position,
                                    printProviderId: o,
                                    variantId: e
                                })
                        }
                    if (this.biggestPlaceholder = i,
                    t)
                        t.placeholders = n;
                    else {
                        const i = {
                            provider: "printify",
                            productId: e.id,
                            placeholders: n
                        };
                        this.templateProductConfiguration.configurations.push(i),
                        t = i
                    }
                }
            }
            onSave() {
                this.$emit("save", {
                    configuration: this.templateProductConfiguration,
                    biggestPlaceholder: this.biggestPlaceholder ? {
                        width: this.biggestPlaceholder.width,
                        height: this.biggestPlaceholder.height,
                        id: this.biggestPlaceholder.position,
                        aspectRatio: this.formatAspectRatio(this.biggestPlaceholder)
                    } : null
                })
            }
            async created() {
                await this.loadProducts()
            }
        }
        ;
        Object(a["b"])([Object(c["c"])({
            required: !0
        })], Q.prototype, "store", void 0),
        Object(a["b"])([Object(c["c"])({
            required: !0
        })], Q.prototype, "initialConfiguration", void 0),
        Object(a["b"])([Object(c["e"])("selectedPlaceholdersData", {
            deep: !0
        })], Q.prototype, "onSelectedPlaceholdersDataChange", null),
        Q = Object(a["b"])([Object(c["a"])({
            name: "PrintifyConfigurator",
            components: {
                VariantSelector: G,
                ProductSelector: T,
                MultiSelectTable: j["a"],
                PlaceholderSize: Z
            }
        })], Q);
        var J = Q
          , ee = J
          , te = (n("a1cc"),
        Object(_["a"])(ee, M, $, !1, null, "ecdcd498", null))
          , ie = te.exports
          , ne = n("a528")
          , oe = n("13c1")
          , re = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-row", [i("b-col", {
                attrs: {
                    cols: "12"
                }
            }, [i("StoreSelector", {
                attrs: {
                    stores: e.user.Stores,
                    title: "Select store to retrieve POD information",
                    includeNoBilling: "true"
                },
                model: {
                    value: e.storeUrl,
                    callback: function(t) {
                        e.storeUrl = t
                    },
                    expression: "storeUrl"
                }
            })], 1), e.checkingProviders ? i("b-col", {
                staticClass: "align-items-center d-flex flex-column justify-content-center p-4",
                attrs: {
                    cols: "12"
                }
            }, [i("b-spinner", {
                staticClass: "mr-2",
                attrs: {
                    variant: "primary"
                }
            }), i("div", {
                staticClass: "mt-2"
            }, [e._v("Checking providers")])], 1) : e._e(), e._l(e.providers, (function(t) {
                return i("b-col", {
                    directives: [{
                        name: "show",
                        rawName: "v-show",
                        value: !e.checkingProviders,
                        expression: "!checkingProviders"
                    }],
                    key: t.label + "-" + t.key,
                    attrs: {
                        cols: "4"
                    }
                }, [i("b-card", {
                    staticClass: "mb-2 image-resize",
                    staticStyle: {
                        "object-fit": "cover"
                    },
                    attrs: {
                        title: t.label,
                        "img-src": t.image,
                        "img-alt": "Image",
                        "img-top": "",
                        tag: "article"
                    }
                }, [i("b-card-text", [e._v(" " + e._s(t.description) + " ")]), e.isManualPod(t.key) ? i("b-button", {
                    attrs: {
                        variant: "primary"
                    },
                    on: {
                        click: function(i) {
                            return e.podSelected(t.key, t.podId)
                        }
                    }
                }, [e._v("Create manual")]) : i("b-button", {
                    attrs: {
                        variant: "primary"
                    },
                    on: {
                        click: function(i) {
                            return e.podSelected(t.key, t.podId)
                        }
                    }
                }, [e._v("Link")])], 1)], 1)
            }
            )), e.providers.length || e.checkingProviders ? e._e() : i("b-col", {
                staticClass: "p-3 text-center",
                attrs: {
                    cols: "12"
                }
            }, [e._v(" No POD providers available ")])], 2)
        }
          , ae = []
          , se = n("2576")
          , le = n("1d61")
          , ce = n("63c9")
          , de = n("6b48");
        const ue = "Printify"
          , pe = "Printful"
          , he = 5;
        let me = class extends c["d"] {
            constructor() {
                super(...arguments),
                this.podProviderThumbnailPath = "app/images_pod",
                this.availableProviders = [],
                this.checkingProviders = !1,
                this.storeUrl = "",
                this.podProviders = []
            }
            get providers() {
                return this.podProviders.filter(e=>this.availableProviders.includes(e.label))
            }
            get isManualPod() {
                return (e="")=>![de["a"].PRINTFUL, de["a"].PRINTIFY].includes(e)
            }
            onStoreChange() {
                this.checkProviders()
            }
            async loadPodProviders() {
                this.podProviders = (await Object(ce["b"])()).map(e=>({
                    podId: e.id,
                    key: e.apiKeyReference,
                    label: e.name,
                    image: `https://cdn.customily.com/${this.podProviderThumbnailPath}/${e.imageURL}`,
                    description: `Select products from ${e.name} catalog`
                }))
            }
            async checkProviders() {
                try {
                    if (this.storeUrl) {
                        this.checkingProviders = !0,
                        this.availableProviders = [];
                        const e = await Object(le["a"])(this.storeUrl);
                        e.printful.enabled && e.printful.apiKey && this.availableProviders.push(pe),
                        e.printify.enabled && e.printify.apiKey && this.availableProviders.push(ue),
                        this.podProviders.filter(e=>e.label !== ue && e.label !== pe && e.podId !== he).forEach(e=>{
                            this.availableProviders.push(e.label)
                        }
                        )
                    }
                } finally {
                    this.checkingProviders = !1
                }
            }
            podSelected(e, t) {
                const i = this.isManualPod(e) ? "" : e;
                this.$emit("select", {
                    pod: i,
                    storeUrl: this.storeUrl,
                    podId: t
                })
            }
            created() {
                this.loadPodProviders(),
                this.checkProviders()
            }
        }
        ;
        Object(a["b"])([Object(m["b"])("user")], me.prototype, "user", void 0),
        Object(a["b"])([Object(c["e"])("storeUrl")], me.prototype, "onStoreChange", null),
        me = Object(a["b"])([Object(c["a"])({
            name: "PodSelector",
            components: {
                StoreSelector: se["a"]
            }
        })], me);
        var ge = me
          , fe = ge
          , ve = (n("f198"),
        Object(_["a"])(fe, re, ae, !1, null, "afa2d29a", null))
          , be = ve.exports;
        let ye = class extends c["d"] {
            constructor() {
                super(...arguments),
                this.selectedPod = null,
                this.selectedPodId = null,
                this.storeUrl = "",
                this.errorMessage = "",
                this.savingVariants = !1,
                this.templateProductConfiguration = null
            }
            get podComponentName() {
                if (this.selectedPod) {
                    var e;
                    const t = this.selectedPod.charAt(0).toUpperCase() + (null !== (e = this.selectedPod) && void 0 !== e ? e : "pod").slice(1);
                    return t + "Configurator"
                }
                return null
            }
            get filteredTemplateProductConfiguration() {
                if (this.selectedPod) {
                    const e = JSON.parse(JSON.stringify(this.templateProductConfiguration));
                    return e.configurations = e.configurations.filter(e=>e.provider === this.selectedPod),
                    e
                }
                return this.templateProductConfiguration
            }
            async buildTemplateProductConfiguration(e) {
                const t = {
                    templateProductId: this.templateProductId,
                    configurations: []
                };
                if (e || this.templateProductId) {
                    e = e || await Object(ne["d"])(this.templateProductId),
                    this.selectedPodId && (e.podId = this.selectedPodId);
                    for (const i of e.podAssignments) {
                        const n = t.configurations.find(e=>e.productId === i.productId && i.podService === e.provider);
                        n ? n.placeholders.push({
                            variantId: i.variantId,
                            placeholderId: i.placeholderId
                        }) : t.configurations.push({
                            productId: i.productId,
                            provider: i.podService,
                            placeholders: e.podAssignments.filter(e=>e.productId === i.productId).map(e=>({
                                printProviderId: e.printProviderId,
                                variantId: e.variantId,
                                placeholderId: e.placeholderId
                            }))
                        })
                    }
                }
                this.templateProductConfiguration = t
            }
            podSelected(e) {
                this.selectedPod = e.pod,
                this.storeUrl = e.storeUrl,
                this.selectedPodId = e.podId,
                this.selectedPod || this.initializeManualTemplateProduct()
            }
            goToPodSelection() {
                this.selectedPod = null,
                this.selectedPodId = null
            }
            initializeManualTemplateProduct() {
                this.$emit("save", {
                    templateProduct: null,
                    podAssignments: [],
                    storeUrl: this.storeUrl,
                    biggestPlaceholder: null,
                    podId: this.selectedPodId
                })
            }
            async onConfigurationSaved(t) {
                try {
                    this.errorMessage = "",
                    this.savingVariants = !0;
                    let e = []
                      , i = null;
                    this.templateProductId && (i = await Object(ne["d"])(this.templateProductId),
                    this.selectedPodId && (i.podId = this.selectedPodId),
                    e = i.podAssignments),
                    e = e.filter(e=>e.podService !== this.selectedPod);
                    for (const n of t.configuration.configurations)
                        for (const t of n.placeholders)
                            e.push({
                                id: 0,
                                productId: n.productId,
                                podService: n.provider,
                                placeholderId: t.placeholderId,
                                variantId: t.variantId,
                                printProviderId: t.printProviderId
                            });
                    if (i) {
                        i.podAssignments = e,
                        this.selectedPodId && (i.podId = this.selectedPodId);
                        const t = await Object(oe["g"])(i, i.id);
                        this.buildTemplateProductConfiguration(t)
                    }
                    this.$emit("save", {
                        templateProduct: i,
                        podAssignments: e,
                        storeUrl: this.storeUrl,
                        biggestPlaceholder: t.biggestPlaceholder,
                        podId: this.selectedPodId
                    }),
                    this.goToPodSelection()
                } catch (e) {
                    throw this.errorMessage = "Error saving variants",
                    e
                } finally {
                    this.savingVariants = !1
                }
            }
            created() {
                this.buildTemplateProductConfiguration()
            }
        }
        ;
        Object(a["b"])([Object(m["b"])("user")], ye.prototype, "user", void 0),
        Object(a["b"])([Object(c["c"])({
            default: null
        })], ye.prototype, "templateProductId", void 0),
        ye = Object(a["b"])([Object(c["a"])({
            name: "TemplateProductPodAssigner",
            components: {
                StoreSelector: h,
                PrintfulConfigurator: F,
                PrintifyConfigurator: ie,
                PodSelector: be
            }
        })], ye);
        var we = ye
          , Ce = we
          , xe = Object(_["a"])(Ce, d, u, !1, null, null, null)
          , Se = xe.exports
          , Pe = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "generic-assigner-wrapper"
            }, [i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.isVariantPickerOpen,
                    expression: "!isVariantPickerOpen"
                }]
            }, [i("keep-alive", [e.isLoading ? i("div", {
                staticClass: "text-center"
            }, [i("b-spinner", {
                staticClass: "my-2",
                attrs: {
                    variant: "primary"
                }
            })], 1) : i(e.currentStep, {
                tag: "component",
                attrs: {
                    products: e.providerProducts,
                    "template-product": e.templateProduct,
                    "selected-product": e.selectedProviderProduct,
                    placeholders: e.selectedProviderProduct.placeholders
                },
                on: {
                    "product-select": e.onProductSelected,
                    "placeholder-selected": e.onPlaceholderSelected,
                    "open-variant-matcher": function(t) {
                        return e.variantMatch(t)
                    }
                }
            })], 1), i("div", {
                staticClass: "actions-container"
            }, [e.isInitialStep ? [i("button", {
                staticClass: "btn btn-secondary",
                on: {
                    click: e.onCancelHandler
                }
            }, [e._v("Cancel")])] : [i("button", {
                staticClass: "btn btn-secondary",
                attrs: {
                    disabled: e.isLoading
                },
                on: {
                    click: e.onBackHandler
                }
            }, [e._v(" Back ")]), i("button", {
                staticClass: "btn btn-primary",
                attrs: {
                    disabled: e.isNextDisabled
                },
                on: {
                    click: e.onNextHandler
                }
            }, [e._v(" " + e._s(e.isFinalStep ? "Save" : "Next") + " ")])]], 2)], 1), e.isVariantPickerOpen ? [e.isLoading ? i("div", {
                staticClass: "text-center"
            }, [i("b-spinner", {
                staticClass: "my-2",
                attrs: {
                    variant: "primary"
                }
            })], 1) : e._e(), i("variant-picker", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.isLoading,
                    expression: "!isLoading"
                }],
                attrs: {
                    "selected-product": e.selectedProviderProduct,
                    cancel: e.closeVariantPicker
                },
                on: {
                    "variant-selected": e.onVariantSelected,
                    cancel: e.closeVariantPicker,
                    "filters-change": e.onVariantFiltersChange
                }
            })] : e._e()], 2)
        }
          , ke = []
          , _e = n("2b0e")
          , Ae = n("3af5");
        const Te = e=>Ae["a"].get("podProvider/productsCatalog", {
            params: {
                provider: e
            }
        }).then(({data: e})=>e)
          , Ee = (e,t,i)=>Ae["a"].post("podProvider/productVariants", {
            provider: e,
            productId: t,
            filters: i
        }).then(({data: e})=>e)
          , Oe = (e,t)=>Ae["a"].get("podProvider/productFilters", {
            params: {
                provider: e,
                productId: t
            }
        }).then(({data: e})=>e);
        var Ie = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "variant-selection-wrapper"
            }, [i("div", {
                staticClass: "d-flex flex-column"
            }, [i("span", [i("strong", [e._v(" Template Product: ")]), e._v(" " + e._s(e.templateProduct.templateProductName) + " ")]), i("span", [i("strong", [e._v(" POD Product: ")]), e._v(" " + e._s(e.selectedProduct.title) + " ")]), i("p", [e._v("Choose a product variant and assign a POD variant to it.")])]), i("ul", {
                staticClass: "list-group"
            }, e._l(e.templateProduct.variants, (function(t, n) {
                return i("li", {
                    key: "variant-" + n + "-" + t.id,
                    staticClass: "list-group-item d-flex align-items-center justify-content-between"
                }, [i("span", {
                    staticClass: "badge badge-customily"
                }, [e._v(" " + e._s(t.title) + " ")]), i("div", {
                    staticClass: "fulfillment-container"
                }, [i("button", {
                    staticClass: "btn btn-turquise",
                    on: {
                        click: function(i) {
                            return e.selectVariant(t)
                        }
                    }
                }, [e._v(" Provider Variant ")]), t.podVariantId ? i("div", {
                    staticClass: "form-control fulfillment-input ml-3"
                }, [i("span", {
                    staticClass: "fulfillment-text"
                }, [e._v(e._s(t.podVariantName))]), i("div", {
                    staticClass: "remove-fulfillment-icon",
                    on: {
                        click: function(i) {
                            return e.removeVariantSelection(t)
                        }
                    }
                }, [i("i", {
                    staticClass: "fa fa-times-circle"
                })])]) : e._e()])])
            }
            )), 0)])
        }
          , De = [];
        let Fe = class extends _e["default"] {
            removeVariantSelection(e) {
                e.podVariantId = void 0
            }
            selectVariant(e) {
                this.$emit("open-variant-matcher", e)
            }
        }
        ;
        Object(a["b"])([Object(c["c"])({
            required: !0
        })], Fe.prototype, "templateProduct", void 0),
        Object(a["b"])([Object(c["c"])({
            required: !0
        })], Fe.prototype, "selectedProduct", void 0),
        Fe = Object(a["b"])([Object(s["b"])({
            name: "VariantMatchAssigner",
            components: {}
        })], Fe);
        var Me = Fe
          , $e = Me
          , Be = (n("e45b"),
        Object(_["a"])($e, Ie, De, !1, null, "7ba64ceb", null))
          , je = Be.exports
          , Le = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "placeholder-selector-wrapper"
            }, [i("select-table", {
                attrs: {
                    fields: e.tableFields,
                    items: e.tableItems
                },
                on: {
                    "item-selected": e.placeholderSelected
                }
            })], 1)
        }
          , Re = []
          , Ue = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "select-table-wrapper"
            }, [i("b-table", {
                staticClass: "w-100 h-100 items-table",
                attrs: {
                    "table-class": "h-100",
                    "empty-text": "No items",
                    "select-mode": "single",
                    "show-empty": "",
                    selectable: "",
                    striped: "",
                    hover: "",
                    responsive: "",
                    fields: e.fields,
                    items: e.items
                },
                on: {
                    "row-selected": e.itemSelected
                },
                scopedSlots: e._u([e._l(e.$scopedSlots, (function(t, n, o) {
                    return {
                        key: n,
                        fn: function(t) {
                            return [i("div", {
                                key: n + "-" + o
                            }, [e._t(n, null, null, t)], 2)]
                        }
                    }
                }
                ))], null, !0)
            })], 1)
        }
          , ze = [];
        let Ne = class extends _e["default"] {
            itemSelected(e) {
                this.$emit("item-selected", e)
            }
        }
        ;
        Object(a["b"])([Object(c["c"])({
            default: ()=>[]
        })], Ne.prototype, "fields", void 0),
        Object(a["b"])([Object(c["c"])({
            required: !0
        })], Ne.prototype, "items", void 0),
        Ne = Object(a["b"])([Object(s["b"])({
            name: "SelectTable",
            components: {}
        })], Ne);
        var Ve = Ne
          , Ge = Ve
          , We = (n("625f"),
        Object(_["a"])(Ge, Ue, ze, !1, null, "31f2c0e0", null))
          , He = We.exports;
        let Xe = class extends _e["default"] {
            constructor() {
                super(...arguments),
                this.tableFields = [{
                    key: "printArea",
                    label: "Placeholder Position",
                    formatter: e=>`${e.charAt(0).toUpperCase()}${e.slice(1).replace(/_|-/g, " ")}`
                }]
            }
            get tableItems() {
                return this.placeholders.map(e=>({
                    printArea: e
                }))
            }
            placeholderSelected([e]) {
                this.$emit("placeholder-selected", e.printArea)
            }
        }
        ;
        Object(a["b"])([Object(c["c"])({
            required: !0
        })], Xe.prototype, "placeholders", void 0),
        Xe = Object(a["b"])([Object(s["b"])({
            name: "PlaceholderSelector",
            components: {
                SelectTable: He
            }
        })], Xe);
        var Ye = Xe
          , qe = Ye
          , Ke = Object(_["a"])(qe, Le, Re, !1, null, null, null)
          , Ze = Ke.exports
          , Qe = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "variant-picker-wrapper"
            }, [e.showFilters ? i("vairant-filters", {
                staticClass: "mb-2",
                attrs: {
                    filters: e.selectedProduct.filters
                },
                on: {
                    search: e.onSearch
                }
            }) : e._e(), i("div", {
                staticClass: "d-flex justify-content-end"
            }, [i("b-pagination", {
                attrs: {
                    size: "md",
                    "per-page": e.productPerPage,
                    "total-rows": e.totalCount
                },
                on: {
                    change: e.onFilterChange
                },
                model: {
                    value: e.currentPage,
                    callback: function(t) {
                        e.currentPage = t
                    },
                    expression: "currentPage"
                }
            }), i("b-form-input", {
                staticClass: "mb-3 ml-3",
                attrs: {
                    placeholder: "Search",
                    debounce: "400"
                },
                on: {
                    update: function(t) {
                        return e.onFilterChange(1)
                    }
                },
                model: {
                    value: e.searchVal,
                    callback: function(t) {
                        e.searchVal = t
                    },
                    expression: "searchVal"
                }
            })], 1), i("select-table", {
                attrs: {
                    fields: e.tableFields,
                    items: e.filteredItems
                },
                on: {
                    "item-selected": e.onVariantSelected
                },
                scopedSlots: e._u([{
                    key: "cell(actions)",
                    fn: function(t) {
                        return [i("button", {
                            staticClass: "btn btn-turquise",
                            on: {
                                click: t.toggleDetails
                            }
                        }, [e._v(" Show Details ")])]
                    }
                }, {
                    key: "row-details",
                    fn: function(t) {
                        var n = t.item;
                        return [i("b-card", {
                            staticClass: "py-3",
                            attrs: {
                                "no-body": ""
                            }
                        }, [i("ul", {
                            staticClass: "m-0"
                        }, e._l(n.options, (function(t, n) {
                            return i("li", {
                                key: t + "-" + n
                            }, [i("span", {
                                staticClass: "font-weight-bold text-capitalize mr-1"
                            }, [e._v(" " + e._s(e.formattedOptionName(t.name)) + ": ")]), e._v(" " + e._s(t.value) + " ")])
                        }
                        )), 0)])]
                    }
                }])
            }), i("div", {
                staticClass: "d-flex justify-content-between"
            }, [i("button", {
                staticClass: "btn btn-secondary",
                on: {
                    click: e.cancel
                }
            }, [e._v("Back")]), i("button", {
                staticClass: "btn btn-primary",
                attrs: {
                    disabled: !e.selectedVariant
                },
                on: {
                    click: e.variantSelected
                }
            }, [e._v(" Select ")])])], 1)
        }
          , Je = []
          , et = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "variant-filter-wrapper"
            }, [i("div", {
                staticClass: "filter-actions d-flex align-items-center mb-1"
            }, [i("button", {
                staticClass: "btn btn-primary",
                on: {
                    click: e.toggleFilters
                }
            }, [e._v(" Toggle Filters ")]), e.filtersVisible ? [i("button", {
                staticClass: "btn btn-success ml-3",
                on: {
                    click: e.addFilter
                }
            }, [i("i", {
                staticClass: "fa fa-plus"
            }), e._v(" Add Filter ")]), i("button", {
                staticClass: "btn btn-info mx-2",
                attrs: {
                    disabled: e.isSearchDisabled
                },
                on: {
                    click: e.search
                }
            }, [i("i", {
                staticClass: "fa fa-search"
            }), e._v(" Search ")]), i("button", {
                staticClass: "btn btn-danger",
                attrs: {
                    disabled: !e.addedFilters.length
                },
                on: {
                    click: e.clearFilter
                }
            }, [i("i", {
                staticClass: "fa fa-trash"
            }), e._v(" Clear Filters ")])] : e._e()], 2), i("b-collapse", {
                attrs: {
                    id: "variantFilters"
                },
                model: {
                    value: e.filtersVisible,
                    callback: function(t) {
                        e.filtersVisible = t
                    },
                    expression: "filtersVisible"
                }
            }, [i("div", {
                staticClass: "card card-body py-2"
            }, [e.addedFilters.length ? e._l(e.addedFilters, (function(t, n) {
                return i("div", {
                    key: "filter-" + n,
                    staticClass: "d-flex align-items-start my-1"
                }, [i("v-select", {
                    staticClass: "w-50",
                    attrs: {
                        label: "name",
                        placeholder: "Select filter type",
                        options: e.filters
                    },
                    on: {
                        "option:selected": function(i) {
                            return e.onFilterTypeDeselected(t)
                        }
                    },
                    model: {
                        value: t.selectedFilter,
                        callback: function(i) {
                            e.$set(t, "selectedFilter", i)
                        },
                        expression: "filter.selectedFilter"
                    }
                }), t.selectedFilter ? i("v-select", {
                    staticClass: "ml-3 w-50",
                    attrs: {
                        multiple: "",
                        label: "name",
                        placeholder: "Select values",
                        options: t.selectedFilter.values,
                        reduce: function(e) {
                            return e.value
                        },
                        "close-on-select": !1
                    },
                    model: {
                        value: t.selectedValues,
                        callback: function(i) {
                            e.$set(t, "selectedValues", i)
                        },
                        expression: "filter.selectedValues"
                    }
                }) : e._e()], 1)
            }
            )) : i("div", {
                staticClass: "text-center"
            }, [e._v(" No Filters ")])], 2)])], 1)
        }
          , tt = []
          , it = (n("6dfc"),
        n("4a7a"))
          , nt = n.n(it);
        let ot = class extends _e["default"] {
            constructor() {
                super(...arguments),
                this.filtersVisible = !1,
                this.addedFilters = []
            }
            get isSearchDisabled() {
                return this.addedFilters.every(e=>{
                    var t;
                    return 0 == (null === (t = e.selectedValues) || void 0 === t ? void 0 : t.length)
                }
                )
            }
            addFilter() {
                this.addedFilters.push({
                    selectedFilter: null,
                    selectedValues: []
                })
            }
            search() {
                const e = {};
                for (const n of this.addedFilters) {
                    var t, i;
                    if (null === (t = n.selectedValues) || void 0 === t || !t.length || null === (i = n.selectedFilter) || void 0 === i || !i.id)
                        return;
                    e[n.selectedFilter.id] = [...n.selectedValues]
                }
                this.$emit("search", e)
            }
            clearFilter() {
                this.addedFilters = [],
                this.$emit("search")
            }
            onFilterTypeDeselected(e) {
                e.selectedValues = []
            }
            toggleFilters() {
                this.filtersVisible = !this.filtersVisible
            }
        }
        ;
        Object(a["b"])([Object(c["c"])({
            required: !0
        })], ot.prototype, "filters", void 0),
        ot = Object(a["b"])([Object(s["b"])({
            name: "VariantFilters",
            components: {
                vSelect: nt.a
            }
        })], ot);
        var rt = ot
          , at = rt
          , st = (n("4a58"),
        Object(_["a"])(at, et, tt, !1, null, "75d02da0", null))
          , lt = st.exports;
        let ct = class extends _e["default"] {
            constructor() {
                super(...arguments),
                this.tableFields = [{
                    key: "title",
                    label: "Variant"
                }, "actions"],
                this.productPerPage = 10,
                this.currentPage = 1,
                this.totalCount = 10,
                this.searchVal = "",
                this.filteredItems = [],
                this.selectedVariant = null
            }
            onVariantsChange() {
                this.onFilterChange(1)
            }
            get showFilters() {
                var e;
                return null === (e = this.selectedProduct.filters) || void 0 === e ? void 0 : e.length
            }
            get formattedOptionName() {
                return e=>{
                    const t = e.replace(/([A-Z])/g, " $1");
                    return `${t.charAt(0).toUpperCase()}${t.slice(1)}`
                }
            }
            onFilterChange(e) {
                var t;
                let i = JSON.parse(JSON.stringify(this.selectedProduct.variants));
                this.currentPage = e;
                const n = (e - 1) * this.productPerPage
                  , o = n + this.productPerPage;
                null !== (t = this.searchVal) && void 0 !== t && t.length && (i = i.filter(e=>e.title.toLowerCase().includes(this.searchVal.toLowerCase()))),
                this.totalCount = i.length,
                this.filteredItems = i.slice(n, o)
            }
            onVariantSelected([e]) {
                this.selectedVariant = e
            }
            onSearch(e) {
                this.$emit("filters-change", e)
            }
            variantSelected() {
                this.$emit("variant-selected", this.selectedVariant)
            }
            cancel() {
                this.$emit("cancel")
            }
        }
        ;
        Object(a["b"])([Object(c["c"])({
            required: !0
        })], ct.prototype, "selectedProduct", void 0),
        Object(a["b"])([Object(c["e"])("selectedProduct.variants", {
            immediate: !0
        })], ct.prototype, "onVariantsChange", null),
        ct = Object(a["b"])([Object(s["b"])({
            name: "VariantPicker",
            components: {
                SelectTable: He,
                VairantFilters: lt
            }
        })], ct);
        var dt, ut = ct, pt = ut, ht = Object(_["a"])(pt, Qe, Je, !1, null, null, null), mt = ht.exports;
        (function(e) {
            e[e["ProductSelector"] = 0] = "ProductSelector",
            e[e["PlaceholderSelector"] = 1] = "PlaceholderSelector",
            e[e["VariantMatchAssigner"] = 2] = "VariantMatchAssigner"
        }
        )(dt || (dt = {}));
        let gt = class extends _e["default"] {
            constructor() {
                super(...arguments),
                this.currentStepIdx = 0,
                this.components = ["ProductSelector", "PlaceholderSelector", "VariantMatchAssigner"],
                this.isLoading = !1,
                this.providerProducts = [],
                this.selectedProviderProduct = {},
                this.templateProduct = {},
                this.isVariantPickerOpen = !1,
                this.selectedPlaceholder = "",
                this.selectedVariant = {}
            }
            get currentStep() {
                return this.components[this.currentStepIdx]
            }
            get isInitialStep() {
                return 0 == this.currentStepIdx
            }
            get isFinalStep() {
                return this.currentStepIdx == this.components.length - 1
            }
            get isNextDisabled() {
                var e;
                return !!this.isLoading || (this.isFinalStep ? this.templateProduct.variants.some(e=>!e.podVariantId) : !(null !== (e = this.selectedPlaceholder) && void 0 !== e && e.length))
            }
            async created() {
                await this.getProductCatalog()
            }
            async getProductCatalog() {
                this.isLoading = !0;
                const e = await Te(this.podProvider);
                this.providerProducts = e,
                this.isLoading = !1
            }
            async getTemplateProductVariants() {
                const e = await Object(ne["c"])(this.templateProductId);
                this.templateProduct = e
            }
            async getPodProductVariants(e) {
                const t = await Ee(this.podProvider, this.selectedProviderProduct.id, e);
                this.selectedProviderProduct.variants = t
            }
            async getProductFilters(e) {
                var t;
                if (null === (t = this.selectedProviderProduct) || void 0 === t || !t.filters)
                    return;
                const i = await Oe(this.podProvider, e);
                this.selectedProviderProduct.filters = i
            }
            async loadDependenciesForVariantMatch() {
                var e, t, i;
                this.isLoading = !0;
                const n = [this.getTemplateProductVariants()];
                null !== (e = this.selectedProviderProduct) && void 0 !== e && e.variants.length || n.push(this.getPodProductVariants()),
                null !== (t = this.selectedProviderProduct) && void 0 !== t && null !== (i = t.filters) && void 0 !== i && i.length || n.push(this.getProductFilters(this.selectedProviderProduct.id)),
                await Promise.all(n),
                this.isLoading = !1
            }
            async onNextHandler() {
                switch (this.currentStepIdx++,
                this.currentStepIdx) {
                case dt.VariantMatchAssigner:
                    await this.loadDependenciesForVariantMatch();
                    break;
                case this.components.length:
                    await this.linkToPod();
                    break
                }
            }
            linkToPod() {
                this.isLoading = !0;
                const e = "front" != this.selectedPlaceholder.toLowerCase() ? this.templateProduct.variants.map(e=>({
                    ...e,
                    printArea: this.selectedPlaceholder
                })) : this.templateProduct.variants;
                return Object(ne["f"])(e).then(()=>{
                    this.isLoading = !1,
                    this.$emit("saved")
                }
                ).catch(e=>{
                    this.currentStepIdx--
                }
                )
            }
            async onProductSelected(e) {
                this.selectedProviderProduct = e,
                this.onNextHandler()
            }
            async onVariantFiltersChange(e) {
                this.isLoading = !0,
                await this.getPodProductVariants(e),
                this.isLoading = !1
            }
            variantMatch(e) {
                this.selectedVariant = e,
                this.isVariantPickerOpen = !0
            }
            onVariantSelected(e) {
                this.selectedVariant.podVariantId = e.id,
                this.selectedVariant.podVariantName = e.title,
                this.closeVariantPicker()
            }
            onPlaceholderSelected(e) {
                this.selectedPlaceholder = e
            }
            onCancelHandler() {
                this.$emit("cancel")
            }
            closeVariantPicker() {
                this.isVariantPickerOpen = !1,
                this.selectedVariant = null
            }
            onBackHandler() {
                this.currentStepIdx--
            }
        }
        ;
        Object(a["b"])([Object(c["c"])({
            required: !0
        })], gt.prototype, "templateProductId", void 0),
        Object(a["b"])([Object(c["c"])({
            default: ""
        })], gt.prototype, "podProvider", void 0),
        gt = Object(a["b"])([Object(s["b"])({
            name: "GenericPodAssigner",
            components: {
                ProductSelector: T,
                VariantMatchAssigner: je,
                PlaceholderSelector: Ze,
                VariantPicker: mt
            }
        })], gt);
        var ft = gt
          , vt = ft
          , bt = (n("fa4d"),
        Object(_["a"])(vt, Pe, ke, !1, null, "1a7eb7f7", null))
          , yt = bt.exports;
        let wt = class extends l["a"] {
            constructor() {
                super(...arguments),
                this.isVisible = !0
            }
            onIsVisibleChange() {
                this.$emit("change", this.isVisible)
            }
            get isManualAssignment() {
                var e;
                return (null === (e = this.podProvider) || void 0 === e ? void 0 : e.length) && ![de["a"].PRINTIFY, de["a"].PRINTFUL].includes(this.podProvider.toLowerCase())
            }
            get modalTitle() {
                const e = "Products Assigner";
                return this.isManualAssignment ? `${this.podProvider} ${e}` : "POD " + e
            }
            closeModal() {
                this.isVisible = !1
            }
            onClose() {
                this.$emit("close")
            }
            onAssignment(e) {
                this.$emit("save", e)
            }
        }
        ;
        Object(a["b"])([Object(c["c"])({
            default: null
        })], wt.prototype, "templateProductId", void 0),
        Object(a["b"])([Object(c["c"])({
            default: ""
        })], wt.prototype, "podProvider", void 0),
        Object(a["b"])([Object(c["b"])("change")], wt.prototype, "visible", void 0),
        Object(a["b"])([Object(c["e"])("isVisible")], wt.prototype, "onIsVisibleChange", null),
        wt = Object(a["b"])([Object(s["b"])({
            name: "TemplateProductPodAssignerModal",
            components: {
                TemplateProductPodAssigner: Se,
                GenericPodAssigner: yt
            }
        })], wt);
        var Ct = wt
          , xt = Ct
          , St = Object(_["a"])(xt, o, r, !1, null, null, null);
        i["a"] = St.exports
    },
    8841: function(e, t) {
        (function() {
            function e(e) {
                async function t(t, i) {
                    const n = {
                        type: t,
                        filename: i
                    }
                      , o = "/Vector/VectorUploadSignedUrl?" + $.param(n);
                    return e.get(o)
                }
                async function i(t, i, n, o) {
                    const r = {
                        type: t,
                        filename: i,
                        includeDimensions: n,
                        generateThumb: o
                    }
                      , a = `/Vector/Validate/${encodeURIComponent(i)}?${$.param(r)}`;
                    return e.get(a)
                }
                function n(t) {
                    const i = "/Vector/SvgString/" + encodeURIComponent(t);
                    return e.get(i)
                }
                return {
                    getVectorUploadS3SignedUrl: t,
                    validateVectorFile: i,
                    epsFileToSvgString: n
                }
            }
            e.$inject = ["HttpService"],
            angular.module("app.shared.services").factory("VectorAPIService", e)
        }
        )()
    },
    8880: function(e, t, i) {
        e.exports = i.p + "img/libraries.d194d24d.svg?x-request=html"
    },
    "88c3": function(e, t) {
        angular.module("app.directives").directive("iframeOnload", [function() {
            return {
                scope: {
                    callBack: "&iframeOnload"
                },
                link: function(e, t) {
                    t.on("load", (function() {
                        e.$apply((function() {
                            e.callBack()
                        }
                        ))
                    }
                    )),
                    e.$on("$destroy", (function() {
                        t.off("load")
                    }
                    ))
                }
            }
        }
        ])
    },
    "8b95e": function(e, t) {
        const i = fabric.ActiveSelection.prototype.initialize;
        fabric.ActiveSelection.prototype.initialize = function() {
            const e = i.apply(this, arguments);
            return this.updateLockStatus(),
            e
        }
        ;
        const n = fabric.ActiveSelection.prototype.add;
        fabric.ActiveSelection.prototype.add = function() {
            const e = n.apply(this, arguments);
            return this.updateLockStatus(),
            e
        }
        ;
        const o = fabric.ActiveSelection.prototype.addWithUpdate;
        fabric.ActiveSelection.prototype.addWithUpdate = function() {
            const e = o.apply(this, arguments);
            return this.updateLockStatus(),
            e
        }
        ;
        const r = fabric.ActiveSelection.prototype.remove;
        fabric.ActiveSelection.prototype.remove = function() {
            const e = r.apply(this, arguments);
            return this.updateLockStatus(),
            e
        }
        ;
        const a = fabric.ActiveSelection.prototype.removeWithUpdate;
        fabric.ActiveSelection.prototype.removeWithUpdate = function() {
            const e = a.apply(this, arguments);
            return this.updateLockStatus(),
            e
        }
        ,
        fabric.ActiveSelection.prototype.updateLockStatus = function() {
            const e = this.getObjects().some(e=>e.locked || e.lockedByGroup);
            this.evented !== !e && (this.set("evented", !e),
            this.set("selectable", !e),
            this.set("hasControls", !e))
        }
    },
    "8c03": function(e, t) {
        var i = '<md-dialog> <div class="color-picker-dialog"> <style>.color-picker-dialog .cp-app{display:block!important;position:relative}.color-picker-dialog .color-swatch{height:30px;margin-bottom:18px;border-radius:5px;max-width:200px;margin-left:auto;margin-right:auto;border:1px solid #000}</style> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{ modalTitle }}</h2> <span flex></span> </div> </md-toolbar> <md-dialog-content style="max-width:800px;max-height:810px"> <md-content class="md-padding"> <div class="color-swatch" ng-style="{\'background-color\': toRgbaString(\'#\' + currentColor.HEX, currentColor.alpha) }"></div> <div id="pickerContainer" class="col-xs-12" style="display:flex;justify-content:center"> <customily-color-picker start-opened="true" on-change="pickerColorChange" ctrl-methods="pickerCtrlMethods" color-mode="pickerColorMode" on-ready="pickerReady" disable-save="true" style="display:none"></customily-color-picker> </div> </md-content> </md-dialog-content> <md-dialog-actions layout="row"> <md-button ng-click="setColor()">Done</md-button> </md-dialog-actions> </div> </md-dialog> ';
        e.exports = i
    },
    "8cad": function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("a788")
          , o = {};
        window.Font = {
            clearCache: function() {
                o = {}
            },
            resolve: function(e) {
                if (e = e.replace(/"/g, ""),
                e = e.replace(/'/g, ""),
                e = e.toLowerCase(),
                o[e])
                    return o[e];
                for (var t in o)
                    if (o.hasOwnProperty(t) && t.startsWith(e))
                        return o[t];
                console.error('Font "' + e + '" was not cached with loadAsync()')
            },
            loadAsync: function(e, t) {
                return new Promise((function(i, r) {
                    e = e.replace(/"/g, ""),
                    e = e.replace(/'/g, ""),
                    e = e.toLowerCase(),
                    Object(n["a"])(t, (function(n, a) {
                        if (n)
                            r(n);
                        else if (a) {
                            o[e] = a;
                            a.numGlyphs;
                            var s, l, c = -99999999, d = 99999999, u = "x", p = null;
                            for (s in a.glyphs.glyphs)
                                if (a.glyphs.glyphs.hasOwnProperty(s) && (l = a.glyphs.glyphs[s],
                                l.name == u)) {
                                    p = l;
                                    break
                                }
                            if (!p)
                                for (s in u = u.toUpperCase(),
                                a.glyphs.glyphs)
                                    if (a.glyphs.glyphs.hasOwnProperty(s) && (l = a.glyphs.glyphs[s],
                                    l.name == u)) {
                                        p = l;
                                        break
                                    }
                            if (p) {
                                var h = p.getMetrics();
                                for (s in a.glyphs.glyphs)
                                    if (a.glyphs.glyphs.hasOwnProperty(s)) {
                                        l = a.glyphs.glyphs[s];
                                        var m = l.getMetrics();
                                        "undefined" !== typeof m.yMin ? (l.descent = Math.abs(m.yMin),
                                        l.ascent = Math.abs(h.yMax - m.yMax)) : (l.ascent = 0,
                                        l.descent = 0)
                                    }
                            } else
                                for (s in console.warn("Couldn't find pattern Glyph for font: " + e),
                                a.glyphs.glyphs)
                                    a.glyphs.glyphs.hasOwnProperty(s) && (l = a.glyphs.glyphs[s],
                                    l.descent = 0);
                            for (s in a.glyphs.glyphs)
                                if (a.glyphs.glyphs.hasOwnProperty(s)) {
                                    l = a.glyphs.glyphs[s];
                                    var g = l.getMetrics();
                                    "undefined" !== typeof g.yMin && (c = Math.max(g.yMax, c),
                                    d = Math.min(g.yMin, d))
                                }
                            a.totalDescender = d,
                            a.totalAscender = c,
                            a.fontHeight = Math.abs(c - d),
                            i()
                        } else
                            r(new Error("Couldn't load font from " + t))
                    }
                    ))
                }
                ))
            },
            hasFont: function(e) {
                return e = e.replace(/"/g, ""),
                e = e.toLowerCase(),
                !!o[e]
            }
        }
    },
    "8d69": function(e, t, i) {
        e.exports = i.p + "img/american-express-colored.6127c833.svg?x-request=html"
    },
    "8e68": function(e, t) {
        (function() {
            function e(e, t, i, n, o) {
                function r(e, t) {
                    let i = {};
                    switch (t) {
                    case "removeBg":
                        i = {
                            apiKeyProperty: ["RemoveBgAPIKey", e.apiKeys[t]],
                            showApiKeyInput: ["removeBg", !1],
                            setApiKeyMethod: "setRemoveBgAPIKey",
                            imageFilterMethod: ["removeBg", null],
                            apiKeyValidationMethod: "isValidAPIKey"
                        };
                        break;
                    case "vanceAi":
                        i = {
                            apiKeyProperty: ["VanceAiAPIKey", e.apiKeys[t]],
                            showApiKeyInput: ["vanceAi", !1],
                            setApiKeyMethod: "setVanceAiAPIKey",
                            imageFilterMethod: ["cartoonize", !0]
                        };
                        break;
                    case "cutoutPro":
                        i = {
                            apiKeyProperty: ["CutoutProAPIKey", e.apiKeys[t]],
                            showApiKeyInput: ["cutoutPro", !1],
                            setApiKeyMethod: "setCutoutProAPIKey",
                            imageFilterMethod: ["faceCutout", !0],
                            apiKeyValidationMethod: "isValidAPIKey"
                        };
                        break
                    }
                    return i
                }
                async function a(a, s) {
                    const l = r(a, s)
                      , c = s.charAt(0).toUpperCase() + s.slice(1)
                      , d = "cutoutPro"
                      , u = "vanceAi"
                      , p = "removeBg";
                    if (l.apiKeyValidationMethod || s === u) {
                        let r;
                        s === d ? r = await o[l.apiKeyValidationMethod](l.apiKeyProperty[1]) : s === p && (r = await n[l.apiKeyValidationMethod](l.apiKeyProperty[1])),
                        !r && s === u || r && (s === d || !r.status && s === p) ? (i[l.setApiKeyMethod](l.apiKeyProperty[1]),
                        e.user[l.apiKeyProperty[0]] = a.apiKeys[l.apiKeyProperty[1]],
                        a.showApiKeyInput[l.showApiKeyInput[0]] = l.showApiKeyInput[1],
                        a.imageSelected.imageFile && await a[l.imageFilterMethod[0]](l.imageFilterMethod[1]),
                        t.showSuccessModal(`Successful integration with ${c}!`, "Let's apply filters!")) : (!r && s === d || r && r.status && s === p) && (a.apiKeys[s] = null,
                        t.showSuccessModal(`There was an error connecting with ${c}!`, "Check your API Key and try again"))
                    }
                }
                return {
                    filterManager: a
                }
            }
            e.$inject = ["$rootScope", "MdDialogService", "UsersAPIService", "RemoveBgAPIService", "CutoutProAPIService"],
            angular.module("app.shared.services").service("ImageFilterManagerService", e)
        }
        )()
    },
    "8f31": function(e, t) {
        fabric.PDFObject = fabric.util.createClass(fabric.Object, {
            type: "pdf-object",
            cacheProperties: fabric.Object.prototype.cacheProperties.concat("pdf", "_pdfCanvas"),
            pdf: null,
            coverMaskArea: !1,
            _pdfCanvas: null,
            _renderPromise: null,
            initialize: function(e) {
                this.callSuper("initialize", e)
            },
            _loadPdf: function(e) {
                const t = this;
                return new Promise((i,n)=>{
                    var o = "";
                    o = "string" === typeof e ? e : URL.createObjectURL(e);
                    var r = pdfjsLib.getDocument(o);
                    r.promise.then((function(e) {
                        console.log("PDF loaded");
                        var n = 1;
                        e.getPage(n).then((function(e) {
                            var n = e.getViewport({
                                scale: 1
                            })
                              , o = document.createElement("canvas")
                              , r = o.getContext("2d");
                            o.width = n.width,
                            o.height = n.height;
                            var a = {
                                canvasContext: r,
                                viewport: n,
                                background: "rgba(0,0,0,0)"
                            }
                              , s = e.render(a);
                            s.promise.then((function() {
                                t.set("_pdfCanvas", o),
                                t.dirty = !0,
                                t._applyCoverScale(),
                                t.canvas.renderAll(),
                                i()
                            }
                            ))
                        }
                        ))
                    }
                    ), (function(e) {
                        this._pdfViewport = null,
                        console.error(e),
                        n(e)
                    }
                    ))
                }
                )
            },
            _set: function(e, t) {
                "pdf" === e && (this._renderPromise = this._loadPdf(t)),
                this.callSuper("_set", e, t)
            },
            _getPdfScalingToFit: function() {
                const e = this.width
                  , t = this.height;
                let i = 1;
                return this._pdfCanvas.height > this._pdfCanvas.width ? (i = t / this._pdfCanvas.height,
                this._pdfCanvas.width * i > e && (i = e / this._pdfCanvas.width)) : (i = e / this._pdfCanvas.width,
                this._pdfCanvas.height * i > t && (i = t / this._pdfCanvas.height)),
                i
            },
            _applyCoverScale: function() {
                if (this.coverMaskArea && this._pdfCanvas && this._pdfCanvas.width && this._pdfCanvas.height) {
                    const e = this._getPdfScalingToFit()
                      , t = this.width / (this._pdfCanvas.width * e)
                      , i = this.height / (this._pdfCanvas.height * e)
                      , n = Math.max(t, i);
                    this.set("scaleX", n),
                    this.set("scaleY", n)
                }
            },
            _render: function(e) {
                if (this._pdfCanvas) {
                    const n = this._getPdfScalingToFit();
                    var t = -this._pdfCanvas.width * n / 2
                      , i = -this._pdfCanvas.height * n / 2;
                    e.translate(t, i),
                    e.scale(n, n),
                    e.drawImage(this._pdfCanvas, 0, 0)
                }
            }
        })
    },
    "8f72": function(e, t) {
        var i = '<md-dialog> <div> <md-toolbar style="min-height:45px;height:45px"> <div class="md-toolbar-tools" style="background:linear-gradient(141deg,#849dd8 15%,#8bc4d3 75%)"> <div class="text-center w100"> <h2>{{ title }}</h2> </div> </div> </md-toolbar> <md-dialog-content> <md-content class="md-padding"> <form name="variantModalForm" ng-submit="onSubmit()"> <div class="row" style="margin-right:15px;margin-left:15px" ng-hide="isChildTemplateProduct"> <div style="display:flex;justify-content:left"> <md-input-container class="md-block"> <label>Variant Name</label> <input type="text" name="firstVariantName" ng-model="color_name" placeholder="Color"/> </md-input-container> <md-input-container class="md-block"> <label>Values</label> <textarea name="variantValue" ng-model="color_variants" placeholder="White, Black, ..."/> </md-input-container> </div> <div style="display:flex;justify-content:left"> <md-input-container class="md-block"> <label>Variant Name</label> <input type="text" name="secondVariantName" placeholder="Add another variant" ng-model="custom_variant_name"/> </md-input-container> <md-input-container class="md-block"> <label>Values</label> <textarea name="variantValue" ng-model="custom_variant_value"/> </md-input-container> </div> <div style="display:flex;justify-content:left" ng-hide="forMyProductBases"> <md-input-container class="md-block"> <label>Description</label> <textarea cols="80" rows="5" name="descriptionProduct" placeholder="Some description ..." ng-model="custom_description"/> </md-input-container> </div> </div> <div class="row" style="margin-right:15px;margin-left:15px;color:gray" ng-if="isChildTemplateProduct"> <h2 class="d-block h5" style="padding-left:0">Print Size Variant Name</h2> <md-input-container style="margin:0 0"> <input required md-no-asterisk type="text" name="printSizeVariantName" ng-model="childTemplateProduct.newPrintVariantName" ng-placeholder="childTemplateProduct.oldPrintVariantName ?? \'Size\'"/> </md-input-container> <div ng-messages="variantModalForm.printSizeVariantName.$error" class="text-bold" style="color:#dd2c00"> <div ng-message="required">The print size variant name is required!</div> </div> <h2 class="d-block h5" style="padding-left:0">Print Size Variant Values</h2> <div class="row d-flex scrolling-page" style="align-items:center" ng-repeat="template in childTemplateProduct.savedTemplates"> <md-input-container class="col-sm-6 hide-md-errors" style="margin:0 0"> <input required maxlength="25" md-no-asterisk type="text" name="savedTemplateNewVariant" ng-model="template.newVariantValue"/> </md-input-container> <div class="col-sm-6"> <p>{{ template.oldVariantValue }}</p> </div> </div> <div ng-messages="variantModalForm.savedTemplateNewVariant.$error" class="text-bold" style="color:#dd2c00"> <div ng-message="required">The size value is required!</div> </div> <div class="row d-flex" style="align-items:center"> <md-input-container class="col-sm-6 hide-md-errors" style="margin:0 0"> <input type="text" name="currentTemplateprintSizeValue" ng-model="childTemplateProduct.currentTemplate.newVariant" maxlength="25" required md-no-asterisk/> </md-input-container> <div class="col-sm-6"> <p>Add the size below</p> </div> </div> <div ng-messages="variantModalForm.currentTemplateprintSizeValue.$error" class="text-bold" style="color:#dd2c00"> <div ng-message="required">The size for this template product is required!</div> </div> </div> <div class="row" style="margin-right:15px;margin-left:15px"> <md-button class="md-raised md-disable w100 m0" style="margin-bottom:15px;margin-top:15px" ng-click="saveAndAddChildTemplateProduct()"> Save and Add Another Print Size </md-button> <md-button class="md-raised md-primary w100 m0" style="margin-bottom:15px;margin-top:15px" type="submit"> Save product </md-button> </div> </form> </md-content> </md-dialog-content> </div> </md-dialog> ';
        e.exports = i
    },
    9: function(e, t) {},
    9020: function(e, t, i) {
        angular.module("app.directives").directive("customilyColorPicker", (function() {
            return {
                restrict: "E",
                scope: {
                    onChange: "&",
                    onSave: "&",
                    onReady: "&",
                    ctrlMethods: "=",
                    colorMode: "=",
                    alpha: "=",
                    disableSave: "=",
                    disabled: "="
                },
                template: i("9c06"),
                controller: ["$scope", "$element", "$attrs", "$timeout", function(e, t, i, n) {
                    n(()=>{
                        var i = t.find("input")
                          , n = i.attr("value").replace("#", "")
                          , o = 1
                          , r = null
                          , a = !1
                          , s = function(e) {
                            var t, i = i = e.replace(/\s/g, "").match(/^rgba?\((\d*\.?\d+),(\d*\.?\d+),(\d*\.?\d+),?([^,\s)]+)?/i), n = (i && i[4] || "").trim(), o = i ? (256 | i[1]).toString(16).slice(1) + (256 | i[2]).toString(16).slice(1) + (256 | i[3]).toString(16).slice(1) : e;
                            return t = "" !== n ? n : 1,
                            {
                                hex: o,
                                alpha: parseFloat(t)
                            }
                        };
                        e.ctrlMethods && (e.ctrlMethods.terminate = function() {
                            r && n && (r.setColor(n, "HEX", o),
                            r.color.options.renderCallback(r.color.colors, r.color.options.mode, !1),
                            n = null,
                            e.onChange && e.onChange() && e.onChange()(r.color.colors, !0))
                        }
                        ,
                        e.ctrlMethods.setColor = function(t) {
                            if (r) {
                                if ("string" === typeof t)
                                    if (0 === t.indexOf("rgb")) {
                                        var i = s(t);
                                        r.setColor(i.hex, "HEX", i.alpha)
                                    } else
                                        r.setColor(t, "HEX", 1);
                                else if (t.rgb && t.HEX)
                                    "cmyk" === e.colorMode ? r.setColor({
                                        c: 100 * t.cmyk.c,
                                        m: 100 * t.cmyk.m,
                                        y: 100 * t.cmyk.y,
                                        k: 100 * t.cmyk.k
                                    }, "cmyk", t.alpha) : r.setColor("#" + t.HEX, "HEX", t.alpha);
                                else if ("cmyk" === e.colorMode) {
                                    var n = t.cmyk.split(",");
                                    r.setColor({
                                        c: 100 * n[0],
                                        m: 100 * n[1],
                                        y: 100 * n[2],
                                        k: 100 * n[3]
                                    }, "cmyk", t.alpha)
                                } else
                                    r.setColor(t.hex, "HEX", t.alpha);
                                r.color.options.renderCallback(r.color.colors, r.color.options.mode, !1),
                                e.onChange && e.onChange() && e.onChange()(r.color.colors)
                            }
                        }
                        ,
                        e.ctrlMethods.getColor = function(e) {
                            return r.color.getColor(e)
                        }
                        ,
                        e.ctrlMethods.disable = function() {
                            i.prop("disabled", !0)
                        }
                        ,
                        e.ctrlMethods.enable = function() {
                            i.prop("disabled", !1)
                        }
                        ,
                        e.ctrlMethods.getColors = function() {
                            return r.color.colors
                        }
                        ,
                        e.ctrlMethods.destroy = function() {
                            r.destroy(),
                            r = null
                        }
                        ,
                        e.ctrlMethods.open = function(e) {
                            var t = $(r.nodes.colorPicker);
                            t.css({
                                position: "absolute",
                                left: e.left,
                                top: e.top
                            }),
                            t.show(200)
                        }
                        ,
                        e.ctrlMethods.openInContainer = function(e) {
                            var t = $(r.nodes.colorPicker);
                            t.appendTo(e)
                        }
                        ,
                        e.ctrlMethods.close = function() {
                            $(r.nodes.colorPicker).hide(200)
                        }
                        ,
                        e.ctrlMethods.getDOM = function() {
                            return r.nodes.colorPicker
                        }
                        ),
                        i.css({
                            padding: ".5em",
                            "margin-right": ".4em",
                            border: "1px solid #aaa",
                            "border-radius": "3px",
                            width: "100%"
                        }),
                        e.alpha = "undefined" === typeof e.alpha || e.alpha,
                        e.disableSave = "undefined" !== typeof e.disableSave && e.disableSave,
                        i.colorPicker({
                            multipleInstances: !0,
                            customBG: "#222",
                            readOnly: !0,
                            size: 4,
                            mode: "hsv-h",
                            draggable: !1,
                            noResize: !0,
                            noAlpha: !e.alpha,
                            noHexButton: !0,
                            noRGBr: !0,
                            noRGBg: !0,
                            noRGBb: !0,
                            convertCallback: function(t, i) {
                                t.colorMode = e.colorMode
                            },
                            init: function(e, t, i) {
                                e.style.backgroundColor = e.value,
                                e.style.color = "transparent",
                                r = i,
                                a = !0
                            },
                            renderCallback: function(t, i, n) {
                                var o = this
                                  , s = $(o.input)
                                  , l = $(o.patch)
                                  , c = o.isIE8 ? (t.alpha < .16 ? "0" : "") + Math.round(100 * t.alpha).toString(16).toUpperCase() + t.HEX : ""
                                  , d = 1 !== t.alpha && !o.isIE8
                                  , u = s.data("colorMode");
                                o._instance && (l.css({
                                    color: "transparent",
                                    "background-color": o._instance.toString(),
                                    filter: o.isIE8 ? "progid:DXImageTransform.Microsoft.gradient(startColorstr=#" + c + ",endColorstr=#" + c + ")" : ""
                                }),
                                s.val("HEX" !== u || d ? o._instance.toString(u, o.forceAlpha) : "#" + (o.isIE8 ? c : t.HEX)),
                                o.displayCallback && o.displayCallback(t, i, o),
                                "undefined" === typeof n && (n = !0),
                                n && e.onChange && e.onChange() && a && r && $(r.nodes.colorPicker).is(":visible") && e.onChange()(t))
                            },
                            onShow: function(t) {
                                r = t,
                                n = t.color.colors.HEX,
                                o = t.color.colors.alpha,
                                "cmyk" === e.colorMode ? t.setColor({
                                    c: 100 * t.color.colors.cmyk.c,
                                    m: 100 * t.color.colors.cmyk.m,
                                    y: 100 * t.color.colors.cmyk.y,
                                    k: 100 * t.color.colors.cmyk.k
                                }, "cmyk", t.color.colors.alpha, !0) : t.setColor("#" + t.color.colors.HEX, "cmyk", t.color.colors.alpha, !0),
                                t.saveAsBackground(),
                                t.color.options.renderCallback(t.color.colors, t.color.options.mode, !1),
                                e.onChange && e.onChange() && r && $(r.nodes.colorPicker).is(":visible") && e.onChange()(t.color.colors)
                            },
                            onHide: function(e) {},
                            onSave: function(t) {
                                n = t.color.colors.HEX,
                                o = t.color.colors.alpha,
                                e.onSave && r && e.onSave()(t.color.colors),
                                $(t.nodes.colorPicker).hide(200)
                            }
                        }),
                        window.addEventListener("keydown", e=>{
                            "Enter" === e.key && e.target === i.get(0) && ($(r.nodes.colorPicker).find(".cp-bsav").click(),
                            i.get(0).blur())
                        }
                        );
                        var l = $(r.nodes.rgb);
                        l.find(".rgb-r-butt").css("pointer-events", "none"),
                        l.find(".rgb-r-labl").css("opacity", 0).css("pointer-events", "none"),
                        l.find(".rgb-g-butt").css("pointer-events", "none"),
                        l.find(".rgb-g-labl").css("opacity", 0).css("pointer-events", "none"),
                        l.find(".rgb-b-butt").css("pointer-events", "none"),
                        l.find(".rgb-b-labl").css("opacity", 0).css("pointer-events", "none"),
                        $(r.nodes.Lab_mode).addClass("cp-hide"),
                        $(r.nodes.hsl_mode).addClass("cp-hide"),
                        $(r.nodes.hsv).addClass("cp-hide"),
                        $(r.nodes.memo).css("display", "none"),
                        $(r.nodes.alpha).find(".alpha-labl").css("opacity", 0).css("pointer-events", "none"),
                        $(r.nodes.HEX).find(".HEX-labl").css("opacity", 0).css("pointer-events", "none"),
                        $(r.nodes.col1).addClass("cp-hide"),
                        $(r.nodes.col2).addClass("cp-hide"),
                        e.alpha ? ($(r.nodes.colorPicker).css("height", "300px"),
                        $(r.nodes.panel).css("height", "279px"),
                        $(r.nodes.opacity).css("bottom", "15px")) : ($(r.nodes.colorPicker).css("height", "280px"),
                        $(r.nodes.panel).css("height", "255px")),
                        e.disableSave ? $(r.nodes.bsav).addClass("cp-hide") : $(r.nodes.bsav).removeClass("cp-hide");
                        var c = $(r.nodes.cmyk);
                        c.find(".Lab-L-labl").css({
                            opacity: 0,
                            "pointer-events": "none"
                        }),
                        c.find(".Lab-a-labl").css({
                            opacity: 0,
                            "pointer-events": "none"
                        }),
                        c.find(".Lab-b-labl").css({
                            opacity: 0,
                            "pointer-events": "none"
                        }),
                        c.find(".Lab-x-labl").css({
                            opacity: 0,
                            "pointer-events": "none"
                        }),
                        e.$watch("colorMode", (function(e) {
                            switch (e) {
                            case "rgb":
                                $(r.nodes.rgb).removeClass("cp-hide"),
                                $(r.nodes.HEX).removeClass("cp-hide"),
                                $(r.nodes.cmyk).addClass("cp-hide");
                                break;
                            case "cmyk":
                                $(r.nodes.cmyk).removeClass("cp-hide"),
                                $(r.nodes.rgb).addClass("cp-hide"),
                                $(r.nodes.HEX).addClass("cp-hide");
                                break
                            }
                        }
                        )),
                        e.onReady() && e.onReady()(r.color.colors)
                    }
                    )
                }
                ]
            }
        }
        ))
    },
    "912b": function(e, t, i) {
        "use strict";
        i("01d2")
    },
    "91ae": function(e, t, i) {},
    9372: function(e, t, i) {
        e.exports = i.p + "img/move-front.ee71cfd3.svg?x-request=html"
    },
    "93ce": function(e, t, i) {
        e.exports = i.p + "img/align-right.557e1ba2.svg?x-request=html"
    },
    "94ac": function(e, t, i) {
        "use strict";
        var n = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("LoaderBtn", e._b({
                attrs: {
                    loading: e.waitingPromise
                },
                on: {
                    click: e.handleClick
                }
            }, "LoaderBtn", e.$attrs, !1), [i("b-modal", {
                attrs: {
                    size: "md",
                    title: e.modalTitle,
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: ""
                },
                on: {
                    ok: e.modalConfirm,
                    cancel: e.modalCancel
                },
                model: {
                    value: e.showConfirmationModal,
                    callback: function(t) {
                        e.showConfirmationModal = t
                    },
                    expression: "showConfirmationModal"
                }
            }, [e._t("modal-content", [e._v(" " + e._s(e.modalDescription) + " ")])], 2), [e._t("default")]], 2)
        }
          , o = []
          , r = i("9ab4")
          , a = i("2b0e")
          , s = i("2fe1")
          , l = i("60a3")
          , c = i("4af8");
        let d = class extends a["default"] {
            constructor() {
                super(...arguments),
                this.waitingPromise = !1,
                this.showConfirmationModal = !1,
                this.confirmationHandler = null,
                this.lastEvent = null
            }
            onWaitingPromiseChange() {
                this.$emit("change", this.waitingPromise)
            }
            async modalConfirm() {
                const e = this.confirmationHandler && this.confirmationHandler(event);
                if (e instanceof Promise) {
                    this.waitingPromise = !0;
                    try {
                        await e,
                        this.waitingPromise = !1
                    } catch (error) {
                        throw this.waitingPromise = !1,
                        error
                    }
                }
            }
            modalCancel() {
                this.$emit("cancel")
            }
            handleClick(e) {
                this.confirmationHandler && (this.lastEvent = e,
                this.showConfirmationModal = !0),
                this.$emit("click", e)
            }
            created() {
                this.$listeners["confirm"] && (this.confirmationHandler = Array.isArray(this.$listeners["confirm"]) ? this.$listeners["confirm"][0] : this.$listeners["confirm"])
            }
        }
        ;
        Object(r["b"])([Object(l["c"])({
            default: "Confirmation"
        })], d.prototype, "modalTitle", void 0),
        Object(r["b"])([Object(l["c"])({
            default: "Confirm?"
        })], d.prototype, "modalDescription", void 0),
        Object(r["b"])([Object(l["b"])("change")], d.prototype, "status", void 0),
        Object(r["b"])([Object(l["e"])("waitingPromise", {
            immediate: !0
        })], d.prototype, "onWaitingPromiseChange", null),
        d = Object(r["b"])([Object(s["b"])({
            name: "ConfirmationBtn",
            components: {
                LoaderBtn: c["a"]
            }
        })], d);
        var u = d
          , p = u
          , h = i("2877")
          , m = Object(h["a"])(p, n, o, !1, null, null, null);
        t["a"] = m.exports
    },
    9581: function(e, t) {
        (function() {
            function e(e) {
                function t(t, i) {
                    e.show(e.alert().parent(document.body).clickOutsideToClose(!1).title(t).ok(i))
                }
                function i(t, i, n="Error!", o=function() {}
                ) {
                    e.show(e.alert().parent(document.body).clickOutsideToClose(!0).title(n).textContent(i + (null !== t && void 0 !== t && t.stack ? ": " + t.stack : "")).ok("OK!")).then((function() {
                        o()
                    }
                    ))
                }
                function n(t, i) {
                    e.show(e.alert().parent(document.body).clickOutsideToClose(!0).title(t + " Error!").textContent(i.msg || i || `There seems to be an error with your ${t} account, so the filter could not be applied to the image.`).ok("OK!"))
                }
                return {
                    showSuccessModal: t,
                    showCommonError: i,
                    showImageFilterError: n
                }
            }
            e.$inject = ["$mdDialog"],
            angular.module("app.shared.services").service("MdDialogService", e)
        }
        )()
    },
    "961d": function(e, t, i) {
        "use strict";
        i("a4c5")
    },
    "974f": function(e, t, i) {
        "use strict";
        i.r(t);
        var n = [["000000", "Black"], ["000080", "Navy Blue"], ["0000C8", "Dark Blue"], ["0000FF", "Blue"], ["000741", "Stratos"], ["001B1C", "Swamp"], ["002387", "Resolution Blue"], ["002900", "Deep Fir"], ["002E20", "Burnham"], ["002FA7", "International Klein Blue"], ["003153", "Prussian Blue"], ["003366", "Midnight Blue"], ["003399", "Smalt"], ["003532", "Deep Teal"], ["003E40", "Cyprus"], ["004620", "Kaitoke Green"], ["0047AB", "Cobalt"], ["004816", "Crusoe"], ["004950", "Sherpa Blue"], ["0056A7", "Endeavour"], ["00581A", "Camarone"], ["0066CC", "Science Blue"], ["0066FF", "Blue Ribbon"], ["00755E", "Tropical Rain Forest"], ["0076A3", "Allports"], ["007BA7", "Deep Cerulean"], ["007EC7", "Lochmara"], ["007FFF", "Azure Radiance"], ["008080", "Teal"], ["0095B6", "Bondi Blue"], ["009DC4", "Pacific Blue"], ["00A693", "Persian Green"], ["00A86B", "Jade"], ["00CC99", "Caribbean Green"], ["00CCCC", "Robin's Egg Blue"], ["00FF00", "Green"], ["00FF7F", "Spring Green"], ["00FFFF", "Cyan / Aqua"], ["010D1A", "Blue Charcoal"], ["011635", "Midnight"], ["011D13", "Holly"], ["012731", "Daintree"], ["01361C", "Cardin Green"], ["01371A", "County Green"], ["013E62", "Astronaut Blue"], ["013F6A", "Regal Blue"], ["014B43", "Aqua Deep"], ["015E85", "Orient"], ["016162", "Blue Stone"], ["016D39", "Fun Green"], ["01796F", "Pine Green"], ["017987", "Blue Lagoon"], ["01826B", "Deep Sea"], ["01A368", "Green Haze"], ["022D15", "English Holly"], ["02402C", "Sherwood Green"], ["02478E", "Congress Blue"], ["024E46", "Evening Sea"], ["026395", "Bahama Blue"], ["02866F", "Observatory"], ["02A4D3", "Cerulean"], ["03163C", "Tangaroa"], ["032B52", "Green Vogue"], ["036A6E", "Mosque"], ["041004", "Midnight Moss"], ["041322", "Black Pearl"], ["042E4C", "Blue Whale"], ["044022", "Zuccini"], ["044259", "Teal Blue"], ["051040", "Deep Cove"], ["051657", "Gulf Blue"], ["055989", "Venice Blue"], ["056F57", "Watercourse"], ["062A78", "Catalina Blue"], ["063537", "Tiber"], ["069B81", "Gossamer"], ["06A189", "Niagara"], ["073A50", "Tarawera"], ["080110", "Jaguar"], ["081910", "Black Bean"], ["082567", "Deep Sapphire"], ["088370", "Elf Green"], ["08E8DE", "Bright Turquoise"], ["092256", "Downriver"], ["09230F", "Palm Green"], ["09255D", "Madison"], ["093624", "Bottle Green"], ["095859", "Deep Sea Green"], ["097F4B", "Salem"], ["0A001C", "Black Russian"], ["0A480D", "Dark Fern"], ["0A6906", "Japanese Laurel"], ["0A6F75", "Atoll"], ["0B0B0B", "Cod Gray"], ["0B0F08", "Marshland"], ["0B1107", "Gordons Green"], ["0B1304", "Black Forest"], ["0B6207", "San Felix"], ["0BDA51", "Malachite"], ["0C0B1D", "Ebony"], ["0C0D0F", "Woodsmoke"], ["0C1911", "Racing Green"], ["0C7A79", "Surfie Green"], ["0C8990", "Blue Chill"], ["0D0332", "Black Rock"], ["0D1117", "Bunker"], ["0D1C19", "Aztec"], ["0D2E1C", "Bush"], ["0E0E18", "Cinder"], ["0E2A30", "Firefly"], ["0F2D9E", "Torea Bay"], ["10121D", "Vulcan"], ["101405", "Green Waterloo"], ["105852", "Eden"], ["110C6C", "Arapawa"], ["120A8F", "Ultramarine"], ["123447", "Elephant"], ["126B40", "Jewel"], ["130000", "Diesel"], ["130A06", "Asphalt"], ["13264D", "Blue Zodiac"], ["134F19", "Parsley"], ["140600", "Nero"], ["1450AA", "Tory Blue"], ["151F4C", "Bunting"], ["1560BD", "Denim"], ["15736B", "Genoa"], ["161928", "Mirage"], ["161D10", "Hunter Green"], ["162A40", "Big Stone"], ["163222", "Celtic"], ["16322C", "Timber Green"], ["163531", "Gable Green"], ["171F04", "Pine Tree"], ["175579", "Chathams Blue"], ["182D09", "Deep Forest Green"], ["18587A", "Blumine"], ["19330E", "Palm Leaf"], ["193751", "Nile Blue"], ["1959A8", "Fun Blue"], ["1A1A68", "Lucky Point"], ["1AB385", "Mountain Meadow"], ["1B0245", "Tolopea"], ["1B1035", "Haiti"], ["1B127B", "Deep Koamaru"], ["1B1404", "Acadia"], ["1B2F11", "Seaweed"], ["1B3162", "Biscay"], ["1B659D", "Matisse"], ["1C1208", "Crowshead"], ["1C1E13", "Rangoon Green"], ["1C39BB", "Persian Blue"], ["1C402E", "Everglade"], ["1C7C7D", "Elm"], ["1D6142", "Green Pea"], ["1E0F04", "Creole"], ["1E1609", "Karaka"], ["1E1708", "El Paso"], ["1E385B", "Cello"], ["1E433C", "Te Papa Green"], ["1E90FF", "Dodger Blue"], ["1E9AB0", "Eastern Blue"], ["1F120F", "Night Rider"], ["1FC2C2", "Java"], ["20208D", "Jacksons Purple"], ["202E54", "Cloud Burst"], ["204852", "Blue Dianne"], ["211A0E", "Eternity"], ["220878", "Deep Blue"], ["228B22", "Forest Green"], ["233418", "Mallard"], ["240A40", "Violet"], ["240C02", "Kilamanjaro"], ["242A1D", "Log Cabin"], ["242E16", "Black Olive"], ["24500F", "Green House"], ["251607", "Graphite"], ["251706", "Cannon Black"], ["251F4F", "Port Gore"], ["25272C", "Shark"], ["25311C", "Green Kelp"], ["2596D1", "Curious Blue"], ["260368", "Paua"], ["26056A", "Paris M"], ["261105", "Wood Bark"], ["261414", "Gondola"], ["262335", "Steel Gray"], ["26283B", "Ebony Clay"], ["273A81", "Bay of Many"], ["27504B", "Plantation"], ["278A5B", "Eucalyptus"], ["281E15", "Oil"], ["283A77", "Astronaut"], ["286ACD", "Mariner"], ["290C5E", "Violent Violet"], ["292130", "Bastille"], ["292319", "Zeus"], ["292937", "Charade"], ["297B9A", "Jelly Bean"], ["29AB87", "Jungle Green"], ["2A0359", "Cherry Pie"], ["2A140E", "Coffee Bean"], ["2A2630", "Baltic Sea"], ["2A380B", "Turtle Green"], ["2A52BE", "Cerulean Blue"], ["2B0202", "Sepia Black"], ["2B194F", "Valhalla"], ["2B3228", "Heavy Metal"], ["2C0E8C", "Blue Gem"], ["2C1632", "Revolver"], ["2C2133", "Bleached Cedar"], ["2C8C84", "Lochinvar"], ["2D2510", "Mikado"], ["2D383A", "Outer Space"], ["2D569B", "St Tropaz"], ["2E0329", "Jacaranda"], ["2E1905", "Jacko Bean"], ["2E3222", "Rangitoto"], ["2E3F62", "Rhino"], ["2E8B57", "Sea Green"], ["2EBFD4", "Scooter"], ["2F270E", "Onion"], ["2F3CB3", "Governor Bay"], ["2F519E", "Sapphire"], ["2F5A57", "Spectra"], ["2F6168", "Casal"], ["300529", "Melanzane"], ["301F1E", "Cocoa Brown"], ["302A0F", "Woodrush"], ["304B6A", "San Juan"], ["30D5C8", "Turquoise"], ["311C17", "Eclipse"], ["314459", "Pickled Bluewood"], ["315BA1", "Azure"], ["31728D", "Calypso"], ["317D82", "Paradiso"], ["32127A", "Persian Indigo"], ["32293A", "Blackcurrant"], ["323232", "Mine Shaft"], ["325D52", "Stromboli"], ["327C14", "Bilbao"], ["327DA0", "Astral"], ["33036B", "Christalle"], ["33292F", "Thunder"], ["33CC99", "Shamrock"], ["341515", "Tamarind"], ["350036", "Mardi Gras"], ["350E42", "Valentino"], ["350E57", "Jagger"], ["353542", "Tuna"], ["354E8C", "Chambray"], ["363050", "Martinique"], ["363534", "Tuatara"], ["363C0D", "Waiouru"], ["36747D", "Ming"], ["368716", "La Palma"], ["370202", "Chocolate"], ["371D09", "Clinker"], ["37290E", "Brown Tumbleweed"], ["373021", "Birch"], ["377475", "Oracle"], ["380474", "Blue Diamond"], ["381A51", "Grape"], ["383533", "Dune"], ["384555", "Oxford Blue"], ["384910", "Clover"], ["394851", "Limed Spruce"], ["396413", "Dell"], ["3A0020", "Toledo"], ["3A2010", "Sambuca"], ["3A2A6A", "Jacarta"], ["3A686C", "William"], ["3A6A47", "Killarney"], ["3AB09E", "Keppel"], ["3B000B", "Temptress"], ["3B0910", "Aubergine"], ["3B1F1F", "Jon"], ["3B2820", "Treehouse"], ["3B7A57", "Amazon"], ["3B91B4", "Boston Blue"], ["3C0878", "Windsor"], ["3C1206", "Rebel"], ["3C1F76", "Meteorite"], ["3C2005", "Dark Ebony"], ["3C3910", "Camouflage"], ["3C4151", "Bright Gray"], ["3C4443", "Cape Cod"], ["3C493A", "Lunar Green"], ["3D0C02", "Bean  "], ["3D2B1F", "Bistre"], ["3D7D52", "Goblin"], ["3E0480", "Kingfisher Daisy"], ["3E1C14", "Cedar"], ["3E2B23", "English Walnut"], ["3E2C1C", "Black Marlin"], ["3E3A44", "Ship Gray"], ["3EABBF", "Pelorous"], ["3F2109", "Bronze"], ["3F2500", "Cola"], ["3F3002", "Madras"], ["3F307F", "Minsk"], ["3F4C3A", "Cabbage Pont"], ["3F583B", "Tom Thumb"], ["3F5D53", "Mineral Green"], ["3FC1AA", "Puerto Rico"], ["3FFF00", "Harlequin"], ["401801", "Brown Pod"], ["40291D", "Cork"], ["403B38", "Masala"], ["403D19", "Thatch Green"], ["405169", "Fiord"], ["40826D", "Viridian"], ["40A860", "Chateau Green"], ["410056", "Ripe Plum"], ["411F10", "Paco"], ["412010", "Deep Oak"], ["413C37", "Merlin"], ["414257", "Gun Powder"], ["414C7D", "East Bay"], ["4169E1", "Royal Blue"], ["41AA78", "Ocean Green"], ["420303", "Burnt Maroon"], ["423921", "Lisbon Brown"], ["427977", "Faded Jade"], ["431560", "Scarlet Gum"], ["433120", "Iroko"], ["433E37", "Armadillo"], ["434C59", "River Bed"], ["436A0D", "Green Leaf"], ["44012D", "Barossa"], ["441D00", "Morocco Brown"], ["444954", "Mako"], ["454936", "Kelp"], ["456CAC", "San Marino"], ["45B1E8", "Picton Blue"], ["460B41", "Loulou"], ["462425", "Crater Brown"], ["465945", "Gray Asparagus"], ["4682B4", "Steel Blue"], ["480404", "Rustic Red"], ["480607", "Bulgarian Rose"], ["480656", "Clairvoyant"], ["481C1C", "Cocoa Bean"], ["483131", "Woody Brown"], ["483C32", "Taupe"], ["49170C", "Van Cleef"], ["492615", "Brown Derby"], ["49371B", "Metallic Bronze"], ["495400", "Verdun Green"], ["496679", "Blue Bayoux"], ["497183", "Bismark"], ["4A2A04", "Bracken"], ["4A3004", "Deep Bronze"], ["4A3C30", "Mondo"], ["4A4244", "Tundora"], ["4A444B", "Gravel"], ["4A4E5A", "Trout"], ["4B0082", "Pigment Indigo"], ["4B5D52", "Nandor"], ["4C3024", "Saddle"], ["4C4F56", "Abbey"], ["4D0135", "Blackberry"], ["4D0A18", "Cab Sav"], ["4D1E01", "Indian Tan"], ["4D282D", "Cowboy"], ["4D282E", "Livid Brown"], ["4D3833", "Rock"], ["4D3D14", "Punga"], ["4D400F", "Bronzetone"], ["4D5328", "Woodland"], ["4E0606", "Mahogany"], ["4E2A5A", "Bossanova"], ["4E3B41", "Matterhorn"], ["4E420C", "Bronze Olive"], ["4E4562", "Mulled Wine"], ["4E6649", "Axolotl"], ["4E7F9E", "Wedgewood"], ["4EABD1", "Shakespeare"], ["4F1C70", "Honey Flower"], ["4F2398", "Daisy Bush"], ["4F69C6", "Indigo"], ["4F7942", "Fern Green"], ["4F9D5D", "Fruit Salad"], ["4FA83D", "Apple"], ["504351", "Mortar"], ["507096", "Kashmir Blue"], ["507672", "Cutty Sark"], ["50C878", "Emerald"], ["514649", "Emperor"], ["516E3D", "Chalet Green"], ["517C66", "Como"], ["51808F", "Smalt Blue"], ["52001F", "Castro"], ["520C17", "Maroon Oak"], ["523C94", "Gigas"], ["533455", "Voodoo"], ["534491", "Victoria"], ["53824B", "Hippie Green"], ["541012", "Heath"], ["544333", "Judge Gray"], ["54534D", "Fuscous Gray"], ["549019", "Vida Loca"], ["55280C", "Cioccolato"], ["555B10", "Saratoga"], ["556D56", "Finlandia"], ["5590D9", "Havelock Blue"], ["56B4BE", "Fountain Blue"], ["578363", "Spring Leaves"], ["583401", "Saddle Brown"], ["585562", "Scarpa Flow"], ["587156", "Cactus"], ["589AAF", "Hippie Blue"], ["591D35", "Wine Berry"], ["592804", "Brown Bramble"], ["593737", "Congo Brown"], ["594433", "Millbrook"], ["5A6E9C", "Waikawa Gray"], ["5A87A0", "Horizon"], ["5B3013", "Jambalaya"], ["5C0120", "Bordeaux"], ["5C0536", "Mulberry Wood"], ["5C2E01", "Carnaby Tan"], ["5C5D75", "Comet"], ["5D1E0F", "Redwood"], ["5D4C51", "Don Juan"], ["5D5C58", "Chicago"], ["5D5E37", "Verdigris"], ["5D7747", "Dingley"], ["5DA19F", "Breaker Bay"], ["5E483E", "Kabul"], ["5E5D3B", "Hemlock"], ["5F3D26", "Irish Coffee"], ["5F5F6E", "Mid Gray"], ["5F6672", "Shuttle Gray"], ["5FA777", "Aqua Forest"], ["5FB3AC", "Tradewind"], ["604913", "Horses Neck"], ["605B73", "Smoky"], ["606E68", "Corduroy"], ["6093D1", "Danube"], ["612718", "Espresso"], ["614051", "Eggplant"], ["615D30", "Costa Del Sol"], ["61845F", "Glade Green"], ["622F30", "Buccaneer"], ["623F2D", "Quincy"], ["624E9A", "Butterfly Bush"], ["625119", "West Coast"], ["626649", "Finch"], ["639A8F", "Patina"], ["63B76C", "Fern"], ["6456B7", "Blue Violet"], ["646077", "Dolphin"], ["646463", "Storm Dust"], ["646A54", "Siam"], ["646E75", "Nevada"], ["6495ED", "Cornflower Blue"], ["64CCDB", "Viking"], ["65000B", "Rosewood"], ["651A14", "Cherrywood"], ["652DC1", "Purple Heart"], ["657220", "Fern Frond"], ["65745D", "Willow Grove"], ["65869F", "Hoki"], ["660045", "Pompadour"], ["660099", "Purple"], ["66023C", "Tyrian Purple"], ["661010", "Dark Tan"], ["66B58F", "Silver Tree"], ["66FF00", "Bright Green"], ["66FF66", "Screamin' Green"], ["67032D", "Black Rose"], ["675FA6", "Scampi"], ["676662", "Ironside Gray"], ["678975", "Viridian Green"], ["67A712", "Christi"], ["683600", "Nutmeg Wood Finish"], ["685558", "Zambezi"], ["685E6E", "Salt Box"], ["692545", "Tawny Port"], ["692D54", "Finn"], ["695F62", "Scorpion"], ["697E9A", "Lynch"], ["6A442E", "Spice"], ["6A5D1B", "Himalaya"], ["6A6051", "Soya Bean"], ["6B2A14", "Hairy Heath"], ["6B3FA0", "Royal Purple"], ["6B4E31", "Shingle Fawn"], ["6B5755", "Dorado"], ["6B8BA2", "Bermuda Gray"], ["6B8E23", "Olive Drab"], ["6C3082", "Eminence"], ["6CDAE7", "Turquoise Blue"], ["6D0101", "Lonestar"], ["6D5E54", "Pine Cone"], ["6D6C6C", "Dove Gray"], ["6D9292", "Juniper"], ["6D92A1", "Gothic"], ["6E0902", "Red Oxide"], ["6E1D14", "Moccaccino"], ["6E4826", "Pickled Bean"], ["6E4B26", "Dallas"], ["6E6D57", "Kokoda"], ["6E7783", "Pale Sky"], ["6F440C", "Cafe Royale"], ["6F6A61", "Flint"], ["6F8E63", "Highland"], ["6F9D02", "Limeade"], ["6FD0C5", "Downy"], ["701C1C", "Persian Plum"], ["704214", "Sepia"], ["704A07", "Antique Bronze"], ["704F50", "Ferra"], ["706555", "Coffee"], ["708090", "Slate Gray"], ["711A00", "Cedar Wood Finish"], ["71291D", "Metallic Copper"], ["714693", "Affair"], ["714AB2", "Studio"], ["715D47", "Tobacco Brown"], ["716338", "Yellow Metal"], ["716B56", "Peat"], ["716E10", "Olivetone"], ["717486", "Storm Gray"], ["718080", "Sirocco"], ["71D9E2", "Aquamarine Blue"], ["72010F", "Venetian Red"], ["724A2F", "Old Copper"], ["726D4E", "Go Ben"], ["727B89", "Raven"], ["731E8F", "Seance"], ["734A12", "Raw Umber"], ["736C9F", "Kimberly"], ["736D58", "Crocodile"], ["737829", "Crete"], ["738678", "Xanadu"], ["74640D", "Spicy Mustard"], ["747D63", "Limed Ash"], ["747D83", "Rolling Stone"], ["748881", "Blue Smoke"], ["749378", "Laurel"], ["74C365", "Mantis"], ["755A57", "Russett"], ["7563A8", "Deluge"], ["76395D", "Cosmic"], ["7666C6", "Blue Marguerite"], ["76BD17", "Lima"], ["76D7EA", "Sky Blue"], ["770F05", "Dark Burgundy"], ["771F1F", "Crown of Thorns"], ["773F1A", "Walnut"], ["776F61", "Pablo"], ["778120", "Pacifika"], ["779E86", "Oxley"], ["77DD77", "Pastel Green"], ["780109", "Japanese Maple"], ["782D19", "Mocha"], ["782F16", "Peanut"], ["78866B", "Camouflage Green"], ["788A25", "Wasabi"], ["788BBA", "Ship Cove"], ["78A39C", "Sea Nymph"], ["795D4C", "Roman Coffee"], ["796878", "Old Lavender"], ["796989", "Rum"], ["796A78", "Fedora"], ["796D62", "Sandstone"], ["79DEEC", "Spray"], ["7A013A", "Siren"], ["7A58C1", "Fuchsia Blue"], ["7A7A7A", "Boulder"], ["7A89B8", "Wild Blue Yonder"], ["7AC488", "De York"], ["7B3801", "Red Beech"], ["7B3F00", "Cinnamon"], ["7B6608", "Yukon Gold"], ["7B7874", "Tapa"], ["7B7C94", "Waterloo "], ["7B8265", "Flax Smoke"], ["7B9F80", "Amulet"], ["7BA05B", "Asparagus"], ["7C1C05", "Kenyan Copper"], ["7C7631", "Pesto"], ["7C778A", "Topaz"], ["7C7B7A", "Concord"], ["7C7B82", "Jumbo"], ["7C881A", "Trendy Green"], ["7CA1A6", "Gumbo"], ["7CB0A1", "Acapulco"], ["7CB7BB", "Neptune"], ["7D2C14", "Pueblo"], ["7DA98D", "Bay Leaf"], ["7DC8F7", "Malibu"], ["7DD8C6", "Bermuda"], ["7E3A15", "Copper Canyon"], ["7F1734", "Claret"], ["7F3A02", "Peru Tan"], ["7F626D", "Falcon"], ["7F7589", "Mobster"], ["7F76D3", "Moody Blue"], ["7FFF00", "Chartreuse"], ["7FFFD4", "Aquamarine"], ["800000", "Maroon"], ["800B47", "Rose Bud Cherry"], ["801818", "Falu Red"], ["80341F", "Red Robin"], ["803790", "Vivid Violet"], ["80461B", "Russet"], ["807E79", "Friar Gray"], ["808000", "Olive"], ["808080", "Gray"], ["80B3AE", "Gulf Stream"], ["80B3C4", "Glacier"], ["80CCEA", "Seagull"], ["81422C", "Nutmeg"], ["816E71", "Spicy Pink"], ["817377", "Empress"], ["819885", "Spanish Green"], ["826F65", "Sand Dune"], ["828685", "Gunsmoke"], ["828F72", "Battleship Gray"], ["831923", "Merlot"], ["837050", "Shadow"], ["83AA5D", "Chelsea Cucumber"], ["83D0C6", "Monte Carlo"], ["843179", "Plum"], ["84A0A0", "Granny Smith"], ["8581D9", "Chetwode Blue"], ["858470", "Bandicoot"], ["859FAF", "Bali Hai"], ["85C4CC", "Half Baked"], ["860111", "Red Devil"], ["863C3C", "Lotus"], ["86483C", "Ironstone"], ["864D1E", "Bull Shot"], ["86560A", "Rusty Nail"], ["868974", "Bitter"], ["86949F", "Regent Gray"], ["871550", "Disco"], ["87756E", "Americano"], ["877C7B", "Hurricane"], ["878D91", "Oslo Gray"], ["87AB39", "Sushi"], ["885342", "Spicy Mix"], ["886221", "Kumera"], ["888387", "Suva Gray"], ["888D65", "Avocado"], ["893456", "Camelot"], ["893843", "Solid Pink"], ["894367", "Cannon Pink"], ["897D6D", "Makara"], ["8A3324", "Burnt Umber"], ["8A73D6", "True V"], ["8A8360", "Clay Creek"], ["8A8389", "Monsoon"], ["8A8F8A", "Stack"], ["8AB9F1", "Jordy Blue"], ["8B00FF", "Electric Violet"], ["8B0723", "Monarch"], ["8B6B0B", "Corn Harvest"], ["8B8470", "Olive Haze"], ["8B847E", "Schooner"], ["8B8680", "Natural Gray"], ["8B9C90", "Mantle"], ["8B9FEE", "Portage"], ["8BA690", "Envy"], ["8BA9A5", "Cascade"], ["8BE6D8", "Riptide"], ["8C055E", "Cardinal Pink"], ["8C472F", "Mule Fawn"], ["8C5738", "Potters Clay"], ["8C6495", "Trendy Pink"], ["8D0226", "Paprika"], ["8D3D38", "Sanguine Brown"], ["8D3F3F", "Tosca"], ["8D7662", "Cement"], ["8D8974", "Granite Green"], ["8D90A1", "Manatee"], ["8DA8CC", "Polo Blue"], ["8E0000", "Red Berry"], ["8E4D1E", "Rope"], ["8E6F70", "Opium"], ["8E775E", "Domino"], ["8E8190", "Mamba"], ["8EABC1", "Nepal"], ["8F021C", "Pohutukawa"], ["8F3E33", "El Salva"], ["8F4B0E", "Korma"], ["8F8176", "Squirrel"], ["8FD6B4", "Vista Blue"], ["900020", "Burgundy"], ["901E1E", "Old Brick"], ["907874", "Hemp"], ["907B71", "Almond Frost"], ["908D39", "Sycamore"], ["92000A", "Sangria"], ["924321", "Cumin"], ["926F5B", "Beaver"], ["928573", "Stonewall"], ["928590", "Venus"], ["9370DB", "Medium Purple"], ["93CCEA", "Cornflower"], ["93DFB8", "Algae Green"], ["944747", "Copper Rust"], ["948771", "Arrowtown"], ["950015", "Scarlett"], ["956387", "Strikemaster"], ["959396", "Mountain Mist"], ["960018", "Carmine"], ["964B00", "Brown"], ["967059", "Leather"], ["9678B6", "Purple Mountain's Majesty"], ["967BB6", "Lavender Purple"], ["96A8A1", "Pewter"], ["96BBAB", "Summer Green"], ["97605D", "Au Chico"], ["9771B5", "Wisteria"], ["97CD2D", "Atlantis"], ["983D61", "Vin Rouge"], ["9874D3", "Lilac Bush"], ["98777B", "Bazaar"], ["98811B", "Hacienda"], ["988D77", "Pale Oyster"], ["98FF98", "Mint Green"], ["990066", "Fresh Eggplant"], ["991199", "Violet Eggplant"], ["991613", "Tamarillo"], ["991B07", "Totem Pole"], ["996666", "Copper Rose"], ["9966CC", "Amethyst"], ["997A8D", "Mountbatten Pink"], ["9999CC", "Blue Bell"], ["9A3820", "Prairie Sand"], ["9A6E61", "Toast"], ["9A9577", "Gurkha"], ["9AB973", "Olivine"], ["9AC2B8", "Shadow Green"], ["9B4703", "Oregon"], ["9B9E8F", "Lemon Grass"], ["9C3336", "Stiletto"], ["9D5616", "Hawaiian Tan"], ["9DACB7", "Gull Gray"], ["9DC209", "Pistachio"], ["9DE093", "Granny Smith Apple"], ["9DE5FF", "Anakiwa"], ["9E5302", "Chelsea Gem"], ["9E5B40", "Sepia Skin"], ["9EA587", "Sage"], ["9EA91F", "Citron"], ["9EB1CD", "Rock Blue"], ["9EDEE0", "Morning Glory"], ["9F381D", "Cognac"], ["9F821C", "Reef Gold"], ["9F9F9C", "Star Dust"], ["9FA0B1", "Santas Gray"], ["9FD7D3", "Sinbad"], ["9FDD8C", "Feijoa"], ["A02712", "Tabasco"], ["A1750D", "Buttered Rum"], ["A1ADB5", "Hit Gray"], ["A1C50A", "Citrus"], ["A1DAD7", "Aqua Island"], ["A1E9DE", "Water Leaf"], ["A2006D", "Flirt"], ["A23B6C", "Rouge"], ["A26645", "Cape Palliser"], ["A2AAB3", "Gray Chateau"], ["A2AEAB", "Edward"], ["A3807B", "Pharlap"], ["A397B4", "Amethyst Smoke"], ["A3E3ED", "Blizzard Blue"], ["A4A49D", "Delta"], ["A4A6D3", "Wistful"], ["A4AF6E", "Green Smoke"], ["A50B5E", "Jazzberry Jam"], ["A59B91", "Zorba"], ["A5CB0C", "Bahia"], ["A62F20", "Roof Terracotta"], ["A65529", "Paarl"], ["A68B5B", "Barley Corn"], ["A69279", "Donkey Brown"], ["A6A29A", "Dawn"], ["A72525", "Mexican Red"], ["A7882C", "Luxor Gold"], ["A85307", "Rich Gold"], ["A86515", "Reno Sand"], ["A86B6B", "Coral Tree"], ["A8989B", "Dusty Gray"], ["A899E6", "Dull Lavender"], ["A8A589", "Tallow"], ["A8AE9C", "Bud"], ["A8AF8E", "Locust"], ["A8BD9F", "Norway"], ["A8E3BD", "Chinook"], ["A9A491", "Gray Olive"], ["A9ACB6", "Aluminium"], ["A9B2C3", "Cadet Blue"], ["A9B497", "Schist"], ["A9BDBF", "Tower Gray"], ["A9BEF2", "Perano"], ["A9C6C2", "Opal"], ["AA375A", "Night Shadz"], ["AA4203", "Fire"], ["AA8B5B", "Muesli"], ["AA8D6F", "Sandal"], ["AAA5A9", "Shady Lady"], ["AAA9CD", "Logan"], ["AAABB7", "Spun Pearl"], ["AAD6E6", "Regent St Blue"], ["AAF0D1", "Magic Mint"], ["AB0563", "Lipstick"], ["AB3472", "Royal Heath"], ["AB917A", "Sandrift"], ["ABA0D9", "Cold Purple"], ["ABA196", "Bronco"], ["AC8A56", "Limed Oak"], ["AC91CE", "East Side"], ["AC9E22", "Lemon Ginger"], ["ACA494", "Napa"], ["ACA586", "Hillary"], ["ACA59F", "Cloudy"], ["ACACAC", "Silver Chalice"], ["ACB78E", "Swamp Green"], ["ACCBB1", "Spring Rain"], ["ACDD4D", "Conifer"], ["ACE1AF", "Celadon"], ["AD781B", "Mandalay"], ["ADBED1", "Casper"], ["ADDFAD", "Moss Green"], ["ADE6C4", "Padua"], ["ADFF2F", "Green Yellow"], ["AE4560", "Hippie Pink"], ["AE6020", "Desert"], ["AE809E", "Bouquet"], ["AF4035", "Medium Carmine"], ["AF4D43", "Apple Blossom"], ["AF593E", "Brown Rust"], ["AF8751", "Driftwood"], ["AF8F2C", "Alpine"], ["AF9F1C", "Lucky"], ["AFA09E", "Martini"], ["AFB1B8", "Bombay"], ["AFBDD9", "Pigeon Post"], ["B04C6A", "Cadillac"], ["B05D54", "Matrix"], ["B05E81", "Tapestry"], ["B06608", "Mai Tai"], ["B09A95", "Del Rio"], ["B0E0E6", "Powder Blue"], ["B0E313", "Inch Worm"], ["B10000", "Bright Red"], ["B14A0B", "Vesuvius"], ["B1610B", "Pumpkin Skin"], ["B16D52", "Santa Fe"], ["B19461", "Teak"], ["B1E2C1", "Fringy Flower"], ["B1F4E7", "Ice Cold"], ["B20931", "Shiraz"], ["B2A1EA", "Biloba Flower"], ["B32D29", "Tall Poppy"], ["B35213", "Fiery Orange"], ["B38007", "Hot Toddy"], ["B3AF95", "Taupe Gray"], ["B3C110", "La Rioja"], ["B43332", "Well Read"], ["B44668", "Blush"], ["B4CFD3", "Jungle Mist"], ["B57281", "Turkish Rose"], ["B57EDC", "Lavender"], ["B5A27F", "Mongoose"], ["B5B35C", "Olive Green"], ["B5D2CE", "Jet Stream"], ["B5ECDF", "Cruise"], ["B6316C", "Hibiscus"], ["B69D98", "Thatch"], ["B6B095", "Heathered Gray"], ["B6BAA4", "Eagle"], ["B6D1EA", "Spindle"], ["B6D3BF", "Gum Leaf"], ["B7410E", "Rust"], ["B78E5C", "Muddy Waters"], ["B7A214", "Sahara"], ["B7A458", "Husk"], ["B7B1B1", "Nobel"], ["B7C3D0", "Heather"], ["B7F0BE", "Madang"], ["B81104", "Milano Red"], ["B87333", "Copper"], ["B8B56A", "Gimblet"], ["B8C1B1", "Green Spring"], ["B8C25D", "Celery"], ["B8E0F9", "Sail"], ["B94E48", "Chestnut"], ["B95140", "Crail"], ["B98D28", "Marigold"], ["B9C46A", "Wild Willow"], ["B9C8AC", "Rainee"], ["BA0101", "Guardsman Red"], ["BA450C", "Rock Spray"], ["BA6F1E", "Bourbon"], ["BA7F03", "Pirate Gold"], ["BAB1A2", "Nomad"], ["BAC7C9", "Submarine"], ["BAEEF9", "Charlotte"], ["BB3385", "Medium Red Violet"], ["BB8983", "Brandy Rose"], ["BBD009", "Rio Grande"], ["BBD7C1", "Surf"], ["BCC9C2", "Powder Ash"], ["BD5E2E", "Tuscany"], ["BD978E", "Quicksand"], ["BDB1A8", "Silk"], ["BDB2A1", "Malta"], ["BDB3C7", "Chatelle"], ["BDBBD7", "Lavender Gray"], ["BDBDC6", "French Gray"], ["BDC8B3", "Clay Ash"], ["BDC9CE", "Loblolly"], ["BDEDFD", "French Pass"], ["BEA6C3", "London Hue"], ["BEB5B7", "Pink Swan"], ["BEDE0D", "Fuego"], ["BF5500", "Rose of Sharon"], ["BFB8B0", "Tide"], ["BFBED8", "Blue Haze"], ["BFC1C2", "Silver Sand"], ["BFC921", "Key Lime Pie"], ["BFDBE2", "Ziggurat"], ["BFFF00", "Lime"], ["C02B18", "Thunderbird"], ["C04737", "Mojo"], ["C08081", "Old Rose"], ["C0C0C0", "Silver"], ["C0D3B9", "Pale Leaf"], ["C0D8B6", "Pixie Green"], ["C1440E", "Tia Maria"], ["C154C1", "Fuchsia Pink"], ["C1A004", "Buddha Gold"], ["C1B7A4", "Bison Hide"], ["C1BAB0", "Tea"], ["C1BECD", "Gray Suit"], ["C1D7B0", "Sprout"], ["C1F07C", "Sulu"], ["C26B03", "Indochine"], ["C2955D", "Twine"], ["C2BDB6", "Cotton Seed"], ["C2CAC4", "Pumice"], ["C2E8E5", "Jagged Ice"], ["C32148", "Maroon Flush"], ["C3B091", "Indian Khaki"], ["C3BFC1", "Pale Slate"], ["C3C3BD", "Gray Nickel"], ["C3CDE6", "Periwinkle Gray"], ["C3D1D1", "Tiara"], ["C3DDF9", "Tropical Blue"], ["C41E3A", "Cardinal"], ["C45655", "Fuzzy Wuzzy Brown"], ["C45719", "Orange Roughy"], ["C4C4BC", "Mist Gray"], ["C4D0B0", "Coriander"], ["C4F4EB", "Mint Tulip"], ["C54B8C", "Mulberry"], ["C59922", "Nugget"], ["C5994B", "Tussock"], ["C5DBCA", "Sea Mist"], ["C5E17A", "Yellow Green"], ["C62D42", "Brick Red"], ["C6726B", "Contessa"], ["C69191", "Oriental Pink"], ["C6A84B", "Roti"], ["C6C3B5", "Ash"], ["C6C8BD", "Kangaroo"], ["C6E610", "Las Palmas"], ["C7031E", "Monza"], ["C71585", "Red Violet"], ["C7BCA2", "Coral Reef"], ["C7C1FF", "Melrose"], ["C7C4BF", "Cloud"], ["C7C9D5", "Ghost"], ["C7CD90", "Pine Glade"], ["C7DDE5", "Botticelli"], ["C88A65", "Antique Brass"], ["C8A2C8", "Lilac"], ["C8A528", "Hokey Pokey"], ["C8AABF", "Lily"], ["C8B568", "Laser"], ["C8E3D7", "Edgewater"], ["C96323", "Piper"], ["C99415", "Pizza"], ["C9A0DC", "Light Wisteria"], ["C9B29B", "Rodeo Dust"], ["C9B35B", "Sundance"], ["C9B93B", "Earls Green"], ["C9C0BB", "Silver Rust"], ["C9D9D2", "Conch"], ["C9FFA2", "Reef"], ["C9FFE5", "Aero Blue"], ["CA3435", "Flush Mahogany"], ["CABB48", "Turmeric"], ["CADCD4", "Paris White"], ["CAE00D", "Bitter Lemon"], ["CAE6DA", "Skeptic"], ["CB8FA9", "Viola"], ["CBCAB6", "Foggy Gray"], ["CBD3B0", "Green Mist"], ["CBDBD6", "Nebula"], ["CC3333", "Persian Red"], ["CC5500", "Burnt Orange"], ["CC7722", "Ochre"], ["CC8899", "Puce"], ["CCCAA8", "Thistle Green"], ["CCCCFF", "Periwinkle"], ["CCFF00", "Electric Lime"], ["CD5700", "Tenn"], ["CD5C5C", "Chestnut Rose"], ["CD8429", "Brandy Punch"], ["CDF4FF", "Onahau"], ["CEB98F", "Sorrell Brown"], ["CEBABA", "Cold Turkey"], ["CEC291", "Yuma"], ["CEC7A7", "Chino"], ["CFA39D", "Eunry"], ["CFB53B", "Old Gold"], ["CFDCCF", "Tasman"], ["CFE5D2", "Surf Crest"], ["CFF9F3", "Humming Bird"], ["CFFAF4", "Scandal"], ["D05F04", "Red Stage"], ["D06DA1", "Hopbush"], ["D07D12", "Meteor"], ["D0BEF8", "Perfume"], ["D0C0E5", "Prelude"], ["D0F0C0", "Tea Green"], ["D18F1B", "Geebung"], ["D1BEA8", "Vanilla"], ["D1C6B4", "Soft Amber"], ["D1D2CA", "Celeste"], ["D1D2DD", "Mischka"], ["D1E231", "Pear"], ["D2691E", "Hot Cinnamon"], ["D27D46", "Raw Sienna"], ["D29EAA", "Careys Pink"], ["D2B48C", "Tan"], ["D2DA97", "Deco"], ["D2F6DE", "Blue Romance"], ["D2F8B0", "Gossip"], ["D3CBBA", "Sisal"], ["D3CDC5", "Swirl"], ["D47494", "Charm"], ["D4B6AF", "Clam Shell"], ["D4BF8D", "Straw"], ["D4C4A8", "Akaroa"], ["D4CD16", "Bird Flower"], ["D4D7D9", "Iron"], ["D4DFE2", "Geyser"], ["D4E2FC", "Hawkes Blue"], ["D54600", "Grenadier"], ["D591A4", "Can Can"], ["D59A6F", "Whiskey"], ["D5D195", "Winter Hazel"], ["D5F6E3", "Granny Apple"], ["D69188", "My Pink"], ["D6C562", "Tacha"], ["D6CEF6", "Moon Raker"], ["D6D6D1", "Quill Gray"], ["D6FFDB", "Snowy Mint"], ["D7837F", "New York Pink"], ["D7C498", "Pavlova"], ["D7D0FF", "Fog"], ["D84437", "Valencia"], ["D87C63", "Japonica"], ["D8BFD8", "Thistle"], ["D8C2D5", "Maverick"], ["D8FCFA", "Foam"], ["D94972", "Cabaret"], ["D99376", "Burning Sand"], ["D9B99B", "Cameo"], ["D9D6CF", "Timberwolf"], ["D9DCC1", "Tana"], ["D9E4F5", "Link Water"], ["D9F7FF", "Mabel"], ["DA3287", "Cerise"], ["DA5B38", "Flame Pea"], ["DA6304", "Bamboo"], ["DA6A41", "Red Damask"], ["DA70D6", "Orchid"], ["DA8A67", "Copperfield"], ["DAA520", "Golden Grass"], ["DAECD6", "Zanah"], ["DAF4F0", "Iceberg"], ["DAFAFF", "Oyster Bay"], ["DB5079", "Cranberry"], ["DB9690", "Petite Orchid"], ["DB995E", "Di Serria"], ["DBDBDB", "Alto"], ["DBFFF8", "Frosted Mint"], ["DC143C", "Crimson"], ["DC4333", "Punch"], ["DCB20C", "Galliano"], ["DCB4BC", "Blossom"], ["DCD747", "Wattle"], ["DCD9D2", "Westar"], ["DCDDCC", "Moon Mist"], ["DCEDB4", "Caper"], ["DCF0EA", "Swans Down"], ["DDD6D5", "Swiss Coffee"], ["DDF9F1", "White Ice"], ["DE3163", "Cerise Red"], ["DE6360", "Roman"], ["DEA681", "Tumbleweed"], ["DEBA13", "Gold Tips"], ["DEC196", "Brandy"], ["DECBC6", "Wafer"], ["DED4A4", "Sapling"], ["DED717", "Barberry"], ["DEE5C0", "Beryl Green"], ["DEF5FF", "Pattens Blue"], ["DF73FF", "Heliotrope"], ["DFBE6F", "Apache"], ["DFCD6F", "Chenin"], ["DFCFDB", "Lola"], ["DFECDA", "Willow Brook"], ["DFFF00", "Chartreuse Yellow"], ["E0B0FF", "Mauve"], ["E0B646", "Anzac"], ["E0B974", "Harvest Gold"], ["E0C095", "Calico"], ["E0FFFF", "Baby Blue"], ["E16865", "Sunglo"], ["E1BC64", "Equator"], ["E1C0C8", "Pink Flare"], ["E1E6D6", "Periglacial Blue"], ["E1EAD4", "Kidnapper"], ["E1F6E8", "Tara"], ["E25465", "Mandy"], ["E2725B", "Terracotta"], ["E28913", "Golden Bell"], ["E292C0", "Shocking"], ["E29418", "Dixie"], ["E29CD2", "Light Orchid"], ["E2D8ED", "Snuff"], ["E2EBED", "Mystic"], ["E2F3EC", "Apple Green"], ["E30B5C", "Razzmatazz"], ["E32636", "Alizarin Crimson"], ["E34234", "Cinnabar"], ["E3BEBE", "Cavern Pink"], ["E3F5E1", "Peppermint"], ["E3F988", "Mindaro"], ["E47698", "Deep Blush"], ["E49B0F", "Gamboge"], ["E4C2D5", "Melanie"], ["E4CFDE", "Twilight"], ["E4D1C0", "Bone"], ["E4D422", "Sunflower"], ["E4D5B7", "Grain Brown"], ["E4D69B", "Zombie"], ["E4F6E7", "Frostee"], ["E4FFD1", "Snow Flurry"], ["E52B50", "Amaranth"], ["E5841B", "Zest"], ["E5CCC9", "Dust Storm"], ["E5D7BD", "Stark White"], ["E5D8AF", "Hampton"], ["E5E0E1", "Bon Jour"], ["E5E5E5", "Mercury"], ["E5F9F6", "Polar"], ["E64E03", "Trinidad"], ["E6BE8A", "Gold Sand"], ["E6BEA5", "Cashmere"], ["E6D7B9", "Double Spanish White"], ["E6E4D4", "Satin Linen"], ["E6F2EA", "Harp"], ["E6F8F3", "Off Green"], ["E6FFE9", "Hint of Green"], ["E6FFFF", "Tranquil"], ["E77200", "Mango Tango"], ["E7730A", "Christine"], ["E79F8C", "Tonys Pink"], ["E79FC4", "Kobi"], ["E7BCB4", "Rose Fog"], ["E7BF05", "Corn"], ["E7CD8C", "Putty"], ["E7ECE6", "Gray Nurse"], ["E7F8FF", "Lily White"], ["E7FEFF", "Bubbles"], ["E89928", "Fire Bush"], ["E8B9B3", "Shilo"], ["E8E0D5", "Pearl Bush"], ["E8EBE0", "Green White"], ["E8F1D4", "Chrome White"], ["E8F2EB", "Gin"], ["E8F5F2", "Aqua Squeeze"], ["E96E00", "Clementine"], ["E97451", "Burnt Sienna"], ["E97C07", "Tahiti Gold"], ["E9CECD", "Oyster Pink"], ["E9D75A", "Confetti"], ["E9E3E3", "Ebb"], ["E9F8ED", "Ottoman"], ["E9FFFD", "Clear Day"], ["EA88A8", "Carissma"], ["EAAE69", "Porsche"], ["EAB33B", "Tulip Tree"], ["EAC674", "Rob Roy"], ["EADAB8", "Raffia"], ["EAE8D4", "White Rock"], ["EAF6EE", "Panache"], ["EAF6FF", "Solitude"], ["EAF9F5", "Aqua Spring"], ["EAFFFE", "Dew"], ["EB9373", "Apricot"], ["EBC2AF", "Zinnwaldite"], ["ECA927", "Fuel Yellow"], ["ECC54E", "Ronchi"], ["ECC7EE", "French Lilac"], ["ECCDB9", "Just Right"], ["ECE090", "Wild Rice"], ["ECEBBD", "Fall Green"], ["ECEBCE", "Aths Special"], ["ECF245", "Starship"], ["ED0A3F", "Red Ribbon"], ["ED7A1C", "Tango"], ["ED9121", "Carrot Orange"], ["ED989E", "Sea Pink"], ["EDB381", "Tacao"], ["EDC9AF", "Desert Sand"], ["EDCDAB", "Pancho"], ["EDDCB1", "Chamois"], ["EDEA99", "Primrose"], ["EDF5DD", "Frost"], ["EDF5F5", "Aqua Haze"], ["EDF6FF", "Zumthor"], ["EDF9F1", "Narvik"], ["EDFC84", "Honeysuckle"], ["EE82EE", "Lavender Magenta"], ["EEC1BE", "Beauty Bush"], ["EED794", "Chalky"], ["EED9C4", "Almond"], ["EEDC82", "Flax"], ["EEDEDA", "Bizarre"], ["EEE3AD", "Double Colonial White"], ["EEEEE8", "Cararra"], ["EEEF78", "Manz"], ["EEF0C8", "Tahuna Sands"], ["EEF0F3", "Athens Gray"], ["EEF3C3", "Tusk"], ["EEF4DE", "Loafer"], ["EEF6F7", "Catskill White"], ["EEFDFF", "Twilight Blue"], ["EEFF9A", "Jonquil"], ["EEFFE2", "Rice Flower"], ["EF863F", "Jaffa"], ["EFEFEF", "Gallery"], ["EFF2F3", "Porcelain"], ["F091A9", "Mauvelous"], ["F0D52D", "Golden Dream"], ["F0DB7D", "Golden Sand"], ["F0DC82", "Buff"], ["F0E2EC", "Prim"], ["F0E68C", "Khaki"], ["F0EEFD", "Selago"], ["F0EEFF", "Titan White"], ["F0F8FF", "Alice Blue"], ["F0FCEA", "Feta"], ["F18200", "Gold Drop"], ["F19BAB", "Wewak"], ["F1E788", "Sahara Sand"], ["F1E9D2", "Parchment"], ["F1E9FF", "Blue Chalk"], ["F1EEC1", "Mint Julep"], ["F1F1F1", "Seashell"], ["F1F7F2", "Saltpan"], ["F1FFAD", "Tidal"], ["F1FFC8", "Chiffon"], ["F2552A", "Flamingo"], ["F28500", "Tangerine"], ["F2C3B2", "Mandys Pink"], ["F2F2F2", "Concrete"], ["F2FAFA", "Black Squeeze"], ["F34723", "Pomegranate"], ["F3AD16", "Buttercup"], ["F3D69D", "New Orleans"], ["F3D9DF", "Vanilla Ice"], ["F3E7BB", "Sidecar"], ["F3E9E5", "Dawn Pink"], ["F3EDCF", "Wheatfield"], ["F3FB62", "Canary"], ["F3FBD4", "Orinoco"], ["F3FFD8", "Carla"], ["F400A1", "Hollywood Cerise"], ["F4A460", "Sandy brown"], ["F4C430", "Saffron"], ["F4D81C", "Ripe Lemon"], ["F4EBD3", "Janna"], ["F4F2EE", "Pampas"], ["F4F4F4", "Wild Sand"], ["F4F8FF", "Zircon"], ["F57584", "Froly"], ["F5C85C", "Cream Can"], ["F5C999", "Manhattan"], ["F5D5A0", "Maize"], ["F5DEB3", "Wheat"], ["F5E7A2", "Sandwisp"], ["F5E7E2", "Pot Pourri"], ["F5E9D3", "Albescent White"], ["F5EDEF", "Soft Peach"], ["F5F3E5", "Ecru White"], ["F5F5DC", "Beige"], ["F5FB3D", "Golden Fizz"], ["F5FFBE", "Australian Mint"], ["F64A8A", "French Rose"], ["F653A6", "Brilliant Rose"], ["F6A4C9", "Illusion"], ["F6F0E6", "Merino"], ["F6F7F7", "Black Haze"], ["F6FFDC", "Spring Sun"], ["F7468A", "Violet Red"], ["F77703", "Chilean Fire"], ["F77FBE", "Persian Pink"], ["F7B668", "Rajah"], ["F7C8DA", "Azalea"], ["F7DBE6", "We Peep"], ["F7F2E1", "Quarter Spanish White"], ["F7F5FA", "Whisper"], ["F7FAF7", "Snow Drift"], ["F8B853", "Casablanca"], ["F8C3DF", "Chantilly"], ["F8D9E9", "Cherub"], ["F8DB9D", "Marzipan"], ["F8DD5C", "Energy Yellow"], ["F8E4BF", "Givry"], ["F8F0E8", "White Linen"], ["F8F4FF", "Magnolia"], ["F8F6F1", "Spring Wood"], ["F8F7DC", "Coconut Cream"], ["F8F7FC", "White Lilac"], ["F8F8F7", "Desert Storm"], ["F8F99C", "Texas"], ["F8FACD", "Corn Field"], ["F8FDD3", "Mimosa"], ["F95A61", "Carnation"], ["F9BF58", "Saffron Mango"], ["F9E0ED", "Carousel Pink"], ["F9E4BC", "Dairy Cream"], ["F9E663", "Portica"], ["F9EAF3", "Amour"], ["F9F8E4", "Rum Swizzle"], ["F9FF8B", "Dolly"], ["F9FFF6", "Sugar Cane"], ["FA7814", "Ecstasy"], ["FA9D5A", "Tan Hide"], ["FAD3A2", "Corvette"], ["FADFAD", "Peach Yellow"], ["FAE600", "Turbo"], ["FAEAB9", "Astra"], ["FAECCC", "Champagne"], ["FAF0E6", "Linen"], ["FAF3F0", "Fantasy"], ["FAF7D6", "Citrine White"], ["FAFAFA", "Alabaster"], ["FAFDE4", "Hint of Yellow"], ["FAFFA4", "Milan"], ["FB607F", "Brink Pink"], ["FB8989", "Geraldine"], ["FBA0E3", "Lavender Rose"], ["FBA129", "Sea Buckthorn"], ["FBAC13", "Sun"], ["FBAED2", "Lavender Pink"], ["FBB2A3", "Rose Bud"], ["FBBEDA", "Cupid"], ["FBCCE7", "Classic Rose"], ["FBCEB1", "Apricot Peach"], ["FBE7B2", "Banana Mania"], ["FBE870", "Marigold Yellow"], ["FBE96C", "Festival"], ["FBEA8C", "Sweet Corn"], ["FBEC5D", "Candy Corn"], ["FBF9F9", "Hint of Red"], ["FBFFBA", "Shalimar"], ["FC0FC0", "Shocking Pink"], ["FC80A5", "Tickle Me Pink"], ["FC9C1D", "Tree Poppy"], ["FCC01E", "Lightning Yellow"], ["FCD667", "Goldenrod"], ["FCD917", "Candlelight"], ["FCDA98", "Cherokee"], ["FCF4D0", "Double Pearl Lusta"], ["FCF4DC", "Pearl Lusta"], ["FCF8F7", "Vista White"], ["FCFBF3", "Bianca"], ["FCFEDA", "Moon Glow"], ["FCFFE7", "China Ivory"], ["FCFFF9", "Ceramic"], ["FD0E35", "Torch Red"], ["FD5B78", "Wild Watermelon"], ["FD7B33", "Crusta"], ["FD7C07", "Sorbus"], ["FD9FA2", "Sweet Pink"], ["FDD5B1", "Light Apricot"], ["FDD7E4", "Pig Pink"], ["FDE1DC", "Cinderella"], ["FDE295", "Golden Glow"], ["FDE910", "Lemon"], ["FDF5E6", "Old Lace"], ["FDF6D3", "Half Colonial White"], ["FDF7AD", "Drover"], ["FDFEB8", "Pale Prim"], ["FDFFD5", "Cumulus"], ["FE28A2", "Persian Rose"], ["FE4C40", "Sunset Orange"], ["FE6F5E", "Bittersweet"], ["FE9D04", "California"], ["FEA904", "Yellow Sea"], ["FEBAAD", "Melon"], ["FED33C", "Bright Sun"], ["FED85D", "Dandelion"], ["FEDB8D", "Salomie"], ["FEE5AC", "Cape Honey"], ["FEEBF3", "Remy"], ["FEEFCE", "Oasis"], ["FEF0EC", "Bridesmaid"], ["FEF2C7", "Beeswax"], ["FEF3D8", "Bleach White"], ["FEF4CC", "Pipi"], ["FEF4DB", "Half Spanish White"], ["FEF4F8", "Wisp Pink"], ["FEF5F1", "Provincial Pink"], ["FEF7DE", "Half Dutch White"], ["FEF8E2", "Solitaire"], ["FEF8FF", "White Pointer"], ["FEF9E3", "Off Yellow"], ["FEFCED", "Orange White"], ["FF0000", "Red"], ["FF007F", "Rose"], ["FF00CC", "Purple Pizzazz"], ["FF00FF", "Magenta / Fuchsia"], ["FF2400", "Scarlet"], ["FF3399", "Wild Strawberry"], ["FF33CC", "Razzle Dazzle Rose"], ["FF355E", "Radical Red"], ["FF3F34", "Red Orange"], ["FF4040", "Coral Red"], ["FF4D00", "Vermilion"], ["FF4F00", "International Orange"], ["FF6037", "Outrageous Orange"], ["FF6600", "Blaze Orange"], ["FF66FF", "Pink Flamingo"], ["FF681F", "Orange"], ["FF69B4", "Hot Pink"], ["FF6B53", "Persimmon"], ["FF6FFF", "Blush Pink"], ["FF7034", "Burning Orange"], ["FF7518", "Pumpkin"], ["FF7D07", "Flamenco"], ["FF7F00", "Flush Orange"], ["FF7F50", "Coral"], ["FF8C69", "Salmon"], ["FF9000", "Pizazz"], ["FF910F", "West Side"], ["FF91A4", "Pink Salmon"], ["FF9933", "Neon Carrot"], ["FF9966", "Atomic Tangerine"], ["FF9980", "Vivid Tangerine"], ["FF9E2C", "Sunshade"], ["FFA000", "Orange Peel"], ["FFA194", "Mona Lisa"], ["FFA500", "Web Orange"], ["FFA6C9", "Carnation Pink"], ["FFAB81", "Hit Pink"], ["FFAE42", "Yellow Orange"], ["FFB0AC", "Cornflower Lilac"], ["FFB1B3", "Sundown"], ["FFB31F", "My Sin"], ["FFB555", "Texas Rose"], ["FFB7D5", "Cotton Candy"], ["FFB97B", "Macaroni and Cheese"], ["FFBA00", "Selective Yellow"], ["FFBD5F", "Koromiko"], ["FFBF00", "Amber"], ["FFC0A8", "Wax Flower"], ["FFC0CB", "Pink"], ["FFC3C0", "Your Pink"], ["FFC901", "Supernova"], ["FFCBA4", "Flesh"], ["FFCC33", "Sunglow"], ["FFCC5C", "Golden Tainoi"], ["FFCC99", "Peach Orange"], ["FFCD8C", "Chardonnay"], ["FFD1DC", "Pastel Pink"], ["FFD2B7", "Romantic"], ["FFD38C", "Grandis"], ["FFD700", "Gold"], ["FFD800", "School bus Yellow"], ["FFD8D9", "Cosmos"], ["FFDB58", "Mustard"], ["FFDCD6", "Peach Schnapps"], ["FFDDAF", "Caramel"], ["FFDDCD", "Tuft Bush"], ["FFDDCF", "Watusi"], ["FFDDF4", "Pink Lace"], ["FFDEAD", "Navajo White"], ["FFDEB3", "Frangipani"], ["FFE1DF", "Pippin"], ["FFE1F2", "Pale Rose"], ["FFE2C5", "Negroni"], ["FFE5A0", "Cream Brulee"], ["FFE5B4", "Peach"], ["FFE6C7", "Tequila"], ["FFE772", "Kournikova"], ["FFEAC8", "Sandy Beach"], ["FFEAD4", "Karry"], ["FFEC13", "Broom"], ["FFEDBC", "Colonial White"], ["FFEED8", "Derby"], ["FFEFA1", "Vis Vis"], ["FFEFC1", "Egg White"], ["FFEFD5", "Papaya Whip"], ["FFEFEC", "Fair Pink"], ["FFF0DB", "Peach Cream"], ["FFF0F5", "Lavender blush"], ["FFF14F", "Gorse"], ["FFF1B5", "Buttermilk"], ["FFF1D8", "Pink Lady"], ["FFF1EE", "Forget Me Not"], ["FFF1F9", "Tutu"], ["FFF39D", "Picasso"], ["FFF3F1", "Chardon"], ["FFF46E", "Paris Daisy"], ["FFF4CE", "Barley White"], ["FFF4DD", "Egg Sour"], ["FFF4E0", "Sazerac"], ["FFF4E8", "Serenade"], ["FFF4F3", "Chablis"], ["FFF5EE", "Seashell Peach"], ["FFF5F3", "Sauvignon"], ["FFF6D4", "Milk Punch"], ["FFF6DF", "Varden"], ["FFF6F5", "Rose White"], ["FFF8D1", "Baja White"], ["FFF9E2", "Gin Fizz"], ["FFF9E6", "Early Dawn"], ["FFFACD", "Lemon Chiffon"], ["FFFAF4", "Bridal Heath"], ["FFFBDC", "Scotch Mist"], ["FFFBF9", "Soapstone"], ["FFFC99", "Witch Haze"], ["FFFCEA", "Buttery White"], ["FFFCEE", "Island Spice"], ["FFFDD0", "Cream"], ["FFFDE6", "Chilean Heath"], ["FFFDE8", "Travertine"], ["FFFDF3", "Orchid White"], ["FFFDF4", "Quarter Pearl Lusta"], ["FFFEE1", "Half and Half"], ["FFFEEC", "Apricot White"], ["FFFEF0", "Rice Cake"], ["FFFEF6", "Black White"], ["FFFEFD", "Romance"], ["FFFF00", "Yellow"], ["FFFF66", "Laser Lemon"], ["FFFF99", "Pale Canary"], ["FFFFB4", "Portafino"], ["FFFFF0", "Ivory"], ["FFFFFF", "White"]];
        const o = ()=>{
            for (var e, t, i, o = 0; o < n.length; o++)
                e = "#" + n[o][0],
                t = a(e),
                i = r(e),
                n[o].push(t[0], t[1], t[2], i[0], i[1], i[2])
        }
          , r = e=>{
            var t, i, n, o, r, a, s = [parseInt("0x" + e.substring(1, 3)) / 255, parseInt("0x" + e.substring(3, 5)) / 255, parseInt("0x" + e.substring(5, 7)) / 255], l = s[0], c = s[1], d = s[2];
            return t = Math.min(l, Math.min(c, d)),
            i = Math.max(l, Math.max(c, d)),
            n = i - t,
            a = (t + i) / 2,
            r = 0,
            a > 0 && a < 1 && (r = n / (a < .5 ? 2 * a : 2 - 2 * a)),
            o = 0,
            n > 0 && (i == l && i != c && (o += (c - d) / n),
            i == c && i != d && (o += 2 + (d - l) / n),
            i == d && i != l && (o += 4 + (l - c) / n),
            o /= 6),
            [parseInt(255 * o), parseInt(255 * r), parseInt(255 * a)]
        }
          , a = e=>[parseInt("0x" + e.substring(1, 3)), parseInt("0x" + e.substring(3, 5)), parseInt("0x" + e.substring(5, 7))]
          , s = e=>{
            if (o(),
            e = e.toUpperCase(),
            e.length < 3 || e.length > 7)
                return ["#000000", "Invalid Color: " + e, !1];
            e.length % 3 == 0 && (e = "#" + e),
            4 == e.length && (e = "#" + e.substr(1, 1) + e.substr(1, 1) + e.substr(2, 1) + e.substr(2, 1) + e.substr(3, 1) + e.substr(3, 1));
            for (var t = a(e), i = t[0], s = t[1], l = t[2], c = r(e), d = c[0], u = c[1], p = c[2], h = 0, m = 0, g = 0, f = -1, v = -1, b = 0; b < n.length; b++) {
                if (e == "#" + n[b][0])
                    return ["#" + n[b][0], n[b][1], !0];
                h = Math.pow(i - n[b][2], 2) + Math.pow(s - n[b][3], 2) + Math.pow(l - n[b][4], 2),
                m = Math.pow(d - n[b][5], 2) + Math.pow(u - n[b][6], 2) + Math.pow(p - n[b][7], 2),
                g = h + 2 * m,
                (v < 0 || v > g) && (v = g,
                f = b)
            }
            return f < 0 ? ["#000000", "Invalid Color: " + e, !1] : ["#" + n[f][0], n[f][1], !1]
        }
        ;
        (function() {
            function e(e) {
                function t(t) {
                    var i = {
                        sourceId: t
                    };
                    return e.post("/Libraries?" + $.param(i))
                }
                function i(t, i, n) {
                    var o = {
                        name: t,
                        colorMode: i,
                        type: n
                    };
                    return e.post("/Libraries?" + $.param(o))
                }
                function n(t) {
                    return e.get("/Libraries/" + t)
                }
                function o(t, i, n, o) {
                    var r = {
                        searchString: t,
                        from: i,
                        num: n,
                        type: o
                    };
                    return e.get("/Libraries?" + $.param(r))
                }
                function r(t, i) {
                    var n = {
                        searchString: t,
                        type: i
                    };
                    return e.get("/Libraries/Count?" + $.param(n))
                }
                function a(t) {
                    return e.get("/Libraries/" + t + "/Elements/Count")
                }
                function l(t) {
                    return e.get("/Libraries/" + t + "/Elements/Position/Last")
                }
                function c(t, i, n, o) {
                    var r = {
                        searchString: t,
                        from: i,
                        num: n
                    };
                    return e.get("/Libraries/" + o + "/Elements?" + $.param(r))
                }
                function d(t, i) {
                    return e.get("/Libraries/" + t + "/Elements/Position/" + i + "/Private")
                }
                function u(t) {
                    return e.get("/Libraries/" + t + "/Categories/Count")
                }
                function p(t, i, n, o) {
                    var r = {
                        searchString: t,
                        from: i,
                        count: n
                    };
                    return e.get("/Libraries/" + o + "/Categories?" + $.param(r))
                }
                function h(t, i) {
                    return e.get("/Libraries/" + t + "/Categories/" + i + "/Elements/Count")
                }
                function m(t, i, n, o, r) {
                    var a = {
                        searchString: t,
                        from: i,
                        count: n
                    };
                    return e.get("/Libraries/" + o + "/Categories/" + r + "/Elements/Private?" + $.param(a))
                }
                function g(t) {
                    return e.delete("/Libraries/" + t)
                }
                function f(t, i) {
                    var n = {
                        name: i
                    };
                    return e.put("/Libraries/" + t + "?" + $.param(n))
                }
                function v(t, i, n, o, r=null) {
                    r || (r = "color" === o.toLowerCase() ? s(n.hex)[1] : "My " + o + " " + i);
                    const a = {
                        element: JSON.stringify(n),
                        position: i,
                        type: o,
                        name: r
                    };
                    return e.post("/Libraries/" + t + "?" + $.param(a))
                }
                function b(t, i, n, o) {
                    var r = {
                        element: JSON.stringify(n),
                        type: o
                    };
                    return e.put("/Libraries/" + t + "/" + i + "?" + $.param(r))
                }
                function y(t, i) {
                    return e.delete("/Libraries/" + t + "/" + i)
                }
                function w(t, i) {
                    return e.get("/Libraries/" + t + "/Categories/" + i)
                }
                function C(t, i) {
                    var n = {
                        category: JSON.stringify(i)
                    };
                    return e.post("/Libraries/" + t + "/Categories?" + $.param(n))
                }
                function x(t, i, n) {
                    var o = {
                        category: JSON.stringify(n)
                    };
                    return e.put("/Libraries/" + t + "/Categories/" + i + "?" + $.param(o))
                }
                function S(t, i) {
                    return e.delete("/Libraries/" + t + "/Categories/" + i)
                }
                function P(t) {
                    return e.get("/Libraries/" + t + "/Name")
                }
                return {
                    createLibrary: i,
                    cloneLibrary: t,
                    addElement: v,
                    addCategory: C,
                    getLibrary: n,
                    getLibraries: o,
                    getLibrariesCount: r,
                    getLibraryElementsCount: a,
                    getLibraryElements: c,
                    getLibraryElementAtPosition: d,
                    getLibraryElementsLastPosition: l,
                    getCategory: w,
                    getLibraryCategoriesCount: u,
                    getLibraryCategories: p,
                    getElementsByCategoryCount: h,
                    getElementsByCategory: m,
                    getLibraryName: P,
                    deleteLibrary: g,
                    deleteElement: y,
                    deleteCategory: S,
                    editLibrary: f,
                    updateElement: b,
                    updateCategory: x
                }
            }
            e.$inject = ["HttpService"],
            angular.module("app.shared.services").factory("LibrariesAPIService", e)
        }
        )()
    },
    "992f": function(e, t, i) {
        e.exports = i.p + "img/print-area.6dc5ea02.svg?x-request=html"
    },
    9960: function(e, t) {
        (function(e, t) {
            "use strict";
            var i = '^app alpha-bg-w">^slds">^sldl-1">$^sldl-2">$^sldl-3">$^curm">$^sldr-1">$^sldr-2">$^sldr-4">$^curl">$^curr">$$^opacity">|^opacity-slider">$$$^memo">^raster">$^raster-bg">$|$|$|$|$|$|$|$|$^memo-store">$^memo-cursor">$$^panel">^hsv">^hsl-mode ">$^hsv-h- ">H$^hsv-h-~ ~">-^nsarrow">$$^hsl-h-@ @">H$^hsv-s- ">S$^hsv-s-~ ~">-$^hsl-s-@ @">S$^hsv-v- ">B$^hsv-v-~ ~">-$^hsl-l-@ @">L$$^hsl hide">^hsv-mode ">$^hsl-h- ">H$^hsl-h-~ ~">-$^hsv-h-@ @">H$^hsl-s- ">S$^hsl-s-~ ~">-$^hsv-s-@ @">S$^hsl-l- ">L$^hsl-l-~ ~">-$^hsv-v-@ @">B$$^rgb">^rgb-r- ">R$^rgb-r-~ ~">-$^rgb-r-@ ">&nbsp;$^rgb-g- ">G$^rgb-g-~ ~">-$^rgb-g-@ ">&nbsp;$^rgb-b- ">B$^rgb-b-~ ~">-$^rgb-b-@ ">&nbsp;$$^cmyk">^Lab-mode ">$^cmyk-c- @">C$^cmyk-c-~ ~">-$^Lab-L-@ @">L$^cmyk-m- @">M$^cmyk-m-~ ~">-$^Lab-a-@ @">a$^cmyk-y- @">Y$^cmyk-y-~ ~">-$^Lab-b-@ @">b$^cmyk-k- @">K$^cmyk-k-~ ~">-$^Lab-x-@ ">&nbsp;$$^Lab hide">^cmyk-mode ">$^Lab-L- @">L$^Lab-L-~ ~">-$^cmyk-c-@ @">C$^Lab-a- @">a$^Lab-a-~ ~">-$^cmyk-m-@ @">M$^Lab-b- @">b$^Lab-b-~ ~">-$^cmyk-y-@ @">Y$^Lab-x- @">&nbsp;$^Lab-x-~ ~">-$^cmyk-k-@ @">K$$^alpha">^alpha- ">A$^alpha-~ ~">-$^alpha-@ ">W$$^HEX">^HEX- ">#$^HEX-~ ~">-$^HEX-@ ">M$$^ctrl">^raster">$^cont">$^cold">$^col1">|&nbsp;$$^col2">|&nbsp;$$^bres">RESET$^bsav">SAVE$$$^exit">$^resize">$^resizer">|$$$'.replace(/\^/g, '<div class="').replace(/\$/g, "</div>").replace(/~/g, "disp").replace(//g, "butt").replace(/@/g, "labl").replace(/\|/g, "<div>")
              , n = "r^1,g^1,b^1,h^1,h?1,h?2,s?1,v?1,h^1,h?1,h?2,s?1,l?1,.no-rgb-r r?2,.no-rgb-r r?3,.no-rgb-r r?4,.no-rgb-g g?2,.no-rgb-g g?3,.no-rgb-g g?4,.no-rgb-b b?2,.no-rgb-b b?3,.no-rgb-b b?4{visibility:hidden}r^2,r^3,g^2,g^3,b^2,b^3{@-image:url(_patches.png)}.slds div{@-image:url(_vertical.png)}h^2,s^1,v^1,h^2,s^1,l^1{@-image:url(_horizontal.png)}s?4,v^3,s?4,l^3{@:#000}s?3,l^4{@:#fff}r?1{@-color:#f00}g?1{@-color:#0f0}b?1{@-color:#00f}r^2{@|-1664px 0}r^3{@|-896px 0}r?1,g?1,b?1,h^3,s^2,v?2-2432r?2-2944r?3-4480r?4-3202g^2h^2{@|-640px 0}g^3{@|-384px 0}g?2-4736g?3-3968g?4-3712b^2{@|-1152px 0}b^3{@|-1408px 0}b?2-3456b?3-4224b?4-2688h^2r^3b?40}h?4,h?4-1664s^1,v^1,s^1,l^1g^3{@|-256px 0}s^3,v?4,s^3,l?4-2176s?2,v^2-1920h^2{@|-768px 0}h^3,s^2,l?2-5184s?2,l^2-5824.S r^2{@|-128px -128.S r?1g?1b?1h^3s^2v?2-1408.S r?2b^3-128.S r?3-896.S r?4-256.S g^2{@|-256px -128.S g?2-1024.S g?3-640.S g?4-512.S b^2{@|-128px 0}.S b?2-384.S b?3-768.S h?4h?4-1536.S s^1v^1s^1l^1{@|-512px 0}.S s^3v?4s^3l?4-1280.S s?2v^2-1152.S h^2{@|-1024px 0}.S h^3s^2l?2-5440.S s?2l^2-5696.XXS s^2,.XXS v?2-5120.XXS s^3,.XXS v?4,.XXS s^3,.XXS l^3,.XXS l?4-5056.XXS s?2,.XXS v^2-4992.XXS s^2,.XXS l?2-5568.XXS s?2,.XXS l^2-5632".replace(//g, "{@|0 ").replace(//g, "px}").replace(//g, ",.S ").replace(/\|/g, "-position:").replace(/@/g, "background").replace(//g, ".hsl-").replace(//g, ".hsv-").replace(//g, ".rgb-").replace(/~/g, " .no-rgb-}").replace(/\?/g, " .sldr-").replace(/\^/g, " .sldl-")
              , o = '{@#bbb;font-family:monospace, "Courier New", Courier, mono;font-size:12line-15font-weight:bold;cursor:default;~412323?top-left-radius:7?top--radius:7?bottom--radius:7?bottom-left-radius:7@#444}.S{~266177px}.XS{~158173px}.XXS{105~154px}.no-alpha{308px}.no-alpha .opacity,.no-alpha .alpha{display:none}.S.no-alpha{162px}.XS.no-alpha{158px}.XXS.no-alpha{90px}, div{border:none;padding:0float:none;margin:0outline:none;box-sizing:content-box} div{|absolute}^s .curm,disp,nsarrow, .exit, -cursor, .resize{image:url(_icons.png)} .do-drag div{cursor:none} .opacity, .raster-bg, .raster{image:url(_bgs.png)} ^s{~287256top:10left:10overflow:hidden;cursor:crosshair}.S ^s{~143128left:9top:9px}.XS ^s{left:7top:7px}.XXS ^s{left:5top:5px}^s div{~256256left:0px}.S ^l-1,.S ^l-2,.S ^l-3,.S ^l-4{~128128px}.XXS ^s,.XXS ^s ^l-1,.XXS ^s ^l-2,.XXS ^s ^l-3,.XXS ^s ^l-4{64px}^s ^r-1,^s ^r-2,^s ^r-3,^s ^r-4{~31left:256cursor:default}.S ^r-1,.S ^r-2,.S ^r-3,.S ^r-4{~15128left:128px}^s .curm{margin:-5~1111|-36px -30px}.light .curm{|-7px -30px}^s .curl,^s .curr{~00margin:-3px -4border:4px solid;cursor:default;left:auto;image:none}^s .curl, ^s .curl-dark,.hue-dark div.curl{:27?@   #fff}.light .curl, ^s .curl-light,.hue-light .curl{?@   #000}.S ^s .curl,.S ^s .curr{?~3px}.S ^s .curl-light,.S ^s .curl{:13px}^s .curr, ^s .curr-dark{:4?@ #fff  }.light .curr, ^s .curr-light{?@ #000  } .opacity{bottom:44left:1010~287|0 -87px}.S .opacity{bottom:27left:9~143|0 -100px}.XS .opacity{left:7bottom:25px}.XXS .opacity{left:5bottom:23px}.opacity div{~100%;16margin-top:-3overflow:hidden}.opacity .opacity-slider{margin:0 -4~08?~4?style:solid;?@#eee } {bottom:10left:10~28831@#fff}.S {15~144left:9bottom:9px}.XS {left:7bottom:7px}.XXS {left:5bottom:5px} div{|relative;float:left;~3131margin-:1px}.S  div{~1515px} .raster, .raster-bg,.S  .raster,.S  .raster-bg{|absolute;top:0:0bottom:0left:0~100%}.S  .raster-bg{|0 -31px} .raster{opacity:0.2;|0 -49px}.alpha-bg-b {@#333}.alpha-bg-b .raster{opacity:1} -cursor{|absolute;:0|-26px -87px} .light -cursor{|3px -87px}.S -cursor{|-34px -95px}.S .light -cursor{|-5px -95px} .panel{|absolute;top:10:10bottom:10~94?~1?style:solid;?@#222 #555 #555 #222;overflow:hidden;@#333}.S .panel{top:9:9bottom:9px}.XS .panel{display:none}.panel div{|relative}hsv,hsl,rgb,cmyk,Lab,alpha,.no-alpha HEX,HEX{~86margin:-1px 0px 1px 4padding:1px 0px 3?top-~1?top-style:solid;?top-@#444;?bottom-~1?bottom-style:solid;?bottom-@#222;float:hsv,hsl{padding-top:2px}.S .hsv,.S .hsl{padding-top:1px}HEX{?bottom-style:none;?top-~0margin-top:-4padding-top:0px}.no-alpha HEX{?bottom-style:none}alpha{?bottom-style:none}.S .rgb-r .hsv,.S .rgb-g .hsv,.S .rgb-b .hsv,.S .rgb-r .hsl,.S .rgb-g .hsl,.S .rgb-b .hsl,.S .hsv-h .rgb,.S .hsv-s .rgb,.S .hsv-v .rgb,.S .hsl-h .rgb,.S .hsl-s .rgb,.S .hsl-l .rgb,.S .cmyk,.S .Lab{display:none}butt,labl{float:left;~1414margin-top:2text-align:center;border:1px solid}butt{?@#555 #222 #222 #555}butt:active{@#444}labl{?@}Lab-mode,cmyk-mode,hsv-mode,hsl-mode{|absolute;:0top:150px}hsv-mode,hsl-mode{top:2px}cmyk-mode{68px}.hsl-h .hsl-h-labl,.hsl-s .hsl-s-labl,.hsl-l .hsl-l-labl,.hsv-h .hsv-h-labl,.hsv-s .hsv-s-labl,.hsv-v .hsv-v-labl{@#f90}cmyk-mode,hsv-mode,.rgb-r .rgb-r-butt,.rgb-g .rgb-g-butt,.rgb-b .rgb-b-butt,.hsv-h .hsv-h-butt,.hsv-s .hsv-s-butt,.hsv-v .hsv-v-butt,.hsl-h .hsl-h-butt,.hsl-s .hsl-s-butt,.hsl-l .hsl-l-butt,rgb-r-labl,rgb-g-labl,rgb-b-labl,alpha-butt,HEX-butt,Lab-x-labl{?@#222 #555 #555 #222;@#444}.no-rgb-r .rgb-r-labl,.no-rgb-g .rgb-g-labl,.no-rgb-b .rgb-b-labl,.mute-alpha .alpha-butt,.no-HEX .HEX-butt,.cmy-only .Lab-x-labl{?@#555 #222 #222 #555;@#333}.Lab-x-disp,.cmy-only .cmyk-k-disp,.cmy-only .cmyk-k-butt{visibility:hidden}HEX-disp{image:none}disp{float:left;~4814margin:2px 2px 0cursor:text;text-align:left;text-indent:3?~1?style:solid;?@#222 #555 #555 #222} .nsarrow{|absolute;top:0left:-13~816display:none;|-87px -23px} .start-change .nsarrow{display:block} .do-change .nsarrow{display:block;|-87px -36px}.do-change .disp{cursor:default}hide{display:none}cont,cold{|absolute;top:-5left:03border:1px solid #333}cold{z-index:1;@#c00}cont{margin-:-1z-index:2}contrast .cont{z-index:1;@#ccc}orange .cold{@#f90}green .cold{@#4d0}ctrl{|absolute;bottom:0left:0~100%;@#fff}.alpha-bg-b .ctrl,bres,bsav{@#333}col1,col2,bres,bsav{?~1?style:solid;?@#555 #222 #222 #555;float:left;~45line-28text-align:center;top:0px}.panel div div{100%}.S .ctrl div{line-25px}.S bres,.S bsav{line-26px} .exit, .resize{:3top:3~1515|0 -52px} .resize{top:auto;bottom:3cursor:nwse-resize;|-15px -52px}.S .exit{|1px -52px}.XS .resize,.XS .exit{~1010:0image:none}.XS .exit{top:0px}.XS .resize{bottom:0px} .resizer, .resizer div{|absolute;border:1px solid #888;top:-1:-1bottom:-1left:-1z-index:2;display:none;cursor:nwse-resize} .resizer div{border:1px dashed #333;opacity:0.3;display:block;@#bbb}'.replace(//g, "right").replace(//g, "left}").replace(//g, ".app").replace(//g, ".panel .").replace(//g, "px;").replace(/\|/g, "position:").replace(/@/g, "color:").replace(//g, "background-").replace(//g, "height:").replace(//g, ".memo").replace(//g, "transparent").replace(/\~/g, "width:").replace(/\?/g, "border-").replace(/\^/g, ".sld")
              , r = "iVBORw0KGgoAAAANSUhEUgAABIAAAAABCAYAAACmC9U0AAABT0lEQVR4Xu2S3Y6CMBCFhyqIsjGBO1/B9/F5DC/pK3DHhVkUgc7Zqus2DVlGU/cnQZKTjznttNPJBABA149HyRf1iN//4mIBCg0jV4In+j9xJiuihly1V/Z9X88v//kNeDXVvyO/lK+IPR76B019+1Riab3H1zkmeqerKnL+Bzwxx6PAgZxaSQU8vB62T28pxcQeRQ2sHw6GxCOWHvP78zwHAARBABOfdYtd30rwxXOEPDF+dj2+91r6vV/id3k+/brrXmaGUkqKhX3i+ffSt16HQ/dorTGZTHrs7ev7Tl7XdZhOpzc651nfsm1bRFF0YRiGaJoGs9nsQuN/xafTCXEco65rzOdzHI9HJEmCqqqwXC6x3++RZRnKssRqtUJRFFiv19jtdthutyAi5Hl+Jo9VZg7+7f3yXuvZf5c3KaXYzByb+WIzO5ymKW82G/0BNcFhO/tOuuMAAAAASUVORK5CYII="
              , a = "iVBORw0KGgoAAAANSUhEUgAAAAEAABfACAYAAABn2KvYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABHtJREFUeNrtnN9SqzAQxpOF1to6zuiVvoI+j6/gva/lA/kKeqUzjtX+QTi7SzSYBg49xdIzfL34+e1usoQQklCnmLwoCjImNwDQA2xRGMqNAYB+gPEH9IdCgIUA6Aem0P1fLoMQAPYNHYDoCKAv8OMHFgKgX2AjDPQDXn4t1l+gt/1fId//yWgE/hUJ+mAn8EyY5wCwXxhrbaHzn8E9iPlv79DdHxXTqciZ4KROnXRVZMF/6U2OPhcEavtAbZH1SM7wRDD7VoHZItCiyEQf4t6+MW9UOxaZybmdCGKqNrB9Eb5SfMg3wTyiagMtigTmWofiSDCOYNTSNz6sLDIoaCU9GWDd0tdhoMMsRm+r8U/EfB0GfjmLXiqzimDd0tdhoLMsI7la45+I+ToM/HIW0kfGVQTrlr7tA91kaUr//fxrKo8jUFB7VAn6AKpHJf+EKwAAAIYD/f7F7/8MVgMo7P+gBqDKr57Lf72V8x8AAMDgYIuvH4EAAAAMDQX6AACAQcI9GGMjDADA4MA/P2KlP8IEAAAYFCz6AACAgaLA8y8AAIN+CMYXoQAADA7u/UPYCAMAMDjI7z9S+SdwDFQX2C9Gh9GMEOWriz8/Pw1lWQZsi/L3R4czzP678Ve+P8f9nCv/C7hwLq99ah8NfKrU15zPB5pVcwtiJt9qGy0IfEE+jQa+Fn0VtI/fkxUPqBlEfRENeF+tqUpbGpi1iu8epwJzvV5XA4GpWC6XGz7F+/u766EgwJ+ckiTJKU3TnI6OjnI6OzvLZf6zMggt3dzckPhIoiTlSGpQ+eEsVegdz0fbCCi4fRs+Po+4yWdeDXiT+6pBSTeHple1pkz3FZ+avpyavoiPxgLN0B7yprY08PlyQTTm0+PWmkH7ynedNKraar4F/lRj1WpTtYh+ozL/cY2sAvZl0gcbZm0gSLBLvkxGoaogiy/HDXemQk2t5pUm8OAhH8/HH6e0mkJ9q9XKKQXfb07xfZnJbZrRxcVFVt6/t7e3Kc1ms5RGo1Eq5VIZuyl9fHw4k/M5xYeoKj64A7eqCt1ZeqWFVSl8NV9OTV3fmvP5qE9VmzSoEcsXpArK1UHen/hZbgL53BZSdyEXalGau/hU8TEW0u3VcoFPy3EDFrTgT+njydeZ0+l0UV7fu7u7iVzziQQmUm4iqRw4n/NxMxw4s/Mp1NSALxf4NEtQ10cjMDwSl+b+/j6hp6enVGb+jUvrn05iKobm6PboOt8vPISY5Pr6OqGXlxe3fOokoGtAbMUJZmqvYmaLQDP+sdrecOjtO/SXeH69P8Imutm5urqy9PDwYOny8tLS4+OjpfPzc0vPz8+WTk9PLb2+vlpZbCzN53NLx8fHVtYZS5PJxMoEZWWqsjKULY3HYytTi1Pex5OMldXKRVXxuLcy/20onmms3BBOxcr5qCrZtsrd45SPel8sGlOxGoGy0neynQ6VL9fsa1YtWlCrtj9G83G7PjdVush5n5q1iJWLZW6u21a1bUvbVnVzlru0pe3RdmlV1/23fZtbZv4Dx+7FBypx77kAAAAASUVORK5CYII="
              , s = "iVBORw0KGgo^NSUhEUgAAB4^EACAI#DdoPxz#L0UlEQVR4Xu3cQWrDQBREwR7FF8/BPR3wXktnQL+KvxfypuEhvLJXcp06d/bXd71OPt+trIw95zr33Z1bk1/fudEv79wa++7OfayZ59wrO2PBzklcGQmAZggAAOBYgAYBmpWRAGg^BGgRofAENgAAN#I0CBA6w8AG^ECABgEa/QHAI0CNDoDwAY^QIAGAVp/AMAjQI0OgPAAY^QoEGARn8AwCNAjQ+gMABg#BCgQYCmGQmABgAAEKBBgEZ/AMAjQI0PoDAAY^QoEGARn8AM^IAADQI0+gMABg#BCgQYDWHwAw^gAANAjT6A4AB^BGgQoNEfAD^C#0CtP4AgAE^EaBCgaUYCoAE#RoEKDRHwAw^gAANArT+AIAB^BGgQoNEfAAw^gQIMAjf4AgAE^EaBCg9QcAD^CBAgwCN/gBgEaBGj0BwAM^IECDAK0/AGARoEaJqRAGg^BGgRo9AcAD^CBAgwCtPwBgEaBGj0BwAD^CNAgQKM/AGARoEaP0BAAM^I0CBAoz8AG^ECABgEa/QEAAw^jQIEDrDwAY^QIAGAZpmJACaBw^RoEKD1BwAM^IECDAK0/AGARoEaPQHAAw^gQIMArT8AYBGgRo/QEAAw^jQIECjPwBgEaBGj9AQAD^CNAgQOsPABg#BAgAYBGv0BAANwCwAAGB6gYeckmpEAa^AEaBGj0BwAM^IECDAK0/AGARoEaPQHAAM^I0CBAoz8AYBGgRo/QEAAw^jQIECjPwAY^QIAGARr9AQAD^CNAgQOsPABg#BAgAYBmmYkABoAAECABgEa/QEAAw^jQIEDrDwAY^QIAGARr9AcAjQI0OgPABg#BAgAYBWn8AwCNAjQ6A8ABg#BCgQYBGfwDAI0CND6AwAG^EKBBgKYZCYAG#QoEGARn8AwCNAjQ+gMABg#BCgQYBGfwAw^gAANAjT6AwAG^EKBBgNYfAD^C#0CNPoDgAE^EaBCg0R8AM^IAADQK0/gCAAQ^RoEKBpRgKgAQAABGgQoNEfAD^C#0CtP4AgAE^EaBCg0R8AD^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAI3+AGARoEaPQHAAw^gQIMArT8AYBGgRomsMAM^IAADQK0/gCAAQ^RoEKDRHwAw^gAANO7fQHwAw^gAANArT+AIAB^BGgQoNEfAGg^BGgRo9AcAD^CBAgwCtPwBgEaBGj0BwAD^RIB+Ntg5iea5AD^DAIwI0CND6AwAG^EKBBgEZ/AKAB#EaBCg0R8AM^IAADQK0/gCAAQ^RoEKDRHwAM^IECDAI3+AIAB^BGgQoPUHAAw^gQIMAjf4AYBGgRo9AcAD^CBAgwCtPwBgEaBGiakQBo^ARoEaPQHAAw^gQIMArT8AYBGgRo9AcAAw^jQIECjPwBgEaBGj9AQAD^CNAgQKM/ABg#BAgAYBGv0BAAM^I0CBA6w8AG^ECABgGaZiQAGgAAQIAGARr9AQAD^CNAgQOsPABg#BAgAYBGv0BwCNAjQ6A8AG^ECABgFafwDAI0CNDoDwAG^EKBBgEZ/AMAjQI0PoDAAY^QoEGApjkMAAM^I0CBA6w8AG^ECABgEa/QEAAw^jQsIP+AIAB^BGgQoPUHAAw^gQIMAjf4AgAE#Bea/fK+3P5/3PJOvh8t1cO4nflmQAQoAEAAF9Aw/7JHfQHAAw^gQIMArT8AYBGvwHNPoDAA0AACBAgwCN/gCAAQ^RoEKD1BwAM^IECDAI3+AGARoEaPQHAAw^gQIMArT8AYBGgRo9AcAAw^jQIECjPwBgEaBGj9AQAD^CNAgQNOMBEAD#I0CBAoz8AYBGgRo/QEAAw^jQIECjPwAY^QIAGARr9AQAD^CNAgQOsPABg#BAgAYBGv0BwCNAjQ6A8AG^ECABgFafwDAI0CNA0IwHQ^AjQI0OgPABg#BAgAYBWn8AwCNAjQ6A8ABg#BCgQYBGfwDAI0CND6AwAG^EKBBgEZ/AD^C#0CNPoDAAY^QoEGA1h8AM^IAADQI0DQAG^EKBBgEZ/AMAjQI0PoDAAY^QoEGA1h8AM^IAADQI0+gMABg#BCgQYDWHwAw^gAANArT+AIAB^BGgQoNEfAD^C#0CtP4AgAE^EaBCg9QcAD^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAK0/AGARoEaPQHAAw^gQIMArT8AYBGgRo/QEAAw^jQIECjPwBgACDhFgC#07t9AfAD^C#0CtP4AgAE^EaBCg0R8Aa^AEaBGj0BwAM^IECDAK0/AGARoEaPQHAAM^I0CBAoz8AYBGgRo/QEAAw^jQIECjPwAY^QIAGARr9AQAD^CNAgQOsPABg#BAgAYBmmYkABoAAECABgEa/QEAAw^jQIEDrDwAY^QIAGARr9AcAjQI0OgPABg#BAgAYBWn8AwCNAjQ6A8ABg#BCgQYBGfwDAI0CND6AwAG^EKBBgKYZCYAG#QoEGARn8AwCNAjQ+gMABg#BCgQYBGfwAw^gAANAjT6AwAG^EKBBgNYfAD^C#0CNPoDgAE^EaBCg0R8AM^IAADQK0/gCAAQ^RoEKBpRgKgAQAABGgQoNEfAD^C#0CtP4AgAE^EaBCg0R8AD^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAI3+AGARoEaPQHAAw^gQIMArT8AYBGgRommEAM^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAI3+AIAB^ARoEaPQHAAw^gQIMArT8AYBGgRo9AcAGgAAQICGCNBfRfNcABg#BgeICGnVvoDwAY^QIAGAVp/AMAjQI0OgPADQAAIAADQI0+gMABg#BCgQYDWHwAw^gAANAjT6A4AB^BGgQoNEfAD^C#0CtP4AgAE^EaBCg0R8AD^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAE0zEgAN#gQIMAjf4AgAE^EaBCg9QcAD^CBAgwCN/gBgEaBGj0BwAM^IECDAK0/AGARoEaPQHAAM^I0CBAoz8AYBGgRo/QEAAw^jQIEDTjARAAwAACNAgQKM/AGARoEaP0BAAM^I0CBAoz8AG^ECABgEa/QEAAw^jQIEDrDwAY^QIAGARr9AcAjQI0OgPABg#BAgAYBWn8AwCNAjQNIcBYBGgRo/QEAAw^jQIECjPwBgEadtAfAD^C#0CtP4AgAE^EaBCgAQABGgAA+AO2TAbHupOgH^ABJRU5ErkJggg==".replace(//g, "AAAAAA").replace(/\^/g, "AAAA").replace(/#/g, "AAA")
              , l = "iVBORw0KGgoAAAANSUhEUgAAAGEAAABDCAMAAAC7vJusAAAAkFBMVEUAAAAvLy9ERERubm7///8AAAD///9EREREREREREREREQAAAD///8AAAD///8AAAD///8AAAD///8AAAD///8AAAD///8AAAD///8AAAD///8AAAD///8cHBwkJCQnJycoKCgpKSkqKiouLi4vLy8/Pz9AQEBCQkJDQ0NdXV1ubm58fHykpKRERERVVVUzMzPx7Ab+AAAAHXRSTlMAAAAAAAQEBQ4QGR4eIyMtLUVFVVVqapKSnJy7u9JKTggAAAFUSURBVHja7dXbUoMwEAbgSICqLYeW88F6KIogqe//dpoYZ0W4AXbv8g9TwkxmvtndZMrEwlw/F8YIRjCCEYxgBCOsFmzqGMEI28J5zzmt0Pc9rdDL0NYgMxIYC5KiKpKAzZphWtZlGm4SjlnkOV6UHeeEUx77rh/npw1dCrI9k9lnwUwF+UG9D3m4ftJJxH4SJdPtaawXcbr+tBaeFrxiur309cIv19+4ytGCU0031a5euPVigLYGqjlAqM4ShOQ+QAYQUO80AMMAAkUGGfMfR9Ul+kmvPq2QGxXKOQBAKdjUgk0t2NiCGEVP+rHT3/iCUMBT90YrPMsKsIWP3x/VolaonJEETchHCS8AYAmaUICQQwaAQnjoXgHAES7jLkEFaHO4bdq/k25HAIpgWY34FwAE5xjCffM+D2DV8B0gRsAZT7hr5gE8wdrJcU+CJqhcqQD7Cx5L7Ph4WnrKAAAAAElFTkSuQmCC"
              , c = "iVBORw0KGgoAAAANSUhEUgAAASAAAABvCAYAAABM+h2NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABORJREFUeNrs3VtTW1UYBuCEcxAI4YydWqTWdqr1V7T/2QsvvPDCCy9qjxZbamsrhZIQUHsCEtfafpmJe8qFjpUxfZ4Zuvt2feydJvAOARZUut1u5bRerl692nV913f99/f6QxWAU6KAAAUEKCAABQQoIAAFBCggAAUEKCAABQQoIAAFBCggAAUEKCAABQQoIEABASggQAEBKCBAAQEoIEABASggQAEBKCBAAQEoIGBQC+jatWvd07zxrv9+Xx8fAQEoIEABASggQAEBKCBAAQEoIEABAQoIQAEBCghAAQEKCEABAQOk2u36kS6AAgLetwJKL29toFRM1be+QrVq3rx58//KvM8BAadGAQEKCFBAAAoIGHwnfhneZ+/Nmzf/LufzrI+AAE/BAAUEoIAABQTwztgLZt68eXvBAE/BABQQoIAAFBAweOwFM2/evL1ggKdgAAoIUEAACggYPPaCmTdv3l4wwFMwAAUEKCAABQQMHnvBzJs3by8Y4CkYgAICFBCAAgIGz4lfBQNQQMDgFlCtVisaaHV1tThubW1VInciD0U+ysdnz54N5+PKysphOnRTHsvHlN9EHo/1l5FrkV9Enoz8W87b29tTOS8vLx9EnoncjlyPvBe5EbkZeT4fU96NvBDr2znv7Ows57y0tLQVeSXy08gf5mNfPhPrjyOfrVarlcXFxZ9yfv78+bl8TPlh5LU8n/KDyOuxfj/y+VjfyHl3d/dCKv28fi/yp/m4sLDwQ+SLke9GvhT5Tinfjnw5f4/F/Pz8rZybzeZn+ZjyzVK+EfnzUr4S+Xopf9/L+fxzc3M5d1qt1hf531Mu5k/IxzGf85VYL+fefHH+RqNRrO/t7RW3L+UbkS9Hvhk5/386Kd/qW8/5duRLMV/OdyJfzNebnZ0t7t92u53v/07K9yJfiLwROT9+ef7HyOux/iDyWuSHkT+K+eLtZX9//2xer9frjyOfyY9/Wn8S86v59qT1p7Ge315zLt4RU16K19+O9YXIu5HnYn435hux3opcj9yOPB3z+5E/iPXf43y1yMX778HBQS3f3pTz+28l5bHIr2N+LN3+zszMzGHkoh/S+mHMF98XlNaP8zHd/0W/pMe943NAwKlSQIACAhQQgAICFBCAAgIUEIACAhQQgAIC/n9GqtXqYbfbHa38+RtSu32llPdqdNL6aOSj+LfxyMVekLTem39Ryr/mPDQ0NBznzXtROikPRW6W8k7k3m9rzXthOsPDw73bUuylGRkZ6cR63nvTSfko8oPIr+Pnz96P/DLW816ezujoaN6DdtyX9+P8eS9QZ2xs7Hxf7qa8Xlr/JO6Ljcjrcf6cj1P+OO+N6V1/fHz8XLz+/Tjfubh+sZcorZ+N9Ycxfybyo8ircf6fc56YmFiJ1/8l8mLk7cjzkfP92U15Ns63G+u9nPcKdWq12lQ8Xu3Ixd6f9Pd8P3UmJycnUszzL2N9LM7/anNzs9V7Q2q32395w/q7ubdH6L/KrVbrpPxlKX9Vyl+X8jel/G0pf5f/aDabvXy9tH6ztH63lDdKebOUH5Xyk1LeKuWd/ry2tlap9P125Onp6Zf9eWpq6lW3b8f6zMzM6/71er3+ppSP+u/XNN/pz41Go+sjIMBTMEABASggQAEBKCBAAQEoIEABASggQAEB/CN/CDAAw78uW9AVDw4AAAAASUVORK5CYII=";
            e.ColorPicker = {
                _html: i,
                _cssFunc: n,
                _cssMain: o,
                _horizontalPng: r,
                _verticalPng: a,
                _patchesPng: s,
                _iconsPng: l,
                _bgsPng: c
            }
        }
        )(window)
    },
    "99f5": function(e, t, i) {
        e.exports = i.p + "img/redo-arrow.4b460c09.svg?x-request=html"
    },
    "9a44": function(e, t, i) {
        e.exports = i.p + "img/lock.dc5717c2.svg?x-request=html"
    },
    "9a4c": function(e, t) {
        var i = '<title>Create Template</title> <div class="shopify-page" ng-controller="CreateTemplateCtrl" ng-cloak> <style>.sh-iframe-loader{top:0;right:0;bottom:0;left:0;overflow:hidden;width:100%;height:100%;background:rgba(255,255,255);display:flex;justify-content:center;align-items:center}.ssh-iframe-loader md-progress-circular path{stroke:#7258e0!important}</style> <div class="sh-iframe-loader" ng-show="$scope.loading"> <md-progress-circular md-mode="indeterminate" md-diameter="100"></md-progress-circular> </div> </div> ';
        e.exports = i
    },
    "9a81": function(e, t, i) {
        e.exports = i.p + "img/hidden.c6393ba9.svg?x-request=html"
    },
    "9ba6": function(e, t, i) {
        e.exports = i.p + "img/my-design.8c412477.svg?x-request=html"
    },
    "9bed": function(e, t, i) {
        "use strict";
        i.d(t, "b", (function() {
            return o
        }
        )),
        i.d(t, "a", (function() {
            return r
        }
        )),
        i.d(t, "d", (function() {
            return a
        }
        )),
        i.d(t, "c", (function() {
            return s
        }
        ));
        var n = i("3af5");
        const o = async e=>{
            const t = await n["a"].get("printify/blueprints", {
                params: {
                    shop: e
                },
                cache: {
                    maxAge: 36e5
                }
            });
            return t.data
        }
          , r = async(e,t)=>{
            const i = await n["a"].get("printify/blueprints/" + e, {
                params: {
                    shop: t
                },
                cache: {
                    maxAge: 36e5
                }
            });
            return i.data
        }
          , a = async(e,t)=>{
            const i = await n["a"].get(`printify/blueprints/${e}/print_providers`, {
                params: {
                    shop: t
                },
                cache: {
                    maxAge: 36e5
                }
            });
            return i.data
        }
          , s = async(e,t,i,o=!1)=>{
            const r = await n["a"].get(`printify/blueprints/${e}/print_providers/${t}/variants`, {
                params: {
                    shop: i,
                    showOutOfStock: o
                },
                cache: {
                    maxAge: 36e5
                }
            });
            return r.data
        }
    },
    "9c06": function(e, t) {
        var i = '<input ng-disabled="disabled" class="color" value="#B6BD79" data-colormode="HEX" readonly="" style="background-color:#b6bd79;color:transparent;cursor:pointer"/> ';
        e.exports = i
    },
    "9da8": function(e, t, i) {
        "use strict";
        i.r(t),
        function(e) {
            var t = i("0613")
              , n = i("13c1")
              , o = i("576f");
            (function() {
                function r(r, a, s, l, c, d, u, p, h) {
                    r.productSaved = !1,
                    r.selectedElement = null,
                    r.elementProperties = {};
                    let m = [];
                    r.layersInstance = null,
                    r.layersProps = {
                        allowSorting: !1,
                        allowChangingLock: !1,
                        allowChangingVisibility: !1,
                        allowTitleEdit: !1,
                        showElementId: !1,
                        collapseTitle: "Select a layer to review",
                        allowGroupUngroup: !1,
                        showGroups: !1
                    };
                    const g = !!s.search().forProductTemplateCreation
                      , f = s.search().forUserDesignCreation
                      , v = !!s.search().forMyProductBases || !1
                      , b = s.search().flowId
                      , y = "isprintsizevariant";
                    a.headerTitle = "Step 3/3 - Template Review - " + u.getProduct().name,
                    r.layersElementSelected = function(e) {
                        a.$broadcast("canvas:select:stepTwo", {
                            uuids: e.elements.map(e=>e.uuid || e.zIndex)
                        }),
                        a.$broadcast("canvas:select:stepOne", {
                            uuids: e.elements.map(e=>e.uuid || e.zIndex)
                        })
                    }
                    ,
                    r.setLayersActiveItem = function(e, t) {
                        r.layersInstance && r.layersInstance.$children[0].setActiveElement(e, t)
                    }
                    ,
                    r.updateLayers = function(e) {
                        r.layersInstance && r.layersInstance.$children[0].setCanvasElements(e)
                    }
                    ,
                    r.updateText = function(e, t) {
                        h.proceedAfterDoneTyping();
                        const i = {
                            text: e,
                            id: t.id
                        };
                        a.$broadcast("updateText:stepOne", i),
                        a.$broadcast("updateText:stepTwo", i)
                    }
                    ,
                    r.updateFontOption = function(e, t) {
                        const i = {
                            fontOption: e,
                            id: t.id
                        };
                        a.$broadcast("updateTextFont:stepOne", i),
                        a.$broadcast("updateTextFont:stepTwo", i)
                    }
                    ,
                    r.updateFontColorOption = function(e, t) {
                        const i = {
                            fontColorOption: e,
                            id: t.id
                        };
                        a.$broadcast("updateTextFontColor:stepOne", i),
                        a.$broadcast("updateTextFontColor:stepTwo", i)
                    }
                    ,
                    r.updateImageOption = function(e, t) {
                        const i = {
                            option: e,
                            id: t.id
                        };
                        a.$broadcast("updateDynamicElementOption:stepOne", i),
                        a.$broadcast("updateDynamicElementOption:stepTwo", i)
                    }
                    ,
                    r.updateVectorOption = function(e, t) {
                        const i = {
                            option: e,
                            id: t.id
                        };
                        a.$broadcast("updateDynamicElementOption:stepOne", i),
                        a.$broadcast("updateDynamicElementOption:stepTwo", i)
                    }
                    ,
                    r.uploadImageOnPlaceholder = function(e, t) {
                        if (t.files && t.files[0]) {
                            const i = {
                                file: t.files[0],
                                id: e.id
                            };
                            t.value = null,
                            a.$broadcast("uploadImagePlaceholder:stepOne", i),
                            a.$broadcast("uploadImagePlaceholder:stepTwo", i)
                        }
                    }
                    ,
                    r.uploadSvgOnPlaceholder = function(e, t) {
                        if (t.files && t.files[0]) {
                            const i = {
                                file: t.files[0],
                                id: e.id
                            };
                            t.value = null,
                            a.$broadcast("uploadVectorPlaceholder:stepOne", i),
                            a.$broadcast("uploadVectorPlaceholder:stepTwo", i)
                        }
                    }
                    ,
                    r.updateImageColor = function(e, t) {
                        const i = {
                            colorOption: e,
                            id: t.id
                        };
                        a.$broadcast("updateImageColorOption:stepOne", i),
                        a.$broadcast("updateImageColorOption:stepTwo", i)
                    }
                    ,
                    r.updateVectorColor = function(e, t) {
                        const i = {
                            colorOption: e,
                            id: t.id
                        };
                        a.$broadcast("updateVectorColorOption:stepOne", i),
                        a.$broadcast("updateVectorColorOption:stepTwo", i)
                    }
                    ,
                    r.updateSelectedElement = function(e) {
                        r.selectedElement = e,
                        e && (r.elementProperties.text = e.getText ? e.getText() : e.text,
                        r.elementProperties.fontOption = e.fontOption,
                        r.elementProperties.fontColorOption = e.fontColorOption,
                        r.elementProperties.imageOption = e.dynamicImageVariation,
                        r.elementProperties.colorPosition = e.selectedColorPosition,
                        r.elementProperties.fullColor = e.fullColor,
                        r.elementProperties.grading = e.grading,
                        r.elementProperties.selectedPosition = e.selectedPosition,
                        r.elementProperties.applyColoring = e.applyColoring,
                        r.elementProperties.prefix = e.prefix,
                        r.elementProperties.suffix = e.suffix,
                        r.elementProperties.referenceId = e.referenceId)
                    }
                    ,
                    r.$on("canvas:updated:stepTwo", (t,i)=>{
                        i.objects = i.objects || [],
                        m = e.uniq([...m, ...i.objects], e=>e.uuid ? e.uuid : e.zIndex),
                        r.updateLayers(m)
                    }
                    ),
                    r.$on("canvas:updated:stepOne", (t,i)=>{
                        i.objects = i.objects || [],
                        m = e.uniq([...m, ...i.objects], e=>e.uuid ? e.uuid : e.zIndex),
                        r.updateLayers(m)
                    }
                    ),
                    r.$on("canvas:selection:stepOne", (e,t)=>{
                        var i, n;
                        r.setLayersActiveItem(t.element, t.wasUserEvent),
                        r.updateSelectedElement(t.element),
                        a.$broadcast("canvas:select:stepTwo", {
                            uuids: [(null === t || void 0 === t || null === (i = t.element) || void 0 === i ? void 0 : i.uuid) || (null === t || void 0 === t || null === (n = t.element) || void 0 === n ? void 0 : n.zIndex)]
                        })
                    }
                    ),
                    r.$on("canvas:selection:stepTwo", (e,t)=>{
                        var i, n;
                        r.setLayersActiveItem(t.element, t.wasUserEvent),
                        r.updateSelectedElement(t.element),
                        a.$broadcast("canvas:select:stepOne", {
                            uuids: [(null === t || void 0 === t || null === (i = t.element) || void 0 === i ? void 0 : i.uuid) || (null === t || void 0 === t || null === (n = t.element) || void 0 === n ? void 0 : n.zIndex)]
                        })
                    }
                    ),
                    r.$on("canvas:previewImageGenerated:stepTwo", (async function(e, t) {
                        const i = t.dataUrl;
                        if (i) {
                            const e = await Object(o["d"])("productThumb", i);
                            r.processSaveTemplate(e)
                        }
                    }
                    )),
                    r.save = function() {
                        let e = "Saving template";
                        if (g) {
                            e = "Saving template product";
                            const t = u.getChildTemplateProduct();
                            if ((!u.getProduct().ProductId || t && t.parentId) && null === u.getPodAssignments())
                                return r.saveTemplateProductManual(e),
                                !1
                        } else
                            f && (e = "Saving design");
                        p.start(e),
                        r.imagePlaceHoldersFormated()
                    }
                    ,
                    r.saveTemplateProductManual = function(e) {
                        const t = r.getDynamicImagesFromProductColor();
                        l.show({
                            controller: "TemplateProductVariantsModalCtrl",
                            template: i("8f72"),
                            parent: angular.element(document.body),
                            clickOutsideToClose: !1,
                            escapeToClose: !1,
                            locals: {
                                forMyProductBases: void 0 !== u.getPod().isUserPod,
                                initialColorVariants: t
                            }
                        }).then(async t=>{
                            var i;
                            void 0 != t.description && u.setDescription(t.description);
                            let o = []
                              , a = null !== (i = u.getTemplateProductVariants()) && void 0 !== i ? i : [];
                            const s = r.storeParameters(u.getChildTemplateProduct());
                            if (s && s.savedTemplates && s.forChildTemplateProductCreation) {
                                const e = s.parentId ? await Object(n["d"])(s.parentId) : null;
                                e && u.setProductName("" + (e.name + " - " + s.currentTemplate.newVariant));
                                const i = s.savedTemplates.map(e=>e.newVariantValue);
                                t.variants.push({
                                    name: "" + (s.newPrintVariantName + y),
                                    value: i.toString()
                                }),
                                a.length && s.parentId && (a = a.map(e=>{
                                    if (!e.name.toLocaleLowerCase().includes(y.toLocaleLowerCase()))
                                        return e;
                                    const t = JSON.parse(e.value).map((e,t)=>({
                                        ...e,
                                        variant: i[t]
                                    }));
                                    return t.push(i[i.length - 1]),
                                    {
                                        name: s.newPrintVariantName + y,
                                        value: JSON.stringify(t)
                                    }
                                }
                                ))
                            }
                            for (const e of t.variants) {
                                const t = e.value.split(",").map(e=>e.trim()).filter(e=>e.length);
                                o.push({
                                    name: e.name,
                                    value: JSON.stringify(t)
                                })
                            }
                            u.setTemplateProductVariants(a.length ? a : o),
                            p.start(e),
                            r.imagePlaceHoldersFormated()
                        }
                        )
                    }
                    ,
                    r.getDynamicImagesFromProductColor = function() {
                        const e = u.getProductColorsFilenames();
                        let t = "";
                        try {
                            const i = e.map(e=>e.name.substring(0, e.name.lastIndexOf(".")));
                            t = [...new Set(i)].join(", ")
                        } catch (i) {
                            window.rumReportError(error)
                        }
                        return t
                    }
                    ,
                    r.imagePlaceHoldersFormated = function() {
                        const {eps: e, preview: t} = u.getProduct();
                        e.imagePlaceHoldersEps.forEach(e=>{
                            e.dynamicImagesPath && "string" !== typeof e.dynamicImagesPath ? e.dynamicImagesPath = JSON.stringify(Array.from(e.dynamicImagesPath.entries())) : e.mapConfig && "string" !== typeof e.mapConfig && (e.mapConfig = JSON.stringify(e.mapConfig))
                        }
                        ),
                        t.imagePlaceHoldersPreview.forEach(e=>{
                            e.mapConfig && "string" !== typeof e.mapConfig && (e.mapConfig = JSON.stringify(e.mapConfig)),
                            u.getIsProductColorModified() && (e.podProductImagesMetadata = null)
                        }
                        ),
                        a.$broadcast("canvas:previewImageRequest:stepTwo", {
                            size: 512
                        })
                    }
                    ,
                    r.processSaveTemplate = async function(e) {
                        const o = u.getProduct();
                        o.preview.thumbnailPath = e.Path;
                        try {
                            if (g) {
                                o.podAssignments = u.getPodAssignments() || void 0,
                                o.podId = u.getPod().id,
                                o.description = u.getDescription() || null;
                                const e = u.getChildTemplateProduct();
                                e && e.forChildTemplateProductCreation && u.setTemplateProductVariants(u.getTemplateProductVariants().map(e=>{
                                    if (!e.name.includes(y))
                                        return e;
                                    const t = JSON.parse(e.value);
                                    return t[t.length - 1] = {
                                        variant: t[t.length - 1],
                                        templateId: o.id
                                    },
                                    {
                                        name: e.name,
                                        value: JSON.stringify(t)
                                    }
                                }
                                )),
                                o.templateProductVariants = u.getTemplateProductVariants() || void 0;
                                const t = e && e.parentId ? await Object(n["g"])({
                                    ...o,
                                    id: o.id,
                                    parentId: e.parentId
                                }) : await Object(n["g"])(o, o.id);
                                if (p.stop(),
                                e && e.forChildTemplateProductCreation && !e.isCompleted) {
                                    const i = "/createProduct1"
                                      , n = {
                                        templateId: t.id,
                                        forProductTemplateCreation: !0
                                    }
                                      , o = new URLSearchParams(v ? {
                                        ...n,
                                        forMyProductBases: !0
                                    } : n);
                                    e.parentId || u.setChildTemplateProduct({
                                        ...u.getChildTemplateProduct(),
                                        parentId: t.id
                                    }),
                                    s.path(`${i}?${o}`),
                                    s.url(s.path()),
                                    c(()=>r.$apply())
                                } else
                                    l.show({
                                        controller: "TemplateProductSavedModalCtrl",
                                        template: i("2eea"),
                                        locals: {
                                            forMyProductBases: v,
                                            templateId: t.id
                                        },
                                        parent: angular.element(document.body),
                                        clickOutsideToClose: !1,
                                        escapeToClose: !1
                                    }).then(()=>{
                                        r.productSaved = !0,
                                        v ? s.path("/MyProductBases") : s.path("/admin/templateProducts"),
                                        s.url(s.path()),
                                        u.clearChildTemplateProduct()
                                    }
                                    );
                                c(()=>r.$apply())
                            } else
                                await d.saveProduct(o),
                                p.stop(),
                                c(()=>r.$apply()),
                                f || b ? (r.productSaved = !0,
                                s.path("/store/designLibrary/").search({
                                    forUserDesignCreation: f,
                                    flowId: b,
                                    templateCreated: o.id
                                })) : l.show({
                                    controller: "TemplateSavedModalCtrl",
                                    template: i("d62e"),
                                    locals: {
                                        templateId: o.id,
                                        user: t["a"].state.user,
                                        createDesignOnTemplate: !1
                                    },
                                    parent: angular.element(document.body),
                                    clickOutsideToClose: !1,
                                    escapeToClose: !1
                                }).then((function(e) {
                                    "save-and-go-to-store" === e.action ? (r.productSaved = !0,
                                    s.path("/store/products")) : r.goHome()
                                }
                                ))
                        } catch (error) {
                            window.rumReportError(error),
                            u.clearChildTemplateProduct(),
                            s.url(s.path()),
                            r.$apply(),
                            p.stop(),
                            c(()=>r.$apply())
                        }
                    }
                    ,
                    r.storeParameters = function(e) {
                        var t, i, n, o;
                        if (!e)
                            return;
                        if (!e.forChildTemplateProductCreation)
                            return;
                        const {width: r, height: a, unit: s} = e.currentTemplate.dimension
                          , l = `${r} x ${a} ${s}`;
                        return e.currentTemplate = {
                            ...e.currentTemplate,
                            newVariant: null !== (t = e.currentTemplate.newVariant) && void 0 !== t ? t : l,
                            oldVariant: null !== (i = e.currentTemplate.oldVariant) && void 0 !== i ? i : l,
                            newVariantValue: null !== (n = e.currentTemplate.newVariant) && void 0 !== n ? n : l,
                            oldVariantValue: null !== (o = e.currentTemplate.oldVariant) && void 0 !== o ? o : l
                        },
                        u.setChildTemplateProduct({
                            ...e,
                            newPrintVariantName: e.newPrintVariantName,
                            oldPrintVariantName: e.oldPrintVariantName,
                            savedTemplates: e.savedTemplates ? [...e.savedTemplates, e.currentTemplate] : [e.currentTemplate]
                        }),
                        u.getChildTemplateProduct()
                    }
                    ,
                    r.goHome = function() {
                        r.productSaved = !0,
                        u.clearChildTemplateProduct(),
                        s.url(s.path()),
                        s.path("/home")
                    }
                    ,
                    r.$on("$locationChangeStart", (function(e, t, i) {
                        t.includes("/createProduct") || r.productSaved || f || confirm("You're about to exit the template. This means all changes will be lost, do you want to continue?") || (e.preventDefault(),
                        u.clearChildTemplateProduct())
                    }
                    ))
                }
                r.$inject = ["$scope", "$rootScope", "$location", "$mdDialog", "$timeout", "ProductAPIService", "ProductService", "blockUI", "AppCuesService"],
                angular.module("app.ctrls").controller("CreateStepThreeCtrl", r)
            }
            )()
        }
        .call(this, i("c46f"))
    },
    "9e65": function(e, t, i) {},
    "9e94": function(e, t, i) {},
    a1aa: function(e, t, i) {
        e.exports = i.p + "img/pick-color.6286e8af.svg?x-request=html"
    },
    a1cc: function(e, t, i) {
        "use strict";
        i("5f70")
    },
    a20f: function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("b421")
          , o = i("576f");
        (function() {
            function e(e, t, i, r) {
                function a(t, i, n) {
                    return e((function(e, o) {
                        const r = new FileReader;
                        r.onload = function(r) {
                            const a = new Image;
                            a.onload = async function() {
                                const {_: o, canvas: r, resized: l} = await s(a, i, n);
                                r.toBlob((function(i) {
                                    const n = new File([i],t.name,{
                                        type: t.type
                                    });
                                    e({
                                        file: n,
                                        resized: l
                                    })
                                }
                                ))
                            }
                            ,
                            a.onerror = function(e, t, i, n, r) {
                                o(r)
                            }
                            ,
                            a.crossOrigin = "Anonymous",
                            a.src = r.target.result
                        }
                        ,
                        r.readAsDataURL(t)
                    }
                    ))
                }
                function s(t, i, n) {
                    const r = i
                      , a = n;
                    return e((async function(e, i) {
                        t = await Object(o["b"])(t);
                        let n = t.width
                          , s = t.height
                          , l = !1;
                        const c = document.createElement("canvas")
                          , d = c.getContext("2d");
                        if (s > a || n > r) {
                            l = !0;
                            let e = 1;
                            e = s > n ? s / a : n / r,
                            s /= e,
                            n /= e
                        }
                        c.width = n,
                        c.height = s,
                        d.imageSmoothingQuality = "high",
                        d.imageSmoothingEnabled = !0,
                        d.drawImage(t, 0, 0, n, s);
                        const u = c.toDataURL();
                        e({
                            base64: u,
                            canvas: c,
                            resized: l
                        })
                    }
                    ))
                }
                function l(t, i) {
                    return e((function(e, n) {
                        try {
                            var o = document.createElement("canvas");
                            o.width = t.width,
                            o.height = t.height;
                            var r = o.getContext("2d");
                            r.drawImage(t, 0, 0, o.width, o.height),
                            e(o.toDataURL("image/" + i))
                        } catch (error) {
                            n(error)
                        }
                    }
                    ))
                }
                function c(t) {
                    return e((function(e, i) {
                        const n = new Image;
                        n.onload = function() {
                            e(n)
                        }
                        ,
                        n.onerror = function(e, t, n, o, r) {
                            i(r)
                        }
                        ,
                        n.crossOrigin = "Anonymous",
                        n.src = t
                    }
                    ))
                }
                function d(e) {
                    const t = document.createElement("canvas");
                    t.width = e.width,
                    t.height = e.height;
                    const i = t.getContext("2d");
                    i.drawImage(e, 0, 0);
                    const n = i.getImageData(0, 0, e.width, e.height)
                      , o = n.data;
                    for (var r = 0; r < o.length; r += 4) {
                        const e = o[r]
                          , t = o[r + 1]
                          , i = o[r + 2]
                          , n = o[r + 3];
                        if (0 !== e || 0 !== t || 0 !== i || 255 !== n)
                            return !1
                    }
                    return !0
                }
                function u(e, o, a) {
                    return new Promise(async(s,l)=>{
                        try {
                            const d = e.map(e=>e.maskPath && Object(n["c"])(e.maskPath)).filter(e=>!!e)
                              , u = i.message()
                              , p = i.state().blockCount > 0;
                            i.start("Checking mask images");
                            const h = await t.doMaskImagesNeedResizing(d, a);
                            if (i.stop(),
                            h) {
                                i.stop();
                                const e = r.confirm().title("Large Mask Images").textContent("There are large mask images loaded into Image Placeholder elements that will result in bad performance and slow loading times on your store, do you want to resize them to an optimal size?").ok("Yes").cancel("No");
                                try {
                                    await r.show(e);
                                    try {
                                        i.start("Resizing mask images!");
                                        const e = await t.resizeMaskImages(d, a);
                                        for (const t of o.filter(e=>e.maskPath)) {
                                            const i = e.find(e=>e.OldFilename === Object(n["c"])(t.maskPath));
                                            if (i) {
                                                const e = t.maskPath.replace(/(.*)\/.*/i, "$1/" + i.NewFilename);
                                                t.maskPath = e
                                            }
                                        }
                                        i.stop()
                                    } catch (error) {
                                        return i.stop(),
                                        console.error("Error resizing mask images", error),
                                        void l("Error resizing mask images")
                                    }
                                } catch (c) {} finally {
                                    p && i.start(u)
                                }
                            }
                            s()
                        } catch (error) {
                            console.error("Error checking for mask images", error),
                            l(error)
                        }
                    }
                    )
                }
                return {
                    limitImageResolutionFromFile: a,
                    limitImageResolution: s,
                    imageToBase64: l,
                    getImageFromSrc: c,
                    isFullMask: d,
                    limitMaskImagesSize: u
                }
            }
            e.$inject = ["$q", "ImageAPIService", "blockUI", "$mdDialog"],
            angular.module("app.shared.services").service("ImageUtilService", e)
        }
        )()
    },
    a23b: function(e, t) {
        angular.module("app.directives").directive("customOnChange", (function() {
            return {
                restrict: "A",
                link: function(e, t, i) {
                    var n = e.$eval(i.customOnChange);
                    t.on("change", (function(t) {
                        e.$apply((function() {
                            n(t)
                        }
                        ))
                    }
                    )),
                    t.on("$destroy", (function() {
                        t.off()
                    }
                    ))
                }
            }
        }
        ))
    },
    a243: function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("576f");
        (function() {
            function e(e, t, i, o, r, a, s, l, c, d, u, p) {
                e.element = u,
                e.imagePosition = p,
                e.categoryId = r.search().categoryId,
                e.errorMessage = "",
                e.imagePath = "",
                e.thumbnailPath = "",
                e.filesToUpload = [],
                null != u && (e.imagePosition = u.position,
                e.imagePath = u.Path,
                e.thumbnailPath = u.ThumbnailPath,
                e.categoryId = u.LibraryCategoryId),
                e.create = async function() {
                    if (e.filesToUpload.length || e.imagePath) {
                        var n = [];
                        if (e.filesToUpload.length > 0 ? (c.start("Uploading image files 0%"),
                        n = await s.uploadDynamicImagesWithChunks(e.filesToUpload, 4, !0, (function(e) {
                            c.message("Uploading image files " + parseInt(e) + "%")
                        }
                        )),
                        c.stop()) : n.push({
                            Path: e.imagePath,
                            ThumbnailPath: e.thumbnailPath
                        }),
                        null === u) {
                            var o = e.imagePosition
                              , r = [];
                            c.start("Saving images(s) into library"),
                            n.forEach(t=>{
                                (function(t, o) {
                                    const s = t.OriginalName ? t.OriginalName.split(".")[0] : e.fileName;
                                    r.push(i((i,r)=>{
                                        a.addElement(d.LibraryId, o, {
                                            Path: t.Path,
                                            ThumbnailPath: t.ThumbnailPath,
                                            LibraryCategoryId: e.categoryId
                                        }, "image", s).then((function() {
                                            i()
                                        }
                                        )).catch((function(l) {
                                            c.start("Saving images(s) into library"),
                                            409 === l.status ? 1 === n.length ? (e.errorMessage = "There's already an element at position " + o,
                                            r()) : (console.log("Overwriting position " + o),
                                            a.getLibraryElementAtPosition(d.LibraryId, o).then((function(n) {
                                                n.Path = t.Path,
                                                n.ThumbnailPath = t.ThumbnailPath,
                                                n.LibraryCategoryId = e.categoryId,
                                                n.name = s,
                                                a.updateElement(d.LibraryId, n.ImageId, n, "image").then((function() {
                                                    i()
                                                }
                                                )).catch((function(e) {
                                                    r(e)
                                                }
                                                ))
                                            }
                                            )).catch((function(e) {
                                                r(e)
                                            }
                                            ))) : r(l)
                                        }
                                        ))
                                    }
                                    ))
                                }
                                )(t, o++)
                            }
                            ),
                            i.all(r).then((function() {
                                c.reset(),
                                t.hide()
                            }
                            )).catch((function() {
                                c.reset()
                            }
                            ))
                        } else
                            u.Path = e.imagePath,
                            u.ThumbnailPath = e.thumbnailPath,
                            u.LibraryCategoryId = e.categoryId,
                            u.Name = e.fileName,
                            a.updateElement(d.LibraryId, u.ImageId, u, "image").then((function() {
                                t.hide()
                            }
                            )).catch((function(t) {
                                console.error(t),
                                e.errorMessage = "Error updating image!"
                            }
                            ))
                    }
                }
                ,
                e.uploadImage = async function(t) {
                    const i = t.target.files;
                    if (i && i[0])
                        try {
                            if (i.length > 1 && !u)
                                return e.filesToUpload = i,
                                void (e.svgPath = "");
                            e.filesToUpload = [],
                            e.errorMessage = "",
                            c.start("Uploading Image");
                            const t = await Object(n["d"])("preview", i[0], (function(e) {
                                c.message(`Uploading Image ${parseInt(e)}%`)
                            }
                            ))
                              , r = await l.generateImageThumbnail(t.Name);
                            console.log("Success on image upload!"),
                            e.imagePath = t.Path,
                            e.thumbnailPath = r.Path,
                            e.fileName = i[0].name.split(".")[0],
                            c.stop(),
                            o(()=>e.$apply())
                        } catch (error) {
                            console.error(error),
                            e.errorMessage = "Error uploading image",
                            c.stop(),
                            o(()=>e.$apply())
                        }
                }
                ,
                e.cancel = function() {
                    t.cancel()
                }
            }
            e.$inject = ["$scope", "$mdDialog", "$q", "$timeout", "$location", "LibrariesAPIService", "MultipleFileUploadService", "ImageAPIService", "blockUI", "library", "element", "initialPosition"],
            angular.module("app.ctrls").controller("ImageDialogCtrl", e)
        }
        )()
    },
    a290: function(e, t, i) {
        e.exports = i.p + "img/map.09bcc756.svg?x-request=html"
    },
    a29c: function(e, t, i) {
        "use strict";
        i("b1f1")
    },
    a29f: function(e, t, i) {
        e.exports = i.p + "img/unlock.92d077fc.svg?x-request=html"
    },
    a33b: function(e, t, i) {
        e.exports = i.p + "img/dynamic-image.0e7afdf1.svg?x-request=html"
    },
    a36d: function(e, t, i) {
        e.exports = i.p + "img/groupClosed.ef18bc26.svg?x-request=html"
    },
    a4c5: function(e, t, i) {},
    a4fe: function(e, t, i) {
        e.exports = i.p + "img/canvas.0d21c520.svg?x-request=html"
    },
    a528: function(e, t, i) {
        "use strict";
        i.d(t, "g", (function() {
            return r
        }
        )),
        i.d(t, "d", (function() {
            return a
        }
        )),
        i.d(t, "a", (function() {
            return s
        }
        )),
        i.d(t, "b", (function() {
            return l
        }
        )),
        i.d(t, "e", (function() {
            return c
        }
        )),
        i.d(t, "c", (function() {
            return d
        }
        )),
        i.d(t, "f", (function() {
            return u
        }
        ));
        var n = i("406d");
        const o = "/Admin/TemplateProducts"
          , r = async(e,t,i,o,r)=>{
            const a = await n["a"].get("/Admin/TemplateProducts", {
                params: {
                    from: e,
                    count: t,
                    sortBy: o,
                    sortMode: r,
                    search: null === i || void 0 === i ? void 0 : i.toLocaleLowerCase()
                }
            });
            return a.data
        }
          , a = async e=>{
            const t = await n["a"].get(`${o}/${e}`);
            return t.data
        }
          , s = async e=>{
            const t = await n["a"].post(`${o}/${e}/Clone`);
            return t.data
        }
          , l = async e=>{
            const t = await n["a"].delete(`${o}/${e}`);
            return t.data
        }
          , c = async e=>{
            const t = await n["a"].post(o + "/ColorImages", e);
            return t.data
        }
          , d = e=>n["a"].get("/Admin/TemplateProductVariants/ManualVariantsForMatching/" + e).then(({data: e})=>e)
          , u = e=>n["a"].post("/Admin/TemplateProductVariants/ManualVariantsMatched", e)
    },
    a5b6: function(e, t, i) {
        e.exports = i.p + "img/sidebarLogo.2b1695d8.png?x-request=html"
    },
    a604: function(e, t, i) {
        class n {
            constructor(e) {
                this.collectModifiedPixels = !1,
                this.modifiedPixelsCount = 0,
                this.modifiedPixels = new Set,
                this._tolerance = 0,
                this._queue = [],
                this.imageData = e
            }
            fill(e, t, i, n) {
                this._newColor = this.colorToRGBA(e),
                this._replacedColor = this.getColorAtPixel(this.imageData, t, i),
                this._tolerance = n,
                this.isSameColor(this._replacedColor, this._newColor, this._tolerance) || (this.addToQueue([t, t, i, -1]),
                this.fillQueue())
            }
            hex2RGBA(e, t=255) {
                let i = e;
                if (0 === e.indexOf("#") && (i = e.slice(1)),
                3 === i.length && (i = i[0] + i[0] + i[1] + i[1] + i[2] + i[2]),
                6 !== i.length)
                    throw new Error(`Invalid HEX color ${i}.`);
                const n = parseInt(i.slice(0, 2), 16)
                  , o = parseInt(i.slice(2, 4), 16)
                  , r = parseInt(i.slice(4, 6), 16);
                return {
                    r: n,
                    g: o,
                    b: r,
                    a: t
                }
            }
            colorToRGBA(e) {
                if (-1 !== e.indexOf("rgba")) {
                    const [t,i,n,o,r] = /rgba\(.*?([0-9]{1,3}).*?([0-9]{1,3}).*?([0-9]{1,3}).*?([0-9\.]{1,})/g.exec(e);
                    return {
                        r: parseInt(i),
                        g: parseInt(n),
                        b: parseInt(o),
                        a: Math.ceil(255 * parseFloat(r))
                    }
                }
                if (-1 !== e.indexOf("rgb")) {
                    const [t,i,n,o] = /rgb\(.*?([0-9]{1,3}).*?([0-9]{1,3}).*?([0-9]{1,3})/g.exec(e);
                    return {
                        r: parseInt(i),
                        g: parseInt(n),
                        b: parseInt(o),
                        a: 255
                    }
                }
                if (-1 !== e.indexOf("#"))
                    return this.hex2RGBA(e);
                throw new Error("Unsupported color format. Please use CSS rgba, rgb, or HEX!")
            }
            getColorAtPixel(e, t, i) {
                const {width: n, data: o} = e
                  , r = 4 * (i * n + t);
                if (void 0 === o[r + 3])
                    throw new Error(`Invalid pixel coordinates: x=${t}; y=${i}`);
                return {
                    r: o[r],
                    g: o[r + 1],
                    b: o[r + 2],
                    a: o[r + 3]
                }
            }
            setColorAtPixel(e, t, i, n) {
                const {width: o, data: r} = e
                  , a = 4 * (n * o + i);
                if (void 0 === r[a + 3])
                    throw new Error(`Invalid pixel coordinates. Cannot set color at: x=${i}; y=${n}`);
                r[a + 0] = 255 & t.r,
                r[a + 1] = 255 & t.g,
                r[a + 2] = 255 & t.b,
                r[a + 3] = 255 & t.a
            }
            isSameColor(e, t, i=0) {
                return !(Math.abs(e.r - t.r) > i || Math.abs(e.g - t.g) > i || Math.abs(e.b - t.b) > i || Math.abs(e.a - t.a) > i)
            }
            addToQueue(e) {
                this._queue.push(e)
            }
            popFromQueue() {
                return this._queue.length ? this._queue.pop() : null
            }
            isValidTarget(e) {
                if (null === e)
                    return;
                const t = this.getColorAtPixel(this.imageData, e.x, e.y);
                return this.isSameColor(this._replacedColor, t, this._tolerance)
            }
            fillLineAt(e, t) {
                if (!this.isValidTarget({
                    x: e,
                    y: t
                }))
                    return [-1, -1];
                this.setPixelColor(this._newColor, {
                    x: e,
                    y: t
                });
                let i = e
                  , n = e
                  , o = this.getPixelNeighbour("left", i, t);
                while (o && this.isValidTarget(o))
                    this.setPixelColor(this._newColor, o),
                    i = o.x,
                    o = this.getPixelNeighbour("left", i, t);
                o = this.getPixelNeighbour("right", n, t);
                while (o && this.isValidTarget(o))
                    this.setPixelColor(this._newColor, o),
                    n = o.x,
                    o = this.getPixelNeighbour("right", n, t);
                return [i, n]
            }
            fillQueue() {
                let e = this.popFromQueue();
                while (e) {
                    const [t,i,n,o] = e;
                    let r = t;
                    while (-1 !== r && r <= i) {
                        const [e,a] = this.fillLineAt(r, n);
                        -1 !== e && (e >= t && a <= i && -1 !== o ? (o < n && n + 1 < this.imageData.height && this.addToQueue([e, a, n + 1, n]),
                        o > n && n > 0 && this.addToQueue([e, a, n - 1, n])) : (n > 0 && this.addToQueue([e, a, n - 1, n]),
                        n + 1 < this.imageData.height && this.addToQueue([e, a, n + 1, n]))),
                        -1 === a && r <= i ? r += 1 : r = a + 1
                    }
                    e = this.popFromQueue()
                }
            }
            setPixelColor(e, t) {
                this.setColorAtPixel(this.imageData, e, t.x, t.y),
                this.modifiedPixelsCount++,
                this.collectModifiedPixels && this.modifiedPixels.add(`${t.x}|${t.y}`)
            }
            getPixelNeighbour(e, t, i) {
                let n;
                switch (t |= 0,
                i |= 0,
                e) {
                case "right":
                    n = {
                        x: t + 1 | 0,
                        y: i
                    };
                    break;
                case "left":
                    n = {
                        x: t - 1 | 0,
                        y: i
                    };
                    break
                }
                return n.x >= 0 && n.x < this.imageData.width ? n : null
            }
        }
        (function(e) {
            "use strict";
            fabric.Image.filters.FloodFill = fabric.util.createClass(fabric.Image.filters.BaseFilter, {
                type: "FloodFill",
                replacementColor: "rgba(0, 0, 0, 0)",
                tolerance: 0,
                initialize: function(e) {
                    e = e || {},
                    this.replacementColor = e.replacementColor || "rgba(0, 0, 0, 0)",
                    this.tolerance = e.tolerance || 0
                },
                applyTo2d: function(e) {
                    const t = e.imageData
                      , i = new n(t);
                    i.fill(this.replacementColor, 0, 0, this.tolerance)
                }
            }),
            fabric.Image.filters.FloodFill.fromObject = fabric.Image.filters.BaseFilter.fromObject
        }
        )()
    },
    a6a9: function(e, t, i) {
        e.exports = i.p + "img/template.f9bb2fce.svg?x-request=html"
    },
    a8cc: function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i, n) {
                e.templateId = i,
                e.designId = n,
                e.title = e.designId ? "Design Saved" : "Design Template Saved",
                e.goToDesignTemplates = function() {
                    t.hide()
                }
            }
            e.$inject = ["$scope", "$mdDialog", "templateId", "designId"],
            angular.module("app.ctrls").controller("DesignTemplateSavedModalCtrl", e)
        }
        )()
    },
    a99e: function(e, t, i) {},
    a9f8: function(e, t) {
        (function() {
            function e(e, t, i, n, o, r) {
                function a(a, s, l) {
                    const c = l ? "Cutting Face " : "Cutting Background ";
                    e.start(c),
                    t.cutoutFace(a.apiKeys.cutoutPro, a.imageSelected.imageFile, l).then(t=>{
                        l ? (a.imageSelected.oldCutoutImageFile = a.imageSelected.imageFile,
                        a.imageSelected.oldRBCOPImageFile = null) : (a.imageSelected.oldRBCOPImageFile = a.imageSelected.imageFile,
                        a.imageSelected.oldCutoutImageFile = null),
                        a.imageSelected.imageFile = t,
                        i.uploadMultipleImages(a, s, [t]),
                        console.log("done rendering image in placeholder, removing block UI"),
                        a.$apply((function() {
                            e.stop()
                        }
                        ))
                    }
                    ).catch(t=>{
                        n.rumReportError(t),
                        a.imageSelected.oldCutoutImageFile = null,
                        a.imageSelected.oldRBCOPImageFile = null,
                        r(()=>a.$apply()),
                        e.stop(),
                        o.show(o.alert().parent(document.body).clickOutsideToClose(!0).title("CutoutPro Error" + (t.statusText ? ": " + t.statusText : "!")).textContent("There seems to be an error with your Cutout Pro account, so the face could not be cut from the image. Please visit your account on Cutout Pro to correct this.").ok("OK!"))
                    }
                    )
                }
                function s(e, t, n) {
                    if (n ? (e.imageSelected.CutoutFace = e.selectedImageProperties.CutoutFace,
                    e.imageSelected.oldRBCOPImageFile = null) : (e.imageSelected.removeBackgroundCOP = e.selectedImageProperties.removeBackgroundCOP,
                    e.imageSelected.oldCutoutImageFile = null),
                    e.editMode && (n ? e.imageSelected.setEditedProp("CutoutFace") : e.imageSelected.setEditedProp("removeBackgroundCOP")),
                    e.previousFilterImageFile = [],
                    e.imageSelected.oldCutoutImageFile || e.imageSelected.oldRBCOPImageFile || !e.imageSelected.CutoutFace && !e.imageSelected.removeBackgroundCOP) {
                        if (e.imageSelected.oldCutoutImageFile) {
                            i.uploadMultipleImages(e, t, [e.imageSelected.oldCutoutImageFile]);
                            const n = e.imageSelected.oldCutoutImageFile;
                            e.imageSelected.oldCutoutImageFile = e.imageSelected.imageFile,
                            e.imageSelected.imageFile = n
                        } else if (e.imageSelected.oldRBCOPImageFile) {
                            i.uploadMultipleImages(e, t, [e.imageSelected.oldRBCOPImageFile]);
                            const n = e.imageSelected.oldRBCOPImageFile;
                            e.imageSelected.oldRBCOPImageFile = e.imageSelected.imageFile,
                            e.imageSelected.imageFile = n
                        }
                    } else
                        e.apiKeys.cutoutPro ? e.imageSelected.imageFile && e.faceCutout(n) : (e.showApiKeyInput.cutoutPro = !0,
                        e.$apply());
                    e.imageSelected.CutoutFace || (r(()=>e.$apply()),
                    e.showApiKeyInput.cutoutPro = !1),
                    e.imageSelected.removeBackgroundCOP || (r(()=>e.$apply()),
                    e.showApiKeyInput.cutoutPro = !1)
                }
                return {
                    faceCutout: a,
                    addFaceCutoutFilter: s
                }
            }
            e.$inject = ["blockUI", "CutoutProAPIService", "MultipleFileUploadService", "$window", "$mdDialog", "$timeout"],
            angular.module("app.shared.services").factory("CutoutProUtilService", e)
        }
        )()
    },
    aac3: function(e, t) {
        var i = '<md-dialog> <div> <style>.reload-text{text-align:center;font-weight:700;font-size:13px;text-decoration:underline;cursor:pointer;display:inline-block}</style> <md-toolbar style="min-height:45px;height:45px"> <div class="md-toolbar-tools" style="background:linear-gradient(141deg,#849dd8 15%,#8bc4d3 75%)"> <div class="text-center w100"> <h2>Update Subscription</h2> </div> </div> </md-toolbar> <md-dialog-content> <md-content class="md-padding" style="max-width:500px"> <div class="row" style="margin-right:15px;margin-left:15px"> <div class="w100"> Your Shopify store <b><u>{{ store }}</u></b> needs to have its subscription updated. Once you have updated it reload the page to continue. </div> <div class="w100 text-center mt15"> <md-button class="m0 md-raised md-primary col-xs-12" href="{{ subscriptionUrl }}" target="_blank">Update Subscription</md-button> <div class="col-xs-12 mt10 text-center" ng-click="reload()"> <div class="reload-text">Reload page</div> </div> </div> </div> </md-content> </md-dialog-content> </div> </md-dialog> ';
        e.exports = i
    },
    ab80: function(e, t, i) {
        "use strict";
        i("3422")
    },
    ac6e: function(e, t, i) {
        e.exports = i.p + "img/start.83b8ec30.svg?x-request=html"
    },
    ac78: function(e, t) {
        (function() {
            function e() {
                return {}
            }
            angular.module("app.shared.services").factory("EPSAPIService", e)
        }
        )()
    },
    ade2: function(e, t, i) {
        "use strict";
        i("71f8")
    },
    adfe: function(e, t) {
        (function() {
            function e(e) {
                var t, i = "", n = "2cdc5760-a3a7-4d46-b390-1b44eaaa03de", o = "d07d37ff-e2e7-4c9f-abb3-ed1a45ca2372", r = "a690af32-cbb3-45f9-84aa-8f89b4fadcaf", a = "d1636f07-dfb2-49d8-8816-3b2c720e21c1", s = "b5f43204-3ed4-4fbe-ad7a-e43edb3c005f", l = "bfd78df9-76c1-4bae-9dc6-8eb692171b36", c = "2debb064-3da6-4b64-9e74-397614d33ea4", d = "d3b5da1e-4ba2-41eb-a61d-0d40bd320044", u = "544b7a0a-03fa-4830-bb12-2c5608213508", p = "ca7152cb-5540-445d-9925-81176df17be6", h = "908eba7e-9f8b-4f67-b292-1054041298bc", m = "1b7f49df-9bd1-493d-8f6e-b5e31725e982", g = "bff737c7-c6be-4896-a80c-b5ef6899a69b", f = 2e3;
                function v() {
                    if ("/createProduct3" == e.$$path) {
                        function i() {
                            var e;
                            y() == m && (null === (e = window.Appcues) || void 0 === e || e.show(g))
                        }
                        clearTimeout(t),
                        t = setTimeout(i, f)
                    }
                }
                function n() {
                    return n
                }
                function o() {
                    return o
                }
                function r() {
                    return r
                }
                function a() {
                    return a
                }
                function s() {
                    return s
                }
                function l() {
                    return l
                }
                function c() {
                    return c
                }
                function d() {
                    return d
                }
                function u() {
                    return u
                }
                function p() {
                    return p
                }
                function h() {
                    return h
                }
                function m() {
                    return m
                }
                function b(e) {
                    i = e
                }
                function y() {
                    return i
                }
                return {
                    setCurrentFlow: b,
                    getCurrentFlow: y,
                    WelcomeFlowCPart1: n,
                    WelcomeFlowCPart2: o,
                    OptionBPart1: r,
                    OptionBPart2: a,
                    OptionBPart3: s,
                    OptionBPart4: l,
                    OptionBPart5: c,
                    OptionBPart6: d,
                    OptionBPart7: u,
                    OptionBPart8: p,
                    OptionBPart9: h,
                    OptionBPart10: m,
                    proceedAfterDoneTyping: v
                }
            }
            e.$inject = ["$location"],
            angular.module("app.shared.services").factory("AppCuesService", e)
        }
        )()
    },
    ae3a: function(e, t, i) {
        (function() {
            "use strict";
            angular.module("app").config(["$routeProvider", "$locationProvider", function(e, t) {
                t.html5Mode(!0),
                e.when("/signin", {
                    template: i("6dd0"),
                    hasQueryParams: !0
                }),
                e.when("/signup", {
                    template: i("7b87"),
                    hasQueryParams: !0
                }),
                e.when("/verify", {
                    template: i("c612"),
                    hasQueryParams: !0
                }),
                e.when("/forgotPassword", {
                    template: i("d2c7")
                }),
                e.when("/passwordReset", {
                    template: i("f787"),
                    hasQueryParams: !0
                }),
                e.when("/emailConfirmation", {
                    headerTitle: "Email Confirmation",
                    template: i("c664"),
                    hasQueryParams: !0
                }),
                e.when("/invalidStore", {
                    template: i("e47c"),
                    hasQueryParams: !0
                }),
                e.when("/home", {
                    headerTitle: "Templates List",
                    template: i("3ae7")
                }),
                e.when("/libraries", {
                    headerTitle: "Libraries",
                    template: i("fd57")
                }),
                e.when("/editLibrary", {
                    headerTitle: "Library",
                    template: i("ba69"),
                    hasQueryParams: !0
                }),
                e.when("/editCategory", {
                    headerTitle: "Category",
                    template: i("f6b1"),
                    hasQueryParams: !0
                }),
                e.when("/stamp/:stampId/:redirectTo?", {
                    template: i("2c34"),
                    hasQueryParams: !0
                }),
                e.when("/createProduct1", {
                    headerTitleRight: "Step 1/3 - Production file settings",
                    headerMode: "dual",
                    template: i("2251"),
                    reloadOnSearch: !1,
                    hasQueryParams: !0
                }),
                e.when("/createProduct2", {
                    headerTitleRight: "Step 2/3 - Preview settings",
                    headerMode: "dual",
                    template: i("1e6b"),
                    hasQueryParams: !0
                }),
                e.when("/createProduct3", {
                    headerClasses: ["text-left"],
                    template: i("36d1"),
                    hasQueryParams: !0
                }),
                e.when("/options", {
                    headerTitle: "Customily Options",
                    template: i("80bc")
                }),
                e.when("/store", {
                    headerTitle: "Store",
                    template: i("bae2"),
                    hasQueryParams: !0
                }),
                e.when("/store/:subPath/", {
                    headerTitle: "Store",
                    template: i("bae2"),
                    hasQueryParams: !0
                }),
                e.when("/designs", {
                    headerTitle: "Store",
                    template: i("6238"),
                    hasQueryParams: !0
                }),
                e.when("/createTemplate", {
                    template: i("9a4c"),
                    hasQueryParams: !0
                }),
                e.when("/createdProduct/couplemug", {
                    headerTitle: "Templates List",
                    template: i("3ae7")
                }),
                e.when("/createdProduct/phone", {
                    headerTitle: "Templates List",
                    template: i("3ae7")
                }),
                e.when("/createdProduct/dogmug", {
                    headerTitle: "Templates List",
                    template: i("3ae7")
                }),
                e.when("/createdProduct/familycanvas", {
                    headerTitle: "Templates List",
                    template: i("3ae7")
                }),
                e.when("/createdProduct/metalsign", {
                    headerTitle: "Templates List",
                    template: i("3ae7")
                }),
                e.when("/createdProduct/tote", {
                    headerTitle: "Templates List",
                    template: i("3ae7")
                }),
                e.when("/createdProduct/notebook", {
                    headerTitle: "Templates List",
                    template: i("3ae7")
                }),
                e.when("/account", {
                    headerTitle: "Account Settings",
                    template: i("e034"),
                    reloadOnSearch: !1,
                    hasQueryParams: !0
                });
                const n = {
                    headerTitle: "Admin",
                    template: i("6238"),
                    reloadOnSearch: !1,
                    hasQueryParams: !0
                }
                  , o = ["/admin", "/admin", "/admin/:username", "/admin/users/:username", "/admin/templateProducts", "/admin/designs"];
                for (const i of o)
                    e.when(i, n);
                e.when("/MyProductBases", {
                    headerTitle: "My product bases",
                    template: i("2bde"),
                    reloadOnSearch: !1
                }),
                e.when("/", {
                    redirectTo: "/store/podSelection"
                }).otherwise({
                    redirectTo: "/"
                })
            }
            ]),
            angular.module("app").run(["$rootScope", "$document", "$mdDialog", "$location", "ConfigService", "AuthService", function(e, t, i, n, o, r) {
                e.$on("$routeChangeSuccess", (function(a, s, l) {
                    var c;
                    e.showHeader = !0,
                    s.$$route && (o.setCurrentOriginalPath(s.$$route.originalPath),
                    r.isRouteAllowed(s.$$route.originalPath) || n.path("/home"),
                    !s.$$route.hasQueryParams && Object.keys(s.params || {}).length && n.search(""),
                    e.showTemplateResizeBtn = "/createProduct1" === s.$$route.originalPath,
                    s.$$route.headerMode || (s.$$route.headerMode = "single"),
                    e.headerMode = s.$$route.headerMode,
                    e.headerTitle = s.$$route ? s.$$route.headerTitle : "",
                    e.headerTitleLeft = s.$$route ? s.$$route.headerTitleLeft : "",
                    e.headerTitleRight = s.$$route ? s.$$route.headerTitleRight : "",
                    e.headerClasses = (s.$$route ? s.$$route.headerClasses : []) || [],
                    e.headerClasses.length || (e.headerClasses = ["text-center"]),
                    o.openRoutes.includes(s.$$route.originalPath) && (e.showHeader = !1));
                    for (var d = t.find("md-dialog").length, u = 0; u < d; ++u)
                        i.cancel();
                    null === (c = window.Appcues) || void 0 === c || c.page()
                }
                ))
            }
            ])
        }
        )()
    },
    ae64: function(e, t, i) {
        e.exports = i.p + "img/move-back.5cdc7b80.svg?x-request=html"
    },
    af38: function(e, t, i) {
        e.exports = i.p + "img/discover-colored.f7e2fc22.svg?x-request=html"
    },
    afd9: function(e, t, i) {
        "use strict";
        i.d(t, "b", (function() {
            return n
        }
        )),
        i.d(t, "c", (function() {
            return o
        }
        )),
        i.d(t, "a", (function() {
            return r
        }
        ));
        const n = (e,t)=>{
            const i = 25.4;
            return e * t / i
        }
          , o = (e,t)=>{
            const i = 25.4;
            return e * i / t
        }
          , r = e=>25.4 * e
    },
    b06f: function(e, t, i) {
        (function() {
            function e(e) {
                function t(t, n) {
                    return e.show({
                        controller: ["$scope", "$mdDialog", "$timeout", "title", "colorMode", function(e, t, i, n, o) {
                            e.resolution = 72,
                            e.modalTitle = n || "Pick a color",
                            e.currentColor = null,
                            e.pickerColorMode = o || "rgb",
                            e.pickerCtrlMethods = {},
                            e.toRgbaString = function(e, t) {
                                const i = new Colors
                                  , n = i.convertColor(e.replace("#", ""), "HEX2RGB");
                                return "rgba(" + n.r + "," + n.g + "," + n.b + "," + t + ")"
                            }
                            ,
                            e.pickerColorChange = function(t) {
                                e.currentColor = t,
                                i((function() {
                                    e.$apply()
                                }
                                ))
                            }
                            ,
                            e.pickerReady = function(t) {
                                e.pickerColorChange(t),
                                e.pickerCtrlMethods.openInContainer($(".color-picker-dialog #pickerContainer").get(0))
                            }
                            ,
                            e.setColor = function() {
                                t.hide(e.currentColor)
                            }
                            ,
                            e.$on("$destroy", ()=>{
                                e.pickerCtrlMethods.destroy()
                            }
                            )
                        }
                        ],
                        locals: {
                            title: t,
                            colorMode: n
                        },
                        template: i("8c03"),
                        parent: angular.element(document.body),
                        clickOutsideToClose: !1
                    })
                }
                return {
                    showPickerDialog: t
                }
            }
            e.$inject = ["$mdDialog"],
            angular.module("app.shared.services").factory("ColorPickerModalService", e)
        }
        )()
    },
    b1f1: function(e, t, i) {},
    b263: function(e, t) {
        (function() {
            fabric.util.object.extend(fabric.Canvas.prototype, {
                _alignObjecToCanvas: function(e, t) {
                    const i = null === e || void 0 === e ? void 0 : e.getBoundingRect(!0)
                      , n = e.isType("activeSelection")
                      , o = this.getArtworkWidth() / this.getZoom() * this.getEffectiveZoom()
                      , r = this.getArtworkHeight() / this.getZoom() * this.getEffectiveZoom()
                      , a = n ? i.width : e.width
                      , s = n ? i.height : e.height;
                    switch (t) {
                    case "left":
                        e.set("left", n ? 0 : a / 2);
                        break;
                    case "right":
                        e.set("left", n ? o - a : o - a / 2);
                        break;
                    case "top":
                        e.set("top", n ? 0 : s / 2);
                        break;
                    case "bottom":
                        e.set("top", n ? r - s : r - s / 2);
                        break;
                    case "middle":
                        {
                            const t = o / 2;
                            e.set("left", n ? t - a / 2 : t);
                            break
                        }
                    case "center":
                        {
                            const t = r / 2;
                            e.set("top", n ? t - s / 2 : t);
                            break
                        }
                    }
                },
                _alignObjectInSelection: function(e, t) {
                    const i = null === e || void 0 === e ? void 0 : e.getBoundingRect(!0)
                      , n = i.width
                      , o = i.height
                      , r = e.getObjects();
                    null === r || void 0 === r || r.forEach(e=>{
                        switch (t) {
                        case "left":
                            e.set({
                                left: -n / 2 + e.width / 2
                            });
                            break;
                        case "right":
                            e.set({
                                left: n / 2 - e.width / 2
                            });
                            break;
                        case "top":
                            e.set({
                                top: -o / 2 + e.height / 2
                            });
                            break;
                        case "bottom":
                            e.set({
                                top: o / 2 - e.height / 2
                            });
                            break;
                        case "center":
                            e.set({
                                top: 0
                            });
                            break;
                        case "middle":
                            e.set({
                                left: 0
                            });
                            break
                        }
                    }
                    )
                },
                elementsSelectedAlign: function(e, t="selection") {
                    const i = this.getActiveObject();
                    if (!i)
                        return;
                    const n = {
                        action: "drag",
                        original: fabric.util.saveObjectTransform(i)
                    };
                    if ("selection" !== t || "activeSelection" !== i.type) {
                        var o;
                        const t = null === (o = i.getObjects) || void 0 === o ? void 0 : o.call(i);
                        if ((null === t || void 0 === t ? void 0 : t.length) > 0 && t.some(e=>e.group.locked) || null !== i && void 0 !== i && i.locked)
                            return;
                        this._alignObjecToCanvas(i, e)
                    } else
                        n.action = "dragInsideSelection",
                        this._alignObjectInSelection(i, e);
                    i.fire("modified", {
                        target: i,
                        transform: n
                    })
                }
            })
        }
        )()
    },
    b421: function(e, t, i) {
        "use strict";
        i.d(t, "b", (function() {
            return o
        }
        )),
        i.d(t, "a", (function() {
            return a
        }
        )),
        i.d(t, "c", (function() {
            return s
        }
        ));
        const n = e=>e.replace(/^.*[\\/]/, "")
          , o = e=>{
            var t;
            const i = n(e);
            return (null === (t = /(?:\.([^.]+))?$/.exec(i)) || void 0 === t ? void 0 : t[1]) || ""
        }
          , r = (e,t,i)=>{
            if (!i)
                return i;
            const n = new RegExp("([?&])" + e + "=.*?(&|#|$)(.*)","gi");
            let o;
            if (n.test(i))
                return "undefined" !== typeof t && null !== t ? i.replace(n, "$1" + e + "=" + t + "$2$3") : (o = i.split("#"),
                i = o[0].replace(n, "$1$3").replace(/(&|\?)$/, ""),
                "undefined" !== typeof o[1] && null !== o[1] && (i += "#" + o[1]),
                i);
            if ("undefined" !== typeof t && null !== t) {
                const n = -1 !== i.indexOf("?") ? "&" : "?";
                return o = i.split("#"),
                i = o[0] + n + e + "=" + t,
                "undefined" !== typeof o[1] && null !== o[1] && (i += "#" + o[1]),
                i
            }
            return i
        }
          , a = (e,t=!1)=>{
            e = e.replace("/Content", ""),
            e.startsWith("Content") && (e = e.replace("Content", ""));
            const i = "https://cdn.customily.com".replace(/^\/+|\/+$/g, "");
            return e = e.replace(/^\/+|\/+$/g, ""),
            r("x-request", t ? "cl-core-html" : "cl-core-js", `${i}/${e}`)
        }
          , s = e=>e.replace(/^.*[\\/]/, "")
    },
    b65d: function(e, t, i) {},
    b6a6: function(e, t, i) {},
    b6eb: function(e, t, i) {
        !function(e, i) {
            i(t)
        }(0, (function(e) {
            "use strict";
            function t(e) {
                var t = e.match(C);
                return t ? t.map(Number) : []
            }
            function i(e, t, i, r, c, d, u, h) {
                this.a = {
                    x: e,
                    y: t
                },
                this.b = {
                    x: i,
                    y: r
                },
                this.c = {
                    x: c,
                    y: d
                },
                this.d = {
                    x: u,
                    y: h
                },
                null !== u && void 0 !== u && null !== h && void 0 !== h ? (this.getArcLength = p,
                this.getPoint = s,
                this.getDerivative = o) : (this.getArcLength = l,
                this.getPoint = a,
                this.getDerivative = n),
                this.init()
            }
            function n(e, t, i) {
                return {
                    x: 2 * (1 - i) * (e[1] - e[0]) + 2 * i * (e[2] - e[1]),
                    y: 2 * (1 - i) * (t[1] - t[0]) + 2 * i * (t[2] - t[1])
                }
            }
            function o(e, t, i) {
                return a([3 * (e[1] - e[0]), 3 * (e[2] - e[1]), 3 * (e[3] - e[2])], [3 * (t[1] - t[0]), 3 * (t[2] - t[1]), 3 * (t[3] - t[2])], i)
            }
            function r(e, t, i, n, o) {
                for (var r = 1, a = e / t, s = (e - i(n, o, a)) / t; r > .001; ) {
                    var l = i(n, o, a + s)
                      , c = i(n, o, a - s)
                      , d = Math.abs(e - l) / t
                      , u = Math.abs(e - c) / t;
                    d < r ? (r = d,
                    a += s) : u < r ? (r = u,
                    a -= s) : s /= 2
                }
                return a
            }
            function a(e, t, i) {
                return {
                    x: (1 - i) * (1 - i) * e[0] + 2 * (1 - i) * i * e[1] + i * i * e[2],
                    y: (1 - i) * (1 - i) * t[0] + 2 * (1 - i) * i * t[1] + i * i * t[2]
                }
            }
            function s(e, t, i) {
                return {
                    x: (1 - i) * (1 - i) * (1 - i) * e[0] + 3 * (1 - i) * (1 - i) * i * e[1] + 3 * (1 - i) * i * i * e[2] + i * i * i * e[3],
                    y: (1 - i) * (1 - i) * (1 - i) * t[0] + 3 * (1 - i) * (1 - i) * i * t[1] + 3 * (1 - i) * i * i * t[2] + i * i * i * t[3]
                }
            }
            function l(e, t, i) {
                void 0 === i && (i = 1);
                var n = e[0] - 2 * e[1] + e[2]
                  , o = t[0] - 2 * t[1] + t[2]
                  , r = 2 * e[1] - 2 * e[0]
                  , a = 2 * t[1] - 2 * t[0]
                  , s = 4 * (n * n + o * o)
                  , l = 4 * (n * r + o * a)
                  , c = r * r + a * a;
                if (0 === s)
                    return i * Math.sqrt(Math.pow(e[2] - e[0], 2) + Math.pow(t[2] - t[0], 2));
                var d = l / (2 * s)
                  , u = c / s
                  , p = i + d
                  , h = u - d * d;
                return Math.sqrt(s) / 2 * (p * Math.sqrt(p * p + h) - d * Math.sqrt(d * d + h) + h * Math.log(Math.abs((p + Math.sqrt(p * p + h)) / (d + Math.sqrt(d * d + h)))))
            }
            function c(e, t) {
                return k[e][t]
            }
            function d(e, t, i) {
                var n, o, r, a = i.length - 1;
                if (0 === a)
                    return 0;
                if (0 === e) {
                    for (o = 0,
                    r = 0; r <= a; r++)
                        o += c(a, r) * Math.pow(1 - t, a - r) * Math.pow(t, r) * i[r];
                    return o
                }
                for (n = new Array(a),
                r = 0; r < a; r++)
                    n[r] = a * (i[r + 1] - i[r]);
                return d(e - 1, t, n)
            }
            function u(e, t, i) {
                var n = d(1, i, e)
                  , o = d(1, i, t)
                  , r = n * n + o * o;
                return Math.sqrt(r)
            }
            function p(e, t, i) {
                var n, o, r, a;
                for (void 0 === i && (i = 1),
                n = i / 2,
                o = 0,
                r = 0; r < 20; r++)
                    a = n * S[20][r] + n,
                    o += P[20][r] * u(e, t, a);
                return n * o
            }
            function h(e, t, i, n) {
                var o = e * n - t * i < 0 ? -1 : 1
                  , r = e * i + t * n;
                return r > 1 && (r = 1),
                r < -1 && (r = -1),
                o * Math.acos(r)
            }
            function m(e, t, i, n, o, r, a, s, l, c) {
                var d = c * (e - i) / 2 + l * (t - n) / 2
                  , u = -l * (e - i) / 2 + c * (t - n) / 2
                  , p = a * a
                  , m = s * s
                  , g = d * d
                  , f = u * u
                  , v = p * m - p * f - m * g;
                v < 0 && (v = 0),
                v /= p * f + m * g,
                v = Math.sqrt(v) * (o === r ? -1 : 1);
                var b = v * a / s * u
                  , y = v * -s / a * d
                  , w = c * b - l * y + (e + i) / 2
                  , C = l * b + c * y + (t + n) / 2
                  , x = (d - b) / a
                  , S = (u - y) / s
                  , P = (-d - b) / a
                  , k = (-u - y) / s
                  , A = h(1, 0, x, S)
                  , T = h(x, S, P, k);
                return 0 === r && T > 0 && (T -= _),
                1 === r && T < 0 && (T += _),
                [w, C, A, T]
            }
            function g(e, t) {
                var i = 4 / 3 * Math.tan(t / 4)
                  , n = Math.cos(e)
                  , o = Math.sin(e)
                  , r = Math.cos(e + t)
                  , a = Math.sin(e + t);
                return [n, o, n - o * i, o + n * i, r + a * i, a - r * i, r, a]
            }
            function f(e, t, i, n, o, r, a, s, l) {
                var c = 0
                  , d = []
                  , u = [];
                A(e, t, i, n, o, r, a, s, l).forEach((function(e) {
                    var t = new x(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7])
                      , i = t.getTotalLength();
                    c += i,
                    d.push(i),
                    u.push(t)
                }
                )),
                this.length = c,
                this.partialLengths = d,
                this.curves = u
            }
            function v(e, t, i, n) {
                this.x0 = e,
                this.x1 = t,
                this.y0 = i,
                this.y1 = n
            }
            var b = {
                a: 7,
                c: 6,
                h: 1,
                l: 2,
                m: 2,
                q: 4,
                s: 4,
                t: 2,
                v: 1,
                z: 0
            }
              , y = /([astvzqmhlc])([^astvzqmhlc]*)/gi
              , w = function(e) {
                var i = [];
                return e.replace(y, (function(e, n, o) {
                    var r = n.toLowerCase();
                    for (o = t(o),
                    "m" === r && o.length > 2 && (i.push([n].concat(o.splice(0, 2))),
                    r = "l",
                    n = "m" === n ? "l" : "L"); o.length >= 0; ) {
                        if (o.length === b[r])
                            return o.unshift(n),
                            i.push(o);
                        if (o.length < b[r])
                            throw new Error("malformed path data");
                        i.push([n].concat(o.splice(0, b[r])))
                    }
                }
                )),
                i
            }
              , C = /-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi
              , x = function(e, t, n, o, r, a, s, l) {
                return new i(e,t,n,o,r,a,s,l)
            };
            i.prototype = {
                constructor: i,
                init: function() {
                    this.length = this.getArcLength([this.a.x, this.b.x, this.c.x, this.d.x], [this.a.y, this.b.y, this.c.y, this.d.y])
                },
                getTotalLength: function() {
                    return this.length
                },
                getPointAtLength: function(e) {
                    var t = r(e, this.length, this.getArcLength, [this.a.x, this.b.x, this.c.x, this.d.x], [this.a.y, this.b.y, this.c.y, this.d.y]);
                    return this.getPoint([this.a.x, this.b.x, this.c.x, this.d.x], [this.a.y, this.b.y, this.c.y, this.d.y], t)
                },
                getTangentAtLength: function(e) {
                    var t = r(e, this.length, this.getArcLength, [this.a.x, this.b.x, this.c.x, this.d.x], [this.a.y, this.b.y, this.c.y, this.d.y])
                      , i = this.getDerivative([this.a.x, this.b.x, this.c.x, this.d.x], [this.a.y, this.b.y, this.c.y, this.d.y], t)
                      , n = Math.sqrt(i.x * i.x + i.y * i.y);
                    return n > 0 ? {
                        x: i.x / n,
                        y: i.y / n
                    } : {
                        x: 0,
                        y: 0
                    }
                },
                getPropertiesAtLength: function(e) {
                    var t, i = r(e, this.length, this.getArcLength, [this.a.x, this.b.x, this.c.x, this.d.x], [this.a.y, this.b.y, this.c.y, this.d.y]), n = this.getDerivative([this.a.x, this.b.x, this.c.x, this.d.x], [this.a.y, this.b.y, this.c.y, this.d.y], i), o = Math.sqrt(n.x * n.x + n.y * n.y);
                    t = o > 0 ? {
                        x: n.x / o,
                        y: n.y / o
                    } : {
                        x: 0,
                        y: 0
                    };
                    var a = this.getPoint([this.a.x, this.b.x, this.c.x, this.d.x], [this.a.y, this.b.y, this.c.y, this.d.y], i);
                    return {
                        x: a.x,
                        y: a.y,
                        tangentX: t.x,
                        tangentY: t.y
                    }
                }
            };
            var S = [[], [], [-.5773502691896257, .5773502691896257], [0, -.7745966692414834, .7745966692414834], [-.33998104358485626, .33998104358485626, -.8611363115940526, .8611363115940526], [0, -.5384693101056831, .5384693101056831, -.906179845938664, .906179845938664], [.6612093864662645, -.6612093864662645, -.2386191860831969, .2386191860831969, -.932469514203152, .932469514203152], [0, .4058451513773972, -.4058451513773972, -.7415311855993945, .7415311855993945, -.9491079123427585, .9491079123427585], [-.1834346424956498, .1834346424956498, -.525532409916329, .525532409916329, -.7966664774136267, .7966664774136267, -.9602898564975363, .9602898564975363], [0, -.8360311073266358, .8360311073266358, -.9681602395076261, .9681602395076261, -.3242534234038089, .3242534234038089, -.6133714327005904, .6133714327005904], [-.14887433898163122, .14887433898163122, -.4333953941292472, .4333953941292472, -.6794095682990244, .6794095682990244, -.8650633666889845, .8650633666889845, -.9739065285171717, .9739065285171717], [0, -.26954315595234496, .26954315595234496, -.5190961292068118, .5190961292068118, -.7301520055740494, .7301520055740494, -.8870625997680953, .8870625997680953, -.978228658146057, .978228658146057], [-.1252334085114689, .1252334085114689, -.3678314989981802, .3678314989981802, -.5873179542866175, .5873179542866175, -.7699026741943047, .7699026741943047, -.9041172563704749, .9041172563704749, -.9815606342467192, .9815606342467192], [0, -.2304583159551348, .2304583159551348, -.44849275103644687, .44849275103644687, -.6423493394403402, .6423493394403402, -.8015780907333099, .8015780907333099, -.9175983992229779, .9175983992229779, -.9841830547185881, .9841830547185881], [-.10805494870734367, .10805494870734367, -.31911236892788974, .31911236892788974, -.5152486363581541, .5152486363581541, -.6872929048116855, .6872929048116855, -.827201315069765, .827201315069765, -.9284348836635735, .9284348836635735, -.9862838086968123, .9862838086968123], [0, -.20119409399743451, .20119409399743451, -.3941513470775634, .3941513470775634, -.5709721726085388, .5709721726085388, -.7244177313601701, .7244177313601701, -.8482065834104272, .8482065834104272, -.937273392400706, .937273392400706, -.9879925180204854, .9879925180204854], [-.09501250983763744, .09501250983763744, -.2816035507792589, .2816035507792589, -.45801677765722737, .45801677765722737, -.6178762444026438, .6178762444026438, -.755404408355003, .755404408355003, -.8656312023878318, .8656312023878318, -.9445750230732326, .9445750230732326, -.9894009349916499, .9894009349916499], [0, -.17848418149584785, .17848418149584785, -.3512317634538763, .3512317634538763, -.5126905370864769, .5126905370864769, -.6576711592166907, .6576711592166907, -.7815140038968014, .7815140038968014, -.8802391537269859, .8802391537269859, -.9506755217687678, .9506755217687678, -.9905754753144174, .9905754753144174], [-.0847750130417353, .0847750130417353, -.2518862256915055, .2518862256915055, -.41175116146284263, .41175116146284263, -.5597708310739475, .5597708310739475, -.6916870430603532, .6916870430603532, -.8037049589725231, .8037049589725231, -.8926024664975557, .8926024664975557, -.9558239495713977, .9558239495713977, -.9915651684209309, .9915651684209309], [0, -.16035864564022537, .16035864564022537, -.31656409996362983, .31656409996362983, -.46457074137596094, .46457074137596094, -.600545304661681, .600545304661681, -.7209661773352294, .7209661773352294, -.8227146565371428, .8227146565371428, -.9031559036148179, .9031559036148179, -.96020815213483, .96020815213483, -.9924068438435844, .9924068438435844], [-.07652652113349734, .07652652113349734, -.22778585114164507, .22778585114164507, -.37370608871541955, .37370608871541955, -.5108670019508271, .5108670019508271, -.636053680726515, .636053680726515, -.7463319064601508, .7463319064601508, -.8391169718222188, .8391169718222188, -.912234428251326, .912234428251326, -.9639719272779138, .9639719272779138, -.9931285991850949, .9931285991850949], [0, -.1455618541608951, .1455618541608951, -.2880213168024011, .2880213168024011, -.4243421202074388, .4243421202074388, -.5516188358872198, .5516188358872198, -.6671388041974123, .6671388041974123, -.7684399634756779, .7684399634756779, -.8533633645833173, .8533633645833173, -.9200993341504008, .9200993341504008, -.9672268385663063, .9672268385663063, -.9937521706203895, .9937521706203895], [-.06973927331972223, .06973927331972223, -.20786042668822127, .20786042668822127, -.34193582089208424, .34193582089208424, -.469355837986757, .469355837986757, -.5876404035069116, .5876404035069116, -.6944872631866827, .6944872631866827, -.7878168059792081, .7878168059792081, -.8658125777203002, .8658125777203002, -.926956772187174, .926956772187174, -.9700604978354287, .9700604978354287, -.9942945854823992, .9942945854823992], [0, -.1332568242984661, .1332568242984661, -.26413568097034495, .26413568097034495, -.3903010380302908, .3903010380302908, -.5095014778460075, .5095014778460075, -.6196098757636461, .6196098757636461, -.7186613631319502, .7186613631319502, -.8048884016188399, .8048884016188399, -.8767523582704416, .8767523582704416, -.9329710868260161, .9329710868260161, -.9725424712181152, .9725424712181152, -.9947693349975522, .9947693349975522], [-.06405689286260563, .06405689286260563, -.1911188674736163, .1911188674736163, -.3150426796961634, .3150426796961634, -.4337935076260451, .4337935076260451, -.5454214713888396, .5454214713888396, -.6480936519369755, .6480936519369755, -.7401241915785544, .7401241915785544, -.820001985973903, .820001985973903, -.8864155270044011, .8864155270044011, -.9382745520027328, .9382745520027328, -.9747285559713095, .9747285559713095, -.9951872199970213, .9951872199970213]]
              , P = [[], [], [1, 1], [.8888888888888888, .5555555555555556, .5555555555555556], [.6521451548625461, .6521451548625461, .34785484513745385, .34785484513745385], [.5688888888888889, .47862867049936647, .47862867049936647, .23692688505618908, .23692688505618908], [.3607615730481386, .3607615730481386, .46791393457269104, .46791393457269104, .17132449237917036, .17132449237917036], [.4179591836734694, .3818300505051189, .3818300505051189, .27970539148927664, .27970539148927664, .1294849661688697, .1294849661688697], [.362683783378362, .362683783378362, .31370664587788727, .31370664587788727, .22238103445337448, .22238103445337448, .10122853629037626, .10122853629037626], [.3302393550012598, .1806481606948574, .1806481606948574, .08127438836157441, .08127438836157441, .31234707704000286, .31234707704000286, .26061069640293544, .26061069640293544], [.29552422471475287, .29552422471475287, .26926671930999635, .26926671930999635, .21908636251598204, .21908636251598204, .1494513491505806, .1494513491505806, .06667134430868814, .06667134430868814], [.2729250867779006, .26280454451024665, .26280454451024665, .23319376459199048, .23319376459199048, .18629021092773426, .18629021092773426, .1255803694649046, .1255803694649046, .05566856711617366, .05566856711617366], [.24914704581340277, .24914704581340277, .2334925365383548, .2334925365383548, .20316742672306592, .20316742672306592, .16007832854334622, .16007832854334622, .10693932599531843, .10693932599531843, .04717533638651183, .04717533638651183], [.2325515532308739, .22628318026289723, .22628318026289723, .2078160475368885, .2078160475368885, .17814598076194574, .17814598076194574, .13887351021978725, .13887351021978725, .09212149983772845, .09212149983772845, .04048400476531588, .04048400476531588], [.2152638534631578, .2152638534631578, .2051984637212956, .2051984637212956, .18553839747793782, .18553839747793782, .15720316715819355, .15720316715819355, .12151857068790319, .12151857068790319, .08015808715976021, .08015808715976021, .03511946033175186, .03511946033175186], [.2025782419255613, .19843148532711158, .19843148532711158, .1861610000155622, .1861610000155622, .16626920581699392, .16626920581699392, .13957067792615432, .13957067792615432, .10715922046717194, .10715922046717194, .07036604748810812, .07036604748810812, .03075324199611727, .03075324199611727], [.1894506104550685, .1894506104550685, .18260341504492358, .18260341504492358, .16915651939500254, .16915651939500254, .14959598881657674, .14959598881657674, .12462897125553388, .12462897125553388, .09515851168249279, .09515851168249279, .062253523938647894, .062253523938647894, .027152459411754096, .027152459411754096], [.17944647035620653, .17656270536699264, .17656270536699264, .16800410215645004, .16800410215645004, .15404576107681028, .15404576107681028, .13513636846852548, .13513636846852548, .11188384719340397, .11188384719340397, .08503614831717918, .08503614831717918, .0554595293739872, .0554595293739872, .02414830286854793, .02414830286854793], [.1691423829631436, .1691423829631436, .16427648374583273, .16427648374583273, .15468467512626524, .15468467512626524, .14064291467065065, .14064291467065065, .12255520671147846, .12255520671147846, .10094204410628717, .10094204410628717, .07642573025488905, .07642573025488905, .0497145488949698, .0497145488949698, .02161601352648331, .02161601352648331], [.1610544498487837, .15896884339395434, .15896884339395434, .15276604206585967, .15276604206585967, .1426067021736066, .1426067021736066, .12875396253933621, .12875396253933621, .11156664554733399, .11156664554733399, .09149002162245, .09149002162245, .06904454273764123, .06904454273764123, .0448142267656996, .0448142267656996, .019461788229726478, .019461788229726478], [.15275338713072584, .15275338713072584, .14917298647260374, .14917298647260374, .14209610931838204, .14209610931838204, .13168863844917664, .13168863844917664, .11819453196151841, .11819453196151841, .10193011981724044, .10193011981724044, .08327674157670475, .08327674157670475, .06267204833410907, .06267204833410907, .04060142980038694, .04060142980038694, .017614007139152118, .017614007139152118], [.14608113364969041, .14452440398997005, .14452440398997005, .13988739479107315, .13988739479107315, .13226893863333747, .13226893863333747, .12183141605372853, .12183141605372853, .10879729916714838, .10879729916714838, .09344442345603386, .09344442345603386, .0761001136283793, .0761001136283793, .057134425426857205, .057134425426857205, .036953789770852494, .036953789770852494, .016017228257774335, .016017228257774335], [.13925187285563198, .13925187285563198, .13654149834601517, .13654149834601517, .13117350478706238, .13117350478706238, .12325237681051242, .12325237681051242, .11293229608053922, .11293229608053922, .10041414444288096, .10041414444288096, .08594160621706773, .08594160621706773, .06979646842452049, .06979646842452049, .052293335152683286, .052293335152683286, .03377490158481415, .03377490158481415, .0146279952982722, .0146279952982722], [.13365457218610619, .1324620394046966, .1324620394046966, .12890572218808216, .12890572218808216, .12304908430672953, .12304908430672953, .11499664022241136, .11499664022241136, .10489209146454141, .10489209146454141, .09291576606003515, .09291576606003515, .07928141177671895, .07928141177671895, .06423242140852585, .06423242140852585, .04803767173108467, .04803767173108467, .030988005856979445, .030988005856979445, .013411859487141771, .013411859487141771], [.12793819534675216, .12793819534675216, .1258374563468283, .1258374563468283, .12167047292780339, .12167047292780339, .1155056680537256, .1155056680537256, .10744427011596563, .10744427011596563, .09761865210411388, .09761865210411388, .08619016153195327, .08619016153195327, .0733464814110803, .0733464814110803, .05929858491543678, .05929858491543678, .04427743881741981, .04427743881741981, .028531388628933663, .028531388628933663, .0123412297999872, .0123412297999872]]
              , k = [[1], [1, 1], [1, 2, 1], [1, 3, 3, 1]]
              , _ = 2 * Math.PI
              , A = function(e, t, i, n, o, r, a, s, l) {
                var c = Math.sin(o * _ / 360)
                  , d = Math.cos(o * _ / 360)
                  , u = d * (e - s) / 2 + c * (t - l) / 2
                  , p = -c * (e - s) / 2 + d * (t - l) / 2;
                if (0 === u && 0 === p)
                    return [];
                if (0 === i || 0 === n)
                    return [];
                i = Math.abs(i),
                n = Math.abs(n);
                var h = u * u / (i * i) + p * p / (n * n);
                h > 1 && (i *= Math.sqrt(h),
                n *= Math.sqrt(h));
                var f = m(e, t, s, l, r, a, i, n, c, d)
                  , v = []
                  , b = f[2]
                  , y = f[3]
                  , w = Math.max(Math.ceil(Math.abs(y) / (_ / 4)), 1);
                y /= w;
                for (var C = 0; C < w; C++)
                    v.push(g(b, y)),
                    b += y;
                return v.map((function(e) {
                    for (var t = 0; t < e.length; t += 2) {
                        var o = e[t + 0]
                          , r = e[t + 1];
                        o *= i,
                        r *= n;
                        var a = d * o - c * r
                          , s = c * o + d * r;
                        e[t + 0] = a + f[0],
                        e[t + 1] = s + f[1]
                    }
                    return e
                }
                ))
            }
              , T = function(e, t, i, n, o, r, a, s, l) {
                return new f(e,t,i,n,o,r,a,s,l)
            };
            f.prototype = {
                constructor: f,
                init: function() {},
                getTotalLength: function() {
                    return this.length
                },
                getPointAtLength: function(e) {
                    e < 0 ? e = 0 : e > this.length && (e = this.length);
                    for (var t = this.partialLengths.length - 1; this.partialLengths[t] >= e && this.partialLengths[t] > 0; )
                        t--;
                    t < this.partialLengths.length - 1 && t++;
                    for (var i = 0, n = 0; n < t; n++)
                        i += this.partialLengths[n];
                    return this.curves[t].getPointAtLength(e - i)
                },
                getTangentAtLength: function(e) {
                    e < 0 ? e = 0 : e > this.length && (e = this.length);
                    for (var t = this.partialLengths.length - 1; this.partialLengths[t] >= e && this.partialLengths[t] > 0; )
                        t--;
                    t < this.partialLengths.length - 1 && t++;
                    for (var i = 0, n = 0; n < t; n++)
                        i += this.partialLengths[n];
                    return this.curves[t].getTangentAtLength(e - i)
                },
                getPropertiesAtLength: function(e) {
                    var t = this.getTangentAtLength(e)
                      , i = this.getPointAtLength(e);
                    return {
                        x: i.x,
                        y: i.y,
                        tangentX: t.x,
                        tangentY: t.y
                    }
                }
            };
            var E = function(e, t, i, n) {
                return new v(e,t,i,n)
            };
            v.prototype.getTotalLength = function() {
                return Math.sqrt(Math.pow(this.x0 - this.x1, 2) + Math.pow(this.y0 - this.y1, 2))
            }
            ,
            v.prototype.getPointAtLength = function(e) {
                var t = e / Math.sqrt(Math.pow(this.x0 - this.x1, 2) + Math.pow(this.y0 - this.y1, 2))
                  , i = (this.x1 - this.x0) * t
                  , n = (this.y1 - this.y0) * t;
                return {
                    x: this.x0 + i,
                    y: this.y0 + n
                }
            }
            ,
            v.prototype.getTangentAtLength = function() {
                var e = Math.sqrt((this.x1 - this.x0) * (this.x1 - this.x0) + (this.y1 - this.y0) * (this.y1 - this.y0));
                return {
                    x: (this.x1 - this.x0) / e,
                    y: (this.y1 - this.y0) / e
                }
            }
            ,
            v.prototype.getPropertiesAtLength = function(e) {
                var t = this.getPointAtLength(e)
                  , i = this.getTangentAtLength();
                return {
                    x: t.x,
                    y: t.y,
                    tangentX: i.x,
                    tangentY: i.y
                }
            }
            ;
            var O = function(e) {
                function t(e) {
                    if (!e)
                        return null;
                    for (var r, a, s = w(e), l = [0, 0], c = [0, 0], d = 0; d < s.length; d++)
                        "M" === s[d][0] ? (l = [s[d][1], s[d][2]],
                        a = [l[0], l[1]],
                        o.push(null)) : "m" === s[d][0] ? (l = [s[d][1] + l[0], s[d][2] + l[1]],
                        a = [l[0], l[1]],
                        o.push(null)) : "L" === s[d][0] ? (i += Math.sqrt(Math.pow(l[0] - s[d][1], 2) + Math.pow(l[1] - s[d][2], 2)),
                        o.push(new E(l[0],s[d][1],l[1],s[d][2])),
                        l = [s[d][1], s[d][2]]) : "l" === s[d][0] ? (i += Math.sqrt(Math.pow(s[d][1], 2) + Math.pow(s[d][2], 2)),
                        o.push(new E(l[0],s[d][1] + l[0],l[1],s[d][2] + l[1])),
                        l = [s[d][1] + l[0], s[d][2] + l[1]]) : "H" === s[d][0] ? (i += Math.abs(l[0] - s[d][1]),
                        o.push(new E(l[0],s[d][1],l[1],l[1])),
                        l[0] = s[d][1]) : "h" === s[d][0] ? (i += Math.abs(s[d][1]),
                        o.push(new E(l[0],l[0] + s[d][1],l[1],l[1])),
                        l[0] = s[d][1] + l[0]) : "V" === s[d][0] ? (i += Math.abs(l[1] - s[d][1]),
                        o.push(new E(l[0],l[0],l[1],s[d][1])),
                        l[1] = s[d][1]) : "v" === s[d][0] ? (i += Math.abs(s[d][1]),
                        o.push(new E(l[0],l[0],l[1],l[1] + s[d][1])),
                        l[1] = s[d][1] + l[1]) : "z" === s[d][0] || "Z" === s[d][0] ? (i += Math.sqrt(Math.pow(a[0] - l[0], 2) + Math.pow(a[1] - l[1], 2)),
                        o.push(new E(l[0],a[0],l[1],a[1])),
                        l = [a[0], a[1]]) : "C" === s[d][0] ? (r = new x(l[0],l[1],s[d][1],s[d][2],s[d][3],s[d][4],s[d][5],s[d][6]),
                        i += r.getTotalLength(),
                        l = [s[d][5], s[d][6]],
                        o.push(r)) : "c" === s[d][0] ? (r = new x(l[0],l[1],l[0] + s[d][1],l[1] + s[d][2],l[0] + s[d][3],l[1] + s[d][4],l[0] + s[d][5],l[1] + s[d][6]),
                        i += r.getTotalLength(),
                        l = [s[d][5] + l[0], s[d][6] + l[1]],
                        o.push(r)) : "S" === s[d][0] ? (r = d > 0 && ["C", "c", "S", "s"].indexOf(s[d - 1][0]) > -1 ? new x(l[0],l[1],2 * l[0] - s[d - 1][s[d - 1].length - 4],2 * l[1] - s[d - 1][s[d - 1].length - 3],s[d][1],s[d][2],s[d][3],s[d][4]) : new x(l[0],l[1],l[0],l[1],s[d][1],s[d][2],s[d][3],s[d][4]),
                        i += r.getTotalLength(),
                        l = [s[d][3], s[d][4]],
                        o.push(r)) : "s" === s[d][0] ? (r = d > 0 && ["C", "c", "S", "s"].indexOf(s[d - 1][0]) > -1 ? new x(l[0],l[1],l[0] + r.d.x - r.c.x,l[1] + r.d.y - r.c.y,l[0] + s[d][1],l[1] + s[d][2],l[0] + s[d][3],l[1] + s[d][4]) : new x(l[0],l[1],l[0],l[1],l[0] + s[d][1],l[1] + s[d][2],l[0] + s[d][3],l[1] + s[d][4]),
                        i += r.getTotalLength(),
                        l = [s[d][3] + l[0], s[d][4] + l[1]],
                        o.push(r)) : "Q" === s[d][0] ? (r = l[0] == s[d][1] && l[1] == s[d][2] ? new E(s[d][1],s[d][3],s[d][2],s[d][4]) : new x(l[0],l[1],s[d][1],s[d][2],s[d][3],s[d][4]),
                        i += r.getTotalLength(),
                        o.push(r),
                        l = [s[d][3], s[d][4]],
                        c = [s[d][1], s[d][2]]) : "q" === s[d][0] ? (r = 0 != s[d][1] || 0 != s[d][2] ? new x(l[0],l[1],l[0] + s[d][1],l[1] + s[d][2],l[0] + s[d][3],l[1] + s[d][4]) : new E(l[0] + s[d][1],l[0] + s[d][3],l[1] + s[d][2],l[1] + s[d][4]),
                        i += r.getTotalLength(),
                        c = [l[0] + s[d][1], l[1] + s[d][2]],
                        l = [s[d][3] + l[0], s[d][4] + l[1]],
                        o.push(r)) : "T" === s[d][0] ? (r = d > 0 && ["Q", "q", "T", "t"].indexOf(s[d - 1][0]) > -1 ? new x(l[0],l[1],2 * l[0] - c[0],2 * l[1] - c[1],s[d][1],s[d][2]) : new E(l[0],s[d][1],l[1],s[d][2]),
                        o.push(r),
                        i += r.getTotalLength(),
                        c = [2 * l[0] - c[0], 2 * l[1] - c[1]],
                        l = [s[d][1], s[d][2]]) : "t" === s[d][0] ? (r = d > 0 && ["Q", "q", "T", "t"].indexOf(s[d - 1][0]) > -1 ? new x(l[0],l[1],2 * l[0] - c[0],2 * l[1] - c[1],l[0] + s[d][1],l[1] + s[d][2]) : new E(l[0],l[0] + s[d][1],l[1],l[1] + s[d][2]),
                        i += r.getTotalLength(),
                        c = [2 * l[0] - c[0], 2 * l[1] - c[1]],
                        l = [s[d][1] + l[0], s[d][2] + l[0]],
                        o.push(r)) : "A" === s[d][0] ? (r = new T(l[0],l[1],s[d][1],s[d][2],s[d][3],s[d][4],s[d][5],s[d][6],s[d][7]),
                        i += r.getTotalLength(),
                        l = [s[d][6], s[d][7]],
                        o.push(r)) : "a" === s[d][0] && (r = new T(l[0],l[1],s[d][1],s[d][2],s[d][3],s[d][4],s[d][5],l[0] + s[d][6],l[1] + s[d][7]),
                        i += r.getTotalLength(),
                        l = [l[0] + s[d][6], l[1] + s[d][7]],
                        o.push(r)),
                        n.push(i);
                    return t
                }
                var i = 0
                  , n = []
                  , o = [];
                t.getTotalLength = function() {
                    return i
                }
                ,
                t.getPointAtLength = function(e) {
                    var t = r(e);
                    return o[t.i].getPointAtLength(t.fraction)
                }
                ,
                t.getTangentAtLength = function(e) {
                    var t = r(e);
                    return o[t.i].getTangentAtLength(t.fraction)
                }
                ,
                t.getPropertiesAtLength = function(e) {
                    var t = r(e);
                    return o[t.i].getPropertiesAtLength(t.fraction)
                }
                ,
                t.getParts = function() {
                    for (var e = [], t = 0; t < o.length; t++)
                        if (null != o[t]) {
                            var i = {};
                            i.start = o[t].getPointAtLength(0),
                            i.end = o[t].getPointAtLength(n[t] - n[t - 1]),
                            i.length = n[t] - n[t - 1],
                            function(e) {
                                i.getPointAtLength = function(t) {
                                    return e.getPointAtLength(t)
                                }
                                ,
                                i.getTangentAtLength = function(t) {
                                    return e.getTangentAtLength(t)
                                }
                                ,
                                i.getPropertiesAtLength = function(t) {
                                    return e.getPropertiesAtLength(t)
                                }
                            }(o[t]),
                            e.push(i)
                        }
                    return e
                }
                ;
                var r = function(e) {
                    e < 0 ? e = 0 : e > i && (e = i);
                    for (var t = n.length - 1; n[t] >= e && n[t] > 0; )
                        t--;
                    return t++,
                    {
                        fraction: e - n[t - 1],
                        i: t
                    }
                };
                return t(e)
            };
            e.svgPathProperties = O,
            e.parse = w,
            e.Bezier = x,
            Object.defineProperty(e, "__esModule", {
                value: !0
            })
        }
        ))
    },
    b730: function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("b421")
          , o = i("bb01");
        (function() {
            function e(e, t, r, a, s, l, c, d, u, p, h) {
                var m;
                e.filteredProducts = [],
                e.currentPage = 1,
                e.numPerPage = 10,
                e.maxSize = 5,
                e.productCount = 0,
                e.searchString = "",
                e.showOptionsButton = !1,
                e.usernames = null,
                e.isAdminUser = !1,
                e.isParentUser = !1,
                e.templateIdCopied = "",
                e.sortMode = "ASC",
                e.sortBy = "ModifiedDate",
                e.isAllowedToExportTemplates = function(e) {
                    return e && e.AccessRoles.Serialized.split(",").includes("templates-import-export")
                }
                ,
                p.initFonts(),
                e.$on("route:success", async(t,n)=>{
                    e.showOptionsButton = n.ShowCustomilyOptions,
                    e.isAdminUser = n.AccessRoles.Serialized.split(",").includes("admin") || n.ImpersonatedFromAdminUser,
                    e.isParentUser = n.AccessRoles.Serialized.split(",").includes("parent") || n.ImpersonatedFromParentUser,
                    !e.isAdminUser && null != n.UserReview && n.UserReview.Show && (n.UserReview.Show = !1,
                    l.show({
                        controller: "UserReviewModalCtrl",
                        template: i("6ee0"),
                        parent: angular.element(document.body),
                        locals: {
                            msgType: n.UserReview.MessageType,
                            msgVal: n.UserReview.MessageValue
                        },
                        clickOutsideToClose: !1,
                        escapeToClose: !1
                    }).then(()=>{
                        console.log("userReview dialog closed")
                    }
                    )),
                    (e.isAdminUser || e.isParentUser) && (e.usernames = await a.getAllUsernames(),
                    e.selectedUser = n.Username,
                    c(()=>e.$apply()))
                }
                ),
                e.$watch("currentPage + numPerPage", (function() {
                    e.begin = (e.currentPage - 1) * e.numPerPage,
                    e.end = e.begin + e.numPerPage,
                    e.getProducts()
                }
                )),
                e.getProducts = function() {
                    e.searchString = e.searchString.trim(),
                    t.getProductsFromTo(e.searchString, e.sortBy, e.sortMode, e.begin, e.numPerPage).then((function(i) {
                        e.filteredProducts = i,
                        t.getProductsCount(e.searchString).then((function(t) {
                            e.productCount = t,
                            u.stop()
                        }
                        ))
                    }
                    )),
                    u.start("Loading products")
                }
                ,
                e.delete = function(i, n, o) {
                    var r = l.confirm().title("Delete Template").htmlContent('Are you sure you want to delete "<b>' + o.name + '</b>" with id "<b>' + o.id + '</b>"?').ok("Yes").cancel("No");
                    l.show(r).then((function() {
                        u.start("Deleting"),
                        t.deleteProduct(i).then((function() {
                            u.stop(),
                            e.getProducts()
                        }
                        ))
                    }
                    ), (function() {}
                    ))
                }
                ,
                e.clone = function(i) {
                    u.start("Clone Template"),
                    t.cloneProduct(i.id).then((function() {
                        u.stop(),
                        e.getProducts()
                    }
                    )).catch((function() {
                        u.stop()
                    }
                    ))
                }
                ,
                e.edit = function(e) {
                    u.start("Loading template..."),
                    t.getProduct(e).then((function(e) {
                        r.loadProduct(e),
                        u.stop(),
                        s.path("/createProduct1")
                    }
                    ))
                }
                ,
                e.addProduct = function() {
                    r.clearProduct(),
                    s.path("/createProduct1")
                }
                ,
                e.editItem = function(e, t) {
                    e.editing = !0,
                    c(()=>t.currentTarget.nextElementSibling.focus(), 100)
                }
                ,
                e.cancelEditItem = function(e) {
                    e.editing = !1
                }
                ,
                e.exportTemplate = async function(e) {
                    l.show(l.alert().parent(document.body).clickOutsideToClose(!0).title("Export template").htmlContent('Once you click "Export template" the exporting process will begin. It can take a couple of minutes so please be patient.<br/>If prompted with an "Almost there screen", wait a couple of minutes and refresh the page to download the exported template.').ok("Export template")).then(()=>{
                        u.start(),
                        t.getExportUrl(e.id).then(e=>{
                            u.stop(),
                            window.open(e, "_blank")
                        }
                        ).catch(e=>{
                            window.rumReportError(e),
                            u.stop()
                        }
                        )
                    }
                    )
                }
                ,
                e.uploadProductZip = async function(i) {
                    const n = i.target.files;
                    if (n && n[0])
                        try {
                            u.start("Uploading zip");
                            const i = n[0]
                              , r = await t.getProductImportSignedUrl();
                            await Object(o["a"])(r.SignedUrl, r.Mime, i, null, t=>{
                                u.message(`Uploading zip ${parseInt(t)}%`),
                                c(()=>e.$apply())
                            }
                            ),
                            u.message("Importing template");
                            const a = await t.importProductZip(r.Name);
                            u.stop(),
                            l.show(l.alert().parent(document.body).clickOutsideToClose(!0).title("Template import").htmlContent(`Template imported with ID '${a}'`).ok("OK")),
                            p.clearFontsCache(),
                            p.initFonts(),
                            e.getProducts()
                        } catch (error) {
                            console.error(error),
                            l.show(l.alert().parent(document.body).clickOutsideToClose(!0).title("Template import error").htmlContent("Something wrong happened while importing the template!").ok("OK"))
                        } finally {
                            $("#productImportInput").get(0).value = null
                        }
                }
                ,
                e.doneEditing = async function(i) {
                    if (i.name)
                        try {
                            i.editing = !1,
                            u.start(),
                            await t.renameProduct(i.id, i.name)
                        } catch (error) {
                            console.error("Error renaming product: ", error),
                            window.rumReportError(error, e=>{
                                e.setContext("product", {
                                    id: i.id
                                })
                            }
                            )
                        } finally {
                            u.stop(),
                            c(()=>e.$apply())
                        }
                }
                ,
                e.goToOptions = function() {
                    s.path("/options")
                }
                ,
                e.changeUser = async function(e) {
                    await a.impersonate(e),
                    p.clearFontsCache(),
                    d.location.reload()
                }
                ,
                e.goToLibraries = function() {
                    s.path("/libraries")
                }
                ,
                e.getThumbUrl = function(e) {
                    return e ? Object(n["a"])(e, !0) : ""
                }
                ,
                null === (m = window.Appcues) || void 0 === m || m.on("flow_started", (function(e) {
                    h.setCurrentFlow(e.flowId)
                }
                )),
                e.copyTemplateId = function(t) {
                    const i = t.currentTarget.innerText.trim()
                      , n = document.createElement("textarea");
                    n.value = i,
                    t.currentTarget.appendChild(n),
                    n.select();
                    try {
                        document.execCommand("copy"),
                        e.templateIdCopied = i
                    } catch (o) {
                        console.log("Unable to copy to clipboard.", o)
                    }
                    c(()=>{
                        e.templateIdCopied = ""
                    }
                    , 1500),
                    t.currentTarget.removeChild(n)
                }
                ,
                e.sortTemplates = function(t) {
                    e.sortBy == t ? e.sortMode = "ASC" == e.sortMode ? "DESC" : "ASC" : e.sortBy = t,
                    e.getProducts()
                }
            }
            e.$inject = ["$scope", "ProductAPIService", "ProductService", "UsersAPIService", "$location", "$mdDialog", "$timeout", "$window", "blockUI", "FontManagerService", "AppCuesService"],
            angular.module("app.ctrls").controller("HomeCtrl", e)
        }
        )()
    },
    b8ef: function(e, t, i) {
        e.exports = i.p + "img/curved-text.e5b97b86.svg?x-request=html"
    },
    b961: function(e, t, i) {
        "use strict";
        i.d(t, "e", (function() {
            return o
        }
        )),
        i.d(t, "d", (function() {
            return r
        }
        )),
        i.d(t, "f", (function() {
            return a
        }
        )),
        i.d(t, "a", (function() {
            return s
        }
        )),
        i.d(t, "c", (function() {
            return l
        }
        )),
        i.d(t, "b", (function() {
            return c
        }
        ));
        var n = i("406d");
        const o = async(e,t,i,o,r)=>{
            const a = await n["a"].get("/Admin/DesignTemplates", {
                params: {
                    from: e,
                    count: t,
                    search: i,
                    sortBy: o,
                    sortMode: r
                }
            });
            return a.data
        }
          , r = async e=>{
            const t = await n["a"].get("/Admin/DesignTemplates/" + e);
            return t.data
        }
          , a = async(e,t)=>{
            const i = t ? "/Admin/DesignTemplates/" + t : "/Admin/DesignTemplates"
              , o = await n["a"].put(i, e);
            return o.data
        }
          , s = async e=>{
            const t = await n["a"].post(`/Admin/DesignTemplates/${e}/Clone`);
            return t.data
        }
          , l = async e=>{
            const t = await n["a"].delete("/Admin/DesignTemplates/" + e);
            return t.data
        }
          , c = async e=>{
            const t = await n["a"].post(`/Admin/DesignTemplates/${e}/OptionSet`);
            return t.data
        }
    },
    ba69: function(e, t) {
        var i = '<div class="edit-library scrolling-page" ng-controller="EditLibraryCtrl" style="margin-top:5px" ng-cloak> <title>{{ libraryTypeStrings[library.Type] }} Library</title> <div class="col-xs-12" style="margin-top:30px"> <div class="col-xs-6" style="padding:0"> <md-button class="md-raised btn-turquise col-xs-2 ml0" ng-click="goToLibraries()">Back</md-button> <md-button ng-disabled="currentNavItem !== \'\' && currentNavItem !== \'category\'" class="md-raised md-primary col-xs-4" ng-click="addCategory()"> <div ng-if="!addCategoryLoading">Add Category</div> <div class="col-xs-12" style="text-align:center;padding:5px" ng-if="addCategoryLoading"> <md-progress-circular style="margin:auto" md-mode="indeterminate" md-diameter="30px"></md-progress-circular> </div> </md-button> <md-button ng-disabled="currentNavItem !== \'\' && currentNavItem !== \'library\'" class="md-raised md-primary col-xs-4" ng-click="addElement()"> <div ng-if="!addElementLoading">Add {{ libraryTypeStrings[library.Type] }}</div> <div class="col-xs-12" style="text-align:center;padding:5px" ng-if="addElementLoading"> <md-progress-circular style="margin:auto" md-mode="indeterminate" md-diameter="30px"></md-progress-circular> </div> </md-button> </div> <div style="float:right"> <md-input-container style="margin-top:2%;text-align:left" class="hide-validation-error"> <md-tooltip md-direction="bottom"> Search by {{ currentNavItem === \'library\' ? \'position\' : \'name\' }} </md-tooltip> <label>{{ currentNavItem === \'category\' ? \'Category\' : \'Position\' }}</label> <input ng-model="searchString"/> </md-input-container> <md-button class="md-raised btn-turquise" style="margin-top:0" ng-click="getList()">Search</md-button> </div> <div class="clearfix"></div> <table class="table table-striped table-inverse library-table" style="margin-bottom:0"> <thead ng-if="currentNavItem !== \'category\'" class="thead-inverse"> <tr ng-if="library.Type === 0"> <th>Option</th> <th>Color</th> <th ng-if="library.ColorMode === 0">HEX</th> <th ng-if="library.ColorMode === 1">CMYK</th> <th>Alpha</th> <th>{{ libraryTypeStrings[library.Type] }} Name</th> </tr> <tr ng-if="library.Type === 1"> <th>Option</th> <th>Font</th> <th>{{ libraryTypeStrings[library.Type] }} Name</th> </tr> <tr ng-if="library.Type === 2"> <th>Option</th> <th>Vector</th> <th>{{ libraryTypeStrings[library.Type] }} Name</th> </tr> <tr ng-if="library.Type === 3"> <th>Option</th> <th>Image</th> <th>{{ libraryTypeStrings[library.Type] }} Name</th> </tr> </thead> <thead ng-if="currentNavItem == \'category\'" class="thead-inverse"> <tr> <th ng-if="library.Type === 2 || library.Type === 3"></th> <th>Category</th> </tr> </thead> <tbody ng-if="currentNavItem !== \'category\'"> <tr ng-repeat="element in filteredElements"> <td>{{ element.position }}</td> <td ng-if="library.Type === 0"> <div class="color-swatch" ng-style="{\'background-color\': toRgba(element.hex, element.alpha) }"></div> </td> <td ng-if="library.Type === 0 && library.ColorMode === 0">{{ element.hex }}</td> <td ng-if="library.Type === 0 && library.ColorMode === 1" style="width:30%"> {{ toStringCmyk(element) }} </td> <td ng-if="library.Type === 0">{{ (element.alpha * 100).toFixed(2) + \'%\' }}</td> <td ng-if="library.Type === 1" style="width:30%">{{ fontPathToName(element.Path) }}</td> <td ng-if="library.Type === 2"> <img ng-src="{{ element.ThumbnailPath }}"/> </td> <td ng-if="library.Type === 3"> <img ng-src="{{ element.ThumbnailPath }}"/> </td> <td style="width:100%;cursor:pointer" ng-click="editItem(element, $event)"> <md-tooltip md-direction="left" ng-show="!element.editing">Rename</md-tooltip> <span style="width:80%" ng-hide="element.editing">{{ element.Name }}</span> <md-input-container class="m0"> <input style="width:80%" ng-show="element.editing" ng-keydown="$event.keyCode === 13 && doBlur($event)" ng-model="element.Name" ng-blur="updateLibraryName(element, libraryTypeStrings[library.Type])" autofocus required/> </md-input-container> </td> <td> <md-button class="btn-small md-raised btn-turquise m0" ng-click="edit(element)">Edit</md-button> </td> <td> <md-button class="btn-small md-raised btn-dgray m0" ng-click="delete(element)">Delete</md-button> </td> </tr> </tbody> <tbody ng-if="currentNavItem === \'category\'"> <tr ng-repeat="element in filteredElements"> <td style="min-width:100px" ng-if="library.Type === 2 || library.Type === 3"> <md-tooltip md-direction="top">Change thumbnail</md-tooltip> <img style="cursor:pointer" ng-src="{{ element.ThumbnailPath }}" ng-click="editCategoryThumbnail(element)"/> </td> <td style="width:100%"> <md-input-container style="margin:0"> <md-tooltip md-direction="right">Rename</md-tooltip> <span ng-hide="element.editing" ng-click="editCategoryName(element)">{{ element.Name }}</span> <input ng-show="element.editing" ng-keydown="$event.keyCode === 13 && doneEditing(element)" ng-blur="doneEditing(element)" ng-model="element.Name" autofocus required/> </md-input-container> </td> <td> <md-button class="btn-small md-raised btn-turquise m0" ng-click="editCategory(element)">Edit</md-button> </td> <td> <md-button class="btn-small md-raised btn-dgray m0" ng-click="deleteCategory(element)">Delete</md-button> </td> </tr> </tbody> </table> <div class="text-center"> <pagination ng-model="currentPage" total-items="elementsCount" items-per-page="numPerPage" max-size="maxSize" boundary-links="true"> </pagination> </div> </div> </div> ';
        e.exports = i
    },
    bae2: function(e, t) {
        var i = '<title>Store</title> <div class="shopify-page" ng-controller="StoreCtrl" ng-cloak> <style>.sh-iframe-loader{top:0;right:0;bottom:0;left:0;overflow:hidden;width:100%;height:100%;background:rgba(255,255,255);display:flex;justify-content:center;align-items:center}.ssh-iframe-loader md-progress-circular path{stroke:#7258e0!important}</style> <div class="sh-iframe-loader" ng-show="iFrameLoading"> <md-progress-circular md-mode="indeterminate" md-diameter="100"></md-progress-circular> </div> <iframe ng-src="{{ iFrameUrl }}" iframe-onload="iFrameLoaded()"></iframe> </div> ';
        e.exports = i
    },
    bb01: function(e, t, i) {
        "use strict";
        i.d(t, "a", (function() {
            return s
        }
        ));
        var n = i("bc3a")
          , o = i.n(n);
        const r = e=>new Promise(t=>{
            setTimeout(t, e)
        }
        )
          , a = 3
          , s = async(e,t,i,n,s)=>new Promise(async(l,c)=>{
            let d = 0;
            while (1)
                try {
                    const r = {
                        "Content-Type": t
                    };
                    return n && (r["Cache-Control"] = n),
                    await o.a.put(e, i, {
                        headers: r,
                        onUploadProgress: e=>{
                            const t = e.loaded / e.total * 100;
                            s && s(t)
                        }
                    }),
                    void l()
                } catch (error) {
                    if (++d,
                    d >= a)
                        return void c(error);
                    console.warn(`Failed uploading to ${e} with mime ${t}. Retrying ${d}/${a}`),
                    await r(2e3)
                }
        }
        )
    },
    bb95: function(e, t) {
        fabric.MaskedImage = fabric.util.createClass(fabric.Image, {
            type: "masked-image",
            cacheProperties: fabric.Group.prototype.cacheProperties.concat("maskElement", "maskScaleX", "maskScaleY", "maskAngle", "maskOffsetX", "maskOffsetY", "maskHeight", "maskWidth"),
            maskElement: null,
            maskScaleX: 1,
            maskScaleY: 1,
            maskAngle: 0,
            maskOffsetX: 0,
            maskOffsetY: 0,
            maskHeight: 0,
            maskWidth: 0,
            _maskCanvas: null,
            initialize: function(e, t) {
                this.callSuper("initialize", e, t)
            },
            _resizeMaskImage: function(e, t) {
                this._maskCanvas || (this._maskCanvas = document.createElement("canvas"));
                const i = this._maskCanvas;
                if (i.width != e || i.height != t) {
                    const o = this._maskCanvas.getContext("2d")
                      , r = new fabric.Color(this.maskingColor).getSource();
                    i.width = e,
                    i.height = t,
                    o.drawImage(this.maskElement, 0, 0, i.width, i.height);
                    const a = o.getImageData(0, 0, i.width, i.height)
                      , s = a.data
                      , l = s.length
                      , c = 60;
                    for (var n = 0; n < l; n += 4)
                        (Math.abs(s[n] - r[0]) > c || Math.abs(s[n + 1] - r[1]) > c || Math.abs(s[n + 2] - r[2]) > c || Math.abs(s[n + 3] - 255) > c) && (s[n + 3] = 0);
                    o.putImageData(a, 0, 0)
                }
            },
            _set: function(e, t) {
                "maskElement" !== e && "maskHeight" !== e && "maskWidth" !== e || (this._maskCanvas = null,
                "maskHeight" !== e && "maskWidth" !== e || !Number.isNaN(t) && Number.isFinite(t) || (t = 1)),
                this.callSuper("_set", e, t)
            },
            _render: function(e) {
                if (this.maskElement) {
                    this._resizeMaskImage(this.maskWidth, this.maskHeight),
                    e.save(),
                    e.translate(this.maskOffsetX, this.maskOffsetY),
                    e.rotate(this.maskAngle * Math.PI / 180),
                    e.scale(this.maskScaleX, this.maskScaleY),
                    e.drawImage(this._element, -this.width / 2, -this.height / 2),
                    e.restore(),
                    e.globalCompositeOperation = "destination-in";
                    const t = -this._maskCanvas.height / 2
                      , i = -this._maskCanvas.width / 2;
                    e.drawImage(this._maskCanvas, i, t)
                } else
                    this.callSuper("_render", e)
            }
        })
    },
    bc62: function(e, t, i) {
        (function() {
            function e(e, t, n) {
                var o = {
                    libraryType: "color"
                }
                  , r = !1;
                function a() {
                    return r ? o : null
                }
                function s(n) {
                    return e((function(e) {
                        r = !0,
                        o.libraryType = n,
                        t.show({
                            template: i("fd57"),
                            parent: angular.element(document.body),
                            clickOutsideToClose: !0
                        }).then((function(t) {
                            r = !1,
                            e(t)
                        }
                        ), (function() {
                            r = !1,
                            e()
                        }
                        ))
                    }
                    ))
                }
                function l() {
                    return s("color")
                }
                function c() {
                    return s("font")
                }
                function d() {
                    return s("vector")
                }
                function u() {
                    return s("image")
                }
                function p(e, t) {
                    t.fontLibraryId && n.getLibraryName(t.fontLibraryId).then((function(t) {
                        e.selectedFontLibraryName = t
                    }
                    )),
                    t.colorLibraryId && n.getLibraryName(t.colorLibraryId).then((function(t) {
                        e.selectedColorLibraryName = t
                    }
                    )),
                    t.imageLibraryId && n.getLibraryName(t.imageLibraryId).then((function(t) {
                        e.selectedImageLibraryName = t
                    }
                    )),
                    t.vectorLibraryId && n.getLibraryName(t.vectorLibraryId).then((function(t) {
                        e.selectedVectorLibraryName = t
                    }
                    ))
                }
                return {
                    showColorLibraryPicker: l,
                    getCurrentPickerSettings: a,
                    showFontLibraryPicker: c,
                    showVectorLibraryPicker: d,
                    showImageLibraryPicker: u,
                    updateLibraryNames: p
                }
            }
            e.$inject = ["$q", "$mdDialog", "LibrariesAPIService"],
            angular.module("app.shared.services").factory("LibrariesUtilService", e)
        }
        )()
    },
    bcdb: function(e, t, i) {
        e.exports = i.p + "img/undo-arrow.2cf22e0e.svg?x-request=html"
    },
    be9f: function(e, t, i) {
        /*!
   angular-block-ui v0.2.0
   (c) 2015 (null) McNull https://github.com/McNull/angular-block-ui
   License: MIT
*/
        (function(e) {
            const t = e.module("blockUI", []);
            function n(t) {
                try {
                    e.module(t)
                } catch (i) {
                    return !1
                }
                return !0
            }
            t.config(["$provide", "$httpProvider", function(e, t) {
                e.decorator("$exceptionHandler", ["$delegate", "$injector", function(e, t) {
                    let i, n;
                    return function(o, r) {
                        if (n = n || t.get("blockUIConfig"),
                        n.resetOnException)
                            try {
                                i = i || t.get("blockUI"),
                                i.instances.reset()
                            } catch (a) {
                                console.log("$exceptionHandler", o)
                            }
                        e(o, r)
                    }
                }
                ]),
                t.interceptors.push("blockUIHttpInterceptor")
            }
            ]),
            t.run(["$document", "blockUIConfig", "$templateCache", function(e, t, i) {
                t.autoInjectBodyBlock && e.find("body").attr("block-ui", "main"),
                t.template && (t.templateUrl = "$$block-ui-template$$",
                i.put(t.templateUrl, t.template))
            }
            ]),
            t.config(["$provide", function(e) {
                e.decorator("$location", o)
            }
            ]);
            var o = ["$delegate", "blockUI", "blockUIConfig", function(t, i, n) {
                if (n.blockBrowserNavigation) {
                    i.$_blockLocationChange = !0;
                    const n = ["url", "path", "search", "hash", "state"];
                    function o(e) {
                        const n = t[e];
                        t[e] = function() {
                            const e = n.apply(t, arguments);
                            return e === t && (i.$_blockLocationChange = !1),
                            e
                        }
                    }
                    e.forEach(n, o)
                }
                return t
            }
            ];
            function r(e, t, i) {
                if (i.blockBrowserNavigation) {
                    function o() {
                        e.$on("$locationChangeStart", (function(e) {
                            t.$_blockLocationChange && t.state().blockCount > 0 && e.preventDefault()
                        }
                        )),
                        e.$on("$locationChangeSuccess", (function() {
                            t.$_blockLocationChange = i.blockBrowserNavigation
                        }
                        ))
                    }
                    if (n("ngRoute"))
                        var r = e.$on("$viewContentLoaded", (function() {
                            r(),
                            o()
                        }
                        ));
                    else
                        o()
                }
            }
            t.directive("blockUiContainer", ["blockUIConfig", "blockUiContainerLinkFn", function(e, t) {
                return {
                    scope: !0,
                    restrict: "A",
                    templateUrl: e.templateUrl,
                    compile: function(e) {
                        return t
                    }
                }
            }
            ]).factory("blockUiContainerLinkFn", ["blockUI", "blockUIUtils", function(e, t) {
                return function(e, t, i) {
                    const n = t.inheritedData("block-ui");
                    if (!n)
                        throw new Error("No parent block-ui service instance located.");
                    e.state = n.state()
                }
            }
            ]),
            t.directive("blockUi", ["blockUiCompileFn", function(e) {
                return {
                    scope: !0,
                    restrict: "A",
                    compile: e
                }
            }
            ]).factory("blockUiCompileFn", ["blockUiPreLinkFn", function(e) {
                return function(t, i) {
                    return t.append('<div block-ui-container class="block-ui-container"></div>'),
                    {
                        pre: e
                    }
                }
            }
            ]).factory("blockUiPreLinkFn", ["blockUI", "blockUIUtils", "blockUIConfig", function(e, t, i) {
                return function(n, o, a) {
                    o.hasClass("block-ui") || o.addClass(i.cssClass),
                    a.$observe("blockUiMessageClass", (function(e) {
                        n.$_blockUiMessageClass = e
                    }
                    ));
                    const s = a.blockUi || "_" + n.$id
                      , l = e.instances.get(s);
                    if ("main" === s)
                        r(n, l, i);
                    else {
                        const e = o.inheritedData("block-ui");
                        e && (l._parent = e)
                    }
                    n.$on("$destroy", (function() {
                        l.release()
                    }
                    )),
                    l.addRef(),
                    n.$_blockUiState = l.state(),
                    n.$watch("$_blockUiState.blocking", (function(e) {
                        o.attr("aria-busy", !!e),
                        o.toggleClass("block-ui-visible", !!e)
                    }
                    )),
                    n.$watch("$_blockUiState.blockCount > 0", (function(e) {
                        o.toggleClass("block-ui-active", !!e)
                    }
                    ));
                    const c = a.blockUiPattern;
                    if (c) {
                        const e = t.buildRegExp(c);
                        l.pattern(e)
                    }
                    o.data("block-ui", l)
                }
            }
            ]),
            t.constant("blockUIConfig", {
                template: i("d3b5"),
                delay: 250,
                message: "Loading",
                autoBlock: !0,
                resetOnException: !0,
                requestFilter: e.noop,
                autoInjectBodyBlock: !0,
                cssClass: "block-ui block-ui-anim-fade",
                blockBrowserNavigation: !1
            }),
            t.factory("blockUIHttpInterceptor", ["$q", "$injector", "blockUIConfig", "$templateCache", function(e, t, i, n) {
                let o;
                function r() {
                    o = o || t.get("blockUI")
                }
                function a(e) {
                    i.autoBlock && e && !e.$_noBlock && e.$_blocks && (r(),
                    e.$_blocks.stop())
                }
                function s(t) {
                    try {
                        a(t.config)
                    } catch (i) {
                        console.log("httpRequestError", i)
                    }
                    return e.reject(t)
                }
                return {
                    request: function(e) {
                        if (i.autoBlock && ("GET" != e.method || !n.get(e.url))) {
                            const t = i.requestFilter(e);
                            !1 === t ? e.$_noBlock = !0 : (r(),
                            e.$_blocks = o.instances.locate(e),
                            e.$_blocks.start(t))
                        }
                        return e
                    },
                    requestError: s,
                    response: function(e) {
                        return e && a(e.config),
                        e
                    },
                    responseError: s
                }
            }
            ]),
            t.factory("blockUI", ["blockUIConfig", "$timeout", "blockUIUtils", "$document", function(t, i, n, o) {
                const r = o.find("body");
                function a(a) {
                    const s = this;
                    let c, d = {
                        id: a,
                        blockCount: 0,
                        message: t.message,
                        blocking: !1,
                        isChrome: window.chrome
                    }, u = [];
                    this._id = a,
                    this._refs = 0,
                    this.start = function(r) {
                        r = d.blockCount > 0 ? r || d.message || t.message : r || t.message,
                        d.message = r,
                        d.blockCount++;
                        const a = e.element(o[0].activeElement);
                        a.length && n.isElementInBlockScope(a, s) && (s._restoreFocus = a[0],
                        i((function() {
                            s._restoreFocus && s._restoreFocus.blur()
                        }
                        ))),
                        c || (c = i((function() {
                            c = null,
                            d.blocking = !0
                        }
                        ), t.delay))
                    }
                    ,
                    this._cancelStartTimeout = function() {
                        c && (i.cancel(c),
                        c = null)
                    }
                    ,
                    this.stop = function() {
                        d.blockCount = Math.max(0, --d.blockCount),
                        0 === d.blockCount && s.reset(!0)
                    }
                    ,
                    this.message = function(e) {
                        d.message = e
                    }
                    ,
                    this.pattern = function(e) {
                        return void 0 !== e && (s._pattern = e),
                        s._pattern
                    }
                    ,
                    this.reset = function(t) {
                        s._cancelStartTimeout(),
                        d.blockCount = 0,
                        d.blocking = !1,
                        !s._restoreFocus || o[0].activeElement && o[0].activeElement !== r[0] || (s._restoreFocus.focus(),
                        s._restoreFocus = null);
                        try {
                            t && e.forEach(u, (function(e) {
                                e()
                            }
                            ))
                        } finally {
                            u.length = 0
                        }
                    }
                    ,
                    this.done = function(e) {
                        u.push(e)
                    }
                    ,
                    this.state = function() {
                        return d
                    }
                    ,
                    this.addRef = function() {
                        s._refs += 1
                    }
                    ,
                    this.release = function() {
                        --s._refs <= 0 && l.instances._destroy(s)
                    }
                }
                const s = [];
                s.get = function(e) {
                    if (!isNaN(e))
                        throw new Error("BlockUI id cannot be a number");
                    let t = s[e];
                    return t || (t = s[e] = new a(e),
                    s.push(t)),
                    t
                }
                ,
                s._destroy = function(t) {
                    if (e.isString(t) && (t = s[t]),
                    t) {
                        t.reset();
                        const e = n.indexOf(s, t);
                        s.splice(e, 1),
                        delete s[t.state().id]
                    }
                }
                ,
                s.locate = function(e) {
                    const t = [];
                    n.forEachFnHook(t, "start"),
                    n.forEachFnHook(t, "stop");
                    let i = s.length;
                    while (i--) {
                        const n = s[i]
                          , o = n._pattern;
                        o && o.test(e.url) && t.push(n)
                    }
                    return 0 === t.length && t.push(l),
                    t
                }
                ,
                n.forEachFnHook(s, "reset");
                var l = s.get("main");
                return l.addRef(),
                l.instances = s,
                l
            }
            ]),
            t.factory("blockUIUtils", (function() {
                const t = e.element;
                var i = {
                    buildRegExp: function(e) {
                        let t, i = e.match(/^\/(.*)\/([gim]*)$/);
                        if (!i)
                            throw Error("Incorrect regular expression format: " + e);
                        return t = new RegExp(i[1],i[2]),
                        t
                    },
                    forEachFn: function(e, t, i) {
                        let n = e.length;
                        while (n--) {
                            const o = e[n];
                            o[t].apply(o, i)
                        }
                    },
                    forEachFnHook: function(e, t) {
                        e[t] = function() {
                            i.forEachFn(this, t, arguments)
                        }
                    },
                    isElementInBlockScope: function(e, t) {
                        let i = e.inheritedData("block-ui");
                        while (i) {
                            if (i === t)
                                return !0;
                            i = i._parent
                        }
                        return !1
                    },
                    findElement: function(e, n, o) {
                        let r = null;
                        if (n(e))
                            r = e;
                        else {
                            let a;
                            a = o ? e.parent() : e.children();
                            let s = a.length;
                            while (!r && s--)
                                r = i.findElement(t(a[s]), n, o)
                        }
                        return r
                    },
                    indexOf: function(e, t, i) {
                        for (let n = i || 0, o = e.length; n < o; n++)
                            if (e[n] === t)
                                return n;
                        return -1
                    }
                };
                return i
            }
            )),
            e.module("blockUI").run(["$templateCache", "$http", function(e, t) {}
            ])
        }
        )(angular)
    },
    c007: function(e, t, i) {
        e.exports = i.p + "img/question.d216ec22.svg?x-request=html"
    },
    c075: function(e, t, i) {
        (function(e) {
            var i, n;
            /*! @flow.js/ng-flow 2.7.4 */
            !function(o, r, a) {
                "use strict";
                function s(e) {
                    if (this.support = !("undefined" == typeof File || "undefined" == typeof Blob || "undefined" == typeof FileList || !Blob.prototype.slice && !Blob.prototype.webkitSlice && !Blob.prototype.mozSlice),
                    this.support) {
                        this.supportDirectory = /Chrome/.test(o.navigator.userAgent),
                        this.files = [],
                        this.defaults = {
                            chunkSize: 1048576,
                            forceChunkSize: !1,
                            simultaneousUploads: 3,
                            singleFile: !1,
                            fileParameterName: "file",
                            progressCallbacksInterval: 500,
                            speedSmoothingFactor: .1,
                            query: {},
                            headers: {},
                            withCredentials: !1,
                            preprocess: null,
                            method: "multipart",
                            testMethod: "GET",
                            uploadMethod: "POST",
                            prioritizeFirstAndLastChunk: !1,
                            allowDuplicateUploads: !1,
                            target: "/",
                            testChunks: !0,
                            generateUniqueIdentifier: null,
                            maxChunkRetries: 0,
                            chunkRetryInterval: null,
                            permanentErrors: [404, 413, 415, 500, 501],
                            successStatuses: [200, 201, 202],
                            onDropStopPropagation: !1,
                            initFileFn: null,
                            readFileFn: c
                        },
                        this.opts = {},
                        this.events = {};
                        var t = this;
                        this.onDrop = function(e) {
                            t.opts.onDropStopPropagation && e.stopPropagation(),
                            e.preventDefault();
                            var i = e.dataTransfer;
                            i.items && i.items[0] && i.items[0].webkitGetAsEntry ? t.webkitReadDataTransfer(e) : t.addFiles(i.files, e)
                        }
                        ,
                        this.preventEvent = function(e) {
                            e.preventDefault()
                        }
                        ,
                        this.opts = s.extend({}, this.defaults, e || {})
                    }
                }
                function l(e, t) {
                    this.flowObj = e,
                    this.bytes = null,
                    this.file = t,
                    this.name = t.fileName || t.name,
                    this.size = t.size,
                    this.relativePath = t.relativePath || t.webkitRelativePath || this.name,
                    this.uniqueIdentifier = e.generateUniqueIdentifier(t),
                    this.chunks = [],
                    this.paused = !1,
                    this.error = !1,
                    this.averageSpeed = 0,
                    this.currentSpeed = 0,
                    this._lastProgressCallback = Date.now(),
                    this._prevUploadedSize = 0,
                    this._prevProgress = 0,
                    this.bootstrap()
                }
                function c(e, t, i, n, o) {
                    var r = "slice";
                    e.file.slice ? r = "slice" : e.file.mozSlice ? r = "mozSlice" : e.file.webkitSlice && (r = "webkitSlice"),
                    o.readFinished(e.file[r](t, i, n))
                }
                function d(e, t, i) {
                    this.flowObj = e,
                    this.fileObj = t,
                    this.offset = i,
                    this.tested = !1,
                    this.retries = 0,
                    this.pendingRetry = !1,
                    this.preprocessState = 0,
                    this.readState = 0,
                    this.loaded = 0,
                    this.total = 0,
                    this.chunkSize = this.flowObj.opts.chunkSize,
                    this.startByte = this.offset * this.chunkSize,
                    this.computeEndByte = function() {
                        var e = Math.min(this.fileObj.size, (this.offset + 1) * this.chunkSize);
                        return this.fileObj.size - e < this.chunkSize && !this.flowObj.opts.forceChunkSize && (e = this.fileObj.size),
                        e
                    }
                    ,
                    this.endByte = this.computeEndByte(),
                    this.xhr = null;
                    var n = this;
                    this.event = function(e, t) {
                        t = Array.prototype.slice.call(arguments),
                        t.unshift(n),
                        n.fileObj.chunkEvent.apply(n.fileObj, t)
                    }
                    ,
                    this.progressHandler = function(e) {
                        e.lengthComputable && (n.loaded = e.loaded,
                        n.total = e.total),
                        n.event("progress", e)
                    }
                    ,
                    this.testHandler = function(e) {
                        var t = n.status(!0);
                        "error" === t ? (n.event(t, n.message()),
                        n.flowObj.uploadNextChunk()) : "success" === t ? (n.tested = !0,
                        n.event(t, n.message()),
                        n.flowObj.uploadNextChunk()) : n.fileObj.paused || (n.tested = !0,
                        n.send())
                    }
                    ,
                    this.doneHandler = function(e) {
                        var t = n.status();
                        if ("success" === t || "error" === t)
                            delete this.data,
                            n.event(t, n.message()),
                            n.flowObj.uploadNextChunk();
                        else {
                            n.event("retry", n.message()),
                            n.pendingRetry = !0,
                            n.abort(),
                            n.retries++;
                            var i = n.flowObj.opts.chunkRetryInterval;
                            null !== i ? setTimeout((function() {
                                n.send()
                            }
                            ), i) : n.send()
                        }
                    }
                }
                function u(e, t) {
                    var i = e.indexOf(t);
                    i > -1 && e.splice(i, 1)
                }
                function p(e, t) {
                    return "function" == typeof e && (t = Array.prototype.slice.call(arguments),
                    e = e.apply(null, t.slice(1))),
                    e
                }
                function h(e, t) {
                    setTimeout(e.bind(t), 0)
                }
                function m(e, t) {
                    return g(arguments, (function(t) {
                        t !== e && g(t, (function(t, i) {
                            e[i] = t
                        }
                        ))
                    }
                    )),
                    e
                }
                function g(e, t, i) {
                    var n;
                    if (e)
                        if ("undefined" != typeof e.length) {
                            for (n = 0; n < e.length; n++)
                                if (!1 === t.call(i, e[n], n))
                                    return
                        } else
                            for (n in e)
                                if (e.hasOwnProperty(n) && !1 === t.call(i, e[n], n))
                                    return
                }
                var f = o.navigator.msPointerEnabled;
                s.prototype = {
                    on: function(e, t) {
                        e = e.toLowerCase(),
                        this.events.hasOwnProperty(e) || (this.events[e] = []),
                        this.events[e].push(t)
                    },
                    off: function(e, t) {
                        e !== a ? (e = e.toLowerCase(),
                        t !== a ? this.events.hasOwnProperty(e) && u(this.events[e], t) : delete this.events[e]) : this.events = {}
                    },
                    fire: function(e, t) {
                        t = Array.prototype.slice.call(arguments),
                        e = e.toLowerCase();
                        var i = !1;
                        return this.events.hasOwnProperty(e) && g(this.events[e], (function(e) {
                            i = !1 === e.apply(this, t.slice(1)) || i
                        }
                        ), this),
                        "catchall" != e && (t.unshift("catchAll"),
                        i = !1 === this.fire.apply(this, t) || i),
                        !i
                    },
                    webkitReadDataTransfer: function(e) {
                        function t(e) {
                            e.readEntries((function(r) {
                                r.length ? (a += r.length,
                                g(r, (function(e) {
                                    if (e.isFile) {
                                        var o = e.fullPath;
                                        e.file((function(e) {
                                            i(e, o)
                                        }
                                        ), n)
                                    } else
                                        e.isDirectory && t(e.createReader())
                                }
                                )),
                                t(e)) : o()
                            }
                            ), n)
                        }
                        function i(e, t) {
                            e.relativePath = t.substring(1),
                            s.push(e),
                            o()
                        }
                        function n(e) {
                            throw e
                        }
                        function o() {
                            0 == --a && r.addFiles(s, e)
                        }
                        var r = this
                          , a = e.dataTransfer.items.length
                          , s = [];
                        g(e.dataTransfer.items, (function(e) {
                            var n = e.webkitGetAsEntry();
                            return n ? void (n.isFile ? i(e.getAsFile(), n.fullPath) : t(n.createReader())) : void o()
                        }
                        ))
                    },
                    generateUniqueIdentifier: function(e) {
                        var t = this.opts.generateUniqueIdentifier;
                        if ("function" == typeof t)
                            return t(e);
                        var i = e.relativePath || e.webkitRelativePath || e.fileName || e.name;
                        return e.size + "-" + i.replace(/[^0-9a-zA-Z_-]/gim, "")
                    },
                    uploadNextChunk: function(e) {
                        var t = !1;
                        if (this.opts.prioritizeFirstAndLastChunk && (g(this.files, (function(e) {
                            return !e.paused && e.chunks.length && "pending" === e.chunks[0].status() ? (e.chunks[0].send(),
                            t = !0,
                            !1) : !e.paused && e.chunks.length > 1 && "pending" === e.chunks[e.chunks.length - 1].status() ? (e.chunks[e.chunks.length - 1].send(),
                            t = !0,
                            !1) : void 0
                        }
                        )),
                        t))
                            return t;
                        if (g(this.files, (function(e) {
                            return e.paused || g(e.chunks, (function(e) {
                                return "pending" === e.status() ? (e.send(),
                                t = !0,
                                !1) : void 0
                            }
                            )),
                            !t && void 0
                        }
                        )),
                        t)
                            return !0;
                        var i = !1;
                        return g(this.files, (function(e) {
                            return e.isComplete() ? void 0 : (i = !0,
                            !1)
                        }
                        )),
                        i || e || h((function() {
                            this.fire("complete")
                        }
                        ), this),
                        !1
                    },
                    assignBrowse: function(e, t, i, n) {
                        e instanceof Element && (e = [e]),
                        g(e, (function(e) {
                            var o;
                            "INPUT" === e.tagName && "file" === e.type ? o = e : (o = r.createElement("input"),
                            o.setAttribute("type", "file"),
                            m(o.style, {
                                visibility: "hidden",
                                position: "absolute",
                                width: "1px",
                                height: "1px"
                            }),
                            e.appendChild(o),
                            e.addEventListener("click", (function() {
                                o.click()
                            }
                            ), !1)),
                            this.opts.singleFile || i || o.setAttribute("multiple", "multiple"),
                            t && o.setAttribute("webkitdirectory", "webkitdirectory"),
                            g(n, (function(e, t) {
                                o.setAttribute(t, e)
                            }
                            ));
                            var a = this;
                            o.addEventListener("change", (function(e) {
                                e.target.value && (a.addFiles(e.target.files, e),
                                e.target.value = "")
                            }
                            ), !1)
                        }
                        ), this)
                    },
                    assignDrop: function(e) {
                        "undefined" == typeof e.length && (e = [e]),
                        g(e, (function(e) {
                            e.addEventListener("dragover", this.preventEvent, !1),
                            e.addEventListener("dragenter", this.preventEvent, !1),
                            e.addEventListener("drop", this.onDrop, !1)
                        }
                        ), this)
                    },
                    unAssignDrop: function(e) {
                        "undefined" == typeof e.length && (e = [e]),
                        g(e, (function(e) {
                            e.removeEventListener("dragover", this.preventEvent),
                            e.removeEventListener("dragenter", this.preventEvent),
                            e.removeEventListener("drop", this.onDrop)
                        }
                        ), this)
                    },
                    isUploading: function() {
                        var e = !1;
                        return g(this.files, (function(t) {
                            return t.isUploading() ? (e = !0,
                            !1) : void 0
                        }
                        )),
                        e
                    },
                    _shouldUploadNext: function() {
                        var e = 0
                          , t = !0
                          , i = this.opts.simultaneousUploads;
                        return g(this.files, (function(n) {
                            g(n.chunks, (function(n) {
                                return "uploading" === n.status() && (e++,
                                e >= i) ? (t = !1,
                                !1) : void 0
                            }
                            ))
                        }
                        )),
                        t && e
                    },
                    upload: function() {
                        var e = this._shouldUploadNext();
                        if (!1 !== e) {
                            this.fire("uploadStart");
                            for (var t = !1, i = 1; i <= this.opts.simultaneousUploads - e; i++)
                                t = this.uploadNextChunk(!0) || t;
                            t || h((function() {
                                this.fire("complete")
                            }
                            ), this)
                        }
                    },
                    resume: function() {
                        g(this.files, (function(e) {
                            e.resume()
                        }
                        ))
                    },
                    pause: function() {
                        g(this.files, (function(e) {
                            e.pause()
                        }
                        ))
                    },
                    cancel: function() {
                        for (var e = this.files.length - 1; e >= 0; e--)
                            this.files[e].cancel()
                    },
                    progress: function() {
                        var e = 0
                          , t = 0;
                        return g(this.files, (function(i) {
                            e += i.progress() * i.size,
                            t += i.size
                        }
                        )),
                        t > 0 ? e / t : 0
                    },
                    addFile: function(e, t) {
                        this.addFiles([e], t)
                    },
                    addFiles: function(e, t) {
                        var i = [];
                        g(e, (function(e) {
                            if ((!f || f && e.size > 0) && (e.size % 4096 !== 0 || "." !== e.name && "." !== e.fileName) && (this.opts.allowDuplicateUploads || !this.getFromUniqueIdentifier(this.generateUniqueIdentifier(e)))) {
                                var n = new l(this,e);
                                this.fire("fileAdded", n, t) && i.push(n)
                            }
                        }
                        ), this),
                        this.fire("filesAdded", i, t) && (g(i, (function(e) {
                            this.opts.singleFile && this.files.length > 0 && this.removeFile(this.files[0]),
                            this.files.push(e)
                        }
                        ), this),
                        this.fire("filesSubmitted", i, t))
                    },
                    removeFile: function(e) {
                        for (var t = this.files.length - 1; t >= 0; t--)
                            this.files[t] === e && (this.files.splice(t, 1),
                            e.abort(),
                            this.fire("fileRemoved", e))
                    },
                    getFromUniqueIdentifier: function(e) {
                        var t = !1;
                        return g(this.files, (function(i) {
                            i.uniqueIdentifier === e && (t = i)
                        }
                        )),
                        t
                    },
                    getSize: function() {
                        var e = 0;
                        return g(this.files, (function(t) {
                            e += t.size
                        }
                        )),
                        e
                    },
                    sizeUploaded: function() {
                        var e = 0;
                        return g(this.files, (function(t) {
                            e += t.sizeUploaded()
                        }
                        )),
                        e
                    },
                    timeRemaining: function() {
                        var e = 0
                          , t = 0;
                        return g(this.files, (function(i) {
                            i.paused || i.error || (e += i.size - i.sizeUploaded(),
                            t += i.averageSpeed)
                        }
                        )),
                        e && !t ? Number.POSITIVE_INFINITY : e || t ? Math.floor(e / t) : 0
                    }
                },
                l.prototype = {
                    measureSpeed: function() {
                        var e = Date.now() - this._lastProgressCallback;
                        if (e) {
                            var t = this.flowObj.opts.speedSmoothingFactor
                              , i = this.sizeUploaded();
                            this.currentSpeed = Math.max((i - this._prevUploadedSize) / e * 1e3, 0),
                            this.averageSpeed = t * this.currentSpeed + (1 - t) * this.averageSpeed,
                            this._prevUploadedSize = i
                        }
                    },
                    chunkEvent: function(e, t, i) {
                        switch (t) {
                        case "progress":
                            if (Date.now() - this._lastProgressCallback < this.flowObj.opts.progressCallbacksInterval)
                                break;
                            this.measureSpeed(),
                            this.flowObj.fire("fileProgress", this, e),
                            this.flowObj.fire("progress"),
                            this._lastProgressCallback = Date.now();
                            break;
                        case "error":
                            this.error = !0,
                            this.abort(!0),
                            this.flowObj.fire("fileError", this, i, e),
                            this.flowObj.fire("error", i, this, e);
                            break;
                        case "success":
                            if (this.error)
                                return;
                            this.measureSpeed(),
                            this.flowObj.fire("fileProgress", this, e),
                            this.flowObj.fire("progress"),
                            this._lastProgressCallback = Date.now(),
                            this.isComplete() && (this.currentSpeed = 0,
                            this.averageSpeed = 0,
                            this.flowObj.fire("fileSuccess", this, i, e));
                            break;
                        case "retry":
                            this.flowObj.fire("fileRetry", this, e)
                        }
                    },
                    pause: function() {
                        this.paused = !0,
                        this.abort()
                    },
                    resume: function() {
                        this.paused = !1,
                        this.flowObj.upload()
                    },
                    abort: function(e) {
                        this.currentSpeed = 0,
                        this.averageSpeed = 0;
                        var t = this.chunks;
                        e && (this.chunks = []),
                        g(t, (function(e) {
                            "uploading" === e.status() && (e.abort(),
                            this.flowObj.uploadNextChunk())
                        }
                        ), this)
                    },
                    cancel: function() {
                        this.flowObj.removeFile(this)
                    },
                    retry: function() {
                        this.bootstrap(),
                        this.flowObj.upload()
                    },
                    bootstrap: function() {
                        "function" == typeof this.flowObj.opts.initFileFn && this.flowObj.opts.initFileFn(this),
                        this.abort(!0),
                        this.error = !1,
                        this._prevProgress = 0;
                        for (var e = this.flowObj.opts.forceChunkSize ? Math.ceil : Math.floor, t = Math.max(e(this.size / this.flowObj.opts.chunkSize), 1), i = 0; t > i; i++)
                            this.chunks.push(new d(this.flowObj,this,i))
                    },
                    progress: function() {
                        if (this.error)
                            return 1;
                        if (1 === this.chunks.length)
                            return this._prevProgress = Math.max(this._prevProgress, this.chunks[0].progress()),
                            this._prevProgress;
                        var e = 0;
                        g(this.chunks, (function(t) {
                            e += t.progress() * (t.endByte - t.startByte)
                        }
                        ));
                        var t = e / this.size;
                        return this._prevProgress = Math.max(this._prevProgress, t > .9999 ? 1 : t),
                        this._prevProgress
                    },
                    isUploading: function() {
                        var e = !1;
                        return g(this.chunks, (function(t) {
                            return "uploading" === t.status() ? (e = !0,
                            !1) : void 0
                        }
                        )),
                        e
                    },
                    isComplete: function() {
                        var e = !1;
                        return g(this.chunks, (function(t) {
                            var i = t.status();
                            return "pending" === i || "uploading" === i || "reading" === i || 1 === t.preprocessState || 1 === t.readState ? (e = !0,
                            !1) : void 0
                        }
                        )),
                        !e
                    },
                    sizeUploaded: function() {
                        var e = 0;
                        return g(this.chunks, (function(t) {
                            e += t.sizeUploaded()
                        }
                        )),
                        e
                    },
                    timeRemaining: function() {
                        if (this.paused || this.error)
                            return 0;
                        var e = this.size - this.sizeUploaded();
                        return e && !this.averageSpeed ? Number.POSITIVE_INFINITY : e || this.averageSpeed ? Math.floor(e / this.averageSpeed) : 0
                    },
                    getType: function() {
                        return this.file.type && this.file.type.split("/")[1]
                    },
                    getExtension: function() {
                        return this.name.substr(2 + (~-this.name.lastIndexOf(".") >>> 0)).toLowerCase()
                    }
                },
                d.prototype = {
                    getParams: function() {
                        return {
                            flowChunkNumber: this.offset + 1,
                            flowChunkSize: this.flowObj.opts.chunkSize,
                            flowCurrentChunkSize: this.endByte - this.startByte,
                            flowTotalSize: this.fileObj.size,
                            flowIdentifier: this.fileObj.uniqueIdentifier,
                            flowFilename: this.fileObj.name,
                            flowRelativePath: this.fileObj.relativePath,
                            flowTotalChunks: this.fileObj.chunks.length
                        }
                    },
                    getTarget: function(e, t) {
                        return e += e.indexOf("?") < 0 ? "?" : "&",
                        e + t.join("&")
                    },
                    test: function() {
                        this.xhr = new XMLHttpRequest,
                        this.xhr.addEventListener("load", this.testHandler, !1),
                        this.xhr.addEventListener("error", this.testHandler, !1);
                        var e = p(this.flowObj.opts.testMethod, this.fileObj, this)
                          , t = this.prepareXhrRequest(e, !0);
                        this.xhr.send(t)
                    },
                    preprocessFinished: function() {
                        this.endByte = this.computeEndByte(),
                        this.preprocessState = 2,
                        this.send()
                    },
                    readFinished: function(e) {
                        this.readState = 2,
                        this.bytes = e,
                        this.send()
                    },
                    send: function() {
                        var e = this.flowObj.opts.preprocess
                          , t = this.flowObj.opts.readFileFn;
                        if ("function" == typeof e)
                            switch (this.preprocessState) {
                            case 0:
                                return this.preprocessState = 1,
                                void e(this);
                            case 1:
                                return
                            }
                        switch (this.readState) {
                        case 0:
                            return this.readState = 1,
                            void t(this.fileObj, this.startByte, this.endByte, this.fileObj.file.type, this);
                        case 1:
                            return
                        }
                        if (!this.flowObj.opts.testChunks || this.tested) {
                            this.loaded = 0,
                            this.total = 0,
                            this.pendingRetry = !1,
                            this.xhr = new XMLHttpRequest,
                            this.xhr.upload.addEventListener("progress", this.progressHandler, !1),
                            this.xhr.addEventListener("load", this.doneHandler, !1),
                            this.xhr.addEventListener("error", this.doneHandler, !1);
                            var i = p(this.flowObj.opts.uploadMethod, this.fileObj, this)
                              , n = this.prepareXhrRequest(i, !1, this.flowObj.opts.method, this.bytes);
                            this.xhr.send(n)
                        } else
                            this.test()
                    },
                    abort: function() {
                        var e = this.xhr;
                        this.xhr = null,
                        e && e.abort()
                    },
                    status: function(e) {
                        return 1 === this.readState ? "reading" : this.pendingRetry || 1 === this.preprocessState ? "uploading" : this.xhr ? this.xhr.readyState < 4 ? "uploading" : this.flowObj.opts.successStatuses.indexOf(this.xhr.status) > -1 ? "success" : this.flowObj.opts.permanentErrors.indexOf(this.xhr.status) > -1 || !e && this.retries >= this.flowObj.opts.maxChunkRetries ? "error" : (this.abort(),
                        "pending") : "pending"
                    },
                    message: function() {
                        return this.xhr ? this.xhr.responseText : ""
                    },
                    progress: function() {
                        if (this.pendingRetry)
                            return 0;
                        var e = this.status();
                        return "success" === e || "error" === e ? 1 : "pending" === e ? 0 : this.total > 0 ? this.loaded / this.total : 0
                    },
                    sizeUploaded: function() {
                        var e = this.endByte - this.startByte;
                        return "success" !== this.status() && (e = this.progress() * e),
                        e
                    },
                    prepareXhrRequest: function(e, t, i, n) {
                        var o = p(this.flowObj.opts.query, this.fileObj, this, t);
                        o = m(o, this.getParams());
                        var r = p(this.flowObj.opts.target, this.fileObj, this, t)
                          , a = null;
                        if ("GET" === e || "octet" === i) {
                            var s = [];
                            g(o, (function(e, t) {
                                s.push([encodeURIComponent(t), encodeURIComponent(e)].join("="))
                            }
                            )),
                            r = this.getTarget(r, s),
                            a = n || null
                        } else
                            a = new FormData,
                            g(o, (function(e, t) {
                                a.append(t, e)
                            }
                            )),
                            a.append(this.flowObj.opts.fileParameterName, n, this.fileObj.file.name);
                        return this.xhr.open(e, r, !0),
                        this.xhr.withCredentials = this.flowObj.opts.withCredentials,
                        g(p(this.flowObj.opts.headers, this.fileObj, this, t), (function(e, t) {
                            this.xhr.setRequestHeader(t, e)
                        }
                        ), this),
                        a
                    }
                },
                s.evalOpts = p,
                s.extend = m,
                s.each = g,
                s.FlowFile = l,
                s.FlowChunk = d,
                s.version = "2.11.2",
                e && "object" == typeof e.exports ? e.exports = s : (o.Flow = s,
                i = [],
                n = function() {
                    return s
                }
                .apply(t, i),
                void 0 === n || (e.exports = n))
            }(window, document),
            angular.module("flow.provider", []).provider("flowFactory", (function() {
                "use strict";
                this.defaults = {},
                this.factory = function(e) {
                    return new Flow(e)
                }
                ,
                this.events = [],
                this.on = function(e, t) {
                    this.events.push([e, t])
                }
                ,
                this.$get = function() {
                    var e = this.factory
                      , t = this.defaults
                      , i = this.events;
                    return {
                        create: function(n) {
                            var o = e(angular.extend({}, t, n));
                            return angular.forEach(i, (function(e) {
                                o.on(e[0], e[1])
                            }
                            )),
                            o
                        }
                    }
                }
            }
            )),
            angular.module("flow.init", ["flow.provider"]).controller("flowCtrl", ["$scope", "$attrs", "$parse", "flowFactory", function(e, t, i, n) {
                var o = angular.extend({}, e.$eval(t.flowInit))
                  , r = e.$eval(t.flowObject) || n.create(o)
                  , a = function(t) {
                    var i = Array.prototype.slice.call(arguments);
                    i.shift();
                    var n = e.$broadcast.apply(e, ["flow::" + t, r].concat(i));
                    return {
                        progress: 1,
                        filesSubmitted: 1,
                        fileSuccess: 1,
                        fileError: 1,
                        complete: 1
                    }[t] && e.$apply(),
                    !n.defaultPrevented && void 0
                };
                r.on("catchAll", a),
                e.$on("$destroy", (function() {
                    r.off("catchAll", a)
                }
                )),
                e.$flow = r,
                t.hasOwnProperty("flowName") && (i(t.flowName).assign(e, r),
                e.$on("$destroy", (function() {
                    i(t.flowName).assign(e)
                }
                )))
            }
            ]).directive("flowInit", [function() {
                return {
                    scope: !0,
                    controller: "flowCtrl"
                }
            }
            ]),
            angular.module("flow.btn", ["flow.init"]).directive("flowBtn", [function() {
                return {
                    restrict: "EA",
                    scope: !1,
                    require: "^flowInit",
                    link: function(e, t, i) {
                        var n = i.hasOwnProperty("flowDirectory")
                          , o = i.hasOwnProperty("flowSingleFile")
                          , r = i.hasOwnProperty("flowAttrs") && e.$eval(i.flowAttrs);
                        e.$flow.assignBrowse(t, n, o, r)
                    }
                }
            }
            ]),
            angular.module("flow.dragEvents", ["flow.init"]).directive("flowPreventDrop", (function() {
                return {
                    scope: !1,
                    link: function(e, t, i) {
                        t.bind("drop dragover", (function(e) {
                            e.preventDefault()
                        }
                        ))
                    }
                }
            }
            )).directive("flowDragEnter", ["$timeout", function(e) {
                return {
                    scope: !1,
                    link: function(t, i, n) {
                        function o(e) {
                            var t = !1
                              , i = e.dataTransfer || e.originalEvent.dataTransfer;
                            return angular.forEach(i && i.types, (function(e) {
                                "Files" === e && (t = !0)
                            }
                            )),
                            t
                        }
                        var r, a = !1;
                        i.bind("dragover", (function(i) {
                            o(i) && (a || (t.$apply(n.flowDragEnter),
                            a = !0),
                            e.cancel(r),
                            i.preventDefault())
                        }
                        )),
                        i.bind("dragleave drop", (function(i) {
                            e.cancel(r),
                            r = e((function() {
                                t.$eval(n.flowDragLeave),
                                r = null,
                                a = !1
                            }
                            ), 100)
                        }
                        ))
                    }
                }
            }
            ]),
            angular.module("flow.drop", ["flow.init"]).directive("flowDrop", (function() {
                return {
                    scope: !1,
                    require: "^flowInit",
                    link: function(e, t, i) {
                        function n() {
                            e.$flow.assignDrop(t)
                        }
                        function o() {
                            e.$flow.unAssignDrop(t)
                        }
                        i.flowDropEnabled ? e.$watch(i.flowDropEnabled, (function(e) {
                            e ? n() : o()
                        }
                        )) : n()
                    }
                }
            }
            )),
            function(e) {
                "use strict";
                function t(e) {
                    return e.charAt(0).toUpperCase() + e.slice(1)
                }
                var i = e.module("flow.events", ["flow.init"])
                  , n = {
                    fileSuccess: ["$file", "$message"],
                    fileProgress: ["$file"],
                    fileAdded: ["$file", "$event"],
                    filesAdded: ["$files", "$event"],
                    filesSubmitted: ["$files", "$event"],
                    fileRetry: ["$file"],
                    fileError: ["$file", "$message"],
                    uploadStart: [],
                    complete: [],
                    progress: [],
                    error: ["$message", "$file"]
                };
                e.forEach(n, (function(n, o) {
                    var r = "flow" + t(o);
                    "flowUploadStart" == r && (r = "flowUploadStarted"),
                    i.directive(r, [function() {
                        return {
                            require: "^flowInit",
                            controller: ["$scope", "$attrs", function(t, i) {
                                t.$on("flow::" + o, (function() {
                                    var o = Array.prototype.slice.call(arguments)
                                      , a = o.shift();
                                    if (t.$flow === o.shift()) {
                                        var s = {};
                                        e.forEach(n, (function(e, t) {
                                            s[e] = o[t]
                                        }
                                        )),
                                        !1 === t.$eval(i[r], s) && a.preventDefault()
                                    }
                                }
                                ))
                            }
                            ]
                        }
                    }
                    ])
                }
                ))
            }(angular),
            angular.module("flow.img", ["flow.init"]).directive("flowImg", [function() {
                return {
                    scope: !1,
                    require: "^flowInit",
                    link: function(e, t, i) {
                        var n = i.flowImg;
                        e.$watch(n, (function(t) {
                            if (t) {
                                var n = new FileReader;
                                n.readAsDataURL(t.file),
                                n.onload = function(t) {
                                    e.$apply((function() {
                                        i.$set("src", t.target.result)
                                    }
                                    ))
                                }
                            }
                        }
                        ))
                    }
                }
            }
            ]),
            angular.module("flow.transfers", ["flow.init"]).directive("flowTransfers", [function() {
                return {
                    scope: !0,
                    require: "^flowInit",
                    link: function(e) {
                        e.transfers = e.$flow.files
                    }
                }
            }
            ]),
            angular.module("flow", ["flow.provider", "flow.init", "flow.events", "flow.btn", "flow.drop", "flow.transfers", "flow.img", "flow.dragEvents"])
        }
        ).call(this, i("62e4")(e))
    },
    c0e3: function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("0613");
        (function() {
            function e(e, t, i) {
                e.onUserUpdated = function() {
                    i.getSession().then(async e=>{
                        n["a"].commit("user", e),
                        t.user = e
                    }
                    )
                }
            }
            e.$inject = ["$scope", "$rootScope", "AuthService"],
            angular.module("app.ctrls").controller("AccountSettingsCtrl", e)
        }
        )()
    },
    c0f8: function(e, t, i) {
        e.exports = i.p + "img/overlay.26fab4df.svg?x-request=html"
    },
    c14d: function(e, t, i) {
        e.exports = i.p + "img/print-area-printify.a3c44b46.png?x-request=html"
    },
    c2a1: function(e, t, i) {
        e.exports = i.p + "img/logout.c29fd8b3.svg?x-request=html"
    },
    c5b4: function(e, t, i) {
        e.exports = i.p + "img/curvedtext.f5a949bc.svg?x-request=html"
    },
    c5c6: function(e, t, i) {
        "use strict";
        i.r(t),
        i.d(t, "addMapDependencies", (function() {
            return m
        }
        )),
        i.d(t, "createModal", (function() {
            return g
        }
        )),
        i.d(t, "closeModal", (function() {
            return f
        }
        )),
        i.d(t, "openModal", (function() {
            return v
        }
        )),
        i.d(t, "createMap", (function() {
            return b
        }
        )),
        i.d(t, "createGeocoder", (function() {
            return y
        }
        )),
        i.d(t, "clearGeocoder", (function() {
            return w
        }
        )),
        i.d(t, "createDraggableMarker", (function() {
            return C
        }
        )),
        i.d(t, "createMapWrapper", (function() {
            return x
        }
        )),
        i.d(t, "createModalActions", (function() {
            return S
        }
        )),
        i.d(t, "setActionsCallback", (function() {
            return P
        }
        )),
        i.d(t, "getCurrentMapStyle", (function() {
            return k
        }
        )),
        i.d(t, "setMapOptions", (function() {
            return A
        }
        )),
        i.d(t, "getMapSnapshot", (function() {
            return T
        }
        )),
        i.d(t, "getStaticMapImage", (function() {
            return O
        }
        ));
        const {VUE_APP_MAPBOX_TOKEN: n, VUE_APP_MAPBOX_API_URL: o, VUE_APP_MAPBOX_CDN_PATH: r, VUE_APP_MAPBOX_CSS_PATH: a, VUE_APP_MAPBOX_GEOCODER_CDN_PATH: s, VUE_APP_MAPBOX_GEOCODER_CSS_PATH: l} = Object({
            NODE_ENV: "production",
            VUE_APP_APPCUES_SUFIX: "",
            VUE_APP_CLOUDFRONT_URL: "https://cdn.customily.com",
            VUE_APP_CUSTOMILY_OPTIONS_URL: "https://preview.customily.com",
            VUE_APP_DD_RUM_KEY: "pub8df6b90666feda9bdd905b6bdf3ac642",
            VUE_APP_ENABLE_SENTRY: "true",
            VUE_APP_ENVIRONMENT: "prod",
            VUE_APP_MAPBOX_API_URL: "https://api.mapbox.com",
            VUE_APP_MAPBOX_CDN_PATH: "mapbox-gl-js/v2.7.0/mapbox-gl.js",
            VUE_APP_MAPBOX_CSS_PATH: "mapbox-gl-js/v2.7.0/mapbox-gl.css",
            VUE_APP_MAPBOX_GEOCODER_CDN_PATH: "mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.min.js",
            VUE_APP_MAPBOX_GEOCODER_CSS_PATH: "mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.css",
            VUE_APP_MAPBOX_TOKEN: "pk.eyJ1IjoibWFydHVtbyIsImEiOiJjbDNzdHhoZXcxdWZwM2JvZW9ra2IxcTFlIn0.g5db6-dbMh4AiG1W5ctaNw",
            VUE_APP_SENTRY_AUTH_TOKEN: "2323255848e94c9c9940705fbdab4712ce42c2acd6de4469acb73537bbecbd33",
            VUE_APP_SHOPIFY_APP_URL: "https://sh.customily.com",
            VUE_APP_STAMP_COOKIE_DOMAIN: ".customily.com",
            VUE_APP_STRIPE_PUBLIC_KEY: "pk_live_yCFqcL8TXwEAiWFw4YU2zTsE00MctQk3v6",
            BASE_URL: "https://cdn.customily.com/app/",
            APP_VERSION: "1.8.7",
            APP_RELEASE: "customily-client@1.8.7",
            APP_ENVIRONMENT: "prod",
            DD_RUM_KEY: "pub8df6b90666feda9bdd905b6bdf3ac642"
        })
          , c = {
            mapboxCdn: `${o}/${r}`,
            mapboxCss: `${o}/${a}`,
            geocoderCdn: `${o}/${s}`,
            geocoderCss: `${o}/${l}`
        }
          , d = 2
          , u = "mapbox"
          , p = e=>new Promise(t=>{
            const i = document.createElement("script");
            i.src = e,
            document.head.appendChild(i),
            i.onload = ()=>{
                t()
            }
        }
        )
          , h = e=>new Promise(t=>{
            const i = document.createElement("link");
            i.rel = "stylesheet",
            i.href = e,
            document.head.appendChild(i),
            i.onload = ()=>{
                t()
            }
        }
        )
          , m = ()=>{
            const e = document.getElementsByTagName("script");
            for (const i of e) {
                const {src: e} = i;
                if (e.includes(c.mapboxCdn) || e.includes(c.geocoderCdn))
                    return
            }
            const t = [p(c.mapboxCdn), h(c.mapboxCss), p(c.geocoderCdn), h(c.geocoderCss)];
            return Promise.all(t)
        }
          , g = (e="map-modal")=>{
            const t = document.getElementById(e);
            if (t)
                return t;
            const i = document.createElement("div");
            i.id = e,
            i.classList.add("map-selector-container");
            const n = document.createElement("div");
            return n.id = "modal-backdrop",
            n.appendChild(i),
            document.body.appendChild(n),
            i
        }
          , f = e=>{
            e.parentElement.style.display = "none",
            e.removeAttribute("open")
        }
          , v = e=>{
            e.parentElement.style.display = "block",
            e.setAttribute("open", "")
        }
          , b = e=>{
            const t = document.createElement("div");
            t.id = "map",
            e.appendChild(t),
            mapboxgl.accessToken = n;
            const i = new mapboxgl.Map({
                container: "map",
                zoom: d,
                preserveDrawingBuffer: !0,
                trackResize: !1,
                dragRotate: !1
            });
            i.addControl(new mapboxgl.NavigationControl);
            const o = t.getElementsByClassName("mapboxgl-control-container")[0];
            return o.removeChild(o.children[3]),
            o.removeChild(o.children[2]),
            i
        }
          , y = e=>{
            const t = document.createElement("div");
            t.id = "geocoder";
            const i = new MapboxGeocoder({
                accessToken: mapboxgl.accessToken,
                mapboxgl: mapboxgl,
                marker: !1,
                placeholder: "Search Location"
            });
            return t.appendChild(i.onAdd(e)),
            {
                geocoder: i,
                geocoderContainer: t
            }
        }
          , w = e=>{
            e.clear(),
            document.getElementsByClassName("mapboxgl-ctrl-geocoder--input")[0].blur()
        }
          , C = e=>{
            const {lng: t, lat: i} = e.getCenter()
              , n = new mapboxgl.Marker({
                draggable: !0,
                color: "red"
            }).setLngLat([t, i]).addTo(e);
            return n
        }
          , x = e=>{
            const t = document.getElementsByClassName("map-wrapper");
            if (t.length)
                while (e.firstChild)
                    e.removeChild(e.firstChild);
            const i = document.createElement("div");
            i.classList.add("map-wrapper"),
            e.appendChild(i);
            const n = b(i)
              , {geocoder: o, geocoderContainer: r} = y(n);
            return i.insertBefore(r, n.getContainer()),
            {
                map: n,
                geocoder: o
            }
        }
          , S = (e,t,i)=>{
            const n = document.createElement("div");
            n.classList.add("actions-container");
            const o = document.createElement("button");
            o.classList.add("custom-btn", "back-btn"),
            o.id = "cancel-btn",
            o.textContent = "Cancel",
            o.onclick = i || (()=>f(e));
            const r = document.createElement("button");
            r.classList.add("custom-btn", "next-btn"),
            r.id = "continue-btn",
            r.textContent = "Select",
            r.onclick = t,
            n.append(o, r),
            e.appendChild(n)
        }
          , P = (e,t)=>{
            const i = document.getElementById("continue-btn")
              , n = document.getElementById("cancel-btn");
            i && (i.onclick = e),
            n && t && (n.onclick = t)
        }
          , k = e=>{
            const t = e.getStyle();
            if (!t)
                return null;
            const i = t.sprite.split("/");
            return `${i[3]}/${i[4]}`
        }
          , _ = e=>{
            if (e)
                return -1 == e.indexOf("/") ? `${u}/${e}` : e
        }
          , A = (e,t,i=!0)=>new Promise(n=>{
            const {lng: o, lat: r} = e.getCenter()
              , a = k(e)
              , s = _(t.defaultStyle);
            s && s !== a && e.setStyle("mapbox://styles/" + s, {
                diff: i
            }),
            t.latitude && t.longitude && (t.latitude != r || t.longitude != o) && e.setCenter([Number(t.longitude), Number(t.latitude)]),
            e.setZoom(t.zoom || d),
            e.once("idle", ()=>{
                const t = ()=>{
                    const i = k(e);
                    if (i == s && e.loaded() && e.isStyleLoaded() && e.areTilesLoaded())
                        return n();
                    setTimeout(t, 200)
                }
                ;
                t()
            }
            )
        }
        )
          , T = e=>e.getCanvas().toDataURL()
          , E = e=>{
            let t = "";
            const i = new Uint8Array(e);
            for (let n = 0; n < i.byteLength; n++)
                t += String.fromCharCode(i[n]);
            return window.btoa(t)
        }
          , O = async e=>{
            const t = await fetch(`${o}/styles/v1/${_(e.defaultStyle)}/static/${e.longitude},${e.latitude},${e.zoom},0,0/500x500?logo=false&attribution=false&access_token=${mapboxgl.accessToken}`)
              , i = await t.arrayBuffer();
            return "data:image/png;base64," + E(i)
        }
    },
    c5e5: function(e, t, i) {
        (function(e) {
            "use strict";
            fabric.Image.filters.KMeans = fabric.util.createClass(fabric.Image.filters.BaseFilter, {
                type: "KMeans",
                threshold: 150,
                fgColor: "#000000",
                bgColor: "#ffffff",
                _rf: 0,
                _gf: 0,
                _bf: 0,
                _af: 0,
                _rb: 0,
                _gb: 0,
                _bb: 0,
                _ab: 0,
                initialize: function(e) {
                    e = e || {},
                    this.threshold = e.threshold || 150,
                    this.fgColor = e.fgColor || "#000000",
                    this.bgColor = e.bgColor || "#ffffff",
                    this.setFgColor(this.fgColor),
                    this.setBgColor(this.bgColor)
                },
                applyTo2d: function(e) {
                    const t = e.imageData
                      , i = t.data;
                    for (var n = 0; n < i.length; n += 4) {
                        var o = i[n]
                          , r = i[n + 1]
                          , a = i[n + 2]
                          , s = i[n + 3]
                          , l = .2126 * o + .7152 * r + .0722 * a;
                        l > this.threshold || 0 === s ? (i[n] = this._rb,
                        i[n + 1] = this._gb,
                        i[n + 2] = this._bb,
                        i[n + 3] = this._ab) : (i[n] = this._rf,
                        i[n + 1] = this._gf,
                        i[n + 2] = this._bf,
                        i[n + 3] = this._af)
                    }
                },
                setFgColor: function(e) {
                    const t = new fabric.Color(e).getSource();
                    this._rf = t[0],
                    this._gf = t[1],
                    this._bf = t[2],
                    this._af = 255 * t[3]
                },
                setBgColor: function(e) {
                    const t = new fabric.Color(e).getSource();
                    this._rb = t[0],
                    this._gb = t[1],
                    this._bb = t[2],
                    this._ab = 255 * t[3]
                }
            }),
            fabric.Image.filters.KMeans.fromObject = fabric.Image.filters.BaseFilter.fromObject
        }
        )()
    },
    c612: function(e, t) {
        var i = '<title>Customily - User Validation</title> <div class="page page-auth validation-page" style="min-height:100%" ng-controller="ValidationCtrl" ng-cloak> <div class="text-center" ng-show="!verificationComplete && !verificationError"> <h1><b>Verifying your account please hold on!</b></h1> <md-progress-linear md-mode="indeterminate" class="mt20"></md-progress-linear> </div> <div class="text-center" ng-show="verificationError"> <h1><b>Failed to verify account</b></h1> </div> <div class="text-center" ng-show="verificationComplete && !verificationError"> <h1><b>Account verification complete!</b></h1> <p>You can now start using all of Customily services</p> <div class="btn-group-justified mt10" style="display:flex;justify-content:center"> <md-button class="md-raised md-primary w100" style="max-width:300px" ng-click="goToLogin()">Login</md-button> </div> </div> </div> ';
        e.exports = i
    },
    c664: function(e, t) {
        var i = '<title>Email Confirmation</title> <div ng-cloak class="h100"> <vue-component name="EmailConfirmation" class="h100"/> </div> ';
        e.exports = i
    },
    c8d2: function(e, t) {
        /**
 * @license angular-recaptcha build:2018-07-30
 * https://github.com/vividcortex/angular-recaptcha
 * Copyright (c) 2018 VividCortex
 **/
        !function(e) {
            "use strict";
            e.module("vcRecaptcha", [])
        }(angular),
        function(e) {
            "use strict";
            function t() {
                throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')
            }
            e.module("vcRecaptcha").provider("vcRecaptchaService", (function() {
                var i = this
                  , n = {};
                i.onLoadFunctionName = "vcRecaptchaApiLoaded",
                i.setDefaults = function(t) {
                    e.copy(t, n)
                }
                ,
                i.setSiteKey = function(e) {
                    n.key = e
                }
                ,
                i.setTheme = function(e) {
                    n.theme = e
                }
                ,
                i.setStoken = function(e) {
                    n.stoken = e
                }
                ,
                i.setSize = function(e) {
                    n.size = e
                }
                ,
                i.setType = function(e) {
                    n.type = e
                }
                ,
                i.setLang = function(e) {
                    n.lang = e
                }
                ,
                i.setBadge = function(e) {
                    n.badge = e
                }
                ,
                i.setOnLoadFunctionName = function(e) {
                    i.onLoadFunctionName = e
                }
                ,
                i.$get = ["$rootScope", "$window", "$q", "$document", "$interval", function(o, r, a, s, l) {
                    function c() {
                        return p ? a.when(p) : m
                    }
                    function d() {
                        if (!p)
                            throw new Error("reCaptcha has not been loaded yet.")
                    }
                    function u() {
                        return e.isFunction((r.grecaptcha || {}).render)
                    }
                    var p, h = a.defer(), m = h.promise, g = {};
                    r.vcRecaptchaApiLoadedCallback = r.vcRecaptchaApiLoadedCallback || [];
                    var f = function() {
                        p = r.grecaptcha,
                        h.resolve(p)
                    };
                    if (r.vcRecaptchaApiLoadedCallback.push(f),
                    r[i.onLoadFunctionName] = function() {
                        r.vcRecaptchaApiLoadedCallback.forEach((function(e) {
                            e()
                        }
                        ))
                    }
                    ,
                    u())
                        f();
                    else if (r.document.querySelector('script[src^="https://www.google.com/recaptcha/api.js"]'))
                        var v = l((function() {
                            u() && (l.cancel(v),
                            f())
                        }
                        ), 25);
                    else {
                        var b = r.document.createElement("script");
                        b.async = !0,
                        b.defer = !0,
                        b.src = "https://www.google.com/recaptcha/api.js?onload=" + i.onLoadFunctionName + "&render=explicit",
                        s.find("body")[0].appendChild(b)
                    }
                    return {
                        create: function(e, i) {
                            return i.sitekey = i.key || n.key,
                            i.theme = i.theme || n.theme,
                            i.stoken = i.stoken || n.stoken,
                            i.size = i.size || n.size,
                            i.type = i.type || n.type,
                            i.hl = i.lang || n.lang,
                            i.badge = i.badge || n.badge,
                            i.sitekey || t(),
                            c().then((function(t) {
                                var n = t.render(e, i);
                                return g[n] = e,
                                n
                            }
                            ))
                        },
                        reload: function(e) {
                            d(),
                            p.reset(e),
                            o.$broadcast("reCaptchaReset", e)
                        },
                        execute: function(e) {
                            d(),
                            p.execute(e)
                        },
                        useLang: function(e, t) {
                            var i = g[e];
                            if (!i)
                                throw new Error("reCaptcha Widget ID not exists",e);
                            var n = i.querySelector("iframe");
                            if (!t)
                                return n && n.src && /[?&]hl=\w+/.test(n.src) ? n.src.replace(/.+[?&]hl=(\w+)([^\w].+)?/, "$1") : null;
                            if (n && n.src) {
                                var o = n.src;
                                /[?&]hl=/.test(o) ? o = o.replace(/([?&]hl=)\w+/, "$1" + t) : o += (-1 === o.indexOf("?") ? "?" : "&") + "hl=" + t,
                                n.src = o
                            }
                        },
                        getResponse: function(e) {
                            return d(),
                            p.getResponse(e)
                        },
                        getInstance: function(e) {
                            return g[e]
                        },
                        destroy: function(e) {
                            delete g[e]
                        }
                    }
                }
                ]
            }
            ))
        }(angular),
        function(e) {
            "use strict";
            e.module("vcRecaptcha").directive("vcRecaptcha", ["$document", "$timeout", "vcRecaptchaService", function(t, i, n) {
                return {
                    restrict: "A",
                    require: "?^^form",
                    scope: {
                        response: "=?ngModel",
                        key: "=?",
                        stoken: "=?",
                        theme: "=?",
                        size: "=?",
                        type: "=?",
                        lang: "=?",
                        badge: "=?",
                        tabindex: "=?",
                        required: "=?",
                        onCreate: "&",
                        onSuccess: "&",
                        onExpire: "&",
                        onError: "&"
                    },
                    link: function(o, r, a, s) {
                        function l() {
                            s && s.$setValidity("recaptcha", null),
                            p()
                        }
                        function c() {
                            i((function() {
                                o.response = "",
                                u(),
                                o.onExpire({
                                    widgetId: o.widgetId
                                })
                            }
                            ))
                        }
                        function d() {
                            var e = arguments;
                            i((function() {
                                o.response = "",
                                u(),
                                o.onError({
                                    widgetId: o.widgetId,
                                    arguments: e
                                })
                            }
                            ))
                        }
                        function u() {
                            s && s.$setValidity("recaptcha", !1 === o.required ? null : Boolean(o.response))
                        }
                        function p() {
                            n.destroy(o.widgetId),
                            e.element(t[0].querySelectorAll(".pls-container")).parent().remove()
                        }
                        o.widgetId = null,
                        s && e.isDefined(a.required) && o.$watch("required", u);
                        var h = o.$watch("key", (function(t) {
                            var s = function(e) {
                                i((function() {
                                    o.response = e,
                                    u(),
                                    o.onSuccess({
                                        response: e,
                                        widgetId: o.widgetId
                                    })
                                }
                                ))
                            };
                            n.create(r[0], {
                                callback: s,
                                key: t,
                                stoken: o.stoken || a.stoken || null,
                                theme: o.theme || a.theme || null,
                                type: o.type || a.type || null,
                                lang: o.lang || a.lang || null,
                                tabindex: o.tabindex || a.tabindex || null,
                                size: o.size || a.size || null,
                                badge: o.badge || a.badge || null,
                                "expired-callback": c,
                                "error-callback": a.onError ? d : void 0
                            }).then((function(t) {
                                u(),
                                o.widgetId = t,
                                o.onCreate({
                                    widgetId: t
                                }),
                                o.$on("$destroy", l),
                                o.$on("reCaptchaReset", (function(i, n) {
                                    (e.isUndefined(n) || t === n) && (o.response = "",
                                    u())
                                }
                                ))
                            }
                            )),
                            h()
                        }
                        ))
                    }
                }
            }
            ])
        }(angular)
    },
    c9fe: function(e, t) {
        (function() {
            function e() {
                var e = null
                  , t = null
                  , i = null
                  , n = "fill"
                  , o = "move";
                function r(r, a, s, l) {
                    t = a,
                    i = s,
                    n = l,
                    e = r,
                    e.discardActiveObject(),
                    e.forEachObject((function(e) {
                        e.selectable = !1
                    }
                    ));
                    var c = document.createElement("div");
                    c.style.position = "fixed",
                    c.style.opacity = "0",
                    c.id = "temp-cursor-element",
                    document.body.appendChild(c),
                    $("#temp-cursor-element").awesomeCursor("eyedropper", {
                        hotspot: "bottom left"
                    }),
                    e.selection = !1,
                    e.defaultCursor = $("#temp-cursor-element").css("cursor"),
                    o = e.hoverCursor,
                    e.hoverCursor = e.defaultCursor,
                    document.body.removeChild(c),
                    e.renderAll()
                }
                function a() {
                    e.forEachObject((function(e) {
                        e.selectable = !0
                    }
                    )),
                    i = null,
                    e.selection = !0,
                    e.defaultCursor = "",
                    e.hoverCursor = o,
                    e.renderAll()
                }
                function s(o, r) {
                    e.selection = !0;
                    var s = e.getColorAt(o);
                    function l(e) {
                        var t = e.toString(16);
                        return 1 == t.length ? "0" + t : t
                    }
                    function c(e, t, i) {
                        return "#" + l(e) + l(t) + l(i)
                    }
                    0 == s.a && (s.r = s.g = s.b = 255),
                    t.setColor(c(s.r, s.g, s.b)),
                    r && i ? (r(t, n, i),
                    a()) : a()
                }
                function l() {
                    return {
                        terminate: function() {},
                        setColor: function() {},
                        disable: function() {},
                        enable: function() {},
                        getColors: function() {},
                        getColor: function() {},
                        destroy: function() {}
                    }
                }
                return {
                    startColorSampler: r,
                    terminateColorSampler: a,
                    processColorSelection: s,
                    createEmptyColorPicker: l
                }
            }
            angular.module("app.shared.services").factory("ColorSamplerService", e)
        }
        )()
    },
    cac0: function(e, t, i) {
        e.exports = i.p + "img/reset-preview.3ccd50e2.svg?x-request=html"
    },
    cbb8: function(e, t, i) {
        "use strict";
        i("4db6")
    },
    cd49: function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("7bb1")
          , o = i("4c93");
        Object(n["c"])("required", {
            ...o["f"],
            message: "{_field_} is required"
        }),
        Object(n["c"])("email", {
            ...o["b"],
            message: "Must be a valid email"
        }),
        Object(n["c"])("min", {
            ...o["e"],
            message: "{_field_} must be at least {length} characters long"
        }),
        Object(n["c"])("max", {
            ...o["d"],
            message: "{_field_} can't be more than {length} characters long"
        }),
        Object(n["c"])("password-confirmed", {
            ...o["a"],
            message: "Passwords don't match"
        }),
        Object(n["c"])("url", {
            validate: e=>/(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,63}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/.test(e),
            message: "Not a valid URL"
        }),
        Object(n["c"])("shopify-url", {
            validate: e=>/^[a-zA-Z-0-9]+\.myshopify\.com$/.test(e),
            message: "Not a valid Shopify URL"
        }),
        Object(n["c"])("image", {
            ...o["c"],
            message: "{_field_} is required"
        });
        i("6dfc")
    },
    cd7e: function(e, t, i) {
        e.exports = i.p + "img/visa-colored.ee16dbe1.svg?x-request=html"
    },
    cf51: function(e, t, i) {
        e.exports = i.p + "img/admin.2e765d4c.svg?x-request=html"
    },
    d0a0: function(e, t, i) {
        e.exports = i.p + "img/print-area-customily.65345f2e.png?x-request=html"
    },
    d13c: function(e, t, i) {
        e.exports = i.p + "img/map.f61e4017.svg?x-request=html"
    },
    d162: function(e, t, i) {
        "use strict";
        i("01ee")
    },
    d269: function(e, t, i) {
        i("13d5"),
        angular.module("ui.bootstrap", ["ui.bootstrap.tpls", "ui.bootstrap.collapse", "ui.bootstrap.accordion", "ui.bootstrap.alert", "ui.bootstrap.buttons", "ui.bootstrap.carousel", "ui.bootstrap.dateparser", "ui.bootstrap.position", "ui.bootstrap.datepicker", "ui.bootstrap.dropdown", "ui.bootstrap.stackedMap", "ui.bootstrap.modal", "ui.bootstrap.pagination", "ui.bootstrap.tooltip", "ui.bootstrap.popover", "ui.bootstrap.progressbar", "ui.bootstrap.rating", "ui.bootstrap.tabs", "ui.bootstrap.timepicker", "ui.bootstrap.typeahead"]),
        angular.module("ui.bootstrap.tpls", ["template/accordion/accordion-group.html", "template/accordion/accordion.html", "template/alert/alert.html", "template/carousel/carousel.html", "template/carousel/slide.html", "template/datepicker/datepicker.html", "template/datepicker/day.html", "template/datepicker/month.html", "template/datepicker/popup.html", "template/datepicker/year.html", "template/modal/backdrop.html", "template/modal/window.html", "template/pagination/pager.html", "template/pagination/pagination.html", "template/tooltip/tooltip-html-popup.html", "template/tooltip/tooltip-popup.html", "template/tooltip/tooltip-template-popup.html", "template/popover/popover-html.html", "template/popover/popover-template.html", "template/popover/popover.html", "template/progressbar/bar.html", "template/progressbar/progress.html", "template/progressbar/progressbar.html", "template/rating/rating.html", "template/tabs/tab.html", "template/tabs/tabset.html", "template/timepicker/timepicker.html", "template/typeahead/typeahead-match.html", "template/typeahead/typeahead-popup.html"]),
        angular.module("ui.bootstrap.collapse", []).directive("uibCollapse", ["$animate", "$injector", function(e, t) {
            var i = t.has("$animateCss") ? t.get("$animateCss") : null;
            return {
                link: function(t, n, o) {
                    function r() {
                        n.removeClass("collapse").addClass("collapsing").attr("aria-expanded", !0).attr("aria-hidden", !1),
                        i ? i(n, {
                            addClass: "in",
                            easing: "ease",
                            to: {
                                height: n[0].scrollHeight + "px"
                            }
                        }).start()["finally"](a) : e.addClass(n, "in", {
                            to: {
                                height: n[0].scrollHeight + "px"
                            }
                        }).then(a)
                    }
                    function a() {
                        n.removeClass("collapsing").addClass("collapse").css({
                            height: "auto"
                        })
                    }
                    function s() {
                        return n.hasClass("collapse") || n.hasClass("in") ? (n.css({
                            height: n[0].scrollHeight + "px"
                        }).removeClass("collapse").addClass("collapsing").attr("aria-expanded", !1).attr("aria-hidden", !0),
                        void (i ? i(n, {
                            removeClass: "in",
                            to: {
                                height: "0"
                            }
                        }).start()["finally"](l) : e.removeClass(n, "in", {
                            to: {
                                height: "0"
                            }
                        }).then(l))) : l()
                    }
                    function l() {
                        n.css({
                            height: "0"
                        }),
                        n.removeClass("collapsing").addClass("collapse")
                    }
                    t.$watch(o.uibCollapse, (function(e) {
                        e ? s() : r()
                    }
                    ))
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.collapse").value("$collapseSuppressWarning", !1).directive("collapse", ["$animate", "$injector", "$log", "$collapseSuppressWarning", function(e, t, i, n) {
            var o = t.has("$animateCss") ? t.get("$animateCss") : null;
            return {
                link: function(t, r, a) {
                    function s() {
                        r.removeClass("collapse").addClass("collapsing").attr("aria-expanded", !0).attr("aria-hidden", !1),
                        o ? o(r, {
                            easing: "ease",
                            to: {
                                height: r[0].scrollHeight + "px"
                            }
                        }).start().done(l) : e.animate(r, {}, {
                            height: r[0].scrollHeight + "px"
                        }).then(l)
                    }
                    function l() {
                        r.removeClass("collapsing").addClass("collapse in").css({
                            height: "auto"
                        })
                    }
                    function c() {
                        return r.hasClass("collapse") || r.hasClass("in") ? (r.css({
                            height: r[0].scrollHeight + "px"
                        }).removeClass("collapse in").addClass("collapsing").attr("aria-expanded", !1).attr("aria-hidden", !0),
                        void (o ? o(r, {
                            to: {
                                height: "0"
                            }
                        }).start().done(d) : e.animate(r, {}, {
                            height: "0"
                        }).then(d))) : d()
                    }
                    function d() {
                        r.css({
                            height: "0"
                        }),
                        r.removeClass("collapsing").addClass("collapse")
                    }
                    n || i.warn("collapse is now deprecated. Use uib-collapse instead."),
                    t.$watch(a.collapse, (function(e) {
                        e ? c() : s()
                    }
                    ))
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.accordion", ["ui.bootstrap.collapse"]).constant("uibAccordionConfig", {
            closeOthers: !0
        }).controller("UibAccordionController", ["$scope", "$attrs", "uibAccordionConfig", function(e, t, i) {
            this.groups = [],
            this.closeOthers = function(n) {
                var o = angular.isDefined(t.closeOthers) ? e.$eval(t.closeOthers) : i.closeOthers;
                o && angular.forEach(this.groups, (function(e) {
                    e !== n && (e.isOpen = !1)
                }
                ))
            }
            ,
            this.addGroup = function(e) {
                var t = this;
                this.groups.push(e),
                e.$on("$destroy", (function(i) {
                    t.removeGroup(e)
                }
                ))
            }
            ,
            this.removeGroup = function(e) {
                var t = this.groups.indexOf(e);
                -1 !== t && this.groups.splice(t, 1)
            }
        }
        ]).directive("uibAccordion", (function() {
            return {
                controller: "UibAccordionController",
                controllerAs: "accordion",
                transclude: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/accordion/accordion.html"
                }
            }
        }
        )).directive("uibAccordionGroup", (function() {
            return {
                require: "^uibAccordion",
                transclude: !0,
                replace: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/accordion/accordion-group.html"
                },
                scope: {
                    heading: "@",
                    isOpen: "=?",
                    isDisabled: "=?"
                },
                controller: function() {
                    this.setHeading = function(e) {
                        this.heading = e
                    }
                },
                link: function(e, t, i, n) {
                    n.addGroup(e),
                    e.openClass = i.openClass || "panel-open",
                    e.panelClass = i.panelClass,
                    e.$watch("isOpen", (function(i) {
                        t.toggleClass(e.openClass, !!i),
                        i && n.closeOthers(e)
                    }
                    )),
                    e.toggleOpen = function(t) {
                        e.isDisabled || t && 32 !== t.which || (e.isOpen = !e.isOpen)
                    }
                }
            }
        }
        )).directive("uibAccordionHeading", (function() {
            return {
                transclude: !0,
                template: "",
                replace: !0,
                require: "^uibAccordionGroup",
                link: function(e, t, i, n, o) {
                    n.setHeading(o(e, angular.noop))
                }
            }
        }
        )).directive("uibAccordionTransclude", (function() {
            return {
                require: ["?^uibAccordionGroup", "?^accordionGroup"],
                link: function(e, t, i, n) {
                    n = n[0] ? n[0] : n[1],
                    e.$watch((function() {
                        return n[i.uibAccordionTransclude]
                    }
                    ), (function(e) {
                        e && (t.find("span").html(""),
                        t.find("span").append(e))
                    }
                    ))
                }
            }
        }
        )),
        angular.module("ui.bootstrap.accordion").value("$accordionSuppressWarning", !1).controller("AccordionController", ["$scope", "$attrs", "$controller", "$log", "$accordionSuppressWarning", function(e, t, i, n, o) {
            o || n.warn("AccordionController is now deprecated. Use UibAccordionController instead."),
            angular.extend(this, i("UibAccordionController", {
                $scope: e,
                $attrs: t
            }))
        }
        ]).directive("accordion", ["$log", "$accordionSuppressWarning", function(e, t) {
            return {
                restrict: "EA",
                controller: "AccordionController",
                controllerAs: "accordion",
                transclude: !0,
                replace: !1,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/accordion/accordion.html"
                },
                link: function() {
                    t || e.warn("accordion is now deprecated. Use uib-accordion instead.")
                }
            }
        }
        ]).directive("accordionGroup", ["$log", "$accordionSuppressWarning", function(e, t) {
            return {
                require: "^accordion",
                restrict: "EA",
                transclude: !0,
                replace: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/accordion/accordion-group.html"
                },
                scope: {
                    heading: "@",
                    isOpen: "=?",
                    isDisabled: "=?"
                },
                controller: function() {
                    this.setHeading = function(e) {
                        this.heading = e
                    }
                },
                link: function(i, n, o, r) {
                    t || e.warn("accordion-group is now deprecated. Use uib-accordion-group instead."),
                    r.addGroup(i),
                    i.openClass = o.openClass || "panel-open",
                    i.panelClass = o.panelClass,
                    i.$watch("isOpen", (function(e) {
                        n.toggleClass(i.openClass, !!e),
                        e && r.closeOthers(i)
                    }
                    )),
                    i.toggleOpen = function(e) {
                        i.isDisabled || e && 32 !== e.which || (i.isOpen = !i.isOpen)
                    }
                }
            }
        }
        ]).directive("accordionHeading", ["$log", "$accordionSuppressWarning", function(e, t) {
            return {
                restrict: "EA",
                transclude: !0,
                template: "",
                replace: !0,
                require: "^accordionGroup",
                link: function(i, n, o, r, a) {
                    t || e.warn("accordion-heading is now deprecated. Use uib-accordion-heading instead."),
                    r.setHeading(a(i, angular.noop))
                }
            }
        }
        ]).directive("accordionTransclude", ["$log", "$accordionSuppressWarning", function(e, t) {
            return {
                require: "^accordionGroup",
                link: function(i, n, o, r) {
                    t || e.warn("accordion-transclude is now deprecated. Use uib-accordion-transclude instead."),
                    i.$watch((function() {
                        return r[o.accordionTransclude]
                    }
                    ), (function(e) {
                        e && (n.find("span").html(""),
                        n.find("span").append(e))
                    }
                    ))
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.alert", []).controller("UibAlertController", ["$scope", "$attrs", "$interpolate", "$timeout", function(e, t, i, n) {
            e.closeable = !!t.close;
            var o = angular.isDefined(t.dismissOnTimeout) ? i(t.dismissOnTimeout)(e.$parent) : null;
            o && n((function() {
                e.close()
            }
            ), parseInt(o, 10))
        }
        ]).directive("uibAlert", (function() {
            return {
                controller: "UibAlertController",
                controllerAs: "alert",
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/alert/alert.html"
                },
                transclude: !0,
                replace: !0,
                scope: {
                    type: "@",
                    close: "&"
                }
            }
        }
        )),
        angular.module("ui.bootstrap.alert").value("$alertSuppressWarning", !1).controller("AlertController", ["$scope", "$attrs", "$controller", "$log", "$alertSuppressWarning", function(e, t, i, n, o) {
            o || n.warn("AlertController is now deprecated. Use UibAlertController instead."),
            angular.extend(this, i("UibAlertController", {
                $scope: e,
                $attrs: t
            }))
        }
        ]).directive("alert", ["$log", "$alertSuppressWarning", function(e, t) {
            return {
                controller: "AlertController",
                controllerAs: "alert",
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/alert/alert.html"
                },
                transclude: !0,
                replace: !0,
                scope: {
                    type: "@",
                    close: "&"
                },
                link: function() {
                    t || e.warn("alert is now deprecated. Use uib-alert instead.")
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.buttons", []).constant("uibButtonConfig", {
            activeClass: "active",
            toggleEvent: "click"
        }).controller("UibButtonsController", ["uibButtonConfig", function(e) {
            this.activeClass = e.activeClass || "active",
            this.toggleEvent = e.toggleEvent || "click"
        }
        ]).directive("uibBtnRadio", (function() {
            return {
                require: ["uibBtnRadio", "ngModel"],
                controller: "UibButtonsController",
                controllerAs: "buttons",
                link: function(e, t, i, n) {
                    var o = n[0]
                      , r = n[1];
                    t.find("input").css({
                        display: "none"
                    }),
                    r.$render = function() {
                        t.toggleClass(o.activeClass, angular.equals(r.$modelValue, e.$eval(i.uibBtnRadio)))
                    }
                    ,
                    t.on(o.toggleEvent, (function() {
                        if (!i.disabled) {
                            var n = t.hasClass(o.activeClass);
                            (!n || angular.isDefined(i.uncheckable)) && e.$apply((function() {
                                r.$setViewValue(n ? null : e.$eval(i.uibBtnRadio)),
                                r.$render()
                            }
                            ))
                        }
                    }
                    ))
                }
            }
        }
        )).directive("uibBtnCheckbox", (function() {
            return {
                require: ["uibBtnCheckbox", "ngModel"],
                controller: "UibButtonsController",
                controllerAs: "button",
                link: function(e, t, i, n) {
                    function o() {
                        return a(i.btnCheckboxTrue, !0)
                    }
                    function r() {
                        return a(i.btnCheckboxFalse, !1)
                    }
                    function a(t, i) {
                        return angular.isDefined(t) ? e.$eval(t) : i
                    }
                    var s = n[0]
                      , l = n[1];
                    t.find("input").css({
                        display: "none"
                    }),
                    l.$render = function() {
                        t.toggleClass(s.activeClass, angular.equals(l.$modelValue, o()))
                    }
                    ,
                    t.on(s.toggleEvent, (function() {
                        i.disabled || e.$apply((function() {
                            l.$setViewValue(t.hasClass(s.activeClass) ? r() : o()),
                            l.$render()
                        }
                        ))
                    }
                    ))
                }
            }
        }
        )),
        angular.module("ui.bootstrap.buttons").value("$buttonsSuppressWarning", !1).controller("ButtonsController", ["$controller", "$log", "$buttonsSuppressWarning", function(e, t, i) {
            i || t.warn("ButtonsController is now deprecated. Use UibButtonsController instead."),
            angular.extend(this, e("UibButtonsController"))
        }
        ]).directive("btnRadio", ["$log", "$buttonsSuppressWarning", function(e, t) {
            return {
                require: ["btnRadio", "ngModel"],
                controller: "ButtonsController",
                controllerAs: "buttons",
                link: function(i, n, o, r) {
                    t || e.warn("btn-radio is now deprecated. Use uib-btn-radio instead.");
                    var a = r[0]
                      , s = r[1];
                    n.find("input").css({
                        display: "none"
                    }),
                    s.$render = function() {
                        n.toggleClass(a.activeClass, angular.equals(s.$modelValue, i.$eval(o.btnRadio)))
                    }
                    ,
                    n.bind(a.toggleEvent, (function() {
                        if (!o.disabled) {
                            var e = n.hasClass(a.activeClass);
                            (!e || angular.isDefined(o.uncheckable)) && i.$apply((function() {
                                s.$setViewValue(e ? null : i.$eval(o.btnRadio)),
                                s.$render()
                            }
                            ))
                        }
                    }
                    ))
                }
            }
        }
        ]).directive("btnCheckbox", ["$document", "$log", "$buttonsSuppressWarning", function(e, t, i) {
            return {
                require: ["btnCheckbox", "ngModel"],
                controller: "ButtonsController",
                controllerAs: "button",
                link: function(n, o, r, a) {
                    function s() {
                        return c(r.btnCheckboxTrue, !0)
                    }
                    function l() {
                        return c(r.btnCheckboxFalse, !1)
                    }
                    function c(e, t) {
                        var i = n.$eval(e);
                        return angular.isDefined(i) ? i : t
                    }
                    i || t.warn("btn-checkbox is now deprecated. Use uib-btn-checkbox instead.");
                    var d = a[0]
                      , u = a[1];
                    o.find("input").css({
                        display: "none"
                    }),
                    u.$render = function() {
                        o.toggleClass(d.activeClass, angular.equals(u.$modelValue, s()))
                    }
                    ,
                    o.bind(d.toggleEvent, (function() {
                        r.disabled || n.$apply((function() {
                            u.$setViewValue(o.hasClass(d.activeClass) ? l() : s()),
                            u.$render()
                        }
                        ))
                    }
                    )),
                    o.on("keypress", (function(t) {
                        r.disabled || 32 !== t.which || e[0].activeElement !== o[0] || n.$apply((function() {
                            u.$setViewValue(o.hasClass(d.activeClass) ? l() : s()),
                            u.$render()
                        }
                        ))
                    }
                    ))
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.carousel", []).controller("UibCarouselController", ["$scope", "$element", "$interval", "$animate", function(e, t, i, n) {
            function o(t, i, o) {
                b || (angular.extend(t, {
                    direction: o,
                    active: !0
                }),
                angular.extend(p.currentSlide || {}, {
                    direction: o,
                    active: !1
                }),
                n.enabled() && !e.noTransition && !e.$currentTransition && t.$element && p.slides.length > 1 && (t.$element.data(f, t.direction),
                p.currentSlide && p.currentSlide.$element && p.currentSlide.$element.data(f, t.direction),
                e.$currentTransition = !0,
                m ? n.on("addClass", t.$element, (function(t, i) {
                    "close" === i && (e.$currentTransition = null,
                    n.off("addClass", t))
                }
                )) : t.$element.one("$animate:close", (function() {
                    e.$currentTransition = null
                }
                ))),
                p.currentSlide = t,
                v = i,
                a())
            }
            function r(e) {
                if (angular.isUndefined(h[e].index))
                    return h[e];
                var t;
                for (h.length,
                t = 0; t < h.length; ++t)
                    if (h[t].index == e)
                        return h[t]
            }
            function a() {
                s();
                var t = +e.interval;
                !isNaN(t) && t > 0 && (d = i(l, t))
            }
            function s() {
                d && (i.cancel(d),
                d = null)
            }
            function l() {
                var t = +e.interval;
                u && !isNaN(t) && t > 0 && h.length ? e.next() : e.pause()
            }
            function c(t) {
                t.length || (e.$currentTransition = null)
            }
            var d, u, p = this, h = p.slides = e.slides = [], m = angular.version.minor >= 4, g = "uib-noTransition", f = "uib-slideDirection", v = -1;
            p.currentSlide = null;
            var b = !1;
            p.select = e.select = function(t, i) {
                var n = e.indexOfSlide(t);
                void 0 === i && (i = n > p.getCurrentIndex() ? "next" : "prev"),
                t && t !== p.currentSlide && !e.$currentTransition && o(t, n, i)
            }
            ,
            e.$on("$destroy", (function() {
                b = !0
            }
            )),
            p.getCurrentIndex = function() {
                return p.currentSlide && angular.isDefined(p.currentSlide.index) ? +p.currentSlide.index : v
            }
            ,
            e.indexOfSlide = function(e) {
                return angular.isDefined(e.index) ? +e.index : h.indexOf(e)
            }
            ,
            e.next = function() {
                var t = (p.getCurrentIndex() + 1) % h.length;
                return 0 === t && e.noWrap() ? void e.pause() : p.select(r(t), "next")
            }
            ,
            e.prev = function() {
                var t = p.getCurrentIndex() - 1 < 0 ? h.length - 1 : p.getCurrentIndex() - 1;
                return e.noWrap() && t === h.length - 1 ? void e.pause() : p.select(r(t), "prev")
            }
            ,
            e.isActive = function(e) {
                return p.currentSlide === e
            }
            ,
            e.$watch("interval", a),
            e.$watchCollection("slides", c),
            e.$on("$destroy", s),
            e.play = function() {
                u || (u = !0,
                a())
            }
            ,
            e.pause = function() {
                e.noPause || (u = !1,
                s())
            }
            ,
            p.addSlide = function(t, i) {
                t.$element = i,
                h.push(t),
                1 === h.length || t.active ? (p.select(h[h.length - 1]),
                1 === h.length && e.play()) : t.active = !1
            }
            ,
            p.removeSlide = function(e) {
                angular.isDefined(e.index) && h.sort((function(e, t) {
                    return +e.index > +t.index
                }
                ));
                var t = h.indexOf(e);
                h.splice(t, 1),
                h.length > 0 && e.active ? t >= h.length ? p.select(h[t - 1]) : p.select(h[t]) : v > t && v--,
                0 === h.length && (p.currentSlide = null)
            }
            ,
            e.$watch("noTransition", (function(e) {
                t.data(g, e)
            }
            ))
        }
        ]).directive("uibCarousel", [function() {
            return {
                transclude: !0,
                replace: !0,
                controller: "UibCarouselController",
                controllerAs: "carousel",
                require: "carousel",
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/carousel/carousel.html"
                },
                scope: {
                    interval: "=",
                    noTransition: "=",
                    noPause: "=",
                    noWrap: "&"
                }
            }
        }
        ]).directive("uibSlide", (function() {
            return {
                require: "^uibCarousel",
                restrict: "EA",
                transclude: !0,
                replace: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/carousel/slide.html"
                },
                scope: {
                    active: "=?",
                    actual: "=?",
                    index: "=?"
                },
                link: function(e, t, i, n) {
                    n.addSlide(e, t),
                    e.$on("$destroy", (function() {
                        n.removeSlide(e)
                    }
                    )),
                    e.$watch("active", (function(t) {
                        t && n.select(e)
                    }
                    ))
                }
            }
        }
        )).animation(".item", ["$injector", "$animate", function(e, t) {
            function i(e, t, i) {
                e.removeClass(t),
                i && i()
            }
            var n = "uib-noTransition"
              , o = "uib-slideDirection"
              , r = null;
            return e.has("$animateCss") && (r = e.get("$animateCss")),
            {
                beforeAddClass: function(e, a, s) {
                    if ("active" == a && e.parent() && e.parent().parent() && !e.parent().parent().data(n)) {
                        var l = !1
                          , c = e.data(o)
                          , d = "next" == c ? "left" : "right"
                          , u = i.bind(this, e, d + " " + c, s);
                        return e.addClass(c),
                        r ? r(e, {
                            addClass: d
                        }).start().done(u) : t.addClass(e, d).then((function() {
                            l || u(),
                            s()
                        }
                        )),
                        function() {
                            l = !0
                        }
                    }
                    s()
                },
                beforeRemoveClass: function(e, a, s) {
                    if ("active" === a && e.parent() && e.parent().parent() && !e.parent().parent().data(n)) {
                        var l = !1
                          , c = e.data(o)
                          , d = "next" == c ? "left" : "right"
                          , u = i.bind(this, e, d, s);
                        return r ? r(e, {
                            addClass: d
                        }).start().done(u) : t.addClass(e, d).then((function() {
                            l || u(),
                            s()
                        }
                        )),
                        function() {
                            l = !0
                        }
                    }
                    s()
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.carousel").value("$carouselSuppressWarning", !1).controller("CarouselController", ["$scope", "$element", "$controller", "$log", "$carouselSuppressWarning", function(e, t, i, n, o) {
            o || n.warn("CarouselController is now deprecated. Use UibCarouselController instead."),
            angular.extend(this, i("UibCarouselController", {
                $scope: e,
                $element: t
            }))
        }
        ]).directive("carousel", ["$log", "$carouselSuppressWarning", function(e, t) {
            return {
                transclude: !0,
                replace: !0,
                controller: "CarouselController",
                controllerAs: "carousel",
                require: "carousel",
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/carousel/carousel.html"
                },
                scope: {
                    interval: "=",
                    noTransition: "=",
                    noPause: "=",
                    noWrap: "&"
                },
                link: function() {
                    t || e.warn("carousel is now deprecated. Use uib-carousel instead.")
                }
            }
        }
        ]).directive("slide", ["$log", "$carouselSuppressWarning", function(e, t) {
            return {
                require: "^carousel",
                transclude: !0,
                replace: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/carousel/slide.html"
                },
                scope: {
                    active: "=?",
                    actual: "=?",
                    index: "=?"
                },
                link: function(i, n, o, r) {
                    t || e.warn("slide is now deprecated. Use uib-slide instead."),
                    r.addSlide(i, n),
                    i.$on("$destroy", (function() {
                        r.removeSlide(i)
                    }
                    )),
                    i.$watch("active", (function(e) {
                        e && r.select(i)
                    }
                    ))
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.dateparser", []).service("uibDateParser", ["$log", "$locale", "orderByFilter", function(e, t, i) {
            function n(e) {
                var t = []
                  , n = e.split("");
                return angular.forEach(a, (function(i, o) {
                    var r = e.indexOf(o);
                    if (r > -1) {
                        e = e.split(""),
                        n[r] = "(" + i.regex + ")",
                        e[r] = "$";
                        for (var a = r + 1, s = r + o.length; s > a; a++)
                            n[a] = "",
                            e[a] = "$";
                        e = e.join(""),
                        t.push({
                            index: r,
                            apply: i.apply
                        })
                    }
                }
                )),
                {
                    regex: new RegExp("^" + n.join("") + "$"),
                    map: i(t, "index")
                }
            }
            function o(e, t, i) {
                return !(1 > i) && (1 === t && i > 28 ? 29 === i && (e % 4 === 0 && e % 100 !== 0 || e % 400 === 0) : 3 !== t && 5 !== t && 8 !== t && 10 !== t || 31 > i)
            }
            var r, a, s = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;
            this.init = function() {
                r = t.id,
                this.parsers = {},
                a = {
                    yyyy: {
                        regex: "\\d{4}",
                        apply: function(e) {
                            this.year = +e
                        }
                    },
                    yy: {
                        regex: "\\d{2}",
                        apply: function(e) {
                            this.year = +e + 2e3
                        }
                    },
                    y: {
                        regex: "\\d{1,4}",
                        apply: function(e) {
                            this.year = +e
                        }
                    },
                    MMMM: {
                        regex: t.DATETIME_FORMATS.MONTH.join("|"),
                        apply: function(e) {
                            this.month = t.DATETIME_FORMATS.MONTH.indexOf(e)
                        }
                    },
                    MMM: {
                        regex: t.DATETIME_FORMATS.SHORTMONTH.join("|"),
                        apply: function(e) {
                            this.month = t.DATETIME_FORMATS.SHORTMONTH.indexOf(e)
                        }
                    },
                    MM: {
                        regex: "0[1-9]|1[0-2]",
                        apply: function(e) {
                            this.month = e - 1
                        }
                    },
                    M: {
                        regex: "[1-9]|1[0-2]",
                        apply: function(e) {
                            this.month = e - 1
                        }
                    },
                    dd: {
                        regex: "[0-2][0-9]{1}|3[0-1]{1}",
                        apply: function(e) {
                            this.date = +e
                        }
                    },
                    d: {
                        regex: "[1-2]?[0-9]{1}|3[0-1]{1}",
                        apply: function(e) {
                            this.date = +e
                        }
                    },
                    EEEE: {
                        regex: t.DATETIME_FORMATS.DAY.join("|")
                    },
                    EEE: {
                        regex: t.DATETIME_FORMATS.SHORTDAY.join("|")
                    },
                    HH: {
                        regex: "(?:0|1)[0-9]|2[0-3]",
                        apply: function(e) {
                            this.hours = +e
                        }
                    },
                    hh: {
                        regex: "0[0-9]|1[0-2]",
                        apply: function(e) {
                            this.hours = +e
                        }
                    },
                    H: {
                        regex: "1?[0-9]|2[0-3]",
                        apply: function(e) {
                            this.hours = +e
                        }
                    },
                    h: {
                        regex: "[0-9]|1[0-2]",
                        apply: function(e) {
                            this.hours = +e
                        }
                    },
                    mm: {
                        regex: "[0-5][0-9]",
                        apply: function(e) {
                            this.minutes = +e
                        }
                    },
                    m: {
                        regex: "[0-9]|[1-5][0-9]",
                        apply: function(e) {
                            this.minutes = +e
                        }
                    },
                    sss: {
                        regex: "[0-9][0-9][0-9]",
                        apply: function(e) {
                            this.milliseconds = +e
                        }
                    },
                    ss: {
                        regex: "[0-5][0-9]",
                        apply: function(e) {
                            this.seconds = +e
                        }
                    },
                    s: {
                        regex: "[0-9]|[1-5][0-9]",
                        apply: function(e) {
                            this.seconds = +e
                        }
                    },
                    a: {
                        regex: t.DATETIME_FORMATS.AMPMS.join("|"),
                        apply: function(e) {
                            12 === this.hours && (this.hours = 0),
                            "PM" === e && (this.hours += 12)
                        }
                    }
                }
            }
            ,
            this.init(),
            this.parse = function(i, a, l) {
                if (!angular.isString(i) || !a)
                    return i;
                a = t.DATETIME_FORMATS[a] || a,
                a = a.replace(s, "\\$&"),
                t.id !== r && this.init(),
                this.parsers[a] || (this.parsers[a] = n(a));
                var c = this.parsers[a]
                  , d = c.regex
                  , u = c.map
                  , p = i.match(d);
                if (p && p.length) {
                    var h, m;
                    angular.isDate(l) && !isNaN(l.getTime()) ? h = {
                        year: l.getFullYear(),
                        month: l.getMonth(),
                        date: l.getDate(),
                        hours: l.getHours(),
                        minutes: l.getMinutes(),
                        seconds: l.getSeconds(),
                        milliseconds: l.getMilliseconds()
                    } : (l && e.warn("dateparser:", "baseDate is not a valid date"),
                    h = {
                        year: 1900,
                        month: 0,
                        date: 1,
                        hours: 0,
                        minutes: 0,
                        seconds: 0,
                        milliseconds: 0
                    });
                    for (var g = 1, f = p.length; f > g; g++) {
                        var v = u[g - 1];
                        v.apply && v.apply.call(h, p[g])
                    }
                    return o(h.year, h.month, h.date) && (angular.isDate(l) && !isNaN(l.getTime()) ? (m = new Date(l),
                    m.setFullYear(h.year, h.month, h.date, h.hours, h.minutes, h.seconds, h.milliseconds || 0)) : m = new Date(h.year,h.month,h.date,h.hours,h.minutes,h.seconds,h.milliseconds || 0)),
                    m
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.dateparser").value("$dateParserSuppressWarning", !1).service("dateParser", ["$log", "$dateParserSuppressWarning", "uibDateParser", function(e, t, i) {
            t || e.warn("dateParser is now deprecated. Use uibDateParser instead."),
            angular.extend(this, i)
        }
        ]),
        angular.module("ui.bootstrap.position", []).factory("$uibPosition", ["$document", "$window", function(e, t) {
            function i(e, i) {
                return e.currentStyle ? e.currentStyle[i] : t.getComputedStyle ? t.getComputedStyle(e)[i] : e.style[i]
            }
            function n(e) {
                return "static" === (i(e, "position") || "static")
            }
            var o = function(t) {
                for (var i = e[0], o = t.offsetParent || i; o && o !== i && n(o); )
                    o = o.offsetParent;
                return o || i
            };
            return {
                position: function(t) {
                    var i = this.offset(t)
                      , n = {
                        top: 0,
                        left: 0
                    }
                      , r = o(t[0]);
                    r != e[0] && (n = this.offset(angular.element(r)),
                    n.top += r.clientTop - r.scrollTop,
                    n.left += r.clientLeft - r.scrollLeft);
                    var a = t[0].getBoundingClientRect();
                    return {
                        width: a.width || t.prop("offsetWidth"),
                        height: a.height || t.prop("offsetHeight"),
                        top: i.top - n.top,
                        left: i.left - n.left
                    }
                },
                offset: function(i) {
                    var n = i[0].getBoundingClientRect();
                    return {
                        width: n.width || i.prop("offsetWidth"),
                        height: n.height || i.prop("offsetHeight"),
                        top: n.top + (t.pageYOffset || e[0].documentElement.scrollTop),
                        left: n.left + (t.pageXOffset || e[0].documentElement.scrollLeft)
                    }
                },
                positionElements: function(e, t, i, n) {
                    var o, r, a, s, l = i.split("-"), c = l[0], d = l[1] || "center";
                    o = n ? this.offset(e) : this.position(e),
                    r = t.prop("offsetWidth"),
                    a = t.prop("offsetHeight");
                    var u = {
                        center: function() {
                            return o.left + o.width / 2 - r / 2
                        },
                        left: function() {
                            return o.left
                        },
                        right: function() {
                            return o.left + o.width
                        }
                    }
                      , p = {
                        center: function() {
                            return o.top + o.height / 2 - a / 2
                        },
                        top: function() {
                            return o.top
                        },
                        bottom: function() {
                            return o.top + o.height
                        }
                    };
                    switch (c) {
                    case "right":
                        s = {
                            top: p[d](),
                            left: u[c]()
                        };
                        break;
                    case "left":
                        s = {
                            top: p[d](),
                            left: o.left - r
                        };
                        break;
                    case "bottom":
                        s = {
                            top: p[c](),
                            left: u[d]()
                        };
                        break;
                    default:
                        s = {
                            top: o.top - a,
                            left: u[d]()
                        }
                    }
                    return s
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.position").value("$positionSuppressWarning", !1).service("$position", ["$log", "$positionSuppressWarning", "$uibPosition", function(e, t, i) {
            t || e.warn("$position is now deprecated. Use $uibPosition instead."),
            angular.extend(this, i)
        }
        ]),
        angular.module("ui.bootstrap.datepicker", ["ui.bootstrap.dateparser", "ui.bootstrap.position"]).value("$datepickerSuppressError", !1).constant("uibDatepickerConfig", {
            formatDay: "dd",
            formatMonth: "MMMM",
            formatYear: "yyyy",
            formatDayHeader: "EEE",
            formatDayTitle: "MMMM yyyy",
            formatMonthTitle: "yyyy",
            datepickerMode: "day",
            minMode: "day",
            maxMode: "year",
            showWeeks: !0,
            startingDay: 0,
            yearRange: 20,
            minDate: null,
            maxDate: null,
            shortcutPropagation: !1
        }).controller("UibDatepickerController", ["$scope", "$attrs", "$parse", "$interpolate", "$log", "dateFilter", "uibDatepickerConfig", "$datepickerSuppressError", function(e, t, i, n, o, r, a, s) {
            var l = this
              , c = {
                $setViewValue: angular.noop
            };
            this.modes = ["day", "month", "year"],
            angular.forEach(["formatDay", "formatMonth", "formatYear", "formatDayHeader", "formatDayTitle", "formatMonthTitle", "showWeeks", "startingDay", "yearRange", "shortcutPropagation"], (function(i, o) {
                l[i] = angular.isDefined(t[i]) ? 6 > o ? n(t[i])(e.$parent) : e.$parent.$eval(t[i]) : a[i]
            }
            )),
            angular.forEach(["minDate", "maxDate"], (function(n) {
                t[n] ? e.$parent.$watch(i(t[n]), (function(e) {
                    l[n] = e ? new Date(e) : null,
                    l.refreshView()
                }
                )) : l[n] = a[n] ? new Date(a[n]) : null
            }
            )),
            angular.forEach(["minMode", "maxMode"], (function(n) {
                t[n] ? e.$parent.$watch(i(t[n]), (function(i) {
                    l[n] = angular.isDefined(i) ? i : t[n],
                    e[n] = l[n],
                    ("minMode" == n && l.modes.indexOf(e.datepickerMode) < l.modes.indexOf(l[n]) || "maxMode" == n && l.modes.indexOf(e.datepickerMode) > l.modes.indexOf(l[n])) && (e.datepickerMode = l[n])
                }
                )) : (l[n] = a[n] || null,
                e[n] = l[n])
            }
            )),
            e.datepickerMode = e.datepickerMode || a.datepickerMode,
            e.uniqueId = "datepicker-" + e.$id + "-" + Math.floor(1e4 * Math.random()),
            angular.isDefined(t.initDate) ? (this.activeDate = e.$parent.$eval(t.initDate) || new Date,
            e.$parent.$watch(t.initDate, (function(e) {
                e && (c.$isEmpty(c.$modelValue) || c.$invalid) && (l.activeDate = e,
                l.refreshView())
            }
            ))) : this.activeDate = new Date,
            e.isActive = function(t) {
                return 0 === l.compare(t.date, l.activeDate) && (e.activeDateId = t.uid,
                !0)
            }
            ,
            this.init = function(e) {
                c = e,
                c.$render = function() {
                    l.render()
                }
            }
            ,
            this.render = function() {
                if (c.$viewValue) {
                    var e = new Date(c.$viewValue)
                      , t = !isNaN(e);
                    t ? this.activeDate = e : s || o.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')
                }
                this.refreshView()
            }
            ,
            this.refreshView = function() {
                if (this.element) {
                    this._refreshView();
                    var e = c.$viewValue ? new Date(c.$viewValue) : null;
                    c.$setValidity("dateDisabled", !e || this.element && !this.isDisabled(e))
                }
            }
            ,
            this.createDateObject = function(e, t) {
                var i = c.$viewValue ? new Date(c.$viewValue) : null;
                return {
                    date: e,
                    label: r(e, t),
                    selected: i && 0 === this.compare(e, i),
                    disabled: this.isDisabled(e),
                    current: 0 === this.compare(e, new Date),
                    customClass: this.customClass(e)
                }
            }
            ,
            this.isDisabled = function(i) {
                return this.minDate && this.compare(i, this.minDate) < 0 || this.maxDate && this.compare(i, this.maxDate) > 0 || t.dateDisabled && e.dateDisabled({
                    date: i,
                    mode: e.datepickerMode
                })
            }
            ,
            this.customClass = function(t) {
                return e.customClass({
                    date: t,
                    mode: e.datepickerMode
                })
            }
            ,
            this.split = function(e, t) {
                for (var i = []; e.length > 0; )
                    i.push(e.splice(0, t));
                return i
            }
            ,
            e.select = function(t) {
                if (e.datepickerMode === l.minMode) {
                    var i = c.$viewValue ? new Date(c.$viewValue) : new Date(0,0,0,0,0,0,0);
                    i.setFullYear(t.getFullYear(), t.getMonth(), t.getDate()),
                    c.$setViewValue(i),
                    c.$render()
                } else
                    l.activeDate = t,
                    e.datepickerMode = l.modes[l.modes.indexOf(e.datepickerMode) - 1]
            }
            ,
            e.move = function(e) {
                var t = l.activeDate.getFullYear() + e * (l.step.years || 0)
                  , i = l.activeDate.getMonth() + e * (l.step.months || 0);
                l.activeDate.setFullYear(t, i, 1),
                l.refreshView()
            }
            ,
            e.toggleMode = function(t) {
                t = t || 1,
                e.datepickerMode === l.maxMode && 1 === t || e.datepickerMode === l.minMode && -1 === t || (e.datepickerMode = l.modes[l.modes.indexOf(e.datepickerMode) + t])
            }
            ,
            e.keys = {
                13: "enter",
                32: "space",
                33: "pageup",
                34: "pagedown",
                35: "end",
                36: "home",
                37: "left",
                38: "up",
                39: "right",
                40: "down"
            };
            var d = function() {
                l.element[0].focus()
            };
            e.$on("uib:datepicker.focus", d),
            e.keydown = function(t) {
                var i = e.keys[t.which];
                if (i && !t.shiftKey && !t.altKey)
                    if (t.preventDefault(),
                    l.shortcutPropagation || t.stopPropagation(),
                    "enter" === i || "space" === i) {
                        if (l.isDisabled(l.activeDate))
                            return;
                        e.select(l.activeDate)
                    } else
                        !t.ctrlKey || "up" !== i && "down" !== i ? (l.handleKeyDown(i, t),
                        l.refreshView()) : e.toggleMode("up" === i ? 1 : -1)
            }
        }
        ]).controller("UibDaypickerController", ["$scope", "$element", "dateFilter", function(e, t, i) {
            function n(e, t) {
                return 1 !== t || e % 4 !== 0 || e % 100 === 0 && e % 400 !== 0 ? r[t] : 29
            }
            function o(e) {
                var t = new Date(e);
                t.setDate(t.getDate() + 4 - (t.getDay() || 7));
                var i = t.getTime();
                return t.setMonth(0),
                t.setDate(1),
                Math.floor(Math.round((i - t) / 864e5) / 7) + 1
            }
            var r = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            this.step = {
                months: 1
            },
            this.element = t,
            this.init = function(t) {
                angular.extend(t, this),
                e.showWeeks = t.showWeeks,
                t.refreshView()
            }
            ,
            this.getDates = function(e, t) {
                for (var i, n = new Array(t), o = new Date(e), r = 0; t > r; )
                    i = new Date(o),
                    n[r++] = i,
                    o.setDate(o.getDate() + 1);
                return n
            }
            ,
            this._refreshView = function() {
                var t = this.activeDate.getFullYear()
                  , n = this.activeDate.getMonth()
                  , r = new Date(this.activeDate);
                r.setFullYear(t, n, 1);
                var a = this.startingDay - r.getDay()
                  , s = a > 0 ? 7 - a : -a
                  , l = new Date(r);
                s > 0 && l.setDate(1 - s);
                for (var c = this.getDates(l, 42), d = 0; 42 > d; d++)
                    c[d] = angular.extend(this.createDateObject(c[d], this.formatDay), {
                        secondary: c[d].getMonth() !== n,
                        uid: e.uniqueId + "-" + d
                    });
                e.labels = new Array(7);
                for (var u = 0; 7 > u; u++)
                    e.labels[u] = {
                        abbr: i(c[u].date, this.formatDayHeader),
                        full: i(c[u].date, "EEEE")
                    };
                if (e.title = i(this.activeDate, this.formatDayTitle),
                e.rows = this.split(c, 7),
                e.showWeeks) {
                    e.weekNumbers = [];
                    for (var p = (11 - this.startingDay) % 7, h = e.rows.length, m = 0; h > m; m++)
                        e.weekNumbers.push(o(e.rows[m][p].date))
                }
            }
            ,
            this.compare = function(e, t) {
                return new Date(e.getFullYear(),e.getMonth(),e.getDate()) - new Date(t.getFullYear(),t.getMonth(),t.getDate())
            }
            ,
            this.handleKeyDown = function(e, t) {
                var i = this.activeDate.getDate();
                if ("left" === e)
                    i -= 1;
                else if ("up" === e)
                    i -= 7;
                else if ("right" === e)
                    i += 1;
                else if ("down" === e)
                    i += 7;
                else if ("pageup" === e || "pagedown" === e) {
                    var o = this.activeDate.getMonth() + ("pageup" === e ? -1 : 1);
                    this.activeDate.setMonth(o, 1),
                    i = Math.min(n(this.activeDate.getFullYear(), this.activeDate.getMonth()), i)
                } else
                    "home" === e ? i = 1 : "end" === e && (i = n(this.activeDate.getFullYear(), this.activeDate.getMonth()));
                this.activeDate.setDate(i)
            }
        }
        ]).controller("UibMonthpickerController", ["$scope", "$element", "dateFilter", function(e, t, i) {
            this.step = {
                years: 1
            },
            this.element = t,
            this.init = function(e) {
                angular.extend(e, this),
                e.refreshView()
            }
            ,
            this._refreshView = function() {
                for (var t, n = new Array(12), o = this.activeDate.getFullYear(), r = 0; 12 > r; r++)
                    t = new Date(this.activeDate),
                    t.setFullYear(o, r, 1),
                    n[r] = angular.extend(this.createDateObject(t, this.formatMonth), {
                        uid: e.uniqueId + "-" + r
                    });
                e.title = i(this.activeDate, this.formatMonthTitle),
                e.rows = this.split(n, 3)
            }
            ,
            this.compare = function(e, t) {
                return new Date(e.getFullYear(),e.getMonth()) - new Date(t.getFullYear(),t.getMonth())
            }
            ,
            this.handleKeyDown = function(e, t) {
                var i = this.activeDate.getMonth();
                if ("left" === e)
                    i -= 1;
                else if ("up" === e)
                    i -= 3;
                else if ("right" === e)
                    i += 1;
                else if ("down" === e)
                    i += 3;
                else if ("pageup" === e || "pagedown" === e) {
                    var n = this.activeDate.getFullYear() + ("pageup" === e ? -1 : 1);
                    this.activeDate.setFullYear(n)
                } else
                    "home" === e ? i = 0 : "end" === e && (i = 11);
                this.activeDate.setMonth(i)
            }
        }
        ]).controller("UibYearpickerController", ["$scope", "$element", "dateFilter", function(e, t, i) {
            function n(e) {
                return parseInt((e - 1) / o, 10) * o + 1
            }
            var o;
            this.element = t,
            this.yearpickerInit = function() {
                o = this.yearRange,
                this.step = {
                    years: o
                }
            }
            ,
            this._refreshView = function() {
                for (var t, i = new Array(o), r = 0, a = n(this.activeDate.getFullYear()); o > r; r++)
                    t = new Date(this.activeDate),
                    t.setFullYear(a + r, 0, 1),
                    i[r] = angular.extend(this.createDateObject(t, this.formatYear), {
                        uid: e.uniqueId + "-" + r
                    });
                e.title = [i[0].label, i[o - 1].label].join(" - "),
                e.rows = this.split(i, 5)
            }
            ,
            this.compare = function(e, t) {
                return e.getFullYear() - t.getFullYear()
            }
            ,
            this.handleKeyDown = function(e, t) {
                var i = this.activeDate.getFullYear();
                "left" === e ? i -= 1 : "up" === e ? i -= 5 : "right" === e ? i += 1 : "down" === e ? i += 5 : "pageup" === e || "pagedown" === e ? i += ("pageup" === e ? -1 : 1) * this.step.years : "home" === e ? i = n(this.activeDate.getFullYear()) : "end" === e && (i = n(this.activeDate.getFullYear()) + o - 1),
                this.activeDate.setFullYear(i)
            }
        }
        ]).directive("uibDatepicker", (function() {
            return {
                replace: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/datepicker/datepicker.html"
                },
                scope: {
                    datepickerMode: "=?",
                    dateDisabled: "&",
                    customClass: "&",
                    shortcutPropagation: "&?"
                },
                require: ["uibDatepicker", "^ngModel"],
                controller: "UibDatepickerController",
                controllerAs: "datepicker",
                link: function(e, t, i, n) {
                    var o = n[0]
                      , r = n[1];
                    o.init(r)
                }
            }
        }
        )).directive("uibDaypicker", (function() {
            return {
                replace: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/datepicker/day.html"
                },
                require: ["^?uibDatepicker", "uibDaypicker", "^?datepicker"],
                controller: "UibDaypickerController",
                link: function(e, t, i, n) {
                    var o = n[0] || n[2]
                      , r = n[1];
                    r.init(o)
                }
            }
        }
        )).directive("uibMonthpicker", (function() {
            return {
                replace: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/datepicker/month.html"
                },
                require: ["^?uibDatepicker", "uibMonthpicker", "^?datepicker"],
                controller: "UibMonthpickerController",
                link: function(e, t, i, n) {
                    var o = n[0] || n[2]
                      , r = n[1];
                    r.init(o)
                }
            }
        }
        )).directive("uibYearpicker", (function() {
            return {
                replace: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/datepicker/year.html"
                },
                require: ["^?uibDatepicker", "uibYearpicker", "^?datepicker"],
                controller: "UibYearpickerController",
                link: function(e, t, i, n) {
                    var o = n[0] || n[2];
                    angular.extend(o, n[1]),
                    o.yearpickerInit(),
                    o.refreshView()
                }
            }
        }
        )).constant("uibDatepickerPopupConfig", {
            datepickerPopup: "yyyy-MM-dd",
            datepickerPopupTemplateUrl: "template/datepicker/popup.html",
            datepickerTemplateUrl: "template/datepicker/datepicker.html",
            html5Types: {
                date: "yyyy-MM-dd",
                "datetime-local": "yyyy-MM-ddTHH:mm:ss.sss",
                month: "yyyy-MM"
            },
            currentText: "Today",
            clearText: "Clear",
            closeText: "Done",
            closeOnDateSelection: !0,
            appendToBody: !1,
            showButtonBar: !0,
            onOpenFocus: !0
        }).controller("UibDatepickerPopupController", ["$scope", "$element", "$attrs", "$compile", "$parse", "$document", "$rootScope", "$uibPosition", "dateFilter", "uibDateParser", "uibDatepickerPopupConfig", "$timeout", function(e, t, i, n, o, r, a, s, l, c, d, u) {
            function p(e) {
                return e.replace(/([A-Z])/g, (function(e) {
                    return "-" + e.toLowerCase()
                }
                ))
            }
            function h(t) {
                if (angular.isNumber(t) && (t = new Date(t)),
                !t)
                    return null;
                if (angular.isDate(t) && !isNaN(t))
                    return t;
                if (angular.isString(t)) {
                    var i = c.parse(t, v, e.date);
                    return isNaN(i) ? void 0 : i
                }
            }
            function m(e, t) {
                var n = e || t;
                if (!i.ngRequired && !n)
                    return !0;
                if (angular.isNumber(n) && (n = new Date(n)),
                n) {
                    if (angular.isDate(n) && !isNaN(n))
                        return !0;
                    if (angular.isString(n)) {
                        var o = c.parse(n, v);
                        return !isNaN(o)
                    }
                    return !1
                }
                return !0
            }
            function g(i) {
                var n = _[0]
                  , o = t[0].contains(i.target)
                  , r = void 0 !== n.contains && n.contains(i.target);
                !e.isOpen || o || r || e.$apply((function() {
                    e.isOpen = !1
                }
                ))
            }
            function f(i) {
                27 === i.which && e.isOpen ? (i.preventDefault(),
                i.stopPropagation(),
                e.$apply((function() {
                    e.isOpen = !1
                }
                )),
                t[0].focus()) : 40 !== i.which || e.isOpen || (i.preventDefault(),
                i.stopPropagation(),
                e.$apply((function() {
                    e.isOpen = !0
                }
                )))
            }
            var v, b, y, w, C, x, S, P, k, _, A = {}, T = !1;
            e.watchData = {},
            this.init = function(s) {
                if (k = s,
                b = angular.isDefined(i.closeOnDateSelection) ? e.$parent.$eval(i.closeOnDateSelection) : d.closeOnDateSelection,
                y = angular.isDefined(i.datepickerAppendToBody) ? e.$parent.$eval(i.datepickerAppendToBody) : d.appendToBody,
                w = angular.isDefined(i.onOpenFocus) ? e.$parent.$eval(i.onOpenFocus) : d.onOpenFocus,
                C = angular.isDefined(i.datepickerPopupTemplateUrl) ? i.datepickerPopupTemplateUrl : d.datepickerPopupTemplateUrl,
                x = angular.isDefined(i.datepickerTemplateUrl) ? i.datepickerTemplateUrl : d.datepickerTemplateUrl,
                e.showButtonBar = angular.isDefined(i.showButtonBar) ? e.$parent.$eval(i.showButtonBar) : d.showButtonBar,
                d.html5Types[i.type] ? (v = d.html5Types[i.type],
                T = !0) : (v = i.datepickerPopup || i.uibDatepickerPopup || d.datepickerPopup,
                i.$observe("uibDatepickerPopup", (function(e, t) {
                    var i = e || d.datepickerPopup;
                    if (i !== v && (v = i,
                    k.$modelValue = null,
                    !v))
                        throw new Error("uibDatepickerPopup must have a date format specified.")
                }
                ))),
                !v)
                    throw new Error("uibDatepickerPopup must have a date format specified.");
                if (T && i.datepickerPopup)
                    throw new Error("HTML5 date input types do not support custom formats.");
                if (S = angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),
                S.attr({
                    "ng-model": "date",
                    "ng-change": "dateSelection(date)",
                    "template-url": C
                }),
                P = angular.element(S.children()[0]),
                P.attr("template-url", x),
                T && "month" === i.type && (P.attr("datepicker-mode", '"month"'),
                P.attr("min-mode", "month")),
                i.datepickerOptions) {
                    var u = e.$parent.$eval(i.datepickerOptions);
                    u && u.initDate && (e.initDate = u.initDate,
                    P.attr("init-date", "initDate"),
                    delete u.initDate),
                    angular.forEach(u, (function(e, t) {
                        P.attr(p(t), e)
                    }
                    ))
                }
                angular.forEach(["minMode", "maxMode", "minDate", "maxDate", "datepickerMode", "initDate", "shortcutPropagation"], (function(t) {
                    if (i[t]) {
                        var n = o(i[t]);
                        if (e.$parent.$watch(n, (function(i) {
                            e.watchData[t] = i,
                            ("minDate" === t || "maxDate" === t) && (A[t] = new Date(i))
                        }
                        )),
                        P.attr(p(t), "watchData." + t),
                        "datepickerMode" === t) {
                            var r = n.assign;
                            e.$watch("watchData." + t, (function(t, i) {
                                angular.isFunction(r) && t !== i && r(e.$parent, t)
                            }
                            ))
                        }
                    }
                }
                )),
                i.dateDisabled && P.attr("date-disabled", "dateDisabled({ date: date, mode: mode })"),
                i.showWeeks && P.attr("show-weeks", i.showWeeks),
                i.customClass && P.attr("custom-class", "customClass({ date: date, mode: mode })"),
                T ? k.$formatters.push((function(t) {
                    return e.date = t,
                    t
                }
                )) : (k.$$parserName = "date",
                k.$validators.date = m,
                k.$parsers.unshift(h),
                k.$formatters.push((function(t) {
                    return e.date = t,
                    k.$isEmpty(t) ? t : l(t, v)
                }
                ))),
                k.$viewChangeListeners.push((function() {
                    e.date = c.parse(k.$viewValue, v, e.date)
                }
                )),
                t.bind("keydown", f),
                _ = n(S)(e),
                S.remove(),
                y ? r.find("body").append(_) : t.after(_),
                e.$on("$destroy", (function() {
                    !0 === e.isOpen && (a.$$phase || e.$apply((function() {
                        e.isOpen = !1
                    }
                    ))),
                    _.remove(),
                    t.unbind("keydown", f),
                    r.unbind("click", g)
                }
                ))
            }
            ,
            e.getText = function(t) {
                return e[t + "Text"] || d[t + "Text"]
            }
            ,
            e.isDisabled = function(t) {
                return "today" === t && (t = new Date),
                e.watchData.minDate && e.compare(t, A.minDate) < 0 || e.watchData.maxDate && e.compare(t, A.maxDate) > 0
            }
            ,
            e.compare = function(e, t) {
                return new Date(e.getFullYear(),e.getMonth(),e.getDate()) - new Date(t.getFullYear(),t.getMonth(),t.getDate())
            }
            ,
            e.dateSelection = function(i) {
                angular.isDefined(i) && (e.date = i);
                var n = e.date ? l(e.date, v) : null;
                t.val(n),
                k.$setViewValue(n),
                b && (e.isOpen = !1,
                t[0].focus())
            }
            ,
            e.keydown = function(i) {
                27 === i.which && (e.isOpen = !1,
                t[0].focus())
            }
            ,
            e.select = function(t) {
                if ("today" === t) {
                    var i = new Date;
                    angular.isDate(e.date) ? (t = new Date(e.date),
                    t.setFullYear(i.getFullYear(), i.getMonth(), i.getDate())) : t = new Date(i.setHours(0, 0, 0, 0))
                }
                e.dateSelection(t)
            }
            ,
            e.close = function() {
                e.isOpen = !1,
                t[0].focus()
            }
            ,
            e.$watch("isOpen", (function(i) {
                i ? (e.position = y ? s.offset(t) : s.position(t),
                e.position.top = e.position.top + t.prop("offsetHeight"),
                u((function() {
                    w && e.$broadcast("uib:datepicker.focus"),
                    r.bind("click", g)
                }
                ), 0, !1)) : r.unbind("click", g)
            }
            ))
        }
        ]).directive("uibDatepickerPopup", (function() {
            return {
                require: ["ngModel", "uibDatepickerPopup"],
                controller: "UibDatepickerPopupController",
                scope: {
                    isOpen: "=?",
                    currentText: "@",
                    clearText: "@",
                    closeText: "@",
                    dateDisabled: "&",
                    customClass: "&"
                },
                link: function(e, t, i, n) {
                    var o = n[0]
                      , r = n[1];
                    r.init(o)
                }
            }
        }
        )).directive("uibDatepickerPopupWrap", (function() {
            return {
                replace: !0,
                transclude: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/datepicker/popup.html"
                }
            }
        }
        )),
        angular.module("ui.bootstrap.datepicker").value("$datepickerSuppressWarning", !1).controller("DatepickerController", ["$scope", "$attrs", "$parse", "$interpolate", "$log", "dateFilter", "uibDatepickerConfig", "$datepickerSuppressError", "$datepickerSuppressWarning", function(e, t, i, n, o, r, a, s, l) {
            l || o.warn("DatepickerController is now deprecated. Use UibDatepickerController instead.");
            var c = this
              , d = {
                $setViewValue: angular.noop
            };
            this.modes = ["day", "month", "year"],
            angular.forEach(["formatDay", "formatMonth", "formatYear", "formatDayHeader", "formatDayTitle", "formatMonthTitle", "showWeeks", "startingDay", "yearRange", "shortcutPropagation"], (function(i, o) {
                c[i] = angular.isDefined(t[i]) ? 6 > o ? n(t[i])(e.$parent) : e.$parent.$eval(t[i]) : a[i]
            }
            )),
            angular.forEach(["minDate", "maxDate"], (function(n) {
                t[n] ? e.$parent.$watch(i(t[n]), (function(e) {
                    c[n] = e ? new Date(e) : null,
                    c.refreshView()
                }
                )) : c[n] = a[n] ? new Date(a[n]) : null
            }
            )),
            angular.forEach(["minMode", "maxMode"], (function(n) {
                t[n] ? e.$parent.$watch(i(t[n]), (function(i) {
                    c[n] = angular.isDefined(i) ? i : t[n],
                    e[n] = c[n],
                    ("minMode" == n && c.modes.indexOf(e.datepickerMode) < c.modes.indexOf(c[n]) || "maxMode" == n && c.modes.indexOf(e.datepickerMode) > c.modes.indexOf(c[n])) && (e.datepickerMode = c[n])
                }
                )) : (c[n] = a[n] || null,
                e[n] = c[n])
            }
            )),
            e.datepickerMode = e.datepickerMode || a.datepickerMode,
            e.uniqueId = "datepicker-" + e.$id + "-" + Math.floor(1e4 * Math.random()),
            angular.isDefined(t.initDate) ? (this.activeDate = e.$parent.$eval(t.initDate) || new Date,
            e.$parent.$watch(t.initDate, (function(e) {
                e && (d.$isEmpty(d.$modelValue) || d.$invalid) && (c.activeDate = e,
                c.refreshView())
            }
            ))) : this.activeDate = new Date,
            e.isActive = function(t) {
                return 0 === c.compare(t.date, c.activeDate) && (e.activeDateId = t.uid,
                !0)
            }
            ,
            this.init = function(e) {
                d = e,
                d.$render = function() {
                    c.render()
                }
            }
            ,
            this.render = function() {
                if (d.$viewValue) {
                    var e = new Date(d.$viewValue)
                      , t = !isNaN(e);
                    t ? this.activeDate = e : s || o.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')
                }
                this.refreshView()
            }
            ,
            this.refreshView = function() {
                if (this.element) {
                    this._refreshView();
                    var e = d.$viewValue ? new Date(d.$viewValue) : null;
                    d.$setValidity("dateDisabled", !e || this.element && !this.isDisabled(e))
                }
            }
            ,
            this.createDateObject = function(e, t) {
                var i = d.$viewValue ? new Date(d.$viewValue) : null;
                return {
                    date: e,
                    label: r(e, t),
                    selected: i && 0 === this.compare(e, i),
                    disabled: this.isDisabled(e),
                    current: 0 === this.compare(e, new Date),
                    customClass: this.customClass(e)
                }
            }
            ,
            this.isDisabled = function(i) {
                return this.minDate && this.compare(i, this.minDate) < 0 || this.maxDate && this.compare(i, this.maxDate) > 0 || t.dateDisabled && e.dateDisabled({
                    date: i,
                    mode: e.datepickerMode
                })
            }
            ,
            this.customClass = function(t) {
                return e.customClass({
                    date: t,
                    mode: e.datepickerMode
                })
            }
            ,
            this.split = function(e, t) {
                for (var i = []; e.length > 0; )
                    i.push(e.splice(0, t));
                return i
            }
            ,
            this.fixTimeZone = function(e) {
                var t = e.getHours();
                e.setHours(23 === t ? t + 2 : 0)
            }
            ,
            e.select = function(t) {
                if (e.datepickerMode === c.minMode) {
                    var i = d.$viewValue ? new Date(d.$viewValue) : new Date(0,0,0,0,0,0,0);
                    i.setFullYear(t.getFullYear(), t.getMonth(), t.getDate()),
                    d.$setViewValue(i),
                    d.$render()
                } else
                    c.activeDate = t,
                    e.datepickerMode = c.modes[c.modes.indexOf(e.datepickerMode) - 1]
            }
            ,
            e.move = function(e) {
                var t = c.activeDate.getFullYear() + e * (c.step.years || 0)
                  , i = c.activeDate.getMonth() + e * (c.step.months || 0);
                c.activeDate.setFullYear(t, i, 1),
                c.refreshView()
            }
            ,
            e.toggleMode = function(t) {
                t = t || 1,
                e.datepickerMode === c.maxMode && 1 === t || e.datepickerMode === c.minMode && -1 === t || (e.datepickerMode = c.modes[c.modes.indexOf(e.datepickerMode) + t])
            }
            ,
            e.keys = {
                13: "enter",
                32: "space",
                33: "pageup",
                34: "pagedown",
                35: "end",
                36: "home",
                37: "left",
                38: "up",
                39: "right",
                40: "down"
            };
            var u = function() {
                c.element[0].focus()
            };
            e.$on("uib:datepicker.focus", u),
            e.keydown = function(t) {
                var i = e.keys[t.which];
                if (i && !t.shiftKey && !t.altKey)
                    if (t.preventDefault(),
                    c.shortcutPropagation || t.stopPropagation(),
                    "enter" === i || "space" === i) {
                        if (c.isDisabled(c.activeDate))
                            return;
                        e.select(c.activeDate)
                    } else
                        !t.ctrlKey || "up" !== i && "down" !== i ? (c.handleKeyDown(i, t),
                        c.refreshView()) : e.toggleMode("up" === i ? 1 : -1)
            }
        }
        ]).directive("datepicker", ["$log", "$datepickerSuppressWarning", function(e, t) {
            return {
                replace: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/datepicker/datepicker.html"
                },
                scope: {
                    datepickerMode: "=?",
                    dateDisabled: "&",
                    customClass: "&",
                    shortcutPropagation: "&?"
                },
                require: ["datepicker", "^ngModel"],
                controller: "DatepickerController",
                controllerAs: "datepicker",
                link: function(i, n, o, r) {
                    t || e.warn("datepicker is now deprecated. Use uib-datepicker instead.");
                    var a = r[0]
                      , s = r[1];
                    a.init(s)
                }
            }
        }
        ]).directive("daypicker", ["$log", "$datepickerSuppressWarning", function(e, t) {
            return {
                replace: !0,
                templateUrl: "template/datepicker/day.html",
                require: ["^datepicker", "daypicker"],
                controller: "UibDaypickerController",
                link: function(i, n, o, r) {
                    t || e.warn("daypicker is now deprecated. Use uib-daypicker instead.");
                    var a = r[0]
                      , s = r[1];
                    s.init(a)
                }
            }
        }
        ]).directive("monthpicker", ["$log", "$datepickerSuppressWarning", function(e, t) {
            return {
                replace: !0,
                templateUrl: "template/datepicker/month.html",
                require: ["^datepicker", "monthpicker"],
                controller: "UibMonthpickerController",
                link: function(i, n, o, r) {
                    t || e.warn("monthpicker is now deprecated. Use uib-monthpicker instead.");
                    var a = r[0]
                      , s = r[1];
                    s.init(a)
                }
            }
        }
        ]).directive("yearpicker", ["$log", "$datepickerSuppressWarning", function(e, t) {
            return {
                replace: !0,
                templateUrl: "template/datepicker/year.html",
                require: ["^datepicker", "yearpicker"],
                controller: "UibYearpickerController",
                link: function(i, n, o, r) {
                    t || e.warn("yearpicker is now deprecated. Use uib-yearpicker instead.");
                    var a = r[0];
                    angular.extend(a, r[1]),
                    a.yearpickerInit(),
                    a.refreshView()
                }
            }
        }
        ]).directive("datepickerPopup", ["$log", "$datepickerSuppressWarning", function(e, t) {
            return {
                require: ["ngModel", "datepickerPopup"],
                controller: "UibDatepickerPopupController",
                scope: {
                    isOpen: "=?",
                    currentText: "@",
                    clearText: "@",
                    closeText: "@",
                    dateDisabled: "&",
                    customClass: "&"
                },
                link: function(i, n, o, r) {
                    t || e.warn("datepicker-popup is now deprecated. Use uib-datepicker-popup instead.");
                    var a = r[0]
                      , s = r[1];
                    s.init(a)
                }
            }
        }
        ]).directive("datepickerPopupWrap", ["$log", "$datepickerSuppressWarning", function(e, t) {
            return {
                replace: !0,
                transclude: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/datepicker/popup.html"
                },
                link: function() {
                    t || e.warn("datepicker-popup-wrap is now deprecated. Use uib-datepicker-popup-wrap instead.")
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.dropdown", ["ui.bootstrap.position"]).constant("uibDropdownConfig", {
            openClass: "open"
        }).service("uibDropdownService", ["$document", "$rootScope", function(e, t) {
            var i = null;
            this.open = function(t) {
                i || (e.bind("click", n),
                e.bind("keydown", o)),
                i && i !== t && (i.isOpen = !1),
                i = t
            }
            ,
            this.close = function(t) {
                i === t && (i = null,
                e.unbind("click", n),
                e.unbind("keydown", o))
            }
            ;
            var n = function(e) {
                if (i && (!e || "disabled" !== i.getAutoClose())) {
                    var n = i.getToggleElement();
                    if (!(e && n && n[0].contains(e.target))) {
                        var o = i.getDropdownElement();
                        e && "outsideClick" === i.getAutoClose() && o && o[0].contains(e.target) || (i.isOpen = !1,
                        t.$$phase || i.$apply())
                    }
                }
            }
              , o = function(e) {
                27 === e.which ? (i.focusToggleElement(),
                n()) : i.isKeynavEnabled() && /(38|40)/.test(e.which) && i.isOpen && (e.preventDefault(),
                e.stopPropagation(),
                i.focusDropdownEntry(e.which))
            }
        }
        ]).controller("UibDropdownController", ["$scope", "$element", "$attrs", "$parse", "uibDropdownConfig", "uibDropdownService", "$animate", "$uibPosition", "$document", "$compile", "$templateRequest", function(e, t, i, n, o, r, a, s, l, c, d) {
            var u, p, h = this, m = e.$new(), g = o.openClass, f = angular.noop, v = i.onToggle ? n(i.onToggle) : angular.noop, b = !1, y = !1;
            t.addClass("dropdown"),
            this.init = function() {
                i.isOpen && (p = n(i.isOpen),
                f = p.assign,
                e.$watch(p, (function(e) {
                    m.isOpen = !!e
                }
                ))),
                b = angular.isDefined(i.dropdownAppendToBody),
                y = angular.isDefined(i.uibKeyboardNav),
                b && h.dropdownMenu && (l.find("body").append(h.dropdownMenu),
                t.on("$destroy", (function() {
                    h.dropdownMenu.remove()
                }
                )))
            }
            ,
            this.toggle = function(e) {
                return m.isOpen = arguments.length ? !!e : !m.isOpen
            }
            ,
            this.isOpen = function() {
                return m.isOpen
            }
            ,
            m.getToggleElement = function() {
                return h.toggleElement
            }
            ,
            m.getAutoClose = function() {
                return i.autoClose || "always"
            }
            ,
            m.getElement = function() {
                return t
            }
            ,
            m.isKeynavEnabled = function() {
                return y
            }
            ,
            m.focusDropdownEntry = function(e) {
                var i = h.dropdownMenu ? angular.element(h.dropdownMenu).find("a") : angular.element(t).find("ul").eq(0).find("a");
                switch (e) {
                case 40:
                    angular.isNumber(h.selectedOption) ? h.selectedOption = h.selectedOption === i.length - 1 ? h.selectedOption : h.selectedOption + 1 : h.selectedOption = 0;
                    break;
                case 38:
                    angular.isNumber(h.selectedOption) ? h.selectedOption = 0 === h.selectedOption ? 0 : h.selectedOption - 1 : h.selectedOption = i.length - 1
                }
                i[h.selectedOption].focus()
            }
            ,
            m.getDropdownElement = function() {
                return h.dropdownMenu
            }
            ,
            m.focusToggleElement = function() {
                h.toggleElement && h.toggleElement[0].focus()
            }
            ,
            m.$watch("isOpen", (function(i, n) {
                if (b && h.dropdownMenu) {
                    var o = s.positionElements(t, h.dropdownMenu, "bottom-left", !0)
                      , l = {
                        top: o.top + "px",
                        display: i ? "block" : "none"
                    }
                      , p = h.dropdownMenu.hasClass("dropdown-menu-right");
                    p ? (l.left = "auto",
                    l.right = window.innerWidth - (o.left + t.prop("offsetWidth")) + "px") : (l.left = o.left + "px",
                    l.right = "auto"),
                    h.dropdownMenu.css(l)
                }
                if (a[i ? "addClass" : "removeClass"](t, g).then((function() {
                    angular.isDefined(i) && i !== n && v(e, {
                        open: !!i
                    })
                }
                )),
                i)
                    h.dropdownMenuTemplateUrl && d(h.dropdownMenuTemplateUrl).then((function(e) {
                        u = m.$new(),
                        c(e.trim())(u, (function(e) {
                            var t = e;
                            h.dropdownMenu.replaceWith(t),
                            h.dropdownMenu = t
                        }
                        ))
                    }
                    )),
                    m.focusToggleElement(),
                    r.open(m);
                else {
                    if (h.dropdownMenuTemplateUrl) {
                        u && u.$destroy();
                        var y = angular.element('<ul class="dropdown-menu"></ul>');
                        h.dropdownMenu.replaceWith(y),
                        h.dropdownMenu = y
                    }
                    r.close(m),
                    h.selectedOption = null
                }
                angular.isFunction(f) && f(e, i)
            }
            )),
            e.$on("$locationChangeSuccess", (function() {
                "disabled" !== m.getAutoClose() && (m.isOpen = !1)
            }
            ));
            var w = e.$on("$destroy", (function() {
                m.$destroy()
            }
            ));
            m.$on("$destroy", w)
        }
        ]).directive("uibDropdown", (function() {
            return {
                controller: "UibDropdownController",
                link: function(e, t, i, n) {
                    n.init()
                }
            }
        }
        )).directive("uibDropdownMenu", (function() {
            return {
                restrict: "AC",
                require: "?^uibDropdown",
                link: function(e, t, i, n) {
                    if (n && !angular.isDefined(i.dropdownNested)) {
                        t.addClass("dropdown-menu");
                        var o = i.templateUrl;
                        o && (n.dropdownMenuTemplateUrl = o),
                        n.dropdownMenu || (n.dropdownMenu = t)
                    }
                }
            }
        }
        )).directive("uibKeyboardNav", (function() {
            return {
                restrict: "A",
                require: "?^uibDropdown",
                link: function(e, t, i, n) {
                    t.bind("keydown", (function(e) {
                        if (-1 !== [38, 40].indexOf(e.which)) {
                            e.preventDefault(),
                            e.stopPropagation();
                            var t = n.dropdownMenu.find("a");
                            switch (e.which) {
                            case 40:
                                angular.isNumber(n.selectedOption) ? n.selectedOption = n.selectedOption === t.length - 1 ? n.selectedOption : n.selectedOption + 1 : n.selectedOption = 0;
                                break;
                            case 38:
                                angular.isNumber(n.selectedOption) ? n.selectedOption = 0 === n.selectedOption ? 0 : n.selectedOption - 1 : n.selectedOption = t.length - 1
                            }
                            t[n.selectedOption].focus()
                        }
                    }
                    ))
                }
            }
        }
        )).directive("uibDropdownToggle", (function() {
            return {
                require: "?^uibDropdown",
                link: function(e, t, i, n) {
                    if (n) {
                        t.addClass("dropdown-toggle"),
                        n.toggleElement = t;
                        var o = function(o) {
                            o.preventDefault(),
                            t.hasClass("disabled") || i.disabled || e.$apply((function() {
                                n.toggle()
                            }
                            ))
                        };
                        t.bind("click", o),
                        t.attr({
                            "aria-haspopup": !0,
                            "aria-expanded": !1
                        }),
                        e.$watch(n.isOpen, (function(e) {
                            t.attr("aria-expanded", !!e)
                        }
                        )),
                        e.$on("$destroy", (function() {
                            t.unbind("click", o)
                        }
                        ))
                    }
                }
            }
        }
        )),
        angular.module("ui.bootstrap.dropdown").value("$dropdownSuppressWarning", !1).service("dropdownService", ["$log", "$dropdownSuppressWarning", "uibDropdownService", function(e, t, i) {
            t || e.warn("dropdownService is now deprecated. Use uibDropdownService instead."),
            angular.extend(this, i)
        }
        ]).controller("DropdownController", ["$scope", "$element", "$attrs", "$parse", "uibDropdownConfig", "uibDropdownService", "$animate", "$uibPosition", "$document", "$compile", "$templateRequest", "$log", "$dropdownSuppressWarning", function(e, t, i, n, o, r, a, s, l, c, d, u, p) {
            p || u.warn("DropdownController is now deprecated. Use UibDropdownController instead.");
            var h, m, g = this, f = e.$new(), v = o.openClass, b = angular.noop, y = i.onToggle ? n(i.onToggle) : angular.noop, w = !1, C = !1;
            t.addClass("dropdown"),
            this.init = function() {
                i.isOpen && (m = n(i.isOpen),
                b = m.assign,
                e.$watch(m, (function(e) {
                    f.isOpen = !!e
                }
                ))),
                w = angular.isDefined(i.dropdownAppendToBody),
                C = angular.isDefined(i.uibKeyboardNav),
                w && g.dropdownMenu && (l.find("body").append(g.dropdownMenu),
                t.on("$destroy", (function() {
                    g.dropdownMenu.remove()
                }
                )))
            }
            ,
            this.toggle = function(e) {
                return f.isOpen = arguments.length ? !!e : !f.isOpen
            }
            ,
            this.isOpen = function() {
                return f.isOpen
            }
            ,
            f.getToggleElement = function() {
                return g.toggleElement
            }
            ,
            f.getAutoClose = function() {
                return i.autoClose || "always"
            }
            ,
            f.getElement = function() {
                return t
            }
            ,
            f.isKeynavEnabled = function() {
                return C
            }
            ,
            f.focusDropdownEntry = function(e) {
                var i = g.dropdownMenu ? angular.element(g.dropdownMenu).find("a") : angular.element(t).find("ul").eq(0).find("a");
                switch (e) {
                case 40:
                    angular.isNumber(g.selectedOption) ? g.selectedOption = g.selectedOption === i.length - 1 ? g.selectedOption : g.selectedOption + 1 : g.selectedOption = 0;
                    break;
                case 38:
                    angular.isNumber(g.selectedOption) ? g.selectedOption = 0 === g.selectedOption ? 0 : g.selectedOption - 1 : g.selectedOption = i.length - 1
                }
                i[g.selectedOption].focus()
            }
            ,
            f.getDropdownElement = function() {
                return g.dropdownMenu
            }
            ,
            f.focusToggleElement = function() {
                g.toggleElement && g.toggleElement[0].focus()
            }
            ,
            f.$watch("isOpen", (function(i, n) {
                if (w && g.dropdownMenu) {
                    var o = s.positionElements(t, g.dropdownMenu, "bottom-left", !0)
                      , l = {
                        top: o.top + "px",
                        display: i ? "block" : "none"
                    }
                      , u = g.dropdownMenu.hasClass("dropdown-menu-right");
                    u ? (l.left = "auto",
                    l.right = window.innerWidth - (o.left + t.prop("offsetWidth")) + "px") : (l.left = o.left + "px",
                    l.right = "auto"),
                    g.dropdownMenu.css(l)
                }
                if (a[i ? "addClass" : "removeClass"](t, v).then((function() {
                    angular.isDefined(i) && i !== n && y(e, {
                        open: !!i
                    })
                }
                )),
                i)
                    g.dropdownMenuTemplateUrl && d(g.dropdownMenuTemplateUrl).then((function(e) {
                        h = f.$new(),
                        c(e.trim())(h, (function(e) {
                            var t = e;
                            g.dropdownMenu.replaceWith(t),
                            g.dropdownMenu = t
                        }
                        ))
                    }
                    )),
                    f.focusToggleElement(),
                    r.open(f);
                else {
                    if (g.dropdownMenuTemplateUrl) {
                        h && h.$destroy();
                        var p = angular.element('<ul class="dropdown-menu"></ul>');
                        g.dropdownMenu.replaceWith(p),
                        g.dropdownMenu = p
                    }
                    r.close(f),
                    g.selectedOption = null
                }
                angular.isFunction(b) && b(e, i)
            }
            )),
            e.$on("$locationChangeSuccess", (function() {
                "disabled" !== f.getAutoClose() && (f.isOpen = !1)
            }
            ));
            var x = e.$on("$destroy", (function() {
                f.$destroy()
            }
            ));
            f.$on("$destroy", x)
        }
        ]).directive("dropdown", ["$log", "$dropdownSuppressWarning", function(e, t) {
            return {
                controller: "DropdownController",
                link: function(i, n, o, r) {
                    t || e.warn("dropdown is now deprecated. Use uib-dropdown instead."),
                    r.init()
                }
            }
        }
        ]).directive("dropdownMenu", ["$log", "$dropdownSuppressWarning", function(e, t) {
            return {
                restrict: "AC",
                require: "?^dropdown",
                link: function(i, n, o, r) {
                    if (r && !angular.isDefined(o.dropdownNested)) {
                        t || e.warn("dropdown-menu is now deprecated. Use uib-dropdown-menu instead."),
                        n.addClass("dropdown-menu");
                        var a = o.templateUrl;
                        a && (r.dropdownMenuTemplateUrl = a),
                        r.dropdownMenu || (r.dropdownMenu = n)
                    }
                }
            }
        }
        ]).directive("keyboardNav", ["$log", "$dropdownSuppressWarning", function(e, t) {
            return {
                restrict: "A",
                require: "?^dropdown",
                link: function(i, n, o, r) {
                    t || e.warn("keyboard-nav is now deprecated. Use uib-keyboard-nav instead."),
                    n.bind("keydown", (function(e) {
                        if (-1 !== [38, 40].indexOf(e.which)) {
                            e.preventDefault(),
                            e.stopPropagation();
                            var t = r.dropdownMenu.find("a");
                            switch (e.which) {
                            case 40:
                                angular.isNumber(r.selectedOption) ? r.selectedOption = r.selectedOption === t.length - 1 ? r.selectedOption : r.selectedOption + 1 : r.selectedOption = 0;
                                break;
                            case 38:
                                angular.isNumber(r.selectedOption) ? r.selectedOption = 0 === r.selectedOption ? 0 : r.selectedOption - 1 : r.selectedOption = t.length - 1
                            }
                            t[r.selectedOption].focus()
                        }
                    }
                    ))
                }
            }
        }
        ]).directive("dropdownToggle", ["$log", "$dropdownSuppressWarning", function(e, t) {
            return {
                require: "?^dropdown",
                link: function(i, n, o, r) {
                    if (t || e.warn("dropdown-toggle is now deprecated. Use uib-dropdown-toggle instead."),
                    r) {
                        n.addClass("dropdown-toggle"),
                        r.toggleElement = n;
                        var a = function(e) {
                            e.preventDefault(),
                            n.hasClass("disabled") || o.disabled || i.$apply((function() {
                                r.toggle()
                            }
                            ))
                        };
                        n.bind("click", a),
                        n.attr({
                            "aria-haspopup": !0,
                            "aria-expanded": !1
                        }),
                        i.$watch(r.isOpen, (function(e) {
                            n.attr("aria-expanded", !!e)
                        }
                        )),
                        i.$on("$destroy", (function() {
                            n.unbind("click", a)
                        }
                        ))
                    }
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.stackedMap", []).factory("$$stackedMap", (function() {
            return {
                createNew: function() {
                    var e = [];
                    return {
                        add: function(t, i) {
                            e.push({
                                key: t,
                                value: i
                            })
                        },
                        get: function(t) {
                            for (var i = 0; i < e.length; i++)
                                if (t == e[i].key)
                                    return e[i]
                        },
                        keys: function() {
                            for (var t = [], i = 0; i < e.length; i++)
                                t.push(e[i].key);
                            return t
                        },
                        top: function() {
                            return e[e.length - 1]
                        },
                        remove: function(t) {
                            for (var i = -1, n = 0; n < e.length; n++)
                                if (t == e[n].key) {
                                    i = n;
                                    break
                                }
                            return e.splice(i, 1)[0]
                        },
                        removeTop: function() {
                            return e.splice(e.length - 1, 1)[0]
                        },
                        length: function() {
                            return e.length
                        }
                    }
                }
            }
        }
        )),
        angular.module("ui.bootstrap.modal", ["ui.bootstrap.stackedMap"]).factory("$$multiMap", (function() {
            return {
                createNew: function() {
                    var e = {};
                    return {
                        entries: function() {
                            return Object.keys(e).map((function(t) {
                                return {
                                    key: t,
                                    value: e[t]
                                }
                            }
                            ))
                        },
                        get: function(t) {
                            return e[t]
                        },
                        hasKey: function(t) {
                            return !!e[t]
                        },
                        keys: function() {
                            return Object.keys(e)
                        },
                        put: function(t, i) {
                            e[t] || (e[t] = []),
                            e[t].push(i)
                        },
                        remove: function(t, i) {
                            var n = e[t];
                            if (n) {
                                var o = n.indexOf(i);
                                -1 !== o && n.splice(o, 1),
                                n.length || delete e[t]
                            }
                        }
                    }
                }
            }
        }
        )).directive("uibModalBackdrop", ["$animate", "$injector", "$uibModalStack", function(e, t, i) {
            function n(t, n, r) {
                n.addClass("modal-backdrop"),
                r.modalInClass && (o ? o(n, {
                    addClass: r.modalInClass
                }).start() : e.addClass(n, r.modalInClass),
                t.$on(i.NOW_CLOSING_EVENT, (function(t, i) {
                    var a = i();
                    o ? o(n, {
                        removeClass: r.modalInClass
                    }).start().then(a) : e.removeClass(n, r.modalInClass).then(a)
                }
                )))
            }
            var o = null;
            return t.has("$animateCss") && (o = t.get("$animateCss")),
            {
                replace: !0,
                templateUrl: "template/modal/backdrop.html",
                compile: function(e, t) {
                    return e.addClass(t.backdropClass),
                    n
                }
            }
        }
        ]).directive("uibModalWindow", ["$uibModalStack", "$q", "$animate", "$injector", function(e, t, i, n) {
            var o = null;
            return n.has("$animateCss") && (o = n.get("$animateCss")),
            {
                scope: {
                    index: "@"
                },
                replace: !0,
                transclude: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/modal/window.html"
                },
                link: function(n, r, a) {
                    r.addClass(a.windowClass || ""),
                    r.addClass(a.windowTopClass || ""),
                    n.size = a.size,
                    n.close = function(t) {
                        var i = e.getTop();
                        i && i.value.backdrop && "static" !== i.value.backdrop && t.target === t.currentTarget && (t.preventDefault(),
                        t.stopPropagation(),
                        e.dismiss(i.key, "backdrop click"))
                    }
                    ,
                    r.on("click", n.close),
                    n.$isRendered = !0;
                    var s = t.defer();
                    a.$observe("modalRender", (function(e) {
                        "true" == e && s.resolve()
                    }
                    )),
                    s.promise.then((function() {
                        var s = null;
                        a.modalInClass && (s = o ? o(r, {
                            addClass: a.modalInClass
                        }).start() : i.addClass(r, a.modalInClass),
                        n.$on(e.NOW_CLOSING_EVENT, (function(e, t) {
                            var n = t();
                            o ? o(r, {
                                removeClass: a.modalInClass
                            }).start().then(n) : i.removeClass(r, a.modalInClass).then(n)
                        }
                        ))),
                        t.when(s).then((function() {
                            var e = r[0].querySelector("[autofocus]");
                            e ? e.focus() : r[0].focus()
                        }
                        ));
                        var l = e.getTop();
                        l && e.modalRendered(l.key)
                    }
                    ))
                }
            }
        }
        ]).directive("uibModalAnimationClass", (function() {
            return {
                compile: function(e, t) {
                    t.modalAnimation && e.addClass(t.uibModalAnimationClass)
                }
            }
        }
        )).directive("uibModalTransclude", (function() {
            return {
                link: function(e, t, i, n, o) {
                    o(e.$parent, (function(e) {
                        t.empty(),
                        t.append(e)
                    }
                    ))
                }
            }
        }
        )).factory("$uibModalStack", ["$animate", "$timeout", "$document", "$compile", "$rootScope", "$q", "$injector", "$$multiMap", "$$stackedMap", function(e, t, i, n, o, r, a, s, l) {
            function c() {
                for (var e = -1, t = w.keys(), i = 0; i < t.length; i++)
                    w.get(t[i]).value.backdrop && (e = i);
                return e
            }
            function d(e, t) {
                var n = i.find("body").eq(0)
                  , o = w.get(e).value;
                w.remove(e),
                h(o.modalDomEl, o.modalScope, (function() {
                    var t = o.openedClass || y;
                    C.remove(t, e),
                    n.toggleClass(t, C.hasKey(t)),
                    u(!0)
                }
                )),
                p(),
                t && t.focus ? t.focus() : n.focus()
            }
            function u(e) {
                var t;
                w.length() > 0 && (t = w.top().value,
                t.modalDomEl.toggleClass(t.windowTopClass || "", e))
            }
            function p() {
                if (f && -1 == c()) {
                    h(f, v, (function() {
                        null
                    }
                    )),
                    f = void 0,
                    v = void 0
                }
            }
            function h(t, i, n) {
                function o() {
                    o.done || (o.done = !0,
                    g ? g(t, {
                        event: "leave"
                    }).start().then((function() {
                        t.remove()
                    }
                    )) : e.leave(t),
                    i.$destroy(),
                    n && n())
                }
                var a, s = null, l = function() {
                    return a || (a = r.defer(),
                    s = a.promise),
                    function() {
                        a.resolve()
                    }
                };
                return i.$broadcast(x.NOW_CLOSING_EVENT, l),
                r.when(s).then(o)
            }
            function m(e, t, i) {
                return !e.value.modalScope.$broadcast("modal.closing", t, i).defaultPrevented
            }
            var g = null;
            a.has("$animateCss") && (g = a.get("$animateCss"));
            var f, v, b, y = "modal-open", w = l.createNew(), C = s.createNew(), x = {
                NOW_CLOSING_EVENT: "modal.stack.now-closing"
            }, S = "a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]";
            return o.$watch(c, (function(e) {
                v && (v.index = e)
            }
            )),
            i.bind("keydown", (function(e) {
                if (e.isDefaultPrevented())
                    return e;
                var t = w.top();
                if (t && t.value.keyboard)
                    switch (e.which) {
                    case 27:
                        e.preventDefault(),
                        o.$apply((function() {
                            x.dismiss(t.key, "escape key press")
                        }
                        ));
                        break;
                    case 9:
                        x.loadFocusElementList(t);
                        var i = !1;
                        e.shiftKey ? x.isFocusInFirstItem(e) && (i = x.focusLastFocusableElement()) : x.isFocusInLastItem(e) && (i = x.focusFirstFocusableElement()),
                        i && (e.preventDefault(),
                        e.stopPropagation())
                    }
            }
            )),
            x.open = function(e, t) {
                var r = i[0].activeElement
                  , a = t.openedClass || y;
                u(!1),
                w.add(e, {
                    deferred: t.deferred,
                    renderDeferred: t.renderDeferred,
                    modalScope: t.scope,
                    backdrop: t.backdrop,
                    keyboard: t.keyboard,
                    openedClass: t.openedClass,
                    windowTopClass: t.windowTopClass
                }),
                C.put(a, e);
                var s = i.find("body").eq(0)
                  , l = c();
                if (l >= 0 && !f) {
                    v = o.$new(!0),
                    v.index = l;
                    var d = angular.element('<div uib-modal-backdrop="modal-backdrop"></div>');
                    d.attr("backdrop-class", t.backdropClass),
                    t.animation && d.attr("modal-animation", "true"),
                    f = n(d)(v),
                    s.append(f)
                }
                var p = angular.element('<div uib-modal-window="modal-window"></div>');
                p.attr({
                    "template-url": t.windowTemplateUrl,
                    "window-class": t.windowClass,
                    "window-top-class": t.windowTopClass,
                    size: t.size,
                    index: w.length() - 1,
                    animate: "animate"
                }).html(t.content),
                t.animation && p.attr("modal-animation", "true");
                var h = n(p)(t.scope);
                w.top().value.modalDomEl = h,
                w.top().value.modalOpener = r,
                s.append(h),
                s.addClass(a),
                x.clearFocusListCache()
            }
            ,
            x.close = function(e, t) {
                var i = w.get(e);
                return i && m(i, t, !0) ? (i.value.modalScope.$$uibDestructionScheduled = !0,
                i.value.deferred.resolve(t),
                d(e, i.value.modalOpener),
                !0) : !i
            }
            ,
            x.dismiss = function(e, t) {
                var i = w.get(e);
                return i && m(i, t, !1) ? (i.value.modalScope.$$uibDestructionScheduled = !0,
                i.value.deferred.reject(t),
                d(e, i.value.modalOpener),
                !0) : !i
            }
            ,
            x.dismissAll = function(e) {
                for (var t = this.getTop(); t && this.dismiss(t.key, e); )
                    t = this.getTop()
            }
            ,
            x.getTop = function() {
                return w.top()
            }
            ,
            x.modalRendered = function(e) {
                var t = w.get(e);
                t && t.value.renderDeferred.resolve()
            }
            ,
            x.focusFirstFocusableElement = function() {
                return b.length > 0 && (b[0].focus(),
                !0)
            }
            ,
            x.focusLastFocusableElement = function() {
                return b.length > 0 && (b[b.length - 1].focus(),
                !0)
            }
            ,
            x.isFocusInFirstItem = function(e) {
                return b.length > 0 && (e.target || e.srcElement) == b[0]
            }
            ,
            x.isFocusInLastItem = function(e) {
                return b.length > 0 && (e.target || e.srcElement) == b[b.length - 1]
            }
            ,
            x.clearFocusListCache = function() {
                b = [],
                0
            }
            ,
            x.loadFocusElementList = function(e) {
                if ((void 0 === b || !b.length) && e) {
                    var t = e.value.modalDomEl;
                    t && t.length && (b = t[0].querySelectorAll(S))
                }
            }
            ,
            x
        }
        ]).provider("$uibModal", (function() {
            var e = {
                options: {
                    animation: !0,
                    backdrop: !0,
                    keyboard: !0
                },
                $get: ["$injector", "$rootScope", "$q", "$templateRequest", "$controller", "$uibModalStack", "$modalSuppressWarning", "$log", function(t, i, n, o, r, a, s, l) {
                    function c(e) {
                        return e.template ? n.when(e.template) : o(angular.isFunction(e.templateUrl) ? e.templateUrl() : e.templateUrl)
                    }
                    function d(e) {
                        var i = [];
                        return angular.forEach(e, (function(e) {
                            angular.isFunction(e) || angular.isArray(e) ? i.push(n.when(t.invoke(e))) : angular.isString(e) ? i.push(n.when(t.get(e))) : i.push(n.when(e))
                        }
                        )),
                        i
                    }
                    var u = {}
                      , p = null;
                    return u.getPromiseChain = function() {
                        return p
                    }
                    ,
                    u.open = function(t) {
                        function o() {
                            return v
                        }
                        var u = n.defer()
                          , h = n.defer()
                          , m = n.defer()
                          , g = {
                            result: u.promise,
                            opened: h.promise,
                            rendered: m.promise,
                            close: function(e) {
                                return a.close(g, e)
                            },
                            dismiss: function(e) {
                                return a.dismiss(g, e)
                            }
                        };
                        if (t = angular.extend({}, e.options, t),
                        t.resolve = t.resolve || {},
                        !t.template && !t.templateUrl)
                            throw new Error("One of template or templateUrl options is required.");
                        var f, v = n.all([c(t)].concat(d(t.resolve)));
                        return f = p = n.all([p]).then(o, o).then((function(e) {
                            var n = (t.scope || i).$new();
                            n.$close = g.close,
                            n.$dismiss = g.dismiss,
                            n.$on("$destroy", (function() {
                                n.$$uibDestructionScheduled || n.$dismiss("$uibUnscheduledDestruction")
                            }
                            ));
                            var o, c = {}, d = 1;
                            t.controller && (c.$scope = n,
                            c.$uibModalInstance = g,
                            Object.defineProperty(c, "$modalInstance", {
                                get: function() {
                                    return s || l.warn("$modalInstance is now deprecated. Use $uibModalInstance instead."),
                                    g
                                }
                            }),
                            angular.forEach(t.resolve, (function(t, i) {
                                c[i] = e[d++]
                            }
                            )),
                            o = r(t.controller, c),
                            t.controllerAs && (t.bindToController && angular.extend(o, n),
                            n[t.controllerAs] = o)),
                            a.open(g, {
                                scope: n,
                                deferred: u,
                                renderDeferred: m,
                                content: e[0],
                                animation: t.animation,
                                backdrop: t.backdrop,
                                keyboard: t.keyboard,
                                backdropClass: t.backdropClass,
                                windowTopClass: t.windowTopClass,
                                windowClass: t.windowClass,
                                windowTemplateUrl: t.windowTemplateUrl,
                                size: t.size,
                                openedClass: t.openedClass
                            }),
                            h.resolve(!0)
                        }
                        ), (function(e) {
                            h.reject(e),
                            u.reject(e)
                        }
                        ))["finally"]((function() {
                            p === f && (p = null)
                        }
                        )),
                        g
                    }
                    ,
                    u
                }
                ]
            };
            return e
        }
        )),
        angular.module("ui.bootstrap.modal").value("$modalSuppressWarning", !1).directive("modalBackdrop", ["$animate", "$injector", "$modalStack", "$log", "$modalSuppressWarning", function(e, t, i, n, o) {
            function r(t, r, s) {
                o || n.warn("modal-backdrop is now deprecated. Use uib-modal-backdrop instead."),
                r.addClass("modal-backdrop"),
                s.modalInClass && (a ? a(r, {
                    addClass: s.modalInClass
                }).start() : e.addClass(r, s.modalInClass),
                t.$on(i.NOW_CLOSING_EVENT, (function(t, i) {
                    var n = i();
                    a ? a(r, {
                        removeClass: s.modalInClass
                    }).start().then(n) : e.removeClass(r, s.modalInClass).then(n)
                }
                )))
            }
            var a = null;
            return t.has("$animateCss") && (a = t.get("$animateCss")),
            {
                replace: !0,
                templateUrl: "template/modal/backdrop.html",
                compile: function(e, t) {
                    return e.addClass(t.backdropClass),
                    r
                }
            }
        }
        ]).directive("modalWindow", ["$modalStack", "$q", "$animate", "$injector", "$log", "$modalSuppressWarning", function(e, t, i, n, o, r) {
            var a = null;
            return n.has("$animateCss") && (a = n.get("$animateCss")),
            {
                scope: {
                    index: "@"
                },
                replace: !0,
                transclude: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/modal/window.html"
                },
                link: function(n, s, l) {
                    r || o.warn("modal-window is now deprecated. Use uib-modal-window instead."),
                    s.addClass(l.windowClass || ""),
                    s.addClass(l.windowTopClass || ""),
                    n.size = l.size,
                    n.close = function(t) {
                        var i = e.getTop();
                        i && i.value.backdrop && "static" !== i.value.backdrop && t.target === t.currentTarget && (t.preventDefault(),
                        t.stopPropagation(),
                        e.dismiss(i.key, "backdrop click"))
                    }
                    ,
                    s.on("click", n.close),
                    n.$isRendered = !0;
                    var c = t.defer();
                    l.$observe("modalRender", (function(e) {
                        "true" == e && c.resolve()
                    }
                    )),
                    c.promise.then((function() {
                        var o = null;
                        l.modalInClass && (o = a ? a(s, {
                            addClass: l.modalInClass
                        }).start() : i.addClass(s, l.modalInClass),
                        n.$on(e.NOW_CLOSING_EVENT, (function(e, t) {
                            var n = t();
                            a ? a(s, {
                                removeClass: l.modalInClass
                            }).start().then(n) : i.removeClass(s, l.modalInClass).then(n)
                        }
                        ))),
                        t.when(o).then((function() {
                            var e = s[0].querySelector("[autofocus]");
                            e ? e.focus() : s[0].focus()
                        }
                        ));
                        var r = e.getTop();
                        r && e.modalRendered(r.key)
                    }
                    ))
                }
            }
        }
        ]).directive("modalAnimationClass", ["$log", "$modalSuppressWarning", function(e, t) {
            return {
                compile: function(i, n) {
                    t || e.warn("modal-animation-class is now deprecated. Use uib-modal-animation-class instead."),
                    n.modalAnimation && i.addClass(n.modalAnimationClass)
                }
            }
        }
        ]).directive("modalTransclude", ["$log", "$modalSuppressWarning", function(e, t) {
            return {
                link: function(i, n, o, r, a) {
                    t || e.warn("modal-transclude is now deprecated. Use uib-modal-transclude instead."),
                    a(i.$parent, (function(e) {
                        n.empty(),
                        n.append(e)
                    }
                    ))
                }
            }
        }
        ]).service("$modalStack", ["$animate", "$timeout", "$document", "$compile", "$rootScope", "$q", "$injector", "$$multiMap", "$$stackedMap", "$uibModalStack", "$log", "$modalSuppressWarning", function(e, t, i, n, o, r, a, s, l, c, d, u) {
            u || d.warn("$modalStack is now deprecated. Use $uibModalStack instead."),
            angular.extend(this, c)
        }
        ]).provider("$modal", ["$uibModalProvider", function(e) {
            angular.extend(this, e),
            this.$get = ["$injector", "$log", "$modalSuppressWarning", function(t, i, n) {
                return n || i.warn("$modal is now deprecated. Use $uibModal instead."),
                t.invoke(e.$get)
            }
            ]
        }
        ]),
        angular.module("ui.bootstrap.pagination", []).controller("UibPaginationController", ["$scope", "$attrs", "$parse", function(e, t, i) {
            var n = this
              , o = {
                $setViewValue: angular.noop
            }
              , r = t.numPages ? i(t.numPages).assign : angular.noop;
            this.init = function(a, s) {
                o = a,
                this.config = s,
                o.$render = function() {
                    n.render()
                }
                ,
                t.itemsPerPage ? e.$parent.$watch(i(t.itemsPerPage), (function(t) {
                    n.itemsPerPage = parseInt(t, 10),
                    e.totalPages = n.calculateTotalPages()
                }
                )) : this.itemsPerPage = s.itemsPerPage,
                e.$watch("totalItems", (function() {
                    e.totalPages = n.calculateTotalPages()
                }
                )),
                e.$watch("totalPages", (function(t) {
                    r(e.$parent, t),
                    e.page > t ? e.selectPage(t) : o.$render()
                }
                ))
            }
            ,
            this.calculateTotalPages = function() {
                var t = this.itemsPerPage < 1 ? 1 : Math.ceil(e.totalItems / this.itemsPerPage);
                return Math.max(t || 0, 1)
            }
            ,
            this.render = function() {
                e.page = parseInt(o.$viewValue, 10) || 1
            }
            ,
            e.selectPage = function(t, i) {
                i && i.preventDefault();
                var n = !e.ngDisabled || !i;
                n && e.page !== t && t > 0 && t <= e.totalPages && (i && i.target && i.target.blur(),
                o.$setViewValue(t),
                o.$render())
            }
            ,
            e.getText = function(t) {
                return e[t + "Text"] || n.config[t + "Text"]
            }
            ,
            e.noPrevious = function() {
                return 1 === e.page
            }
            ,
            e.noNext = function() {
                return e.page === e.totalPages
            }
        }
        ]).constant("uibPaginationConfig", {
            itemsPerPage: 10,
            boundaryLinks: !1,
            directionLinks: !0,
            firstText: "First",
            previousText: "Previous",
            nextText: "Next",
            lastText: "Last",
            rotate: !0
        }).directive("uibPagination", ["$parse", "uibPaginationConfig", function(e, t) {
            return {
                restrict: "EA",
                scope: {
                    totalItems: "=",
                    firstText: "@",
                    previousText: "@",
                    nextText: "@",
                    lastText: "@",
                    ngDisabled: "="
                },
                require: ["uibPagination", "?ngModel"],
                controller: "UibPaginationController",
                controllerAs: "pagination",
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/pagination/pagination.html"
                },
                replace: !0,
                link: function(i, n, o, r) {
                    function a(e, t, i) {
                        return {
                            number: e,
                            text: t,
                            active: i
                        }
                    }
                    function s(e, t) {
                        var i = []
                          , n = 1
                          , o = t
                          , r = angular.isDefined(d) && t > d;
                        r && (u ? (n = Math.max(e - Math.floor(d / 2), 1),
                        o = n + d - 1,
                        o > t && (o = t,
                        n = o - d + 1)) : (n = (Math.ceil(e / d) - 1) * d + 1,
                        o = Math.min(n + d - 1, t)));
                        for (var s = n; o >= s; s++) {
                            var l = a(s, s, s === e);
                            i.push(l)
                        }
                        if (r && !u) {
                            if (n > 1) {
                                var c = a(n - 1, "...", !1);
                                i.unshift(c)
                            }
                            if (t > o) {
                                var p = a(o + 1, "...", !1);
                                i.push(p)
                            }
                        }
                        return i
                    }
                    var l = r[0]
                      , c = r[1];
                    if (c) {
                        var d = angular.isDefined(o.maxSize) ? i.$parent.$eval(o.maxSize) : t.maxSize
                          , u = angular.isDefined(o.rotate) ? i.$parent.$eval(o.rotate) : t.rotate;
                        i.boundaryLinks = angular.isDefined(o.boundaryLinks) ? i.$parent.$eval(o.boundaryLinks) : t.boundaryLinks,
                        i.directionLinks = angular.isDefined(o.directionLinks) ? i.$parent.$eval(o.directionLinks) : t.directionLinks,
                        l.init(c, t),
                        o.maxSize && i.$parent.$watch(e(o.maxSize), (function(e) {
                            d = parseInt(e, 10),
                            l.render()
                        }
                        ));
                        var p = l.render;
                        l.render = function() {
                            p(),
                            i.page > 0 && i.page <= i.totalPages && (i.pages = s(i.page, i.totalPages))
                        }
                    }
                }
            }
        }
        ]).constant("uibPagerConfig", {
            itemsPerPage: 10,
            previousText: " Previous",
            nextText: "Next ",
            align: !0
        }).directive("uibPager", ["uibPagerConfig", function(e) {
            return {
                restrict: "EA",
                scope: {
                    totalItems: "=",
                    previousText: "@",
                    nextText: "@",
                    ngDisabled: "="
                },
                require: ["uibPager", "?ngModel"],
                controller: "UibPaginationController",
                controllerAs: "pagination",
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/pagination/pager.html"
                },
                replace: !0,
                link: function(t, i, n, o) {
                    var r = o[0]
                      , a = o[1];
                    a && (t.align = angular.isDefined(n.align) ? t.$parent.$eval(n.align) : e.align,
                    r.init(a, e))
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.pagination").value("$paginationSuppressWarning", !1).controller("PaginationController", ["$scope", "$attrs", "$parse", "$log", "$paginationSuppressWarning", function(e, t, i, n, o) {
            o || n.warn("PaginationController is now deprecated. Use UibPaginationController instead.");
            var r = this
              , a = {
                $setViewValue: angular.noop
            }
              , s = t.numPages ? i(t.numPages).assign : angular.noop;
            this.init = function(n, o) {
                a = n,
                this.config = o,
                a.$render = function() {
                    r.render()
                }
                ,
                t.itemsPerPage ? e.$parent.$watch(i(t.itemsPerPage), (function(t) {
                    r.itemsPerPage = parseInt(t, 10),
                    e.totalPages = r.calculateTotalPages()
                }
                )) : this.itemsPerPage = o.itemsPerPage,
                e.$watch("totalItems", (function() {
                    e.totalPages = r.calculateTotalPages()
                }
                )),
                e.$watch("totalPages", (function(t) {
                    s(e.$parent, t),
                    e.page > t ? e.selectPage(t) : a.$render()
                }
                ))
            }
            ,
            this.calculateTotalPages = function() {
                var t = this.itemsPerPage < 1 ? 1 : Math.ceil(e.totalItems / this.itemsPerPage);
                return Math.max(t || 0, 1)
            }
            ,
            this.render = function() {
                e.page = parseInt(a.$viewValue, 10) || 1
            }
            ,
            e.selectPage = function(t, i) {
                i && i.preventDefault();
                var n = !e.ngDisabled || !i;
                n && e.page !== t && t > 0 && t <= e.totalPages && (i && i.target && i.target.blur(),
                a.$setViewValue(t),
                a.$render())
            }
            ,
            e.getText = function(t) {
                return e[t + "Text"] || r.config[t + "Text"]
            }
            ,
            e.noPrevious = function() {
                return 1 === e.page
            }
            ,
            e.noNext = function() {
                return e.page === e.totalPages
            }
        }
        ]).directive("pagination", ["$parse", "uibPaginationConfig", "$log", "$paginationSuppressWarning", function(e, t, i, n) {
            return {
                restrict: "EA",
                scope: {
                    totalItems: "=",
                    firstText: "@",
                    previousText: "@",
                    nextText: "@",
                    lastText: "@",
                    ngDisabled: "="
                },
                require: ["pagination", "?ngModel"],
                controller: "PaginationController",
                controllerAs: "pagination",
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/pagination/pagination.html"
                },
                replace: !0,
                link: function(o, r, a, s) {
                    function l(e, t, i) {
                        return {
                            number: e,
                            text: t,
                            active: i
                        }
                    }
                    function c(e, t) {
                        var i = []
                          , n = 1
                          , o = t
                          , r = angular.isDefined(p) && t > p;
                        r && (h ? (n = Math.max(e - Math.floor(p / 2), 1),
                        o = n + p - 1,
                        o > t && (o = t,
                        n = o - p + 1)) : (n = (Math.ceil(e / p) - 1) * p + 1,
                        o = Math.min(n + p - 1, t)));
                        for (var a = n; o >= a; a++) {
                            var s = l(a, a, a === e);
                            i.push(s)
                        }
                        if (r && !h) {
                            if (n > 1) {
                                var c = l(n - 1, "...", !1);
                                i.unshift(c)
                            }
                            if (t > o) {
                                var d = l(o + 1, "...", !1);
                                i.push(d)
                            }
                        }
                        return i
                    }
                    n || i.warn("pagination is now deprecated. Use uib-pagination instead.");
                    var d = s[0]
                      , u = s[1];
                    if (u) {
                        var p = angular.isDefined(a.maxSize) ? o.$parent.$eval(a.maxSize) : t.maxSize
                          , h = angular.isDefined(a.rotate) ? o.$parent.$eval(a.rotate) : t.rotate;
                        o.boundaryLinks = angular.isDefined(a.boundaryLinks) ? o.$parent.$eval(a.boundaryLinks) : t.boundaryLinks,
                        o.directionLinks = angular.isDefined(a.directionLinks) ? o.$parent.$eval(a.directionLinks) : t.directionLinks,
                        d.init(u, t),
                        a.maxSize && o.$parent.$watch(e(a.maxSize), (function(e) {
                            p = parseInt(e, 10),
                            d.render()
                        }
                        ));
                        var m = d.render;
                        d.render = function() {
                            m(),
                            o.page > 0 && o.page <= o.totalPages && (o.pages = c(o.page, o.totalPages))
                        }
                    }
                }
            }
        }
        ]).directive("pager", ["uibPagerConfig", "$log", "$paginationSuppressWarning", function(e, t, i) {
            return {
                restrict: "EA",
                scope: {
                    totalItems: "=",
                    previousText: "@",
                    nextText: "@",
                    ngDisabled: "="
                },
                require: ["pager", "?ngModel"],
                controller: "PaginationController",
                controllerAs: "pagination",
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/pagination/pager.html"
                },
                replace: !0,
                link: function(n, o, r, a) {
                    i || t.warn("pager is now deprecated. Use uib-pager instead.");
                    var s = a[0]
                      , l = a[1];
                    l && (n.align = angular.isDefined(r.align) ? n.$parent.$eval(r.align) : e.align,
                    s.init(l, e))
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.tooltip", ["ui.bootstrap.position", "ui.bootstrap.stackedMap"]).provider("$uibTooltip", (function() {
            function e(e) {
                var t = /[A-Z]/g
                  , i = "-";
                return e.replace(t, (function(e, t) {
                    return (t ? i : "") + e.toLowerCase()
                }
                ))
            }
            var t = {
                placement: "top",
                animation: !0,
                popupDelay: 0,
                popupCloseDelay: 0,
                useContentExp: !1
            }
              , i = {
                mouseenter: "mouseleave",
                click: "click",
                focus: "blur",
                none: ""
            }
              , n = {};
            this.options = function(e) {
                angular.extend(n, e)
            }
            ,
            this.setTriggers = function(e) {
                angular.extend(i, e)
            }
            ,
            this.$get = ["$window", "$compile", "$timeout", "$document", "$uibPosition", "$interpolate", "$rootScope", "$parse", "$$stackedMap", function(o, r, a, s, l, c, d, u, p) {
                var h = p.createNew();
                return s.on("keypress", (function(e) {
                    if (27 === e.which) {
                        var t = h.top();
                        t && (t.value.close(),
                        h.removeTop(),
                        t = null)
                    }
                }
                )),
                function(o, d, p, m) {
                    function g(e) {
                        var t = (e || m.trigger || p).split(" ")
                          , n = t.map((function(e) {
                            return i[e] || e
                        }
                        ));
                        return {
                            show: t,
                            hide: n
                        }
                    }
                    m = angular.extend({}, t, n, m);
                    var f = e(o)
                      , v = c.startSymbol()
                      , b = c.endSymbol()
                      , y = "<div " + f + '-popup title="' + v + "title" + b + '" ' + (m.useContentExp ? 'content-exp="contentExp()" ' : 'content="' + v + "content" + b + '" ') + 'placement="' + v + "placement" + b + '" popup-class="' + v + "popupClass" + b + '" animation="animation" is-open="isOpen"origin-scope="origScope" style="visibility: hidden; display: block; top: -9999px; left: -9999px;"></div>';
                    return {
                        compile: function(e, t) {
                            var i = r(y);
                            return function(e, t, n, r) {
                                function c() {
                                    j.isOpen ? f() : p()
                                }
                                function p() {
                                    (!B || e.$eval(n[d + "Enable"])) && (w(),
                                    S(),
                                    j.popupDelay ? I || (I = a(v, j.popupDelay, !1)) : v())
                                }
                                function f() {
                                    b(),
                                    j.popupCloseDelay ? D || (D = a(y, j.popupCloseDelay, !1)) : y()
                                }
                                function v() {
                                    return b(),
                                    w(),
                                    j.content ? (C(),
                                    void j.$evalAsync((function() {
                                        j.isOpen = !0,
                                        P(!0),
                                        N()
                                    }
                                    ))) : angular.noop
                                }
                                function b() {
                                    I && (a.cancel(I),
                                    I = null),
                                    F && (a.cancel(F),
                                    F = null)
                                }
                                function y() {
                                    b(),
                                    w(),
                                    j && j.$evalAsync((function() {
                                        j.isOpen = !1,
                                        P(!1),
                                        j.animation ? O || (O = a(x, 150, !1)) : x()
                                    }
                                    ))
                                }
                                function w() {
                                    D && (a.cancel(D),
                                    D = null),
                                    O && (a.cancel(O),
                                    O = null)
                                }
                                function C() {
                                    T || (E = j.$new(),
                                    T = i(E, (function(e) {
                                        M ? s.find("body").append(e) : t.after(e)
                                    }
                                    )),
                                    k())
                                }
                                function x() {
                                    _(),
                                    O = null,
                                    T && (T.remove(),
                                    T = null),
                                    E && (E.$destroy(),
                                    E = null)
                                }
                                function S() {
                                    j.title = n[d + "Title"],
                                    j.content = U ? U(e) : n[o],
                                    j.popupClass = n[d + "Class"],
                                    j.placement = angular.isDefined(n[d + "Placement"]) ? n[d + "Placement"] : m.placement;
                                    var t = parseInt(n[d + "PopupDelay"], 10)
                                      , i = parseInt(n[d + "PopupCloseDelay"], 10);
                                    j.popupDelay = isNaN(t) ? m.popupDelay : t,
                                    j.popupCloseDelay = isNaN(i) ? m.popupCloseDelay : i
                                }
                                function P(t) {
                                    R && angular.isFunction(R.assign) && R.assign(e, t)
                                }
                                function k() {
                                    z.length = 0,
                                    U ? (z.push(e.$watch(U, (function(e) {
                                        j.content = e,
                                        !e && j.isOpen && y()
                                    }
                                    ))),
                                    z.push(E.$watch((function() {
                                        L || (L = !0,
                                        E.$$postDigest((function() {
                                            L = !1,
                                            j && j.isOpen && N()
                                        }
                                        )))
                                    }
                                    )))) : z.push(n.$observe(o, (function(e) {
                                        j.content = e,
                                        !e && j.isOpen ? y() : N()
                                    }
                                    ))),
                                    z.push(n.$observe(d + "Title", (function(e) {
                                        j.title = e,
                                        j.isOpen && N()
                                    }
                                    ))),
                                    z.push(n.$observe(d + "Placement", (function(e) {
                                        j.placement = e || m.placement,
                                        j.isOpen && N()
                                    }
                                    )))
                                }
                                function _() {
                                    z.length && (angular.forEach(z, (function(e) {
                                        e()
                                    }
                                    )),
                                    z.length = 0)
                                }
                                function A() {
                                    var e = n[d + "Trigger"];
                                    V(),
                                    $ = g(e),
                                    "none" !== $.show && $.show.forEach((function(e, i) {
                                        e === $.hide[i] ? t[0].addEventListener(e, c) : e && (t[0].addEventListener(e, p),
                                        $.hide[i].split(" ").forEach((function(e) {
                                            t[0].addEventListener(e, f)
                                        }
                                        ))),
                                        t.on("keypress", (function(e) {
                                            27 === e.which && f()
                                        }
                                        ))
                                    }
                                    ))
                                }
                                var T, E, O, I, D, F, M = !!angular.isDefined(m.appendToBody) && m.appendToBody, $ = g(void 0), B = angular.isDefined(n[d + "Enable"]), j = e.$new(!0), L = !1, R = !!angular.isDefined(n[d + "IsOpen"]) && u(n[d + "IsOpen"]), U = !!m.useContentExp && u(n[o]), z = [], N = function() {
                                    T && T.html() && (F || (F = a((function() {
                                        T.css({
                                            top: 0,
                                            left: 0
                                        });
                                        var e = l.positionElements(t, T, j.placement, M);
                                        e.top += "px",
                                        e.left += "px",
                                        e.visibility = "visible",
                                        T.css(e),
                                        F = null
                                    }
                                    ), 0, !1)))
                                };
                                j.origScope = e,
                                j.isOpen = !1,
                                h.add(j, {
                                    close: y
                                }),
                                j.contentExp = function() {
                                    return j.content
                                }
                                ,
                                n.$observe("disabled", (function(e) {
                                    e && b(),
                                    e && j.isOpen && y()
                                }
                                )),
                                R && e.$watch(R, (function(e) {
                                    j && !e === j.isOpen && c()
                                }
                                ));
                                var V = function() {
                                    $.show.forEach((function(e) {
                                        t.unbind(e, p)
                                    }
                                    )),
                                    $.hide.forEach((function(e) {
                                        e.split(" ").forEach((function(e) {
                                            t[0].removeEventListener(e, f)
                                        }
                                        ))
                                    }
                                    ))
                                };
                                A();
                                var G = e.$eval(n[d + "Animation"]);
                                j.animation = angular.isDefined(G) ? !!G : m.animation;
                                var W = e.$eval(n[d + "AppendToBody"]);
                                M = angular.isDefined(W) ? W : M,
                                M && e.$on("$locationChangeSuccess", (function() {
                                    j.isOpen && y()
                                }
                                )),
                                e.$on("$destroy", (function() {
                                    b(),
                                    w(),
                                    V(),
                                    x(),
                                    h.remove(j),
                                    j = null
                                }
                                ))
                            }
                        }
                    }
                }
            }
            ]
        }
        )).directive("uibTooltipTemplateTransclude", ["$animate", "$sce", "$compile", "$templateRequest", function(e, t, i, n) {
            return {
                link: function(o, r, a) {
                    var s, l, c, d = o.$eval(a.tooltipTemplateTranscludeScope), u = 0, p = function() {
                        l && (l.remove(),
                        l = null),
                        s && (s.$destroy(),
                        s = null),
                        c && (e.leave(c).then((function() {
                            l = null
                        }
                        )),
                        l = c,
                        c = null)
                    };
                    o.$watch(t.parseAsResourceUrl(a.uibTooltipTemplateTransclude), (function(t) {
                        var a = ++u;
                        t ? (n(t, !0).then((function(n) {
                            if (a === u) {
                                var o = d.$new()
                                  , l = n
                                  , h = i(l)(o, (function(t) {
                                    p(),
                                    e.enter(t, r)
                                }
                                ));
                                s = o,
                                c = h,
                                s.$emit("$includeContentLoaded", t)
                            }
                        }
                        ), (function() {
                            a === u && (p(),
                            o.$emit("$includeContentError", t))
                        }
                        )),
                        o.$emit("$includeContentRequested", t)) : p()
                    }
                    )),
                    o.$on("$destroy", p)
                }
            }
        }
        ]).directive("uibTooltipClasses", (function() {
            return {
                restrict: "A",
                link: function(e, t, i) {
                    e.placement && t.addClass(e.placement),
                    e.popupClass && t.addClass(e.popupClass),
                    e.animation() && t.addClass(i.tooltipAnimationClass)
                }
            }
        }
        )).directive("uibTooltipPopup", (function() {
            return {
                replace: !0,
                scope: {
                    content: "@",
                    placement: "@",
                    popupClass: "@",
                    animation: "&",
                    isOpen: "&"
                },
                templateUrl: "template/tooltip/tooltip-popup.html",
                link: function(e, t) {
                    t.addClass("tooltip")
                }
            }
        }
        )).directive("uibTooltip", ["$uibTooltip", function(e) {
            return e("uibTooltip", "tooltip", "mouseenter")
        }
        ]).directive("uibTooltipTemplatePopup", (function() {
            return {
                replace: !0,
                scope: {
                    contentExp: "&",
                    placement: "@",
                    popupClass: "@",
                    animation: "&",
                    isOpen: "&",
                    originScope: "&"
                },
                templateUrl: "template/tooltip/tooltip-template-popup.html",
                link: function(e, t) {
                    t.addClass("tooltip")
                }
            }
        }
        )).directive("uibTooltipTemplate", ["$uibTooltip", function(e) {
            return e("uibTooltipTemplate", "tooltip", "mouseenter", {
                useContentExp: !0
            })
        }
        ]).directive("uibTooltipHtmlPopup", (function() {
            return {
                replace: !0,
                scope: {
                    contentExp: "&",
                    placement: "@",
                    popupClass: "@",
                    animation: "&",
                    isOpen: "&"
                },
                templateUrl: "template/tooltip/tooltip-html-popup.html",
                link: function(e, t) {
                    t.addClass("tooltip")
                }
            }
        }
        )).directive("uibTooltipHtml", ["$uibTooltip", function(e) {
            return e("uibTooltipHtml", "tooltip", "mouseenter", {
                useContentExp: !0
            })
        }
        ]),
        angular.module("ui.bootstrap.tooltip").value("$tooltipSuppressWarning", !1).provider("$tooltip", ["$uibTooltipProvider", function(e) {
            angular.extend(this, e),
            this.$get = ["$log", "$tooltipSuppressWarning", "$injector", function(t, i, n) {
                return i || t.warn("$tooltip is now deprecated. Use $uibTooltip instead."),
                n.invoke(e.$get)
            }
            ]
        }
        ]).directive("tooltipTemplateTransclude", ["$animate", "$sce", "$compile", "$templateRequest", "$log", "$tooltipSuppressWarning", function(e, t, i, n, o, r) {
            return {
                link: function(a, s, l) {
                    r || o.warn("tooltip-template-transclude is now deprecated. Use uib-tooltip-template-transclude instead.");
                    var c, d, u, p = a.$eval(l.tooltipTemplateTranscludeScope), h = 0, m = function() {
                        d && (d.remove(),
                        d = null),
                        c && (c.$destroy(),
                        c = null),
                        u && (e.leave(u).then((function() {
                            d = null
                        }
                        )),
                        d = u,
                        u = null)
                    };
                    a.$watch(t.parseAsResourceUrl(l.tooltipTemplateTransclude), (function(t) {
                        var o = ++h;
                        t ? (n(t, !0).then((function(n) {
                            if (o === h) {
                                var r = p.$new()
                                  , a = n
                                  , l = i(a)(r, (function(t) {
                                    m(),
                                    e.enter(t, s)
                                }
                                ));
                                c = r,
                                u = l,
                                c.$emit("$includeContentLoaded", t)
                            }
                        }
                        ), (function() {
                            o === h && (m(),
                            a.$emit("$includeContentError", t))
                        }
                        )),
                        a.$emit("$includeContentRequested", t)) : m()
                    }
                    )),
                    a.$on("$destroy", m)
                }
            }
        }
        ]).directive("tooltipClasses", ["$log", "$tooltipSuppressWarning", function(e, t) {
            return {
                restrict: "A",
                link: function(i, n, o) {
                    t || e.warn("tooltip-classes is now deprecated. Use uib-tooltip-classes instead."),
                    i.placement && n.addClass(i.placement),
                    i.popupClass && n.addClass(i.popupClass),
                    i.animation() && n.addClass(o.tooltipAnimationClass)
                }
            }
        }
        ]).directive("tooltipPopup", ["$log", "$tooltipSuppressWarning", function(e, t) {
            return {
                replace: !0,
                scope: {
                    content: "@",
                    placement: "@",
                    popupClass: "@",
                    animation: "&",
                    isOpen: "&"
                },
                templateUrl: "template/tooltip/tooltip-popup.html",
                link: function(i, n) {
                    t || e.warn("tooltip-popup is now deprecated. Use uib-tooltip-popup instead."),
                    n.addClass("tooltip")
                }
            }
        }
        ]).directive("tooltip", ["$tooltip", function(e) {
            return e("tooltip", "tooltip", "mouseenter")
        }
        ]).directive("tooltipTemplatePopup", ["$log", "$tooltipSuppressWarning", function(e, t) {
            return {
                replace: !0,
                scope: {
                    contentExp: "&",
                    placement: "@",
                    popupClass: "@",
                    animation: "&",
                    isOpen: "&",
                    originScope: "&"
                },
                templateUrl: "template/tooltip/tooltip-template-popup.html",
                link: function(i, n) {
                    t || e.warn("tooltip-template-popup is now deprecated. Use uib-tooltip-template-popup instead."),
                    n.addClass("tooltip")
                }
            }
        }
        ]).directive("tooltipTemplate", ["$tooltip", function(e) {
            return e("tooltipTemplate", "tooltip", "mouseenter", {
                useContentExp: !0
            })
        }
        ]).directive("tooltipHtmlPopup", ["$log", "$tooltipSuppressWarning", function(e, t) {
            return {
                replace: !0,
                scope: {
                    contentExp: "&",
                    placement: "@",
                    popupClass: "@",
                    animation: "&",
                    isOpen: "&"
                },
                templateUrl: "template/tooltip/tooltip-html-popup.html",
                link: function(i, n) {
                    t || e.warn("tooltip-html-popup is now deprecated. Use uib-tooltip-html-popup instead."),
                    n.addClass("tooltip")
                }
            }
        }
        ]).directive("tooltipHtml", ["$tooltip", function(e) {
            return e("tooltipHtml", "tooltip", "mouseenter", {
                useContentExp: !0
            })
        }
        ]),
        angular.module("ui.bootstrap.popover", ["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup", (function() {
            return {
                replace: !0,
                scope: {
                    title: "@",
                    contentExp: "&",
                    placement: "@",
                    popupClass: "@",
                    animation: "&",
                    isOpen: "&",
                    originScope: "&"
                },
                templateUrl: "template/popover/popover-template.html",
                link: function(e, t) {
                    t.addClass("popover")
                }
            }
        }
        )).directive("uibPopoverTemplate", ["$uibTooltip", function(e) {
            return e("uibPopoverTemplate", "popover", "click", {
                useContentExp: !0
            })
        }
        ]).directive("uibPopoverHtmlPopup", (function() {
            return {
                replace: !0,
                scope: {
                    contentExp: "&",
                    title: "@",
                    placement: "@",
                    popupClass: "@",
                    animation: "&",
                    isOpen: "&"
                },
                templateUrl: "template/popover/popover-html.html",
                link: function(e, t) {
                    t.addClass("popover")
                }
            }
        }
        )).directive("uibPopoverHtml", ["$uibTooltip", function(e) {
            return e("uibPopoverHtml", "popover", "click", {
                useContentExp: !0
            })
        }
        ]).directive("uibPopoverPopup", (function() {
            return {
                replace: !0,
                scope: {
                    title: "@",
                    content: "@",
                    placement: "@",
                    popupClass: "@",
                    animation: "&",
                    isOpen: "&"
                },
                templateUrl: "template/popover/popover.html",
                link: function(e, t) {
                    t.addClass("popover")
                }
            }
        }
        )).directive("uibPopover", ["$uibTooltip", function(e) {
            return e("uibPopover", "popover", "click")
        }
        ]),
        angular.module("ui.bootstrap.popover").value("$popoverSuppressWarning", !1).directive("popoverTemplatePopup", ["$log", "$popoverSuppressWarning", function(e, t) {
            return {
                replace: !0,
                scope: {
                    title: "@",
                    contentExp: "&",
                    placement: "@",
                    popupClass: "@",
                    animation: "&",
                    isOpen: "&",
                    originScope: "&"
                },
                templateUrl: "template/popover/popover-template.html",
                link: function(i, n) {
                    t || e.warn("popover-template-popup is now deprecated. Use uib-popover-template-popup instead."),
                    n.addClass("popover")
                }
            }
        }
        ]).directive("popoverTemplate", ["$tooltip", function(e) {
            return e("popoverTemplate", "popover", "click", {
                useContentExp: !0
            })
        }
        ]).directive("popoverHtmlPopup", ["$log", "$popoverSuppressWarning", function(e, t) {
            return {
                replace: !0,
                scope: {
                    contentExp: "&",
                    title: "@",
                    placement: "@",
                    popupClass: "@",
                    animation: "&",
                    isOpen: "&"
                },
                templateUrl: "template/popover/popover-html.html",
                link: function(i, n) {
                    t || e.warn("popover-html-popup is now deprecated. Use uib-popover-html-popup instead."),
                    n.addClass("popover")
                }
            }
        }
        ]).directive("popoverHtml", ["$tooltip", function(e) {
            return e("popoverHtml", "popover", "click", {
                useContentExp: !0
            })
        }
        ]).directive("popoverPopup", ["$log", "$popoverSuppressWarning", function(e, t) {
            return {
                replace: !0,
                scope: {
                    title: "@",
                    content: "@",
                    placement: "@",
                    popupClass: "@",
                    animation: "&",
                    isOpen: "&"
                },
                templateUrl: "template/popover/popover.html",
                link: function(i, n) {
                    t || e.warn("popover-popup is now deprecated. Use uib-popover-popup instead."),
                    n.addClass("popover")
                }
            }
        }
        ]).directive("popover", ["$tooltip", function(e) {
            return e("popover", "popover", "click")
        }
        ]),
        angular.module("ui.bootstrap.progressbar", []).constant("uibProgressConfig", {
            animate: !0,
            max: 100
        }).controller("UibProgressController", ["$scope", "$attrs", "uibProgressConfig", function(e, t, i) {
            var n = this
              , o = angular.isDefined(t.animate) ? e.$parent.$eval(t.animate) : i.animate;
            this.bars = [],
            e.max = angular.isDefined(e.max) ? e.max : i.max,
            this.addBar = function(t, i, r) {
                o || i.css({
                    transition: "none"
                }),
                this.bars.push(t),
                t.max = e.max,
                t.title = r && angular.isDefined(r.title) ? r.title : "progressbar",
                t.$watch("value", (function(e) {
                    t.recalculatePercentage()
                }
                )),
                t.recalculatePercentage = function() {
                    var e = n.bars.reduce((function(e, t) {
                        return t.percent = +(100 * t.value / t.max).toFixed(2),
                        e + t.percent
                    }
                    ), 0);
                    e > 100 && (t.percent -= e - 100)
                }
                ,
                t.$on("$destroy", (function() {
                    i = null,
                    n.removeBar(t)
                }
                ))
            }
            ,
            this.removeBar = function(e) {
                this.bars.splice(this.bars.indexOf(e), 1),
                this.bars.forEach((function(e) {
                    e.recalculatePercentage()
                }
                ))
            }
            ,
            e.$watch("max", (function(t) {
                n.bars.forEach((function(t) {
                    t.max = e.max,
                    t.recalculatePercentage()
                }
                ))
            }
            ))
        }
        ]).directive("uibProgress", (function() {
            return {
                replace: !0,
                transclude: !0,
                controller: "UibProgressController",
                require: "uibProgress",
                scope: {
                    max: "=?"
                },
                templateUrl: "template/progressbar/progress.html"
            }
        }
        )).directive("uibBar", (function() {
            return {
                replace: !0,
                transclude: !0,
                require: "^uibProgress",
                scope: {
                    value: "=",
                    type: "@"
                },
                templateUrl: "template/progressbar/bar.html",
                link: function(e, t, i, n) {
                    n.addBar(e, t, i)
                }
            }
        }
        )).directive("uibProgressbar", (function() {
            return {
                replace: !0,
                transclude: !0,
                controller: "UibProgressController",
                scope: {
                    value: "=",
                    max: "=?",
                    type: "@"
                },
                templateUrl: "template/progressbar/progressbar.html",
                link: function(e, t, i, n) {
                    n.addBar(e, angular.element(t.children()[0]), {
                        title: i.title
                    })
                }
            }
        }
        )),
        angular.module("ui.bootstrap.progressbar").value("$progressSuppressWarning", !1).controller("ProgressController", ["$scope", "$attrs", "uibProgressConfig", "$log", "$progressSuppressWarning", function(e, t, i, n, o) {
            o || n.warn("ProgressController is now deprecated. Use UibProgressController instead.");
            var r = this
              , a = angular.isDefined(t.animate) ? e.$parent.$eval(t.animate) : i.animate;
            this.bars = [],
            e.max = angular.isDefined(e.max) ? e.max : i.max,
            this.addBar = function(t, i, n) {
                a || i.css({
                    transition: "none"
                }),
                this.bars.push(t),
                t.max = e.max,
                t.title = n && angular.isDefined(n.title) ? n.title : "progressbar",
                t.$watch("value", (function(e) {
                    t.recalculatePercentage()
                }
                )),
                t.recalculatePercentage = function() {
                    t.percent = +(100 * t.value / t.max).toFixed(2);
                    var e = r.bars.reduce((function(e, t) {
                        return e + t.percent
                    }
                    ), 0);
                    e > 100 && (t.percent -= e - 100)
                }
                ,
                t.$on("$destroy", (function() {
                    i = null,
                    r.removeBar(t)
                }
                ))
            }
            ,
            this.removeBar = function(e) {
                this.bars.splice(this.bars.indexOf(e), 1)
            }
            ,
            e.$watch("max", (function(t) {
                r.bars.forEach((function(t) {
                    t.max = e.max,
                    t.recalculatePercentage()
                }
                ))
            }
            ))
        }
        ]).directive("progress", ["$log", "$progressSuppressWarning", function(e, t) {
            return {
                replace: !0,
                transclude: !0,
                controller: "ProgressController",
                require: "progress",
                scope: {
                    max: "=?",
                    title: "@?"
                },
                templateUrl: "template/progressbar/progress.html",
                link: function() {
                    t || e.warn("progress is now deprecated. Use uib-progress instead.")
                }
            }
        }
        ]).directive("bar", ["$log", "$progressSuppressWarning", function(e, t) {
            return {
                replace: !0,
                transclude: !0,
                require: "^progress",
                scope: {
                    value: "=",
                    type: "@"
                },
                templateUrl: "template/progressbar/bar.html",
                link: function(i, n, o, r) {
                    t || e.warn("bar is now deprecated. Use uib-bar instead."),
                    r.addBar(i, n)
                }
            }
        }
        ]).directive("progressbar", ["$log", "$progressSuppressWarning", function(e, t) {
            return {
                replace: !0,
                transclude: !0,
                controller: "ProgressController",
                scope: {
                    value: "=",
                    max: "=?",
                    type: "@"
                },
                templateUrl: "template/progressbar/progressbar.html",
                link: function(i, n, o, r) {
                    t || e.warn("progressbar is now deprecated. Use uib-progressbar instead."),
                    r.addBar(i, angular.element(n.children()[0]), {
                        title: o.title
                    })
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.rating", []).constant("uibRatingConfig", {
            max: 5,
            stateOn: null,
            stateOff: null,
            titles: ["one", "two", "three", "four", "five"]
        }).controller("UibRatingController", ["$scope", "$attrs", "uibRatingConfig", function(e, t, i) {
            var n = {
                $setViewValue: angular.noop
            };
            this.init = function(o) {
                n = o,
                n.$render = this.render,
                n.$formatters.push((function(e) {
                    return angular.isNumber(e) && e << 0 !== e && (e = Math.round(e)),
                    e
                }
                )),
                this.stateOn = angular.isDefined(t.stateOn) ? e.$parent.$eval(t.stateOn) : i.stateOn,
                this.stateOff = angular.isDefined(t.stateOff) ? e.$parent.$eval(t.stateOff) : i.stateOff;
                var r = angular.isDefined(t.titles) ? e.$parent.$eval(t.titles) : i.titles;
                this.titles = angular.isArray(r) && r.length > 0 ? r : i.titles;
                var a = angular.isDefined(t.ratingStates) ? e.$parent.$eval(t.ratingStates) : new Array(angular.isDefined(t.max) ? e.$parent.$eval(t.max) : i.max);
                e.range = this.buildTemplateObjects(a)
            }
            ,
            this.buildTemplateObjects = function(e) {
                for (var t = 0, i = e.length; i > t; t++)
                    e[t] = angular.extend({
                        index: t
                    }, {
                        stateOn: this.stateOn,
                        stateOff: this.stateOff,
                        title: this.getTitle(t)
                    }, e[t]);
                return e
            }
            ,
            this.getTitle = function(e) {
                return e >= this.titles.length ? e + 1 : this.titles[e]
            }
            ,
            e.rate = function(t) {
                !e.readonly && t >= 0 && t <= e.range.length && (n.$setViewValue(n.$viewValue === t ? 0 : t),
                n.$render())
            }
            ,
            e.enter = function(t) {
                e.readonly || (e.value = t),
                e.onHover({
                    value: t
                })
            }
            ,
            e.reset = function() {
                e.value = n.$viewValue,
                e.onLeave()
            }
            ,
            e.onKeydown = function(t) {
                /(37|38|39|40)/.test(t.which) && (t.preventDefault(),
                t.stopPropagation(),
                e.rate(e.value + (38 === t.which || 39 === t.which ? 1 : -1)))
            }
            ,
            this.render = function() {
                e.value = n.$viewValue
            }
        }
        ]).directive("uibRating", (function() {
            return {
                require: ["uibRating", "ngModel"],
                scope: {
                    readonly: "=?",
                    onHover: "&",
                    onLeave: "&"
                },
                controller: "UibRatingController",
                templateUrl: "template/rating/rating.html",
                replace: !0,
                link: function(e, t, i, n) {
                    var o = n[0]
                      , r = n[1];
                    o.init(r)
                }
            }
        }
        )),
        angular.module("ui.bootstrap.rating").value("$ratingSuppressWarning", !1).controller("RatingController", ["$scope", "$attrs", "$controller", "$log", "$ratingSuppressWarning", function(e, t, i, n, o) {
            o || n.warn("RatingController is now deprecated. Use UibRatingController instead."),
            angular.extend(this, i("UibRatingController", {
                $scope: e,
                $attrs: t
            }))
        }
        ]).directive("rating", ["$log", "$ratingSuppressWarning", function(e, t) {
            return {
                require: ["rating", "ngModel"],
                scope: {
                    readonly: "=?",
                    onHover: "&",
                    onLeave: "&"
                },
                controller: "RatingController",
                templateUrl: "template/rating/rating.html",
                replace: !0,
                link: function(i, n, o, r) {
                    t || e.warn("rating is now deprecated. Use uib-rating instead.");
                    var a = r[0]
                      , s = r[1];
                    a.init(s)
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.tabs", []).controller("UibTabsetController", ["$scope", function(e) {
            var t, i = this, n = i.tabs = e.tabs = [];
            i.select = function(e) {
                angular.forEach(n, (function(t) {
                    t.active && t !== e && (t.active = !1,
                    t.onDeselect(),
                    e.selectCalled = !1)
                }
                )),
                e.active = !0,
                e.selectCalled || (e.onSelect(),
                e.selectCalled = !0)
            }
            ,
            i.addTab = function(e) {
                n.push(e),
                1 === n.length && !1 !== e.active ? e.active = !0 : e.active ? i.select(e) : e.active = !1
            }
            ,
            i.removeTab = function(e) {
                var o = n.indexOf(e);
                if (e.active && n.length > 1 && !t) {
                    var r = o == n.length - 1 ? o - 1 : o + 1;
                    i.select(n[r])
                }
                n.splice(o, 1)
            }
            ,
            e.$on("$destroy", (function() {
                t = !0
            }
            ))
        }
        ]).directive("uibTabset", (function() {
            return {
                restrict: "EA",
                transclude: !0,
                replace: !0,
                scope: {
                    type: "@"
                },
                controller: "UibTabsetController",
                templateUrl: "template/tabs/tabset.html",
                link: function(e, t, i) {
                    e.vertical = !!angular.isDefined(i.vertical) && e.$parent.$eval(i.vertical),
                    e.justified = !!angular.isDefined(i.justified) && e.$parent.$eval(i.justified)
                }
            }
        }
        )).directive("uibTab", ["$parse", function(e) {
            return {
                require: "^uibTabset",
                restrict: "EA",
                replace: !0,
                templateUrl: "template/tabs/tab.html",
                transclude: !0,
                scope: {
                    active: "=?",
                    heading: "@",
                    onSelect: "&select",
                    onDeselect: "&deselect"
                },
                controller: function() {},
                link: function(t, i, n, o, r) {
                    t.$watch("active", (function(e) {
                        e && o.select(t)
                    }
                    )),
                    t.disabled = !1,
                    n.disable && t.$parent.$watch(e(n.disable), (function(e) {
                        t.disabled = !!e
                    }
                    )),
                    t.select = function() {
                        t.disabled || (t.active = !0)
                    }
                    ,
                    o.addTab(t),
                    t.$on("$destroy", (function() {
                        o.removeTab(t)
                    }
                    )),
                    t.$transcludeFn = r
                }
            }
        }
        ]).directive("uibTabHeadingTransclude", (function() {
            return {
                restrict: "A",
                require: ["?^uibTab", "?^tab"],
                link: function(e, t) {
                    e.$watch("headingElement", (function(e) {
                        e && (t.html(""),
                        t.append(e))
                    }
                    ))
                }
            }
        }
        )).directive("uibTabContentTransclude", (function() {
            function e(e) {
                return e.tagName && (e.hasAttribute("tab-heading") || e.hasAttribute("data-tab-heading") || e.hasAttribute("x-tab-heading") || e.hasAttribute("uib-tab-heading") || e.hasAttribute("data-uib-tab-heading") || e.hasAttribute("x-uib-tab-heading") || "tab-heading" === e.tagName.toLowerCase() || "data-tab-heading" === e.tagName.toLowerCase() || "x-tab-heading" === e.tagName.toLowerCase() || "uib-tab-heading" === e.tagName.toLowerCase() || "data-uib-tab-heading" === e.tagName.toLowerCase() || "x-uib-tab-heading" === e.tagName.toLowerCase())
            }
            return {
                restrict: "A",
                require: ["?^uibTabset", "?^tabset"],
                link: function(t, i, n) {
                    var o = t.$eval(n.uibTabContentTransclude);
                    o.$transcludeFn(o.$parent, (function(t) {
                        angular.forEach(t, (function(t) {
                            e(t) ? o.headingElement = t : i.append(t)
                        }
                        ))
                    }
                    ))
                }
            }
        }
        )),
        angular.module("ui.bootstrap.tabs").value("$tabsSuppressWarning", !1).controller("TabsetController", ["$scope", "$controller", "$log", "$tabsSuppressWarning", function(e, t, i, n) {
            n || i.warn("TabsetController is now deprecated. Use UibTabsetController instead."),
            angular.extend(this, t("UibTabsetController", {
                $scope: e
            }))
        }
        ]).directive("tabset", ["$log", "$tabsSuppressWarning", function(e, t) {
            return {
                restrict: "EA",
                transclude: !0,
                replace: !0,
                scope: {
                    type: "@"
                },
                controller: "TabsetController",
                templateUrl: "template/tabs/tabset.html",
                link: function(i, n, o) {
                    t || e.warn("tabset is now deprecated. Use uib-tabset instead."),
                    i.vertical = !!angular.isDefined(o.vertical) && i.$parent.$eval(o.vertical),
                    i.justified = !!angular.isDefined(o.justified) && i.$parent.$eval(o.justified)
                }
            }
        }
        ]).directive("tab", ["$parse", "$log", "$tabsSuppressWarning", function(e, t, i) {
            return {
                require: "^tabset",
                restrict: "EA",
                replace: !0,
                templateUrl: "template/tabs/tab.html",
                transclude: !0,
                scope: {
                    active: "=?",
                    heading: "@",
                    onSelect: "&select",
                    onDeselect: "&deselect"
                },
                controller: function() {},
                link: function(n, o, r, a, s) {
                    i || t.warn("tab is now deprecated. Use uib-tab instead."),
                    n.$watch("active", (function(e) {
                        e && a.select(n)
                    }
                    )),
                    n.disabled = !1,
                    r.disable && n.$parent.$watch(e(r.disable), (function(e) {
                        n.disabled = !!e
                    }
                    )),
                    n.select = function() {
                        n.disabled || (n.active = !0)
                    }
                    ,
                    a.addTab(n),
                    n.$on("$destroy", (function() {
                        a.removeTab(n)
                    }
                    )),
                    n.$transcludeFn = s
                }
            }
        }
        ]).directive("tabHeadingTransclude", ["$log", "$tabsSuppressWarning", function(e, t) {
            return {
                restrict: "A",
                require: "^tab",
                link: function(i, n) {
                    t || e.warn("tab-heading-transclude is now deprecated. Use uib-tab-heading-transclude instead."),
                    i.$watch("headingElement", (function(e) {
                        e && (n.html(""),
                        n.append(e))
                    }
                    ))
                }
            }
        }
        ]).directive("tabContentTransclude", ["$log", "$tabsSuppressWarning", function(e, t) {
            function i(e) {
                return e.tagName && (e.hasAttribute("tab-heading") || e.hasAttribute("data-tab-heading") || e.hasAttribute("x-tab-heading") || "tab-heading" === e.tagName.toLowerCase() || "data-tab-heading" === e.tagName.toLowerCase() || "x-tab-heading" === e.tagName.toLowerCase())
            }
            return {
                restrict: "A",
                require: "^tabset",
                link: function(n, o, r) {
                    t || e.warn("tab-content-transclude is now deprecated. Use uib-tab-content-transclude instead.");
                    var a = n.$eval(r.tabContentTransclude);
                    a.$transcludeFn(a.$parent, (function(e) {
                        angular.forEach(e, (function(e) {
                            i(e) ? a.headingElement = e : o.append(e)
                        }
                        ))
                    }
                    ))
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.timepicker", []).constant("uibTimepickerConfig", {
            hourStep: 1,
            minuteStep: 1,
            showMeridian: !0,
            meridians: null,
            readonlyInput: !1,
            mousewheel: !0,
            arrowkeys: !0,
            showSpinners: !0
        }).controller("UibTimepickerController", ["$scope", "$element", "$attrs", "$parse", "$log", "$locale", "uibTimepickerConfig", function(e, t, i, n, o, r, a) {
            function s() {
                var t = parseInt(e.hours, 10)
                  , i = e.showMeridian ? t > 0 && 13 > t : t >= 0 && 24 > t;
                return i ? (e.showMeridian && (12 === t && (t = 0),
                e.meridian === v[1] && (t += 12)),
                t) : void 0
            }
            function l() {
                var t = parseInt(e.minutes, 10);
                return t >= 0 && 60 > t ? t : void 0
            }
            function c(e) {
                return angular.isDefined(e) && e.toString().length < 2 ? "0" + e : e.toString()
            }
            function d(e) {
                u(),
                f.$setViewValue(new Date(g)),
                p(e)
            }
            function u() {
                f.$setValidity("time", !0),
                e.invalidHours = !1,
                e.invalidMinutes = !1
            }
            function p(t) {
                var i = g.getHours()
                  , n = g.getMinutes();
                e.showMeridian && (i = 0 === i || 12 === i ? 12 : i % 12),
                e.hours = "h" === t ? i : c(i),
                "m" !== t && (e.minutes = c(n)),
                e.meridian = g.getHours() < 12 ? v[0] : v[1]
            }
            function h(e, t) {
                var i = new Date(e.getTime() + 6e4 * t)
                  , n = new Date(e);
                return n.setHours(i.getHours(), i.getMinutes()),
                n
            }
            function m(e) {
                g = h(g, e),
                d()
            }
            var g = new Date
              , f = {
                $setViewValue: angular.noop
            }
              , v = angular.isDefined(i.meridians) ? e.$parent.$eval(i.meridians) : a.meridians || r.DATETIME_FORMATS.AMPMS;
            e.tabindex = angular.isDefined(i.tabindex) ? i.tabindex : 0,
            t.removeAttr("tabindex"),
            this.init = function(t, n) {
                f = t,
                f.$render = this.render,
                f.$formatters.unshift((function(e) {
                    return e ? new Date(e) : null
                }
                ));
                var o = n.eq(0)
                  , r = n.eq(1)
                  , s = angular.isDefined(i.mousewheel) ? e.$parent.$eval(i.mousewheel) : a.mousewheel;
                s && this.setupMousewheelEvents(o, r);
                var l = angular.isDefined(i.arrowkeys) ? e.$parent.$eval(i.arrowkeys) : a.arrowkeys;
                l && this.setupArrowkeyEvents(o, r),
                e.readonlyInput = angular.isDefined(i.readonlyInput) ? e.$parent.$eval(i.readonlyInput) : a.readonlyInput,
                this.setupInputEvents(o, r)
            }
            ;
            var b = a.hourStep;
            i.hourStep && e.$parent.$watch(n(i.hourStep), (function(e) {
                b = parseInt(e, 10)
            }
            ));
            var y, w, C = a.minuteStep;
            i.minuteStep && e.$parent.$watch(n(i.minuteStep), (function(e) {
                C = parseInt(e, 10)
            }
            )),
            e.$parent.$watch(n(i.min), (function(e) {
                var t = new Date(e);
                y = isNaN(t) ? void 0 : t
            }
            )),
            e.$parent.$watch(n(i.max), (function(e) {
                var t = new Date(e);
                w = isNaN(t) ? void 0 : t
            }
            )),
            e.noIncrementHours = function() {
                var e = h(g, 60 * b);
                return e > w || g > e && y > e
            }
            ,
            e.noDecrementHours = function() {
                var e = h(g, 60 * -b);
                return y > e || e > g && e > w
            }
            ,
            e.noIncrementMinutes = function() {
                var e = h(g, C);
                return e > w || g > e && y > e
            }
            ,
            e.noDecrementMinutes = function() {
                var e = h(g, -C);
                return y > e || e > g && e > w
            }
            ,
            e.noToggleMeridian = function() {
                return g.getHours() < 13 ? h(g, 720) > w : h(g, -720) < y
            }
            ,
            e.showMeridian = a.showMeridian,
            i.showMeridian && e.$parent.$watch(n(i.showMeridian), (function(t) {
                if (e.showMeridian = !!t,
                f.$error.time) {
                    var i = s()
                      , n = l();
                    angular.isDefined(i) && angular.isDefined(n) && (g.setHours(i),
                    d())
                } else
                    p()
            }
            )),
            this.setupMousewheelEvents = function(t, i) {
                var n = function(e) {
                    e.originalEvent && (e = e.originalEvent);
                    var t = e.wheelDelta ? e.wheelDelta : -e.deltaY;
                    return e.detail || t > 0
                };
                t.bind("mousewheel wheel", (function(t) {
                    e.$apply(n(t) ? e.incrementHours() : e.decrementHours()),
                    t.preventDefault()
                }
                )),
                i.bind("mousewheel wheel", (function(t) {
                    e.$apply(n(t) ? e.incrementMinutes() : e.decrementMinutes()),
                    t.preventDefault()
                }
                ))
            }
            ,
            this.setupArrowkeyEvents = function(t, i) {
                t.bind("keydown", (function(t) {
                    38 === t.which ? (t.preventDefault(),
                    e.incrementHours(),
                    e.$apply()) : 40 === t.which && (t.preventDefault(),
                    e.decrementHours(),
                    e.$apply())
                }
                )),
                i.bind("keydown", (function(t) {
                    38 === t.which ? (t.preventDefault(),
                    e.incrementMinutes(),
                    e.$apply()) : 40 === t.which && (t.preventDefault(),
                    e.decrementMinutes(),
                    e.$apply())
                }
                ))
            }
            ,
            this.setupInputEvents = function(t, i) {
                if (e.readonlyInput)
                    return e.updateHours = angular.noop,
                    void (e.updateMinutes = angular.noop);
                var n = function(t, i) {
                    f.$setViewValue(null),
                    f.$setValidity("time", !1),
                    angular.isDefined(t) && (e.invalidHours = t),
                    angular.isDefined(i) && (e.invalidMinutes = i)
                };
                e.updateHours = function() {
                    var e = s()
                      , t = l();
                    angular.isDefined(e) && angular.isDefined(t) ? (g.setHours(e),
                    y > g || g > w ? n(!0) : d("h")) : n(!0)
                }
                ,
                t.bind("blur", (function(t) {
                    !e.invalidHours && e.hours < 10 && e.$apply((function() {
                        e.hours = c(e.hours)
                    }
                    ))
                }
                )),
                e.updateMinutes = function() {
                    var e = l()
                      , t = s();
                    angular.isDefined(e) && angular.isDefined(t) ? (g.setMinutes(e),
                    y > g || g > w ? n(void 0, !0) : d("m")) : n(void 0, !0)
                }
                ,
                i.bind("blur", (function(t) {
                    !e.invalidMinutes && e.minutes < 10 && e.$apply((function() {
                        e.minutes = c(e.minutes)
                    }
                    ))
                }
                ))
            }
            ,
            this.render = function() {
                var t = f.$viewValue;
                isNaN(t) ? (f.$setValidity("time", !1),
                o.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')) : (t && (g = t),
                y > g || g > w ? (f.$setValidity("time", !1),
                e.invalidHours = !0,
                e.invalidMinutes = !0) : u(),
                p())
            }
            ,
            e.showSpinners = angular.isDefined(i.showSpinners) ? e.$parent.$eval(i.showSpinners) : a.showSpinners,
            e.incrementHours = function() {
                e.noIncrementHours() || m(60 * b)
            }
            ,
            e.decrementHours = function() {
                e.noDecrementHours() || m(60 * -b)
            }
            ,
            e.incrementMinutes = function() {
                e.noIncrementMinutes() || m(C)
            }
            ,
            e.decrementMinutes = function() {
                e.noDecrementMinutes() || m(-C)
            }
            ,
            e.toggleMeridian = function() {
                e.noToggleMeridian() || m(720 * (g.getHours() < 12 ? 1 : -1))
            }
        }
        ]).directive("uibTimepicker", (function() {
            return {
                restrict: "EA",
                require: ["uibTimepicker", "?^ngModel"],
                controller: "UibTimepickerController",
                controllerAs: "timepicker",
                replace: !0,
                scope: {},
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/timepicker/timepicker.html"
                },
                link: function(e, t, i, n) {
                    var o = n[0]
                      , r = n[1];
                    r && o.init(r, t.find("input"))
                }
            }
        }
        )),
        angular.module("ui.bootstrap.timepicker").value("$timepickerSuppressWarning", !1).controller("TimepickerController", ["$scope", "$element", "$attrs", "$controller", "$log", "$timepickerSuppressWarning", function(e, t, i, n, o, r) {
            r || o.warn("TimepickerController is now deprecated. Use UibTimepickerController instead."),
            angular.extend(this, n("UibTimepickerController", {
                $scope: e,
                $element: t,
                $attrs: i
            }))
        }
        ]).directive("timepicker", ["$log", "$timepickerSuppressWarning", function(e, t) {
            return {
                restrict: "EA",
                require: ["timepicker", "?^ngModel"],
                controller: "TimepickerController",
                controllerAs: "timepicker",
                replace: !0,
                scope: {},
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/timepicker/timepicker.html"
                },
                link: function(i, n, o, r) {
                    t || e.warn("timepicker is now deprecated. Use uib-timepicker instead.");
                    var a = r[0]
                      , s = r[1];
                    s && a.init(s, n.find("input"))
                }
            }
        }
        ]),
        angular.module("ui.bootstrap.typeahead", ["ui.bootstrap.position"]).factory("uibTypeaheadParser", ["$parse", function(e) {
            var t = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;
            return {
                parse: function(i) {
                    var n = i.match(t);
                    if (!n)
                        throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "' + i + '".');
                    return {
                        itemName: n[3],
                        source: e(n[4]),
                        viewMapper: e(n[2] || n[1]),
                        modelMapper: e(n[1])
                    }
                }
            }
        }
        ]).controller("UibTypeaheadController", ["$scope", "$element", "$attrs", "$compile", "$parse", "$q", "$timeout", "$document", "$window", "$rootScope", "$uibPosition", "uibTypeaheadParser", function(e, t, i, n, o, r, a, s, l, c, d, u) {
            function p() {
                B.moveInProgress || (B.moveInProgress = !0,
                B.$digest()),
                N && a.cancel(N),
                N = a((function() {
                    B.matches.length && h(),
                    B.moveInProgress = !1
                }
                ), v)
            }
            function h() {
                B.position = T ? d.offset(t) : d.position(t),
                B.position.top += t.prop("offsetHeight")
            }
            var m, g, f = [9, 13, 27, 38, 40], v = 200, b = e.$eval(i.typeaheadMinLength);
            b || 0 === b || (b = 1);
            var y, w, C = e.$eval(i.typeaheadWaitMs) || 0, x = !1 !== e.$eval(i.typeaheadEditable), S = o(i.typeaheadLoading).assign || angular.noop, P = o(i.typeaheadOnSelect), k = !!angular.isDefined(i.typeaheadSelectOnBlur) && e.$eval(i.typeaheadSelectOnBlur), _ = o(i.typeaheadNoResults).assign || angular.noop, A = i.typeaheadInputFormatter ? o(i.typeaheadInputFormatter) : void 0, T = !!i.typeaheadAppendToBody && e.$eval(i.typeaheadAppendToBody), E = i.typeaheadAppendToElementId || !1, O = !1 !== e.$eval(i.typeaheadFocusFirst), I = !!i.typeaheadSelectOnExact && e.$eval(i.typeaheadSelectOnExact), D = o(i.ngModel), F = o(i.ngModel + "($$$p)"), M = function(t, i) {
                return angular.isFunction(D(e)) && g && g.$options && g.$options.getterSetter ? F(t, {
                    $$$p: i
                }) : D.assign(t, i)
            }, $ = u.parse(i.uibTypeahead), B = e.$new(), j = e.$on("$destroy", (function() {
                B.$destroy()
            }
            ));
            B.$on("$destroy", j);
            var L = "typeahead-" + B.$id + "-" + Math.floor(1e4 * Math.random());
            t.attr({
                "aria-autocomplete": "list",
                "aria-expanded": !1,
                "aria-owns": L
            });
            var R = angular.element("<div uib-typeahead-popup></div>");
            R.attr({
                id: L,
                matches: "matches",
                active: "activeIdx",
                select: "select(activeIdx)",
                "move-in-progress": "moveInProgress",
                query: "query",
                position: "position"
            }),
            angular.isDefined(i.typeaheadTemplateUrl) && R.attr("template-url", i.typeaheadTemplateUrl),
            angular.isDefined(i.typeaheadPopupTemplateUrl) && R.attr("popup-template-url", i.typeaheadPopupTemplateUrl);
            var U = function() {
                B.matches = [],
                B.activeIdx = -1,
                t.attr("aria-expanded", !1)
            }
              , z = function(e) {
                return L + "-option-" + e
            };
            B.$watch("activeIdx", (function(e) {
                0 > e ? t.removeAttr("aria-activedescendant") : t.attr("aria-activedescendant", z(e))
            }
            ));
            var N, V = function(e, t) {
                return !!(B.matches.length > t && e) && e.toUpperCase() === B.matches[t].label.toUpperCase()
            }, G = function(i) {
                var n = {
                    $viewValue: i
                };
                S(e, !0),
                _(e, !1),
                r.when($.source(e, n)).then((function(o) {
                    var r = i === m.$viewValue;
                    if (r && y)
                        if (o && o.length > 0) {
                            B.activeIdx = O ? 0 : -1,
                            _(e, !1),
                            B.matches.length = 0;
                            for (var a = 0; a < o.length; a++)
                                n[$.itemName] = o[a],
                                B.matches.push({
                                    id: z(a),
                                    label: $.viewMapper(B, n),
                                    model: o[a]
                                });
                            B.query = i,
                            h(),
                            t.attr("aria-expanded", !0),
                            I && 1 === B.matches.length && V(i, 0) && B.select(0)
                        } else
                            U(),
                            _(e, !0);
                    r && S(e, !1)
                }
                ), (function() {
                    U(),
                    S(e, !1),
                    _(e, !0)
                }
                ))
            };
            T && (angular.element(l).bind("resize", p),
            s.find("body").bind("scroll", p)),
            B.moveInProgress = !1,
            B.query = void 0;
            var W, H = function(e) {
                W = a((function() {
                    G(e)
                }
                ), C)
            }, X = function() {
                W && a.cancel(W)
            };
            U(),
            B.select = function(n) {
                var o, r, s = {};
                w = !0,
                s[$.itemName] = r = B.matches[n].model,
                o = $.modelMapper(e, s),
                M(e, o),
                m.$setValidity("editable", !0),
                m.$setValidity("parse", !0),
                P(e, {
                    $item: r,
                    $model: o,
                    $label: $.viewMapper(e, s)
                }),
                U(),
                !1 !== B.$eval(i.typeaheadFocusOnSelect) && a((function() {
                    t[0].focus()
                }
                ), 0, !1)
            }
            ,
            t.bind("keydown", (function(e) {
                if (0 !== B.matches.length && -1 !== f.indexOf(e.which)) {
                    if (-1 === B.activeIdx && (9 === e.which || 13 === e.which))
                        return U(),
                        void B.$digest();
                    e.preventDefault(),
                    40 === e.which ? (B.activeIdx = (B.activeIdx + 1) % B.matches.length,
                    B.$digest()) : 38 === e.which ? (B.activeIdx = (B.activeIdx > 0 ? B.activeIdx : B.matches.length) - 1,
                    B.$digest()) : 13 === e.which || 9 === e.which ? B.$apply((function() {
                        B.select(B.activeIdx)
                    }
                    )) : 27 === e.which && (e.stopPropagation(),
                    U(),
                    B.$digest())
                }
            }
            )),
            t.bind("blur", (function() {
                k && B.matches.length && -1 !== B.activeIdx && !w && (w = !0,
                B.$apply((function() {
                    B.select(B.activeIdx)
                }
                ))),
                y = !1,
                w = !1
            }
            ));
            var Y = function(e) {
                t[0] !== e.target && 3 !== e.which && 0 !== B.matches.length && (U(),
                c.$$phase || B.$digest())
            };
            s.bind("click", Y),
            e.$on("$destroy", (function() {
                s.unbind("click", Y),
                (T || E) && q.remove(),
                T && (angular.element(l).unbind("resize", p),
                s.find("body").unbind("scroll", p)),
                R.remove()
            }
            ));
            var q = n(R)(B);
            T ? s.find("body").append(q) : !1 !== E ? angular.element(s[0].getElementById(E)).append(q) : t.after(q),
            this.init = function(t, i) {
                m = t,
                g = i,
                m.$parsers.unshift((function(t) {
                    return y = !0,
                    0 === b || t && t.length >= b ? C > 0 ? (X(),
                    H(t)) : G(t) : (S(e, !1),
                    X(),
                    U()),
                    x ? t : t ? void m.$setValidity("editable", !1) : (m.$setValidity("editable", !0),
                    null)
                }
                )),
                m.$formatters.push((function(t) {
                    var i, n, o = {};
                    return x || m.$setValidity("editable", !0),
                    A ? (o.$model = t,
                    A(e, o)) : (o[$.itemName] = t,
                    i = $.viewMapper(e, o),
                    o[$.itemName] = void 0,
                    n = $.viewMapper(e, o),
                    i !== n ? i : t)
                }
                ))
            }
        }
        ]).directive("uibTypeahead", (function() {
            return {
                controller: "UibTypeaheadController",
                require: ["ngModel", "^?ngModelOptions", "uibTypeahead"],
                link: function(e, t, i, n) {
                    n[2].init(n[0], n[1])
                }
            }
        }
        )).directive("uibTypeaheadPopup", (function() {
            return {
                scope: {
                    matches: "=",
                    query: "=",
                    active: "=",
                    position: "&",
                    moveInProgress: "=",
                    select: "&"
                },
                replace: !0,
                templateUrl: function(e, t) {
                    return t.popupTemplateUrl || "template/typeahead/typeahead-popup.html"
                },
                link: function(e, t, i) {
                    e.templateUrl = i.templateUrl,
                    e.isOpen = function() {
                        return e.matches.length > 0
                    }
                    ,
                    e.isActive = function(t) {
                        return e.active == t
                    }
                    ,
                    e.selectActive = function(t) {
                        e.active = t
                    }
                    ,
                    e.selectMatch = function(t) {
                        e.select({
                            activeIdx: t
                        })
                    }
                }
            }
        }
        )).directive("uibTypeaheadMatch", ["$templateRequest", "$compile", "$parse", function(e, t, i) {
            return {
                scope: {
                    index: "=",
                    match: "=",
                    query: "="
                },
                link: function(n, o, r) {
                    var a = i(r.templateUrl)(n.$parent) || "template/typeahead/typeahead-match.html";
                    e(a).then((function(e) {
                        t(e.trim())(n, (function(e) {
                            o.replaceWith(e)
                        }
                        ))
                    }
                    ))
                }
            }
        }
        ]).filter("uibTypeaheadHighlight", ["$sce", "$injector", "$log", function(e, t, i) {
            function n(e) {
                return e.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1")
            }
            function o(e) {
                return /<.*>/g.test(e)
            }
            var r;
            return r = t.has("$sanitize"),
            function(t, a) {
                return !r && o(t) && i.warn("Unsafe use of typeahead please use ngSanitize"),
                t = a ? ("" + t).replace(new RegExp(n(a),"gi"), "<strong>$&</strong>") : t,
                r || (t = e.trustAsHtml(t)),
                t
            }
        }
        ]),
        angular.module("ui.bootstrap.typeahead").value("$typeaheadSuppressWarning", !1).service("typeaheadParser", ["$parse", "uibTypeaheadParser", "$log", "$typeaheadSuppressWarning", function(e, t, i, n) {
            return n || i.warn("typeaheadParser is now deprecated. Use uibTypeaheadParser instead."),
            t
        }
        ]).directive("typeahead", ["$compile", "$parse", "$q", "$timeout", "$document", "$window", "$rootScope", "$uibPosition", "typeaheadParser", "$log", "$typeaheadSuppressWarning", function(e, t, i, n, o, r, a, s, l, c, d) {
            var u = [9, 13, 27, 38, 40]
              , p = 200;
            return {
                require: ["ngModel", "^?ngModelOptions"],
                link: function(h, m, g, f) {
                    function v() {
                        R.moveInProgress || (R.moveInProgress = !0,
                        R.$digest()),
                        W && n.cancel(W),
                        W = n((function() {
                            R.matches.length && b(),
                            R.moveInProgress = !1
                        }
                        ), p)
                    }
                    function b() {
                        R.position = I ? s.offset(m) : s.position(m),
                        R.position.top += m.prop("offsetHeight")
                    }
                    d || c.warn("typeahead is now deprecated. Use uib-typeahead instead.");
                    var y = f[0]
                      , w = f[1]
                      , C = h.$eval(g.typeaheadMinLength);
                    C || 0 === C || (C = 1);
                    var x, S, P = h.$eval(g.typeaheadWaitMs) || 0, k = !1 !== h.$eval(g.typeaheadEditable), _ = t(g.typeaheadLoading).assign || angular.noop, A = t(g.typeaheadOnSelect), T = !!angular.isDefined(g.typeaheadSelectOnBlur) && h.$eval(g.typeaheadSelectOnBlur), E = t(g.typeaheadNoResults).assign || angular.noop, O = g.typeaheadInputFormatter ? t(g.typeaheadInputFormatter) : void 0, I = !!g.typeaheadAppendToBody && h.$eval(g.typeaheadAppendToBody), D = g.typeaheadAppendToElementId || !1, F = !1 !== h.$eval(g.typeaheadFocusFirst), M = !!g.typeaheadSelectOnExact && h.$eval(g.typeaheadSelectOnExact), $ = t(g.ngModel), B = t(g.ngModel + "($$$p)"), j = function(e, t) {
                        return angular.isFunction($(h)) && w && w.$options && w.$options.getterSetter ? B(e, {
                            $$$p: t
                        }) : $.assign(e, t)
                    }, L = l.parse(g.typeahead), R = h.$new(), U = h.$on("$destroy", (function() {
                        R.$destroy()
                    }
                    ));
                    R.$on("$destroy", U);
                    var z = "typeahead-" + R.$id + "-" + Math.floor(1e4 * Math.random());
                    m.attr({
                        "aria-autocomplete": "list",
                        "aria-expanded": !1,
                        "aria-owns": z
                    });
                    var N = angular.element("<div typeahead-popup></div>");
                    N.attr({
                        id: z,
                        matches: "matches",
                        active: "activeIdx",
                        select: "select(activeIdx)",
                        "move-in-progress": "moveInProgress",
                        query: "query",
                        position: "position"
                    }),
                    angular.isDefined(g.typeaheadTemplateUrl) && N.attr("template-url", g.typeaheadTemplateUrl),
                    angular.isDefined(g.typeaheadPopupTemplateUrl) && N.attr("popup-template-url", g.typeaheadPopupTemplateUrl);
                    var V = function() {
                        R.matches = [],
                        R.activeIdx = -1,
                        m.attr("aria-expanded", !1)
                    }
                      , G = function(e) {
                        return z + "-option-" + e
                    };
                    R.$watch("activeIdx", (function(e) {
                        0 > e ? m.removeAttr("aria-activedescendant") : m.attr("aria-activedescendant", G(e))
                    }
                    ));
                    var W, H = function(e, t) {
                        return !!(R.matches.length > t && e) && e.toUpperCase() === R.matches[t].label.toUpperCase()
                    }, X = function(e) {
                        var t = {
                            $viewValue: e
                        };
                        _(h, !0),
                        E(h, !1),
                        i.when(L.source(h, t)).then((function(i) {
                            var n = e === y.$viewValue;
                            if (n && x)
                                if (i && i.length > 0) {
                                    R.activeIdx = F ? 0 : -1,
                                    E(h, !1),
                                    R.matches.length = 0;
                                    for (var o = 0; o < i.length; o++)
                                        t[L.itemName] = i[o],
                                        R.matches.push({
                                            id: G(o),
                                            label: L.viewMapper(R, t),
                                            model: i[o]
                                        });
                                    R.query = e,
                                    b(),
                                    m.attr("aria-expanded", !0),
                                    M && 1 === R.matches.length && H(e, 0) && R.select(0)
                                } else
                                    V(),
                                    E(h, !0);
                            n && _(h, !1)
                        }
                        ), (function() {
                            V(),
                            _(h, !1),
                            E(h, !0)
                        }
                        ))
                    };
                    I && (angular.element(r).bind("resize", v),
                    o.find("body").bind("scroll", v)),
                    R.moveInProgress = !1,
                    V(),
                    R.query = void 0;
                    var Y, q = function(e) {
                        Y = n((function() {
                            X(e)
                        }
                        ), P)
                    }, K = function() {
                        Y && n.cancel(Y)
                    };
                    y.$parsers.unshift((function(e) {
                        return x = !0,
                        0 === C || e && e.length >= C ? P > 0 ? (K(),
                        q(e)) : X(e) : (_(h, !1),
                        K(),
                        V()),
                        k ? e : e ? void y.$setValidity("editable", !1) : (y.$setValidity("editable", !0),
                        null)
                    }
                    )),
                    y.$formatters.push((function(e) {
                        var t, i, n = {};
                        return k || y.$setValidity("editable", !0),
                        O ? (n.$model = e,
                        O(h, n)) : (n[L.itemName] = e,
                        t = L.viewMapper(h, n),
                        n[L.itemName] = void 0,
                        i = L.viewMapper(h, n),
                        t !== i ? t : e)
                    }
                    )),
                    R.select = function(e) {
                        var t, i, o = {};
                        S = !0,
                        o[L.itemName] = i = R.matches[e].model,
                        t = L.modelMapper(h, o),
                        j(h, t),
                        y.$setValidity("editable", !0),
                        y.$setValidity("parse", !0),
                        A(h, {
                            $item: i,
                            $model: t,
                            $label: L.viewMapper(h, o)
                        }),
                        V(),
                        !1 !== R.$eval(g.typeaheadFocusOnSelect) && n((function() {
                            m[0].focus()
                        }
                        ), 0, !1)
                    }
                    ,
                    m.bind("keydown", (function(e) {
                        if (0 !== R.matches.length && -1 !== u.indexOf(e.which)) {
                            if (-1 === R.activeIdx && (9 === e.which || 13 === e.which))
                                return V(),
                                void R.$digest();
                            e.preventDefault(),
                            40 === e.which ? (R.activeIdx = (R.activeIdx + 1) % R.matches.length,
                            R.$digest()) : 38 === e.which ? (R.activeIdx = (R.activeIdx > 0 ? R.activeIdx : R.matches.length) - 1,
                            R.$digest()) : 13 === e.which || 9 === e.which ? R.$apply((function() {
                                R.select(R.activeIdx)
                            }
                            )) : 27 === e.which && (e.stopPropagation(),
                            V(),
                            R.$digest())
                        }
                    }
                    )),
                    m.bind("blur", (function() {
                        T && R.matches.length && -1 !== R.activeIdx && !S && (S = !0,
                        R.$apply((function() {
                            R.select(R.activeIdx)
                        }
                        ))),
                        x = !1,
                        S = !1
                    }
                    ));
                    var Z = function(e) {
                        m[0] !== e.target && 3 !== e.which && 0 !== R.matches.length && (V(),
                        a.$$phase || R.$digest())
                    };
                    o.bind("click", Z),
                    h.$on("$destroy", (function() {
                        o.unbind("click", Z),
                        (I || D) && Q.remove(),
                        I && (angular.element(r).unbind("resize", v),
                        o.find("body").unbind("scroll", v)),
                        N.remove()
                    }
                    ));
                    var Q = e(N)(R);
                    I ? o.find("body").append(Q) : !1 !== D ? angular.element(o[0].getElementById(D)).append(Q) : m.after(Q)
                }
            }
        }
        ]).directive("typeaheadPopup", ["$typeaheadSuppressWarning", "$log", function(e, t) {
            return {
                scope: {
                    matches: "=",
                    query: "=",
                    active: "=",
                    position: "&",
                    moveInProgress: "=",
                    select: "&"
                },
                replace: !0,
                templateUrl: function(e, t) {
                    return t.popupTemplateUrl || "template/typeahead/typeahead-popup.html"
                },
                link: function(i, n, o) {
                    e || t.warn("typeahead-popup is now deprecated. Use uib-typeahead-popup instead."),
                    i.templateUrl = o.templateUrl,
                    i.isOpen = function() {
                        return i.matches.length > 0
                    }
                    ,
                    i.isActive = function(e) {
                        return i.active == e
                    }
                    ,
                    i.selectActive = function(e) {
                        i.active = e
                    }
                    ,
                    i.selectMatch = function(e) {
                        i.select({
                            activeIdx: e
                        })
                    }
                }
            }
        }
        ]).directive("typeaheadMatch", ["$templateRequest", "$compile", "$parse", "$typeaheadSuppressWarning", "$log", function(e, t, i, n, o) {
            return {
                restrict: "EA",
                scope: {
                    index: "=",
                    match: "=",
                    query: "="
                },
                link: function(r, a, s) {
                    n || o.warn("typeahead-match is now deprecated. Use uib-typeahead-match instead.");
                    var l = i(s.templateUrl)(r.$parent) || "template/typeahead/typeahead-match.html";
                    e(l).then((function(e) {
                        t(e.trim())(r, (function(e) {
                            a.replaceWith(e)
                        }
                        ))
                    }
                    ))
                }
            }
        }
        ]).filter("typeaheadHighlight", ["$sce", "$injector", "$log", "$typeaheadSuppressWarning", function(e, t, i, n) {
            function o(e) {
                return e.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1")
            }
            function r(e) {
                return /<.*>/g.test(e)
            }
            var a;
            return a = t.has("$sanitize"),
            function(t, s) {
                return n || i.warn("typeaheadHighlight is now deprecated. Use uibTypeaheadHighlight instead."),
                !a && r(t) && i.warn("Unsafe use of typeahead please use ngSanitize"),
                t = s ? ("" + t).replace(new RegExp(o(s),"gi"), "<strong>$&</strong>") : t,
                a || (t = e.trustAsHtml(t)),
                t
            }
        }
        ]),
        angular.module("template/accordion/accordion-group.html", []).run(["$templateCache", function(e) {
            e.put("template/accordion/accordion-group.html", '<div class="panel {{panelClass || \'panel-default\'}}">\n  <div class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <a href tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" uib-collapse="!isOpen">\n\t  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')
        }
        ]),
        angular.module("template/accordion/accordion.html", []).run(["$templateCache", function(e) {
            e.put("template/accordion/accordion.html", '<div class="panel-group" ng-transclude></div>')
        }
        ]),
        angular.module("template/alert/alert.html", []).run(["$templateCache", function(e) {
            e.put("template/alert/alert.html", '<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')
        }
        ]),
        angular.module("template/carousel/carousel.html", []).run(["$templateCache", function(e) {
            e.put("template/carousel/carousel.html", '<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n  <div class="carousel-inner" ng-transclude></div>\n  <a role="button" href class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n    <span class="sr-only">previous</span>\n  </a>\n  <a role="button" href class="right carousel-control" ng-click="next()" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n    <span class="sr-only">next</span>\n  </a>\n  <ol class="carousel-indicators" ng-show="slides.length > 1">\n    <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n      <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n    </li>\n  </ol>\n</div>')
        }
        ]),
        angular.module("template/carousel/slide.html", []).run(["$templateCache", function(e) {
            e.put("template/carousel/slide.html", '<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')
        }
        ]),
        angular.module("template/datepicker/datepicker.html", []).run(["$templateCache", function(e) {
            e.put("template/datepicker/datepicker.html", '<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <uib-daypicker ng-switch-when="day" tabindex="0"></uib-daypicker>\n  <uib-monthpicker ng-switch-when="month" tabindex="0"></uib-monthpicker>\n  <uib-yearpicker ng-switch-when="year" tabindex="0"></uib-yearpicker>\n</div>')
        }
        ]),
        angular.module("template/datepicker/day.html", []).run(["$templateCache", function(e) {
            e.put("template/datepicker/day.html", '<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')
        }
        ]),
        angular.module("template/datepicker/month.html", []).run(["$templateCache", function(e) {
            e.put("template/datepicker/month.html", '<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')
        }
        ]),
        angular.module("template/datepicker/popup.html", []).run(["$templateCache", function(e) {
            e.put("template/datepicker/popup.html", '<ul class="dropdown-menu" dropdown-nested ng-if="isOpen" style="display: block" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n\t<li ng-transclude></li>\n\t<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n\t\t<span class="btn-group pull-left">\n\t\t\t<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n\t\t\t<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n\t\t</span>\n\t\t<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n\t</li>\n</ul>\n')
        }
        ]),
        angular.module("template/datepicker/year.html", []).run(["$templateCache", function(e) {
            e.put("template/datepicker/year.html", '<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')
        }
        ]),
        angular.module("template/modal/backdrop.html", []).run(["$templateCache", function(e) {
            e.put("template/modal/backdrop.html", '<div uib-modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')
        }
        ]),
        angular.module("template/modal/window.html", []).run(["$templateCache", function(e) {
            e.put("template/modal/window.html", '<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    uib-modal-animation-class="fade"\n    modal-in-class="in"\n    ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" uib-modal-transclude></div></div>\n</div>\n')
        }
        ]),
        angular.module("template/pagination/pager.html", []).run(["$templateCache", function(e) {
            e.put("template/pagination/pager.html", '<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')
        }
        ]),
        angular.module("template/pagination/pagination.html", []).run(["$templateCache", function(e) {
            e.put("template/pagination/pagination.html", '<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')
        }
        ]),
        angular.module("template/tooltip/tooltip-html-popup.html", []).run(["$templateCache", function(e) {
            e.put("template/tooltip/tooltip-html-popup.html", '<div\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')
        }
        ]),
        angular.module("template/tooltip/tooltip-popup.html", []).run(["$templateCache", function(e) {
            e.put("template/tooltip/tooltip-popup.html", '<div\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')
        }
        ]),
        angular.module("template/tooltip/tooltip-template-popup.html", []).run(["$templateCache", function(e) {
            e.put("template/tooltip/tooltip-template-popup.html", '<div\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    uib-tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')
        }
        ]),
        angular.module("template/popover/popover-html.html", []).run(["$templateCache", function(e) {
            e.put("template/popover/popover-html.html", '<div tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')
        }
        ]),
        angular.module("template/popover/popover-template.html", []).run(["$templateCache", function(e) {
            e.put("template/popover/popover-template.html", '<div tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        uib-tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')
        }
        ]),
        angular.module("template/popover/popover.html", []).run(["$templateCache", function(e) {
            e.put("template/popover/popover.html", '<div tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')
        }
        ]),
        angular.module("template/progressbar/bar.html", []).run(["$templateCache", function(e) {
            e.put("template/progressbar/bar.html", '<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" style="min-width: 0;" ng-transclude></div>\n')
        }
        ]),
        angular.module("template/progressbar/progress.html", []).run(["$templateCache", function(e) {
            e.put("template/progressbar/progress.html", '<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')
        }
        ]),
        angular.module("template/progressbar/progressbar.html", []).run(["$templateCache", function(e) {
            e.put("template/progressbar/progressbar.html", '<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" style="min-width: 0;" ng-transclude></div>\n</div>\n')
        }
        ]),
        angular.module("template/rating/rating.html", []).run(["$templateCache", function(e) {
            e.put("template/rating/rating.html", '<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}" aria-valuetext="{{r.title}}"></i>\n</span>\n')
        }
        ]),
        angular.module("template/tabs/tab.html", []).run(["$templateCache", function(e) {
            e.put("template/tabs/tab.html", '<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')
        }
        ]),
        angular.module("template/tabs/tabset.html", []).run(["$templateCache", function(e) {
            e.put("template/tabs/tabset.html", '<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')
        }
        ]),
        angular.module("template/timepicker/timepicker.html", []).run(["$templateCache", function(e) {
            e.put("template/timepicker/timepicker.html", '<table>\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group" ng-class="{\'has-error\': invalidHours}">\n        <input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}">\n      </td>\n      <td>:</td>\n      <td class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n        <input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}">\n      </td>\n      <td ng-show="showMeridian"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')
        }
        ]),
        angular.module("template/typeahead/typeahead-match.html", []).run(["$templateCache", function(e) {
            e.put("template/typeahead/typeahead-match.html", '<a href tabindex="-1" ng-bind-html="match.label | uibTypeaheadHighlight:query"></a>\n')
        }
        ]),
        angular.module("template/typeahead/typeahead-popup.html", []).run(["$templateCache", function(e) {
            e.put("template/typeahead/typeahead-popup.html", '<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')
        }
        ]),
        !angular.$$csp() && angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>')
    },
    d28f: function(e, t, i) {
        i("26f8"),
        i("9960"),
        i("d4e5"),
        i("8336"),
        i("7821"),
        i("40eb"),
        i("1dac"),
        i("c075"),
        i("41af"),
        i("b263"),
        i("da55"),
        i("266b"),
        i("8b95e"),
        i("444d"),
        i("c8d2"),
        i("45cf"),
        i("6c29"),
        i("6444"),
        i("d269"),
        i("be9f"),
        i("0f56"),
        i("e939"),
        i("3baa"),
        i("8f31"),
        i("59c5"),
        i("f9aa")
    },
    d2a9: function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("576f");
        (function() {
            function e(e, t, i, o, r, a, s) {
                async function l(t, n, o) {
                    var r = t.selectedImageProperties.dynamicImageVariation
                      , a = 1;
                    const l = [];
                    for (const c of o)
                        t.selectedImageProperties.dynamicImageVariation = r,
                        await e.previewImageOnPlaceholder(o[a - 1], n, t.imageSelected.id).then((function() {
                            const e = n.getActiveObject().isColorOptions
                              , t = s.getPod();
                            e && !["printify", "printful"].includes(null === t || void 0 === t ? void 0 : t.apiKeyReference) ? (l.push({
                                optionId: r,
                                name: c.name
                            }),
                            i.saveDynamicImageToPlaceholder(r, c, n, c.name)) : (e && s.getPod() && s.setIsProductColorModified(!0),
                            i.saveDynamicImageToPlaceholder(r, c, n))
                        }
                        )),
                        r++,
                        a++;
                    s.setProductColorsFilenames(l)
                }
                async function c(e, i, n, o, r, a, s, l) {
                    var c = 0;
                    for (const d of e) {
                        s && s(n);
                        try {
                            const o = await t.uploadEPSFile(e[c], a);
                            t.addEPSGroup(i, n, o.SVG, o.EPS, r)
                        } catch (error) {
                            console.log(error)
                        }
                        l && l(n),
                        c < e.length && (await t.changeDynamicEPSPosition(i, n, o),
                        n++,
                        c++)
                    }
                }
                async function d(e, t, i, n) {
                    let o = 0
                      , r = [];
                    n(0);
                    for (let a = 0; a < e.length; a += t) {
                        let s = [];
                        for (let r = 0; r < t; ++r)
                            e[a + r] && s.push(i(e[a + r]).then(t=>(++o,
                            console.log(e[a + r].name + " uploaded"),
                            n(o / e.length * 100),
                            t)).catch(e=>{
                                console.error(e),
                                ++o
                            }
                            ));
                        r.push.apply(r, await Promise.all(s))
                    }
                    return n(100),
                    r
                }
                async function u(e, t, i, n) {
                    return await d(e, t, (function(e) {
                        return new Promise(async(t,n)=>{
                            try {
                                const n = await r.uploadVectorToS3(e, "vector", !1, i);
                                t(n)
                            } catch (error) {
                                n(error)
                            }
                        }
                        )
                    }
                    ), n)
                }
                async function p(e, t, i, o) {
                    return await d(e, t, (function(e) {
                        return new Promise(async(t,o)=>{
                            try {
                                let o = void 0;
                                const r = await Object(n["d"])("preview", e);
                                if (i) {
                                    const e = await a.generateImageThumbnail(r.Name);
                                    o = e.Path
                                }
                                t({
                                    Path: r.Path,
                                    ThumbnailPath: o,
                                    OriginalName: e.name
                                })
                            } catch (r) {
                                o(r)
                            }
                        }
                        )
                    }
                    ), o)
                }
                async function h(e, t, i) {
                    return await d([e], 1, (function(e) {
                        return new Promise(async(i,o)=>{
                            try {
                                let o = void 0;
                                const r = await Object(n["d"])("library-categories", e);
                                if (t) {
                                    const e = await a.generateImageThumbnail(r.Name, "library-categories");
                                    o = e.Path
                                }
                                i({
                                    Path: r.Path,
                                    ThumbnailPath: o
                                })
                            } catch (r) {
                                o(r)
                            }
                        }
                        )
                    }
                    ), i)
                }
                return {
                    uploadMultipleImages: l,
                    uploadMultipleVectors: c,
                    uploadVectorsWithChunks: u,
                    uploadDynamicImagesWithChunks: p,
                    uploadLibraryCategoryImage: h
                }
            }
            e.$inject = ["TestImageService", "DynamicVectorService", "DynamicImageService", "ImageUtilService", "VectorUtilService", "ImageAPIService", "ProductService"],
            angular.module("app.shared.services").factory("MultipleFileUploadService", e)
        }
        )()
    },
    d2c7: function(e, t, i) {
        var n = i("4719")
          , o = i("56cf")
          , r = n(o)
          , a = '<div class="page page-auth forgot-password-page gradient-customily-bg" style="min-height:100%" ng-controller="ForgotPasswordCtrl"> <div class="auth-container"> <div class="form-head mb20"> <img class="center-block" src="' + r + '"/> <h5 class="text-normal h5 text-center"> Enter your user account\'s verified email address and we will send you a password reset link. </h5> </div> <div class="form-container"> <form class="form-vertical" ng-submit="sendResetEmail()"> <br/> <md-input-container class="md-block mb0" flex-gt-sm> <label>Email</label> <input id="email" type="email" placeholder="Type your email" ng-model="email" required/> </md-input-container> <div class="btn-group-justified" style="display:flex"> <md-button id="submit" type="submit" class="md-raised md-primary w100">Send password reset email</md-button> </div> </form> </div> </div> </div> ';
        e.exports = a
    },
    d3b5: function(e, t, i) {
        var n = i("4719")
          , o = i("2389")
          , r = n(o)
          , a = '<div class="block-ui-overlay"></div> <div class="block-ui-message-container" aria-live="assertive" aria-atomic="true" style="margin-top:20vh"> <img class="circular-image-finishing-glow" style="width:5vh;margin-top:5vh" src="' + r + '"/> <div style="text-align:center;font-family:Arial;font-size:1vw;margin-top:2%;color:#000"> {{ state.message }} </div> </div> ';
        e.exports = a
    },
    d4e5: function(e, t, i) {
        (function(e, t) {
            "use strict";
            var i, n, o, r, a, s, l = e.ColorPicker, c = !l, d = !1, u = !1, p = {}, h = {
                w: "White",
                b: "Black",
                c: "Custom"
            }, m = "", g = 1, f = {}, v = {}, b = !0, y = {}, w = {}, C = {}, x = {}, S = {}, P = {}, k = Math, _ = "AnimationFrame", A = "request" + _, T = "cancel" + _, E = ["ms", "moz", "webkit", "o"], O = function(e) {
                this.options = {
                    color: "rgba(204, 82, 37, 0.8)",
                    mode: "rgb-b",
                    fps: 60,
                    delayOffset: 8,
                    CSSPrefix: "cp-",
                    allMixDetails: !0,
                    alphaBG: "w",
                    imagePath: "",
                    enableInputDrag: !1
                },
                I(this, e || {})
            };
            function I(n, o) {
                var r, a = "", l = "";
                for (var c in o)
                    n.options[c] = o[c];
                for (var h in d = document.createStyleSheet !== t && document.getElementById || !!e.MSInputMethodContext,
                u = "undefined" !== typeof document.body.style.opacity,
                C = new Colors(n.options),
                delete n.options,
                S = C.options,
                S.scale = 1,
                l = S.CSSPrefix,
                n.color = C,
                p = S.valueRanges,
                n.nodes = P = B(M(n), n),
                H(S.mode),
                D(n),
                K(),
                a = " " + S.mode.type + "-" + S.mode.z,
                P.slds.className += a,
                P.panel.className += a,
                S.noHexButton && oe(P.HEX_butt, l + "butt", l + "labl"),
                S.size !== t && W(t, S.size),
                r = {
                    alphaBG: P.alpha_labl,
                    cmyOnly: P.HEX_labl
                },
                r)
                    S[h] !== t && G({
                        target: r[h],
                        data: S[h]
                    });
                S.noAlpha && (P.colorPicker.className += " no-alpha"),
                n.renderMemory(S.memoryColors),
                j(n),
                i = !0,
                L(t, "init"),
                s && (D(s),
                Q())
            }
            function D(e) {
                b = !0,
                a !== e && (a = e,
                x = e.color.colors,
                S = e.color.options,
                P = e.nodes,
                C = e.color,
                w = {},
                Z(x))
            }
            function F() {
                var e = ["L", "S", "XS", "XXS"];
                S.sizes = {},
                P.testNode.style.cssText = "position:absolute;left:-1000px;top:-1000px;",
                document.body.appendChild(P.testNode);
                for (var t = e.length; t--; )
                    P.testNode.className = S.CSSPrefix + "app " + e[t],
                    S.sizes[e[t]] = [P.testNode.offsetWidth, P.testNode.offsetHeight];
                P.testNode.removeNode ? P.testNode.removeNode(!0) : document.body.removeChild(P.testNode)
            }
            function M(e) {
                var t = document.createElement("div")
                  , i = S.CSSPrefix
                  , n = "data:image/png;base64,"
                  , o = function(e, t) {
                    var i = document.createElement("style");
                    i.setAttribute("type", "text/css"),
                    t && i.setAttribute("id", t),
                    i.styleSheet || i.appendChild(document.createTextNode(e)),
                    document.getElementsByTagName("head")[0].appendChild(i),
                    i.styleSheet && (document.styleSheets[document.styleSheets.length - 1].cssText = e)
                }
                  , r = function(e) {
                    l._cssFunc = l._cssFunc.replace(//g, i).replace("_patches.png", e ? n + l._patchesPng : S.imagePath + "_patches.png").replace("_vertical.png", e ? n + l._verticalPng : S.imagePath + "_vertical.png").replace("_horizontal.png", e ? n + l._horizontalPng : S.imagePath + "_horizontal.png"),
                    o(l._cssFunc, "colorPickerCSS"),
                    S.customCSS || (l._cssMain = l._cssMain.replace(//g, i).replace("_bgs.png", e ? n + l._bgsPng : S.imagePath + "_bgs.png").replace("_icons.png", e ? n + l._iconsPng : S.imagePath + "_icons.png").replace(/opacity:(\d*\.*(\d+))/g, (function(e, t) {
                        return u ? "-moz-opacity: " + t + "; -khtml-opacity: " + t + "; opacity: " + t : '-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=' + k.round(100 * +t) + ')";filter: alpha(opacity=' + k.round(100 * +t) + ")"
                    }
                    )),
                    o(l._cssMain))
                }
                  , d = document.createElement("img");
                return c ? e.color.options.devPicker : (document.getElementById("colorPickerCSS") ? e.cssIsReady = !0 : (d.onload = d.onerror = function() {
                    l._cssFunc && r(1 === this.width && 1 === this.height),
                    e.cssIsReady = !0
                }
                ,
                d.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="),
                (s = a) && X(),
                t.insertAdjacentHTML("afterbegin", a ? a.nodes.colorPicker.outerHTML || (new XMLSerializer).serializeToString(a.nodes.colorPicker) : l._html.replace(//g, i)),
                t = t.children[0],
                t.style.cssText = S.initStyle || "",
                (S.appendTo || document.body).appendChild(t))
            }
            function B(e, t) {
                var i, n, o = e.getElementsByTagName("*"), r = {
                    colorPicker: e
                }, a = new RegExp(S.CSSPrefix);
                r.styles = {},
                r.textNodes = {},
                r.memos = [],
                r.testNode = document.createElement("div");
                for (var s = 0, l = o.length; s < l; s++)
                    i = o[s],
                    (n = i.className) && a.test(n) ? (n = n.split(" ")[0].replace(S.CSSPrefix, "").replace(/-/g, "_"),
                    /_disp/.test(n) ? (n = n.replace("_disp", ""),
                    r.styles[n] = i.style,
                    r.textNodes[n] = i.firstChild,
                    i.contentEditable = !0) : (/(?:hs|cmyk|Lab).*?(?:butt|labl)/.test(n) || (r[n] = i),
                    /(?:cur|sld[^s]|opacity|cont|col)/.test(n) && (r.styles[n] = /(?:col\d)/.test(n) ? i.children[0].style : i.style))) : /memo/.test(i.parentNode.className) && r.memos.push(i);
                return r.panelCover = r.panel.appendChild(document.createElement("div")),
                r
            }
            function j(a, s) {
                var l = s ? le : se;
                l(P.colorPicker, "mousedown", (function(s) {
                    var l = s || e.event
                      , c = ae(l)
                      , u = (l.button || l.which) < 2 ? l.target || l.srcElement : {}
                      , p = u.className;
                    if (D(a),
                    n = u,
                    L(t, "resetEventListener"),
                    m = "",
                    u === P.sldl_3 || u === P.curm ? (n = P.sldl_3,
                    i = R,
                    m = "changeXYValue",
                    oe(P.slds, "do-drag")) : /sldr/.test(p) || u === P.curl || u === P.curr ? (n = P.sldr_4,
                    i = U,
                    m = "changeZValue") : u === P.opacity.children[0] || u === P.opacity_slider ? (n = P.opacity,
                    i = z,
                    m = "changeOpacityValue") : S.enableInputDrag && /-disp/.test(p) && !/HEX-/.test(p) ? (i = N,
                    m = "changeInputValue",
                    (3 === u.nextSibling.nodeType ? u.nextSibling.nextSibling : u.nextSibling).appendChild(P.nsarrow),
                    o = p.split("-disp")[0].split("-"),
                    o = {
                        type: o[0],
                        z: o[1] || ""
                    },
                    oe(P.panel, "start-change"),
                    g = 0) : u !== P.resize || S.noResize ? i = t : (S.sizes || F(),
                    n = P.resizer,
                    i = W,
                    m = "resizeApp"),
                    i && (f = {
                        pageX: c.X,
                        pageY: c.Y
                    },
                    n.style.display = "block",
                    v = re(n),
                    v.width = P.opacity.offsetWidth,
                    v.childWidth = P.opacity_slider.offsetWidth,
                    n.style.display = "",
                    i(l),
                    se(d ? document.body : e, "mousemove", i),
                    r = e[A](Q)),
                    !/-disp/.test(p))
                        return ne(l)
                }
                )),
                l(P.colorPicker, "click", (function(e) {
                    D(a),
                    G(e)
                }
                )),
                l(P.colorPicker, "dblclick", G),
                l(P.colorPicker, "keydown", (function(e) {
                    D(a),
                    V(e)
                }
                )),
                l(P.colorPicker, "keypress", V),
                l(P.colorPicker, "paste", (function(e) {
                    var t = e.clipboardData.getData("Text");
                    return t && (e.target.firstChild.data = t),
                    V(e),
                    ne(e)
                }
                ))
            }
            function L(n, a) {
                var s = i;
                i && (e[T](r),
                le(d ? document.body : e, "mousemove", i),
                g && (o = {
                    type: "alpha"
                },
                Q()),
                "function" !== typeof i && "number" !== typeof i || delete S.webUnsave,
                g = 1,
                i = t,
                oe(P.slds, "do-drag", ""),
                oe(P.panel, "(?:start-change|do-change)", ""),
                P.resizer.style.cssText = "",
                P.panelCover.style.cssText = "",
                P.memo_store.style.cssText = "background-color: " + ee(x.RND.rgb) + "; " + ie(x.alpha),
                P.memo.className = P.memo.className.replace(/\s+(?:dark|light)/, "") + (x["rgbaMix" + h[S.alphaBG]].luminance < .22 ? " dark" : " light"),
                o = t,
                Y(),
                S.actionCallback && S.actionCallback(n, m || s.name || a || "external"))
            }
            function R(t) {
                var i = t || e.event
                  , n = S.scale
                  , o = ae(i)
                  , r = (o.X - v.left) * (4 === n ? 2 : n)
                  , a = (o.Y - v.top) * n
                  , s = S.mode;
                return x[s.type][s.x] = te(r / 255, 0, 1),
                x[s.type][s.y] = 1 - te(a / 255, 0, 1),
                q(),
                ne(i)
            }
            function U(t) {
                var i = t || e.event
                  , n = ae(i)
                  , o = (n.Y - v.top) * S.scale
                  , r = S.mode;
                return x[r.type][r.z] = 1 - te(o / 255, 0, 1),
                q(),
                ne(i)
            }
            function z(t) {
                var i = t || e.event
                  , n = ae(i);
                return b = !0,
                x.alpha = te(k.round((n.X - v.left) / v.width * 100), 0, 100) / 100,
                q("alpha"),
                ne(i)
            }
            function N(t) {
                if (o) {
                    var i, a = t || e.event, s = ae(a), l = f.pageY - s.Y, c = S.delayOffset, d = o.type, u = "alpha" === d;
                    return g || k.abs(l) >= c ? (g || (g = (l > 0 ? -c : c) + +n.firstChild.data * (u ? 100 : 1),
                    f.pageY += g,
                    l += g,
                    g = 1,
                    oe(P.panel, "start-change", "do-change"),
                    P.panelCover.style.cssText = "position:absolute;left:0;top:0;right:0;bottom:0",
                    document.activeElement.blur(),
                    r = e[A](Q)),
                    "cmyk" === d && S.cmyOnly && (d = "cmy"),
                    u ? (b = !0,
                    x.alpha = te(l / 100, 0, 1)) : (i = p[d][o.z],
                    x[d][o.z] = "Lab" === d ? te(l, i[0], i[1]) : te(l / i[1], 0, 1)),
                    q(u ? "alpha" : d),
                    ne(a)) : void 0
                }
            }
            function V(n) {
                var o = n || e.event
                  , r = o.which || o.keyCode
                  , s = o.key || String.fromCharCode(r)
                  , l = document.activeElement
                  , c = l.className.replace(S.CSSPrefix, "").split("-")
                  , d = c[0]
                  , u = c[1]
                  , h = "alpha" === d
                  , m = "HEX" === d
                  , g = {
                    k40: -1,
                    k38: 1,
                    k34: -10,
                    k33: 10
                }["k" + r] / (h ? 100 : 1)
                  , f = {
                    HEX: /[0-9a-fA-F]/,
                    Lab: /[\-0-9]/,
                    alpha: /[\.0-9]/
                }[d] || /[0-9]/
                  , v = p[d][d] || p[d][u];
                l.firstChild || (l.innerText = "0");
                var b, y = l.firstChild, w = ce(l), C = y.data, P = "0" !== C || m ? C.split("") : [];
                const _ = "Enter" === o.key;
                if (/^(?:27|13)$/.test(r) || "paste" === o.type ? (ne(o),
                b = y.data) : "keydown" === o.type ? (g ? b = te(k.round(1e6 * (+C + g)) / 1e6, v[0], v[1]) : /^(?:8|46)$/.test(r) && (w.range || (w.range++,
                w.start -= 8 === r ? 1 : 0),
                P.splice(w.start, w.range),
                b = P.join("") || "0"),
                b !== t && ne(o, !0)) : "keypress" === o.type && (/^(?:37|39|8|46|9)$/.test(r) || ne(o, !0),
                f.test(s) && (P.splice(w.start, w.range, s),
                b = P.join("")),
                w.start++),
                m && b && (b = b.replace(/[^0-9a-fA-F]/g, ""),
                b = b.substring(0, 6)),
                1 === s.length && m && (/^\d|a|b|c|d|e|f$/.test(s) && b && 6 === b.length || "paste" === o.type && 6 === b.length)) {
                    const e = b || y.data;
                    return e.length % 3 === 0 || "0" === e.data ? (y.data = b,
                    a.setColor("0" === e ? "000" : e, "rgb", x.alpha, !0)) : (ne(o, !0),
                    l.focus())
                }
                b !== t && "" !== b && (m || +b >= v[0] && +b <= v[1]) && (m && (b = b.toString(16).toUpperCase() || "0"),
                h ? x[d] = +b : m || (x[d][u] = +b / ("Lab" === d ? 1 : v[1])),
                q(h ? "alpha" : d),
                Z(x),
                i = !0,
                L(n, o.type),
                y.data = b,
                ce(l, k.min(l.firstChild.data.length, w.start < 0 ? 0 : w.start))),
                _ && S.onSave && (l.blur(),
                S.onSave(a))
            }
            function G(n) {
                var o, r, s = n || e.event, l = s.target || s.srcElement, c = l.className, d = l.parentNode, u = S, p = x.RND.rgb, h = S.mode, m = "", g = u.CSSPrefix, f = /(?:hs|rgb)/.test(d.className) && /^[HSBLRG]$/.test(l.firstChild ? l.firstChild.data : ""), v = /dblc/.test(s.type), b = "";
                if (!v || f) {
                    if (-1 !== c.indexOf("-labl " + g + "labl"))
                        oe(P[c.split("-")[0]], g + "hide", ""),
                        oe(P[d.className.split("-")[1]], g + "hide");
                    else if (-1 !== c.indexOf(g + "butt"))
                        if (f)
                            v && 2 === S.scale && (m = /hs/.test(h.type) ? "rgb" : /hide/.test(P.hsl.className) ? "hsv" : "hsl",
                            m = m + "-" + m[h.type.indexOf(h.z)]),
                            a.setMode(m || c.replace("-butt", "").split(" ")[0]),
                            b = "modeChange";
                        else if (/^[rgb]/.test(c))
                            m = c.split("-")[1],
                            oe(P.colorPicker, "no-rgb-" + m, (u["noRGB" + m] = !u["noRGB" + m]) ? t : ""),
                            b = "noRGB" + m;
                        else if (l === P.alpha_labl)
                            o = u.customBG,
                            r = u.alphaBG,
                            oe(P.colorPicker, "alpha-bg-" + r, "alpha-bg-" + (r = u.alphaBG = n.data || ("w" === r ? o ? "c" : "b" : "c" === r ? "b" : "w"))),
                            l.firstChild.data = r.toUpperCase(),
                            P.ctrl.style.backgroundColor = P.memo.style.backgroundColor = "c" !== r ? "" : "rgb(" + k.round(255 * o.r) + ", " + k.round(255 * o.g) + ", " + k.round(255 * o.b) + ")",
                            P.raster.style.cssText = P.raster_bg.previousSibling.style.cssText = "c" !== r ? "" : ie(o.luminance < .22 ? .5 : .4),
                            b = "alphaBackground";
                        else if (l === P.alpha_butt)
                            oe(P.colorPicker, "mute-alpha", (u.muteAlpha = !u.muteAlpha) ? t : ""),
                            b = "alphaState";
                        else if (l === P.HEX_butt)
                            oe(P.colorPicker, "no-HEX", (u.HEXState = !u.HEXState) ? t : ""),
                            b = "HEXState";
                        else if (l === P.HEX_labl) {
                            var y = "web save" === x.saveColor;
                            "web smart" === x.saveColor || y ? y ? a.setColor(u.webUnsave, "rgb") : (u.webUnsave || (u.webUnsave = J(p)),
                            a.setColor(x.webSave, "rgb")) : (u.webUnsave = J(p),
                            a.setColor(x.webSmart, "rgb")),
                            b = "webColorState"
                        } else
                            /Lab-x-labl/.test(c) && (oe(P.colorPicker, "cmy-only", (u.cmyOnly = !u.cmyOnly) ? t : ""),
                            b = "cmykState");
                    else if (l === P.bsav)
                        K(),
                        b = "saveAsBackground",
                        u.onSave && u.onSave(a);
                    else if (l === P.bres) {
                        var w = J(p)
                          , C = x.alpha;
                        a.setColor(u.color),
                        K(),
                        a.setColor(w, "rgb", C),
                        b = "resetColor"
                    } else if (d === P.col1)
                        x.hsv.h -= x.hsv.h > .5 ? .5 : -.5,
                        q("hsv"),
                        b = "shiftColor";
                    else if (d === P.col2)
                        a.setColor(l.style.backgroundColor, "rgb", x.background.alpha),
                        b = "setSavedColor";
                    else if (d === P.memo) {
                        var _ = function() {
                            P.memos.blinker && (P.memos.blinker.style.cssText = P.memos.cssText)
                        }
                          , A = function(t) {
                            P.memos.blinker = t,
                            t.style.cssText = "background-color:" + (x.RGBLuminance > .22 ? "#333" : "#DDD"),
                            e.setTimeout(_, 200)
                        };
                        if (l === P.memo_cursor) {
                            _(),
                            P.memos.blinker = t,
                            P.testNode.style.cssText = P.memo_store.style.cssText,
                            P.memos.cssText = P.testNode.style.cssText;
                            for (var T = P.memos.length - 1; T--; )
                                if (P.memos.cssText === P.memos[T].style.cssText) {
                                    A(P.memos[T]);
                                    break
                                }
                            if (!P.memos.blinker) {
                                for (T = P.memos.length - 1; T--; )
                                    P.memos[T + 1].style.cssText = P.memos[T].style.cssText;
                                P.memos[0].style.cssText = P.memo_store.style.cssText
                            }
                            b = "toMemory"
                        } else
                            _(),
                            a.setColor(l.style.backgroundColor, "rgb", l.style.opacity || 1),
                            P.memos.cssText = l.style.cssText,
                            A(l),
                            i = 1,
                            b = "fromMemory"
                    }
                    b && (Z(x),
                    i = i || !0,
                    L(n, b))
                }
            }
            function W(i, n) {
                var o, r = i || e.event, s = r ? ae(r) : {}, l = n !== t, c = l ? n : s.X - v.left + 8, d = l ? n : s.Y - v.top + 8, u = [" S XS XXS", " S XS", " S", ""], p = S.sizes, h = l ? n : d < p.XXS[1] + 25 ? 0 : c < p.XS[0] + 25 ? 1 : c < p.S[0] + 25 || d < p.S[1] + 25 ? 2 : 3, m = u[h], g = !1, f = "";
                w.resizer !== m && (g = /XX/.test(m),
                o = S.mode,
                !g || /hs/.test(o.type) && "h" !== o.z ? o.original && a.setMode(o.original) : (f = o.type + "-" + o.z,
                a.setMode(/hs/.test(o.type) ? o.type + "-s" : "hsv-s"),
                S.mode.original = f),
                P.colorPicker.className = P.colorPicker.className.replace(/\s+(?:S|XS|XXS)/g, "") + m,
                S.scale = g ? 4 : /S/.test(m) ? 2 : 1,
                S.currentSize = h,
                w.resizer = m,
                b = !0,
                Q(),
                Y()),
                P.resizer.style.cssText = "display: block;width: " + (c > 10 ? c : 10) + "px;height: " + (d > 10 ? d : 10) + "px;"
            }
            function H(e) {
                var t = {
                    rgb_r: {
                        x: "b",
                        y: "g"
                    },
                    rgb_g: {
                        x: "b",
                        y: "r"
                    },
                    rgb_b: {
                        x: "r",
                        y: "g"
                    },
                    hsv_h: {
                        x: "s",
                        y: "v"
                    },
                    hsv_s: {
                        x: "h",
                        y: "v"
                    },
                    hsv_v: {
                        x: "h",
                        y: "s"
                    },
                    hsl_h: {
                        x: "s",
                        y: "l"
                    },
                    hsl_s: {
                        x: "h",
                        y: "l"
                    },
                    hsl_l: {
                        x: "h",
                        y: "s"
                    }
                }
                  , i = e.replace("-", "_")
                  , n = "\\b(?:rg|hs)\\w\\-\\w\\b";
                return oe(P.panel, n, e),
                oe(P.slds, n, e),
                e = e.split("-"),
                S.mode = {
                    type: e[0],
                    x: t[i].x,
                    y: t[i].y,
                    z: e[1]
                }
            }
            function X() {
                var e = /\s+(?:hue-)*(?:dark|light)/g
                  , t = "className";
                for (var i in P.curl[t] = P.curl[t].replace(e, ""),
                P.curr[t] = P.curr[t].replace(e, ""),
                P.slds[t] = P.slds[t].replace(e, ""),
                P.sldr_2[t] = S.CSSPrefix + "sldr-2",
                P.sldr_4[t] = S.CSSPrefix + "sldr-4",
                P.sldl_3[t] = S.CSSPrefix + "sldl-3",
                P.styles)
                    i.indexOf("sld") || (P.styles[i].cssText = "");
                w = {}
            }
            function Y() {
                P.styles.curr.cssText = P.styles.curl.cssText,
                P.curl.className = S.CSSPrefix + "curl" + (y.noRGBZ ? " " + S.CSSPrefix + "curl-" + y.noRGBZ : ""),
                P.curr.className = S.CSSPrefix + "curr " + S.CSSPrefix + "curr-" + ("h" === S.mode.z ? y.HUEContrast : y.noRGBZ ? y.noRGBZ : y.RGBLuminance)
            }
            function q(e) {
                Z(C.setColor(t, e || S.mode.type)),
                b = !0
            }
            function K(e) {
                return C.saveAsBackground(),
                P.styles.col2.cssText = "background-color: " + ee(x.background.RGB) + ";" + ie(x.background.alpha),
                e && Z(x),
                x
            }
            function Z(e) {
                var i = k
                  , n = y
                  , o = h[S.alphaBG];
                n.hueDelta = i.round(100 * e["rgbaMixBGMix" + o].hueDelta),
                n.luminanceDelta = i.round(100 * e["rgbaMixBGMix" + o].luminanceDelta),
                n.RGBLuminance = e.RGBLuminance > .22 ? "light" : "dark",
                n.HUEContrast = e.HUELuminance > .22 ? "light" : "dark",
                n.contrast = n.luminanceDelta > n.hueDelta ? "contrast" : "",
                n.readabiltiy = e["rgbaMixBGMix" + o].WCAG2Ratio >= 7 ? "green" : e["rgbaMixBGMix" + o].WCAG2Ratio >= 4.5 ? "orange" : "",
                n.noRGBZ = S["no" + S.mode.type.toUpperCase() + S.mode.z] ? "g" === S.mode.z && e.rgb.g < .59 || "b" === S.mode.z || "r" === S.mode.z ? "dark" : "light" : t
            }
            function Q() {
                if (i) {
                    if (!b)
                        return r = e[A](Q);
                    b = !1
                }
                var a, s, l, c, d = S, u = d.mode, h = d.scale, m = d.CSSPrefix, g = x, f = P, C = f.styles, _ = f.textNodes, T = p, E = o, O = y, I = w, D = k, F = ie, M = ee, B = 0, j = 0, L = g[u.type][u.x], z = D.round(255 * L / (4 === h ? 2 : h)), N = g[u.type][u.y], V = 1 - N, G = D.round(255 * V / h), W = 1 - g[u.type][u.z], H = D.round(255 * W / h), X = [L, N], Y = "rgb" === u.type, q = "h" === u.z, K = "hsl" === u.type, Z = K && "s" === u.z, J = i === R, te = i === U;
                Y && (X[0] >= X[1] ? j = 1 : B = 1,
                I.sliderSwap !== B && (f.sldr_2.className = d.CSSPrefix + "sldr-" + (3 - B),
                I.sliderSwap = B)),
                (Y && !te || q && !J || !q && !te) && (C[q ? "sldl_2" : "sldr_2"][Y ? "cssText" : "backgroundColor"] = Y ? F((X[B] - X[j]) / (1 - X[j] || 0)) : M(g.hueRGB)),
                q || (te || (C.sldr_4.cssText = F(Y ? X[j] : Z ? D.abs(1 - 2 * V) : V)),
                J || (C.sldl_3.cssText = F(K && "l" === u.z ? D.abs(1 - 2 * W) : W)),
                K && (c = Z ? "sldr_4" : "sldl_3",
                s = Z ? "r-" : "l-",
                l = Z ? V > .5 ? 4 : 3 : W > .5 ? 3 : 4,
                I[c] !== l && (f[c].className = d.CSSPrefix + "sld" + s + l,
                I[c] = l))),
                te || (C.curm.cssText = "left: " + z + "px; top: " + G + "px;"),
                J || (C.curl.top = H + "px"),
                E && (C.curr.top = H + "px"),
                (E && "alpha" === E.type || n === f.opacity) && (C.opacity_slider.left = d.opacityPositionRelative ? g.alpha * ((v.width || f.opacity.offsetWidth) - (v.childWidth || f.opacity_slider.offsetWidth)) + "px" : 100 * g.alpha + "%"),
                C.col1.cssText = "background-color: " + M(g.RND.rgb) + "; " + (d.muteAlpha ? "" : F(g.alpha));
                var ne = g.RND.rgb
                  , oe = "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAADklEQVQIW2NgQAXGZHAAGioAza6+Hk0AAAAASUVORK5CYII=)";
                for (a in $(f.opacity).css("background", oe + ",linear-gradient(to right, rgba(" + ne.r + "," + ne.g + "," + ne.b + ",0), rgb(" + ne.r + "," + ne.g + "," + ne.b + "))"),
                C.cold.width = O.hueDelta + "%",
                C.cont.width = O.luminanceDelta + "%",
                _)
                    s = a.split("_"),
                    d.cmyOnly && (s[0] = s[0].replace("k", "")),
                    l = s[1] ? g.RND[s[0]][s[1]] : g.RND[s[0]] || g[s[0]],
                    I[a] !== l && (I[a] = l,
                    _[a].data = l > 359.5 && "HEX" !== a ? 0 : l,
                    "HEX" === a || d.noRangeBackground || (l = g[s[0]][s[1]] !== t ? g[s[0]][s[1]] : g[s[0]],
                    "Lab" === s[0] && (l = (l - T[s[0]][s[1]][0]) / (T[s[0]][s[1]][1] - T[s[0]][s[1]][0])),
                    C[a].backgroundPosition = D.round(100 * (1 - l)) + "% 0%"));
                s = g._rgb ? [g._rgb.r !== g.rgb.r, g._rgb.g !== g.rgb.g, g._rgb.b !== g.rgb.b] : [],
                s.join("") !== I.outOfGammut && (f.rgb_r_labl.firstChild.data = s[0] ? "!" : " ",
                f.rgb_g_labl.firstChild.data = s[1] ? "!" : " ",
                f.rgb_b_labl.firstChild.data = s[2] ? "!" : " ",
                I.outOfGammut = s.join("")),
                O.noRGBZ && I.noRGBZ !== O.noRGBZ && (f.curl.className = m + "curl " + m + "curl-" + O.noRGBZ,
                te || (f.curr.className = m + "curr " + m + "curr-" + O.noRGBZ),
                I.noRGBZ = O.noRGBZ),
                I.HUEContrast !== O.HUEContrast && "h" === u.z ? (f.slds.className = f.slds.className.replace(/\s+hue-(?:dark|light)/, "") + " hue-" + O.HUEContrast,
                te || (f.curr.className = m + "curr " + m + "curr-" + O.HUEContrast),
                I.HUEContrast = O.HUEContrast) : I.RGBLuminance !== O.RGBLuminance && (f.colorPicker.className = f.colorPicker.className.replace(/\s+(?:dark|light)/, "") + " " + O.RGBLuminance,
                te || "h" === u.z || O.noRGBZ || (f.curr.className = m + "curr " + m + "curr-" + O.RGBLuminance),
                I.RGBLuminance = O.RGBLuminance),
                I.contrast === O.contrast && I.readabiltiy === O.readabiltiy || (f.ctrl.className = f.ctrl.className.replace(" contrast", "").replace(/\s*(?:orange|green)/, "") + (O.contrast ? " " + O.contrast : "") + (O.readabiltiy ? " " + O.readabiltiy : ""),
                I.contrast = O.contrast,
                I.readabiltiy = O.readabiltiy),
                I.saveColor !== g.saveColor && (f.HEX_labl.firstChild.data = g.saveColor ? "web save" === g.saveColor ? "W" : "M" : "!",
                I.saveColor = g.saveColor),
                d.renderCallback && d.renderCallback(g, u),
                i && (r = e[A](Q))
            }
            function J(e) {
                var t = {};
                for (var i in e)
                    t[i] = e[i];
                return t
            }
            function ee(e, t) {
                for (var i = "", n = (t || "rgb").split(""), o = n.length; o--; )
                    i = ", " + e[n[o]] + i;
                return (t || "rgb") + "(" + i.substr(2) + ")"
            }
            function te(e, t, i) {
                return e > i ? i : e < t ? t : e
            }
            function ie(e) {
                return e === t && (e = 1),
                u ? "opacity: " + k.round(1e10 * e) / 1e10 + ";" : "filter: alpha(opacity=" + k.round(100 * e) + ");"
            }
            function ne(t, i) {
                return t.preventDefault ? t.preventDefault() : t.returnValue = !1,
                i || (e.getSelection ? e.getSelection().removeAllRanges() : document.selection.empty()),
                !1
            }
            function oe(e, i, n) {
                return !!e && (e.className = n !== t ? e.className.replace(new RegExp("\\s+?" + i,"g"), n ? " " + n : "") : e.className + " " + i)
            }
            function re(t) {
                var i = t.getBoundingClientRect ? t.getBoundingClientRect() : {
                    top: 0,
                    left: 0
                }
                  , n = t && t.ownerDocument
                  , o = n.body
                  , r = n.defaultView || n.parentWindow || e
                  , a = n.documentElement || o.parentNode
                  , s = a.clientTop || o.clientTop || 0
                  , l = a.clientLeft || o.clientLeft || 0;
                return {
                    left: i.left + (r.pageXOffset || a.scrollLeft) - l,
                    top: i.top + (r.pageYOffset || a.scrollTop) - s
                }
            }
            function ae(t) {
                var i = e.document;
                return {
                    X: t.pageX || t.clientX + i.body.scrollLeft + i.documentElement.scrollLeft,
                    Y: t.pageY || t.clientY + i.body.scrollTop + i.documentElement.scrollTop
                }
            }
            function se(e, t, i) {
                se.cache = se.cache || {
                    _get: function(e, t, i, n) {
                        for (var o = se.cache[t] || [], r = o.length; r--; )
                            if (e === o[r].obj && "" + i === "" + o[r].func)
                                return i = o[r].func,
                                n || (o[r] = o[r].obj = o[r].func = null,
                                o.splice(r, 1)),
                                i
                    },
                    _set: function(e, t, i) {
                        var n = se.cache[t] = se.cache[t] || [];
                        if (se.cache._get(e, t, i, !0))
                            return !0;
                        n.push({
                            func: i,
                            obj: e
                        })
                    }
                },
                !i.name && se.cache._set(e, t, i) || "function" !== typeof i || (e.addEventListener ? e.addEventListener(t, i, !1) : e.attachEvent("on" + t, i))
            }
            function le(e, t, i) {
                "function" === typeof i && (i.name || (i = se.cache._get(e, t, i) || i),
                e.removeEventListener ? e.removeEventListener(t, i, !1) : e.detachEvent("on" + t, i))
            }
            function ce(i, n) {
                var o = {};
                if (n === t) {
                    if (e.getSelection)
                        if (i.focus(),
                        e.getSelection().rangeCount > 0) {
                            var r = e.getSelection().getRangeAt(0)
                              , a = r.cloneRange();
                            a.selectNodeContents(i),
                            a.setEnd(r.endContainer, r.endOffset),
                            o = {
                                end: a.toString().length,
                                range: r.toString().length
                            }
                        } else
                            o = {
                                start: 0,
                                end: $(i).text().length,
                                range: $(i).text().length
                            };
                    else {
                        i.focus();
                        r = document.selection.createRange(),
                        a = document.body.createTextRange();
                        a.moveToElementText(i),
                        a.setEndPoint("EndToEnd", r),
                        o = {
                            end: a.text.length,
                            range: r.text.length
                        }
                    }
                    return o.start = o.end - o.range,
                    o
                }
                if (-1 == n && (n = i["text"]().length),
                e.getSelection)
                    i.focus(),
                    e.getSelection().collapse(i.firstChild, n);
                else {
                    var s = document.body.createTextRange();
                    s.moveToElementText(i),
                    s.moveStart("character", n),
                    s.collapse(!0),
                    s.select()
                }
                return n
            }
            e.ColorPicker = O,
            O.addEvent = se,
            O.removeEvent = le,
            O.getOrigin = re,
            O.limitValue = te,
            O.changeClass = oe,
            O.prototype.setColor = function(e, t, i, n) {
                D(this),
                o = !0,
                Z(C.setColor.apply(C, arguments)),
                n && this.startRender(!0)
            }
            ,
            O.prototype.saveAsBackground = function() {
                return D(this),
                K(!0)
            }
            ,
            O.prototype.setCustomBackground = function(e) {
                return D(this),
                C.setCustomBackground(e)
            }
            ,
            O.prototype.startRender = function(t) {
                D(this),
                t ? (i = !1,
                Q(),
                this.stopRender()) : (i = 1,
                r = e[A](Q))
            }
            ,
            O.prototype.stopRender = function() {
                D(this),
                e[T](r),
                o && (i = 1,
                L(t, "external"))
            }
            ,
            O.prototype.setMode = function(e) {
                D(this),
                H(e),
                X(),
                Q()
            }
            ,
            O.prototype.destroyAll = function() {
                var e = this.nodes.colorPicker
                  , i = function(e) {
                    for (var t in e)
                        (e[t] && "[object Object]" === e[t].toString() || e[t]instanceof Array) && i(e[t]),
                        e[t] = null,
                        delete e[t]
                };
                this.stopRender(),
                j(this, !0),
                i(this),
                e.parentNode.removeChild(e),
                e = null,
                a = t
            }
            ,
            O.prototype.renderMemory = function(e) {
                var i = this.nodes.memos
                  , n = [];
                "string" === typeof e && (e = e.replace(/^'|'$/g, "").replace(/\s*/, "").split("','"));
                for (var o = i.length; o--; )
                    e && "string" === typeof e[o] && (n = e[o].replace("rgba(", "").replace(")", "").split(","),
                    e[o] = {
                        r: n[0],
                        g: n[1],
                        b: n[2],
                        a: n[3]
                    }),
                    i[o].style.cssText = "background-color: " + (e && e[o] !== t ? ee(e[o]) + ";" + ie(e[o]["a"] || 1) : "rgb(0,0,0);")
            }
            ,
            se(d ? document.body : e, "mouseup", L);
            for (var de = E.length; de-- && !e[A]; )
                e[A] = e[E[de] + "Request" + _],
                e[T] = e[E[de] + "Cancel" + _] || e[E[de] + "CancelRequest" + _];
            e[A] = e[A] || function(t) {
                return e.setTimeout(t, 1e3 / S.fps)
            }
            ,
            e[T] = e[T] || function(t) {
                return e.clearTimeout(t),
                r = null
            }
        }
        )(window)
    },
    d53b: function(e, t, i) {},
    d585: function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i, n) {
                e.showStoresApp = !1,
                t.$watch("user", ()=>{
                    e.refreshIcons()
                }
                ),
                e.refreshIcons = function() {
                    e.user && e.user.Stores && e.user.Stores.filter(e=>1 === e.Type || 3 === e.Type).length ? e.showStoresApp = !0 : e.showStoresApp = !1
                }
                ,
                e.logOut = function() {
                    const e = i.confirm().title("Logout").textContent("Do you want to logout?").ok("Yes").cancel("No");
                    i.show(e).then(()=>{
                        n.logout()
                    }
                    )
                }
            }
            e.$inject = ["$scope", "$rootScope", "$mdDialog", "AuthService"],
            angular.module("app.ctrls").controller("NavCtrl", e)
        }
        )()
    },
    d62e: function(e, t) {
        var i = '<md-dialog> <div> <style>.go-home-text{margin-top:15px;margin-bottom:15px;text-align:center;font-weight:700;font-size:13px;text-decoration:underline;cursor:pointer;display:inline-block}</style> <md-toolbar style="min-height:45px;height:45px"> <div class="md-toolbar-tools" style="background:linear-gradient(141deg,#849dd8 15%,#8bc4d3 75%)"> <div class="text-center w100"> <h2>Your template was created</h2> </div> </div> </md-toolbar> <md-dialog-content> <md-content class="md-padding" style="max-width:500px"> <div class="row" style="margin-right:15px;margin-left:15px"> <div class="w100" style="cursor:pointer" ng-click="copyTemplateId()"> Your template with id <b><u>{{ templateId }}</u></b> has been saved <md-tooltip md-direction="bottom" ng-show="showCopiedTooltip">Copied</md-tooltip> </div> <md-button class="md-raised md-primary m0 col-xs-12" style="margin-top:30px" ng-click="goToStore()" ng-if="anyShopifyStore">Connect it with Shopify Product</md-button> <md-button class="md-raised md-primary m0 col-xs-12" style="margin-top:15px" ng-click="goToStore()" ng-if="anyWooStore">Connect it with WooCommerce Product</md-button> <div class="clearfix"></div> <div class="w100 text-center" ng-if="anyShopifyStore || anyWooStore"> <div class="go-home-text" ng-click="goHome()">Create more templates</div> </div> <div class="w100 text-center mt15" ng-if="!anyShopifyStore && !anyWooStore"> <md-button class="md-raised md-primary m0" ng-click="goHome()">Done</md-button> </div> </div> </md-content> </md-dialog-content> </div> </md-dialog> ';
        e.exports = i
    },
    d635: function(e, t) {
        (function() {
            function e(e) {
                const t = "https://api.remove.bg/v1.0";
                function i(i) {
                    const n = {
                        method: "GET",
                        url: t + "/account",
                        contentType: "application/json; charset=utf-8",
                        headers: {
                            "X-Api-Key": i
                        },
                        dataType: "json",
                        cache: !1
                    };
                    return e.get(n, null, n)
                }
                function n(e, i) {
                    return new Promise(async(n,o)=>{
                        const r = new XMLHttpRequest
                          , a = new FormData;
                        a.append("image_file", i),
                        r.onreadystatechange = ()=>{
                            4 === r.readyState && (200 === r.status ? n(r.response) : o(r))
                        }
                        ,
                        r.open("POST", t + "/removebg"),
                        r.setRequestHeader("X-Api-Key", e),
                        r.responseType = "blob",
                        r.send(a)
                    }
                    )
                }
                return {
                    isValidAPIKey: i,
                    removeBackground: n
                }
            }
            e.$inject = ["HttpService"],
            angular.module("app.shared.services").factory("RemoveBgAPIService", e)
        }
        )()
    },
    d9e0: function(e, t) {
        var i = '<md-dialog aria-label="Mango (Fruit)"> <form name="resolutionForm"> <md-toolbar> <div class="md-toolbar-tools"> <h2>Image resolution</h2> <span flex></span> </div> </md-toolbar> <md-dialog-content style="max-width:800px;max-height:810px"> <md-content class="md-padding"> <p style="margin-bottom:30px"> We couldn\'t determine the image resolution, what resolution should we use? </p> <md-input-container class="md-block"> <label>Image resolution (PPI)</label> <input required type="number" step="any" name="resolution" ng-model="resolution" min="1" max="1200"/> <div ng-messages="resolutionForm.resolution.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">Please enter the resolution to use!</div> <div ng-message="min">That resolution is too small</div> <div ng-message="max">The maximum resolution is 1200 PPI</div> </div> </md-input-container> </md-content> </md-dialog-content> <md-dialog-actions layout="row"> <md-button ng-click="setResolution()"> Done </md-button> </md-dialog-actions> </form> </md-dialog> ';
        e.exports = i
    },
    da55: function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("2ef0");
        (function() {
            fabric.util.saveObjectTransform = function(e) {
                const t = "activeSelection" == e.type ? Object(n["cloneDeep"])(e.getObjects()) : null;
                return {
                    objects: t,
                    width: e.width,
                    height: e.height,
                    verticalDiameter: e.verticalDiameter,
                    horizontalDiameter: e.horizontalDiameter,
                    scaleX: e.scaleX,
                    scaleY: e.scaleY,
                    skewX: e.skewX,
                    skewY: e.skewY,
                    angle: e.angle,
                    left: e.left,
                    flipX: e.flipX,
                    flipY: e.flipY,
                    top: e.top
                }
            }
        }
        )()
    },
    dafb: function(e, t, i) {
        "use strict";
        i.r(t);
        const n = ()=>new Promise((e,t)=>{
            $.get("/").done(t=>{
                const i = new DOMParser
                  , n = i.parseFromString(t, "text/html")
                  , o = $(n.head).find('meta[name="version"]').first().attr("content") || ""
                  , r = $(document).find('meta[name="version"]').first().attr("content");
                e(o !== r ? {
                    isNewVersion: !0,
                    version: o
                } : {
                    isNewVersion: !1,
                    version: r
                })
            }
            ).fail(e=>{
                t(e)
            }
            )
        }
        );
        var o = i("4991")
          , r = i("0613")
          , a = i("0bad");
        (function() {
            function e(e, t, i, s, l) {
                l.user && (e.isManaged = !!l.user.User_Id),
                e.newAppVersionAvailable = !1,
                e.subscription = {
                    Status: "active"
                },
                e.undoManager = new a["a"],
                s(()=>{
                    n().then(t=>{
                        t.isNewVersion ? (console.log("New app version available: " + t.version),
                        e.newAppVersionAvailable = !0) : e.newAppVersionAvailable = !1,
                        i(()=>e.$apply())
                    }
                    ).catch(e=>{
                        console.error(e),
                        window.rumReportError(e)
                    }
                    )
                }
                , 6e5),
                r["a"].watch(e=>e.subscriptions, t=>{
                    e.subscription = t.filter(e=>"active" !== e.Status && "trialing" !== e.Status)[0],
                    i(()=>e.$apply())
                }
                ),
                r["a"].state.subscriptions && r["a"].state.subscriptions.length ? (e.subscription = subscriptions.filter(e=>"active" !== e.Status && "trialing" !== e.Status)[0],
                i(()=>e.$apply())) : Object(o["e"])().then(e=>{
                    r["a"].commit("subscriptions", e)
                }
                ).catch(e=>{
                    var t;
                    401 !== (null === (t = e.response) || void 0 === t ? void 0 : t.status) && window.rumReportError(e)
                }
                ),
                e.goToAccount = function(e) {
                    t.path("/account").search({
                        section: "billing",
                        store: e
                    })
                }
                ,
                e.refreshPage = function() {
                    location.reload()
                }
                ,
                e.onResizeBtnClick = function() {
                    l.$broadcast("template:resize-btn-click")
                }
            }
            e.$inject = ["$scope", "$location", "$timeout", "$interval", "$rootScope"],
            angular.module("app.ctrls").controller("HeadCtrl", e)
        }
        )()
    },
    db63: function(e, t) {
        angular.module("app.ctrls").directive("uploadFile", (function() {
            return {
                restrict: "A",
                scope: {
                    inputId: "@"
                },
                controller: ["$scope", "$element", function(e, t) {
                    t.bind("click", (function(t) {
                        document.getElementById(e.inputId).click()
                    }
                    ))
                }
                ]
            }
        }
        ))
    },
    dc45: function(e, t, i) {
        "use strict";
        i("7189")
    },
    dc89: function(t, i, n) {
        "use strict";
        n.r(i);
        var o = n("2b0e")
          , r = n("8c4f")
          , a = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-container", [i("b-row", {
                staticClass: "header",
                attrs: {
                    "align-h": "center"
                }
            }, [i("b-col", {
                staticClass: "text-center",
                attrs: {
                    cols: "10"
                }
            }, [i("p", [e._v("Administration Center")])])], 1), i("b-row", [i("b-card-group", {
                attrs: {
                    deck: ""
                }
            }, [i("b-card", {
                attrs: {
                    title: "Users"
                },
                scopedSlots: e._u([{
                    key: "footer",
                    fn: function() {
                        return [i("b-button", {
                            staticClass: "float-right",
                            attrs: {
                                to: "/admin/users",
                                variant: "primary"
                            }
                        }, [e._v("Manage Users")])]
                    },
                    proxy: !0
                }])
            }, [i("b-card-text", [e._v(" Manage Customily users ")])], 1), i("b-card", {
                attrs: {
                    title: "Reports"
                },
                scopedSlots: e._u([{
                    key: "footer",
                    fn: function() {
                        return [i("LoaderBtn", {
                            staticClass: "float-right",
                            attrs: {
                                variant: "primary",
                                loading: e.generatingReport,
                                loadingText: "Generating"
                            },
                            on: {
                                click: function(t) {
                                    return e.downloadReport()
                                }
                            }
                        }, [e._v("Download Reports ")])]
                    },
                    proxy: !0
                }])
            }, [i("b-card-text", [e._v(" Get Stores Report ")])], 1)], 1)], 1), i("b-row", {
                staticClass: "mt-3"
            }, [i("b-card-group", {
                attrs: {
                    deck: ""
                }
            }, [i("b-card", {
                attrs: {
                    title: "Template Products"
                },
                scopedSlots: e._u([{
                    key: "footer",
                    fn: function() {
                        return [i("b-button", {
                            staticClass: "float-right",
                            attrs: {
                                to: "/admin/templateProducts",
                                variant: "primary"
                            }
                        }, [e._v(" Manage Products")])]
                    },
                    proxy: !0
                }])
            }, [i("b-card-text", [e._v(" Template Products for fulfillment services ")])], 1), i("b-card", {
                attrs: {
                    title: "Designs"
                },
                scopedSlots: e._u([{
                    key: "footer",
                    fn: function() {
                        return [i("b-button", {
                            staticClass: "float-right",
                            attrs: {
                                to: "/admin/designs",
                                variant: "primary"
                            }
                        }, [e._v(" Manage Designs")])]
                    },
                    proxy: !0
                }])
            }, [i("b-card-text", [e._v(" Create and edit designs for fulfillment services ")])], 1)], 1)], 1)], 1)
        }
          , s = []
          , l = (n("13d5"),
        n("9ab4"))
          , c = n("2fe1")
          , d = n("4af8")
          , u = n("5f5b")
          , p = n("406d");
        const h = async()=>{
            const e = await p["a"].get("/Admin/Stats/Stores");
            return e.data
        }
        ;
        o["default"].use(u["b"]);
        let m = class extends o["default"] {
            constructor() {
                super(...arguments),
                this.currentPage = "account",
                this.generatingReport = !1
            }
            get breadcrumbItems() {
                const e = this.$route.path.split("/");
                if (e.shift(),
                e.length && e[0] && this.$route.matched.length) {
                    const t = e.reduce((e,t,i)=>{
                        var n;
                        return null !== (n = this.$route.matched[i]) && void 0 !== n && n.name && e.push({
                            path: t,
                            to: e[i - 1] ? "/" + e[i - 1].path + "/" + t : "/" + t,
                            text: this.$route.matched[i].name || t
                        }),
                        e
                    }
                    , []);
                    return t
                }
                return []
            }
            async downloadReport() {
                try {
                    this.generatingReport = !0;
                    const e = await h();
                    window.open(e.Url, "_blank")
                } finally {
                    this.generatingReport = !1
                }
            }
        }
        ;
        m = Object(l["b"])([Object(c["b"])({
            name: "AdminPanel",
            components: {
                LoaderBtn: d["a"]
            }
        })], m);
        var g = m
          , f = g
          , v = n("2877")
          , b = Object(v["a"])(f, a, s, !1, null, "032b33ce", null)
          , y = b.exports
          , w = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "w-100"
            }, [i("div", {
                staticClass: "d-flex justify-content-between w-100"
            }, [i("div", [i("b-btn", {
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: e.createTemplateProduct
                }
            }, [e._v("Create template product")])], 1), i("div", {
                staticClass: "d-flex"
            }, [i("b-pagination", {
                attrs: {
                    size: "md",
                    disabled: e.loading,
                    "total-rows": e.totalCount,
                    "per-page": e.itemsPerPage
                },
                model: {
                    value: e.currentPage,
                    callback: function(t) {
                        e.currentPage = t
                    },
                    expression: "currentPage"
                }
            }), i("b-form-input", {
                staticClass: "mb-3 ml-3",
                staticStyle: {
                    width: "unset"
                },
                attrs: {
                    type: "text",
                    debounce: "400",
                    placeholder: "Search",
                    disabled: e.loading
                },
                model: {
                    value: e.searchString,
                    callback: function(t) {
                        e.searchString = t
                    },
                    expression: "searchString"
                }
            })], 1)]), i("b-table", {
                staticClass: "w-100 table",
                staticStyle: {
                    "white-space": "pre-line"
                },
                attrs: {
                    striped: "",
                    hover: "",
                    items: e.tableItems,
                    fields: e.tableFields,
                    responsive: "sm",
                    busy: e.loading,
                    "show-empty": "",
                    "empty-text": "No template products",
                    "empty-filtered-text": "No template products matching your search"
                },
                scopedSlots: e._u([{
                    key: "table-busy",
                    fn: function() {
                        return [i("div", {
                            staticClass: "align-items-center d-flex justify-content-center my-2 text-center my-2"
                        }, [i("b-spinner", {
                            attrs: {
                                variant: "primary"
                            }
                        }), i("strong", {
                            staticClass: "ml-3 primary-text"
                        }, [e._v("Loading...")])], 1)]
                    },
                    proxy: !0
                }, {
                    key: "cell(name)",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "text-with-overflow",
                            attrs: {
                                title: t.item.name
                            }
                        }, [e._v(e._s(t.item.name))]), i("b", [e._v(e._s(t.item.id))])]
                    }
                }, {
                    key: "cell(image)",
                    fn: function(e) {
                        return [i("b-img", {
                            attrs: {
                                thumbnail: "",
                                src: e.item.thumbnailPath,
                                height: "50"
                            }
                        })]
                    }
                }, {
                    key: "cell(createdDate)",
                    fn: function(t) {
                        return [i("div", [e._v(e._s(e._f("date")(t.item.createdDate)))])]
                    }
                }, {
                    key: "cell(placeholder)",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "text-capitalize"
                        }, [e._v(e._s(t.item.placeholder || "None"))])]
                    }
                }, {
                    key: "cell(printProvider)",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "text-capitalize"
                        }, [e._v(" " + e._s(e.printProviderNames[t.item.printProvider + "_" + t.item.podProductId] || t.item.printProvider || "None") + " ")])]
                    }
                }, {
                    key: "cell(pod)",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "text-capitalize"
                        }, [e._v(e._s(t.item.pod || "None"))])]
                    }
                }, {
                    key: "cell(status)",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "text-center"
                        }, [t.item.linked ? i("i", {
                            staticClass: "fa fa-check-circle primary-text",
                            staticStyle: {
                                "font-size": "20px"
                            }
                        }) : e._e()])]
                    }
                }, {
                    key: "cell(actions)",
                    fn: function(t) {
                        var n = t.item;
                        return [i("LoaderBtn", {
                            attrs: {
                                variant: "primary",
                                disabled: e.processing
                            },
                            on: {
                                click: function(t) {
                                    return e.editTemplateProduct(n)
                                }
                            }
                        }, [e._v(" Edit ")]), e.isLinkeableTemplateProduct(n.pod, n.linked, n.parentId) ? i("LoaderBtn", {
                            staticClass: "mx-3",
                            attrs: {
                                variant: "primary",
                                disabled: e.processing
                            },
                            on: {
                                click: function(t) {
                                    return e.linkTemplateProduct(n)
                                }
                            }
                        }, [e._v(" Link ")]) : e._e(), i("ConfirmationBtn", {
                            class: {
                                "ml-3": !e.isLinkeableTemplateProduct(n.pod, n.linked, n.parentId)
                            },
                            attrs: {
                                modalTitle: "Delete template product",
                                loadingText: "Deleting",
                                disabled: e.processing
                            },
                            on: {
                                confirm: function(t) {
                                    return e.deleteTemplateProduct(n)
                                }
                            },
                            scopedSlots: e._u([{
                                key: "modal-content",
                                fn: function() {
                                    return [e._v(" Do you want to delete template product "), i("b", [e._v(e._s(n.name))]), e._v("? ")]
                                },
                                proxy: !0
                            }], null, !0),
                            model: {
                                value: e.processing,
                                callback: function(t) {
                                    e.processing = t
                                },
                                expression: "processing"
                            }
                        }, [e._v(" Delete ")])]
                    }
                }])
            }), e.selectedTemplateProduct ? i("template-product-pod-assigner-modal", {
                attrs: {
                    "template-product-id": e.selectedTemplateProduct.id,
                    "pod-provider": e.selectedTemplateProduct.pod
                },
                on: {
                    save: e.onLinkedTemplateProduct
                },
                model: {
                    value: e.showLinkTemplateProductModal,
                    callback: function(t) {
                        e.showLinkTemplateProductModal = t
                    },
                    expression: "showLinkTemplateProductModal"
                }
            }) : e._e()], 1)
        }
          , C = []
          , x = n("a528")
          , S = n("9bed")
          , P = n("1d61")
          , k = n("94ac")
          , _ = n("847f")
          , A = n("c46f")
          , T = n("60a3")
          , E = n("4bb5")
          , O = n("6b48");
        let I = class extends T["d"] {
            constructor() {
                super(...arguments),
                this.tableFields = [{
                    key: "image"
                }, {
                    key: "name",
                    label: "Name"
                }, {
                    key: "printProvider",
                    label: "Print Provider"
                }, {
                    key: "placeholder",
                    label: "Placeholder"
                }, {
                    key: "Pod",
                    label: "Service"
                }, {
                    key: "createdDate",
                    label: "Created"
                }, {
                    key: "actions",
                    label: ""
                }, {
                    key: "status",
                    label: "Status"
                }],
                this.itemsPerPage = 10,
                this.loading = !0,
                this.processing = !1,
                this.tableItems = [],
                this.currentPage = 1,
                this.from = 0,
                this.count = 0,
                this.totalCount = 0,
                this.searchString = "",
                this.selectedTemplateProduct = null,
                this.showLinkTemplateProductModal = !1,
                this.printProviderNames = {},
                this.loadingProvidersPromise = null,
                this.storesWithProviders = {
                    Printful: [],
                    Printify: []
                }
            }
            get isLinkeableTemplateProduct() {
                return (e,t,i)=>!t && !i && [O["a"].GEARMENT, O["a"].GELATO, O["a"].CASESTRY, O["a"].GEARLAUNCH, O["a"].SHINEON].includes(e.toLowerCase())
            }
            onPageChange() {
                this.loadTemplateProducts()
            }
            onUserChange() {
                this.loadingProvidersPromise = this.updateStoresWithProviders()
            }
            async created() {
                this.loadingProvidersPromise = this.updateStoresWithProviders(),
                this.loadTemplateProducts()
            }
            async updateStoresWithProviders() {
                const e = [];
                if (this.user)
                    for (const t of this.user.Stores)
                        e.push((async()=>{
                            try {
                                const e = await Object(P["a"])(t.Url);
                                e.printful.apiKey && this.storesWithProviders["Printful"].push(t.Url),
                                e.printify.apiKey && this.storesWithProviders["Printify"].push(t.Url)
                            } catch (error) {
                                console.warn("Couldn't read settings from store " + t.Url, error)
                            }
                        }
                        )());
                await Promise.all(e)
            }
            async updatePodNames(e) {
                this.loadingProvidersPromise && await this.loadingProvidersPromise;
                const t = Object(A["uniq"])(e.filter(e=>e.podService === O["a"].PRINTIFY).map(e=>({
                    service: e.podService,
                    printProviderId: e.printProvider,
                    productId: e.podProductId
                })), e=>`${e.printProviderId}-${e.productId}`)
                  , i = [];
                for (const n of t)
                    i.push((async()=>{
                        var e;
                        if (n.printProviderId && n.productId && !this.printProviderNames[`${n.printProviderId}_${n.productId}`] && null !== (e = this.storesWithProviders["Printful"]) && void 0 !== e && e.length) {
                            const e = await Object(S["d"])(Number(n.productId), this.storesWithProviders["Printful"][0])
                              , t = e.find(e=>e.id === Number(n.printProviderId));
                            t && T["d"].set(this.printProviderNames, `${n.printProviderId}_${n.productId}`, t.title)
                        }
                    }
                    )());
                await Promise.all(i)
            }
            async loadTemplateProducts() {
                this.loading = !0;
                try {
                    const e = await Object(x["g"])((this.currentPage - 1) * this.itemsPerPage, this.itemsPerPage, this.searchString);
                    this.totalCount = e.totalCount,
                    this.tableItems = e.templateProducts,
                    await this.updatePodNames(e.templateProducts)
                } finally {
                    this.loading = !1
                }
            }
            editTemplateProduct(e) {
                location.href = "/createProduct1?" + new URLSearchParams({
                    templateId: e.id,
                    forProductTemplateCreation: "true"
                })
            }
            async linkTemplateProduct(e) {
                this.selectedTemplateProduct = e,
                this.showLinkTemplateProductModal = !0
            }
            async onLinkedTemplateProduct() {
                this.showLinkTemplateProductModal = !1,
                this.selectedTemplateProduct = null,
                await this.loadTemplateProducts()
            }
            async cloneTemplateProduct(e) {
                await Object(x["a"])(e.id),
                await this.loadTemplateProducts()
            }
            async deleteTemplateProduct(e) {
                await Object(x["b"])(e.id),
                await this.loadTemplateProducts()
            }
            createTemplateProduct() {
                location.href = "/createProduct1?" + new URLSearchParams({
                    forProductTemplateCreation: "true"
                })
            }
        }
        ;
        Object(l["b"])([Object(E["b"])("user")], I.prototype, "user", void 0),
        Object(l["b"])([Object(T["e"])("currentPage"), Object(T["e"])("searchString")], I.prototype, "onPageChange", null),
        Object(l["b"])([Object(T["e"])("user")], I.prototype, "onUserChange", null),
        I = Object(l["b"])([Object(T["a"])({
            name: "TemplateProductsView",
            components: {
                LoaderBtn: d["a"],
                ConfirmationBtn: k["a"],
                TemplateProductPodAssignerModal: _["a"]
            }
        })], I);
        var D = I
          , F = D
          , M = Object(v["a"])(F, w, C, !1, null, null, null)
          , $ = M.exports
          , B = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "w-100"
            }, [i("b-modal", {
                attrs: {
                    size: "lg",
                    title: "Publish design",
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    "hide-footer": ""
                },
                model: {
                    value: e.showCreateDesignDialog,
                    callback: function(t) {
                        e.showCreateDesignDialog = t
                    },
                    expression: "showCreateDesignDialog"
                }
            }, [i("DesignCreator", {
                on: {
                    saved: e.onDesignSaved
                }
            })], 1), i("b-tabs", {
                staticClass: "h-100 pb-3",
                attrs: {
                    "content-class": "mt-3 tabs-content",
                    "active-tab-class": "h-100"
                }
            }, [i("b-tab", {
                attrs: {
                    title: "Templates"
                }
            }, [i("div", {
                staticClass: "d-flex justify-content-between w-100"
            }, [i("div", [i("b-btn", {
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: e.createDesignTemplate
                }
            }, [e._v("Create design template")]), i("b-btn", {
                staticClass: "ml-3",
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: e.publishNewDesign
                }
            }, [e._v("Publish design")])], 1), i("div", {
                staticClass: "d-flex"
            }, [i("b-pagination", {
                attrs: {
                    size: "md",
                    disabled: e.loading,
                    "total-rows": e.totalCount,
                    "per-page": e.itemsPerPage
                },
                model: {
                    value: e.currentPage,
                    callback: function(t) {
                        e.currentPage = t
                    },
                    expression: "currentPage"
                }
            }), i("b-form-input", {
                staticClass: "mb-3 ml-3",
                staticStyle: {
                    width: "unset"
                },
                attrs: {
                    type: "text",
                    debounce: "400",
                    placeholder: "Search",
                    disabled: e.loading
                },
                model: {
                    value: e.searchString,
                    callback: function(t) {
                        e.searchString = t
                    },
                    expression: "searchString"
                }
            })], 1)]), i("b-table", {
                staticClass: "w-100 table",
                staticStyle: {
                    "white-space": "pre-line"
                },
                attrs: {
                    striped: "",
                    hover: "",
                    items: e.tableItems,
                    fields: e.tableFields,
                    responsive: "sm",
                    busy: e.loading || e.renamingDesignTemplate,
                    "show-empty": "",
                    "empty-text": "No design templates",
                    "empty-filtered-text": "No design templates matching your search"
                },
                scopedSlots: e._u([{
                    key: "table-busy",
                    fn: function() {
                        return [i("div", {
                            staticClass: "align-items-center d-flex justify-content-center my-2 text-center my-2"
                        }, [i("b-spinner", {
                            attrs: {
                                variant: "primary"
                            }
                        }), i("strong", {
                            staticClass: "ml-3 primary-text"
                        }, [e._v("Loading...")])], 1)]
                    },
                    proxy: !0
                }, {
                    key: "cell(name)",
                    fn: function(t) {
                        return [i("EditableText", {
                            ref: "designTemplateName-" + t.index,
                            staticClass: "text-with-overflow",
                            on: {
                                change: function(i) {
                                    return e.onNameChange(t.item)
                                }
                            },
                            model: {
                                value: t.item.name,
                                callback: function(i) {
                                    e.$set(t.item, "name", i)
                                },
                                expression: "data.item.name"
                            }
                        }), i("b", {
                            staticClass: "text-with-overflow"
                        }, [e._v(e._s(t.item.id))])]
                    }
                }, {
                    key: "cell(image)",
                    fn: function(e) {
                        return [i("b-img", {
                            attrs: {
                                thumbnail: "",
                                src: e.item.thumbnailPath,
                                height: "50"
                            }
                        })]
                    }
                }, {
                    key: "cell(edit-button)",
                    fn: function(t) {
                        return [i("b-btn", {
                            attrs: {
                                variant: "primary",
                                disabled: e.processing
                            },
                            on: {
                                click: function(i) {
                                    return e.editDesignTemplate(t.item)
                                }
                            }
                        }, [e._v(" Edit ")])]
                    }
                }, {
                    key: "cell(clone-button)",
                    fn: function(t) {
                        return [i("LoaderBtn", {
                            attrs: {
                                variant: "primary",
                                loadingText: "Cloning",
                                disabled: e.processing
                            },
                            on: {
                                click: function(i) {
                                    return i.stopPropagation(),
                                    e.cloneDesignTemplate(t.item)
                                }
                            },
                            model: {
                                value: e.processing,
                                callback: function(t) {
                                    e.processing = t
                                },
                                expression: "processing"
                            }
                        }, [e._v("Clone ")])]
                    }
                }, {
                    key: "cell(delete-button)",
                    fn: function(t) {
                        return [i("ConfirmationBtn", {
                            attrs: {
                                modalTitle: "Delete design template",
                                loadingText: "Deleting",
                                disabled: e.processing
                            },
                            on: {
                                confirm: function(i) {
                                    return e.deleteDesignTemplate(t.item)
                                }
                            },
                            scopedSlots: e._u([{
                                key: "modal-content",
                                fn: function() {
                                    return [e._v(" Do you want to delete design template "), i("b", [e._v(e._s(t.item.name))]), e._v("? ")]
                                },
                                proxy: !0
                            }], null, !0),
                            model: {
                                value: e.processing,
                                callback: function(t) {
                                    e.processing = t
                                },
                                expression: "processing"
                            }
                        }, [e._v(" Delete ")])]
                    }
                }, {
                    key: "cell(createdDate)",
                    fn: function(t) {
                        return [i("div", [e._v(e._s(e._f("date")(t.item.createdDate)))])]
                    }
                }, {
                    key: "cell(modifiedDate)",
                    fn: function(t) {
                        return [i("div", [e._v(e._s(e._f("date")(t.item.modifiedDate)))])]
                    }
                }, {
                    key: "cell(status)",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "text-center"
                        }, [t.item.linked ? i("i", {
                            staticClass: "fa fa-check-circle primary-text",
                            staticStyle: {
                                "font-size": "20px"
                            }
                        }) : e._e()])]
                    }
                }])
            })], 1), i("b-tab", {
                attrs: {
                    title: "Published Designs"
                }
            }, [i("DesignsView", {
                ref: "designsView",
                on: {
                    saved: e.onDesignEdited,
                    deleted: function(t) {
                        return e.loadDesignTemplates()
                    }
                }
            })], 1), i("b-tab", {
                attrs: {
                    title: "Options Set"
                }
            }, [i("iframe", {
                ref: "setsIframe",
                staticClass: "h-100 w-100 border-0",
                attrs: {
                    src: e.iFrameOptionsSetUrl
                }
            })])], 1)], 1)
        }
          , j = []
          , L = n("b961")
          , R = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "w-100"
            }, [e.loadingDesign ? i("div", {
                staticClass: "align-items-center d-flex justify-content-center my-2 text-center my-2"
            }, [i("b-spinner", {
                attrs: {
                    variant: "primary"
                }
            }), i("strong", {
                staticClass: "ml-3 primary-text"
            }, [e._v("Loading design...")])], 1) : i("div", ["selectDesignTemplates" === e.step ? i("div", [i("MultiSelectTable", {
                staticClass: "design-templates-table",
                attrs: {
                    itemsPerPage: 5,
                    totalCount: e.totalDesignsCount,
                    loading: e.loadingDesignsList,
                    items: e.designs,
                    title: "Select one or more design templates",
                    fields: e.designTemplatesTableFields,
                    doneButtonText: "Next",
                    requiredSelectedItems: "1"
                },
                on: {
                    search: e.onSearch,
                    "selection-finished": function(t) {
                        return e.goToOptionSetSelection()
                    }
                },
                scopedSlots: e._u([{
                    key: "cell(name)",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "mb-1 text-with-overflow",
                            attrs: {
                                title: t.item.name
                            }
                        }, [e._v(e._s(t.item.name))]), i("b", [e._v(e._s(t.item.id))])]
                    }
                }, {
                    key: "cell(image)",
                    fn: function(e) {
                        return [i("b-img", {
                            staticStyle: {
                                "min-width": "50px",
                                width: "50px"
                            },
                            attrs: {
                                thumbnail: "",
                                src: e.item.thumbnailPath
                            }
                        })]
                    }
                }, {
                    key: "cell(createdDate)",
                    fn: function(t) {
                        return [i("div", [e._v(e._s(e._f("date")(t.item.createdDate)))])]
                    }
                }, {
                    key: "cell(modifiedDate)",
                    fn: function(t) {
                        return [i("div", [e._v(e._s(e._f("date")(t.item.modifiedDate)))])]
                    }
                }], null, !1, 1968272029),
                model: {
                    value: e.selectedDesignTemplateIds,
                    callback: function(t) {
                        e.selectedDesignTemplateIds = t
                    },
                    expression: "selectedDesignTemplateIds"
                }
            })], 1) : "selectOptionSet" === e.step ? i("div", [e.selectedDesignTemplates.length ? i("div", [i("div", {
                staticClass: "mb-3"
            }, [e.loadingSelectedSet ? i("div", {
                staticClass: "align-items-center d-flex my-2 text-center my-2"
            }, [i("b-spinner", {
                attrs: {
                    variant: "primary"
                }
            }), i("strong", {
                staticClass: "ml-3 primary-text"
            }, [e._v("Loading...")])], 1) : e.selectedSet ? i("div", [i("div", [e._v("Selected set: "), i("b", [e._v(e._s(e.selectedSet.title))])])]) : i("div", [e._v(" No set selected ")])]), i("b-tabs", {
                attrs: {
                    card: "",
                    "content-class": "mt-3"
                }
            }, [i("b-tab", {
                staticClass: "p-0",
                attrs: {
                    title: "Select set"
                }
            }, [i("SetsViewer", {
                attrs: {
                    singleSelect: !0,
                    forDesignTemplate: !0
                },
                model: {
                    value: e.selectedSetsIds,
                    callback: function(t) {
                        e.selectedSetsIds = t
                    },
                    expression: "selectedSetsIds"
                }
            })], 1), i("b-tab", {
                staticClass: "p-0",
                attrs: {
                    title: "Create set"
                }
            }, [e.selectedDesignTemplates.length ? e.designTemplateForSetGeneration ? i("div", {
                staticClass: "w-100 text-center"
            }, [i("div", [e._v("Create an option set from the design template:")]), e.largestDesignTemplate ? i("b", {
                staticClass: "d-block mt-3"
            }, [e._v(e._s(e.largestDesignTemplate.name))]) : e._e(), e.largestDesignTemplate ? i("b", {
                staticClass: "d-block"
            }, [e._v(e._s(e.largestDesignTemplate.id))]) : e._e(), i("div", {
                staticClass: "w-100 mt-3"
            }, [i("b-form-group", {
                attrs: {
                    label: "Select another design template if needed"
                }
            }, [i("b-form-select", {
                model: {
                    value: e.designTemplateForSetGeneration,
                    callback: function(t) {
                        e.designTemplateForSetGeneration = t
                    },
                    expression: "designTemplateForSetGeneration"
                }
            }, e._l(e.selectedDesignTemplates, (function(t) {
                return i("b-form-select-option", {
                    key: t.id,
                    attrs: {
                        value: t
                    }
                }, [e._v(e._s(t.name) + " (" + e._s(t.id) + ") ")])
            }
            )), 1)], 1), i("LoaderBtn", {
                staticClass: "mt-3",
                staticStyle: {
                    "white-space": "break-spaces"
                },
                attrs: {
                    variant: e.setGenerationProgress > -1 ? "primary" : "danger",
                    loadingText: e.setGenerationProgress > -1 ? "Generating set " + e.setGenerationProgress + "%..." : "Error generating set"
                },
                on: {
                    click: function(t) {
                        return e.generateOptionSetAndGoToNextStep(e.designTemplateForSetGeneration)
                    }
                }
            }, [e._v('Create Option Set for "' + e._s(e.designTemplateForSetGeneration.name) + '"')])], 1)]) : e._e() : i("div", {
                staticClass: "align-items-center d-flex justify-content-center my-2 text-center my-2"
            }, [i("b-spinner", {
                attrs: {
                    variant: "primary"
                }
            }), i("strong", {
                staticClass: "ml-3 primary-text"
            }, [e._v("Checking templates...")])], 1)])], 1)], 1) : i("div", {
                staticClass: "align-items-center d-flex justify-content-center my-2 text-center my-2"
            }, [i("b-spinner", {
                attrs: {
                    variant: "primary"
                }
            }), i("strong", {
                staticClass: "ml-3 primary-text"
            }, [e._v("Checking templates...")])], 1), i("b-btn", {
                staticClass: "float-right mr-3 mt-3",
                attrs: {
                    variant: "primary",
                    disabled: e.selectedSetsIds.length < 1
                },
                on: {
                    click: function(t) {
                        e.step = "designDetails"
                    }
                }
            }, [e._v("Next ")])], 1) : "designDetails" === e.step ? i("div", [i("ValidationObserver", {
                scopedSlots: e._u([{
                    key: "default",
                    fn: function(t) {
                        var n = t.handleSubmit
                          , o = t.valid;
                        return [i("b-form", {
                            on: {
                                submit: function(t) {
                                    return t.stopPropagation(),
                                    t.preventDefault(),
                                    n(e.handleDesignSubmit)
                                }
                            }
                        }, [i("div", {
                            staticClass: "row mb-3"
                        }, [i("div", {
                            staticClass: "col-6"
                        }, [i("ValidationProvider", {
                            attrs: {
                                rules: "required",
                                name: "Design Name"
                            },
                            scopedSlots: e._u([{
                                key: "default",
                                fn: function(t) {
                                    var n = t.valid
                                      , o = t.errors;
                                    return [i("b-form-group", {
                                        attrs: {
                                            id: "design-name-input",
                                            label: "Design Name",
                                            "label-for": "design-name-input",
                                            state: !o[0] && (!!n || null)
                                        }
                                    }, [i("b-form-input", {
                                        attrs: {
                                            state: !o[0] && (!!n || null),
                                            disabled: e.savingDesign
                                        },
                                        model: {
                                            value: e.design.title,
                                            callback: function(t) {
                                                e.$set(e.design, "title", t)
                                            },
                                            expression: "design.title"
                                        }
                                    })], 1)]
                                }
                            }], null, !0)
                        }), i("b-form-group", {
                            attrs: {
                                id: "design-subtitle-input",
                                label: "Design Subtitle",
                                "label-for": "design-subtitle-input"
                            }
                        }, [i("b-form-input", {
                            attrs: {
                                disabled: e.savingDesign
                            },
                            model: {
                                value: e.design.subtitle,
                                callback: function(t) {
                                    e.$set(e.design, "subtitle", t)
                                },
                                expression: "design.subtitle"
                            }
                        })], 1), i("b-form-group", {
                            attrs: {
                                label: "Categories"
                            }
                        }, [i("v-select", {
                            attrs: {
                                taggable: "",
                                multiple: "",
                                "push-tags": "",
                                label: "description",
                                options: e.categories,
                                reduce: function(e) {
                                    return e.id
                                },
                                "create-option": e.addCategory,
                                "close-on-select": !1,
                                disabled: e.savingDesign
                            },
                            on: {
                                "option:created": e.onCategoryCreated,
                                "option:deselected": e.onCateogryRemoved
                            },
                            model: {
                                value: e.selectedCategories,
                                callback: function(t) {
                                    e.selectedCategories = t
                                },
                                expression: "selectedCategories"
                            }
                        })], 1)], 1), i("div", {
                            staticClass: "col-6"
                        }, [i("b-img", {
                            attrs: {
                                thumbnail: "",
                                src: e.designUrl,
                                fluid: "",
                                alt: "Design image"
                            }
                        })], 1)]), i("LoaderBtn", {
                            staticClass: "float-right",
                            attrs: {
                                type: "submit",
                                variant: e.savingError ? "danger" : "primary",
                                loadingText: "Saving...",
                                loading: e.savingDesign,
                                disabled: !o || e.savingDesign
                            }
                        }, [e._v(" Publish design ")]), i("div", {
                            directives: [{
                                name: "show",
                                rawName: "v-show",
                                value: e.savingError,
                                expression: "savingError"
                            }],
                            staticClass: "error-message"
                        }, [e._v(e._s(e.savingError))])], 1)]
                    }
                }])
            })], 1) : "finalization" === e.step ? i("div", [i("div", {
                staticClass: "text-center w-100"
            }, [e._v(" Saved design "), i("b", [e._v(e._s(e.design.title))])]), i("b-btn", {
                staticClass: "float-right mt-3",
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.onDone()
                    }
                }
            }, [e._v("Done")])], 1) : e._e()])])
        }
          , U = []
          , z = n("555b")
          , N = n("3af5");
        const V = async(e,t)=>{
            const i = await N["a"].get("optionsets/private/" + e, {
                params: {
                    includeOptions: t
                }
            });
            return i.data
        }
          , G = async(e,t,i,n=!1,o)=>{
            const r = await N["a"].get("optionsets", {
                params: {
                    searchString: e,
                    from: t,
                    count: i,
                    shop: o,
                    forDesignTemplate: n
                }
            });
            return r.data
        }
          , W = async(e,t=!1,i)=>{
            const n = await N["a"].get("optionsets/count", {
                params: {
                    searchString: e,
                    shop: i,
                    forDesignTemplate: t
                }
            });
            return n.data
        }
          , H = async e=>{
            const t = await N["a"].get("optionsets/progress/" + e);
            return t.data.progress
        }
        ;
        var X = n("b421")
          , Y = n("7bb1")
          , q = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-form-group", {
                attrs: {
                    label: e.uploadingImage ? "" : e.label,
                    state: e.state
                }
            }, [e.uploadingImage ? i("div", {
                staticClass: "text-center"
            }, [i("strong", {
                staticClass: "primary-text"
            }, [e._v("Uploading image...")]), i("b-progress", {
                staticClass: "w-100 mt-3",
                attrs: {
                    value: e.uploadProgress,
                    variant: "primary"
                }
            })], 1) : e._e(), i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.uploadingImage,
                    expression: "!uploadingImage"
                }]
            }, [i("b-form-file", {
                attrs: {
                    variant: "primary",
                    accept: ".png,.jpg,.jpeg",
                    state: e.state,
                    placeholder: "Main design image",
                    "drop-placeholder": "Drop image here..."
                },
                on: {
                    change: e.onFileChange
                }
            })], 1)])
        }
          , K = []
          , Z = n("576f");
        let Q = class extends T["d"] {
            constructor() {
                super(...arguments),
                this.uploadingImage = !1,
                this.uploadProgress = 0
            }
            async onFileChange(e) {
                try {
                    if (this.uploadingImage = !0,
                    this.uploadProgress = 1,
                    e.target) {
                        var t;
                        const i = null === (t = e.target.files) || void 0 === t ? void 0 : t[0];
                        if (i) {
                            const e = await Object(Z["d"])(this.uploadType, i, e=>{
                                this.uploadProgress = e
                            }
                            );
                            this.$emit("uploaded", {
                                file: i,
                                path: e.Path,
                                name: e.Name
                            })
                        }
                        this.$emit("change", e)
                    }
                } finally {
                    this.uploadingImage = !1
                }
            }
        }
        ;
        Object(l["b"])([Object(T["c"])({
            default: "Image upload"
        })], Q.prototype, "label", void 0),
        Object(l["b"])([Object(T["c"])({
            required: !0
        })], Q.prototype, "uploadType", void 0),
        Object(l["b"])([Object(T["c"])({
            default: null
        })], Q.prototype, "state", void 0),
        Q = Object(l["b"])([Object(T["a"])({
            name: "ImageUploader"
        })], Q);
        var J = Q
          , ee = J
          , te = Object(v["a"])(ee, q, K, !1, null, null, null)
          , ie = te.exports
          , ne = n("4811")
          , oe = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-container", {
                staticClass: "col-max-width",
                attrs: {
                    fluid: ""
                }
            }, [i("b-row", [i("b-col", [i("b-form", {
                staticStyle: {
                    "justify-content": "flex-end"
                },
                attrs: {
                    inline: ""
                },
                on: {
                    submit: function(e) {
                        e.preventDefault()
                    }
                }
            }, [i("div", {
                staticClass: "d-flex"
            }, [i("b-pagination", {
                attrs: {
                    size: "md",
                    "total-rows": e.totalSetsCount,
                    "per-page": e.setsPerPage
                },
                model: {
                    value: e.currentPage,
                    callback: function(t) {
                        e.currentPage = t
                    },
                    expression: "currentPage"
                }
            }), i("b-form-input", {
                staticClass: "mb-3 ml-3",
                attrs: {
                    debounce: "400",
                    placeholder: "Search"
                },
                model: {
                    value: e.searchString,
                    callback: function(t) {
                        e.searchString = t
                    },
                    expression: "searchString"
                }
            })], 1)]), i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.showLoader,
                    expression: "showLoader"
                }],
                staticClass: "w-100 justify-content-center",
                staticStyle: {
                    display: "flex"
                }
            }, [i("b-spinner", {
                staticClass: "mr-2",
                attrs: {
                    variant: "primary"
                }
            })], 1), i("b-list-group", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.showLoader && e.sets.length,
                    expression: "!showLoader && sets.length"
                }]
            }, e._l(e.sets, (function(t) {
                return i("b-list-group-item", {
                    key: t.id,
                    staticClass: "list-item d-flex w-100 align-items-center justify-content-between",
                    attrs: {
                        active: e.isSetIdSelected(t.id)
                    },
                    on: {
                        click: function(i) {
                            return e.toggleSetSelection(t)
                        }
                    }
                }, [i("b", [e._v(e._s(t.title))])])
            }
            )), 1), i("b-list-group", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.showLoader && !e.sets.length,
                    expression: "!showLoader && !sets.length"
                }]
            }, [e._v(" No sets found ")])], 1)], 1)], 1)
        }
          , re = [];
        let ae = class extends o["default"] {
            constructor() {
                super(...arguments),
                this.searchString = "",
                this.totalSetsCount = 10,
                this.setsPerPage = 10,
                this.currentPage = 1,
                this.showLoader = !1,
                this.sets = []
            }
            onPaginationChange() {
                this.loadSets()
            }
            onSearchStringChange() {
                this.searchSets()
            }
            async searchSets() {
                this.showLoader = !0,
                this.currentPage = 1,
                await Promise.all([this.getSetsCount(), this.loadSets()]),
                this.showLoader = !1
            }
            async getSetsCount() {
                const e = await W(this.searchString, this.forDesignTemplate);
                this.totalSetsCount = e.count
            }
            async loadSets() {
                try {
                    this.showLoader = !0,
                    this.sets = await G(this.searchString, (this.currentPage - 1) * this.setsPerPage, this.setsPerPage, this.forDesignTemplate),
                    this.showLoader = !1
                } finally {
                    this.showLoader = !1
                }
            }
            isSetIdSelected(e) {
                return this.selectedSetsIds.includes(e)
            }
            toggleSetSelection(e) {
                if (this.isSetIdSelected(e.id)) {
                    const t = this.selectedSetsIds.indexOf(e.id);
                    this.selectedSetsIds.splice(t, 1)
                } else
                    this.singleSelect && this.selectedSetsIds.splice(0, this.selectedSetsIds.length),
                    this.selectedSetsIds.push(e.id)
            }
            async created() {
                this.showLoader = !0,
                await Promise.all([this.getSetsCount(), this.loadSets()]),
                this.showLoader = !1
            }
        }
        ;
        Object(l["b"])([Object(T["c"])({
            default: !1
        })], ae.prototype, "singleSelect", void 0),
        Object(l["b"])([Object(T["c"])({
            default: !1
        })], ae.prototype, "forDesignTemplate", void 0),
        Object(l["b"])([Object(T["b"])("change", {
            default: []
        })], ae.prototype, "selectedSetsIds", void 0),
        Object(l["b"])([Object(T["e"])("currentPage")], ae.prototype, "onPaginationChange", null),
        Object(l["b"])([Object(T["e"])("searchString")], ae.prototype, "onSearchStringChange", null),
        ae = Object(l["b"])([Object(c["b"])({
            name: "SetsViewer"
        })], ae);
        var se = ae
          , le = se
          , ce = Object(v["a"])(le, oe, re, !1, null, null, null)
          , de = ce.exports
          , ue = n("4a7a")
          , pe = n.n(ue);
        let he = class extends T["d"] {
            constructor() {
                super(...arguments),
                this.designTemplatesTableFields = [{
                    key: "image"
                }, {
                    key: "name",
                    label: "Name"
                }, {
                    key: "createdDate",
                    label: "Created"
                }, {
                    key: "modifiedDate",
                    label: "Modified"
                }],
                this.step = "selectDesignTemplates",
                this.loadingDesign = !1,
                this.design = {
                    designTemplateIds: [],
                    id: "",
                    images: [],
                    optionSetId: "",
                    title: "",
                    subtitle: "",
                    isMyDesign: !1
                },
                this.selectedDesignTemplates = [],
                this.selectedDesignTemplateIds = [],
                this.designs = [],
                this.designTemplateForSetGeneration = null,
                this.totalDesignsCount = 0,
                this.loadingDesignsList = !1,
                this.setGenerationProgress = 0,
                this.loadingSelectedSet = !1,
                this.selectedSet = null,
                this.selectedSetsIds = [],
                this.savingDesign = !1,
                this.savingError = "",
                this.categories = [],
                this.selectedCategories = [],
                this.newCategories = []
            }
            onSelectedSetChanged() {
                this.loadSelectedSet()
            }
            get designUrl() {
                return this.design.images[0] ? Object(X["a"])(this.design.images[0], !0) : n("81d3")
            }
            get largestDesignTemplate() {
                if (this.selectedDesignTemplates.length) {
                    const e = Object(A["max"])(this.selectedDesignTemplates, e=>e.eps.imagePlaceHoldersEps.length + e.eps.vectorEPSEps.length + e.eps.textsEps.length + e.eps.circularTextsEps.length);
                    return "number" === typeof e ? null : e
                }
                return null
            }
            created() {
                Promise.all([this.loadDesign(), this.loadCategories()])
            }
            async loadCategories() {
                const e = await Object(z["d"])();
                this.categories = e
            }
            addCategory(e) {
                return {
                    id: e,
                    description: e
                }
            }
            onCategoryCreated(e) {
                const t = this.categories.find(t=>t.description.toLowerCase() === e.description.toLowerCase());
                t ? this.selectedCategories.push(t.id) : this.newCategories.push(e.description)
            }
            onCateogryRemoved(e) {
                this.newCategories = this.newCategories.filter(t=>t.toLowerCase() != e.description.toLowerCase())
            }
            onSearch(e) {
                this.listDesigns(e.from, e.count, e.search)
            }
            async listDesigns(e, t, i) {
                try {
                    this.loadingDesignsList = !0;
                    const n = await Object(L["e"])(e, t, i);
                    this.designs = n.designTemplates,
                    this.totalDesignsCount = n.totalCount
                } finally {
                    this.loadingDesignsList = !1
                }
            }
            async loadDesign() {
                if (this.designId)
                    try {
                        this.loadingDesign = !0,
                        this.design = await Object(z["c"])(this.designId),
                        this.selectedCategories = this.design.designCategoryIds || [],
                        this.selectedDesignTemplateIds = this.design.designTemplateIds,
                        this.selectedSetsIds = [this.design.optionSetId]
                    } finally {
                        this.loadingDesign = !1
                    }
            }
            async handleDesignSubmit() {
                try {
                    this.savingError = "",
                    this.savingDesign = !0;
                    const e = {
                        ...this.design,
                        designTemplateIds: this.selectedDesignTemplateIds,
                        optionSetId: this.selectedSetsIds[0],
                        categories: this.selectedCategories.filter(e=>!isNaN(e)),
                        newCategories: this.newCategories
                    };
                    this.design = await Object(z["f"])(e, this.designId || void 0),
                    this.step = "finalization"
                } catch (e) {
                    throw this.savingError = e.message,
                    e
                } finally {
                    this.savingDesign = !1
                }
            }
            async loadSelectedSet() {
                this.selectedSetsIds.length ? (this.loadingSelectedSet = !0,
                this.selectedSet = await V(this.selectedSetsIds[0], !1),
                this.loadingSelectedSet = !1) : this.selectedSet = null
            }
            async goToOptionSetSelection() {
                this.step = "selectOptionSet";
                const e = await Promise.all(this.selectedDesignTemplateIds.map(e=>Object(L["d"])(e)));
                this.design.images = e.map(e=>e.preview.thumbnailPath),
                this.selectedDesignTemplates = e,
                this.designTemplateForSetGeneration = this.largestDesignTemplate
            }
            generateOptionSet(e) {
                return new Promise(async(t,i)=>{
                    try {
                        this.setGenerationProgress = 0;
                        const n = await Object(L["b"])(e.id)
                          , o = async e=>{
                            const r = await H(e);
                            if (this.setGenerationProgress = r || 0,
                            !r || r < 100)
                                setTimeout(()=>{
                                    o(e)
                                }
                                , 500);
                            else
                                try {
                                    await V(n.setId, !1),
                                    this.selectedSetsIds = [n.setId],
                                    t(n.setId)
                                } catch (error) {
                                    this.setGenerationProgress = -1,
                                    i(error)
                                }
                        }
                        ;
                        o(n.taskIdentifier)
                    } catch (error) {
                        this.setGenerationProgress = -1,
                        i(error)
                    }
                }
                )
            }
            async generateOptionSetAndGoToNextStep(e) {
                await this.generateOptionSet(e),
                this.step = "designDetails"
            }
            onDone() {
                this.$emit("saved", this.design)
            }
        }
        ;
        Object(l["b"])([Object(T["c"])({
            default: null
        })], he.prototype, "designId", void 0),
        Object(l["b"])([Object(T["e"])("selectedSetsIds")], he.prototype, "onSelectedSetChanged", null),
        he = Object(l["b"])([Object(T["a"])({
            name: "DesignCreator",
            components: {
                LoaderBtn: d["a"],
                MultiSelectTable: ne["a"],
                SetsViewer: de,
                ValidationObserver: Y["a"],
                ValidationProvider: Y["b"],
                ImageUploader: ie,
                vSelect: pe.a
            }
        })], he);
        var me = he
          , ge = me
          , fe = Object(v["a"])(ge, R, U, !1, null, null, null)
          , ve = fe.exports
          , be = n("e150")
          , ye = n("4ff6")
          , we = n.n(ye)
          , Ce = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "w-100"
            }, [i("b-modal", {
                attrs: {
                    size: "lg",
                    title: "Publish design",
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    "hide-footer": ""
                },
                model: {
                    value: e.showCreateDesignDialog,
                    callback: function(t) {
                        e.showCreateDesignDialog = t
                    },
                    expression: "showCreateDesignDialog"
                }
            }, [i("DesignCreator", {
                attrs: {
                    designId: e.designId
                },
                on: {
                    saved: e.onDesignSaved
                }
            })], 1), i("div", {
                staticClass: "d-flex align-items-center justify-content-between w-100 mb-3"
            }, [i("div", {
                staticClass: "header-actions"
            }, [e._t("header-actions")], 2), i("div", {
                staticClass: "d-flex"
            }, [i("b-pagination", {
                staticClass: "m-0",
                attrs: {
                    size: "md",
                    "total-rows": e.totalCount,
                    "per-page": e.itemsPerPage,
                    disabled: e.isDataLoading
                },
                model: {
                    value: e.currentPage,
                    callback: function(t) {
                        e.currentPage = t
                    },
                    expression: "currentPage"
                }
            }), i("b-form-input", {
                staticClass: "ml-3",
                staticStyle: {
                    width: "unset"
                },
                attrs: {
                    type: "text",
                    debounce: "400",
                    placeholder: "Search",
                    disabled: e.isDataLoading
                },
                model: {
                    value: e.searchString,
                    callback: function(t) {
                        e.searchString = t
                    },
                    expression: "searchString"
                }
            })], 1)]), i("b-table", {
                staticClass: "w-100 table",
                staticStyle: {
                    "white-space": "pre-line"
                },
                attrs: {
                    responsive: "sm",
                    items: e.tableItems,
                    fields: e.tableFields,
                    busy: e.isDataLoading,
                    "show-empty": "",
                    "empty-text": "No designs",
                    "empty-filtered-text": "No designs matching your search"
                },
                scopedSlots: e._u([{
                    key: "table-busy",
                    fn: function() {
                        return [i("div", {
                            staticClass: "align-items-center d-flex justify-content-center my-2 text-center my-2"
                        }, [i("b-spinner", {
                            attrs: {
                                variant: "primary"
                            }
                        }), i("strong", {
                            staticClass: "ml-3 primary-text"
                        }, [e._v("Loading...")])], 1)]
                    },
                    proxy: !0
                }, {
                    key: "cell(name)",
                    fn: function(t) {
                        return [e._t("name-column", null, {
                            item: t.item
                        }), e.isUserDesignView ? e._e() : [i("div", {
                            staticClass: "text-with-overflow font-weight-bold"
                        }, [e._v(" " + e._s(t.item.title) + " ")]), t.item.subtitle ? i("small", {
                            staticClass: "text-with-overflow mt-1 d-block"
                        }, [e._v(" " + e._s(t.item.subtitle) + " ")]) : e._e(), i("b", [e._v(e._s(t.item.id))])]]
                    }
                }, {
                    key: "cell(image)",
                    fn: function(t) {
                        return [i("b-img", {
                            attrs: {
                                thumbnail: "",
                                src: e.getDesignImageUrl(t.item),
                                height: "50"
                            }
                        })]
                    }
                }, {
                    key: "cell(createdDate)",
                    fn: function(t) {
                        return [i("div", [e._v(e._s(e._f("date")(t.item.createdDate)))])]
                    }
                }, {
                    key: "cell(modifiedDate)",
                    fn: function(t) {
                        return [i("div", [e._v(e._s(e._f("date")(t.item.modifiedDate)))])]
                    }
                }, {
                    key: "cell(actions)",
                    fn: function(t) {
                        return [e._t("table-actions", null, {
                            item: t.item
                        }), e.hasCustomActions ? e._e() : [i("b-btn", {
                            attrs: {
                                variant: "primary",
                                disabled: e.processing
                            },
                            on: {
                                click: function(i) {
                                    return i.stopPropagation(),
                                    e.editDesign(t.item)
                                }
                            }
                        }, [e._v(" Edit ")]), i("LoaderBtn", {
                            staticClass: "mx-4",
                            attrs: {
                                variant: "primary",
                                loadingText: "Cloning",
                                disabled: e.processing
                            },
                            on: {
                                click: function(i) {
                                    return i.stopPropagation(),
                                    e.cloneDesign(t.item)
                                }
                            },
                            model: {
                                value: e.processing,
                                callback: function(t) {
                                    e.processing = t
                                },
                                expression: "processing"
                            }
                        }, [e._v(" Clone ")]), i("ConfirmationBtn", {
                            attrs: {
                                loadingText: "Deleting",
                                modalTitle: "Delete design",
                                disabled: e.processing
                            },
                            on: {
                                confirm: function(i) {
                                    return e.deleteDesign(t.item)
                                }
                            },
                            scopedSlots: e._u([{
                                key: "modal-content",
                                fn: function() {
                                    return [e._v(" Do you want to delete design "), i("b", [e._v(e._s(t.item.title))]), e._v("? ")]
                                },
                                proxy: !0
                            }], null, !0),
                            model: {
                                value: e.processing,
                                callback: function(t) {
                                    e.processing = t
                                },
                                expression: "processing"
                            }
                        }, [e._v(" Delete ")])]]
                    }
                }], null, !0)
            })], 1)
        }
          , xe = [];
        let Se = class extends T["d"] {
            constructor() {
                super(...arguments),
                this.tableFields = [{
                    key: "image"
                }, {
                    key: "name",
                    label: "Name"
                }, {
                    key: "createdDate",
                    label: "Created"
                }, {
                    key: "modifiedDate",
                    label: "Modified"
                }, {
                    key: "actions",
                    label: ""
                }],
                this.itemsPerPage = 10,
                this.loading = !0,
                this.processing = !1,
                this.showCreateDesignDialog = !1,
                this.tableItems = [],
                this.currentPage = 1,
                this.from = 0,
                this.count = 0,
                this.totalCount = 0,
                this.searchString = "",
                this.designId = ""
            }
            onSearchStringOrPageChange() {
                this.loadDesigns()
            }
            get isDataLoading() {
                return this.loading || this.loadingFlag
            }
            get getDesignImageUrl() {
                return e=>e.images[0] ? Object(X["a"])(e.images[0], !0) : n("81d3")
            }
            get hasCustomActions() {
                return !!this.$scopedSlots["table-actions"]
            }
            get isUserDesignView() {
                return !!this.$scopedSlots["name-column"]
            }
            created() {
                this.loadDesigns()
            }
            async loadDesigns() {
                this.loading = !0;
                try {
                    const e = await Object(z["e"])((this.currentPage - 1) * this.itemsPerPage, this.itemsPerPage, this.searchString, void 0, void 0, this.fromUser);
                    this.totalCount = e.totalCount,
                    this.tableItems = e.designs
                } finally {
                    this.loading = !1
                }
            }
            editDesign(e) {
                this.designId = e.id,
                this.showCreateDesignDialog = !0
            }
            async cloneDesign(e) {
                await Object(z["a"])(e.id),
                await this.loadDesigns()
            }
            async deleteDesign(e) {
                await Object(z["b"])(e.id),
                await this.loadDesigns(),
                this.$emit("deleted", this.designId)
            }
            createDesign() {
                this.designId = "",
                this.showCreateDesignDialog = !0
            }
            onDesignSaved() {
                this.showCreateDesignDialog = !1,
                this.loadDesigns(),
                this.$emit("saved", this.designId)
            }
        }
        ;
        Object(l["b"])([Object(T["c"])({
            required: !1,
            default: !1
        })], Se.prototype, "loadingFlag", void 0),
        Object(l["b"])([Object(E["b"])("user")], Se.prototype, "user", void 0),
        Object(l["b"])([Object(T["c"])({
            default: !1
        })], Se.prototype, "fromUser", void 0),
        Object(l["b"])([Object(T["e"])("currentPage"), Object(T["e"])("searchString")], Se.prototype, "onSearchStringOrPageChange", null),
        Se = Object(l["b"])([Object(T["a"])({
            name: "DesignsView",
            components: {
                LoaderBtn: d["a"],
                DesignCreator: ve,
                ConfirmationBtn: k["a"]
            }
        })], Se);
        var Pe = Se
          , ke = Pe
          , _e = Object(v["a"])(ke, Ce, xe, !1, null, null, null)
          , Ae = _e.exports;
        let Te = class extends T["d"] {
            constructor() {
                super(...arguments),
                this.tableFields = [{
                    key: "image"
                }, {
                    key: "name",
                    label: "Name"
                }, {
                    key: "createdDate",
                    label: "Created"
                }, {
                    key: "modifiedDate",
                    label: "Modified"
                }, {
                    key: "edit-button",
                    label: ""
                }, {
                    key: "clone-button",
                    label: ""
                }, {
                    key: "delete-button",
                    label: ""
                }, {
                    key: "status",
                    label: "Status"
                }],
                this.itemsPerPage = 10,
                this.loading = !0,
                this.processing = !1,
                this.renamingDesignTemplate = !1,
                this.showPodDialog = !1,
                this.tableItems = [],
                this.currentPage = 1,
                this.from = 0,
                this.count = 0,
                this.totalCount = 0,
                this.searchString = "",
                this.showCreateDesignDialog = !1
            }
            get iFrameOptionsSetUrl() {
                return we()("https://sh.customily.com", "/sets?forDesignTemplates=true")
            }
            onPageChange() {
                this.loadDesignTemplates()
            }
            onSearchStringChange() {
                this.loadDesignTemplates()
            }
            async loadDesignTemplates() {
                this.loading = !0;
                try {
                    var e, t;
                    const i = await Object(L["e"])((this.currentPage - 1) * this.itemsPerPage, this.itemsPerPage, this.searchString);
                    this.totalCount = i.totalCount,
                    this.tableItems = i.designTemplates,
                    null === (e = this.$refs.designsView) || void 0 === e || e.loadDesigns(),
                    null === (t = this.$refs.setsIframe.contentWindow) || void 0 === t || t.postMessage({
                        action: "refresh-sets-list"
                    }, "*")
                } finally {
                    this.loading = !1
                }
            }
            editDesignTemplate(e) {
                location.href = "/createProduct1?" + new URLSearchParams({
                    templateId: e.id,
                    forDesignTemplateCreation: "true"
                })
            }
            async cloneDesignTemplate(e) {
                await Object(L["a"])(e.id),
                await this.loadDesignTemplates()
            }
            async deleteDesignTemplate(e) {
                await Object(L["c"])(e.id),
                await this.loadDesignTemplates()
            }
            createDesignTemplate() {
                location.href = "/createProduct1?" + new URLSearchParams({
                    forDesignTemplateCreation: "true"
                })
            }
            publishNewDesign() {
                this.showCreateDesignDialog = !0
            }
            onDesignSaved() {
                this.showCreateDesignDialog = !1,
                this.loadDesignTemplates()
            }
            onDesignEdited() {
                var e;
                null === (e = this.$refs.setsIframe.contentWindow) || void 0 === e || e.postMessage({
                    action: "refresh-sets-list"
                }, "*")
            }
            async onNameChange(e) {
                try {
                    this.renamingDesignTemplate = !0;
                    const t = await Object(L["d"])(e.id);
                    t.name = e.name,
                    await Object(L["f"])(t, t.id),
                    await this.loadDesignTemplates()
                } finally {
                    this.renamingDesignTemplate = !1
                }
            }
            created() {
                this.loadDesignTemplates()
            }
        }
        ;
        Object(l["b"])([Object(E["b"])("user")], Te.prototype, "user", void 0),
        Object(l["b"])([Object(T["e"])("currentPage")], Te.prototype, "onPageChange", null),
        Object(l["b"])([Object(T["e"])("searchString")], Te.prototype, "onSearchStringChange", null),
        Te = Object(l["b"])([Object(T["a"])({
            name: "MainDesignsView",
            components: {
                LoaderBtn: d["a"],
                EditableText: be["a"],
                ConfirmationBtn: k["a"],
                DesignCreator: ve,
                DesignsView: Ae
            }
        })], Te);
        var Ee = Te
          , Oe = Ee
          , Ie = (n("4eb6"),
        Object(v["a"])(Oe, B, j, !1, null, "1a99b5cf", null))
          , De = Ie.exports
          , Fe = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "w-100"
            }, [i("div", {
                staticClass: "d-flex justify-content-end w-100"
            }, [i("b-pagination", {
                attrs: {
                    size: "md",
                    disabled: e.loading,
                    "total-rows": e.totalCount,
                    "per-page": e.itemsPerPage
                },
                model: {
                    value: e.currentPage,
                    callback: function(t) {
                        e.currentPage = t
                    },
                    expression: "currentPage"
                }
            }), i("b-form-input", {
                staticClass: "mb-3 ml-3",
                staticStyle: {
                    width: "unset"
                },
                attrs: {
                    type: "text",
                    debounce: "400",
                    placeholder: "Search",
                    disabled: e.loading
                },
                model: {
                    value: e.searchString,
                    callback: function(t) {
                        e.searchString = t
                    },
                    expression: "searchString"
                }
            })], 1), i("b-table", {
                staticClass: "w-100 users-table",
                staticStyle: {
                    "white-space": "pre-line"
                },
                attrs: {
                    striped: "",
                    hover: "",
                    items: e.tableItems,
                    fields: e.tableFields,
                    responsive: "sm",
                    busy: e.loading
                },
                on: {
                    "row-clicked": e.onRowClick
                },
                scopedSlots: e._u([{
                    key: "table-busy",
                    fn: function() {
                        return [i("div", {
                            staticClass: "align-items-center d-flex justify-content-center my-2 text-center my-2"
                        }, [i("b-spinner", {
                            attrs: {
                                variant: "primary"
                            }
                        }), i("strong", {
                            staticClass: "ml-3 primary-text"
                        }, [e._v("Loading...")])], 1)]
                    },
                    proxy: !0
                }, {
                    key: "cell(stores)",
                    fn: function(t) {
                        return [e._v(" " + e._s(t.item.Stores.map((function(e) {
                            return e.Url
                        }
                        )).join(", ")) + " ")]
                    }
                }])
            })], 1)
        }
          , Me = [];
        const $e = async(e,t,i,n,o)=>{
            const r = await p["a"].get("/Admin/Users", {
                params: {
                    from: e,
                    count: t,
                    search: i,
                    sortBy: n,
                    sortMode: o
                }
            });
            return r.data
        }
          , Be = async e=>{
            const t = await p["a"].get("/Admin/Users/" + e);
            return t.data
        }
          , je = async(e,t)=>{
            const i = await p["a"].put("/Admin/Users/" + e, Object(p["c"])(t), {
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                }
            });
            return i.data
        }
          , Le = async(e,t,i)=>{
            const n = await p["a"].put(`/Admin/Users/${e}/Store/${Object(p["b"])(t)}`, Object(p["c"])(i), {
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                }
            });
            return n.data
        }
          , Re = async(e,t)=>{
            const i = await p["a"].get(`/Admin/Users/${e}/Store/${Object(p["b"])(t)}`);
            return i.data
        }
          , Ue = async(e,t,i)=>{
            const n = await p["a"].post(`/Admin/Users/${e}/Store`, void 0, {
                params: {
                    type: t,
                    url: i
                }
            });
            return n.data
        }
          , ze = async(e,t)=>{
            const i = await p["a"].delete(`/Admin/Users/${e}/Store/${Object(p["b"])(t)}`);
            return i.data
        }
          , Ne = async(e,t)=>{
            const i = await p["a"].get(`/Admin/Users/${e}/Store/${Object(p["b"])(t)}/Billing`);
            return i.data
        }
          , Ve = async(e,t,i,n)=>{
            const o = await p["a"].put(`/Admin/Users/${e}/Store/${Object(p["b"])(t)}/Billing`, void 0, {
                params: {
                    customerId: i,
                    subscriptionId: n
                }
            });
            return o.data
        }
        ;
        let Ge = class extends T["d"] {
            constructor() {
                super(...arguments),
                this.tableFields = ["Username", "Name", "Email", {
                    key: "stores",
                    label: "Stores"
                }, "Disabled", "Canceled"],
                this.itemsPerPage = 10,
                this.loading = !0,
                this.tableItems = [],
                this.currentPage = 1,
                this.from = 0,
                this.count = 0,
                this.totalCount = 0,
                this.searchString = ""
            }
            onPageChange() {
                this.loadUsers()
            }
            onSearchStringChange() {
                this.loadUsers()
            }
            async loadUsers() {
                this.loading = !0;
                try {
                    const e = await $e((this.currentPage - 1) * this.itemsPerPage, this.itemsPerPage, this.searchString);
                    this.totalCount = e.Count,
                    this.tableItems = e.Users
                } finally {
                    this.loading = !1
                }
            }
            onRowClick(e) {
                this.$router.push("/admin/users/" + e.Username)
            }
            created() {
                this.loadUsers()
            }
        }
        ;
        Object(l["b"])([Object(T["e"])("currentPage")], Ge.prototype, "onPageChange", null),
        Object(l["b"])([Object(T["e"])("searchString")], Ge.prototype, "onSearchStringChange", null),
        Ge = Object(l["b"])([Object(T["a"])({
            name: "UsersView"
        })], Ge);
        var We = Ge
          , He = We
          , Xe = (n("cbb8"),
        Object(v["a"])(He, Fe, Me, !1, null, null, null))
          , Ye = Xe.exports
          , qe = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "w-100 mb-3"
            }, [e.user ? e._e() : i("div", [i("div", {
                staticClass: "text-center"
            }, [i("b-spinner", {
                staticClass: "my-2",
                attrs: {
                    variant: "primary"
                }
            })], 1)]), e.user ? i("div", [i("b-modal", {
                attrs: {
                    title: "Remove Store",
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    "no-close-on-backdrop": "",
                    "ok-variant": "danger",
                    "ok-title": "Remove Store"
                },
                on: {
                    ok: function(t) {
                        return e.onStoreRemove(e.storeBeingRemoved)
                    },
                    cancel: function(t) {
                        return e.onStoreRemove("")
                    }
                },
                model: {
                    value: e.showRemoveStoreDialog,
                    callback: function(t) {
                        e.showRemoveStoreDialog = t
                    },
                    expression: "showRemoveStoreDialog"
                }
            }, [e._v(" Do you want to remove the store "), i("b", [e._v(e._s(e.storeBeingRemoved))]), e._v("? ")]), i("NewStoreDialog", {
                attrs: {
                    user: e.user
                },
                on: {
                    added: e.onStoreAdded
                },
                model: {
                    value: e.showAddStoreDialog,
                    callback: function(t) {
                        e.showAddStoreDialog = t
                    },
                    expression: "showAddStoreDialog"
                }
            }), i("div", {
                staticClass: "d-flex justify-content-between align-items-center"
            }, [i("StoreSelector", {
                attrs: {
                    stores: e.user.Stores,
                    includeNoBilling: !0,
                    noStoresText: "No stores assigned for this user",
                    title: "Switch stores to browse through the different subscriptions"
                },
                model: {
                    value: e.storeUrl,
                    callback: function(t) {
                        e.storeUrl = t
                    },
                    expression: "storeUrl"
                }
            }), i("div", [i("LoaderBtn", {
                staticClass: "mr-3",
                attrs: {
                    loadingText: "Deleting",
                    loading: e.removingStore,
                    variant: "danger"
                },
                on: {
                    click: function(t) {
                        return e.removeStore(e.storeUrl)
                    }
                }
            }, [e._v("Remove Store")]), i("b-btn", {
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.addStore()
                    }
                }
            }, [e._v("+ Add Store")])], 1)], 1), i("b-row", [i("b-col", {
                attrs: {
                    cols: "12"
                }
            }, [i("b-card", {
                class: {
                    "mt-3": !e.user.Stores.length
                },
                attrs: {
                    title: "User " + e.user.Username
                }
            }, [i("b-card-text", [i("b-form-group", [e._v(" Email: "), i("b", [e._v(e._s(e.user.Email))])]), i("b-form-group", [i("b-form-checkbox", {
                attrs: {
                    name: "check-button",
                    switch: "",
                    disabled: e.savingUserData
                },
                model: {
                    value: e.user.IsDisabled,
                    callback: function(t) {
                        e.$set(e.user, "IsDisabled", t)
                    },
                    expression: "user.IsDisabled"
                }
            }, [e._v(" Disabled ")]), i("b-form-text", [e._v("Disabled users can sign-in but cannot use the app ")])], 1), i("b-form-group", [i("b-form-checkbox", {
                attrs: {
                    name: "check-button",
                    switch: "",
                    disabled: e.savingUserData
                },
                model: {
                    value: e.user.Canceled,
                    callback: function(t) {
                        e.$set(e.user, "Canceled", t)
                    },
                    expression: "user.Canceled"
                }
            }, [e._v(" Canceled ")]), i("b-form-text", [e._v("Canceled users cannot sign-in into the app ")])], 1), i("b-form-group", [i("b-form-checkbox", {
                attrs: {
                    name: "check-button",
                    switch: "",
                    disabled: e.savingUserData
                },
                model: {
                    value: e.user.ShowCustomilyOptions,
                    callback: function(t) {
                        e.$set(e.user, "ShowCustomilyOptions", t)
                    },
                    expression: "user.ShowCustomilyOptions"
                }
            }, [e._v(" Customily Options App ")]), i("b-form-text", [e._v("Enable/Disable Customily Options ")])], 1), i("LoaderBtn", {
                staticClass: "float-right",
                attrs: {
                    disabled: !e.userDataChanged,
                    loading: e.savingUserData,
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.saveUserData()
                    }
                }
            }, [e._v("Save")])], 1)], 1)], 1), i("b-col", {
                attrs: {
                    cols: "12"
                }
            }, [i("b-card", {
                staticClass: "mt-3"
            }, [e.storeUrl ? e._e() : i("b-card-text", [e._v(" No store selected ")]), e.storeUrl && e.loadingData ? i("b-card-text", [i("div", {
                staticClass: "text-center"
            }, [i("b-spinner", {
                staticClass: "my-2",
                attrs: {
                    variant: "primary"
                }
            })], 1)]) : e._e(), e.storeUrl && !e.loadingData ? i("b-card-text", [e.loadingError ? e._e() : [i("div", {
                staticClass: "d-flex flex-column"
            }, [i("h4", {
                staticClass: "card-title"
            }, [e._v("Store Settings")]), i("b-row", [i("b-col", [i("b-form-group", {
                attrs: {
                    label: "Trial Days"
                }
            }, [i("b-form-input", {
                attrs: {
                    placeholder: "Default",
                    disabled: e.savingStoreData,
                    number: ""
                },
                model: {
                    value: e.store.TrialDays,
                    callback: function(t) {
                        e.$set(e.store, "TrialDays", t)
                    },
                    expression: "store.TrialDays"
                }
            })], 1)], 1), i("b-col", {
                attrs: {
                    cols: "6"
                }
            }), i("b-col", {
                attrs: {
                    cols: "6"
                }
            }, [i("b-form-group", [i("b-form-checkbox", {
                attrs: {
                    switch: "",
                    disabled: e.savingStoreData
                },
                model: {
                    value: e.store.ForceResubscribe,
                    callback: function(t) {
                        e.$set(e.store, "ForceResubscribe", t)
                    },
                    expression: "store.ForceResubscribe"
                }
            }, [e._v(" Force resubscribe ")]), i("b-form-text", [e._v("Force user to resubscribe on next app login ")])], 1)], 1)], 1), i("LoaderBtn", {
                staticClass: "align-self-end",
                attrs: {
                    loading: e.savingStoreData,
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.saveStoreSettings()
                    }
                }
            }, [e._v("Save ")]), i("div", {
                staticClass: "w-100 error-message"
            }, [e._v(" " + e._s(e.storeSavingError))])], 1), i("hr"), i("div", [i("h4", {
                staticClass: "card-title"
            }, [e._v(e._s(e.billingTitle))]), i("b-form-group", {
                attrs: {
                    label: "Subscription ID"
                }
            }, [i("b-form-input", {
                attrs: {
                    placeholder: "sub_XXXXXXXXXXXXXX",
                    trim: "",
                    disabled: e.savingBillingData
                },
                model: {
                    value: e.billing.SubscriptionId,
                    callback: function(t) {
                        e.$set(e.billing, "SubscriptionId", t)
                    },
                    expression: "billing.SubscriptionId"
                }
            }), i("b-form-text", [e._v("Stripe subscription ID")])], 1), i("b-form-group", {
                attrs: {
                    label: "Customer ID"
                }
            }, [i("b-form-input", {
                attrs: {
                    placeholder: "cus_XXXXXXXXXXXXXX",
                    trim: "",
                    disabled: e.savingBillingData
                },
                model: {
                    value: e.billing.StripeCustomerId,
                    callback: function(t) {
                        e.$set(e.billing, "StripeCustomerId", t)
                    },
                    expression: "billing.StripeCustomerId"
                }
            }), i("b-form-text", [e._v("Stripe customer ID")])], 1), i("LoaderBtn", {
                staticClass: "float-right",
                attrs: {
                    disabled: !e.billingDataChanged,
                    loading: e.savingBillingData,
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.saveBilling()
                    }
                }
            }, [e._v("Save ")]), i("div", {
                staticClass: "w-100 error-message"
            }, [e._v(" " + e._s(e.billingSavingError))])], 1)], e.loadingError ? [e._v(" " + e._s(e.loadingError) + " ")] : e._e()], 2) : e._e()], 1)], 1)], 1)], 1) : e._e()])
        }
          , Ke = []
          , Ze = n("2576")
          , Qe = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-modal", {
                attrs: {
                    size: "md",
                    title: "Add store",
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    "hide-footer": ""
                },
                scopedSlots: e._u([{
                    key: "default",
                    fn: function(t) {
                        var n = t.cancel;
                        return [i("div", [i("ValidationObserver", {
                            scopedSlots: e._u([{
                                key: "default",
                                fn: function(t) {
                                    var o = t.handleSubmit
                                      , r = t.valid;
                                    return [i("b-form", {
                                        on: {
                                            submit: function(t) {
                                                return t.stopPropagation(),
                                                t.preventDefault(),
                                                o(e.saveStore)
                                            }
                                        }
                                    }, [i("b-form-group", {
                                        attrs: {
                                            label: "Store type"
                                        }
                                    }, [i("b-form-select", {
                                        attrs: {
                                            disabled: e.saving
                                        },
                                        model: {
                                            value: e.storeType,
                                            callback: function(t) {
                                                e.storeType = t
                                            },
                                            expression: "storeType"
                                        }
                                    }, [i("b-form-select-option", {
                                        attrs: {
                                            value: 1
                                        }
                                    }, [e._v("Shopify")]), i("b-form-select-option", {
                                        attrs: {
                                            value: 2
                                        }
                                    }, [e._v("BigCommerce")]), i("b-form-select-option", {
                                        attrs: {
                                            value: 3
                                        }
                                    }, [e._v("WooCommerce")]), i("b-form-select-option", {
                                        attrs: {
                                            value: 4
                                        }
                                    }, [e._v("Magento")]), i("b-form-select-option", {
                                        attrs: {
                                            value: 5
                                        }
                                    }, [e._v("Walmart")]), i("b-form-select-option", {
                                        attrs: {
                                            value: 6
                                        }
                                    }, [e._v("Weebly")]), i("b-form-select-option", {
                                        attrs: {
                                            value: 7
                                        }
                                    }, [e._v("Wix")]), i("b-form-select-option", {
                                        attrs: {
                                            value: 7
                                        }
                                    }, [e._v("Wix")]), i("b-form-select-option", {
                                        attrs: {
                                            value: 8
                                        }
                                    }, [e._v("Etsy")]), i("b-form-select-option", {
                                        attrs: {
                                            value: 9
                                        }
                                    }, [e._v("Miva")]), i("b-form-select-option", {
                                        attrs: {
                                            value: 255
                                        }
                                    }, [e._v("Custom")])], 1)], 1), 1 !== e.storeType ? i("ValidationProvider", {
                                        attrs: {
                                            rules: "required|url",
                                            name: "Store URL"
                                        },
                                        scopedSlots: e._u([{
                                            key: "default",
                                            fn: function(t) {
                                                var n = t.valid
                                                  , o = t.errors;
                                                return [i("b-form-group", {
                                                    attrs: {
                                                        label: "Store URL",
                                                        "invalid-feedback": o[0],
                                                        state: !o[0] && (!!n || null)
                                                    }
                                                }, [i("b-form-input", {
                                                    attrs: {
                                                        type: "text",
                                                        state: !o[0] && (!!n || null),
                                                        disabled: e.saving,
                                                        trim: ""
                                                    },
                                                    model: {
                                                        value: e.storeUrl,
                                                        callback: function(t) {
                                                            e.storeUrl = t
                                                        },
                                                        expression: "storeUrl"
                                                    }
                                                })], 1)]
                                            }
                                        }], null, !0)
                                    }) : e._e(), 1 === e.storeType ? i("ValidationProvider", {
                                        attrs: {
                                            rules: "required|shopify-url",
                                            name: "Store URL"
                                        },
                                        scopedSlots: e._u([{
                                            key: "default",
                                            fn: function(t) {
                                                var n = t.valid
                                                  , o = t.errors;
                                                return [i("b-form-group", {
                                                    attrs: {
                                                        label: "Store URL",
                                                        "invalid-feedback": o[0],
                                                        state: !o[0] && (!!n || null)
                                                    }
                                                }, [i("b-form-input", {
                                                    attrs: {
                                                        type: "text",
                                                        state: !o[0] && (!!n || null),
                                                        disabled: e.saving,
                                                        trim: ""
                                                    },
                                                    model: {
                                                        value: e.storeUrl,
                                                        callback: function(t) {
                                                            e.storeUrl = t
                                                        },
                                                        expression: "storeUrl"
                                                    }
                                                })], 1)]
                                            }
                                        }], null, !0)
                                    }) : e._e(), i("div", {
                                        directives: [{
                                            name: "show",
                                            rawName: "v-show",
                                            value: e.errorMessage,
                                            expression: "errorMessage"
                                        }],
                                        staticClass: "error-message w-100 pb-3 text-center"
                                    }, [e._v(" " + e._s(e.errorMessage) + " ")]), i("div", {
                                        staticClass: "modal-footer row pb-0"
                                    }, [i("b-button", {
                                        attrs: {
                                            type: "reset",
                                            disabled: e.saving
                                        },
                                        on: {
                                            click: function(e) {
                                                return n()
                                            }
                                        }
                                    }, [e._v(" Cancel ")]), i("LoaderBtn", {
                                        attrs: {
                                            variant: "primary",
                                            type: "submit",
                                            loadingText: "Saving",
                                            loading: e.saving,
                                            disabled: !r || e.saving
                                        }
                                    }, [e._v(" Add Store ")])], 1)], 1)]
                                }
                            }], null, !0)
                        })], 1)]
                    }
                }]),
                model: {
                    value: e.isVisible,
                    callback: function(t) {
                        e.isVisible = t
                    },
                    expression: "isVisible"
                }
            })
        }
          , Je = []
          , et = n("6aac");
        let tt = class extends et["a"] {
            constructor() {
                super(...arguments),
                this.isVisible = !1,
                this.storeUrl = "",
                this.storeType = 1,
                this.saving = !1,
                this.errorMessage = ""
            }
            onIsVisibleChange() {
                this.isVisible && (this.storeUrl = "",
                this.storeType = 1),
                this.$emit("change", this.isVisible)
            }
            async saveStore() {
                try {
                    this.saving = !0,
                    this.errorMessage = "";
                    const e = await Ue(this.user.Username, this.storeType, this.storeUrl);
                    this.isVisible = !1,
                    this.$emit("change", this.isVisible),
                    this.$emit("added", e)
                } catch (error) {
                    var e;
                    const i = error;
                    400 === (null === (e = i.response) || void 0 === e ? void 0 : e.status) ? i.response.data.Message && (this.errorMessage = i.response.data.Message) : (this.errorMessage = "Error adding store",
                    window.rumReportError(i))
                } finally {
                    this.saving = !1
                }
            }
        }
        ;
        Object(l["b"])([Object(T["c"])({
            required: !0
        })], tt.prototype, "user", void 0),
        Object(l["b"])([Object(T["e"])("isVisible")], tt.prototype, "onIsVisibleChange", null),
        tt = Object(l["b"])([Object(c["b"])({
            name: "NewStoreDialog",
            components: {
                ValidationProvider: Y["b"],
                ValidationObserver: Y["a"],
                LoaderBtn: d["a"]
            }
        })], tt);
        var it = tt
          , nt = it
          , ot = Object(v["a"])(nt, Qe, Je, !1, null, null, null)
          , rt = ot.exports;
        let at = class extends T["d"] {
            constructor() {
                super(...arguments),
                this.user = null,
                this.billing = {
                    RetryCount: 0,
                    Status: "active",
                    StripeCustomerId: "",
                    SubscriptionId: ""
                },
                this.store = {
                    TrialDays: null,
                    ForceResubscribe: !1
                },
                this.storeUrl = "",
                this.storeBeingRemoved = "",
                this.removingStore = !1,
                this.savingUserData = !1,
                this.userDataChanged = !1,
                this.loadingData = !0,
                this.billingDataChanged = !1,
                this.savingBillingData = !1,
                this.savingStoreData = !1,
                this.loadingError = "",
                this.billingSavingError = "",
                this.storeSavingError = "",
                this.showAddStoreDialog = !1,
                this.showRemoveStoreDialog = !1
            }
            getEmptyBilling() {
                return {
                    RetryCount: 0,
                    Status: "active",
                    StripeCustomerId: "",
                    SubscriptionId: ""
                }
            }
            async onStoreChange() {
                await this.loadStoreData()
            }
            onBillingUpdate() {
                this.billingDataChanged = !0
            }
            get billingTitle() {
                return this.storeUrl ? this.loadingData ? "" : "Billing for " + this.storeUrl : "Billing"
            }
            async loadStoreData() {
                if (this.loadingError = "",
                this.loadingData = !0,
                this.user && this.storeUrl) {
                    try {
                        this.billing = await Ne(this.user.Username, this.storeUrl),
                        await this.$nextTick(),
                        this.billingDataChanged = !1
                    } catch (error) {
                        var e;
                        const n = error;
                        var t;
                        if (404 === (null === (e = n.response) || void 0 === e ? void 0 : e.status))
                            this.billing = this.getEmptyBilling();
                        else
                            window.rumReportError(n),
                            this.loadingError = (null === (t = n.response) || void 0 === t ? void 0 : t.data.Message) || "Error loading billing data"
                    }
                    try {
                        const e = await Re(this.user.Username, this.storeUrl);
                        this.store.TrialDays = e.ForceTrial,
                        this.store.ForceResubscribe = e.ForceResubscribe
                    } catch (error) {
                        var i;
                        window.rumReportError(error),
                        this.loadingError = (null === (i = error.response) || void 0 === i ? void 0 : i.data.Message) || "Error loading store data"
                    }
                }
                this.loadingData = !1
            }
            addStore() {
                this.showAddStoreDialog = !0
            }
            removeStore(e) {
                this.storeBeingRemoved = e,
                this.showRemoveStoreDialog = !0
            }
            async onStoreRemove(e) {
                if (e && this.user)
                    try {
                        var t;
                        const i = this.user.Username;
                        this.removingStore = !0,
                        await ze(i, e),
                        this.user = null,
                        this.user = await Be(i),
                        !this.storeUrl && null !== (t = this.user.Stores[0]) && void 0 !== t && t.Url && (this.storeUrl = this.user.Stores[0].Url)
                    } finally {
                        this.removingStore = !1,
                        this.showRemoveStoreDialog = !1,
                        this.storeBeingRemoved = ""
                    }
                this.storeBeingRemoved = ""
            }
            async onStoreAdded() {
                if (this.user) {
                    var e;
                    const t = this.user.Username;
                    this.user = null,
                    this.user = await Be(t),
                    !this.storeUrl && null !== (e = this.user.Stores[0]) && void 0 !== e && e.Url && (this.storeUrl = this.user.Stores[0].Url)
                }
            }
            async saveUserData() {
                try {
                    this.savingUserData = !0,
                    this.user && (this.user = await je(this.user.Username, {
                        Canceled: this.user.Canceled,
                        Disabled: this.user.IsDisabled,
                        CustomilyOptions: this.user.ShowCustomilyOptions
                    }),
                    this.userDataChanged = !1)
                } finally {
                    this.savingUserData = !1
                }
            }
            async saveBilling() {
                try {
                    if (this.billingSavingError = "",
                    this.savingBillingData = !0,
                    this.user) {
                        if (this.billing.StripeCustomerId && !this.billing.SubscriptionId || this.billing.SubscriptionId && !this.billing.StripeCustomerId)
                            return void (this.billingSavingError = "Please make sure to enter both, subscription and customer IDs");
                        this.billing = await Ve(this.user.Username, this.storeUrl, this.billing.StripeCustomerId, this.billing.SubscriptionId),
                        this.billingDataChanged = !1
                    }
                } catch (error) {
                    var e, t;
                    const n = error;
                    window.rumReportError(n),
                    this.billingSavingError = (null === (e = n.response) || void 0 === e || null === (t = e.data) || void 0 === t ? void 0 : t.Message) || "Error saving billing data"
                } finally {
                    this.savingBillingData = !1
                }
            }
            async saveStoreSettings() {
                try {
                    if (this.storeSavingError = "",
                    this.savingStoreData = !0,
                    this.user) {
                        const e = await Le(this.user.Username, this.storeUrl, {
                            TrialDays: "undefined" === typeof this.store.TrialDays ? null : this.store.TrialDays,
                            ForceResubscribe: this.store.ForceResubscribe
                        });
                        this.store.TrialDays = e.ForceTrial
                    }
                } catch (error) {
                    var e, t;
                    const n = error;
                    window.rumReportError(n),
                    this.storeSavingError = (null === (e = n.response) || void 0 === e || null === (t = e.data) || void 0 === t ? void 0 : t.Message) || "Error saving store data"
                } finally {
                    this.savingStoreData = !1
                }
            }
            async created() {
                const e = this.$route.params.username;
                var t;
                e && (this.user = await Be(e),
                null !== (t = this.user.Stores[0]) && void 0 !== t && t.Url ? this.storeUrl = this.user.Stores[0].Url : (this.billing = this.getEmptyBilling(),
                this.loadingData = !1),
                this.$watch("user", ()=>{
                    this.userDataChanged = !0
                }
                , {
                    deep: !0
                }))
            }
        }
        ;
        Object(l["b"])([Object(T["e"])("storeUrl")], at.prototype, "onStoreChange", null),
        Object(l["b"])([Object(T["e"])("billing", {
            deep: !0
        })], at.prototype, "onBillingUpdate", null),
        at = Object(l["b"])([Object(T["a"])({
            name: "UserView",
            components: {
                StoreSelector: Ze["a"],
                LoaderBtn: d["a"],
                NewStoreDialog: rt
            }
        })], at);
        var st = at
          , lt = st
          , ct = (n("e8da"),
        Object(v["a"])(lt, qe, Ke, !1, null, "344e8cf9", null))
          , dt = ct.exports
          , ut = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "w-100"
            }, [e.onlyRedirect ? i("div", {
                staticClass: "w-100"
            }, [e._v("loading design...")]) : e.showEditOptions ? i("iframe", {
                staticClass: "option-set-iframe",
                attrs: {
                    responsive: "sm",
                    src: e.iFrameUrl
                }
            }) : i("designs-view", {
                key: e.tableKey,
                staticClass: "user-design-wrapper",
                attrs: {
                    "loading-flag": e.loading,
                    fromUser: !0
                },
                scopedSlots: e._u([{
                    key: "header-actions",
                    fn: function() {
                        return [i("b-btn", {
                            attrs: {
                                variant: "primary"
                            },
                            on: {
                                click: e.createDesignTemplate
                            }
                        }, [e._v(" Create design ")])]
                    },
                    proxy: !0
                }, {
                    key: "name-column",
                    fn: function(t) {
                        var n = t.item;
                        return [i("editable-text", {
                            staticClass: "text-with-overflow events-auto",
                            attrs: {
                                tooltip: "Rename"
                            },
                            on: {
                                change: function(t) {
                                    return e.onNameChange(n)
                                }
                            },
                            model: {
                                value: n.title,
                                callback: function(t) {
                                    e.$set(n, "title", t)
                                },
                                expression: "item.title"
                            }
                        }), i("span", {
                            staticClass: "option-set-btn",
                            on: {
                                click: function(t) {
                                    return e.goToOptionSetEdition(n.optionSetId)
                                }
                            }
                        }, [e._v(" Edit options ")])]
                    }
                }, {
                    key: "table-actions",
                    fn: function(t) {
                        var n = t.item;
                        return [i("div", {
                            staticClass: "d-flex justify-content-between actions"
                        }, [i("b-btn", {
                            attrs: {
                                variant: "primary"
                            },
                            on: {
                                click: function(t) {
                                    return t.stopPropagation(),
                                    e.editDesign(n.id)
                                }
                            }
                        }, [e._v(" Edit ")]), i("loader-btn", {
                            attrs: {
                                variant: "primary",
                                loadingText: "Cloning"
                            },
                            on: {
                                click: function(t) {
                                    return t.stopPropagation(),
                                    e.designAndOptionSetCloningHandler(n.id)
                                }
                            }
                        }, [e._v(" Clone ")]), i("confirmation-btn", {
                            attrs: {
                                loadingText: "Deleting",
                                modalTitle: "Delete design",
                                disabled: e.processing
                            },
                            on: {
                                confirm: function(t) {
                                    return e.deleteDesign(n.id)
                                }
                            },
                            scopedSlots: e._u([{
                                key: "modal-content",
                                fn: function() {
                                    return [e._v(" Do you want to delete design "), i("b", [e._v(e._s(n.title))]), e._v("? ")]
                                },
                                proxy: !0
                            }], null, !0),
                            model: {
                                value: e.processing,
                                callback: function(t) {
                                    e.processing = t
                                },
                                expression: "processing"
                            }
                        }, [e._v(" Delete ")])], 1)]
                    }
                }])
            })], 1)
        }
          , pt = [];
        let ht = class extends T["d"] {
            constructor() {
                super(...arguments),
                this.loading = !1,
                this.tableKey = 0,
                this.processing = !1,
                this.showEditOptions = !1,
                this.iFrameUrl = "",
                this.onlyRedirect = !1
            }
            created() {
                if (this.$route.query.edit)
                    return this.onlyRedirect = !0,
                    void this.editDesign(this.$route.query.edit.toString(), !0)
            }
            mounted() {
                window.addEventListener("message", e=>{
                    void 0 !== e.data.showIframe && (this.showEditOptions = !!e.data.showIframe)
                }
                , !1)
            }
            async onNameChange(e) {
                this.loading = !0;
                const t = {
                    ...e,
                    isMyDesign: !0,
                    designTemplateIds: []
                };
                await Object(z["g"])(t, e.id),
                this.loading = !1
            }
            goToOptionSetEdition(e) {
                this.showEditOptions = !this.showEditOptions,
                this.iFrameUrl = we()("https://sh.customily.com", "/Set/" + e)
            }
            createDesignTemplate() {
                location.href = "/createProduct1?" + new URLSearchParams({
                    forDesignTemplateCreation: "true",
                    forMyDesigns: "true"
                })
            }
            async editDesign(e, t=!1) {
                try {
                    const i = await Object(z["c"])(e)
                      , n = new URLSearchParams({
                        designId: i.id,
                        templateId: i.designTemplateIds[0],
                        forDesignTemplateCreation: "true",
                        forMyDesigns: "true"
                    });
                    t ? location.replace("/createProduct1?" + n) : location.href = "/createProduct1?" + n
                } catch (error) {
                    return void console.log("error on editDesign: " + error)
                }
            }
            async deleteDesign(e) {
                const t = await Object(z["c"])(e);
                if (1 == t.designTemplateIds.length) {
                    const e = t.designTemplateIds[0];
                    await Object(L["c"])(e)
                }
                await Object(z["b"])(e),
                this.refreshData()
            }
            async designAndOptionSetCloningHandler(e) {
                const t = await Object(z["c"])(e);
                try {
                    const [e,i] = await Promise.all([Object(L["a"])(t.designTemplateIds[0]), Object(z["a"])(t.id)])
                      , {setId: n} = await Object(L["b"])(e.id)
                      , o = {
                        ...i,
                        designTemplateIds: [e.id],
                        optionSetId: n
                    };
                    await Object(z["g"])(o, o.id),
                    this.refreshData()
                } catch (error) {
                    console.log(error)
                }
            }
            refreshData() {
                this.tableKey++
            }
        }
        ;
        ht = Object(l["b"])([Object(T["a"])({
            name: "UserDesigns",
            components: {
                DesignsView: Ae,
                ConfirmationBtn: k["a"],
                LoaderBtn: d["a"],
                EditableText: be["a"]
            }
        })], ht);
        var mt = ht
          , gt = mt
          , ft = (n("ade2"),
        Object(v["a"])(gt, ut, pt, !1, null, "38de33d0", null))
          , vt = ft.exports;
        const bt = r["a"].prototype.push;
        r["a"].prototype.push = function(e, t, i) {
            return t || i ? bt.call(this, e, t, i) : bt.call(this, e).catch(e=>r["a"].isNavigationFailure(e) ? e : Promise.reject(e))
        }
        ,
        o["default"].use(r["a"]);
        const yt = [{
            path: "/admin",
            name: "Admin",
            component: y,
            meta: {
                breadcrumb: [{
                    name: "Admin"
                }]
            }
        }, {
            path: "/admin/users",
            name: "Users",
            component: Ye,
            meta: {
                breadcrumb: [{
                    name: "Admin",
                    link: "/admin"
                }, {
                    name: "Users",
                    link: "/admin/users"
                }]
            }
        }, {
            path: "/admin/users/:username",
            component: dt,
            name: "User",
            meta: {
                breadcrumb: [{
                    name: "Admin",
                    link: "/admin"
                }, {
                    name: "Users",
                    link: "/admin/users"
                }, {
                    name: "User"
                }]
            }
        }, {
            path: "/admin/templateProducts",
            component: $,
            name: "Template Products",
            meta: {
                breadcrumb: [{
                    name: "Admin",
                    link: "/admin"
                }, {
                    name: "Template Products"
                }]
            }
        }, {
            path: "/admin/designs",
            component: De,
            name: "Designs",
            meta: {
                breadcrumb: [{
                    name: "Admin",
                    link: "/admin"
                }, {
                    name: "Designs"
                }]
            }
        }, {
            path: "/designs",
            component: vt,
            name: "UserDesigns"
        }]
          , wt = new r["a"]({
            mode: "history",
            base: "/",
            routes: yt
        });
        var Ct = wt;
        (function() {
            function e(e) {
                e.router = Ct
            }
            e.$inject = ["$scope"],
            angular.module("app.ctrls").controller("AdminPanelCtrl", e)
        }
        )()
    },
    ddd7: function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("ec26")
          , o = i("b421")
          , r = i("576f")
          , a = i("1424");
        (function() {
            function e(e, t, i, s, l, c, d, u, p) {
                function h(e) {
                    var t = new Map;
                    !e.dynamicImagesPath || e.dynamicImagesPath instanceof Map || (JSON.parse(e.dynamicImagesPath).map((function(e) {
                        t.set(e[0], e[1])
                    }
                    )),
                    e.dynamicImagesPath = t)
                }
                function m(i, n, o, a=null) {
                    var s = o.getActiveObject();
                    "image-placeholder" == s.type && s.dynamicImagesPath && (t.start("Saving Images"),
                    Object(r["d"])("preview", n).then(n=>{
                        e.$apply(()=>{
                            a ? s.dynamicImagesPath.set(i, {
                                path: n.Path,
                                fileName: a.split(".")[0]
                            }) : s.dynamicImagesPath.set(i, n.Path),
                            t.stop()
                        }
                        )
                    }
                    ))
                }
                function g(e, t, n) {
                    return i((async function(i, r) {
                        if ("undefined" === typeof n)
                            return void i();
                        let a = "";
                        t.dynamicImageVariation = n;
                        const s = t.dynamicImagesPath.get(n);
                        if (t.imageLibraryId) {
                            const e = await d.getLibraryElementAtPosition(t.imageLibraryId, n);
                            e && (a = e.Path)
                        } else
                            t.dynamicImagesPath && s && (a = s.path ? s.path : s);
                        if (a) {
                            const n = new Image;
                            n.onload = function() {
                                t.setElement(n),
                                e.renderAll(),
                                i()
                            }
                            ,
                            n.onerror = function() {
                                r()
                            }
                            ,
                            n.crossOrigin = "Anonymous",
                            n.src = Object(o["a"])(a)
                        } else {
                            var l = {
                                imageUrl: "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                            };
                            c.showStaticImage(e, t, l),
                            i()
                        }
                    }
                    ))
                }
                function f(e, t) {
                    const i = e.getArtworkWidth() / e.getZoom() * e.getEffectiveZoom()
                      , o = e.getArtworkHeight() / e.getZoom() * e.getEffectiveZoom()
                      , r = new fabric.ImagePlaceholder(null,{
                        originX: "center",
                        originY: "center",
                        centeredRotation: !0,
                        left: i / 2,
                        top: o / 2,
                        stroke: "black",
                        strokeWidth: e.getVisibleStrokeWidth(),
                        strokeDashArray: e.getDashedArray(),
                        id: t,
                        uuid: Object(n["a"])(),
                        fullColor: !0,
                        grading: !1,
                        lockSkewingX: !0,
                        lockSkewingY: !0,
                        lockScalingFlip: !0,
                        width: .3 * i,
                        height: .3 * o,
                        zIndex: e.getHighestZIndex() + 1,
                        imageUrl: !1,
                        hasStaticImage: !1,
                        dynamicImagesPath: new Map,
                        dynamicImageVariation: 1,
                        color: u.createColorObj({
                            hex: "#000000",
                            cmyk: "0,0,0,1"
                        }),
                        preventEditMode: !0,
                        isOverlay: !1,
                        isPrintArea: !1,
                        isColorOptions: !1,
                        podProductImagesMetadata: null
                    });
                    return r.name = Object(a["e"])(r),
                    r
                }
                function v(e) {
                    if ("string" === typeof e) {
                        const t = new Map;
                        return JSON.parse(e).map((function(e) {
                            t.set(e[0], e[1])
                        }
                        )),
                        t
                    }
                    return e
                }
                function b(e, i, n) {
                    return new Promise(async(o,r)=>{
                        try {
                            const c = e.map(e=>Array.from(v(e.dynamicImagesPath).values()))
                              , d = [].concat.apply([], c)
                              , u = d.map(e=>e.path ? e.path.replace(/^.*[\\\/]/, "") : e.replace(/^.*[\\\/]/, ""))
                              , p = t.message()
                              , h = t.state().blockCount > 0;
                            t.start("Checking images");
                            const m = await l.doDynamicImagesNeedResizing(u, n);
                            if (t.stop(),
                            m) {
                                t.stop();
                                const e = s.confirm().title("Large Dynamic Images").textContent("There are large images loaded into Dynamic Image elements that will result in bad performance and slow loading times on your store, do you want to resize them to an optimal size?").ok("Yes").cancel("No");
                                try {
                                    await s.show(e);
                                    try {
                                        t.start("Resizing images!");
                                        const e = await l.resizeDynamicImages(u, n);
                                        for (const t of i) {
                                            const i = v(t.dynamicImagesPath);
                                            for (const t of i) {
                                                const n = e.find(e=>e.OldFilename === t[1].replace(/^.*[\\\/]/, ""));
                                                if (n) {
                                                    const e = t[1].replace(/(.*)\/.*/i, "$1/" + n.NewFilename);
                                                    i.set(t[0], e)
                                                }
                                            }
                                            t.dynamicImagesPath = JSON.stringify(Array.from(i.entries()))
                                        }
                                        t.stop()
                                    } catch (error) {
                                        return t.stop(),
                                        console.error("Error resizing dynamic images", error),
                                        void r(error)
                                    }
                                } catch (a) {} finally {
                                    h && t.start(p)
                                }
                            }
                            o()
                        } catch (error) {
                            console.error("Error checking for dynamic images", error),
                            r(error)
                        }
                    }
                    )
                }
                async function y(e, t, i, n) {
                    await p.changeDynamicColorPosition(e, t, i, n)
                }
                async function w(e, t, i) {
                    await p.saveDynamicColor(e, t, i)
                }
                return {
                    parseDynamicImagesPath: v,
                    initializeDynamicImagesMap: h,
                    saveDynamicImageToPlaceholder: m,
                    createDynamicImage: f,
                    showDynamicImage: g,
                    limitDynamicImageFileSizes: b,
                    changeDynamicImageColorPosition: y,
                    saveDynamicImageColor: w
                }
            }
            e.$inject = ["$rootScope", "blockUI", "$q", "$mdDialog", "ImageAPIService", "TestImageService", "LibrariesAPIService", "MultipleFontService", "ElementsColorService"],
            angular.module("app.shared.services").factory("DynamicImageService", e)
        }
        )()
    },
    ddea: function(e, t, i) {
        e.exports = i.p + "img/align-left.c2949b2d.svg?x-request=html"
    },
    dec7: function(e, t, i) {},
    dfb7: function(t, i, n) {
        "use strict";
        n.r(i);
        var o = n("2b0e")
          , r = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "vue-need-bootstrap h100"
            }, [i("div", {
                staticClass: "d-flex justify-content-center w-100 h-100 overflow-auto"
            }, [e.loading ? e._e() : i("div", {
                staticClass: "app-container d-flex flex-column h-100"
            }, [i("div", {
                staticClass: "text-center nav-selector"
            }, [i("div", {
                staticClass: "link",
                class: {
                    active: "account" == e.currentPage
                },
                on: {
                    click: function(t) {
                        e.currentPage = "account"
                    }
                }
            }, [e._v(" Account ")]), e._v(" | "), i("div", {
                staticClass: "link",
                class: {
                    active: "integrations" == e.currentPage
                },
                on: {
                    click: function(t) {
                        e.currentPage = "integrations"
                    }
                }
            }, [e._v(" Integrations ")]), e._v(" "), i("span", {
                style: {
                    visibility: e.hasBilling ? "" : "hidden"
                }
            }, [e._v("| "), i("div", {
                staticClass: "link",
                class: {
                    active: "billing" == e.currentPage
                },
                on: {
                    click: function(t) {
                        e.currentPage = "billing"
                    }
                }
            }, [e._v(" Billing ")])])]), e.user ? i("div", {
                staticClass: "container d-flex flex-grow-1 h-100 w-100"
            }, [i("transition", {
                attrs: {
                    name: "fade",
                    mode: "out-in"
                }
            }, ["account" == e.currentPage ? i("div", {
                key: "account",
                staticClass: "w-100"
            }, [i("AccountComponent", {
                on: {
                    "user-updated": e.onUserUpdated
                }
            })], 1) : e._e(), "integrations" == e.currentPage ? i("div", {
                key: "integrations",
                staticClass: "w-100"
            }, [i("Integrations", {
                on: {
                    "user-updated": e.onUserUpdated
                }
            })], 1) : e._e(), "billing" == e.currentPage ? i("div", {
                key: "billing",
                staticClass: "w-100"
            }, [i("Billing", {
                on: {
                    "user-updated": e.onUserUpdated
                }
            })], 1) : e._e()])], 1) : e._e()]), e.loading ? i("div", {
                staticClass: "d-flex justify-content-center w-100 h-100 align-items-center"
            }, [i("b-spinner", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.loading,
                    expression: "loading"
                }],
                staticClass: "mr-2",
                attrs: {
                    variant: "primary"
                }
            })], 1) : e._e()])])
        }
          , a = []
          , s = n("9ab4")
          , l = n("2fe1")
          , c = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "account-view"
            }, [i("EmailUpdateDialog", {
                attrs: {
                    email: e.email
                },
                model: {
                    value: e.showEmailChangeModal,
                    callback: function(t) {
                        e.showEmailChangeModal = t
                    },
                    expression: "showEmailChangeModal"
                }
            }), i("ChangePasswordDialog", {
                on: {
                    "password-changed": function(t) {
                        return e.onPasswordChanged()
                    }
                },
                model: {
                    value: e.showPasswordChangeModal,
                    callback: function(t) {
                        e.showPasswordChangeModal = t
                    },
                    expression: "showPasswordChangeModal"
                }
            }), i("b-modal", {
                attrs: {
                    title: "Name Update",
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    "no-close-on-backdrop": ""
                },
                on: {
                    ok: e.updateUserName
                },
                model: {
                    value: e.showNameWarnModal,
                    callback: function(t) {
                        e.showNameWarnModal = t
                    },
                    expression: "showNameWarnModal"
                }
            }, [e._v(" As you have an old password, updating the account name will force a password reset, you WILL have to reset your password through the email that will be sent to continue using your account. ")]), i("b-row", {
                staticClass: "content mt-4 mb-4"
            }, [i("b-col", {
                staticClass: "d-flex flex-wrap justify-content-center mb-3",
                attrs: {
                    cols: "6"
                }
            }, [i("b-card", {
                staticClass: "white-card card-with-input",
                attrs: {
                    title: "Profile"
                }
            }, [i("b-form", {
                on: {
                    submit: function(t) {
                        return t.stopPropagation(),
                        t.preventDefault(),
                        e.onProfileSubmit()
                    }
                }
            }, [i("b-form-group", {
                attrs: {
                    id: "username-input",
                    label: "Username",
                    "label-for": "username-input"
                }
            }, [i("b-form-input", {
                attrs: {
                    id: "username-input",
                    required: "",
                    readonly: ""
                },
                model: {
                    value: e.user.Username,
                    callback: function(t) {
                        e.$set(e.user, "Username", t)
                    },
                    expression: "user.Username"
                }
            })], 1), i("b-form-group", {
                attrs: {
                    id: "name-input",
                    label: "Name",
                    "label-for": "name-input"
                }
            }, [i("b-form-input", {
                attrs: {
                    id: "name-input",
                    placeholder: "Account name",
                    required: "",
                    trim: "",
                    disabled: e.savingName
                },
                model: {
                    value: e.name,
                    callback: function(t) {
                        e.name = t
                    },
                    expression: "name"
                }
            })], 1), i("LoaderBtn", {
                staticClass: "float-right",
                attrs: {
                    type: "submit",
                    variant: "primary",
                    loading: e.savingName,
                    disabled: !e.modifiedName,
                    "loading-text": "Saving"
                }
            }, [e._v(" Save ")])], 1)], 1)], 1), i("b-col", {
                staticClass: "d-flex flex-wrap justify-content-center mb-3",
                attrs: {
                    cols: "6"
                }
            }, [i("b-card", {
                staticClass: "white-card card-with-input",
                attrs: {
                    title: "Login"
                }
            }, [i("b-form", [i("b-form-group", {
                attrs: {
                    id: "email-input",
                    label: "Email",
                    "label-for": "email-input"
                }
            }, [i("b-form-input", {
                attrs: {
                    id: "email-input",
                    type: "email",
                    required: "",
                    readonly: ""
                },
                model: {
                    value: e.email,
                    callback: function(t) {
                        e.email = t
                    },
                    expression: "email"
                }
            }), i("b-form-text", {
                staticClass: "text-right link"
            }, [i("a", {
                class: {
                    disabled: e.loadingEmail || null === e.email
                },
                attrs: {
                    href: "javascript:void(0)"
                },
                on: {
                    click: function(t) {
                        e.showEmailChangeModal = !0
                    }
                }
            }, [e._v("Change email")])])], 1), i("b-form-group", {
                attrs: {
                    id: "password-input",
                    label: "Password",
                    "label-for": "password-input"
                }
            }, [i("b-form-input", {
                attrs: {
                    id: "password-input",
                    type: "password",
                    value: "fakepassword",
                    readonly: "",
                    required: ""
                }
            }), i("b-form-text", {
                staticClass: "text-right link"
            }, [i("a", {
                attrs: {
                    href: "javascript:void(0)"
                },
                on: {
                    click: function(t) {
                        e.showPasswordChangeModal = !0
                    }
                }
            }, [e._v("Change password")])])], 1)], 1)], 1)], 1), e.showReferralCard ? i("b-col", {
                staticClass: "d-flex flex-wrap justify-content-center mt-3",
                attrs: {
                    cols: "6"
                }
            }, [i("b-card", {
                staticClass: "white-card card-with-input"
            }, [i("b-card-title", [e._v(" Referrals "), i("b-icon", {
                staticClass: "h6",
                attrs: {
                    id: "question-circle-icon",
                    icon: "question-circle"
                }
            }), i("b-tooltip", {
                attrs: {
                    target: "question-circle-icon",
                    triggers: "hover",
                    container: "bootstrap-parent-container"
                }
            }, [e._v(" Invite your friends to Customily and get a discount for every friend! Learn more about how referrals work "), i("a", {
                attrs: {
                    href: "https://help.customily.com/en/article/how-to-get-a-discount-by-inviting-your-friends"
                }
            }, [e._v("here")])])], 1), i("b-form", {
                on: {
                    submit: function(t) {
                        return t.stopPropagation(),
                        t.preventDefault(),
                        e.onReferrerSubmit()
                    }
                }
            }, [i("b-form-group", {
                attrs: {
                    id: "your-referral-code",
                    label: "Share this code with your friends",
                    "label-for": "your-referral-code"
                }
            }, [i("b-form-input", {
                staticStyle: {
                    cursor: "text !important"
                },
                attrs: {
                    id: "referral-code-input",
                    required: "",
                    disabled: ""
                },
                model: {
                    value: e.myReferralCode,
                    callback: function(t) {
                        e.myReferralCode = t
                    },
                    expression: "myReferralCode"
                }
            }), i("b-form-text", [e._v(" " + e._s(e.numberReferred) + " friends used your referral code. ")])], 1), i("b-modal", {
                attrs: {
                    title: "Success!",
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    "no-close-on-backdrop": ""
                },
                on: {
                    ok: e.updateUserName
                },
                model: {
                    value: e.showReferrerSuccess,
                    callback: function(t) {
                        e.showReferrerSuccess = t
                    },
                    expression: "showReferrerSuccess"
                }
            }, [e._v(" You successfully used a referral code, both you and your friend will receive a discount ")]), i("b-form-group", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.showReferrerInput,
                    expression: "showReferrerInput"
                }],
                attrs: {
                    id: "referrer",
                    label: "Enter your friend's code and get a discount",
                    "label-for": "referrer"
                }
            }, [i("b-form-input", {
                attrs: {
                    id: "referrer"
                },
                model: {
                    value: e.referrer,
                    callback: function(t) {
                        e.referrer = t
                    },
                    expression: "referrer"
                }
            })], 1), e.referrerEmail ? i("b-form-text", [e._v(" You've used "), i("b", [e._v(e._s(e.referrerEmail))]), e._v(" code ")]) : e._e(), e.referrerErrorMessage ? i("div", {
                staticClass: "invalid-feedback d-block"
            }, [e._v(" " + e._s(e.referrerErrorMessage) + " ")]) : e._e(), e.showReferrerInput ? i("LoaderBtn", {
                staticClass: "float-right",
                attrs: {
                    type: "submit",
                    variant: "primary",
                    loading: e.savingReferrer,
                    "loading-text": "Saving"
                }
            }, [e._v(" Save ")]) : e._e()], 1)], 1)], 1) : e._e(), i("b-col", {
                staticClass: "d-flex flex-wrap justify-content-center mt-3",
                attrs: {
                    cols: "6"
                }
            }, [i("b-card", {
                staticClass: "white-card card-with-input",
                staticStyle: {
                    display: "none"
                },
                attrs: {
                    title: "Security"
                }
            }, [i("b-form", {
                on: {
                    submit: function(t) {
                        return t.stopPropagation(),
                        t.preventDefault(),
                        e.onSecuritySubmit()
                    }
                }
            }, [i("b-form-group", [i("b-form-checkbox", {
                attrs: {
                    name: "check-button",
                    switch: ""
                },
                model: {
                    value: e.clipartProtection,
                    callback: function(t) {
                        e.clipartProtection = t
                    },
                    expression: "clipartProtection"
                }
            }, [e._v(" Clipart protection ")]), i("b-form-text", [e._v("Clipart protection will only be available for newly created image libraries elements ")])], 1), i("LoaderBtn", {
                staticClass: "float-right",
                attrs: {
                    type: "submit",
                    variant: "primary",
                    loading: e.savingSecurity,
                    disabled: !e.modifiedSecurity,
                    "loading-text": "Saving"
                }
            }, [e._v(" Save ")])], 1)], 1)], 1)], 1)], 1)
        }
          , d = []
          , u = n("406d");
        const p = async()=>await u["a"].get("Users/Logout")
          , h = async e=>{
            const t = await u["a"].post("Users/PasswordCheck", Object(u["c"])({
                Password: e
            }), {
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                }
            });
            return t.data
        }
          , m = async()=>{
            const e = await u["a"].get("Users/Email");
            return e.data
        }
          , g = async e=>{
            const t = await u["a"].get("Users/ApiKey", {
                params: {
                    password: e
                }
            });
            return t.data
        }
          , f = async e=>{
            const t = await u["a"].post("Users/ApiKey", null, {
                params: {
                    password: e
                }
            });
            return t.data
        }
          , v = async(e,t)=>{
            const i = await u["a"].post("Users/Email", Object(u["c"])({
                Email: t,
                Password: e
            }), {
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                }
            });
            return i.data
        }
          , b = async(e,t)=>{
            const i = await u["a"].put("Users", Object(u["c"])({
                Name: e,
                SegmentLibraryImages: t
            }), {
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                }
            });
            return i.data
        }
          , y = async()=>{
            const e = await u["a"].get("Users/Email/Confirmation");
            return e.data
        }
          , w = async(e,t)=>{
            const i = await u["a"].post("Users/Email/Confirmation", Object(u["c"])({
                Username: e,
                Token: t
            }), {
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                }
            });
            return i.data
        }
          , C = async(e,t,i)=>{
            const n = await u["a"].post("Users/Password", Object(u["c"])({
                CurrentPassword: e,
                NewPassword: t,
                ConfirmationPassword: i
            }), {
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                }
            });
            return n.data
        }
          , x = async e=>{
            const t = await u["a"].post("Users/RemoveBg", null, {
                params: {
                    key: e
                }
            });
            return t.data
        }
          , S = async e=>{
            const {data: t} = await u["a"].post("Users/VanceAi", null, {
                params: {
                    key: e
                }
            });
            return t
        }
          , P = async(e,t)=>{
            const i = await u["a"].post("Users/MelcoCredentials", null, {
                params: {
                    melcoUsername: e,
                    melcoApiKey: t
                }
            });
            return i.data
        }
          , k = async e=>{
            const t = await u["a"].post("Users/Referrer", null, {
                params: {
                    referrer: e
                }
            });
            return t.data
        }
          , _ = async()=>{
            const e = await u["a"].get("Users/Referrer");
            return e.data
        }
        ;
        var A = n("4bb5")
          , T = n("5f5b")
          , E = n("b1e0")
          , O = n("4af8")
          , I = n("7bb1")
          , D = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-modal", {
                attrs: {
                    size: "lg",
                    title: "Email change",
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    "hide-footer": ""
                },
                scopedSlots: e._u([{
                    key: "default",
                    fn: function(t) {
                        var n = t.cancel
                          , o = t.ok;
                        return [i("div", {
                            directives: [{
                                name: "show",
                                rawName: "v-show",
                                value: !e.emailChanged,
                                expression: "!emailChanged"
                            }]
                        }, [i("b-form-group", {
                            staticClass: "my-3",
                            attrs: {
                                id: "current-email-input",
                                "label-cols": "3",
                                "content-cols": "9",
                                label: "Current email",
                                "label-for": "current-email-input"
                            }
                        }, [i("b-form-input", {
                            attrs: {
                                id: "current-email-input",
                                type: "email",
                                disabled: ""
                            },
                            model: {
                                value: e.email,
                                callback: function(t) {
                                    e.email = t
                                },
                                expression: "email"
                            }
                        }), i("b-form-text", {
                            directives: [{
                                name: "show",
                                rawName: "v-show",
                                value: e.pendingEmail,
                                expression: "pendingEmail"
                            }]
                        }, [i("i", {
                            staticClass: "fa fa-info-circle mr-1"
                        }), e._v("You have a pending confirmation for "), i("b", [e._v(e._s(e.pendingEmail))]), e._v(".")])], 1), i("ValidationObserver", {
                            scopedSlots: e._u([{
                                key: "default",
                                fn: function(t) {
                                    var o = t.handleSubmit
                                      , r = t.valid;
                                    return [i("b-form", {
                                        on: {
                                            submit: function(t) {
                                                return t.stopPropagation(),
                                                t.preventDefault(),
                                                o(e.changeEmailAddress)
                                            }
                                        }
                                    }, [i("ValidationProvider", {
                                        attrs: {
                                            rules: "email|required",
                                            name: "Email"
                                        },
                                        scopedSlots: e._u([{
                                            key: "default",
                                            fn: function(t) {
                                                var n = t.valid
                                                  , o = t.errors;
                                                return [i("b-form-group", {
                                                    staticClass: "my-3",
                                                    attrs: {
                                                        id: "new-email-input",
                                                        "label-cols": "3",
                                                        "content-cols": "9",
                                                        label: "New email",
                                                        "label-for": "new-email-input",
                                                        "invalid-feedback": e.emailsAreTheSame ? "New email must be different" : e.invalidEmail ? "Email already in use" : o[0],
                                                        state: !e.invalidEmail && !e.emailsAreTheSame && (!o[0] && (!!n || null))
                                                    }
                                                }, [i("b-form-input", {
                                                    attrs: {
                                                        id: "new-email-input",
                                                        type: "email",
                                                        state: !e.invalidEmail && !e.emailsAreTheSame && (!o[0] && (!!n || null)),
                                                        disabled: e.savingEmail,
                                                        trim: ""
                                                    },
                                                    model: {
                                                        value: e.newEmail,
                                                        callback: function(t) {
                                                            e.newEmail = t
                                                        },
                                                        expression: "newEmail"
                                                    }
                                                })], 1)]
                                            }
                                        }], null, !0)
                                    }), i("ValidationProvider", {
                                        attrs: {
                                            rules: "required|min:8",
                                            name: "Password"
                                        },
                                        scopedSlots: e._u([{
                                            key: "default",
                                            fn: function(t) {
                                                var n = t.valid
                                                  , o = t.errors;
                                                return [i("b-form-group", {
                                                    staticClass: "my-3",
                                                    attrs: {
                                                        id: "current-password-input",
                                                        "label-cols": "3",
                                                        "content-cols": "9",
                                                        label: "Current password",
                                                        "label-for": "current-password-input",
                                                        "invalid-feedback": e.invalidPassword ? "Wrong password" : o[0],
                                                        state: !e.invalidPassword && (!o[0] && (!!n || null))
                                                    }
                                                }, [i("b-form-input", {
                                                    attrs: {
                                                        id: "current-password-input",
                                                        type: "password",
                                                        state: !e.invalidPassword && (!o[0] && (!!n || null)),
                                                        disabled: e.savingEmail
                                                    },
                                                    model: {
                                                        value: e.currentPassword,
                                                        callback: function(t) {
                                                            e.currentPassword = t
                                                        },
                                                        expression: "currentPassword"
                                                    }
                                                })], 1)]
                                            }
                                        }], null, !0)
                                    }), i("div", {
                                        staticClass: "error-message w-100 pb-3 text-center"
                                    }, [e._v(" " + e._s(e.emailErrorMessage) + " ")]), i("div", {
                                        staticClass: "modal-footer row pb-0"
                                    }, [i("b-button", {
                                        attrs: {
                                            type: "reset",
                                            disabled: e.savingEmail
                                        },
                                        on: {
                                            click: function(e) {
                                                return n()
                                            }
                                        }
                                    }, [e._v(" Cancel ")]), i("LoaderBtn", {
                                        attrs: {
                                            variant: "primary",
                                            type: "submit",
                                            loadingText: "Saving",
                                            loading: e.savingEmail,
                                            disabled: !r || e.emailsAreTheSame || e.savingEmail
                                        }
                                    }, [e._v(" Change email address ")])], 1)], 1)]
                                }
                            }], null, !0)
                        })], 1), i("div", {
                            directives: [{
                                name: "show",
                                rawName: "v-show",
                                value: e.emailChanged,
                                expression: "emailChanged"
                            }],
                            staticClass: "align-items-center confirmation-message justify-content-center"
                        }, [i("div", [e._v(" A confirmation email was sent to "), i("b", [e._v(e._s(e.newEmail))]), e._v(". Please check your inbox and confirm your new email. ")])]), i("div", {
                            directives: [{
                                name: "show",
                                rawName: "v-show",
                                value: e.emailChanged,
                                expression: "emailChanged"
                            }],
                            staticClass: "modal-footer row pb-0"
                        }, [i("b-button", {
                            attrs: {
                                variant: "primary"
                            },
                            on: {
                                click: function(e) {
                                    return o()
                                }
                            }
                        }, [e._v(" Ok ")])], 1)]
                    }
                }]),
                model: {
                    value: e.isVisible,
                    callback: function(t) {
                        e.isVisible = t
                    },
                    expression: "isVisible"
                }
            })
        }
          , F = []
          , M = n("6aac")
          , $ = n("60a3");
        o["default"].use(T["b"]);
        let B = class extends M["a"] {
            constructor() {
                super(...arguments),
                this.savingEmail = !1,
                this.emailChanged = !1,
                this.isVisible = !1,
                this.newEmail = null,
                this.currentPassword = null,
                this.emailErrorMessage = null,
                this.pendingEmail = null,
                this.invalidPassword = !1,
                this.invalidEmail = !1
            }
            get emailsAreTheSame() {
                return this.email === this.newEmail
            }
            onIsVisibleChange() {
                this.isVisible && (this.emailErrorMessage = null,
                this.emailChanged = !1,
                this.checkPendingConfirmation()),
                this.$emit("change", this.isVisible)
            }
            async checkPendingConfirmation() {
                const e = await y();
                e.PendingConfirmation && e.NewEmail ? this.pendingEmail = e.NewEmail : this.pendingEmail = null
            }
            async created() {
                this.checkPendingConfirmation()
            }
            async changeEmailAddress() {
                try {
                    this.savingEmail = !0,
                    this.emailErrorMessage = null,
                    this.invalidPassword = !1,
                    this.invalidEmail = !1,
                    this.currentPassword && this.newEmail && await v(this.currentPassword, this.newEmail),
                    this.emailChanged = !0
                } catch (error) {
                    var e;
                    const i = error;
                    400 === (null === (e = i.response) || void 0 === e ? void 0 : e.status) ? i.response.data.Message && ("Invalid Password" === i.response.data.Message ? this.invalidPassword = !0 : "Email already in use" === i.response.data.Message ? this.invalidEmail = !0 : this.emailErrorMessage = i.response.data.Message) : (this.emailErrorMessage = "Fatal error",
                    window.rumReportError(i))
                } finally {
                    this.savingEmail = !1
                }
            }
        }
        ;
        Object(s["b"])([Object($["c"])({
            default: null
        })], B.prototype, "email", void 0),
        Object(s["b"])([Object($["b"])("change")], B.prototype, "visible", void 0),
        Object(s["b"])([Object(A["b"])("user")], B.prototype, "user", void 0),
        Object(s["b"])([Object($["e"])("isVisible")], B.prototype, "onIsVisibleChange", null),
        B = Object(s["b"])([Object(l["b"])({
            name: "EmailUpdateDialog",
            components: {
                ValidationProvider: I["b"],
                ValidationObserver: I["a"],
                LoaderBtn: O["a"]
            }
        })], B);
        var j = B
          , L = j
          , R = (n("f8fe"),
        n("2877"))
          , U = Object(R["a"])(L, D, F, !1, null, "76d81062", null)
          , z = U.exports
          , N = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-modal", {
                attrs: {
                    size: "lg",
                    title: "Change password",
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    "hide-footer": ""
                },
                scopedSlots: e._u([{
                    key: "default",
                    fn: function(t) {
                        var n = t.cancel;
                        return [i("div", {
                            directives: [{
                                name: "show",
                                rawName: "v-show",
                                value: !e.passwordChanged,
                                expression: "!passwordChanged"
                            }]
                        }, [i("ValidationObserver", {
                            scopedSlots: e._u([{
                                key: "default",
                                fn: function(t) {
                                    var o = t.handleSubmit
                                      , r = t.valid;
                                    return [i("b-form", {
                                        on: {
                                            submit: function(t) {
                                                return t.stopPropagation(),
                                                t.preventDefault(),
                                                o(e.changePassword)
                                            }
                                        }
                                    }, [i("ValidationProvider", {
                                        attrs: {
                                            rules: "required|min:8",
                                            name: "Current password"
                                        },
                                        scopedSlots: e._u([{
                                            key: "default",
                                            fn: function(t) {
                                                var n = t.valid
                                                  , o = t.errors;
                                                return [i("b-form-group", {
                                                    staticClass: "my-3",
                                                    attrs: {
                                                        "label-cols": "3",
                                                        "content-cols": "9",
                                                        label: "Current password",
                                                        "label-for": "current-password-input",
                                                        "invalid-feedback": e.invalidPassword ? "Wrong password" : o[0],
                                                        state: !e.invalidPassword && (!o[0] && (!!n || null))
                                                    }
                                                }, [i("b-form-input", {
                                                    attrs: {
                                                        type: "password",
                                                        state: !e.invalidPassword && (!o[0] && (!!n || null)),
                                                        disabled: e.savingPassword
                                                    },
                                                    model: {
                                                        value: e.currentPassword,
                                                        callback: function(t) {
                                                            e.currentPassword = t
                                                        },
                                                        expression: "currentPassword"
                                                    }
                                                })], 1)]
                                            }
                                        }], null, !0)
                                    }), i("ValidationProvider", {
                                        attrs: {
                                            rules: "required|min:8",
                                            name: "Password",
                                            vid: "newPassword"
                                        },
                                        scopedSlots: e._u([{
                                            key: "default",
                                            fn: function(t) {
                                                var n = t.valid
                                                  , o = t.errors;
                                                return [i("b-form-group", {
                                                    staticClass: "my-3",
                                                    attrs: {
                                                        id: "new-password-input",
                                                        "label-cols": "3",
                                                        "content-cols": "9",
                                                        label: "New password",
                                                        "label-for": "new-password-input",
                                                        "invalid-feedback": o[0],
                                                        state: !o[0] && (!!n || null)
                                                    }
                                                }, [i("b-form-input", {
                                                    attrs: {
                                                        type: "password",
                                                        state: !o[0] && (!!n || null),
                                                        disabled: e.savingPassword
                                                    },
                                                    model: {
                                                        value: e.newPassword,
                                                        callback: function(t) {
                                                            e.newPassword = t
                                                        },
                                                        expression: "newPassword"
                                                    }
                                                })], 1)]
                                            }
                                        }], null, !0)
                                    }), i("ValidationProvider", {
                                        attrs: {
                                            rules: "required|min:8|password-confirmed:newPassword",
                                            name: "Password"
                                        },
                                        scopedSlots: e._u([{
                                            key: "default",
                                            fn: function(t) {
                                                var n = t.valid
                                                  , o = t.errors;
                                                return [i("b-form-group", {
                                                    staticClass: "my-3",
                                                    attrs: {
                                                        id: "confirm-new-password-input",
                                                        "label-cols": "3",
                                                        "content-cols": "9",
                                                        label: "Confirm new password",
                                                        "label-for": "confirm-new-password-input",
                                                        "invalid-feedback": o[0],
                                                        state: !o[0] && (!!n || null)
                                                    }
                                                }, [i("b-form-input", {
                                                    attrs: {
                                                        type: "password",
                                                        state: !o[0] && (!!n || null),
                                                        disabled: e.savingPassword
                                                    },
                                                    model: {
                                                        value: e.confirmNewPassword,
                                                        callback: function(t) {
                                                            e.confirmNewPassword = t
                                                        },
                                                        expression: "confirmNewPassword"
                                                    }
                                                })], 1)]
                                            }
                                        }], null, !0)
                                    }), i("div", {
                                        staticClass: "error-message w-100 pb-3 text-center"
                                    }, [e._v(" " + e._s(e.errorMessage) + " ")]), i("div", {
                                        staticClass: "modal-footer row pb-0"
                                    }, [i("b-button", {
                                        attrs: {
                                            type: "reset",
                                            disabled: e.savingPassword
                                        },
                                        on: {
                                            click: function(e) {
                                                return n()
                                            }
                                        }
                                    }, [e._v(" Cancel ")]), i("LoaderBtn", {
                                        attrs: {
                                            variant: "primary",
                                            type: "submit",
                                            loadingText: "Saving",
                                            loading: e.savingPassword,
                                            disabled: !r || e.savingPassword
                                        }
                                    }, [e._v(" Update password ")])], 1)], 1)]
                                }
                            }], null, !0)
                        })], 1), i("div", {
                            directives: [{
                                name: "show",
                                rawName: "v-show",
                                value: e.passwordChanged,
                                expression: "passwordChanged"
                            }],
                            staticClass: "align-items-center confirmation-message justify-content-center"
                        }, [i("div", [e._v(" Password successfully changed! ")])]), i("div", {
                            directives: [{
                                name: "show",
                                rawName: "v-show",
                                value: e.passwordChanged,
                                expression: "passwordChanged"
                            }],
                            staticClass: "modal-footer row pb-0"
                        }, [i("b-button", {
                            attrs: {
                                variant: "primary"
                            },
                            on: {
                                click: function(t) {
                                    return e.onPasswordChanged()
                                }
                            }
                        }, [e._v(" Continue ")])], 1)]
                    }
                }]),
                model: {
                    value: e.isVisible,
                    callback: function(t) {
                        e.isVisible = t
                    },
                    expression: "isVisible"
                }
            })
        }
          , V = [];
        o["default"].use(T["b"]);
        let G = class extends M["a"] {
            constructor() {
                super(...arguments),
                this.currentPassword = "",
                this.newPassword = "",
                this.confirmNewPassword = "",
                this.savingPassword = !1,
                this.passwordChanged = !1,
                this.invalidPassword = !1,
                this.errorMessage = null
            }
            onIsVisibleChange() {
                this.isVisible && (this.errorMessage = null,
                this.passwordChanged = !1,
                this.currentPassword = "",
                this.newPassword = "",
                this.confirmNewPassword = ""),
                this.$emit("change", this.isVisible)
            }
            async changePassword() {
                try {
                    this.savingPassword = !0,
                    this.errorMessage = null,
                    this.currentPassword && this.newPassword && this.confirmNewPassword && await C(this.currentPassword, this.newPassword, this.confirmNewPassword),
                    this.passwordChanged = !0
                } catch (error) {
                    var e;
                    const i = error;
                    400 === (null === (e = i.response) || void 0 === e ? void 0 : e.status) ? i.response.data.Message && ("Invalid Password" === i.response.data.Message ? this.invalidPassword = !0 : this.errorMessage = i.response.data.Message) : (this.errorMessage = "Fatal error",
                    window.rumReportError(i))
                } finally {
                    this.savingPassword = !1
                }
            }
            onPasswordChanged() {
                this.$emit("password-changed"),
                this.hide()
            }
        }
        ;
        Object(s["b"])([Object($["b"])("change")], G.prototype, "visible", void 0),
        Object(s["b"])([Object($["e"])("isVisible")], G.prototype, "onIsVisibleChange", null),
        G = Object(s["b"])([Object(l["b"])({
            name: "ChangePasswordDialog",
            components: {
                ValidationProvider: I["b"],
                ValidationObserver: I["a"],
                LoaderBtn: O["a"]
            }
        })], G);
        var W = G
          , H = W
          , X = (n("2fa4"),
        Object(R["a"])(H, N, V, !1, null, "356dd7d4", null))
          , Y = X.exports;
        o["default"].use(T["a"]),
        o["default"].use(E["a"]);
        let q = class extends o["default"] {
            constructor() {
                super(...arguments),
                this.name = null,
                this.email = null,
                this.loadingEmail = !0,
                this.showEmailChangeModal = !1,
                this.showPasswordChangeModal = !1,
                this.showNameWarnModal = !1,
                this.savingName = !1,
                this.savingReferrer = !1,
                this.modifiedName = !1,
                this.clipartProtection = !1,
                this.savingSecurity = !1,
                this.modifiedSecurity = !1,
                this.myReferralCode = null,
                this.showReferrerInput = !1,
                this.referrer = "",
                this.numberReferred = 0,
                this.showReferrerSuccess = !1,
                this.referrerEmail = "",
                this.referrerErrorMessage = "",
                this.showReferralCard = !1
            }
            async created() {
                this.name = this.user.Name,
                this.email = (await m()).Email,
                this.loadingEmail = !1,
                this.modifiedName = !1,
                this.modifiedSecurity = !1,
                this.clipartProtection = this.user.SegmentLibraryImages,
                this.myReferralCode = this.user.CodeForReferrals,
                this.referrer = "",
                this.referrerErrorMessage = "";
                const e = await _();
                this.showReferrerInput = null === this.user.ReferredBy && e.UserIsInTrial,
                this.numberReferred = e.NumberReferred,
                this.referrerEmail = e.ReferredEmail,
                this.showReferralCard = e.IsShopify,
                this.$watch("name", ()=>{
                    this.modifiedName = !0
                }
                ),
                this.$watch("clipartProtection", ()=>{
                    this.modifiedSecurity = !0
                }
                )
            }
            async onProfileSubmit() {
                this.user.Name ? (await this.updateUserName(),
                this.modifiedName = !1,
                this.$emit("user-updated")) : this.showNameWarnModal = !0
            }
            async onSecuritySubmit() {
                try {
                    this.savingSecurity = !0;
                    const e = await b(void 0, this.clipartProtection);
                    this.modifiedSecurity = !1,
                    this.setUser(e)
                } finally {
                    this.savingSecurity = !1,
                    this.$emit("user-updated")
                }
            }
            async updateUserName() {
                try {
                    if (this.savingName = !0,
                    this.name) {
                        const e = await b(this.name);
                        this.setUser(e)
                    }
                } finally {
                    this.savingName = !1,
                    this.$emit("user-updated")
                }
            }
            async onReferrerSubmit() {
                try {
                    this.savingReferrer = !0;
                    const e = await k(this.referrer);
                    this.showReferrerInput = !1,
                    this.showReferrerSuccess = !0,
                    this.referrerEmail = e,
                    this.referrerErrorMessage = ""
                } catch (error) {
                    var e, t;
                    const r = error;
                    var i, n;
                    if (400 === (null === (e = r.response) || void 0 === e ? void 0 : e.status))
                        this.referrerErrorMessage = null === (i = r.response) || void 0 === i ? void 0 : i.data.Message;
                    if (500 === (null === (t = r.response) || void 0 === t ? void 0 : t.status))
                        this.referrerErrorMessage = null === (n = r.response) || void 0 === n ? void 0 : n.data.Message
                } finally {
                    this.savingReferrer = !1
                }
            }
            async onPasswordChanged() {
                await p(),
                location.pathname = "/signin"
            }
        }
        ;
        Object(s["b"])([Object(A["b"])("user")], q.prototype, "user", void 0),
        Object(s["b"])([Object(A["a"])("user")], q.prototype, "setUser", void 0),
        q = Object(s["b"])([Object(l["b"])({
            name: "Account",
            components: {
                ValidationProvider: I["b"],
                ValidationObserver: I["a"],
                LoaderBtn: O["a"],
                EmailUpdateDialog: z,
                ChangePasswordDialog: Y
            }
        })], q);
        var K = q
          , Z = K
          , Q = (n("41aa"),
        Object(R["a"])(Z, c, d, !1, null, "6000d87d", null))
          , J = Q.exports
          , ee = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-row", {
                staticClass: "h-100 d-flex flex-column flex-nowrap"
            }, [e.subscription && e.subscription.Id ? i("SubscriptionPauseCancelDialog", {
                attrs: {
                    subscriptionId: e.subscription.Id,
                    allowPausing: !e.subscriptionPausedOrWillPause,
                    allowCanceling: e.cancelPauseDialogAllowCancel,
                    accountDisableMode: e.accountDisableMode,
                    store: e.storeUrl,
                    cardToken: e.pauseCardToken
                },
                on: {
                    canceled: e.onSubscriptionCancel,
                    paused: e.onSubscriptionPaused
                },
                model: {
                    value: e.showSubscriptionPauseCancelDialog,
                    callback: function(t) {
                        e.showSubscriptionPauseCancelDialog = t
                    },
                    expression: "showSubscriptionPauseCancelDialog"
                }
            }) : e._e(), e.subscription && e.subscription.Id ? i("SubscriptionResumeDialog", {
                attrs: {
                    subscriptionId: e.subscription.Id,
                    store: e.storeUrl
                },
                on: {
                    resumed: e.onSubscriptionResumed
                },
                model: {
                    value: e.showSubscriptionResumeDialog,
                    callback: function(t) {
                        e.showSubscriptionResumeDialog = t
                    },
                    expression: "showSubscriptionResumeDialog"
                }
            }) : e._e(), i("b-modal", {
                staticClass: "mt-3",
                attrs: {
                    size: "lg",
                    title: "Update billing",
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    "hide-footer": "",
                    "no-close-on-backdrop": ""
                },
                model: {
                    value: e.showUpdateCardDialog,
                    callback: function(t) {
                        e.showUpdateCardDialog = t
                    },
                    expression: "showUpdateCardDialog"
                }
            }, [i("CreditCardInput", {
                attrs: {
                    stripePublicKey: e.stripePublicKey,
                    store: e.storeUrl
                },
                on: {
                    "card-updated": e.onCardSubmit
                }
            })], 1), i("b-modal", {
                staticClass: "mt-3",
                attrs: {
                    size: "lg",
                    title: "Enter card",
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    "hide-footer": "",
                    "no-close-on-backdrop": ""
                },
                model: {
                    value: e.showCardAskDialog,
                    callback: function(t) {
                        e.showCardAskDialog = t
                    },
                    expression: "showCardAskDialog"
                }
            }, [i("CreditCardInput", {
                attrs: {
                    noSave: !0,
                    stripePublicKey: e.stripePublicKey,
                    store: e.storeUrl
                },
                on: {
                    token: e.onCardForPauseSubmit
                }
            })], 1), i("StoreSelector", {
                attrs: {
                    stores: e.userStores
                },
                on: {
                    change: e.setStoreUrl
                }
            }), i("div", [i("CustomilyPlanCard", {
                attrs: {
                    loading: e.loadingSubscriptions,
                    store: e.storeUrl,
                    subscription: e.subscription
                }
            })], 1), i("div", {
                staticClass: "mt-3"
            }, [i("b-card", {
                staticClass: "white-card shadow-sm",
                attrs: {
                    title: "Billing Details"
                }
            }, [i("div", {
                class: {
                    busy: e.loadingPaymentMethod
                }
            }, [e.loadingPaymentMethod ? i("div", {
                staticClass: "text-center"
            }, [i("b-spinner", {
                staticClass: "my-2",
                attrs: {
                    variant: "primary"
                }
            })], 1) : e._e(), e.loadingPaymentMethod ? e._e() : i("div", {
                staticClass: "mt-3"
            }, [i("b-card-text", [i("b-row", {
                staticClass: "small-card-content",
                class: {
                    "has-card": e.paymentMethod && e.subscription && e.customer
                }
            }, [i("b-col", {
                attrs: {
                    cols: "10"
                }
            }, [i("b-row", {
                attrs: {
                    "no-gutters": ""
                }
            }, [i("b-col", [e.paymentMethod && e.subscription && e.customer ? i("div", {
                staticClass: "align-items-center d-flex"
            }, [i("CardIcon", {
                staticClass: "d-inline",
                attrs: {
                    card: e.paymentMethod.Brand
                }
            }), i("div", [i("h5", {
                staticClass: "d-inline ml-2"
            }, [e._v("Card ending in " + e._s(e.paymentMethod.Last4) + " ")]), i("small", {
                staticClass: "card-expiration card-expiration ml-1"
            }, [e._v("exp. " + e._s(e.paymentMethod.ExpMonth.toString().padStart(2, "0")) + "/" + e._s(e.paymentMethod.ExpYear))])])], 1) : e._e(), !e.paymentMethod && e.subscription && e.customer ? i("div", {
                staticClass: "align-items-center d-flex"
            }, [e._v(" No credit card added. ")]) : e._e(), e.subscription && e.customer ? e._e() : i("div", {
                staticClass: "align-items-center d-flex"
            }, [e._v(" You don't have any active subscriptions. Please contact us. ")]), e.customer && e.customer.Email ? i("div", {
                staticClass: "mt-3"
            }, [e._v("Billing contact: "), i("b", [e._v(e._s(e.customer.Email))])]) : e._e()]), e.paymentMethod ? i("b-col", [i("ul", [e.paymentMethod.BillingDetails.Name ? i("li", [e._v(" " + e._s(e.paymentMethod.BillingDetails.Name))]) : e._e(), e.paymentMethod.BillingDetails.Address1 ? i("li", [e._v(" " + e._s(e.paymentMethod.BillingDetails.Address1))]) : e._e(), e.paymentMethod.BillingDetails.Country && e.paymentMethod.BillingDetails.City ? i("li", [e._v(" " + e._s(e.paymentMethod.BillingDetails.City) + ", " + e._s(e.paymentMethod.BillingDetails.Country)), e.paymentMethod.BillingDetails.State ? i("span", [e._v(", " + e._s(e.paymentMethod.BillingDetails.State))]) : e._e(), e.paymentMethod.BillingDetails.PostalCode ? i("span", [e._v(", " + e._s(e.paymentMethod.BillingDetails.PostalCode))]) : e._e()]) : e._e()])]) : e._e()], 1)], 1), e.subscription && e.customer ? i("b-col", {
                staticClass: "d-flex align-items-end justify-content-end"
            }, [i("b-btn", {
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.editCreditCard()
                    }
                }
            }, [e._v(" Edit billing")])], 1) : e._e()], 1)], 1)], 1)])])], 1), i("div", {
                staticClass: "mt-3 invoice-card"
            }, [i("b-card", {
                staticClass: "white-card shadow-sm h-100 ",
                attrs: {
                    "no-body": ""
                }
            }, [i("b-card-body", {
                staticClass: "d-flex flex-column"
            }, [i("b-card-title", [e._v("Billing History")]), i("b-card-text", {
                staticClass: "position-relative",
                staticStyle: {
                    flex: "1"
                }
            }, [i("b-table", {
                staticClass: "invoice-table flex-grow-1",
                attrs: {
                    "sticky-header": "",
                    hover: "",
                    fixed: "",
                    "show-empty": "",
                    fields: e.invoiceTableFields,
                    items: e.invoiceItems,
                    busy: e.loadingInvoices,
                    "empty-text": "No invoices"
                },
                scopedSlots: e._u([{
                    key: "empty",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "text-center mt-3"
                        }, [i("h5", [e._v(e._s(t.emptyText))])])]
                    }
                }, {
                    key: "table-busy",
                    fn: function() {
                        return [i("div", {
                            staticClass: "align-items-center d-flex justify-content-center w-100 mt-3"
                        }, [i("b-spinner", {
                            staticClass: "my-2",
                            attrs: {
                                variant: "primary"
                            }
                        })], 1)]
                    },
                    proxy: !0
                }, {
                    key: "cell(date)",
                    fn: function(t) {
                        return [i("div", [e._v(e._s(t.value))])]
                    }
                }, {
                    key: "cell(description)",
                    fn: function() {
                        return [i("div", [e._v("Customily Service")])]
                    },
                    proxy: !0
                }, {
                    key: "cell(amount)",
                    fn: function(t) {
                        return [i("div", [e._v(e._s(t.value))])]
                    }
                }, {
                    key: "cell(status)",
                    fn: function(t) {
                        return [i("div", {
                            staticClass: "text-capitalize",
                            class: {
                                paid: "paid" === t.value,
                                "primary-text": "paid" === t.value
                            }
                        }, [e._v(" " + e._s(t.value))])]
                    }
                }, {
                    key: "cell(invoice)",
                    fn: function(e) {
                        return [i("a", {
                            attrs: {
                                href: e.value,
                                target: "_blank",
                                rel: "noopener noreferrer"
                            }
                        }, [i("i", {
                            staticClass: "fa fa-eye invoice-icon"
                        })])]
                    }
                }])
            })], 1), i("div", {
                staticClass: "d-flex justify-content-center"
            }, [i("b-button-group", [i("b-button", {
                staticClass: "btn-white shadow-none",
                class: {
                    disabled: e.loadingInvoices || e.disablePrevBtn
                },
                on: {
                    click: function(t) {
                        return e.goPrevInvoicesPage()
                    }
                }
            }, [e._v(" ")]), i("b-button", {
                staticClass: "btn-white shadow-none",
                class: {
                    disabled: e.loadingInvoices || e.disableNextBtn
                },
                on: {
                    click: function(t) {
                        return e.goNextInvoicesPage()
                    }
                }
            }, [e._v(" ")])], 1)], 1)], 1)], 1)], 1), i("div", {
                staticClass: "mt-3"
            }, [i("b-card", {
                staticClass: "white-card shadow-sm",
                attrs: {
                    title: "Pause " + e.actionEntityStringCapitalized + " Subscription"
                }
            }, [i("div", {
                class: {
                    busy: e.loadingSubscriptions
                }
            }, [e.loadingSubscriptions ? i("div", {
                staticClass: "text-center"
            }, [i("b-spinner", {
                staticClass: "my-2",
                attrs: {
                    variant: "primary"
                }
            })], 1) : e._e(), e.loadingSubscriptions ? e._e() : i("div", {
                staticClass: "mt-3"
            }, [i("b-card-text", [!e.subscription || "active" !== e.subscription.Status && "past_due" !== e.subscription.Status && "trialing" !== e.subscription.Status || e.subscription.WillPauseAt || e.subscription.WillCancelAt ? e._e() : i("b-row", {
                staticClass: "small-card-content"
            }, [i("b-col", {
                attrs: {
                    cols: "8"
                }
            }, [e._v(" You can pause your subscription and save all your template and options information to use it on your products later on "), i("b", [e._v("for $5 a month")]), e._v(". Your products will no longer have options and previews live, but all your work will be saved so you can come back whenever you are ready and activate them. "), i("br"), i("br"), "past_due" === e.subscription.Status ? [e._v(" If you pause your subscription, "), i("b", [e._v("Customily will immediately stop working on your store.")])] : [e._v(" If you pause your subscription, Customily will work on your store until the end of your billing period: "), i("b", [e._v(e._s(e.formatDateString(e.subscription.CurrentPeriodEnd)))])]], 2), i("b-col", {
                staticClass: "d-flex align-items-end justify-content-end"
            }, [i("div", [i("b-button", {
                staticClass: "float-right",
                on: {
                    click: function(t) {
                        return e.startSubscriptionPauseFlow("past_due" === e.subscription.Status)
                    }
                }
            }, [e._v(" Pause " + e._s(e.actionEntityString) + " for $5/month")])], 1)])], 1), !e.subscription || "paused" !== e.subscription.Status && "paused_past_due" !== e.subscription.Status ? e._e() : i("b-row", [i("b-col", {
                attrs: {
                    cols: "8"
                }
            }, [e._v(" " + e._s(e.actionEntityStringCapitalized) + " is paused. To continue using our services please resume it. ")]), i("b-col", {
                staticClass: "d-flex align-items-end justify-content-end"
            }, [i("div", [i("b-button", {
                staticClass: "float-right",
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.startSubscriptionResumeFlow()
                    }
                }
            }, [e._v("Resume " + e._s(e.actionEntityStringCapitalized))])], 1)])], 1), !e.subscription || "active" !== e.subscription.Status && "past_due" !== e.subscription.Status && "trialing" !== e.subscription.Status || !e.subscription.WillPauseAt || e.subscription.WillCancelAt ? e._e() : i("b-row", [i("b-col", {
                attrs: {
                    cols: "8"
                }
            }, [e._v(" Your " + e._s(e.actionEntityString) + " will be paused on "), i("b", [e._v(e._s(e.formatDateString(e.subscription.WillPauseAt)))]), e._v(". You can avoid it by resuming your " + e._s(e.actionEntityString) + ". ")]), i("b-col", {
                staticClass: "d-flex align-items-end justify-content-end"
            }, [i("div", [i("b-button", {
                staticClass: "float-right",
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.startSubscriptionResumeFlow()
                    }
                }
            }, [e._v("Resume " + e._s(e.actionEntityStringCapitalized))])], 1)])], 1), e.subscription && ("active" === e.subscription.Status || "past_due" === e.subscription.Status || "trialing" === e.subscription.Status) && e.subscription.WillCancelAt ? i("b-row", [i("b-col", {
                attrs: {
                    cols: "8"
                }
            }, [e._v(" Your " + e._s(e.actionEntityString) + " will be canceled on "), i("b", [e._v(e._s(e.formatDateString(e.subscription.WillCancelAt)))]), e._v(". You can avoid it by resuming your " + e._s(e.actionEntityString) + ". ")]), i("b-col", {
                staticClass: "d-flex align-items-end justify-content-end"
            }, [i("div", [i("b-button", {
                staticClass: "float-right",
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.startSubscriptionResumeFlow()
                    }
                }
            }, [e._v("Resume " + e._s(e.actionEntityStringCapitalized))])], 1)])], 1) : e._e(), e.subscription && "canceled" === e.subscription.Status ? i("b-row", [i("b-col", [e._v(" Your " + e._s(e.actionEntityString) + " has been canceled. Please contact us if you wish to resume using our services. ")])], 1) : e._e(), !e.subscription || e.subscription && ("unpaid" === e.subscription.Status || "incomplete" === e.subscription.Status || "incomplete_expired" === e.subscription.Status) ? i("b-row", [i("b-col", [e._v(" You don't have any active subscriptions. Please contact us. ")])], 1) : e._e()], 1)], 1)])])], 1), i("div", {
                staticClass: "mt-3 pb-3"
            }, [i("b-card", {
                staticClass: "white-card shadow-sm",
                attrs: {
                    title: "Cancel " + e.actionEntityStringCapitalized + " Subscription"
                }
            }, [i("div", {
                class: {
                    busy: e.loadingSubscriptions
                }
            }, [e.loadingSubscriptions ? i("div", {
                staticClass: "text-center"
            }, [i("b-spinner", {
                staticClass: "my-2",
                attrs: {
                    variant: "primary"
                }
            })], 1) : e._e(), e.loadingSubscriptions ? e._e() : i("div", {
                staticClass: "mt-3"
            }, [i("b-card-text", [!e.subscription || "active" !== e.subscription.Status && "past_due" !== e.subscription.Status && "trialing" !== e.subscription.Status || e.subscription.WillCancelAt ? e._e() : i("b-row", {
                staticClass: "small-card-content"
            }, [i("b-col", {
                attrs: {
                    cols: "8"
                }
            }, [e.accountDisableMode ? e._e() : i("b", [e._v(" If you cancel, all your templates, libraries, and personalization information will be disconnected from your " + e._s(e.actionEntityString) + ".")]), e.accountDisableMode ? i("b", [e._v(" If you cancel, all your templates, libraries, and personalization information will be lost.")]) : e._e(), e._v(" If you wish to save this information to use it in your " + e._s(e.actionEntityString) + " again in the future you can "), i("b", [e._v("pause your " + e._s(e.actionEntityString) + " instead.")]), i("br"), i("br"), "past_due" === e.subscription.Status ? [e._v(" If you cancel your subscription, "), i("b", [e._v("Customily will immediately stop working on your store.")])] : [e._v(" If you cancel your subscription, Customily will work on your store until the end of your billing period: "), i("b", [e._v(e._s(e.formatDateString(e.subscription.CurrentPeriodEnd)))])]], 2), i("b-col", {
                staticClass: "d-flex align-items-end justify-content-end"
            }, [i("div", [i("b-button", {
                staticClass: "float-right",
                on: {
                    click: function(t) {
                        return e.startSubscriptionCancelFlow()
                    }
                }
            }, [e._v(" Cancel " + e._s(e.actionEntityStringCapitalized))])], 1)])], 1), !e.subscription || "paused" !== e.subscription.Status && "paused_past_due" !== e.subscription.Status ? e._e() : i("b-row", [i("b-col", {
                attrs: {
                    cols: "8"
                }
            }, [e._v(" " + e._s(e.actionEntityStringCapitalized) + " is paused. To continue using our services please resume it. You can also permanently cancel your " + e._s(e.actionEntityString) + ". ")]), i("b-col", {
                staticClass: "d-flex align-items-end justify-content-end"
            }, [i("div", [i("b-button", {
                staticClass: "float-right",
                on: {
                    click: function(t) {
                        return e.startSubscriptionCancelFlow()
                    }
                }
            }, [e._v("Cancel " + e._s(e.actionEntityStringCapitalized))])], 1)])], 1), e.subscription && ("active" === e.subscription.Status || "past_due" === e.subscription.Status || "trialing" === e.subscription.Status) && e.subscription.WillCancelAt ? i("b-row", [i("b-col", {
                attrs: {
                    cols: "8"
                }
            }, [e._v(" Your " + e._s(e.actionEntityString) + " will be canceled on "), i("b", [e._v(e._s(e.formatDateString(e.subscription.WillCancelAt)))]), e._v(". You can avoid it by resuming your " + e._s(e.actionEntityString) + ". ")]), i("b-col", {
                staticClass: "d-flex align-items-end justify-content-end"
            }, [i("div", [i("b-button", {
                staticClass: "float-right",
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.startSubscriptionResumeFlow()
                    }
                }
            }, [e._v("Resume " + e._s(e.actionEntityStringCapitalized))])], 1)])], 1) : e._e(), e.subscription && "canceled" === e.subscription.Status ? i("b-row", [i("b-col", [e._v(" Your " + e._s(e.actionEntityString) + " has been canceled. Please contact us if you wish to resume using our services. ")])], 1) : e._e(), !e.subscription || e.subscription && ("unpaid" === e.subscription.Status || "incomplete" === e.subscription.Status || "incomplete_expired" === e.subscription.Status) ? i("b-row", [i("b-col", [e._v(" You don't have any active subscriptions. Please contact us. ")])], 1) : e._e()], 1)], 1)])])], 1)], 1)
        }
          , te = []
          , ie = n("4991")
          , ne = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", ["unknown" !== e.cardType && e.svgSrc ? i("span", [i("img", {
                style: {
                    width: e.width + "px"
                },
                attrs: {
                    src: e.svgSrc,
                    alt: "card"
                }
            })]) : e._e()])
        }
          , oe = [];
        let re = class extends $["d"] {
            constructor() {
                super(...arguments),
                this.cardTypes = {
                    visa: n("cd7e"),
                    unionpay: n("3296"),
                    mastercard: n("e23e"),
                    jcb: n("0481"),
                    discover: n("af38"),
                    dinersclub: n("754a"),
                    diners: n("754a"),
                    "american express": n("8d69"),
                    amex: n("8d69")
                }
            }
            get cardType() {
                return this.card.toLowerCase()
            }
            get svgSrc() {
                return this.cardTypes[this.cardType] ? this.cardTypes[this.cardType] : n("6e85")
            }
        }
        ;
        Object(s["b"])([Object($["c"])({
            default: ""
        })], re.prototype, "card", void 0),
        Object(s["b"])([Object($["c"])({
            default: 40
        })], re.prototype, "width", void 0),
        re = Object(s["b"])([Object($["a"])({
            name: "CardIcon"
        })], re);
        var ae, se = re, le = se, ce = Object(R["a"])(le, ne, oe, !1, null, "186c17d4", null), de = ce.exports, ue = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return e.stripePublicKey && !e.stripeError ? i("div", [i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.elementReady && (!e.paymentStatus || "already_paid" === e.paymentStatus),
                    expression: "elementReady && (!paymentStatus || paymentStatus === 'already_paid')"
                }]
            }, [i("div", {
                staticClass: "mb-3"
            }, [e._v("Enter your new billing details. This will replace your current payment method.")]), i("ValidationObserver", {
                scopedSlots: e._u([{
                    key: "default",
                    fn: function(t) {
                        var n = t.handleSubmit
                          , o = t.valid;
                        return [i("b-form", {
                            staticClass: "payment-method-form",
                            on: {
                                submit: function(t) {
                                    return t.stopPropagation(),
                                    t.preventDefault(),
                                    n(e.onFormSubmit)
                                }
                            }
                        }, [i("b-row", [i("b-col", {
                            attrs: {
                                cols: "12"
                            }
                        }, [i("ValidationProvider", {
                            attrs: {
                                rules: "required",
                                name: "Cardholder name"
                            },
                            scopedSlots: e._u([{
                                key: "default",
                                fn: function(t) {
                                    var n = t.valid
                                      , o = t.errors;
                                    return [i("b-form-group", {
                                        attrs: {
                                            label: "Cardholder name",
                                            "invalid-feedback": o[0],
                                            state: !o[0] && (!!n || null)
                                        }
                                    }, [i("b-form-input", {
                                        attrs: {
                                            state: !o[0] && (!!n || null),
                                            disabled: e.savingCard || e.processing
                                        },
                                        model: {
                                            value: e.name,
                                            callback: function(t) {
                                                e.name = t
                                            },
                                            expression: "name"
                                        }
                                    })], 1)]
                                }
                            }], null, !0)
                        })], 1), i("b-col", {
                            staticClass: "mb-3",
                            attrs: {
                                cols: "12"
                            }
                        }, [i("label", [e._v("Card")]), i("div", {
                            ref: "stripeCardContainer",
                            staticClass: "stripe-card"
                        }), i("div", {
                            staticClass: "stripe-error"
                        }, [e._v(" " + e._s(e.stripeErrorMessage) + " ")])]), i("b-col", {
                            attrs: {
                                cols: "6"
                            }
                        }, [i("ValidationProvider", {
                            attrs: {
                                rules: "required",
                                name: "Address line 1"
                            },
                            scopedSlots: e._u([{
                                key: "default",
                                fn: function(t) {
                                    var n = t.valid
                                      , o = t.errors;
                                    return [i("b-form-group", {
                                        attrs: {
                                            label: "Address line 1",
                                            "invalid-feedback": o[0],
                                            state: !o[0] && (!!n || null)
                                        }
                                    }, [i("b-form-input", {
                                        attrs: {
                                            state: !o[0] && (!!n || null),
                                            disabled: e.savingCard || e.processing
                                        },
                                        model: {
                                            value: e.addressLine1,
                                            callback: function(t) {
                                                e.addressLine1 = t
                                            },
                                            expression: "addressLine1"
                                        }
                                    })], 1)]
                                }
                            }], null, !0)
                        })], 1), i("b-col", {
                            attrs: {
                                cols: "6"
                            }
                        }, [i("b-form-group", {
                            attrs: {
                                label: "Address line 2"
                            }
                        }, [i("b-form-input", {
                            attrs: {
                                disabled: e.savingCard || e.processing
                            },
                            model: {
                                value: e.addressLine2,
                                callback: function(t) {
                                    e.addressLine2 = t
                                },
                                expression: "addressLine2"
                            }
                        })], 1)], 1), i("b-col", {
                            attrs: {
                                cols: "6"
                            }
                        }, [i("ValidationProvider", {
                            attrs: {
                                rules: "required",
                                name: "City"
                            },
                            scopedSlots: e._u([{
                                key: "default",
                                fn: function(t) {
                                    var n = t.valid
                                      , o = t.errors;
                                    return [i("b-form-group", {
                                        attrs: {
                                            label: "City",
                                            "invalid-feedback": o[0],
                                            state: !o[0] && (!!n || null)
                                        }
                                    }, [i("b-form-input", {
                                        attrs: {
                                            state: !o[0] && (!!n || null),
                                            disabled: e.savingCard || e.processing
                                        },
                                        model: {
                                            value: e.city,
                                            callback: function(t) {
                                                e.city = t
                                            },
                                            expression: "city"
                                        }
                                    })], 1)]
                                }
                            }], null, !0)
                        })], 1), i("b-col", {
                            attrs: {
                                cols: "6"
                            }
                        }, [i("div", {
                            staticClass: "select-wrapper"
                        }, [i("b-form-group", {
                            attrs: {
                                label: "Country"
                            }
                        }, [i("v-select", {
                            attrs: {
                                options: e.countriesList,
                                disabled: e.savingCard || e.processing
                            },
                            scopedSlots: e._u([{
                                key: "open-indicator",
                                fn: function(t) {
                                    var n = t.attributes;
                                    return [i("div", e._b({}, "div", n, !1))]
                                }
                            }], null, !0),
                            model: {
                                value: e.country,
                                callback: function(t) {
                                    e.country = t
                                },
                                expression: "country"
                            }
                        })], 1)], 1)]), i("b-col", {
                            attrs: {
                                cols: "6"
                            }
                        }, [i("ValidationProvider", {
                            attrs: {
                                rules: "required",
                                name: "State"
                            },
                            scopedSlots: e._u([{
                                key: "default",
                                fn: function(t) {
                                    var n = t.valid
                                      , o = t.errors;
                                    return [i("b-form-group", {
                                        attrs: {
                                            label: "State",
                                            "invalid-feedback": o[0],
                                            state: !o[0] && (!!n || null)
                                        }
                                    }, [i("b-form-input", {
                                        attrs: {
                                            state: !o[0] && (!!n || null),
                                            disabled: e.savingCard || e.processing
                                        },
                                        model: {
                                            value: e.state,
                                            callback: function(t) {
                                                e.state = t
                                            },
                                            expression: "state"
                                        }
                                    })], 1)]
                                }
                            }], null, !0)
                        })], 1), i("b-col", {
                            attrs: {
                                cols: "6"
                            }
                        }, [i("ValidationProvider", {
                            attrs: {
                                rules: "required",
                                name: "Postal Code"
                            },
                            scopedSlots: e._u([{
                                key: "default",
                                fn: function(t) {
                                    var n = t.valid
                                      , o = t.errors;
                                    return [i("b-form-group", {
                                        attrs: {
                                            label: "Postal Code",
                                            "invalid-feedback": o[0],
                                            state: !o[0] && (!!n || null)
                                        }
                                    }, [i("b-form-input", {
                                        attrs: {
                                            state: !o[0] && (!!n || null),
                                            disabled: e.savingCard || e.processing
                                        },
                                        model: {
                                            value: e.zip,
                                            callback: function(t) {
                                                e.zip = t
                                            },
                                            expression: "zip"
                                        }
                                    })], 1)]
                                }
                            }], null, !0)
                        })], 1), i("b-col", {
                            directives: [{
                                name: "show",
                                rawName: "v-show",
                                value: e.errorMessage,
                                expression: "errorMessage"
                            }],
                            attrs: {
                                cols: "12"
                            }
                        }, [i("div", {
                            staticClass: "mb-3 error-message"
                        }, [e._v(" " + e._s(e.errorMessage) + " ")])])], 1), i("LoaderBtn", {
                            staticClass: "mt-3 float-right",
                            attrs: {
                                type: "submit",
                                variant: "primary",
                                loading: e.processing || e.savingCard,
                                disabled: !o
                            }
                        }, [e._v(" Update card ")])], 1)]
                    }
                }], null, !1, 3450834786)
            })], 1), "already_paid" !== e.paymentStatus ? i("div", ["paid" === e.paymentStatus ? i("div", {
                staticClass: "mb-3"
            }, [i("div", [e._v("Subscription payment succeeded!")]), i("b-btn", {
                staticClass: "mt-3 float-right",
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.emitCardUpdatedEvent()
                    }
                }
            }, [e._v(" Continue ")])], 1) : e._e(), "payment_failed" === e.paymentStatus ? i("div", {
                staticClass: "mb-3"
            }, [i("div", [e._v("Subscription payment failed, please enter a different card.")]), i("b-btn", {
                staticClass: "mt-3 float-right",
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: function(t) {
                        return e.clearForm()
                    }
                }
            }, [e._v(" Try again ")])], 1) : e._e()]) : e._e(), i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.elementReady,
                    expression: "!elementReady"
                }],
                staticClass: "d-flex justify-content-center"
            }, [i("b-spinner", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.elementReady,
                    expression: "!elementReady"
                }],
                staticClass: "my-2",
                attrs: {
                    variant: "primary"
                }
            })], 1)]) : e._e()
        }, pe = [], he = (n("6dfc"),
        n("4a7a")), me = n.n(he);
        let ge = ae = class extends $["d"] {
            constructor() {
                super(...arguments),
                this.stripe = null,
                this.stripeError = !1,
                this.cardElement = null,
                this.stripeErrorMessage = "",
                this.elementReady = !1,
                this.processing = !1,
                this.savingCard = !1,
                this.errorMessage = "",
                this.name = "",
                this.addressLine1 = "",
                this.addressLine2 = "",
                this.city = "",
                this.state = "",
                this.zip = "",
                this.country = {
                    label: "United States",
                    value: "US"
                },
                this.paymentStatus = null,
                this.lastToken = "",
                this.countriesList = [{
                    value: "AF",
                    label: "Afghanistan"
                }, {
                    value: "AL",
                    label: "Albania"
                }, {
                    value: "DZ",
                    label: "Algeria"
                }, {
                    value: "AS",
                    label: "American Samoa"
                }, {
                    value: "AD",
                    label: "Andorra"
                }, {
                    value: "AO",
                    label: "Angola"
                }, {
                    value: "AI",
                    label: "Anguilla"
                }, {
                    value: "AG",
                    label: "Antigua and Barbuda"
                }, {
                    value: "AR",
                    label: "Argentina"
                }, {
                    value: "AM",
                    label: "Armenia"
                }, {
                    value: "AW",
                    label: "Aruba"
                }, {
                    value: "AU",
                    label: "Australia"
                }, {
                    value: "AT",
                    label: "Austria"
                }, {
                    value: "AZ",
                    label: "Azerbaijan"
                }, {
                    value: "BS",
                    label: "The Bahamas"
                }, {
                    value: "BH",
                    label: "Bahrain"
                }, {
                    value: "BD",
                    label: "Bangladesh"
                }, {
                    value: "BB",
                    label: "Barbados"
                }, {
                    value: "BY",
                    label: "Belarus"
                }, {
                    value: "BE",
                    label: "Belgium"
                }, {
                    value: "BZ",
                    label: "Belize"
                }, {
                    value: "BJ",
                    label: "Benin"
                }, {
                    value: "BM",
                    label: "Bermuda"
                }, {
                    value: "BT",
                    label: "Bhutan"
                }, {
                    value: "BO",
                    label: "Bolivia"
                }, {
                    value: "BA",
                    label: "Bosnia and Herzegovina"
                }, {
                    value: "BW",
                    label: "Botswana"
                }, {
                    value: "BR",
                    label: "Brazil"
                }, {
                    value: "VG",
                    label: "British Virgin Islands"
                }, {
                    value: "BN",
                    label: "Brunei"
                }, {
                    value: "BG",
                    label: "Bulgaria"
                }, {
                    value: "BF",
                    label: "Burkina Faso"
                }, {
                    value: "BI",
                    label: "Burundi"
                }, {
                    value: "KH",
                    label: "Cambodia"
                }, {
                    value: "CM",
                    label: "Cameroon"
                }, {
                    value: "CA",
                    label: "Canada"
                }, {
                    value: "CV",
                    label: "Cape Verde"
                }, {
                    value: "KY",
                    label: "Cayman Islands"
                }, {
                    value: "CF",
                    label: "Central African Republic"
                }, {
                    value: "TD",
                    label: "Chad"
                }, {
                    value: "CL",
                    label: "Chile"
                }, {
                    value: "CN",
                    label: "China"
                }, {
                    value: "CX",
                    label: "Christmas Island"
                }, {
                    value: "CC",
                    label: "Cocos (Keeling) Islands"
                }, {
                    value: "CO",
                    label: "Colombia"
                }, {
                    value: "KM",
                    label: "Comoros"
                }, {
                    value: "CG",
                    label: "Republic of the Congo"
                }, {
                    value: "CK",
                    label: "Cook Islands"
                }, {
                    value: "CR",
                    label: "Costa Rica"
                }, {
                    value: "CI",
                    label: "Cote d'Ivoire"
                }, {
                    value: "HR",
                    label: "Croatia"
                }, {
                    value: "CU",
                    label: "Cuba"
                }, {
                    value: "CY",
                    label: "Cyprus"
                }, {
                    value: "CZ",
                    label: "Czech Republic"
                }, {
                    value: "DK",
                    label: "Denmark"
                }, {
                    value: "DJ",
                    label: "Djibouti"
                }, {
                    value: "DM",
                    label: "Dominica"
                }, {
                    value: "DO",
                    label: "Dominican Republic"
                }, {
                    value: "EC",
                    label: "Ecuador"
                }, {
                    value: "EG",
                    label: "Egypt"
                }, {
                    value: "SV",
                    label: "El Salvador"
                }, {
                    value: "GQ",
                    label: "Equatorial Guinea"
                }, {
                    value: "ER",
                    label: "Eritrea"
                }, {
                    value: "EE",
                    label: "Estonia"
                }, {
                    value: "ET",
                    label: "Ethiopia"
                }, {
                    value: "FK",
                    label: "Falkland Islands (Islas Malvinas)"
                }, {
                    value: "FO",
                    label: "Faroe Islands"
                }, {
                    value: "FJ",
                    label: "Fiji"
                }, {
                    value: "FI",
                    label: "Finland"
                }, {
                    value: "FR",
                    label: "France"
                }, {
                    value: "GF",
                    label: "French Guiana"
                }, {
                    value: "PF",
                    label: "French Polynesia"
                }, {
                    value: "GA",
                    label: "Gabon"
                }, {
                    value: "GM",
                    label: "The Gambia"
                }, {
                    value: "GE",
                    label: "Georgia"
                }, {
                    value: "DE",
                    label: "Germany"
                }, {
                    value: "GH",
                    label: "Ghana"
                }, {
                    value: "GI",
                    label: "Gibraltar"
                }, {
                    value: "GR",
                    label: "Greece"
                }, {
                    value: "GL",
                    label: "Greenland"
                }, {
                    value: "GD",
                    label: "Grenada"
                }, {
                    value: "GP",
                    label: "Guadeloupe"
                }, {
                    value: "GU",
                    label: "Guam"
                }, {
                    value: "GT",
                    label: "Guatemala"
                }, {
                    value: "GN",
                    label: "Guinea"
                }, {
                    value: "GW",
                    label: "Guinea-Bissau"
                }, {
                    value: "GY",
                    label: "Guyana"
                }, {
                    value: "HT",
                    label: "Haiti"
                }, {
                    value: "VA",
                    label: "Holy See (Vatican City)"
                }, {
                    value: "HN",
                    label: "Honduras"
                }, {
                    value: "HU",
                    label: "Hungary"
                }, {
                    value: "IS",
                    label: "Iceland"
                }, {
                    value: "IN",
                    label: "India"
                }, {
                    value: "ID",
                    label: "Indonesia"
                }, {
                    value: "IR",
                    label: "Iran"
                }, {
                    value: "IQ",
                    label: "Iraq"
                }, {
                    value: "IE",
                    label: "Ireland"
                }, {
                    value: "IL",
                    label: "Israel"
                }, {
                    value: "IT",
                    label: "Italy"
                }, {
                    value: "JM",
                    label: "Jamaica"
                }, {
                    value: "JP",
                    label: "Japan"
                }, {
                    value: "JO",
                    label: "Jordan"
                }, {
                    value: "KZ",
                    label: "Kazakhstan"
                }, {
                    value: "KE",
                    label: "Kenya"
                }, {
                    value: "KI",
                    label: "Kiribati"
                }, {
                    value: "KP",
                    label: "North Korea"
                }, {
                    value: "KR",
                    label: "South Korea"
                }, {
                    value: "KW",
                    label: "Kuwait"
                }, {
                    value: "KG",
                    label: "Kyrgyzstan"
                }, {
                    value: "LA",
                    label: "Laos"
                }, {
                    value: "LV",
                    label: "Latvia"
                }, {
                    value: "LB",
                    label: "Lebanon"
                }, {
                    value: "LS",
                    label: "Lesotho"
                }, {
                    value: "LR",
                    label: "Liberia"
                }, {
                    value: "LY",
                    label: "Libya"
                }, {
                    value: "LI",
                    label: "Liechtenstein"
                }, {
                    value: "LT",
                    label: "Lithuania"
                }, {
                    value: "LU",
                    label: "Luxembourg"
                }, {
                    value: "MK",
                    label: "North Macedonia"
                }, {
                    value: "MG",
                    label: "Madagascar"
                }, {
                    value: "MW",
                    label: "Malawi"
                }, {
                    value: "MY",
                    label: "Malaysia"
                }, {
                    value: "MV",
                    label: "Maldives"
                }, {
                    value: "ML",
                    label: "Mali"
                }, {
                    value: "MT",
                    label: "Malta"
                }, {
                    value: "IM",
                    label: "Isle of Man"
                }, {
                    value: "MH",
                    label: "Marshall Islands"
                }, {
                    value: "MQ",
                    label: "Martinique"
                }, {
                    value: "MR",
                    label: "Mauritania"
                }, {
                    value: "MU",
                    label: "Mauritius"
                }, {
                    value: "YT",
                    label: "Mayotte"
                }, {
                    value: "MX",
                    label: "Mexico"
                }, {
                    value: "FM",
                    label: "Federated States of Micronesia"
                }, {
                    value: "MD",
                    label: "Moldova"
                }, {
                    value: "MC",
                    label: "Monaco"
                }, {
                    value: "MN",
                    label: "Mongolia"
                }, {
                    value: "MS",
                    label: "Montserrat"
                }, {
                    value: "MA",
                    label: "Morocco"
                }, {
                    value: "MZ",
                    label: "Mozambique"
                }, {
                    value: "MM",
                    label: "Myanmar (Burma)"
                }, {
                    value: "NA",
                    label: "Namibia"
                }, {
                    value: "NR",
                    label: "Nauru"
                }, {
                    value: "NP",
                    label: "Nepal"
                }, {
                    value: "NL",
                    label: "Netherlands"
                }, {
                    value: "AN",
                    label: "Netherlands Antilles"
                }, {
                    value: "NC",
                    label: "New Caledonia"
                }, {
                    value: "NZ",
                    label: "New Zealand"
                }, {
                    value: "NI",
                    label: "Nicaragua"
                }, {
                    value: "NE",
                    label: "Niger"
                }, {
                    value: "NG",
                    label: "Nigeria"
                }, {
                    value: "NU",
                    label: "Niue"
                }, {
                    value: "NF",
                    label: "Norfolk Island"
                }, {
                    value: "MP",
                    label: "Northern Mariana Islands"
                }, {
                    value: "NO",
                    label: "Norway"
                }, {
                    value: "OM",
                    label: "Oman"
                }, {
                    value: "PK",
                    label: "Pakistan"
                }, {
                    value: "PW",
                    label: "Palau"
                }, {
                    value: "PS",
                    label: "Palestinian Territory"
                }, {
                    value: "PA",
                    label: "Panama"
                }, {
                    value: "PG",
                    label: "Papua New Guinea"
                }, {
                    value: "PY",
                    label: "Paraguay"
                }, {
                    value: "PE",
                    label: "Peru"
                }, {
                    value: "PH",
                    label: "Philippines"
                }, {
                    value: "PN",
                    label: "Pitcairn Islands"
                }, {
                    value: "PL",
                    label: "Poland"
                }, {
                    value: "PT",
                    label: "Portugal"
                }, {
                    value: "PR",
                    label: "Puerto Rico"
                }, {
                    value: "QA",
                    label: "Qatar"
                }, {
                    value: "RE",
                    label: "Reunion"
                }, {
                    value: "RO",
                    label: "Romania"
                }, {
                    value: "RU",
                    label: "Russia"
                }, {
                    value: "RW",
                    label: "Rwanda"
                }, {
                    value: "KN",
                    label: "Saint Kitts and Nevis"
                }, {
                    value: "LC",
                    label: "Saint Lucia"
                }, {
                    value: "PM",
                    label: "Saint Pierre and Miquelon"
                }, {
                    value: "VC",
                    label: "Saint Vincent and the Grenadines"
                }, {
                    value: "SM",
                    label: "San Marino"
                }, {
                    value: "ST",
                    label: "Sao Tome and Principe"
                }, {
                    value: "SA",
                    label: "Saudi Arabia"
                }, {
                    value: "SN",
                    label: "Senegal"
                }, {
                    value: "SC",
                    label: "Seychelles"
                }, {
                    value: "SL",
                    label: "Sierra Leone"
                }, {
                    value: "SG",
                    label: "Singapore"
                }, {
                    value: "SK",
                    label: "Slovakia"
                }, {
                    value: "SI",
                    label: "Slovenia"
                }, {
                    value: "SB",
                    label: "Solomon Islands"
                }, {
                    value: "SO",
                    label: "Somalia"
                }, {
                    value: "ZA",
                    label: "South Africa"
                }, {
                    value: "ES",
                    label: "Spain"
                }, {
                    value: "LK",
                    label: "Sri Lanka"
                }, {
                    value: "SD",
                    label: "Sudan"
                }, {
                    value: "SR",
                    label: "Suriname"
                }, {
                    value: "SJ",
                    label: "Svalbard"
                }, {
                    value: "SZ",
                    label: "Eswatini"
                }, {
                    value: "SE",
                    label: "Sweden"
                }, {
                    value: "CH",
                    label: "Switzerland"
                }, {
                    value: "SY",
                    label: "Syria"
                }, {
                    value: "TW",
                    label: "Taiwan"
                }, {
                    value: "TJ",
                    label: "Tajikistan"
                }, {
                    value: "TZ",
                    label: "Tanzania"
                }, {
                    value: "TH",
                    label: "Thailand"
                }, {
                    value: "TG",
                    label: "Togo"
                }, {
                    value: "TK",
                    label: "Tokelau"
                }, {
                    value: "TO",
                    label: "Tonga"
                }, {
                    value: "TT",
                    label: "Trinidad and Tobago"
                }, {
                    value: "TN",
                    label: "Tunisia"
                }, {
                    value: "TR",
                    label: "Turkey"
                }, {
                    value: "TM",
                    label: "Turkmenistan"
                }, {
                    value: "TC",
                    label: "Turks and Caicos Islands"
                }, {
                    value: "TV",
                    label: "Tuvalu"
                }, {
                    value: "UG",
                    label: "Uganda"
                }, {
                    value: "UA",
                    label: "Ukraine"
                }, {
                    value: "AE",
                    label: "United Arab Emirates"
                }, {
                    value: "GB",
                    label: "United Kingdom"
                }, {
                    value: "US",
                    label: "United States"
                }, {
                    value: "UM",
                    label: "United States Minor Outlying Islands"
                }, {
                    value: "UY",
                    label: "Uruguay"
                }, {
                    value: "UZ",
                    label: "Uzbekistan"
                }, {
                    value: "VU",
                    label: "Vanuatu"
                }, {
                    value: "VE",
                    label: "Venezuela"
                }, {
                    value: "VN",
                    label: "Vietnam"
                }, {
                    value: "VI",
                    label: "Virgin Islands"
                }, {
                    value: "WF",
                    label: "Wallis and Futuna"
                }, {
                    value: "EH",
                    label: "Western Sahara"
                }, {
                    value: "WS",
                    label: "Western Samoa"
                }, {
                    value: "YE",
                    label: "Yemen"
                }, {
                    value: "CD",
                    label: "Democratic Republic of the Congo"
                }, {
                    value: "ZM",
                    label: "Zambia"
                }, {
                    value: "ZW",
                    label: "Zimbabwe"
                }, {
                    value: "HK",
                    label: "Hong Kong"
                }, {
                    value: "MO",
                    label: "Macau"
                }, {
                    value: "AQ",
                    label: "Antarctica"
                }, {
                    value: "BV",
                    label: "Bouvet Island"
                }, {
                    value: "IO",
                    label: "British Indian Ocean Territory"
                }, {
                    value: "TF",
                    label: "French Southern and Antarctic Lands"
                }, {
                    value: "HM",
                    label: "Heard Island and McDonald Islands"
                }, {
                    value: "SH",
                    label: "Saint Helena"
                }, {
                    value: "GS",
                    label: "South Georgia and the South Sandwich Islands"
                }, {
                    value: "GG",
                    label: "Guernsey"
                }, {
                    value: "RS",
                    label: "Serbia"
                }, {
                    value: "BL",
                    label: "Saint Barthlemy"
                }, {
                    value: "ME",
                    label: "Montenegro"
                }, {
                    value: "JE",
                    label: "Jersey"
                }, {
                    value: "CW",
                    label: "Curaao"
                }, {
                    value: "MF",
                    label: "Saint Martin"
                }, {
                    value: "SX",
                    label: "Sint Maarten"
                }, {
                    value: "TL",
                    label: "Timor-Leste"
                }, {
                    value: "SS",
                    label: "South Sudan"
                }, {
                    value: "AX",
                    label: "land Islands"
                }, {
                    value: "BQ",
                    label: "Bonaire"
                }, {
                    value: "XK",
                    label: "Republic of Kosovo"
                }]
            }
            onProcessingChange() {
                this.cardElement && this.cardElement.update({
                    disabled: this.processing || this.savingCard
                })
            }
            emitCardUpdatedEvent() {
                this.$emit("card-updated", {
                    token: this.lastToken,
                    result: this.paymentStatus
                })
            }
            async tokenCreated(e) {
                if (this.store)
                    if (this.noSave)
                        this.$emit("token", e.id);
                    else {
                        this.savingCard = !0;
                        try {
                            this.lastToken = e.id;
                            const t = await Object(ie["f"])(this.store, e.id);
                            t.Status ? (this.paymentStatus = t.Status,
                            "already_paid" === this.paymentStatus && this.emitCardUpdatedEvent()) : this.emitCardUpdatedEvent()
                        } catch (error) {
                            window.rumReportError(error),
                            this.errorMessage = "Error updating card."
                        } finally {
                            this.savingCard = !1
                        }
                    }
                else
                    console.warn("No store given on " + ae.name)
            }
            async onFormSubmit() {
                if (this.stripe && this.cardElement)
                    try {
                        this.processing = !0;
                        const {token: e, error: t} = await this.stripe.createToken(this.cardElement, {
                            name: this.name,
                            address_line1: this.addressLine1,
                            address_line2: this.addressLine2,
                            address_city: this.city,
                            address_state: this.state,
                            address_zip: this.zip,
                            address_country: this.country.value
                        });
                        if (t)
                            return void (this.stripeErrorMessage = t.message || "");
                        e && this.tokenCreated(e)
                    } catch (error) {
                        this.errorMessage = "Error updating credit card.",
                        window.rumReportError(error)
                    } finally {
                        this.processing = !1
                    }
            }
            clearForm() {
                var e;
                this.name = "",
                this.addressLine1 = "",
                this.addressLine2 = "",
                this.city = "",
                this.state = "",
                this.zip = "",
                this.country = {
                    label: "United States",
                    value: "US"
                },
                this.paymentStatus = null,
                this.lastToken = "",
                null === (e = this.cardElement) || void 0 === e || e.clear()
            }
            created() {
                this.clearForm(),
                window.Stripe && this.stripePublicKey ? this.stripe = window.Stripe(this.stripePublicKey) : this.stripeError = !0
            }
            mounted() {
                if (this.stripe) {
                    const e = this.stripe.elements();
                    this.cardElement = e.create("card", {
                        hidePostalCode: !0
                    }),
                    this.cardElement.mount(this.$refs.stripeCardContainer),
                    this.cardElement.on("ready", ()=>{
                        this.elementReady = !0
                    }
                    )
                }
            }
        }
        ;
        Object(s["b"])([Object($["c"])({
            default: null
        })], ge.prototype, "stripePublicKey", void 0),
        Object(s["b"])([Object($["c"])({
            default: null,
            required: !0
        })], ge.prototype, "store", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], ge.prototype, "noSave", void 0),
        Object(s["b"])([Object($["e"])("processing"), Object($["e"])("savingCard")], ge.prototype, "onProcessingChange", null),
        ge = ae = Object(s["b"])([Object($["a"])({
            name: "CreditCardInput",
            components: {
                LoaderBtn: O["a"],
                ValidationProvider: I["b"],
                ValidationObserver: I["a"],
                "v-select": me.a
            }
        })], ge);
        var fe, ve = ge, be = ve, ye = (n("912b"),
        n("1d2a"),
        Object(R["a"])(be, ue, pe, !1, null, "7c82196f", null)), we = ye.exports, Ce = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-modal", {
                attrs: {
                    size: e.modalSize,
                    title: e.modalTitle,
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    scrollable: "",
                    "hide-footer": "",
                    "no-close-on-backdrop": ""
                },
                scopedSlots: e._u([{
                    key: "default",
                    fn: function(t) {
                        var n = t.cancel;
                        return [!e.showReasons && e.allowCanceling ? i("div", {
                            staticClass: "mb-3"
                        }, [e._v(" You are about to cancel your account for "), i("u", [e._v(e._s(e.store))]), e._v(". "), i("b", [e._v(" If you cancel all your templates, libraries, and personalization information will be disconnected from "), i("u", [e._v(e._s(e.store))]), e._v(".")]), i("br"), i("br"), i("div", {
                            directives: [{
                                name: "show",
                                rawName: "v-show",
                                value: e.allowPausing,
                                expression: "allowPausing"
                            }]
                        }, [e._v(" If you wish to save this information to use it on your products later on you can "), i("b", [e._v("pause your account instead for $5 a month")]), e._v(". So you can come back whenever you are ready without losing all your work. ")])]) : e._e(), i("b-modal", {
                            attrs: {
                                title: "Payment failed",
                                "modal-class": "vue-need-bootstrap",
                                centered: "",
                                "no-close-on-esc": "",
                                "hide-header-close": "",
                                "no-close-on-backdrop": "",
                                "ok-only": ""
                            },
                            on: {
                                ok: function(t) {
                                    e.isVisible = !1
                                }
                            },
                            model: {
                                value: e.showPaymentFailedAlert,
                                callback: function(t) {
                                    e.showPaymentFailedAlert = t
                                },
                                expression: "showPaymentFailedAlert"
                            }
                        }, [e._v(" Payment failed! Please try again with a new card. ")]), e.showReasons || e.allowCanceling || !e.allowPausing ? e._e() : i("div", {
                            staticClass: "mb-3"
                        }, [e._v(" Your products on "), i("b", [i("u", [e._v(e._s(e.store))])]), e._v(" will no longer have options and previews live, but all your work will be saved so you can come back whenever you are ready and activate them. ")]), i("ValidationObserver", {
                            scopedSlots: e._u([{
                                key: "default",
                                fn: function(t) {
                                    var o = t.valid;
                                    return [i("b-form", {
                                        on: {
                                            submit: function(e) {
                                                e.stopPropagation(),
                                                e.preventDefault()
                                            }
                                        }
                                    }, [e.showReasons ? e._e() : i("div", [i("ValidationProvider", {
                                        attrs: {
                                            rules: "required|min:8",
                                            name: "Password"
                                        },
                                        scopedSlots: e._u([{
                                            key: "default",
                                            fn: function(t) {
                                                var n = t.valid
                                                  , o = t.errors;
                                                return [i("b-form-group", {
                                                    staticClass: "my-3",
                                                    attrs: {
                                                        id: "current-password-input",
                                                        "label-cols": "3",
                                                        "content-cols": "9",
                                                        label: "Current password",
                                                        "label-for": "current-password-input",
                                                        "invalid-feedback": e.invalidPassword ? "Wrong password" : o[0],
                                                        state: !e.invalidPassword && (!o[0] && (!!n || null))
                                                    }
                                                }, [i("b-form-input", {
                                                    attrs: {
                                                        id: "current-password-input",
                                                        type: "password",
                                                        state: !e.invalidPassword && (!o[0] && (!!n || null)),
                                                        disabled: e.processing
                                                    },
                                                    model: {
                                                        value: e.password,
                                                        callback: function(t) {
                                                            e.password = t
                                                        },
                                                        expression: "password"
                                                    }
                                                })], 1)]
                                            }
                                        }], null, !0)
                                    })], 1), e.showReasons ? i("div", [i("div", {
                                        staticClass: "mb-2"
                                    }, [e._v("Please help us understand your reasons for "), "cancel" === e.currentAction ? i("span", [e._v("canceling")]) : e._e(), "pause" === e.currentAction ? i("span", [e._v("pausing")]) : e._e(), e._v(" so we can improve our service for the future:")]), e.allowCanceling ? i("ValidationProvider", {
                                        attrs: {
                                            rules: "required",
                                            name: "Cancel Reason"
                                        }
                                    }, [i("b-form-group", [i("b-form-checkbox-group", {
                                        attrs: {
                                            stacked: ""
                                        },
                                        model: {
                                            value: e.cancelReasons,
                                            callback: function(t) {
                                                e.cancelReasons = t
                                            },
                                            expression: "cancelReasons"
                                        }
                                    }, [i("b-form-checkbox", {
                                        attrs: {
                                            value: "WANTED_TO_TEST"
                                        }
                                    }, [e._v("Only wanted to test it")]), i("b-form-checkbox", {
                                        attrs: {
                                            value: "MISSING_FEATURE"
                                        }
                                    }, [e._v("Missing a key feature I needed ")]), i("b-form-checkbox", {
                                        attrs: {
                                            value: "SWITCHING_TOOL"
                                        }
                                    }, [e._v("Switching to other personalization tool ")]), i("b-form-checkbox", {
                                        attrs: {
                                            value: "NOT_SATISFIED_WITH_PRODUCTS"
                                        }
                                    }, [e._v("I was not satisfied with the results on my products")]), i("b-form-checkbox", {
                                        attrs: {
                                            value: "NOT_SATISFIED_WITH_SUPPORT"
                                        }
                                    }, [e._v("I was not satisfied with the support ")]), i("b-form-checkbox", {
                                        attrs: {
                                            value: "TOO_COMPLICATED"
                                        }
                                    }, [e._v("Too complicated to use")]), i("b-form-checkbox", {
                                        attrs: {
                                            value: "TOO_EXPENSIVE"
                                        }
                                    }, [e._v("Too expensive")]), i("b-form-checkbox", {
                                        attrs: {
                                            value: "SHUTTING_DOWN_STORE"
                                        }
                                    }, [e._v("I'm shutting down my store ")]), i("b-form-checkbox", {
                                        attrs: {
                                            value: "OTHER"
                                        }
                                    }, [e._v("Other")])], 1)], 1)], 1) : e._e(), !e.allowCanceling && e.allowPausing ? i("ValidationProvider", {
                                        attrs: {
                                            rules: "required",
                                            name: "Pause Reason"
                                        }
                                    }, [i("b-form-group", [i("b-form-checkbox-group", {
                                        attrs: {
                                            stacked: ""
                                        },
                                        model: {
                                            value: e.pauseReasons,
                                            callback: function(t) {
                                                e.pauseReasons = t
                                            },
                                            expression: "pauseReasons"
                                        }
                                    }, [i("b-form-checkbox", {
                                        attrs: {
                                            value: "STORE_NOT_LIVE"
                                        }
                                    }, [e._v("My store is not yet live")]), i("b-form-checkbox", {
                                        attrs: {
                                            value: "SALES_GONE_DOWN"
                                        }
                                    }, [e._v("My sales have gone down ")]), i("b-form-checkbox", {
                                        attrs: {
                                            value: "BUSINESS_IS_SEASONAL"
                                        }
                                    }, [e._v("My business is seasonal ")]), i("b-form-checkbox", {
                                        attrs: {
                                            value: "FOCUSING_ON_NON_CUSTOMILY_PRODUCTS"
                                        }
                                    }, [e._v("Im focusing on other products that don't need Customily")]), i("b-form-checkbox", {
                                        attrs: {
                                            value: "NO_TIME_FOR_CUSTOMILY"
                                        }
                                    }, [e._v("I dont have the time to use Customily right now ")]), i("b-form-checkbox", {
                                        attrs: {
                                            value: "OTHER"
                                        }
                                    }, [e._v("Other")])], 1)], 1)], 1) : e._e(), e.cancelReasons.some((function(e) {
                                        return "OTHER" === e
                                    }
                                    )) || e.pauseReasons.some((function(e) {
                                        return "OTHER" === e
                                    }
                                    )) ? i("ValidationProvider", {
                                        attrs: {
                                            rules: "required|min:10|max:10000",
                                            name: "Cancellation details"
                                        },
                                        scopedSlots: e._u([{
                                            key: "default",
                                            fn: function(t) {
                                                var n = t.valid
                                                  , o = t.errors;
                                                return [i("b-form-group", {
                                                    staticClass: "my-3",
                                                    attrs: {
                                                        id: "cancel-details-input",
                                                        "label-cols": "3",
                                                        "content-cols": "9",
                                                        label: "Cancellation details",
                                                        "label-for": "cancel-details-input",
                                                        "invalid-feedback": o[0],
                                                        state: !o[0] && (!!n || null)
                                                    }
                                                }, [i("b-form-textarea", {
                                                    attrs: {
                                                        id: "cancel-detail-input",
                                                        state: !o[0] && (!!n || null),
                                                        disabled: e.processing,
                                                        rows: "6",
                                                        "max-rows": "12"
                                                    },
                                                    model: {
                                                        value: e.actionDetails,
                                                        callback: function(t) {
                                                            e.actionDetails = t
                                                        },
                                                        expression: "actionDetails"
                                                    }
                                                })], 1)]
                                            }
                                        }], null, !0)
                                    }) : e._e()], 1) : e._e(), i("div", {
                                        directives: [{
                                            name: "show",
                                            rawName: "v-show",
                                            value: e.errorMessage,
                                            expression: "errorMessage"
                                        }],
                                        staticClass: "error-message w-100 pb-3 text-center"
                                    }, [e._v(" " + e._s(e.errorMessage) + " ")]), e.showReasons ? e._e() : i("div", {
                                        staticClass: "modal-footer row pb-0"
                                    }, [i("b-button", {
                                        attrs: {
                                            variant: "primary",
                                            type: "reset",
                                            disabled: e.processing
                                        },
                                        on: {
                                            click: n
                                        }
                                    }, [e._v(" I changed my mind ")]), i("LoaderBtn", {
                                        directives: [{
                                            name: "show",
                                            rawName: "v-show",
                                            value: e.allowPausing,
                                            expression: "allowPausing"
                                        }],
                                        attrs: {
                                            variant: "info",
                                            disabled: !o || e.processing,
                                            loading: e.pausingSubscription
                                        },
                                        on: {
                                            click: function(t) {
                                                return e.goToReasons("pause")
                                            }
                                        }
                                    }, [e.accountDisableMode ? i("span", [e._v("Pause account and save my work")]) : e._e(), e.accountDisableMode ? e._e() : i("span", [e._v("Pause store and save my work")])]), e.allowCanceling ? i("LoaderBtn", {
                                        attrs: {
                                            variant: "danger",
                                            loadingText: "Saving",
                                            disabled: !o || e.processing,
                                            loading: e.cancelingSubscription
                                        },
                                        on: {
                                            click: function(t) {
                                                return e.goToReasons("cancel")
                                            }
                                        }
                                    }, [e.accountDisableMode ? i("span", [e._v("Cancel and delete my " + e._s(e.templatesCount) + " templates")]) : e._e(), e.accountDisableMode ? e._e() : i("span", [e._v("Cancel "), i("b", [e._v(e._s(e.store))])])]) : e._e()], 1), e.showReasons ? i("div", {
                                        staticClass: "modal-footer row pb-0"
                                    }, [i("b-button", {
                                        attrs: {
                                            variant: "primary",
                                            type: "reset",
                                            disabled: e.processing
                                        },
                                        on: {
                                            click: n
                                        }
                                    }, [e._v(" I changed my mind ")]), i("LoaderBtn", {
                                        attrs: {
                                            variant: "danger",
                                            loadingText: "Saving",
                                            disabled: !o || e.processing,
                                            loading: e.cancelingSubscription || e.pausingSubscription
                                        },
                                        on: {
                                            click: function(t) {
                                                return e.subscriptionSubmit(e.currentAction)
                                            }
                                        }
                                    }, [e._v(" " + e._s("cancel" === e.currentAction ? "Cancel account" : "Pause account") + " ")])], 1) : e._e()])]
                                }
                            }], null, !0)
                        })]
                    }
                }]),
                model: {
                    value: e.isVisible,
                    callback: function(t) {
                        e.isVisible = t
                    },
                    expression: "isVisible"
                }
            })
        }, xe = [], Se = n("4372");
        o["default"].use(T["b"]);
        let Pe = fe = class extends M["a"] {
            constructor() {
                super(...arguments),
                this.isVisible = !1,
                this.password = "",
                this.errorMessage = "",
                this.invalidPassword = !1,
                this.templatesCount = 0,
                this.currentAction = "cancel",
                this.showPaymentFailedAlert = !1,
                this.processing = !1,
                this.pausingSubscription = !1,
                this.cancelingSubscription = !1,
                this.showReasons = !1,
                this.cancelReasons = [],
                this.pauseReasons = [],
                this.actionDetails = ""
            }
            get modalTitle() {
                return this.showReasons ? "We're sorry to see you go :(" : this.allowCanceling ? "Cancel Subscription" : "Pause Subscription"
            }
            get modalSize() {
                return this.allowCanceling && this.allowPausing ? this.showReasons ? "lg" : "xl" : "lg"
            }
            onIsVisibleChange() {
                this.isVisible && (this.errorMessage = "",
                this.invalidPassword = !1,
                this.password = "",
                this.showReasons = !1,
                this.cancelReasons = [],
                this.pauseReasons = [],
                this.actionDetails = "",
                this.currentAction = "cancel",
                this.showPaymentFailedAlert = !1),
                this.$emit("change", this.isVisible)
            }
            async created() {
                this.templatesCount = await Object(Se["a"])()
            }
            async goToReasons(e) {
                try {
                    this.currentAction = e,
                    this.processing = !0,
                    this.invalidPassword = !1;
                    const t = await h(this.password);
                    t.Valid ? this.showReasons = !0 : this.invalidPassword = !0
                } finally {
                    this.processing = !1
                }
            }
            async subscriptionSubmit(e="cancel") {
                if (this.store)
                    try {
                        this.processing = !0,
                        this.password && this.subscriptionId && (this.errorMessage = "",
                        "cancel" === e ? this.cancelingSubscription = !0 : this.pausingSubscription = !0,
                        await Object(ie["g"])(this.store, this.password, "cancel" === e ? 0 : 1, this.cardToken || void 0, "cancel" === e ? this.cancelReasons.map(e=>({
                            Type: e,
                            Details: "OTHER" === e ? this.actionDetails : ""
                        })) : void 0, "pause" === e ? this.pauseReasons.map(e=>({
                            Type: e,
                            Details: "OTHER" === e ? this.actionDetails : ""
                        })) : void 0),
                        this.$emit("cancel" === e ? "canceled" : "paused", this.subscriptionId),
                        this.isVisible = !1)
                    } catch (error) {
                        var t, i;
                        const n = error;
                        402 === (null === (t = n.response) || void 0 === t ? void 0 : t.status) ? this.showPaymentFailedAlert = !0 : 400 === (null === (i = n.response) || void 0 === i ? void 0 : i.status) ? n.response.data.Message && ("Invalid Password" === n.response.data.Message ? this.invalidPassword = !0 : this.errorMessage = "Error updating subscription") : (this.errorMessage = "Error updating subscription",
                        window.rumReportError(n))
                    } finally {
                        this.pausingSubscription = !1,
                        this.cancelingSubscription = !1,
                        this.processing = !1
                    }
                else
                    console.warn("No store given on " + fe.name)
            }
        }
        ;
        Object(s["b"])([Object($["c"])({
            default: null
        })], Pe.prototype, "subscriptionId", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], Pe.prototype, "allowPausing", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], Pe.prototype, "allowCanceling", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], Pe.prototype, "accountDisableMode", void 0),
        Object(s["b"])([Object($["c"])({
            default: null,
            required: !0
        })], Pe.prototype, "store", void 0),
        Object(s["b"])([Object($["c"])({
            default: null
        })], Pe.prototype, "cardToken", void 0),
        Object(s["b"])([Object($["b"])("change")], Pe.prototype, "visible", void 0),
        Object(s["b"])([Object($["e"])("isVisible")], Pe.prototype, "onIsVisibleChange", null),
        Pe = fe = Object(s["b"])([Object(l["b"])({
            name: "SubscriptionCancelDialog",
            components: {
                ValidationProvider: I["b"],
                ValidationObserver: I["a"],
                LoaderBtn: O["a"]
            }
        })], Pe);
        var ke, _e = Pe, Ae = _e, Te = (n("dc45"),
        Object(R["a"])(Ae, Ce, xe, !1, null, "575bb584", null)), Ee = Te.exports, Oe = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-modal", {
                attrs: {
                    size: "lg",
                    title: "Resume Subscription",
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    "hide-footer": "",
                    "no-close-on-backdrop": ""
                },
                scopedSlots: e._u([{
                    key: "default",
                    fn: function(t) {
                        var n = t.cancel;
                        return [e.isShopifySubscription ? e._e() : i("span", [e._v(" Resume your subscription to continue using our services. "), e.lastPrice ? i("span", [e._v("You will continue with your previous plan of "), i("b", [e._v("$" + e._s(e.lastPrice.Amount.toFixed(2)))]), e._v(".")]) : e._e()]), e.isShopifySubscription ? i("span", [e._v(" Your subscription will be resumed using our "), i("a", {
                            attrs: {
                                href: "https://www.customily.com/new-pricing",
                                target: "_blank"
                            }
                        }, [e._v("new pricing")]), e._v(" for Shopify stores.")]) : e._e(), i("ValidationObserver", {
                            scopedSlots: e._u([{
                                key: "default",
                                fn: function(t) {
                                    var o = t.handleSubmit
                                      , r = t.valid;
                                    return [i("b-form", {
                                        on: {
                                            submit: function(t) {
                                                return t.stopPropagation(),
                                                t.preventDefault(),
                                                o(e.resumeSubscriptionSubmit)
                                            }
                                        }
                                    }, [i("ValidationProvider", {
                                        attrs: {
                                            rules: "required|min:8",
                                            name: "Password"
                                        },
                                        scopedSlots: e._u([{
                                            key: "default",
                                            fn: function(t) {
                                                var n = t.valid
                                                  , o = t.errors;
                                                return [i("b-form-group", {
                                                    staticClass: "my-3",
                                                    attrs: {
                                                        id: "current-password-input",
                                                        "label-cols": "3",
                                                        "content-cols": "9",
                                                        label: "Current password",
                                                        "label-for": "current-password-input",
                                                        "invalid-feedback": e.invalidPassword ? "Wrong password" : o[0],
                                                        state: !e.invalidPassword && (!o[0] && (!!n || null))
                                                    }
                                                }, [i("b-form-input", {
                                                    attrs: {
                                                        id: "current-password-input",
                                                        type: "password",
                                                        state: !e.invalidPassword && (!o[0] && (!!n || null)),
                                                        disabled: e.resumingSubscription
                                                    },
                                                    model: {
                                                        value: e.password,
                                                        callback: function(t) {
                                                            e.password = t
                                                        },
                                                        expression: "password"
                                                    }
                                                })], 1)]
                                            }
                                        }], null, !0)
                                    }), i("div", {
                                        directives: [{
                                            name: "show",
                                            rawName: "v-show",
                                            value: e.resumeSubscriptionError,
                                            expression: "resumeSubscriptionError"
                                        }],
                                        staticClass: "error-message w-100 pb-3 text-center"
                                    }, [e._v(" Error resuming subscription ")]), i("div", {
                                        staticClass: "modal-footer row pb-0"
                                    }, [i("b-button", {
                                        attrs: {
                                            type: "reset"
                                        },
                                        on: {
                                            click: n
                                        }
                                    }, [e._v(" Cancel ")]), i("LoaderBtn", {
                                        attrs: {
                                            variant: "danger",
                                            type: "submit",
                                            loadingText: "Saving",
                                            loading: e.resumingSubscription,
                                            disabled: !r || e.resumingSubscription
                                        }
                                    }, [e._v(" Resume Subscription ")])], 1)], 1)]
                                }
                            }], null, !0)
                        })]
                    }
                }]),
                model: {
                    value: e.isVisible,
                    callback: function(t) {
                        e.isVisible = t
                    },
                    expression: "isVisible"
                }
            })
        }, Ie = [];
        o["default"].use(T["b"]);
        let De = ke = class extends M["a"] {
            constructor() {
                super(...arguments),
                this.isVisible = !1,
                this.password = "",
                this.resumingSubscription = !1,
                this.resumeSubscriptionError = !1,
                this.invalidPassword = !1,
                this.lastPrice = null,
                this.isShopifySubscription = !1
            }
            async onIsVisibleChange() {
                if (this.isVisible)
                    if (this.resumeSubscriptionError = !1,
                    this.invalidPassword = !1,
                    this.password = "",
                    this.store)
                        try {
                            this.lastPrice = await Object(ie["c"])(this.store)
                        } catch (error) {
                            var e;
                            const i = error;
                            this.lastPrice = null,
                            400 !== (null === (e = i.response) || void 0 === e ? void 0 : e.status) && window.rumReportError(i)
                        }
                    else
                        console.warn("No store given on " + ke.name);
                this.$emit("change", this.isVisible)
            }
            async resumeSubscriptionSubmit() {
                if (this.store)
                    try {
                        if (this.resumingSubscription = !0,
                        this.password && this.subscriptionId) {
                            this.resumeSubscriptionError = !1;
                            const e = await Object(ie["g"])(this.store, this.password, 2);
                            e.ConfirmationUrl ? location.href = e.ConfirmationUrl : (this.$emit("resumed", this.subscriptionId),
                            this.isVisible = !1)
                        }
                    } catch (error) {
                        var e;
                        const i = error;
                        400 === (null === (e = i.response) || void 0 === e ? void 0 : e.status) ? i.response.data.Message && ("Invalid Password" === i.response.data.Message ? this.invalidPassword = !0 : this.resumeSubscriptionError = !0) : (this.resumeSubscriptionError = !0,
                        window.rumReportError(i))
                    } finally {
                        this.resumingSubscription = !1
                    }
                else
                    console.warn("No store given on " + ke.name)
            }
            created() {
                const e = this.user.Stores.find(e=>e.Url == this.store);
                e && (this.isShopifySubscription = 1 === e.Type)
            }
        }
        ;
        Object(s["b"])([Object($["c"])({
            default: null
        })], De.prototype, "subscriptionId", void 0),
        Object(s["b"])([Object($["c"])({
            default: null,
            required: !0
        })], De.prototype, "store", void 0),
        Object(s["b"])([Object($["b"])("change")], De.prototype, "visible", void 0),
        Object(s["b"])([Object(A["b"])("user")], De.prototype, "user", void 0),
        Object(s["b"])([Object($["e"])("isVisible")], De.prototype, "onIsVisibleChange", null),
        De = ke = Object(s["b"])([Object(l["b"])({
            name: "SubscriptionResumeDialog",
            components: {
                ValidationProvider: I["b"],
                ValidationObserver: I["a"],
                LoaderBtn: O["a"]
            }
        })], De);
        var Fe = De
          , Me = Fe
          , $e = (n("2a40"),
        Object(R["a"])(Me, Oe, Ie, !1, null, "42fe94e4", null))
          , Be = $e.exports
          , je = n("b9b9")
          , Le = n.n(je)
          , Re = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-card", {
                staticClass: "white-card shadow-sm",
                attrs: {
                    title: e.planTitle
                }
            }, [i("div", {
                class: {
                    busy: e.loading
                }
            }, [e.loading ? i("div", {
                staticClass: "text-center"
            }, [i("b-spinner", {
                staticClass: "my-2",
                attrs: {
                    variant: "primary"
                }
            })], 1) : e._e(), !e.loading && e.subscription ? i("div", [i("b-card-text", [i("h4", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.store,
                    expression: "store"
                }],
                staticClass: "store-text m-0"
            }, [e._v("Store: "), i("span", {
                staticClass: "primary-text"
            }, [e._v(e._s(e.store))])])])], 1) : e._e()])])
        }
          , Ue = [];
        const ze = e=>{
            const t = {
                enterprise: "Enterprise",
                p_12: "Preview 12 Products",
                p_18: "Preview 18 Products",
                p_30: "Preview 30 Products",
                p_unlimited: "Preview Unlimited",
                pp_10: "Preview + Production 10 Products",
                pp_12: "Preview + Production 12 Products",
                pp_14: "Preview + Production 14 Products",
                pp_18: "Preview + Production 18 Products",
                pp_20: "Preview + Production 20 Products",
                pp_21: "Preview + Production 21 Products",
                pp_30: "Preview + Production 30 Products",
                pp_unlimited: "Preview + Production Unlimited",
                storage: "Storage"
            };
            if (t[e.Plan]) {
                let i = t[e.Plan] + " Plan";
                return e.Discount && (i += ` - ${Number(e.Discount).toFixed(0)}% Discount`),
                i
            }
            return null
        }
        ;
        let Ne = class extends $["d"] {
            constructor() {
                super(...arguments),
                this.plans = {
                    enterprise: "Enterprise",
                    p_12: "Preview 12 Products",
                    p_18: "Preview 18 Products",
                    p_30: "Preview 30 Products",
                    p_unlimited: "Preview Unlimited",
                    pp_10: "Preview + Production 10 Products",
                    pp_12: "Preview + Production 12 Products",
                    pp_14: "Preview + Production 14 Products",
                    pp_18: "Preview + Production 18 Products",
                    pp_20: "Preview + Production 20 Products",
                    pp_21: "Preview + Production 21 Products",
                    pp_30: "Preview + Production 30 Products",
                    pp_unlimited: "Preview + Production Unlimited",
                    storage: "Storage"
                }
            }
            get planTitle() {
                if (this.loading)
                    return "";
                if (!this.subscription || this.subscription && ("canceled" === this.subscription.Status || "unpaid" === this.subscription.Status || "incomplete" === this.subscription.Status || "incomplete_expired" === this.subscription.Status))
                    return "No active plan";
                if (this.subscription.Plan) {
                    const e = ze(this.subscription.Plan);
                    if (e)
                        return e
                }
                return "Unknown Plan"
            }
        }
        ;
        Object(s["b"])([Object($["c"])({
            default: null,
            required: !0
        })], Ne.prototype, "subscription", void 0),
        Object(s["b"])([Object($["c"])({
            default: null,
            required: !0
        })], Ne.prototype, "store", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], Ne.prototype, "loading", void 0),
        Ne = Object(s["b"])([Object($["a"])({
            name: "CustomilyPlanCard"
        })], Ne);
        var Ve = Ne
          , Ge = Ve
          , We = (n("149d"),
        Object(R["a"])(Ge, Re, Ue, !1, null, "aa5bde0a", null))
          , He = We.exports
          , Xe = n("2576");
        let Ye = class extends $["d"] {
            constructor() {
                super(...arguments),
                this.storeUrl = "",
                this.paymentMethod = null,
                this.subscription = null,
                this.invoices = [],
                this.customer = null,
                this.pauseCardToken = null,
                this.loadingPaymentMethod = !0,
                this.loadingInvoices = !0,
                this.loadingSubscriptions = !0,
                this.cancelingSubscription = !1,
                this.showUpdateCardDialog = !1,
                this.showSubscriptionPauseCancelDialog = !1,
                this.showSubscriptionResumeDialog = !1,
                this.showAccountCancelSuccess = !1,
                this.showCardAskDialog = !1,
                this.invoicesPerPage = 10,
                this.disablePrevBtn = !1,
                this.disableNextBtn = !1,
                this.cancelPauseDialogAllowCancel = !0
            }
            onStoreUrlChange() {
                if (!this.user.Stores.some(e=>e.HasBilling && e.Url == this.storeUrl)) {
                    const e = this.user.Stores.filter(e=>e.HasBilling);
                    e.length && (this.storeUrl = e[0].Url)
                }
                const e = new URL(location.href);
                e.searchParams.set("store", this.storeUrl),
                window.history.replaceState({}, document.title, `${e.pathname}?${e.searchParams.toString()}`)
            }
            get storeSelectorTitle() {
                return this.storeUrl
            }
            get subscriptionPausedOrWillPause() {
                return !(!this.subscription || "paused" !== this.subscription.Status && !this.subscription.WillPauseAt)
            }
            get invoiceTableFields() {
                return [{
                    key: "date",
                    label: "Date"
                }, {
                    key: "description",
                    label: "Description"
                }, {
                    key: "amount",
                    label: "Amount",
                    class: "text-center"
                }, {
                    key: "status",
                    label: "Status"
                }, {
                    key: "invoice",
                    label: "Invoice",
                    class: "text-center"
                }]
            }
            get invoiceItems() {
                return this.invoices.map(e=>({
                    date: this.formatDateString(new Date(e.Created)),
                    amount: "$" + (e.Total / 100).toFixed(2),
                    status: e.Status,
                    invoice: e.InvoicePdf
                }))
            }
            get accountDisableMode() {
                if (this.subscription) {
                    const e = ("active" === this.subscription.Status || "trialing" === this.subscription.Status || "past_due" === this.subscription.Status) && !this.subscription.WillCancelAt && !this.subscription.WillPauseAt
                      , t = this.subscriptions.filter(e=>("active" === e.Status || "trialing" === e.Status || "past_due" === e.Status) && !e.WillCancelAt && !e.WillPauseAt);
                    return 1 === t.length && e || !t.length
                }
                return !1
            }
            get actionEntityString() {
                return this.accountDisableMode ? "account" : "store"
            }
            get actionEntityStringCapitalized() {
                return this.actionEntityString.charAt(0).toUpperCase() + this.actionEntityString.slice(1)
            }
            get userStores() {
                var e;
                return (null === (e = this.user) || void 0 === e ? void 0 : e.Stores) || []
            }
            async onShowUpdateCardDialog() {
                this.showUpdateCardDialog || (this.loadingPaymentMethod = !0,
                this.$emit("user-updated"),
                await this.loadSubscriptions(),
                await this.loadPaymentMethod())
            }
            setStoreUrl(e) {
                this.storeUrl !== e && (this.storeUrl = e,
                this.reloadData())
            }
            formatDateString(e) {
                return Le()(e, "mmm dd, yyyy")
            }
            startSubscriptionCancelFlow() {
                this.cancelPauseDialogAllowCancel = !0,
                this.showSubscriptionPauseCancelDialog = !0
            }
            startSubscriptionPauseFlow(e=!1) {
                e ? (this.pauseCardToken = null,
                this.showCardAskDialog = !0) : (this.cancelPauseDialogAllowCancel = !1,
                this.showSubscriptionPauseCancelDialog = !0)
            }
            startSubscriptionResumeFlow() {
                this.showSubscriptionResumeDialog = !0
            }
            onCardForPauseSubmit(e) {
                this.showCardAskDialog = !1,
                this.pauseCardToken = e,
                this.startSubscriptionPauseFlow()
            }
            async goPrevInvoicesPage() {
                try {
                    this.loadingInvoices = !0;
                    const e = await Object(ie["b"])(this.storeUrl, this.invoicesPerPage, void 0, this.invoices[0].Id);
                    this.invoices = e.Invoices,
                    this.disableNextBtn = this.disablePrevBtn = !1,
                    e.MoreAvailable || (this.disablePrevBtn = !0)
                } finally {
                    this.loadingInvoices = !1
                }
            }
            async goNextInvoicesPage() {
                try {
                    this.loadingInvoices = !0;
                    const e = await Object(ie["b"])(this.storeUrl, this.invoicesPerPage, this.invoices[this.invoices.length - 1].Id);
                    this.invoices = e.Invoices,
                    this.disableNextBtn = this.disablePrevBtn = !1,
                    e.MoreAvailable || (this.disableNextBtn = !0)
                } finally {
                    this.loadingInvoices = !1
                }
            }
            editCreditCard() {
                this.showUpdateCardDialog = !0
            }
            onCardSubmit() {
                this.showUpdateCardDialog = !1
            }
            goToSignIn() {
                location.pathname = "/signin"
            }
            async onSubscriptionCancel() {
                this.$emit("user-updated"),
                this.pauseCardToken = null,
                this.loadingSubscriptions = !0,
                await this.loadSubscriptions()
            }
            async onSubscriptionPaused() {
                this.$emit("user-updated"),
                this.pauseCardToken = null,
                this.loadingSubscriptions = !0,
                await this.loadSubscriptions()
            }
            async onSubscriptionResumed() {
                this.$emit("user-updated"),
                this.pauseCardToken = null,
                this.loadingSubscriptions = !0,
                await this.loadSubscriptions()
            }
            async loadSubscriptions() {
                this.loadingSubscriptions = !0,
                this.setSubscriptions(await Object(ie["e"])()),
                this.subscription = this.subscriptions.find(e=>e.Store === this.storeUrl) || null,
                this.loadingSubscriptions = !1
            }
            async loadPaymentMethod() {
                this.subscription && this.subscription.PaymentMethodId && (this.loadingPaymentMethod = !0,
                this.paymentMethod = await Object(ie["d"])(this.storeUrl)),
                this.loadingPaymentMethod = !1
            }
            async reloadData() {
                this.loadingPaymentMethod = !0,
                this.loadingSubscriptions = !0,
                this.loadingInvoices = !0,
                Object(ie["a"])(this.storeUrl).then(e=>{
                    this.customer = e
                }
                ).catch(e=>{
                    this.customer = null,
                    404 !== e.request.status && window.rumReportError(e)
                }
                ),
                this.loadSubscriptions().then(()=>{
                    this.loadPaymentMethod().catch(e=>{
                        404 !== e.request.status && window.rumReportError(e),
                        this.paymentMethod = null,
                        this.loadingPaymentMethod = !1
                    }
                    )
                }
                ).catch(e=>{
                    404 !== e.request.status && window.rumReportError(e),
                    this.subscription = null,
                    this.paymentMethod = null,
                    this.loadingSubscriptions = !1,
                    this.loadingPaymentMethod = !1
                }
                );
                try {
                    const e = await Object(ie["b"])(this.storeUrl, this.invoicesPerPage);
                    this.invoices = e.Invoices,
                    this.disableNextBtn = !1,
                    this.disablePrevBtn = !0,
                    e.MoreAvailable || (this.disableNextBtn = !0)
                } catch (error) {
                    var e;
                    const i = error;
                    404 !== (null === (e = i.request) || void 0 === e ? void 0 : e.status) && window.rumReportError(i),
                    this.invoices = []
                } finally {
                    this.loadingInvoices = !1
                }
            }
            async created() {
                var e;
                if (this.user && null !== (e = this.user.Stores) && void 0 !== e && e.length) {
                    const e = new URL(location.href)
                      , i = e.searchParams.get("store");
                    var t;
                    if (i)
                        this.storeUrl = i;
                    else
                        this.storeUrl = (null === (t = this.user.Stores.filter(e=>e.HasBilling)[0]) || void 0 === t ? void 0 : t.Url) || "";
                    this.reloadData()
                }
            }
        }
        ;
        Object(s["b"])([Object(A["b"])("stripePublicKey")], Ye.prototype, "stripePublicKey", void 0),
        Object(s["b"])([Object(A["b"])("user")], Ye.prototype, "user", void 0),
        Object(s["b"])([Object(A["b"])("subscriptions")], Ye.prototype, "subscriptions", void 0),
        Object(s["b"])([Object(A["a"])("subscriptions")], Ye.prototype, "setSubscriptions", void 0),
        Object(s["b"])([Object($["e"])("storeUrl")], Ye.prototype, "onStoreUrlChange", null),
        Object(s["b"])([Object($["e"])("showUpdateCardDialog")], Ye.prototype, "onShowUpdateCardDialog", null),
        Ye = Object(s["b"])([Object($["a"])({
            name: "Billing",
            components: {
                CardIcon: de,
                CreditCardInput: we,
                LoaderBtn: O["a"],
                SubscriptionPauseCancelDialog: Ee,
                SubscriptionResumeDialog: Be,
                CustomilyPlanCard: He,
                StoreSelector: Xe["a"]
            }
        })], Ye);
        var qe = Ye
          , Ke = qe
          , Ze = (n("225e"),
        n("1898"),
        Object(R["a"])(Ke, ee, te, !1, null, "71fe8534", null))
          , Qe = Ze.exports
          , Je = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "integrations-view row"
            }, [i("div", {
                staticClass: "col-6 d-flex flex-wrap justify-content-center mt-3"
            }, [i("b-card", {
                staticClass: "white-card card-with-input",
                attrs: {
                    title: "API"
                }
            }, [i("api-key-input", {
                attrs: {
                    allowRegenerate: !e.user.User_Id
                }
            })], 1)], 1), i("div", {
                staticClass: "col-6 d-flex flex-wrap justify-content-center mt-3"
            }, [i("b-card", {
                staticClass: "white-card account-card",
                attrs: {
                    title: "remove.bg API"
                }
            }, [i("b-form", {
                on: {
                    submit: function(t) {
                        return t.stopPropagation(),
                        t.preventDefault(),
                        e.onRemoveBgSubmit()
                    }
                }
            }, [i("b-form-group", {
                attrs: {
                    id: "remove-bg-input",
                    label: "API Key",
                    "label-for": "remove-bg-input"
                }
            }, [i("b-form-input", {
                attrs: {
                    id: "remove-bg-input",
                    type: "text"
                },
                model: {
                    value: e.removeBgApiKey,
                    callback: function(t) {
                        e.removeBgApiKey = t
                    },
                    expression: "removeBgApiKey"
                }
            }), i("b-form-text", {
                staticClass: "link"
            }, [e._v(" API Key to use remove.bg services with Customily. Get it "), i("a", {
                attrs: {
                    href: "https://www.remove.bg/api",
                    target: "_blank"
                }
            }, [e._v("here")]), e._v(". ")])], 1), i("loader-btn", {
                staticClass: "float-right",
                attrs: {
                    type: "submit",
                    variant: "primary",
                    loading: e.savingState.removeBg,
                    disabled: !e.modifiedRemoveBgApiKey,
                    "loading-text": "Saving"
                }
            }, [e._v(" Save ")])], 1)], 1)], 1), i("div", {
                staticClass: "col-6 d-flex justify-content-center mt-3"
            }, [i("b-card", {
                staticClass: "white-card card-with-input",
                attrs: {
                    title: "Melco Credentials"
                }
            }, [i("b-form", {
                on: {
                    submit: function(t) {
                        return t.stopPropagation(),
                        t.preventDefault(),
                        e.onMelcoCredentialsSubmit()
                    }
                }
            }, [i("b-form-group", {
                attrs: {
                    id: "melco-username",
                    label: "Melco Username",
                    "label-for": "melco-username-input"
                }
            }, [i("b-form-input", {
                attrs: {
                    id: "melco-username-input",
                    type: "text"
                },
                model: {
                    value: e.melcoUsername,
                    callback: function(t) {
                        e.melcoUsername = t
                    },
                    expression: "melcoUsername"
                }
            })], 1), i("b-form-group", {
                attrs: {
                    id: "melco-api-key",
                    label: "Melco Api Key",
                    "label-for": "melco-api-key-input"
                }
            }, [i("b-form-input", {
                attrs: {
                    id: "melco-api-key-input",
                    type: "text"
                },
                model: {
                    value: e.melcoApiKey,
                    callback: function(t) {
                        e.melcoApiKey = t
                    },
                    expression: "melcoApiKey"
                }
            })], 1), i("loader-btn", {
                staticClass: "float-right",
                attrs: {
                    type: "submit",
                    variant: "primary",
                    loading: e.savingState.melcoCredentials,
                    disabled: !e.modifiedMelcoCredentials,
                    "loading-text": "Saving"
                }
            }, [e._v(" Save ")])], 1)], 1)], 1), i("div", {
                staticClass: "col-6 d-flex justify-content-center align-self-start mt-3"
            }, [i("b-card", {
                staticClass: "white-card account-card",
                attrs: {
                    title: "VanceAI API"
                }
            }, [i("b-form", {
                on: {
                    submit: function(t) {
                        return t.stopPropagation(),
                        t.preventDefault(),
                        e.onVanceAiSubmit()
                    }
                }
            }, [i("b-form-group", {
                attrs: {
                    id: "vanceAi-input",
                    label: "API Key",
                    "label-for": "vanceAi-input"
                }
            }, [i("b-form-input", {
                attrs: {
                    id: "vanceAi-input",
                    type: "text"
                },
                model: {
                    value: e.vanceAiApiKey,
                    callback: function(t) {
                        e.vanceAiApiKey = t
                    },
                    expression: "vanceAiApiKey"
                }
            }), i("b-form-text", {
                staticClass: "link"
            }, [e._v(" API Key to use VanceAI services with Customily. Get it "), i("a", {
                attrs: {
                    href: "https://vanceai.com/api/?source=top_apibtn",
                    target: "_blank"
                }
            }, [e._v("here")]), e._v(". ")])], 1), i("loader-btn", {
                staticClass: "float-right",
                attrs: {
                    type: "submit",
                    variant: "primary",
                    loading: e.savingState.vanceAi
                }
            }, [e._v(" Save ")])], 1)], 1)], 1)])
        }
          , et = []
          , tt = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", [i("b-modal", {
                attrs: {
                    size: "lg",
                    title: "Confirm your password",
                    "modal-class": "vue-need-bootstrap",
                    lazy: "",
                    centered: "",
                    "hide-footer": ""
                },
                model: {
                    value: e.showPasswordPrompt,
                    callback: function(t) {
                        e.showPasswordPrompt = t
                    },
                    expression: "showPasswordPrompt"
                }
            }, [i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: "show" === e.passwordPromptMode,
                    expression: "passwordPromptMode === 'show'"
                }]
            }, [e._v("Please, confirm your current password to proceed:")]), i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: "generate" === e.passwordPromptMode,
                    expression: "passwordPromptMode === 'generate'"
                }]
            }, [i("b", [e._v("WARNING: Generating a new API Key will invalidate your current one!")])]), i("ValidationObserver", {
                scopedSlots: e._u([{
                    key: "default",
                    fn: function(t) {
                        var n = t.handleSubmit
                          , o = t.valid;
                        return [i("b-form", {
                            on: {
                                submit: function(t) {
                                    return t.stopPropagation(),
                                    t.preventDefault(),
                                    n(e.handlePasswordSubmit)
                                }
                            }
                        }, [i("ValidationProvider", {
                            attrs: {
                                rules: "required|min:8",
                                name: "Password"
                            },
                            scopedSlots: e._u([{
                                key: "default",
                                fn: function(t) {
                                    var n = t.valid
                                      , o = t.errors;
                                    return [i("b-form-group", {
                                        staticClass: "my-3",
                                        attrs: {
                                            id: "password-input",
                                            "label-cols": "3",
                                            "content-cols": "9",
                                            label: "Password",
                                            "label-for": "password-input",
                                            "invalid-feedback": e.invalidPassword ? "Wrong password" : o[0],
                                            state: !e.invalidPassword && (!o[0] && (!!n || null))
                                        }
                                    }, [i("b-form-input", {
                                        attrs: {
                                            type: "password",
                                            state: !e.invalidPassword && (!o[0] && (!!n || null)),
                                            disabled: e.loadingApiKey
                                        },
                                        model: {
                                            value: e.password,
                                            callback: function(t) {
                                                e.password = t
                                            },
                                            expression: "password"
                                        }
                                    })], 1)]
                                }
                            }], null, !0)
                        }), i("div", {
                            directives: [{
                                name: "show",
                                rawName: "v-show",
                                value: e.fatalError,
                                expression: "fatalError"
                            }],
                            staticClass: "error-message w-100 pb-3 text-center"
                        }, [e._v(" Error retrieving API Key ")]), i("div", {
                            staticClass: "modal-footer row pb-0"
                        }, [i("b-button", {
                            attrs: {
                                type: "reset",
                                disabled: e.loadingApiKey
                            },
                            on: {
                                click: function(t) {
                                    e.showPasswordPrompt = !1
                                }
                            }
                        }, [e._v(" Cancel ")]), i("LoaderBtn", {
                            attrs: {
                                variant: "primary",
                                type: "submit",
                                loadingText: "Loading",
                                loading: e.loadingApiKey,
                                disabled: !o || e.loadingApiKey
                            }
                        }, [e._v(" " + e._s("show" === e.passwordPromptMode ? "Show" : "Generate") + " ")])], 1)], 1)]
                    }
                }])
            })], 1), i("b-form-group", {
                attrs: {
                    id: "api-key-input",
                    label: "API Key",
                    "label-for": "api-key-input"
                }
            }, [i("b-input-group", [i("b-form-input", {
                staticStyle: {
                    cursor: "auto"
                },
                attrs: {
                    id: "api-key-input",
                    type: e.inputType,
                    required: "",
                    readonly: ""
                },
                model: {
                    value: e.apiKey,
                    callback: function(t) {
                        e.apiKey = t
                    },
                    expression: "apiKey"
                }
            }), i("b-input-group-append", [i("b-btn", {
                attrs: {
                    variant: "primary",
                    disabled: !e.canShowApiKey
                },
                on: {
                    click: function(t) {
                        return e.showApiKey()
                    }
                }
            }, [e._v("Show")])], 1)], 1), e.allowRegenerate ? i("b-form-text", {
                staticClass: "text-right link"
            }, [i("a", {
                class: {
                    disabled: e.loadingApiKey
                },
                attrs: {
                    href: "javascript:void(0)"
                },
                on: {
                    click: function(t) {
                        e.user.ImpersonatedFromAdminUser ? e.generateApiKey() : e.promptPassword("generate")
                    }
                }
            }, [e._v("Generate new API Key")])]) : e._e()], 1)], 1)
        }
          , it = [];
        let nt = class extends $["d"] {
            constructor() {
                super(...arguments),
                this.apiKey = "sampleapikey",
                this.loadingApiKey = !1,
                this.invalidPassword = !1,
                this.fatalError = !1,
                this.showPasswordPrompt = !1,
                this.passwordPromptMode = "show",
                this.password = ""
            }
            get inputType() {
                return "sampleapikey" !== this.apiKey ? "text" : "password"
            }
            get canShowApiKey() {
                return "sampleapikey" === this.apiKey
            }
            async handlePasswordSubmit() {
                let e = !1;
                "show" === this.passwordPromptMode ? e = await this.loadApiKey() : "generate" == this.passwordPromptMode && (e = await this.generateApiKey()),
                e && (this.showPasswordPrompt = !1)
            }
            showApiKey() {
                this.user.ImpersonatedFromAdminUser ? (this.password = "",
                this.loadApiKey()) : this.promptPassword("show")
            }
            promptPassword(e) {
                this.passwordPromptMode = e,
                this.password = "",
                this.invalidPassword = !1,
                this.showPasswordPrompt = !0
            }
            async generateApiKey() {
                let e = !0;
                try {
                    this.fatalError = !1,
                    this.loadingApiKey = !0;
                    const e = await f(this.password);
                    this.apiKey = e.Key
                } catch (error) {
                    var t;
                    const n = error;
                    e = !1,
                    400 === (null === (t = n.response) || void 0 === t ? void 0 : t.status) && n.response.data.Message ? "Invalid Password" === n.response.data.Message && (this.invalidPassword = !0) : (window.rumReportError(n),
                    this.fatalError = !0)
                } finally {
                    this.loadingApiKey = !1
                }
                return e
            }
            async loadApiKey() {
                let e = !0;
                try {
                    var t;
                    this.fatalError = !1,
                    this.loadingApiKey = !0;
                    const e = await g(this.password);
                    this.apiKey = (null === (t = e[0]) || void 0 === t ? void 0 : t.Key) || "No API Key"
                } catch (error) {
                    var i;
                    const n = error;
                    e = !1,
                    400 === (null === (i = n.response) || void 0 === i ? void 0 : i.status) && n.response.data.Message ? "Invalid Password" === n.response.data.Message && (this.invalidPassword = !0) : (window.rumReportError(n),
                    this.fatalError = !0)
                } finally {
                    this.loadingApiKey = !1
                }
                return e
            }
        }
        ;
        Object(s["b"])([Object(A["b"])("user")], nt.prototype, "user", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], nt.prototype, "allowRegenerate", void 0),
        nt = Object(s["b"])([Object($["a"])({
            name: "ApiKeyInput",
            components: {
                ValidationProvider: I["b"],
                ValidationObserver: I["a"],
                LoaderBtn: O["a"]
            }
        })], nt);
        var ot = nt
          , rt = ot
          , at = (n("7ec2"),
        Object(R["a"])(rt, tt, it, !1, null, "4e944d1c", null))
          , st = at.exports;
        let lt = class extends $["d"] {
            constructor() {
                super(...arguments),
                this.modifiedRemoveBgApiKey = !1,
                this.removeBgApiKey = "",
                this.modifiedMelcoCredentials = !1,
                this.melcoUsername = "",
                this.melcoApiKey = "",
                this.apiKey = null,
                this.loadingApiKey = !0,
                this.vanceAiApiKey = "",
                this.savingState = {
                    vanceAi: !1,
                    removeBg: !1,
                    melcoCredentials: !1
                }
            }
            onRemoveBgApiKeyChange() {
                this.modifiedRemoveBgApiKey = !0
            }
            onMelcoCredentialsChange() {
                this.modifiedMelcoCredentials = !0
            }
            created() {
                this.removeBgApiKey = this.user.RemoveBgAPIKey || "",
                this.vanceAiApiKey = this.user.VanceAiAPIKey || "",
                this.modifiedRemoveBgApiKey = !1,
                this.$watch("removeBgApiKey", this.onRemoveBgApiKeyChange),
                this.melcoUsername = this.user.MelcoUsername || "",
                this.melcoApiKey = this.user.MelcoApiKey || "",
                this.modifiedMelcoCredentials = !1,
                this.$watch("melcoUsername", this.onMelcoCredentialsChange),
                this.$watch("melcoApiKey", this.onMelcoCredentialsChange)
            }
            async onRemoveBgSubmit() {
                try {
                    this.savingState.removeBg = !0,
                    await x(this.removeBgApiKey),
                    this.modifiedRemoveBgApiKey = !1
                } finally {
                    this.savingState.removeBg = !1,
                    this.$emit("user-updated")
                }
            }
            async onVanceAiSubmit() {
                this.savingState.vanceAi = !0,
                await S(this.vanceAiApiKey),
                this.modifiedRemoveBgApiKey = !1,
                this.savingState.vanceAi = !1,
                this.$emit("user-updated")
            }
            async onMelcoCredentialsSubmit() {
                try {
                    this.savingState.melcoCredentials = !0,
                    await P(this.melcoUsername, this.melcoApiKey),
                    this.modifiedMelcoCredentials = !1
                } finally {
                    this.savingState.melcoCredentials = !1,
                    this.$emit("user-updated")
                }
            }
        }
        ;
        Object(s["b"])([Object(A["b"])("user")], lt.prototype, "user", void 0),
        lt = Object(s["b"])([Object($["a"])({
            name: "Integrations",
            components: {
                LoaderBtn: O["a"],
                ApiKeyInput: st
            }
        })], lt);
        var ct = lt
          , dt = ct
          , ut = (n("19d3"),
        Object(R["a"])(dt, Je, et, !1, null, "9c83e8cc", null))
          , pt = ut.exports;
        let ht = class extends o["default"] {
            constructor() {
                super(...arguments),
                this.currentPage = "account",
                this.loading = !0
            }
            onPageChange() {
                this.hasBilling || "billing" !== this.currentPage || (this.currentPage = "account");
                const e = new URL(location.href);
                e.searchParams.set("section", this.currentPage),
                window.history.replaceState({}, document.title, `${e.pathname}?${e.searchParams.toString()}`)
            }
            get hasBilling() {
                var e;
                return null === (e = this.user) || void 0 === e ? void 0 : e.Stores.some(e=>e.HasBilling)
            }
            onUserUpdated() {
                this.$emit("user-updated")
            }
            async created() {
                try {
                    const e = new URL(location.href)
                      , t = e.searchParams.get("section");
                    t && "billing" === t.toLowerCase() && (this.currentPage = "billing")
                } finally {
                    this.loading = !1
                }
            }
        }
        ;
        Object(s["b"])([Object(A["b"])("user")], ht.prototype, "user", void 0),
        Object(s["b"])([Object($["e"])("currentPage")], ht.prototype, "onPageChange", null),
        ht = Object(s["b"])([Object(l["b"])({
            name: "Account",
            components: {
                AccountComponent: J,
                Billing: Qe,
                Integrations: pt
            }
        })], ht);
        var mt = ht
          , gt = mt
          , ft = Object(R["a"])(gt, r, a, !1, null, null, null)
          , vt = ft.exports
          , bt = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "vue-need-bootstrap h100"
            }, [i("div", {
                staticClass: "d-flex justify-content-center align-items-center w-100 h-100 gradient-customily-bg"
            }, [i("b-card", [i("b-card-body", [i("b-row", [i("b-col", [i("img", {
                staticClass: "center-block",
                attrs: {
                    src: e.customilyImg
                }
            }), i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.username && e.token && !e.errorMessage,
                    expression: "username && token && !errorMessage"
                }]
            }, [i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.emailConfirmed,
                    expression: "!emailConfirmed"
                }]
            }, [i("b-card-text", {
                staticClass: "mt-2"
            }, [e._v(" Confirming your new email address ")]), i("div", {
                staticClass: "text-center mt-2"
            }, [i("b-spinner", {
                staticClass: "mr-2",
                attrs: {
                    variant: "primary"
                }
            })], 1)], 1), i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.emailConfirmed,
                    expression: "emailConfirmed"
                }],
                staticClass: "mt-3"
            }, [i("b", [e._v(e._s(e.confirmedEmail))]), e._v(" was confirmed for your user " + e._s(e.confirmedUsername) + " ")])]), i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.username || !e.token,
                    expression: "!username || !token"
                }]
            }, [i("b-card-text", {
                staticClass: "text-center mt-2"
            }, [e._v(" Invalid URL ")])], 1), i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.errorMessage,
                    expression: "errorMessage"
                }],
                staticClass: " text-center mt-2"
            }, [i("b-card-text", {
                staticClass: "mb-2"
            }, [e._v(" Error confirming email address ")]), i("b-card-text", {
                staticClass: "error-message"
            }, [e._v(" " + e._s(e.errorMessage) + " ")])], 1)])], 1)], 1)], 1)], 1)])
        }
          , yt = [];
        let wt = class extends $["d"] {
            constructor() {
                super(...arguments),
                this.username = null,
                this.token = null,
                this.errorMessage = null,
                this.emailConfirmed = !1,
                this.confirmedEmail = null,
                this.confirmedUsername = null
            }
            get customilyImg() {
                return n("56cf")
            }
            async created() {
                const e = new URL(location.href);
                if (this.username = e.searchParams.get("user"),
                this.token = e.searchParams.get("token"),
                this.username && this.token)
                    try {
                        const e = await w(this.username, this.token);
                        this.confirmedEmail = e.Email,
                        this.confirmedUsername = e.Username,
                        this.emailConfirmed = !0
                    } catch (error) {
                        var t;
                        const i = error;
                        400 === (null === (t = i.response) || void 0 === t ? void 0 : t.status) ? i.response.data.Message && (this.errorMessage = i.response.data.Message) : (this.errorMessage = "Fatal error",
                        window.rumReportError(i))
                    }
            }
        }
        ;
        wt = Object(s["b"])([Object($["a"])({
            name: "EmailConfirmation"
        })], wt);
        var Ct = wt
          , xt = Ct
          , St = Object(R["a"])(xt, bt, yt, !1, null, null, null)
          , Pt = St.exports
          , kt = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-container", {
                staticClass: "layers-container p-0"
            }, [i("div", {
                staticClass: "collapse-heading"
            }, [i("div", {
                staticClass: "d-flex justify-content-between",
                on: {
                    click: function(t) {
                        return e.toggleCollapse()
                    }
                }
            }, [i("h4", [i("a", {
                staticClass: "h-100 heading-section",
                attrs: {
                    href: ""
                },
                on: {
                    click: function(e) {
                        e.preventDefault()
                    }
                }
            }, [i("div", [e._v(e._s(e.collapseTitle))])])]), e.showGroups && e.isAbleToGroupOrUngroup ? i("div", {
                staticClass: "ml-3 heading-section d-flex"
            }, [i("a", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.showGroupButton,
                    expression: "showGroupButton"
                }],
                staticClass: "group-button",
                attrs: {
                    href: ""
                },
                on: {
                    click: function(t) {
                        return t.preventDefault(),
                        t.stopPropagation(),
                        e.groupSelectedElements()
                    }
                }
            }, [e._v("Create Layout")]), i("a", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.showUngroupButton,
                    expression: "showUngroupButton"
                }],
                staticClass: "group-button",
                attrs: {
                    href: ""
                },
                on: {
                    click: function(t) {
                        return t.preventDefault(),
                        t.stopPropagation(),
                        e.ungroupSelectedElements()
                    }
                }
            }, [e._v("Remove Layout")])]) : i("div", {
                directives: [{
                    name: "b-tooltip",
                    rawName: "v-b-tooltip.hover",
                    modifiers: {
                        hover: !0
                    }
                }],
                staticClass: "ml-3 heading-section d-flex",
                attrs: {
                    title: "Your current plan doesn't include this feature. Please check your upgrade options with our supoport team :)"
                }
            }, [i("a", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.showGroupButton,
                    expression: "showGroupButton"
                }],
                staticClass: "disabled"
            }, [e._v("Create Layout")])])])]), i("b-collapse", {
                model: {
                    value: e.collapsed,
                    callback: function(t) {
                        e.collapsed = t
                    },
                    expression: "collapsed"
                }
            }, [i("div", {
                staticClass: "items-container"
            }, [i(e.itemsWrapperComponent, {
                tag: "component",
                attrs: {
                    sort: !0,
                    filter: "input, .items-wrapper.overlay",
                    animation: 200,
                    preventOnFilter: !1,
                    list: e.nestedList
                },
                on: {
                    end: e.onSortEnd
                }
            }, e._l(e.nestedList, (function(t, n) {
                return i("div", {
                    key: n
                }, [t.canvasElement ? [i("LayerCanvasElement", {
                    key: t.canvasElement.uuid || n,
                    attrs: {
                        element: t.canvasElement,
                        active: e.isElementActive(t.canvasElement),
                        allowChangingLock: e.allowChangingLock,
                        allowChangingVisibility: e.allowChangingVisibility,
                        allowChangingPrintArea: e.allowChangingPrintArea,
                        allowChangingOverlay: e.allowChangingOverlay,
                        allowChangingColorOption: e.allowChangingColorOption,
                        showOverlayControls: e.showOverlayControls,
                        allowTitleEdit: e.allowTitleEdit,
                        showElementId: e.showElementId,
                        isManagedUser: e.isManagedUser,
                        showProductTemplateControls: e.showProductTemplateControls,
                        isPreviewStep: e.isPreviewStep,
                        isDesign: e.isDesign
                    },
                    on: {
                        click: e.onElementClick,
                        "element-lock-toggle": e.onLockClick,
                        "element-visibility-toggle": e.onVisibilityClick,
                        "element-print-area-toggle": e.onPrintAreaClick,
                        "element-overlay-toggle": e.onOverlayClick,
                        "element-color-option-toggle": e.onColorOptionClick,
                        "title-change": e.onElementTitleChange
                    }
                })] : e._e(), t.group ? [i("LayersGroup", {
                    key: t.group.groupElement.id,
                    attrs: {
                        group: t.group.groupElement,
                        active: e.isGroupActive(t.group.groupElement),
                        allowChangingLock: e.allowChangingLock,
                        allowChangingVisibility: e.allowChangingVisibility,
                        allowTitleEdit: e.allowTitleEdit,
                        isManagedUser: e.isManagedUser,
                        collapsed: e.isGroupCollapsed(t.group.groupElement)
                    },
                    on: {
                        "collapse-toggle": e.onGroupCollapseToggle,
                        "lock-toggle": e.onGroupLockToggle,
                        "visibility-toggle": e.onGroupVisibilityToggle,
                        click: function(i) {
                            return e.onGroupClick(i, t.group.groupElement)
                        }
                    }
                }), i(e.itemsWrapperComponent, {
                    tag: "component",
                    attrs: {
                        sort: !0,
                        filter: "input, .items-wrapper.overlay",
                        animation: 200,
                        preventOnFilter: !1,
                        list: t.group.children
                    },
                    on: {
                        end: e.onSortEnd
                    }
                }, e._l(t.group.children, (function(o) {
                    return i("div", {
                        directives: [{
                            name: "show",
                            rawName: "v-show",
                            value: e.isGroupCollapsed(t.group.groupElement),
                            expression: "isGroupCollapsed(item.group.groupElement)"
                        }],
                        key: o.uuid || n
                    }, [i("LayerCanvasElement", {
                        staticClass: "pl-3",
                        attrs: {
                            element: o,
                            active: e.isElementActive(o),
                            allowChangingLock: e.allowChangingLock,
                            allowChangingVisibility: e.allowChangingVisibility,
                            allowChangingPrintArea: e.allowChangingPrintArea,
                            allowChangingOverlay: e.allowChangingOverlay,
                            allowChangingColorOption: e.allowChangingColorOption,
                            showOverlayControls: e.showOverlayControls,
                            allowTitleEdit: e.allowTitleEdit,
                            showElementId: e.showElementId,
                            isManagedUser: e.isManagedUser,
                            showProductTemplateControls: e.showProductTemplateControls,
                            isPreviewStep: e.isPreviewStep,
                            isDesign: e.isDesign
                        },
                        on: {
                            click: e.onElementClick,
                            "element-lock-toggle": e.onLockClick,
                            "element-visibility-toggle": e.onVisibilityClick,
                            "element-print-area-toggle": e.onPrintAreaClick,
                            "element-overlay-toggle": e.onOverlayClick,
                            "element-color-option-toggle": e.onColorOptionClick,
                            "title-change": e.onElementTitleChange
                        }
                    })], 1)
                }
                )), 0)] : e._e()], 2)
            }
            )), 0)], 1)])], 1)
        }
          , _t = []
          , At = (n("13d5"),
        n("b76a"))
          , Tt = n.n(At)
          , Et = n("3135")
          , Ot = n("d247")
          , It = n("a15b")
          , Dt = n("b28b")
          , Ft = n("1bbb")
          , Mt = n("5843")
          , $t = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return e.svgContent ? i("div", {
                staticClass: "svg-container",
                domProps: {
                    innerHTML: e._s(e.svgContent)
                }
            }) : e._e()
        }
          , Bt = [];
        let jt = class extends o["default"] {
            constructor() {
                super(...arguments),
                this.svgContent = null,
                this.fetchPromise = null
            }
            recursivelyRemoveFill(e) {
                e && (e.removeAttribute("fill"),
                [].forEach.call(e.children, e=>{
                    this.recursivelyRemoveFill(e)
                }
                ))
            }
            buildSvg() {
                const e = this.$el.firstElementChild;
                if (e && "svg" === e.nodeName) {
                    const t = e.getAttribute("viewBox");
                    if (t) {
                        const i = t.split(" ").map(e=>Number(e))
                          , n = (i[2] / i[3]).toFixed(2);
                        this.hasFill && this.recursivelyRemoveFill(e),
                        this.growByHeight ? (e.setAttribute("height", "1em"),
                        e.setAttribute("width", n + "em")) : (e.setAttribute("width", "1em"),
                        e.setAttribute("height", 1 / Number(n) + "em")),
                        e.classList.add("svg-class")
                    }
                }
            }
            created() {
                this.fetchPromise = fetch(this.src)
            }
            async mounted() {
                var e;
                await this.$nextTick(),
                null === (e = this.fetchPromise) || void 0 === e || e.then(async e=>{
                    this.svgContent = await e.text(),
                    await this.$nextTick(),
                    this.buildSvg()
                }
                )
            }
        }
        ;
        Object(s["b"])([Object($["c"])({
            default: null
        })], jt.prototype, "src", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], jt.prototype, "hasFill", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], jt.prototype, "growByHeight", void 0),
        jt = Object(s["b"])([Object(l["b"])({
            name: "SvgIcon"
        })], jt);
        var Lt = jt
          , Rt = Lt
          , Ut = (n("961d"),
        Object(R["a"])(Rt, $t, Bt, !1, null, "039f43fc", null))
          , zt = Ut.exports
          , Nt = n("e150")
          , Vt = n("c46f")
          , Gt = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-list-group-item", {
                key: e.element.uuid || e.element.id,
                staticClass: "d-flex flex-wrap w-100 items-wrapper",
                class: {
                    selected: e.active,
                    overlay: e.element.isOverlay,
                    "print-area": e.element.isPrintArea
                },
                attrs: {
                    "z-index": e.element.zIndex
                }
            }, [i("b-row", {
                staticClass: "m-0 w-100"
            }, [e.isDesign ? e._e() : i("b-col", {
                attrs: {
                    cols: e.showProductTemplateControls ? 3 : 2
                }
            }, [i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.allowChangingVisibility,
                    expression: "allowChangingVisibility"
                }],
                staticClass: "icon clickable visibility-icon mr-2",
                class: {
                    clickable: e.canChangeElementVisibility
                },
                on: {
                    click: function(t) {
                        return e.onVisibilityClick()
                    }
                }
            }, [i("svg-icon", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.element.visible,
                    expression: "element.visible"
                }],
                staticClass: "icon-visible",
                attrs: {
                    src: n("2eff")
                }
            }), i("svg-icon", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.element.visible,
                    expression: "!element.visible"
                }],
                attrs: {
                    src: n("9a81")
                }
            })], 1), i("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.allowChangingLock,
                    expression: "allowChangingLock"
                }],
                staticClass: "locking-icon icon",
                class: {
                    clickable: !e.isManagedUser && e.canChangeElementLock
                },
                on: {
                    click: function(t) {
                        return e.onLockClick()
                    }
                }
            }, [i("svg-icon", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.element.locked,
                    expression: "element.locked"
                }],
                attrs: {
                    src: n("9a44")
                }
            }), i("svg-icon", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.element.locked,
                    expression: "!element.locked"
                }],
                staticClass: "icon-unlocked",
                attrs: {
                    src: n("a29f")
                }
            })], 1), e.showProductTemplateControls ? i("div", {
                staticClass: "print-area-icon icon",
                class: {
                    clickable: e.allowChangingPrintArea
                },
                on: {
                    click: function(t) {
                        return e.onPrintAreaClick()
                    }
                }
            }, [i("svg-icon", {
                class: {
                    "icon-print-area-selected": e.element.isPrintArea,
                    "icon-print-area": !e.element.isPrintArea
                },
                attrs: {
                    src: n("992f")
                }
            })], 1) : e._e(), e.showProductTemplateControls && e.showOverlayControls ? i("div", {
                staticClass: "overlay-icon icon",
                class: {
                    clickable: e.allowChangingOverlay
                },
                on: {
                    click: function(t) {
                        return e.onOverlayClick()
                    }
                }
            }, [i("svg-icon", {
                class: {
                    "icon-overlay-selected": e.element.isOverlay,
                    "icon-overlay": !e.element.isOverlay
                },
                attrs: {
                    src: n("c0f8")
                }
            })], 1) : e._e(), e.showProductTemplateControls && "image-placeholder" === e.element.type && e.element.dynamicImagesPath ? i("div", {
                staticClass: "color-icon icon",
                class: {
                    clickable: e.allowChangingColorOption
                },
                on: {
                    click: function(t) {
                        return e.onColorOptionClick()
                    }
                }
            }, [i("svg-icon", {
                class: {
                    "icon-color-selected": e.element.isColorOptions,
                    "icon-color": !e.element.isColorOptions
                },
                attrs: {
                    src: n("5ac8")
                }
            })], 1) : e._e()]), i("b-col", {
                staticClass: "clickable layer-name-column",
                on: {
                    click: function(t) {
                        return e.onElementClick(t)
                    }
                }
            }, [i("div", {
                staticClass: "icon element-icon clickable mr-3",
                on: {
                    click: function(t) {
                        return e.onElementClick(t)
                    }
                }
            }, [i("svg-icon", {
                attrs: {
                    src: e.getElementIcon
                }
            })], 1), i("div", {
                staticClass: "layers-element-title"
            }, [i("editable-text", {
                attrs: {
                    text: e.element.name,
                    "default-text": e.elementTitle,
                    allowEditing: e.allowTitleEdit
                },
                on: {
                    change: function(t) {
                        return e.onElementTitleChange(t)
                    }
                }
            })], 1)]), i("b-col", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.showElementId,
                    expression: "showElementId"
                }],
                staticClass: "text-center clickable",
                attrs: {
                    cols: "2"
                },
                on: {
                    click: function(t) {
                        return e.onElementClick(t)
                    }
                }
            }, [i("div", {
                staticClass: "user-select-none"
            }, [e._v("ID " + e._s(e.element.id))])])], 1)], 1)
        }
          , Wt = []
          , Ht = n("1424");
        const Xt = e=>"image-placeholder" === e.type && !!e.dynamicImagesPath && e.isColorOptions
          , Yt = (e,t)=>!(!t && Xt(e))
          , qt = (e,t)=>!(!t && Xt(e));
        let Kt = class extends o["default"] {
            constructor() {
                super(...arguments),
                this.canvasElements = [],
                this.activeElementsIds = null,
                this.lastSelectedElement = null,
                this.collapsed = !0
            }
            get canChangeElementLock() {
                return qt(this.element, this.isPreviewStep)
            }
            get canChangeElementVisibility() {
                return Yt(this.element, this.isPreviewStep)
            }
            get elementTitle() {
                return Object(Ht["e"])(this.element)
            }
            get getElementIcon() {
                var e;
                switch (null === (e = this.element) || void 0 === e ? void 0 : e.type) {
                case "bounded-text":
                    return n("f544");
                case "path-itext":
                    return n("c5b4");
                case "image":
                case "image-placeholder":
                    return this.element.mapConfig ? n("a290") : this.element.dynamicImagesPath ? n("3e59") : n("2dc2");
                case "vector-placeholder":
                    return this.element.allowUserUpload ? n("5daf") : n("4f85");
                default:
                    return ""
                }
            }
            onElementClick(e) {
                this.$emit("click", e, this.element)
            }
            onLockClick() {
                this.allowChangingLock && qt(this.element, this.isPreviewStep) && this.$emit("element-lock-toggle", {
                    element: this.element
                })
            }
            onVisibilityClick() {
                this.allowChangingVisibility && Yt(this.element, this.isPreviewStep) && this.$emit("element-visibility-toggle", {
                    element: this.element
                })
            }
            onPrintAreaClick() {
                this.allowChangingPrintArea && this.$emit("element-print-area-toggle", {
                    element: this.element
                })
            }
            onOverlayClick() {
                this.allowChangingOverlay && this.$emit("element-overlay-toggle", {
                    element: this.element
                })
            }
            onColorOptionClick() {
                this.allowChangingColorOption && this.$emit("element-color-option-toggle", {
                    element: this.element
                })
            }
            onElementTitleChange(e) {
                this.element.name = e,
                this.$forceUpdate(),
                this.$emit("title-change", {
                    element: this.element
                })
            }
        }
        ;
        Object(s["b"])([Object($["c"])({
            required: !0
        })], Kt.prototype, "element", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], Kt.prototype, "active", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], Kt.prototype, "allowChangingLock", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], Kt.prototype, "allowChangingVisibility", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], Kt.prototype, "allowChangingPrintArea", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], Kt.prototype, "allowChangingOverlay", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], Kt.prototype, "allowChangingColorOption", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], Kt.prototype, "showOverlayControls", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], Kt.prototype, "allowTitleEdit", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], Kt.prototype, "showElementId", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], Kt.prototype, "isManagedUser", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], Kt.prototype, "showProductTemplateControls", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], Kt.prototype, "isPreviewStep", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], Kt.prototype, "isDesign", void 0),
        Kt = Object(s["b"])([Object(l["b"])({
            name: "LayerCanvasElement",
            components: {
                "b-list-group-item": Ot["a"],
                "b-row": It["a"],
                "b-col": Dt["a"],
                "svg-icon": zt,
                "editable-text": Nt["a"]
            }
        })], Kt);
        var Zt = Kt
          , Qt = Zt
          , Jt = Object(R["a"])(Qt, Gt, Wt, !1, null, "433895a2", null)
          , ei = Jt.exports
          , ti = n("ec26")
          , ii = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("b-list-group-item", {
                key: e.group.uuid || e.group.id,
                staticClass: "d-flex flex-wrap w-100 items-wrapper",
                class: {
                    selected: e.active
                },
                attrs: {
                    "z-index": e.group.zIndex
                }
            }, [i("b-row", {
                staticClass: "m-0 w-100"
            }, [i("b-col", {
                attrs: {
                    cols: "1"
                }
            }), i("b-col", {
                staticClass: "clickable layer-name-column"
            }, [i("div", {
                staticClass: "icon clickable d-inline-flex",
                on: {
                    click: function(t) {
                        return e.onCollapseClick()
                    }
                }
            }, [i("svg-icon", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.collapsed,
                    expression: "!collapsed"
                }],
                staticClass: "open-close-icon",
                attrs: {
                    src: e.arrowCloseIcon
                }
            }), i("svg-icon", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.collapsed,
                    expression: "collapsed"
                }],
                staticClass: "open-close-icon",
                attrs: {
                    src: e.arrowOpenIcon
                }
            })], 1), i("div", {
                staticClass: "d-inline-flex layer-icon-and-name",
                on: {
                    click: function(t) {
                        return e.onElementClick(t)
                    }
                }
            }, [i("div", {
                staticClass: "icon element-icon clickable mr-3"
            }, [i("svg-icon", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !e.collapsed,
                    expression: "!collapsed"
                }],
                attrs: {
                    src: n("a36d")
                }
            }), i("svg-icon", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: e.collapsed,
                    expression: "collapsed"
                }],
                attrs: {
                    src: n("7b21")
                }
            })], 1), i("div", {
                staticClass: "layers-element-title"
            }, [i("editable-text", {
                attrs: {
                    text: e.group.name,
                    "default-text": e.group.name,
                    allowEditing: e.allowTitleEdit
                },
                on: {
                    change: function(t) {
                        return e.onElementTitleChange(t)
                    }
                }
            })], 1)])])], 1)], 1)
        }
          , ni = [];
        let oi = class extends o["default"] {
            get arrowCloseIcon() {
                return n("0b48")
            }
            get arrowOpenIcon() {
                return n("5ba5")
            }
            onElementClick(e) {
                this.$emit("click", e, this.group)
            }
            onLockClick(e) {
                this.$emit("lock-toggle", {
                    group: this.group,
                    event: e
                })
            }
            onVisibilityClick(e) {
                this.$emit("visibility-toggle", {
                    group: this.group,
                    event: e
                })
            }
            onElementTitleChange(e) {
                this.group.name = e,
                this.$forceUpdate(),
                this.$emit("title-change", {
                    group: this.group
                })
            }
            onCollapseClick() {
                this.$emit("collapse-toggle", {
                    group: this.group
                })
            }
        }
        ;
        Object(s["b"])([Object($["c"])({
            required: !0
        })], oi.prototype, "group", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], oi.prototype, "active", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], oi.prototype, "allowChangingLock", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], oi.prototype, "allowChangingVisibility", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], oi.prototype, "allowTitleEdit", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], oi.prototype, "isManagedUser", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], oi.prototype, "collapsed", void 0),
        oi = Object(s["b"])([Object(l["b"])({
            name: "LayersGroup",
            components: {
                "b-list-group-item": Ot["a"],
                "b-row": It["a"],
                "b-col": Dt["a"],
                "svg-icon": zt,
                "editable-text": Nt["a"]
            }
        })], oi);
        var ri = oi
          , ai = ri
          , si = (n("ab80"),
        Object(R["a"])(ai, ii, ni, !1, null, "70311463", null))
          , li = si.exports;
        const ci = (e,t,i)=>{
            if (e) {
                e.locked = i;
                const n = t.getGroupElements(e);
                for (const e of n)
                    e.set("dirty", !0),
                    t.fire("object:modified", {
                        target: e
                    });
                t.renderAll()
            }
        }
          , di = (e,t)=>{
            e && ci(e, t, !e.locked)
        }
          , ui = (e,t,i)=>{
            if (e) {
                e.visible = i;
                const n = t.getGroupElements(e);
                for (const e of n)
                    e.set("dirty", !0);
                t.renderAll()
            }
        }
          , pi = (e,t)=>{
            e && ui(e, t, !e.visible)
        }
        ;
        let hi = class extends o["default"] {
            constructor() {
                super(...arguments),
                this.canvasElements = [],
                this.activeElementsIds = null,
                this.activeGroupsIds = [],
                this.lastSelectedElement = null,
                this.lastSelectedGroup = null,
                this.collapsed = !0,
                this.groups = [],
                this.collapsedGroupIds = [],
                this.nestedList = []
            }
            onCanvasChange() {
                this.setCanvasEventListeners(),
                this.updateGroupsFromCanvas()
            }
            onFilteredGroupsChange(e, t) {
                const i = [];
                if (this.showGroups) {
                    const e = this.filteredGroups.sort((e,t)=>t.zIndex - e.zIndex).filter(e=>this.getElementsForGroup(e).length > 0);
                    for (const n of e)
                        i.push({
                            group: {
                                children: Vt["default"].sortBy(this.getElementsForGroup(n), e=>e.zIndex).reverse(),
                                groupElement: n
                            },
                            canvasElement: null,
                            zIndex: n.zIndex
                        });
                    const t = this.canvasElements.filter(e=>!e.groupId);
                    for (const n of t)
                        i.push({
                            canvasElement: n,
                            group: null,
                            zIndex: n.zIndex
                        });
                    this.nestedList = Vt["default"].sortBy(i, e=>e.zIndex).reverse()
                } else
                    this.nestedList = Vt["default"].sortBy(this.canvasElements.map(e=>({
                        canvasElement: e,
                        group: null,
                        zIndex: e.zIndex
                    })), e=>e.zIndex).reverse()
            }
            get itemsWrapperComponent() {
                return this.allowSorting ? "draggable" : "div"
            }
            get showGroupButton() {
                return Object(Ht["a"])(this.activeElements)
            }
            get showUngroupButton() {
                return 1 == this.activeGroupsIds.length
            }
            get filteredGroups() {
                const e = this.groups.filter(e=>this.isPreviewStep ? "preview" === e.type : "eps" === e.type).sort((e,t)=>t.zIndex - e.zIndex);
                return e
            }
            get activeElements() {
                return this.canvasElements.filter(e=>this.isElementActive(e))
            }
            isGroupCollapsed(e) {
                return this.collapsedGroupIds.includes(e.id)
            }
            groupSelectedElements() {
                if (this.canvas) {
                    const e = Object(ti["a"])();
                    this.canvas.addElementsToGroup(this.activeElements, {
                        id: e,
                        uuid: Object(ti["a"])(),
                        locked: !1,
                        visible: !0,
                        name: "Layout",
                        type: this.isPreviewStep ? "preview" : "eps",
                        zIndex: Math.max(...this.activeElements.map(e=>e.zIndex)) + 1
                    });
                    const t = this.canvas.elementsGroups.find(t=>t.id === e);
                    this.singleGroupSelection(t)
                }
            }
            ungroupSelectedElements() {
                this.canvas && (this.canvas.ungroupElements(this.activeElements),
                this.canvas.discardActiveGroups())
            }
            getElementsForGroup(e) {
                const t = this.canvasElements.filter(t=>t.groupId === e.id);
                return t
            }
            toggleCollapse() {
                this.collapsed = !this.collapsed,
                this.$emit("collapse-toggle", {
                    collapsed: this.collapsed
                })
            }
            setCollapse(e) {
                this.collapsed = e
            }
            onGroupCollapseToggle(e) {
                const t = this.collapsedGroupIds.findIndex(t=>t === e.group.id);
                t > -1 ? this.collapsedGroupIds.splice(t, 1) : this.collapsedGroupIds.push(e.group.id)
            }
            isElementActive(e) {
                const t = this.activeElementsIds && this.activeElementsIds.includes(e.uuid || e.zIndex);
                return t
            }
            isGroupActive(e) {
                let t = !1;
                return t = this.getElementsForGroup(e).map(e=>e.uuid).every(e=>{
                    var t;
                    return null === (t = this.activeElementsIds) || void 0 === t ? void 0 : t.includes(e)
                }
                ),
                this.activeGroupsIds.includes(e.id) || t
            }
            setCanvasElements(e) {
                const t = e.filter(e=>"bounded-text" === e.type || "image" === e.type || "image-placeholder" === e.type || "path-itext" === e.type || "vector-placeholder" === e.type);
                t.sort((e,t)=>t.zIndex - e.zIndex);
                for (const i of t)
                    i.name = i.name ? i.name : "";
                o["default"].set(this, "canvasElements", t)
            }
            setActiveElement(e, t) {
                if (e)
                    if ("activeSelection" === e.type) {
                        const i = e.getObjects();
                        o["default"].set(this, "activeElementsIds", i.map(e=>e.uuid || e.zIndex)),
                        t && (this.lastSelectedElement = i[i.length - 1])
                    } else
                        t && (this.lastSelectedElement = e),
                        this.activeElementsIds = [e.uuid || e.zIndex];
                else
                    t && (this.lastSelectedElement = null),
                    this.activeElementsIds = null
            }
            onGroupClick(e, t) {
                this.canvas ? (e.shiftKey || e.ctrlKey ? this.layerShiftSelection(t, e) : (this.singleGroupSelection(t),
                this.canvas.setActiveGroup(t, !0),
                this.lastSelectedElement = null,
                this.lastSelectedGroup = t),
                Object(Ht["d"])(this.canvas)) : console.error("Canvas not found")
            }
            singleGroupSelection(e) {
                var t;
                this.canvas && null !== (t = this.filteredGroups) && void 0 !== t && t.length && (e || (e = this.filteredGroups.sort((e,t)=>t.zIndex - e.zIndex)[0]),
                this.hideGroups(this.canvas.elementsGroups),
                this.showGroup(e))
            }
            hideGroups(e) {
                for (const t of e)
                    this.canvas && (ui(t, this.canvas, !1),
                    ci(t, this.canvas, !0))
            }
            showGroup(e) {
                this.canvas && (ui(e, this.canvas, !0),
                ci(e, this.canvas, !1))
            }
            resetGroups() {
                for (const e of this.groups)
                    this.canvas && (ui(e, this.canvas, !0),
                    ci(e, this.canvas, !1))
            }
            onElementClick(e, t) {
                if (!this.isDesign) {
                    let i = [];
                    if (e.shiftKey)
                        i = this.layerShiftSelection(t, e);
                    else if (e.ctrlKey) {
                        let e = this.canvasElements.filter(e=>{
                            var t;
                            return null === (t = this.activeElementsIds) || void 0 === t ? void 0 : t.includes(e.uuid || e.zIndex)
                        }
                        );
                        e.includes(t) ? (e = e.filter(e=>e !== t),
                        i = e) : i = [...e, t],
                        this.lastSelectedElement = t
                    } else {
                        if (this.canvas && t.groupId) {
                            const e = this.canvas.elementsGroups.find(e=>e.id === t.groupId);
                            this.singleGroupSelection(e)
                        }
                        this.lastSelectedElement = t,
                        i.push(t)
                    }
                    this.$emit("element-selected", {
                        elements: i,
                        shiftUsed: e.shiftKey,
                        ctrlUsed: e.ctrlKey
                    })
                }
            }
            onGroupLockToggle() {
                if (this.canvas)
                    for (const e of this.canvas.getActiveGroups())
                        di(e, this.canvas)
            }
            onGroupVisibilityToggle() {
                if (this.canvas)
                    for (const e of this.canvas.getActiveGroups())
                        pi(e, this.canvas)
            }
            onLockClick(e) {
                this.$emit("element-lock-toggle", {
                    element: e.element
                })
            }
            onVisibilityClick(e) {
                this.$emit("element-visibility-toggle", {
                    element: e.element
                })
            }
            onPrintAreaClick(e) {
                this.$emit("element-print-area-toggle", {
                    element: e.element
                })
            }
            onOverlayClick(e) {
                this.$emit("element-overlay-toggle", {
                    element: e.element
                })
            }
            onColorOptionClick(e) {
                this.$emit("element-color-option-toggle", {
                    element: e.element
                })
            }
            onElementTitleChange(e) {
                this.$emit("title-change", {
                    element: e.element
                })
            }
            onSortEnd() {
                const e = this.nestedList.reduce((e,t)=>(t.canvasElement ? e.push(t.canvasElement) : t.group && e.push(t.group.groupElement, ...t.group.children),
                e), []);
                e.forEach((t,i)=>{
                    t.zIndex = e.length - i
                }
                );
                const t = Object(Ht["o"])(e.filter(e=>e instanceof window.fabric.Object), e.filter(e=>!(e instanceof window.fabric.Object)));
                this.canvasElements = t,
                this.$emit("order-updated", {
                    elements: t
                })
            }
            updateGroupsFromCanvas() {
                this.canvas && (this.groups = this.canvas.getElementsGroups())
            }
            layerShiftSelection(e, t) {
                const i = [];
                let n = 0
                  , o = 0;
                if ("preview" == e.type || "eps" === e.type) {
                    if (this.lastSelectedElement) {
                        var r, a;
                        const t = null === (r = this.canvas) || void 0 === r ? void 0 : r.getGroupElements(e).sort((e,t)=>e.zIndex - t.zIndex)[0].zIndex
                          , i = null === (a = this.canvas) || void 0 === a ? void 0 : a.getGroupElements(e).sort((e,t)=>t.zIndex - e.zIndex)[0].zIndex;
                        n = Math.min(this.lastSelectedElement.zIndex, t),
                        o = Math.max(this.lastSelectedElement.zIndex, i)
                    } else if (this.lastSelectedGroup) {
                        var s, l, c, d;
                        const t = null === (s = this.canvas) || void 0 === s ? void 0 : s.getGroupElements(this.lastSelectedGroup).sort((e,t)=>e.zIndex - t.zIndex)[0].zIndex
                          , i = null === (l = this.canvas) || void 0 === l ? void 0 : l.getGroupElements(this.lastSelectedGroup).sort((e,t)=>t.zIndex - e.zIndex)[0].zIndex
                          , r = null === (c = this.canvas) || void 0 === c ? void 0 : c.getGroupElements(e).sort((e,t)=>e.zIndex - t.zIndex)[0].zIndex
                          , a = null === (d = this.canvas) || void 0 === d ? void 0 : d.getGroupElements(e).sort((e,t)=>t.zIndex - e.zIndex)[0].zIndex;
                        n = Math.min(t, r),
                        o = Math.max(i, a)
                    }
                } else if (this.lastSelectedElement)
                    n = Math.min(this.lastSelectedElement.zIndex, e.zIndex),
                    o = Math.max(this.lastSelectedElement.zIndex, e.zIndex);
                else if (this.lastSelectedGroup) {
                    var u, p;
                    const t = null === (u = this.canvas) || void 0 === u ? void 0 : u.getGroupElements(this.lastSelectedGroup).sort((e,t)=>e.zIndex - t.zIndex)[0].zIndex
                      , i = null === (p = this.canvas) || void 0 === p ? void 0 : p.getGroupElements(this.lastSelectedGroup).sort((e,t)=>t.zIndex - e.zIndex)[0].zIndex;
                    n = Math.min(t, e.zIndex),
                    o = Math.max(i, e.zIndex)
                }
                for (const h of this.canvasElements)
                    n <= h.zIndex && h.zIndex <= o && (i.push(h),
                    this.showGroup(this.groups.find(e=>e.id == h.groupId)));
                return this.$emit("element-selected", {
                    elements: i,
                    shiftUsed: t.shiftKey,
                    ctrlUsed: t.ctrlKey
                }),
                i
            }
            setCanvasEventListeners() {
                this.canvas && (this.canvas.on("group:added", e=>{
                    this.collapsedGroupIds.some(t=>t === e.group.id) || this.collapsedGroupIds.push(e.group.id),
                    this.updateGroupsFromCanvas(),
                    this.singleGroupSelection(e.group)
                }
                ),
                this.canvas.on("group:removed", e=>{
                    const t = this.collapsedGroupIds.findIndex(t=>t === e.group.id);
                    t > -1 && this.collapsedGroupIds.splice(t, 1),
                    this.updateGroupsFromCanvas()
                }
                ),
                this.canvas.on("object:grouped", ()=>{
                    this.updateGroupsFromCanvas()
                }
                ),
                this.canvas.on("object:ungrouped", ()=>{
                    this.updateGroupsFromCanvas()
                }
                ),
                this.canvas.on("group:selected", ()=>{
                    this.canvas && (this.activeGroupsIds = this.canvas.getActiveGroups().map(e=>e.id))
                }
                ),
                this.canvas.on("group:deselected", ()=>{
                    this.canvas && (this.activeGroupsIds = this.canvas.getActiveGroups().map(e=>e.id))
                }
                ))
            }
            created() {
                this.updateGroupsFromCanvas(),
                this.setCanvasEventListeners()
            }
            destroyed() {
                this.resetGroups()
            }
        }
        ;
        Object(s["b"])([Object($["c"])({
            default: null
        })], hi.prototype, "canvas", void 0),
        Object(s["b"])([Object($["c"])({
            default: "Layers"
        })], hi.prototype, "collapseTitle", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], hi.prototype, "allowSorting", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], hi.prototype, "allowChangingLock", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], hi.prototype, "allowChangingVisibility", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], hi.prototype, "allowChangingPrintArea", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], hi.prototype, "allowChangingOverlay", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], hi.prototype, "allowChangingColorOption", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], hi.prototype, "showOverlayControls", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], hi.prototype, "allowTitleEdit", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], hi.prototype, "showElementId", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], hi.prototype, "isManagedUser", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], hi.prototype, "showProductTemplateControls", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], hi.prototype, "isPreviewStep", void 0),
        Object(s["b"])([Object($["c"])({
            default: !1
        })], hi.prototype, "isDesign", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], hi.prototype, "showGroups", void 0),
        Object(s["b"])([Object($["c"])({
            default: !0
        })], hi.prototype, "isAbleToGroupOrUngroup", void 0),
        Object(s["b"])([Object($["e"])("canvas")], hi.prototype, "onCanvasChange", null),
        Object(s["b"])([Object($["e"])("canvasElements"), Object($["e"])("filteredGroups")], hi.prototype, "onFilteredGroupsChange", null),
        hi = Object(s["b"])([Object(l["b"])({
            name: "Layers",
            components: {
                draggable: Tt.a,
                "b-list-group": Et["a"],
                "b-list-group-item": Ot["a"],
                "b-row": It["a"],
                "b-col": Dt["a"],
                "b-container": Ft["a"],
                "b-collapse": Mt["a"],
                "svg-icon": zt,
                "editable-text": Nt["a"],
                LayerCanvasElement: ei,
                LayersGroup: li
            }
        })], hi);
        var mi = hi
          , gi = mi
          , fi = (n("07ad"),
        Object(R["a"])(gi, kt, _t, !1, null, "47edff01", null))
          , vi = fi.exports
          , bi = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "vue-need-bootstrap h100"
            }, [i("div", {
                staticClass: "d-flex justify-content-center w-100 h-100 overflow-auto"
            }, [i("div", {
                staticClass: "d-flex flex-column h-100 w-100"
            }, [e.breadcrumbItems.length > 0 ? e._e() : i("div", {
                staticStyle: {
                    padding: "0.75rem 1rem"
                }
            }), e.breadcrumbItems.length > 0 ? i("b-breadcrumb", {
                attrs: {
                    items: e.breadcrumbItems
                }
            }) : e._e(), i("div", {
                staticClass: "app-container container d-flex flex-grow-1 w-100"
            }, [i("transition", {
                attrs: {
                    name: "fade",
                    mode: "out-in"
                }
            }, [i("router-view")], 1)], 1)], 1)])])
        }
          , yi = [];
        o["default"].use(T["b"]);
        let wi = class extends o["default"] {
            get breadcrumbItems() {
                var e, t;
                if (null === (e = this.$route.meta) || void 0 === e || null === (t = e.breadcrumb) || void 0 === t || !t.length)
                    return [];
                const i = this.$route.meta.breadcrumb.map(e=>({
                    to: e.link,
                    text: e.name,
                    href: e.href
                }));
                return i
            }
        }
        ;
        wi = Object(s["b"])([Object(l["b"])({
            name: "AdminRouterWrapper"
        })], wi);
        var Ci = wi
          , xi = Ci
          , Si = Object(R["a"])(xi, bi, yi, !1, null, "51e13eca", null)
          , Pi = Si.exports
          , ki = n("847f")
          , _i = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "w-100"
            }, [i("div", {
                staticClass: "d-flex justify-content-between w-100"
            }, [i("div", [i("b-btn", {
                attrs: {
                    variant: "primary"
                },
                on: {
                    click: e.createTemplateProduct
                }
            }, [e._v("Create product base")])], 1), i("div", {
                staticClass: "d-flex"
            }, [i("b-pagination", {
                attrs: {
                    size: "md",
                    disabled: e.loading,
                    "total-rows": e.totalCount,
                    "per-page": e.itemsPerPage
                },
                model: {
                    value: e.currentPage,
                    callback: function(t) {
                        e.currentPage = t
                    },
                    expression: "currentPage"
                }
            }), i("b-form-input", {
                staticClass: "mb-3 ml-3",
                staticStyle: {
                    width: "unset"
                },
                attrs: {
                    type: "text",
                    debounce: "400",
                    placeholder: "Search",
                    disabled: e.loading
                },
                model: {
                    value: e.searchString,
                    callback: function(t) {
                        e.searchString = t
                    },
                    expression: "searchString"
                }
            })], 1)]), i("b-table", {
                staticClass: "w-100 table",
                staticStyle: {
                    "white-space": "pre-line"
                },
                attrs: {
                    items: e.tableItems,
                    fields: e.tableFields,
                    responsive: "sm",
                    busy: e.loading,
                    "show-empty": "",
                    "empty-text": "No template products",
                    "empty-filtered-text": "No template products matching your search"
                },
                scopedSlots: e._u([{
                    key: "table-busy",
                    fn: function() {
                        return [i("div", {
                            staticClass: "align-items-center d-flex justify-content-center my-2 text-center my-2"
                        }, [i("b-spinner", {
                            attrs: {
                                variant: "primary"
                            }
                        }), i("strong", {
                            staticClass: "ml-3 primary-text"
                        }, [e._v("Loading...")])], 1)]
                    },
                    proxy: !0
                }, {
                    key: "cell(name)",
                    fn: function(t) {
                        return [i("editable-text", {
                            staticClass: "text-with-overflow events-auto",
                            attrs: {
                                tooltip: "Rename"
                            },
                            on: {
                                change: function(i) {
                                    return e.onNameChange(t.item)
                                }
                            },
                            model: {
                                value: t.item.name,
                                callback: function(i) {
                                    e.$set(t.item, "name", i)
                                },
                                expression: "data.item.name"
                            }
                        }), i("b", [e._v(e._s(t.item.id))])]
                    }
                }, {
                    key: "cell(image)",
                    fn: function(t) {
                        return [i("b-img", {
                            attrs: {
                                thumbnail: "",
                                src: e.getImageUrl(t.item.thumbnailPath),
                                height: "50"
                            }
                        })]
                    }
                }, {
                    key: "cell(createdDate)",
                    fn: function(t) {
                        return [i("div", [e._v(e._s(e._f("date")(t.item.createdDate)))])]
                    }
                }, {
                    key: "cell(actions)",
                    fn: function(t) {
                        return [i("loader-btn", {
                            attrs: {
                                variant: "primary",
                                disabled: e.processing
                            },
                            on: {
                                click: function(i) {
                                    return e.editTemplateProduct(t.item.id)
                                }
                            }
                        }, [e._v("Edit ")]), i("loader-btn", {
                            staticClass: "mx-4",
                            attrs: {
                                variant: "primary",
                                disabled: e.processing
                            },
                            on: {
                                click: function(i) {
                                    return e.cloneTemplateProduct(t.item.id)
                                }
                            }
                        }, [e._v(" Clone ")]), i("confirmation-btn", {
                            attrs: {
                                loadingText: "Deleting",
                                disabled: e.processing,
                                modalTitle: "Delete template product"
                            },
                            on: {
                                confirm: function(i) {
                                    return e.deleteTemplateProduct(t.item.id)
                                }
                            },
                            scopedSlots: e._u([{
                                key: "modal-content",
                                fn: function() {
                                    return [e._v(" Do you want to delete template product "), i("b", [e._v(e._s(t.item.name))]), e._v("? ")]
                                },
                                proxy: !0
                            }], null, !0),
                            model: {
                                value: e.processing,
                                callback: function(t) {
                                    e.processing = t
                                },
                                expression: "processing"
                            }
                        }, [e._v(" Delete ")])]
                    }
                }])
            })], 1)
        }
          , Ai = []
          , Ti = n("94ac")
          , Ei = n("13c1")
          , Oi = n("b421");
        let Ii = class extends $["d"] {
            constructor() {
                super(...arguments),
                this.tableFields = [{
                    key: "image"
                }, {
                    key: "name",
                    label: "Name"
                }, {
                    key: "createdDate",
                    label: "Created"
                }, {
                    key: "actions",
                    label: ""
                }],
                this.itemsPerPage = 10,
                this.loading = !0,
                this.processing = !1,
                this.tableItems = [],
                this.currentPage = 1,
                this.from = 0,
                this.count = 0,
                this.totalCount = 0,
                this.searchString = ""
            }
            onPageChange() {
                this.loadTemplateProducts()
            }
            created() {
                this.loadTemplateProducts()
            }
            get getImageUrl() {
                return e=>e ? Object(Oi["a"])(e, !0) : n("81d3")
            }
            async loadTemplateProducts() {
                this.loading = !0;
                try {
                    const e = await Object(Ei["e"])((this.currentPage - 1) * this.itemsPerPage, this.itemsPerPage, this.searchString);
                    this.totalCount = e.totalCount,
                    this.tableItems = e.templateProducts
                } catch (e) {
                    console.error(e)
                } finally {
                    this.loading = !1
                }
            }
            editTemplateProduct(e) {
                location.href = "/createProduct1?" + new URLSearchParams({
                    templateId: e,
                    forProductTemplateCreation: "true",
                    forMyProductBases: "true"
                })
            }
            async cloneTemplateProduct(e) {
                await Object(Ei["a"])(e),
                await this.loadTemplateProducts()
            }
            async deleteTemplateProduct(e) {
                await Object(Ei["b"])(e),
                await this.loadTemplateProducts()
            }
            createTemplateProduct() {
                location.href = "/createProduct1?" + new URLSearchParams({
                    forProductTemplateCreation: "true",
                    forMyProductBases: "true"
                })
            }
            async onNameChange(e) {
                this.loading = !0,
                await Object(Ei["f"])(e.id, e.name),
                this.loading = !1
            }
        }
        ;
        Object(s["b"])([Object(A["b"])("user")], Ii.prototype, "user", void 0),
        Object(s["b"])([Object($["e"])("currentPage"), Object($["e"])("searchString")], Ii.prototype, "onPageChange", null),
        Ii = Object(s["b"])([Object($["a"])({
            name: "MyProductBases",
            components: {
                LoaderBtn: O["a"],
                ConfirmationBtn: Ti["a"],
                EditableText: Nt["a"]
            }
        })], Ii);
        var Di = Ii
          , Fi = Di
          , Mi = Object(R["a"])(Fi, _i, Ai, !1, null, null, null)
          , $i = Mi.exports;
        console.log("Running customily-client@1.8.7"),
        window.rumStartRecording = ()=>{
            window.DD_RUM && window.DD_RUM.startSessionReplayRecording()
        }
        ,
        window.rumStopRecording = ()=>{
            window.DD_RUM && window.DD_RUM.stopSessionReplayRecording()
        }
        ,
        o["default"].config.errorHandler = function(e, t, i) {
            var n;
            const o = `Vue.js error in '${i}' at component ${null === t || void 0 === t || null === (n = t.$options) || void 0 === n ? void 0 : n.name}: ${e}`;
            rumReportError(new Error(o)),
            console.error(o)
        }
        ,
        window.Appcues || (console.log("Appcues is not available"),
        window.alert("Your AdBlocker is blocking our welcome guide. Please make sure your AdBlocker is disabled for this site. We use this to provide announcements, tutorials and new features, no adds at all :D")),
        function() {
            document.cookie = "userToken=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT";
            const e = n("9511");
            window.pdfjsLib = e,
            window.pdfjsLib.GlobalWorkerOptions.workerSrc = "angular-app/libs/VectorPlaceholder/pdf.worker.js",
            angular.module("templates", []).run(["$templateCache", function(e) {
                e.put("angular-app/views/header.html", n("ec7f")),
                e.put("angular-app/views/nav.html", n("06bd"))
            }
            ]),
            angular.module("app.shared.services", ["ngCookies"]),
            angular.module("app.directives", ["app.shared.services", "ngCookies"]),
            angular.module("app.ctrls", ["app.shared.services", "ngCookies"]),
            angular.module("app.vue.components", []),
            angular.module("app", ["templates", "ngRoute", "ngAnimate", "ngSanitize", "ngAria", "ngMessages", "ngMaterial", "ngCookies", "ngStorage", "blockUI", "ngFileUpload", "angular.filter", "flow", "ui.bootstrap", "vcRecaptcha", "ngAside", "ngAvatar", "ngVue", "app.ctrls", "app.directives", "app.shared.services", "app.vue.components"]).config(["$httpProvider", function(e) {
                e.interceptors.push((function() {
                    return {
                        request: function(e) {
                            return e
                        }
                    }
                }
                ))
            }
            ]).config(["$mdThemingProvider", function(e) {
                e.theme("default").primaryPalette("indigo").accentPalette("indigo")
            }
            ]).config(["blockUIConfig", function(e) {
                e.requestFilter = function(e) {
                    return !1
                }
            }
            ]).config(["$mdAriaProvider", function(e) {
                e.disableWarnings()
            }
            ]).config(["$sceDelegateProvider", function(e) {
                e.resourceUrlWhitelist(["self", "https://cdn.customily.com/**"])
            }
            ]),
            angular.module("app.vue.components").value("Account", vt),
            angular.module("app.vue.components").value("EmailConfirmation", Pt),
            angular.module("app.vue.components").value("Layers", vi),
            angular.module("app.vue.components").value("AdminRouterWrapper", Pi),
            angular.module("app.vue.components").value("TemplateProductPodAssignerModal", ki["a"]),
            angular.module("app.vue.components").value("MyProductBases", $i)
        }()
    },
    e034: function(e, t) {
        var i = '<title>Account Settings</title> <div class="h100" ng-controller="AccountSettingsCtrl" ng-cloak> <vue-component class="h100" name="Account" v-on-user-updated="onUserUpdated"/> </div> ';
        e.exports = i
    },
    e0fb: function(e, t, i) {},
    e150: function(e, t, i) {
        "use strict";
        var n = function() {
            var e = this
              , t = e.$createElement
              , i = e._self._c || t;
            return i("div", {
                staticClass: "editable-text-wrapper",
                on: {
                    dblclick: function(t) {
                        return e.enterTitleEditMode(t)
                    }
                }
            }, [e.editMode ? i("input", {
                directives: [{
                    name: "model",
                    rawName: "v-model",
                    value: e.inputValue,
                    expression: "inputValue"
                }],
                ref: "editableInput",
                staticClass: "editable-input",
                attrs: {
                    type: "text"
                },
                domProps: {
                    value: e.inputValue
                },
                on: {
                    keydown: function(t) {
                        return e.onTextInputKeyDown(t)
                    },
                    blur: function(t) {
                        return e.onFocusLost()
                    },
                    click: function(e) {
                        return e.stopImmediatePropagation()
                    },
                    input: function(t) {
                        t.target.composing || (e.inputValue = t.target.value)
                    }
                }
            }) : [i("div", {
                staticClass: "editable-div user-select-none",
                attrs: {
                    id: "editable-label",
                    title: e.text || e.defaultText
                }
            }, [e._v(" " + e._s(e.text || e.defaultText) + " ")]), e.tooltip.length ? i("b-tooltip", {
                attrs: {
                    target: "editable-label",
                    triggers: "hover",
                    placement: e.tooltipDirection,
                    container: "bootstrap-parent-container"
                }
            }, [e._v(" " + e._s(e.tooltip) + " ")]) : e._e()]], 2)
        }
          , o = []
          , r = i("9ab4")
          , a = i("2b0e")
          , s = i("2fe1")
          , l = i("60a3");
        let c = class extends a["default"] {
            constructor() {
                super(...arguments),
                this.editMode = !1,
                this.inputValue = ""
            }
            onTextChange() {
                this.inputValue = this.text
            }
            enterTitleEditMode(e) {
                this.allowEditing && setTimeout(()=>{
                    this.editMode = !0,
                    this.inputValue = this.text,
                    this.$nextTick().then(()=>{
                        this.$refs.editableInput.focus()
                    }
                    ),
                    e.stopImmediatePropagation(),
                    e.preventDefault()
                }
                , 20)
            }
            onFocusLost() {
                this.editMode && this.inputValue !== this.text && this.$emit("change", this.inputValue),
                this.editMode = !1
            }
            onTextInputKeyDown(e) {
                "Enter" === e.key && this.editMode ? (e.preventDefault(),
                e.stopPropagation(),
                this.onFocusLost()) : !this.editMode || "Escape" !== e.key && "Esc" !== e.key || (e.preventDefault(),
                e.stopPropagation(),
                this.editMode = !1),
                e.stopImmediatePropagation()
            }
            created() {
                this.inputValue = this.text
            }
        }
        ;
        Object(r["b"])([Object(l["c"])({
            default: ""
        })], c.prototype, "defaultText", void 0),
        Object(r["b"])([Object(l["c"])({
            default: !0
        })], c.prototype, "allowEditing", void 0),
        Object(r["b"])([Object(l["c"])({
            default: "right"
        })], c.prototype, "tooltipDirection", void 0),
        Object(r["b"])([Object(l["c"])({
            default: ""
        })], c.prototype, "tooltip", void 0),
        Object(r["b"])([Object(l["b"])("change")], c.prototype, "text", void 0),
        Object(r["b"])([Object(l["e"])("text")], c.prototype, "onTextChange", null),
        c = Object(r["b"])([Object(s["b"])({
            name: "EditableText"
        })], c);
        var d = c
          , u = d
          , p = i("2877")
          , h = Object(p["a"])(u, n, o, !1, null, null, null);
        t["a"] = h.exports
    },
    e17b: function(e, t, i) {},
    e1ea: function(e, t, i) {},
    e23e: function(e, t, i) {
        e.exports = i.p + "img/master-card-colored.7112cb87.svg?x-request=html"
    },
    e45b: function(e, t, i) {
        "use strict";
        i("073d")
    },
    e47c: function(e, t) {
        var i = '<title>Customily - Invalid Store</title> <div class="page" style="height:100%" ng-controller="InvalidStoreCtrl" ng-cloak> <div class="h100" style="display:flex;justify-content:center;align-items:center"> <div style="font-size:18px"> Please <a href="mailto:support@customily.com">contact us</a> to activate <b>{{ shop }}</b> for your account. </div> </div> </div> ';
        e.exports = i
    },
    e59f: function(e, t, i) {
        e.exports = i.p + "img/account.ba8afea7.svg?x-request=html"
    },
    e606: function(e, t) {
        (function() {
            function e() {
                function e(e) {
                    return i(e.getWidth(), e.originalWidth, e.originalMinSizePx, e.originalMaxSizePx)
                }
                function t(e, t, i) {
                    return e * i / t
                }
                function i(e, t, i, n) {
                    var o = e * i / t
                      , r = e * n / t;
                    return {
                        min: o,
                        max: r
                    }
                }
                return {
                    calculateFontSizesFromObject: e,
                    calculateFontSizesFromDimensions: i,
                    calculateCircularFontSizeFromDimensions: t
                }
            }
            angular.module("app.shared.services").factory("GeneralMathUtils", e)
        }
        )()
    },
    e61f: function(e, t, i) {
        e.exports = i.p + "img/vector-placeholder.96bde70a.svg?x-request=html"
    },
    e6b6: function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("0613")
          , o = i("4ff6")
          , r = i.n(o);
        (function() {
            function e(e, t, o, a, s, l, c, d) {
                e.user = null,
                e.showHeader = !0,
                e.showSidebar = !1,
                t.openRoutes = l.openRoutes,
                t.checkingAuth = !0,
                window.Appcues || (console.log("Appcues is not available"),
                window.alert("Your AdBlocker is blocking our welcome guide. Please make sure your AdBlocker is disabled for this site. We use this to provide announcements, tutorials and new features, no adds at all :D")),
                e.$watch("user", async()=>{
                    if (t.user && t.user.Stores) {
                        var e;
                        const n = t.user.Stores.find(e=>1 === e.Type && e.ForceResubscribe)
                          , o = t.user.Username + "";
                        null === (e = window.Appcues) || void 0 === e || e.identify(o, {
                            createdAt: new Date(t.user.CreatedDate).getTime(),
                            accountId: t.user.Id,
                            version: "2.0",
                            language: "english",
                            stores: t.user.Stores.map(e=>`_${e.Type}_`).join(",")
                        }),
                        n && (console.log(`Store ${n.Url} needs subscription`),
                        a.show({
                            controller: ["$scope", "store", "subscriptionUrl", function(e, t, i) {
                                e.store = t,
                                e.subscriptionUrl = i,
                                e.reload = ()=>{
                                    location.reload()
                                }
                            }
                            ],
                            locals: {
                                store: n.Url,
                                subscriptionUrl: r()("https://sh.customily.com", "/shopify/auth?shop=" + n.Url)
                            },
                            template: i("aac3"),
                            parent: angular.element(document.body),
                            clickOutsideToClose: !1,
                            escapeToClose: !1
                        }))
                    }
                }
                ),
                e.$on("$routeChangeSuccess", (function(i, r) {
                    r.$$route && (t.openRoutes.includes(l.getCurrentOriginalPath()) ? t.checkingAuth = !1 : s.getSession().then(a=>{
                        if (t.checkingAuth = !1,
                        a) {
                            n["a"].commit("user", a),
                            e.user = a,
                            s.isRouteAllowed(o.path()) || t.redirectToHome(),
                            e.user && r.$$route.originalPath && r.$$route.originalPath.startsWith("/admin") && !e.user.AccessRoles.Serialized.split(",").includes("admin") && !e.user.ImpersonatedFromAdminUser && t.redirectToHome();
                            const i = window.location.pathname.toLowerCase()
                              , l = a.Stores.find(e=>1 === e.Type)
                              , c = ["/store/podselection/", "/designs", "/myproductbases"];
                            (!e.planIncludesFeature && c.includes(i) || !l && c.includes(i)) && o.path("/home")
                        } else
                            console.log("User not logged"),
                            i.preventDefault(),
                            o.path("/signin");
                        e.$broadcast("route:success", a)
                    }
                    ))
                }
                )),
                e.$on("$routeChangeStart", (function(i, n) {
                    n.$$route && (t.openRoutes.includes(n.$$route.originalPath) ? e.showSidebar = !1 : e.showSidebar = !0,
                    s.setSignInReturnPath(n.$$route.originalPath),
                    n.$$route && !t.openRoutes.includes(n.$$route.originalPath) && (t.checkingAuth = !1))
                }
                )),
                t.navigate = function(e) {
                    o.path(e)
                }
                ,
                t.redirectToHome = function() {
                    e.planIncludesFeature || void 0 == e.planIncludesFeature ? o.path("/store/podSelection") : o.path("/home")
                }
                ,
                t.$on("user:signin", (i,r)=>{
                    console.log("User logged in"),
                    t.checkingAuth = !1,
                    e.showHeader = !0,
                    s.getSession().then(async t=>{
                        n["a"].commit("user", t),
                        e.user = t
                    }
                    ),
                    c.clearFontsCache();
                    const a = s.getSignInReturnPath();
                    a && !a.includes("subPath") ? o.path(a) : t.redirectToHome(),
                    s.setSignInReturnPath(null)
                }
                ),
                s.setSignInReturnPath(o.path())
            }
            e.$inject = ["$rootScope", "$scope", "$location", "$mdDialog", "AuthService", "ConfigService", "FontManagerService", "UsersAPIService"],
            angular.module("app.ctrls").controller("AppCtrl", e)
        }
        )()
    },
    e8da: function(e, t, i) {
        "use strict";
        i("47b8")
    },
    e939: function(e, t, i) {
        i("ff3b");
        const {reverseText: n} = i("13c7");
        fabric.BoundedText = fabric.util.createClass(fabric.Group, {
            cacheProperties: fabric.Group.prototype.cacheProperties.concat("textVerticalAlign", "textAlign", "caps", "outlineWidth", "fontFamily", "fillPattern", "version", "lineSpacing", "ligatures", "tracking", "fontSize", "multiline", "minSizePx", "maxSizePx", "prefix", "suffix", "referenceId", "_textWithoutPrefixSuffix"),
            async: !0,
            type: "bounded-text",
            lockUniScalingWithSkew: !1,
            caps: !1,
            debug: !1,
            version: "2.0.0",
            Itext: !1,
            textVerticalAlign: "center",
            lineSpacing: 1,
            _textWithoutPrefixSuffix: "",
            initialize: function(e) {
                e.fontFamily && (e.fontFamily = this._sanitizeFontFamily(e.fontFamily)),
                e.version = e.version || fabric.BoundedText.prototype.version,
                e.width = e.width || 300,
                e.height = e.height || 300;
                const t = {
                    width: e.width,
                    height: e.height,
                    fontSize: e.fontSize || 200,
                    originX: "center",
                    originY: "center",
                    textAlign: e.textAlign || "center",
                    centeredRotation: !0,
                    color: e.color || "black",
                    fontFamily: e.fontFamily || "Arial",
                    backgroundColor: this.debug ? "#f7dacf" : "rgba(0,0,0,0)",
                    tracking: e.tracking || 0,
                    version: e.version
                }
                  , i = new fabric.OpentypeIText("",t);
                i.set("maxWidth", e.width),
                i.set("maxHeight", e.height);
                const n = new fabric.Rect({
                    strokeDashArray: e.strokeDashArray,
                    originX: "center",
                    originY: "center",
                    stroke: "#000000",
                    strokeWidth: 3,
                    width: e.width,
                    height: e.height,
                    fill: "rgba(0, 0, 0, 0)"
                });
                this.callSuper("initialize", [i, n], e),
                this.setTextAlign(e.textAlign || "center"),
                this.setText(e.Itext ? "" : "A"),
                this.on({
                    scaling: function(e) {
                        if (this.lockUniScalingWithSkew) {
                            let t = 1;
                            t = "scaleX" === e.transform.action ? this.scaleX : this.scaleY,
                            this.scaleX = t,
                            this.scaleY = t
                        }
                    },
                    scaled: function() {
                        this.setScale(this.width, this.height, !1)
                    },
                    added: function() {
                        this.cornerSize = .025 * this.canvas.width,
                        this.transparentCorners = !1
                    }
                })
            },
            _getCacheCanvasDimensions: function() {
                const e = this.callSuper("_getCacheCanvasDimensions");
                return e.height = 2 * this.height * e.zoomY,
                e
            },
            updateFromGroupScaling: function() {
                this.setScale(this.width, this.height, !0)
            },
            setScale: function(e, t, i) {
                const n = e * this.scaleX
                  , o = t * this.scaleY;
                this.scaleX = 1,
                this.scaleY = 1,
                this.setWidth(n),
                this.setHeight(o),
                i && this.setTextAlign(this.getTextAlign())
            },
            _set: function(e, t) {
                "minSizePx" === e ? this.setMinSizePx(t) : "maxSizePx" === e ? this.setMaxSizePx(t) : "textAlign" === e ? this.setTextAlign(t) : "caps" === e ? this.setCaps(t) : "text" === e ? this.setText(t) : "outlineWidth" === e ? this.setOutlineWidth(t) : "fontFamily" === e ? this.setFontFamily(t) : "fill" === e && t.constructor === fabric.Pattern ? this.item(0).set("fillPattern", t) : "version" === e ? this.item(0).set("version", t) : "lineSpacing" === e ? this.item(0).set("lineSpacing", t) : "ligatures" === e ? this.item(0).set("ligatures", t) : "multiline" === e && this.setMultiline(t),
                this.callSuper("_set", e, t),
                "prefix" !== e && "suffix" !== e || this.setText(this.getText())
            },
            getTextPaths: function(e=!1) {
                return this.item(0).getTextPaths(e)
            },
            setTextAlign: function(e) {
                "opentype-itext" == this.item(0).type && this.item(0).set("textAlign", e)
            },
            setTrackingAmount: function(e) {
                this.item(0).set("tracking", e || 0)
            },
            getTrackingAmount: function() {
                return this.item(0).tracking || 0
            },
            getOutlineWidth: function() {
                return this.item(0).opentypeStrokeWidth || 0
            },
            setOutlineWidth: function(e) {
                this.item(0).set("opentypeStrokeWidth", e || 0)
            },
            getOutlineColor: function() {
                return this.item(0).opentypeStroke || "#000000"
            },
            setOutlineColor: function(e) {
                this.item(0).set("opentypeStroke", e || "#000000")
            },
            getTextAlign: function() {
                return this.item(0).textAlign
            },
            setCursorColor: function(e) {
                this.item(0).cursorColor = e
            },
            setStroke: function(e) {
                this.item(1).set("stroke", e)
            },
            setStrokeWidth: function(e) {
                this.item(1).set("strokeWidth", e)
            },
            getStroke: function() {
                return this.item(1).stroke
            },
            setColor: function(e) {
                this.item(0).setColor(e)
            },
            getColor: function() {
                return this.item(0).fill
            },
            getText: function() {
                return this._textWithoutPrefixSuffix
            },
            getTextWithLines: function() {
                return this.item(0).getText()
            },
            setText: function(e) {
                return e || (e = ""),
                this.set("_textWithoutPrefixSuffix", e),
                e && (this.caps && (e = e.toUpperCase()),
                e = (this.prefix || "") + e + (this.suffix || "")),
                this.item(0).set("text", this.Itext ? n(e) : e),
                e
            },
            forceFontSize: function(e) {
                e ? (this.item(0).set("maxFontSize", e),
                this.item(0).set("minFontSize", e)) : (this.item(0).set("maxFontSize", this.maxSizePx),
                this.item(0).set("minFontSize", this.minSizePx))
            },
            setFontSize: function(e) {
                this.item(0).fontSize = e
            },
            getFontSize: function() {
                return this.item(0).fontSize
            },
            _sanitizeFontFamily: function(e) {
                return e.indexOf("'") < 0 && (e = "'" + e + "'"),
                e
            },
            setFontFamily: function(e) {
                e = this._sanitizeFontFamily(e),
                this.item(0).set("fontFamily", e)
            },
            getFontFamily: function() {
                return this.item(0).fontFamily
            },
            setWidth: function(e) {
                e || (e = 0),
                this.set("width", e),
                this.item(1).set("width", e),
                this.item(0).set("maxWidth", e)
            },
            getWidth: function() {
                return this.width * this.scaleX
            },
            setHeight: function(e) {
                e || (e = 0),
                this.set("height", e),
                this.item(1).set("height", e),
                this.item(0).set("maxHeight", e)
            },
            getHeight: function() {
                return this.height * this.scaleY
            },
            setMinSizePx: function(e) {
                this.minSizePx = e,
                this.item(0).set("minFontSize", e)
            },
            setMaxSizePx: function(e) {
                this.maxSizePx = e,
                this.item(0).set("maxFontSize", e)
            },
            setMultiline: function(e) {
                this.multiline = e,
                this.item(0).set("multiline", e)
            },
            setCaps: function(e) {
                this.caps = e,
                e && this.setText(this.getText().toUpperCase())
            },
            getTextPosition: function(e, t) {
                const i = {
                    top: 0,
                    left: 0
                };
                switch (t) {
                case "center":
                    i.top = 0;
                    break;
                case "top":
                    i.top = (this.getHeight() - this.item(0).height) / -2;
                    break;
                case "bottom":
                    i.top = (this.getHeight() - this.item(0).height) / 2;
                    break
                }
                switch (e) {
                case "justify":
                case "center":
                    i.left = 0;
                    break;
                case "left":
                    i.left = (this.getWidth() - this.item(0).width) / -2;
                    break;
                case "right":
                    i.left = (this.getWidth() - this.item(0).width) / 2;
                    break
                }
                return i
            },
            drawObject: function(e) {
                const t = this.getTextPosition(this.textAlign, this.textVerticalAlign);
                this.item(0).set({
                    top: t.top,
                    left: t.left
                }),
                this.callSuper("drawObject", e)
            },
            clone: function(e) {
                const t = new fabric.BoundedText({
                    width: this.getWidth(),
                    height: this.getHeight(),
                    originX: "center",
                    originY: "center",
                    left: this.left,
                    top: this.top,
                    skewX: this.skewX,
                    skewY: this.skewY,
                    strokeDashArray: this.item(1).strokeDashArray,
                    angle: this.angle,
                    centeredRotation: (!0).centeredRotation,
                    Itext: this.Itext,
                    lockSkewingX: this.lockSkewingX,
                    lockSkewingY: this.lockSkewingY,
                    lockScalingFlip: !0,
                    fontPath: this.fontPath,
                    fontName: this.firstFontName || this.fontName,
                    fontColorsMap: new Map(this.fontColorsMap),
                    fontsMap: new Map(this.fontsMap),
                    outlineColor: this.outlineColor,
                    id: this.id,
                    uuid: this.uuid,
                    evented: this.evented,
                    selectable: this.selectable,
                    locked: this.locked,
                    visible: this.visible,
                    name: this.name,
                    fontColorOption: this.fontColorOption,
                    fontOption: this.fontOption,
                    prefix: this.prefix,
                    suffix: this.suffix,
                    ligatures: this.ligatures,
                    referenceId: this.referenceId,
                    lineSpacing: this.lineSpacing,
                    groupId: this.groupId
                });
                t.setMultiline(this.multiline),
                t.setMinSizePx(this.minSizePx),
                t.setMaxSizePx(this.maxSizePx),
                t.setFontFamily(this.getFontFamily()),
                t.setFontSize(this.item(0).fontSize),
                t.setColor(this.getColor()),
                t.setStroke(this.item(1).stroke),
                t.setStrokeWidth(this.item(1).strokeWidth),
                t.setCursorColor(this.item(0).cursorColor),
                t.setTextAlign(this.item(0).textAlign),
                t.setOutlineColor(this.getOutlineColor()),
                t.setOutlineWidth(this.getOutlineWidth()),
                t.setTrackingAmount(this.getTrackingAmount()),
                t.set("caps", this.caps),
                t.set("fontLibraryId", this.fontLibraryId),
                t.set("colorLibraryId", this.colorLibraryId),
                t.set("zIndex", this.zIndex),
                t.set("version", this.version),
                t.item(0).set("version", this.version),
                t.set("prefix", this.prefix),
                t.set("suffix", this.suffix),
                t.setText(this.getText()),
                e && e(t)
            }
        })
    },
    ea0b: function(e, t, i) {},
    ea5b: function(e, t, i) {},
    ec7f: function(e, t, i) {
        var n = i("4719")
          , o = i("bcdb")
          , r = i("99f5")
          , a = n(o)
          , s = n(r)
          , l = '<div class="header-bar" ng-controller="HeadCtrl"> <div class="header-alert new-app-version-banner container-fluid" ng-show="newAppVersionAvailable" ng-class="{\'slide-in\': newAppVersionAvailable}"> <h5> A new version of Customily is available. <u><b ng-click="refreshPage()">Please refresh to update.</b></u> </h5> </div> <div class="header-alert payment-failed container-fluid" ng-show="subscription.Status == \'past_due\' || subscription.Status == \'paused_past_due\'" ng-class="{\'slide-in\': subscription.Status == \'past_due\' || subscription.Status == \'paused_past_due\'}"> <h5> Your store <b>{{ subscription.Store }}</b> is scheduled to be suspended soon. <b>Please update your payment method <u class="cursor-pointer" ng-click="goToAccount(subscription.Store)">here</u> to avoid it.</b> </h5> </div> <div class="header-alert payment-failed container-fluid" ng-show="subscription.Status == \'unpaid\'" ng-class="{\'slide-in\': subscription.Status == \'unpaid\'}"> <h5> We couldn\'t process your payment for <b>{{ subscription.Store }}</b>. <b>Please update your payment method <u class="cursor-pointer" ng-click="goToAccount(subscription.Store)">here</u>.</b> </h5> </div> <div class="header-alert payment-failed container-fluid" ng-show="user && user.IsDisabled && !user.Canceled" ng-class="{\'slide-in\': user && user.IsDisabled && !user.Canceled}"> <h5> Your account is currently paused. You can resume it <u class="cursor-pointer" ng-click="goToAccount()">here</u>. </h5> </div> <div class="header-alert payment-failed container-fluid" ng-show="user && user.Canceled" ng-class="{\'slide-in\': user && user.Canceled }"> <h5>This account is canceled. To reactivate it please contact us.</h5> </div> <div class="header-container container-fluid h100"> <div class="row vertical-align h100"> <div class="col-xs-12 header-text header-single" ng-class="headerClasses" ng-show="headerMode === \'single\'"> <h5 ng-attr-title="{{ headerTitle }}"><b>{{ headerTitle }}</b></h5> </div> <div class="col-xs-6 header-text header-left text-left" ng-class="headerClasses" ng-show="headerMode === \'dual\'"> <div style="display:flex;position:relative"> <div class="template-resize-btn-container" style="right:unset" ng-if="(!$root.isManagedUser || $root.user.UserImpersonatedFromId)"> <button class="undo-redo-btn" ng-class="{ disabled: !undoManager.canUndo() || !planIncludesFeature }" ng-click="undoManager.undo()"> <md-icon class="icon" md-svg-src="' + a + '"></md-icon> </button> <button class="undo-redo-btn" ng-class="{ disabled: !undoManager.canRedo() || !planIncludesFeature }" ng-click="undoManager.redo()"> <md-icon class="icon" md-svg-src="' + s + '"></md-icon> </button> <md-tooltip ng-if="!planIncludesFeature" md-delay="200" md-direction="bottom"> Your current plan doesn\'t include this feature. Please check your upgrade options with our supoport team :) </md-tooltip> </div> <h5 ng-attr-title="{{ headerTitleLeft }}" style="width:calc(100% - 90px);text-overflow:ellipsis;white-space:nowrap"> <b style="margin-left:45px">{{ headerTitleLeft }}</b> </h5> <div class="template-resize-btn-container"> <md-button class="template-resize-btn" ng-if="showTemplateResizeBtn && (!$root.isManagedUser || $root.user.UserImpersonatedFromId)" ng-click="onResizeBtnClick()"> Resize </md-button> </div> </div> </div> <div class="col-xs-6 header-text header-right text-left" ng-class="headerClasses" ng-show="headerMode === \'dual\'"> <h5 ng-attr-title="{{ headerTitleRight }}"><b>{{ headerTitleRight }}</b></h5> </div> </div> </div> </div> ';
        e.exports = l
    },
    ed31: function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("afd9")
          , o = i("576f");
        const r = i("fbd1");
        (function() {
            function e(e, t, i, a, s, l, c, d, u, p) {
                e.title = "create" === c ? "New Template" : "Edit Dimensions",
                e.submitButtonText = "create" === c ? "Create page" : "Edit page",
                e.showProductName = "create" === c,
                e.showBaseUpload = "create" === c,
                e.uploadingBaseFile = !1,
                e.DPI = 300,
                e.errorUploadingBaseFile = !1,
                e.askForImageDpi = !1,
                e.unit = "mm",
                e.maxWidth = 2e4,
                e.maxHeight = 2e4,
                e.childTemplateProduct = p.getChildTemplateProduct(),
                e.isChildTemplateProduct = e.childTemplateProduct && e.childTemplateProduct.parentId,
                e.$watch("unit", t=>{
                    switch (t) {
                    case "mm":
                        e.maxWidth = 2e4,
                        e.maxHeight = 2e4;
                        break;
                    case "inch":
                        e.maxWidth = 800,
                        e.maxHeight = 800;
                        break;
                    case "px":
                        e.maxWidth = 16e3,
                        e.maxHeight = 16e3;
                        break
                    }
                }
                );
                let h = null
                  , m = null;
                e.page = {
                    pageWidthDim: d,
                    pageHeightDim: u,
                    productName: "Sample Template"
                };
                const g = (e,t,i)=>{
                    let o = e.pageWidthDim
                      , r = e.pageHeightDim;
                    switch (t) {
                    case "inch":
                        o = Object(n["a"])(o),
                        r = Object(n["a"])(r);
                        break;
                    case "px":
                        o = Object(n["c"])(o, i),
                        r = Object(n["c"])(r, i);
                        break
                    }
                    return {
                        ...e,
                        pageWidthDim: o,
                        pageHeightDim: r,
                        submittedData: {
                            width: e.pageWidthDim,
                            height: e.pageHeightDim,
                            unit: t
                        }
                    }
                }
                ;
                e.onSubmit = function() {
                    t.hide({
                        page: g(e.page, e.unit, e.DPI)
                    })
                }
                ,
                e.onDpiSubmit = function() {
                    e.DPI = e.DPI || 300,
                    f(h, m)
                }
                ,
                e.uploadBaseFile = function(t) {
                    const i = t.target.files;
                    i && i[0] && ("eps" == i[0].name.split(".").pop() ? e.uploadBaseEPS(i) : e.uploadBaseImage(i))
                }
                ;
                const f = function(r, a) {
                    const s = Object(o["c"])(a);
                    l.imageToBase64(r, s).then((function(o) {
                        const s = o
                          , l = a;
                        e.page.pageWidthDim = Object(n["c"])(r.width, e.DPI),
                        e.page.pageHeightDim = Object(n["c"])(r.height, e.DPI),
                        t.hide({
                            page: g(e.page, e.unit, e.DPI),
                            image: {
                                baseImageToUpload: l,
                                baseImagePath: s,
                                DPI: e.DPI
                            }
                        }),
                        i((function() {
                            e.$apply(),
                            $("#baseFileHiddenUpload")[0].value = null
                        }
                        ))
                    }
                    ))
                };
                e.uploadBaseImage = function(t) {
                    if (!t || !t[0])
                        throw new Error("No image files, how did this happen?");
                    r(t[0], (function(n, o) {
                        o.exif && o.exif.get("XResolution") ? (e.DPI = o.exif.get("XResolution"),
                        f(n, t[0])) : (e.askForImageDpi = !0,
                        m = t[0],
                        h = n,
                        i(()=>e.$apply()))
                    }
                    ), {
                        orientation: !0,
                        meta: !0
                    })
                }
                ,
                e.uploadBaseEPS = function(n) {
                    n && n[0] && (a.start("Uploading EPS"),
                    i((function() {
                        e.$apply()
                    }
                    )),
                    s.uploadVectorToS3(n[0], "base", !0, !1, (function(t, n) {
                        "upload" === t ? (a.message(`Uploading EPS ${parseInt(n)}%`),
                        i(()=>{
                            e.$apply()
                        }
                        )) : a.message("Processing")
                    }
                    )).then(n=>{
                        const o = n.EPS
                          , r = n.SVG;
                        e.page.pageWidthDim = n.Width,
                        e.page.pageHeightDim = n.Height,
                        t.hide({
                            page: g(e.page, e.unit, e.DPI),
                            eps: {
                                baseEpsPath: o,
                                baseImagePath: r
                            }
                        }),
                        i((function() {
                            e.$apply(),
                            a.reset(),
                            $("#baseFileHiddenUpload")[0].value = null
                        }
                        ))
                    }
                    ).catch(t=>{
                        window.rumReportError(t),
                        a.reset(),
                        $("#baseFileHiddenUpload")[0] && ($("#baseFileHiddenUpload")[0].value = null),
                        e.errorUploadingBaseFile = !0,
                        i((function() {
                            e.$apply()
                        }
                        ))
                    }
                    ))
                }
            }
            e.$inject = ["$scope", "$mdDialog", "$timeout", "blockUI", "VectorUtilService", "ImageUtilService", "mode", "initialWidth", "initialHeight", "ProductService"],
            angular.module("app.ctrls").controller("PageDimensionsModalCtrl", e)
        }
        )()
    },
    edaf: function(e, t, i) {},
    eed3: function(e, t, i) {
        "use strict";
        i.r(t);
        var n = i("4ff6")
          , o = i.n(n);
        (function() {
            function e(e, t, i) {
                t.currentRoute = "/home",
                t.bullMqJobsUrl = o()("https://sh.customily.com", "/admin/bullmq"),
                t.$watch("user", (function() {
                    t.user && (t.userInitials = t.user.Username.toUpperCase().slice(0, 2))
                }
                )),
                t.user && (t.userInitials = t.user.Username.toUpperCase().slice(0, 2)),
                t.currentRoute = i.path(),
                t.queryParams = i.search(),
                t.inMyDesign = "forMyDesigns"in t.queryParams,
                t.isMyProductBases = "forMyProductBases"in t.queryParams,
                e.$on("$routeChangeSuccess", (function(e, n, o) {
                    n && n.$$route && n.$$route.originalPath && (t.currentRoute = i.path(),
                    t.inMyDesign = !1,
                    t.isMyProductBases = !1)
                }
                )),
                t.goToHangfire = function() {
                    window.location = "/hangfire"
                }
                ,
                t.openHelpCenter = function() {
                    window.open("https://help.customily.com/en", "_blank")
                }
                ,
                t.goToAccount = function() {
                    i.path("/account")
                }
                ,
                t.goToAdmin = function() {
                    i.path("/admin")
                }
            }
            e.$inject = ["$rootScope", "$scope", "$location"],
            angular.module("app.ctrls").controller("SideBarCtrl", e)
        }
        )()
    },
    f125: function(e, t) {
        var i = '<md-dialog> <div style="width:500px"> <md-toolbar style="min-height:45px;height:45px"> <div class="md-toolbar-tools" style="background:linear-gradient(141deg,#849dd8 15%,#8bc4d3 75%)"> <div class="text-center w100"> <h2>{{ title }}</h2> </div> </div> </md-toolbar> <md-dialog-content> <md-content class="md-padding"> <form name="pageSizeModalForm" ng-submit="onSubmit()" ng-show="!askForImageDpi"> <div class="row" style="margin-right:15px;margin-left:15px"> <md-input-container class="md-block mb0" ng-show="showProductName && !isChildTemplateProduct"> <label style="padding-left:0">Template Name</label> <input required md-no-asterisk type="text" name="productName" ng-model="page.productName"/> </md-input-container> <div class="md-block mb-2 mt-2 scrolling-page" style="color:gray" ng-show="isChildTemplateProduct"> <label style="padding-left:0">Existing sizes</label> <p style="padding-left:0" ng-repeat="template in childTemplateProduct.savedTemplates">{{ template.oldVariant }}</p> </div> <div style="display:flex;justify-content:center"> <md-input-container class="minimal-input"> <label>Width</label> <input smart-float required md-no-asterisk type="number" step="any" name="pageWidth" ng-model="page.pageWidthDim" min="1" ng-max="maxWidth" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/"/> </md-input-container> <md-input-container class="minimal-input"> <label>Height</label> <input smart-float required md-no-asterisk type="number" step="any" name="pageHeight" ng-model="page.pageHeightDim" min="1" ng-max="maxHeight" ng-pattern="/^-?\\d+(\\.\\d{1,25})?$/"/> </md-input-container> <md-input-container class="minimal-input"> <label>Unit</label> <md-select ng-model="unit"> <md-option ng-value="\'mm\'"> mm </md-option> <md-option ng-value="\'inch\'"> inch </md-option> <md-option ng-value="\'px\'"> px </md-option> </md-select> </md-input-container> <md-input-container class="minimal-input" ng-show="unit === \'px\'"> <label>PPI</label> <input required md-no-asterisk type="number" step="1" name="DPI" ng-model="DPI" min="1" max="1200"/> </md-input-container> </div> <div ng-messages="pageSizeModalForm.pageWidth.$error" class="text-bold" style="color:#dd2c00" md-auto-hide="false"> <div ng-message="required">Width is required</div> <div ng-message="min">Width is pretty small! Try something a little bigger.</div> <div ng-message="pattern">That doesn\'t look like a valid width!</div> <div ng-message="max">Maximum width is {{ maxWidth }}</div> </div> <div ng-messages="pageSizeModalForm.pageHeight.$error" class="text-bold" style="color:#dd2c00" md-auto-hide="false"> <div ng-message="required">Height is required</div> <div ng-message="min">Height is pretty small! Try something a little bigger.</div> <div ng-message="pattern">That doesn\'t look like a valid height!</div> <div ng-message="max">Maximum height is {{ maxHeight }}</div> </div> <div ng-messages="pageSizeModalForm.DPI.$error" class="text-bold" style="color:#dd2c00"> <div ng-message="min">Resolution can\'t be negative</div> <div ng-message="max">The maximum resolution is 1200 PPI</div> </div> <md-button class="md-raised md-primary w100 m0" style="margin-bottom:15px;margin-top:15px" type="submit">{{ submitButtonText }}</md-button> <div ng-show="showBaseUpload"> <div class="text-center" style="font-size:12px"> Or <u style="color:#7258e0;cursor:pointer" upload-file input-id="baseFileHiddenUpload">upload a file (.eps, .png, .jpg)</u> to get started <div ng-if="errorUploadingBaseFile" class="mt10" style="color:red"> Error uploading EPS </div> </div> <input id="baseFileHiddenUpload" type="file" style="display:none" accept=".eps,.png,.jpg,.jpeg" custom-on-change="uploadBaseFile"/> </div> </div> </form> <form name="imageDpiForm" ng-submit="onDpiSubmit()" ng-show="askForImageDpi"> <p style="margin-bottom:30px"> We couldn\'t determine the image resolution, which one should we use? </p> <md-input-container class="md-block m0"> <label>Image resolution (PPI)</label> <input required type="number" step="any" name="resolution" ng-model="DPI" min="1" max="1200"/> <div ng-messages="resolutionForm.resolution.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">Please enter the resolution to use!</div> <div ng-message="min">That resolution is too small</div> <div ng-message="max">The maximum resolution is 1200 PPI</div> </div> </md-input-container> <md-button class="md-raised md-primary w100 m0" type="submit">Upload Image</md-button> </form> </md-content> </md-dialog-content> </div> </md-dialog>';
        e.exports = i
    },
    f15f: function(e, t, i) {},
    f198: function(e, t, i) {
        "use strict";
        i("dec7")
    },
    f544: function(e, t, i) {
        e.exports = i.p + "img/text.b2e0f006.svg?x-request=html"
    },
    f6b1: function(e, t) {
        var i = '<div class="edit-library scrolling-page" ng-controller="EditLibraryCtrl" style="margin-top:5px" ng-cloak> <title>{{ libraryTypeStrings[library.Type] }} Library</title> <div class="col-xs-12" style="margin-top:30px"> <div class="col-xs-6" style="padding:0"> <md-button class="md-raised btn-turquise col-xs-2 ml0" ng-click="goToCategories()">Back</md-button> <md-button class="md-raised md-primary col-xs-4" ng-click="addElement()"> <div ng-if="!addElementLoading">Add {{ libraryTypeStrings[library.Type] }}</div> <div class="col-xs-12" style="text-align:center;padding:5px" ng-if="addElementLoading"> <md-progress-circular style="margin:auto" md-mode="indeterminate" md-diameter="30px"></md-progress-circular> </div> </md-button> </div> <div style="float:right"> <md-input-container style="margin-top:2%;text-align:left" class="hide-validation-error"> <md-tooltip md-direction="bottom"> Search by position </md-tooltip> <label> Position </label> <input ng-model="searchString"/> </md-input-container> <md-button class="md-raised btn-turquise" style="margin-top:0" ng-click="getList()">Search</md-button> </div> <div class="clearfix"></div> <table class="table table-striped table-inverse category-table" style="margin-bottom:0"> <thead class="thead-inverse"> <tr> <th>Option</th> <th ng-if="library.Type === 0">Color</th> <th ng-if="library.Type === 0 && library.ColorMode === 0">HEX</th> <th ng-if="library.Type === 0 && library.ColorMode === 1">CMYK</th> <th ng-if="library.Type === 0">Alpha</th> <th ng-if="library.Type === 1">Font</th> <th ng-if="library.Type === 2">Vector</th> <th ng-if="library.Type === 3">Image</th> <th>Name</th> </tr> </thead> <tbody> <tr ng-repeat="element in filteredElements"> <td>{{ element.position }}</td> <td ng-if="library.Type === 0" style="height:1px;min-height:1px"> <div class="color-swatch" ng-style="{\'background-color\': toRgba(element.hex, element.alpha) }"></div> </td> <td ng-if="library.Type === 0 && library.ColorMode === 0">{{ element.hex }}</td> <td ng-if="library.Type === 0 && library.ColorMode === 1" style="width:30%"> {{ toStringCmyk(element) }} </td> <td ng-if="library.Type === 0">{{ (element.alpha * 100).toFixed(2) + \'%\' }}</td> <td ng-if="library.Type === 1" style="width:30%">{{ fontPathToName(element.Path) }}</td> <td style="min-width:100px" ng-if="library.Type === 2 || library.Type === 3"> <img ng-src="{{ element.ThumbnailPath }}"/> </td> <td style="width:100%;cursor:pointer" ng-click="editItem(element, $event)"> <md-tooltip md-direction="left" ng-show="!element.editing">Rename</md-tooltip> <span style="width:80%" ng-hide="element.editing">{{ element.Name }}</span> <md-input-container class="m0"> <input style="width:80%" ng-show="element.editing" ng-keydown="$event.keyCode === 13 && updateLibraryName(element, libraryTypeStrings[library.Type])" ng-model="element.Name" ng-blur="updateLibraryName(element, libraryTypeStrings[library.Type])" autofocus required/> </md-input-container> </td> <td style="width:100%"></td> <td> <md-button class="btn-small md-raised btn-turquise m0" ng-click="edit(element)">Edit</md-button> </td> <td> <md-button class="btn-small md-raised btn-dgray m0" ng-click="delete(element)">Delete</md-button> </td> </tr> </tbody> </table> <div class="text-center"> <pagination ng-model="currentPage" total-items="elementsCount" items-per-page="numPerPage" max-size="maxSize" boundary-links="true"> </pagination> </div> </div> </div> ';
        e.exports = i
    },
    f6ec: function(e, t, i) {},
    f70c: function(e, t) {
        (function() {
            function e(e) {
                function t() {
                    var t = "/Texture/GetTextures";
                    return e.get(t)
                }
                return {
                    getTextures: t
                }
            }
            e.$inject = ["HttpService"],
            angular.module("app.shared.services").factory("TextureAPIService", e)
        }
        )()
    },
    f787: function(e, t, i) {
        var n = i("4719")
          , o = i("56cf")
          , r = n(o)
          , a = '<title>Customily - Password Reset</title> <div class="page page-auth forgot-password-page gradient-customily-bg" style="min-height:100%" ng-controller="PasswordResetCtrl" ng-cloak> <div class="auth-container" style="min-width:350px" ng-show="!userOrTokenError"> <div class="form-head mb20"> <img class="center-block" style="width:100px" src="' + r + '"/> </div> <div class="form-container"> <form name="resetPasswordForm" class="form-vertical" ng-submit="resetPassword()"> <md-input-container class="md-block" flex-gt-sm> <label>New password</label> <input name="password" type="password" placeholder="Type your new password" minlength="8" ng-model="password" required/> <div ng-messages="resetPasswordForm.password.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">A password is required!</div> <div ng-message="minlength">Password must be at least 8 characters long</div> </div> </md-input-container> <md-input-container class="md-block mb0" flex-gt-sm> <label>Confirm new password</label> <input name="passwordConfirmation" type="password" placeholder="Re-enter your new password" ng-minlength="8" ng-model="passwordConfirmation" required/> <div ng-messages="resetPasswordForm.passwordConfirmation.$error" multiple="multiple" md-auto-hide="false"> <div ng-message="required">A password is required!</div> <div ng-message="minlength">Password must be at least 8 characters long</div> </div> </md-input-container> <div class="btn-group-justified mt10" style="display:flex"> <md-button id="submit" type="submit" class="md-raised md-primary w100">Set new password</md-button> </div> </form> </div> </div> <div ng-show="userOrTokenError">Invalid user or token</div> </div> ';
        e.exports = a
    },
    f8fe: function(e, t, i) {
        "use strict";
        i("4409")
    },
    f9aa: function(e, t) {
        fabric.VectorPlaceholder = fabric.util.createClass(fabric.Group, {
            async: !0,
            type: "vector-placeholder",
            cacheProperties: fabric.Group.prototype.cacheProperties.concat("stroke"),
            originX: "center",
            originY: "center",
            selectedPosition: 1,
            svgColor: "",
            svgString: "",
            pdf: null,
            rotationStep: 1,
            coverMaskArea: !1,
            lockUniScalingWithSkew: !1,
            preventEditMode: !1,
            _editMode: !1,
            _enablingEditMode: !1,
            _editModeDataBackup: {},
            _boundingBoxOffsetX: 0,
            _boundingBoxOffsetY: 0,
            initialize: function(e) {
                const t = this;
                e.width = e.width || 300,
                e.height = e.height || 300;
                const i = new fabric.Rect({
                    strokeDashArray: e.strokeDashArray || [10, 10],
                    originX: "center",
                    originY: "center",
                    stroke: e.stroke || "#000000",
                    strokeWidth: e.strokeWidth || 0,
                    width: e.width,
                    height: e.height,
                    fill: "rgba(0, 0, 0, 0)",
                    id: e.id
                })
                  , n = !!e.isMobile;
                this._controlRectangle = new fabric.Rect({
                    originX: "center",
                    originY: "center",
                    strokeWidth: 3,
                    width: e.width,
                    height: e.height,
                    fill: "rgba(0, 0, 0, 0)",
                    id: e.id
                }),
                this._controlRectangle.setControlsVisibility({
                    tl: !n,
                    tr: !n,
                    br: !n,
                    bl: !n,
                    mtr: !n,
                    ml: !1,
                    mb: !1,
                    mr: !1,
                    mt: !1
                }),
                this.callSuper("initialize", [new fabric.SVGObject({
                    width: e.width,
                    height: e.height,
                    visible: !0,
                    originX: "center",
                    originY: "center"
                }), new fabric.PDFObject({
                    width: e.width,
                    height: e.height,
                    visible: !1,
                    originX: "center",
                    originY: "center"
                }), i], e),
                i.set("left", 0),
                i.set("top", 0),
                i.setCoords(),
                this._resetControlRectangle(),
                this._controlRectangle.on({
                    mousedown: function(e) {
                        t.canvas.fire("object:placeholder:mousedown")
                    },
                    mouseup: function(e) {
                        t.canvas.fire("object:placeholder:mouseup")
                    },
                    selected: function(e) {
                        t.canvas.fire("object:placeholder:maskSelected")
                    },
                    deselected: function(e) {
                        t.fire("deselected", e)
                    },
                    moving: function() {
                        const e = this.left - t.left
                          , i = this.top - t.top;
                        t.setVectorOffset(e, i)
                    },
                    rotating: function() {
                        this.angle = Math.ceil(this.angle / t.rotationStep) * t.rotationStep,
                        t.setVectorAngle(this.angle - t.angle)
                    },
                    scaling: function() {
                        t.setVectorScale(this.scaleX, this.scaleY)
                    }
                }),
                this.on({
                    added: function() {
                        this.cornerSize = .025 * this.canvas.width
                    },
                    removed: function() {
                        this.canvas.remove(this._controlRectangle)
                    },
                    scaling: function(e) {
                        if (this.lockUniScalingWithSkew) {
                            let t = 1;
                            t = "scaleX" === e.transform.action ? this.scaleX : this.scaleY,
                            this.scaleX = t,
                            this.scaleY = t
                        }
                    },
                    scaled: function() {
                        this.setScale(this.width, this.height)
                    },
                    rotated: function() {
                        this._resetControlRectangle()
                    },
                    "object:dblclick": function() {
                        if (!this.preventEditMode) {
                            this._editMode = !0,
                            this._enablingEditMode = !0,
                            this._editModeDataBackup.originalCanvasSelection = this.canvas.selection,
                            this.canvas.selection = !1,
                            this._editModeDataBackup.controlsVisibilityBackup = JSON.parse(JSON.stringify(this._getControlsVisibility())),
                            this.setControlsVisibility({
                                bl: !1,
                                br: !1,
                                mb: !1,
                                ml: !1,
                                mr: !1,
                                mt: !1,
                                mtr: !1,
                                tl: !1,
                                tr: !1
                            }),
                            this._controlRectangle.set("cornerSize", this.cornerSize),
                            this._controlRectangle.set("transparentCorners", this.transparentCorners),
                            this._controlRectangle.set("centeredScaling", !0),
                            this._controlRectangle.set("centeredRotation", !0),
                            this._controlRectangle.set("skewX", this.skewX),
                            this._controlRectangle.set("skewY", this.skewY);
                            let e = this.item(0).visible ? this.item(0).scaleX : this.item(1).scaleX
                              , t = this.item(0).visible ? this.item(0).scaleY : this.item(1).scaleY;
                            this._controlRectangle.set("scaleX", e),
                            this._controlRectangle.set("scaleY", t),
                            this.canvas.add(this._controlRectangle),
                            this.canvas.setActiveObject(this._controlRectangle),
                            this._editModeDataBackup.originalLockX = this.lockMovementX,
                            this._editModeDataBackup.originalLockY = this.lockMovementY,
                            this.lockMovementX = this.lockMovementY = !0,
                            this.silentEditMode || (this._editModeDataBackup.originalStroke = this.item(2).stroke,
                            this._editModeDataBackup.originalStrokeWidth = this.item(2).strokeWidth,
                            this.item(2).set("stroke", "red"),
                            this.item(2).set("strokeWidth", 5)),
                            this._enablingEditMode = !1,
                            this.canvas.renderAll()
                        }
                    },
                    deselected: function() {
                        !this._editMode || this._forcedEditMode || this._enablingEditMode || (this._editMode = !1,
                        this.canvas.selection = this._editModeDataBackup.originalCanvasSelection,
                        this.canvas.remove(this._controlRectangle),
                        this.setControlsVisibility(this._editModeDataBackup.controlsVisibilityBackup),
                        this.lockMovementX = this._editModeDataBackup.originalLockX,
                        this.lockMovementY = this._editModeDataBackup.originalLockY,
                        this.silentEditMode || (this.item(2).set("stroke", this._editModeDataBackup.originalStroke),
                        this.item(2).set("strokeWidth", this._editModeDataBackup.originalStrokeWidth),
                        this.set("dirty", !0)),
                        this.canvas.renderAll())
                    }
                }),
                this._adjustClippingPath()
            },
            _set: function(e, t) {
                if ("id" === e)
                    this._controlRectangle && (this._controlRectangle.id = t),
                    this.callSuper("_set", e, t);
                else if ("coverMaskArea" === e)
                    this.item(0).set("coverMaskArea", t),
                    this.item(1).set("coverMaskArea", t),
                    this.callSuper("_set", e, t);
                else if ("angle" === e)
                    this.callSuper("_set", e, t),
                    this._resetControlRectangle();
                else if ("svgString" === e)
                    this.setSVGString(t),
                    this._resetControlRectangle();
                else if ("svgImage" === e)
                    this.setSvgImage(t),
                    this._resetControlRectangle();
                else if ("pdf" === e) {
                    const e = this.item(1)
                      , i = this.item(0);
                    e.set("visible", !0),
                    i.set("visible", !1),
                    e.set("pdf", t),
                    this.pdf = t,
                    this.svgString = "",
                    this._resetControlRectangle(),
                    this._updateSelectionRectScale(e._renderPromise, e)
                } else
                    "width" === e ? (t = t || 0,
                    this._objects.forEach(e=>{
                        e.set("width", t),
                        e.setCoords()
                    }
                    ),
                    this.callSuper("_set", e, t),
                    this._adjustClippingPath(),
                    this._resetControlRectangle()) : "height" === e ? (t = t || 0,
                    this._objects.forEach(e=>{
                        e.set("height", t),
                        e.setCoords()
                    }
                    ),
                    this.callSuper("_set", e, t),
                    this._adjustClippingPath(),
                    this._resetControlRectangle()) : "svgColor" === e ? (this.item(0).set("svgColor", t),
                    this.callSuper("_set", e, t)) : "evented" === e ? (this._controlRectangle.set("evented", t),
                    this._forcedEditMode || this._editMode || this.callSuper("_set", e, t)) : "stroke" === e ? (this.item(2).set("stroke", t),
                    this.callSuper("_set", e, t)) : "hasControls" === e ? (this._controlRectangle.set("hasControls", t),
                    this.callSuper("_set", e, t)) : this.callSuper("_set", e, t)
            },
            enableEditMode: function() {
                this._forcedEditMode = !0,
                this.fire("object:dblclick")
            },
            disableEditMode: function() {
                this.fire("deselected")
            },
            updateFromGroupScaling: function() {
                this.setScale(this.width, this.height)
            },
            setScale: function(e, t) {
                const i = e * this.scaleX
                  , n = t * this.scaleY;
                this.scaleX = 1,
                this.scaleY = 1,
                this.set({
                    width: i,
                    height: n
                })
            },
            setSvgImage: function(e) {
                this.item(1).set("visible", !1),
                this.item(0).set("visible", !0),
                this.item(0).set("svgImage", e),
                this.pdf = null,
                this.svgString = "",
                this._updateSelectionRectScale(this.item(0)._renderPromise, this.item(0))
            },
            setSVGString: function(e) {
                this.item(1).set("visible", !1),
                this.item(0).set("visible", !0),
                this.item(0).set("svgString", e),
                this.pdf = null,
                this.svgString = e,
                this._updateSelectionRectScale(this.item(0)._renderPromise, this.item(0))
            },
            setVectorOffset(e, t) {
                const i = this._correctOffset(e, t);
                this.item(0).set("left", i.x),
                this.item(1).set("left", i.x),
                this.item(0).set("top", i.y),
                this.item(1).set("top", i.y),
                this._controlRectangle.set("left", this.left + e),
                this._controlRectangle.set("top", this.top + t),
                this._controlRectangle.setCoords()
            },
            setVectorAngle(e) {
                this.item(0).set("angle", e),
                this.item(1).set("angle", e),
                this._controlRectangle.set("angle", e + this.angle),
                this._controlRectangle.setCoords()
            },
            setVectorScale(e, t) {
                this.item(0).set("scaleX", e),
                this.item(1).set("scaleX", e),
                this.item(0).set("scaleY", t),
                this.item(1).set("scaleY", t),
                this._controlRectangle.set("scaleX", e),
                this._controlRectangle.set("scaleY", t),
                this._controlRectangle.setCoords()
            },
            getEditModeParameters() {
                return {
                    offsetX: this._controlRectangle.left - this.left || 0,
                    offsetY: this._controlRectangle.top - this.top || 0,
                    scaleX: this._controlRectangle.scaleX || 1,
                    scaleY: this._controlRectangle.scaleY || 1,
                    angle: this._controlRectangle.angle || 0
                }
            },
            _updateSelectionRectScale: function(e, t) {
                e && e.then(()=>{
                    this._controlRectangle.set("scaleX", t.scaleX),
                    this._controlRectangle.set("scaleY", t.scaleY),
                    this._controlRectangle.setCoords()
                }
                )
            },
            _correctOffset: function(e, t) {
                const i = fabric.util.degreesToRadians(this.angle)
                  , n = (t - e * Math.tan(i)) * Math.cos(i)
                  , o = n * Math.tan(i) + e / Math.cos(i);
                return {
                    x: o,
                    y: n
                }
            },
            _resetControlRectangle: function() {
                const e = this._controlRectangle;
                e.set("left", this.left),
                e.set("top", this.top),
                e.set("angle", this.angle),
                e.set("scaleX", 1),
                e.set("scaleY", 1),
                e.set("width", this.width),
                e.set("height", this.height),
                this.setVectorOffset(0, 0),
                this.setVectorAngle(0),
                this.setVectorScale(1, 1)
            },
            _adjustClippingPath: function() {
                this.clipPath || this.set("clipPath", new fabric.Rect({
                    originX: "center",
                    originY: "center"
                })),
                this.clipPath.set("width", this.width),
                this.clipPath.set("height", this.height)
            },
            _getPdfRenderPromise: function() {
                var e = this.item(1);
                return e._renderPromise
            },
            _getSvgRenderPromise: function() {
                var e = this.item(0);
                return e._renderPromise
            },
            toObject: function(e) {
                const t = ["id", "uuid", "strokeWidth", "strokeDashArray", "centeredRotation", "selectedPosition", "selectedColorPosition", "vectors", "colors", "vectorLibraryId", "colorLibraryId", "skewX", "skewY", "lockUniScalingWithSkew", "evented", "selectable", "visible", "locked", "name", "coverMaskArea", "rotationStep", "cornerSize", "transparentCorners", "zIndex", "allowUserUpload", "applyColoring", "svgString", "svgColor", "groupId"].concat(e);
                return this.callSuper("toObject", t)
            }
        }),
        fabric.VectorPlaceholder.fromObject = function(e, t) {
            e.clipPath = void 0;
            const i = new fabric.VectorPlaceholder(e);
            t(i)
        }
    },
    fa4d: function(e, t, i) {
        "use strict";
        i("fabf")
    },
    faa3: function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i, n, o, r, a, s, l, c) {
                e.element = s,
                e.colorMode = r.toLowerCase(),
                e.colorOption = l,
                e.categoryId = n.search().categoryId,
                e.currentColor = {
                    HEX: "000000",
                    alpha: 1
                },
                e.pickerCtrlMethods = {},
                e.errorMessage = "",
                null != s && (e.colorOption = s.position,
                e.categoryId = s.LibraryCategoryId),
                e.pickerColorChange = function(t) {
                    e.currentColor = t,
                    i((function() {
                        e.$apply()
                    }
                    ))
                }
                ,
                e.pickerReady = function(t) {
                    e.pickerColorChange(t),
                    null != s && e.pickerCtrlMethods.setColor(s),
                    e.pickerCtrlMethods.openInContainer($(".color-library-dialog #pickerContainer").get(0))
                }
                ,
                e.toRgba = function(e, t) {
                    var i = new Colors
                      , n = i.convertColor(e.replace("#", ""), "HEX2RGB");
                    return "rgba(" + n.r + "," + n.g + "," + n.b + "," + t + ")"
                }
                ,
                e.create = function() {
                    null === s ? (c.start("Saving color"),
                    o.addElement(a.LibraryId, e.colorOption, {
                        hex: "#" + e.currentColor.HEX,
                        cmyk: e.currentColor.cmyk.c + "," + e.currentColor.cmyk.m + "," + e.currentColor.cmyk.y + "," + e.currentColor.cmyk.k,
                        alpha: e.currentColor.alpha,
                        LibraryCategoryId: e.categoryId
                    }, "color").then((function() {
                        c.stop(),
                        e.pickerCtrlMethods.destroy(),
                        t.hide()
                    }
                    )).catch((function(t) {
                        c.stop(),
                        409 === t.status && (e.errorMessage = "There's already an element at position " + e.colorOption)
                    }
                    ))) : (s.hex = "#" + e.currentColor.HEX,
                    s.cmyk = e.currentColor.cmyk.c + "," + e.currentColor.cmyk.m + "," + e.currentColor.cmyk.y + "," + e.currentColor.cmyk.k,
                    s.alpha = e.currentColor.alpha,
                    s.LibraryCategoryId = e.categoryId,
                    c.start("Updating color"),
                    o.updateElement(a.LibraryId, s.ColorId, s, "color").then((function() {
                        c.stop(),
                        e.pickerCtrlMethods.destroy(),
                        t.hide()
                    }
                    )).catch((function(t) {
                        c.stop(),
                        e.errorMessage = "Error updating color!"
                    }
                    )))
                }
                ,
                e.cancel = function() {
                    e.pickerCtrlMethods.destroy(),
                    t.cancel()
                }
            }
            e.$inject = ["$scope", "$mdDialog", "$timeout", "$location", "LibrariesAPIService", "colorMode", "library", "element", "initialPosition", "blockUI"],
            angular.module("app.ctrls").controller("ColorDialogCtrl", e)
        }
        )()
    },
    fabf: function(e, t, i) {},
    fbff: function(e, t) {
        (function() {
            function e(e, t, i, n, o) {
                function r(e, t, i) {
                    e.set(1, t),
                    i.fontsMap && JSON.parse(i.fontsMap).map((function(t) {
                        e.set(t[0], t[1])
                    }
                    ))
                }
                function a(e, t) {
                    e.set(1, t.color),
                    t.fontColorsMap && JSON.parse(t.fontColorsMap).map((function(t) {
                        e.set(t[0], t[1])
                    }
                    ))
                }
                function s(e, t, i, r) {
                    t.fontsMap.set(i, e),
                    1 === i && (t.fontPath = e,
                    t.firstFontName = t.fontName),
                    r && t.setEditedProp("fontsMap", "fontPath"),
                    n.show(n.alert().parent(document.body).clickOutsideToClose(!1).title("Font saved into option : " + i).ok("OK!")).then((function() {
                        var e, t;
                        o.getCurrentFlow() == o.OptionBPart1 && 1 == i && (null === (e = window.Appcues) || void 0 === e || e.show(o.OptionBPart2));
                        o.getCurrentFlow() == o.OptionBPart3 && 2 == i && (null === (t = window.Appcues) || void 0 === t || t.show(o.OptionBPart4))
                    }
                    ))
                }
                function l(e, t, i) {
                    var r = h({
                        alpha: e.alpha,
                        hex: "#" + e.HEX,
                        cmyk: e.cmyk.c + "," + e.cmyk.m + "," + e.cmyk.y + "," + e.cmyk.k
                    });
                    t.fontColorOption = t.fontColorOption || 1,
                    t.fontColorsMap.set(t.fontColorOption, r),
                    1 === t.fontColorOption && (t.color = r),
                    i && t.setEditedProp("fontColorsMap", "color"),
                    n.show(n.alert().parent(document.body).clickOutsideToClose(!1).title("Color saved into option: " + t.fontColorOption).ok("OK!")).then((function() {
                        var e, i;
                        o.getCurrentFlow() == o.OptionBPart4 && 1 == t.fontColorOption && (null === (e = window.Appcues) || void 0 === e || e.show(o.OptionBPart5));
                        o.getCurrentFlow() == o.OptionBPart6 && 2 == t.fontColorOption && (null === (i = window.Appcues) || void 0 === i || i.show(o.OptionBPart7))
                    }
                    ))
                }
                function c(e, t, i) {
                    t.fontColorsMap ? l(e, t, i) : t.color = e
                }
                async function d(i, n, o) {
                    var r;
                    if ("undefined" !== typeof n) {
                        if (i.fontLibraryId) {
                            var a = await t.getLibraryElementAtPosition(i.fontLibraryId, n);
                            a && (r = a.Path)
                        } else
                            r = i.fontsMap.get(n);
                        if (i.fontOption = n,
                        r) {
                            i.fontPath = r;
                            const t = await e.loadFontFromPath(r);
                            i.set("fontFamily", t),
                            i.fontName = t,
                            o.renderAll()
                        }
                    }
                }
                async function u(i, o, r) {
                    var a;
                    if ("undefined" !== typeof o) {
                        if (i.fontLibraryId) {
                            var s = await t.getLibraryElementAtPosition(i.fontLibraryId, o);
                            s && (a = s.Path)
                        } else
                            a = i.fontsMap && i.fontsMap.get(o);
                        if (i.fontOption = o,
                        a) {
                            i.fontPath = a;
                            const t = await e.loadFontFromPath(a);
                            i.set("fontFamily", t),
                            r.renderAll()
                        } else
                            n.show(n.alert().parent(document.body).clickOutsideToClose(!1).title("There is no font stored in option : " + o).ok("OK!"))
                    }
                }
                async function p(e, n, o, r) {
                    var a;
                    if ("undefined" !== typeof o) {
                        if (a = n.colorLibraryId ? await t.getLibraryElementAtPosition(n.colorLibraryId, o) : n.fontColorsMap && n.fontColorsMap.get(o),
                        a) {
                            var s = i.colorToWeb(a);
                            n.setColor(s),
                            e && e.setColor(a)
                        }
                        n.fontColorOption = o,
                        r.renderAll()
                    }
                }
                function h(e) {
                    var t = {
                        alpha: 1,
                        hex: "#000000",
                        cmyk: "0,0,0,1"
                    };
                    return t = Object.assign(t, e),
                    t
                }
                function m(e) {
                    return "string" === typeof e && e.indexOf("{") > -1 ? JSON.parse(e) : e
                }
                function g(e) {
                    var t = null;
                    if ("string" === typeof e && e.indexOf("{") < 0) {
                        var i = new Colors;
                        if (e.indexOf("#") > -1) {
                            var n = i.convertColor(e.replace("#", ""), "HEX2CMYK");
                            t = h({
                                hex: e,
                                cmyk: n.c / 100 + "," + n.m / 100 + "," + n.y / 100 + "," + n.k / 100
                            })
                        } else {
                            var o = function(e) {
                                var t, i = e.replace(/\s/g, "").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i), n = (i && i[4] || "").trim(), o = i ? (256 | i[1]).toString(16).slice(1) + (256 | i[2]).toString(16).slice(1) + (256 | i[3]).toString(16).slice(1) : e;
                                return t = "" !== n ? n : 1,
                                {
                                    hex: o,
                                    alpha: parseFloat(t)
                                }
                            }
                              , r = o(e);
                            n = i.convertColor(r.hex, "HEX2CMYK");
                            t = h({
                                alpha: r.alpha,
                                hex: "#" + r.hex,
                                cmyk: n.c / 100 + "," + n.m / 100 + "," + n.y / 100 + "," + n.k / 100
                            })
                        }
                    } else
                        t = e;
                    return t
                }
                return {
                    initializeFontsMap: r,
                    initializeFontColorsMap: a,
                    saveFontToOption: s,
                    saveFontColorToOption: l,
                    changeFontOption: d,
                    changeFontOptionPreview: u,
                    changeFontColorOption: p,
                    saveFontColorToOptionPreview: c,
                    createColorObj: h,
                    parseColorFromProperty: m,
                    upgradeOldColor: g
                }
            }
            e.$inject = ["FontManagerService", "LibrariesAPIService", "ElementsColorService", "$mdDialog", "AppCuesService"],
            angular.module("app.shared.services").factory("MultipleFontService", e)
        }
        )()
    },
    fcd6: function(e, t) {
        (function() {
            "use strict";
            r.$inject = ["$scope", "UsersAPIService", "$mdDialog", "msgType", "msgVal"],
            angular.module("app.ctrls").controller("UserReviewModalCtrl", r);
            const e = "https://apps.shopify.com/customily-options-3/reviews?auth=1#reviews"
              , t = "https://cal.mixmax.com/hellocustomily/30_feedback"
              , i = {
                1: "Congratulations, youve reached {value} sales!!",
                2: "Look at you go, you already created {value} templates!!",
                3: "Congrats, youve just published your {value} product!!"
            };
            function n(e) {
                const t = ["th", "st", "nd", "rd"]
                  , i = e % 100;
                return e + (t[(i - 20) % 10] || t[i] || t[0])
            }
            function o(e) {
                Object.assign(document.createElement("a"), {
                    target: "_blank",
                    href: e
                }).click()
            }
            function r(r, a, s, l, c) {
                a.userReviewShowed(),
                r.closeDialog = function() {
                    s.hide()
                }
                ,
                3 == l && (c = n(c));
                const d = i[l].replace("{value}", c);
                r.message = d,
                r.step = "congrats",
                r.stepCongratsYes = function() {
                    r.step = "rating"
                }
                ,
                r.stepCongratsNo = function() {
                    r.step = "feedback"
                }
                ,
                r.stepRatingYes = function() {
                    o(e),
                    s.hide()
                }
                ,
                r.stepRatingNo = function() {
                    r.step = "feedback"
                }
                ,
                r.stepFeedbackSend = function() {
                    a.userReviewFeedback(r.feedback),
                    r.step = "thanks"
                }
                ,
                r.stepFeedbackNotNow = function() {
                    s.hide()
                }
                ,
                r.stepThanksClose = function() {
                    s.hide()
                }
                ,
                r.stepThanksCall = function() {
                    o(t),
                    s.hide()
                }
            }
        }
        )()
    },
    fd50: function(e, t) {
        (function() {
            "use strict";
            function e(e, t, i, n) {
                e.saveUpdateAndOptions = "save-update-options",
                t.designId = n,
                t.saveUpdateOptions = function() {
                    i.hide({
                        action: e.saveUpdateAndOptions
                    })
                }
                ,
                t.save = function() {
                    i.hide({
                        action: "save"
                    })
                }
            }
            e.$inject = ["$rootScope", "$scope", "$mdDialog", "designId"],
            angular.module("app.ctrls").controller("DesignEditModeModalCtrl", e)
        }
        )()
    },
    fd57: function(e, t) {
        var i = '<title>Libraries</title> <div ng-controller="LibrariesCtrl" class="libraries-viewer scrolling-page"> <md-nav-bar md-selected-nav-item="currentNavItem" nav-bar-aria-label="navigation links" ng-if="!viewerSettings"> <md-nav-item md-nav-click="switchLibraryType(\'color\')" name="color"> Color Libraries </md-nav-item> <md-nav-item md-nav-click="switchLibraryType(\'font\')" name="font"> Font Libraries </md-nav-item> <md-nav-item md-nav-click="switchLibraryType(\'vector\')" name="vector"> Vector Libraries </md-nav-item> <md-nav-item md-nav-click="switchLibraryType(\'image\')" name="image"> Image Libraries </md-nav-item> </md-nav-bar> <div ng-if="viewerSettings" class="header">Pick a {{ viewerSettings.libraryType.toLowerCase() }} library</div> <div class="col-xs-12" style="margin-top:30px"> <div class="col-xs-2" style="padding:0" ng-show="!viewerSettings"> <md-button class="md-raised md-primary col-xs-12" style="margin-left:0" ng-click="addLibrary()">Add Library</md-button> </div> <div style="float:right"> <md-input-container style="margin-top:2%;text-align:left" class="hide-validation-error"> <md-tooltip md-direction="bottom"> Search by Id or Name </md-tooltip> <label>Id or Name</label> <input ng-model="searchString"/> </md-input-container> <md-button class="md-raised btn-turquise" style="margin-bottom:20px;margin-left:10px" ng-click="getLibraries()">Search</md-button> </div> <div class="clearfix"></div> <table class="table table-striped table-inverse libraries-table" style="margin-bottom:0"> <thead class="thead-inverse"> <tr> <th>Id</th> <th>Name</th> <th ng-if="libraryType === \'color\'" style="white-space:nowrap">Color Mode</th> </tr> </thead> <tbody> <tr ng-repeat="library in filteredLibraries"> <td>{{ library.LibraryId }}</td> <td style="width:100%"> <md-input-container style="margin:0" ng-style="viewerSettings ? {\'pointer-events\': \'none\'} : {\'pointer-events\': \'auto\'}"> <md-tooltip md-direction="right">Rename</md-tooltip> <span ng-hide="library.editing" ng-click="editItem(library)">{{ library.Name }}</span> <input ng-show="library.editing" ng-keydown="$event.keyCode === 13 && doneEditing(library)" ng-model="library.Name" autofocus required/> </md-input-container> </td> <td ng-if="libraryType === \'color\'">{{ colorModeStrings[library.ColorMode] }}</td> <td ng-if="!viewerSettings"> <md-button class="btn-small md-raised btn-turquise m0" ng-click="edit(library)">Edit</md-button> </td> <td ng-if="!viewerSettings"> <md-button class="btn-small md-raised btn-turquise m0" ng-click="clone(library)">Clone</md-button> </td> <td ng-if="!viewerSettings"> <md-button class="btn-small md-raised btn-dgray m0" ng-click="delete(library, $index)">Delete</md-button> </td> <td ng-if="viewerSettings"> <md-button class="btn-small md-raised btn-turquise m0" style="float:right;margin:0" ng-click="selectLibrary(library)">Select</md-button> </td> </tr> </tbody> </table> <div class="text-center"> <pagination ng-model="currentPage" total-items="librariesCount" items-per-page="numPerPage" max-size="maxSize" boundary-links="true"> </pagination> </div> </div> </div> ';
        e.exports = i
    },
    ff3b: function(e, t, i) {
        i("8cad");
        const {isSpaceChar: n, splitWords: o, computeStroke: r, drawPaths: a} = i("13c7");
        window._fillTextOpentype = function(e, t, i, n, o) {
            var r;
            r = this.lineMetrics ? this.lineMetrics : this.measureText(e);
            var s = _getFontFamilyOpentype.call(this)
              , l = !!Font.hasFont(s) && Font.resolve(s);
            if (!l)
                return this._fillText ? this._fillText.call(this, e, t, i, n) : this.fillText.call(this, e, t, i);
            const c = {
                kerning: !0,
                tracking: o,
                features: {
                    liga: this.ligatures,
                    rlig: this.ligatures
                }
            };
            var d = l.getPaths(e, t, i, _getFontSizeOpentype.call(this), c)
              , u = !1
              , p = 0
              , h = 0
              , m = !1
              , g = !1
              , f = !1;
            if (n && r.totalWidthNoJustify < n) {
                g = !0;
                var v = n - r.totalWidthNoJustify
                  , b = e.match(/\s/g);
                b ? h = v / b.length : (f = !0,
                h = v / (e.length - 1))
            }
            for (var y = 0; y < d.length; ++y) {
                var w = d[y]
                  , C = e[y];
                w.character = C,
                g && (u || f && 0 !== y) && (m = !0,
                p += h,
                u = !1),
                g && n && /[ \t\r]/.test(C) && (u = !0),
                w.offsetY = 0,
                w.offsetX = p
            }
            return this.save(),
            this.strokeStyle = this.opentypeStroke,
            this.lineWidth = this.opentypeStrokeWidth,
            this.lineJoin = "round",
            a(d, this, this.opentypeStrokeWidth > 0, !1),
            this.lineWidth = 0,
            a(d, this, !1, !0),
            this.restore(),
            m && (r.width = n + (this.opentypeStrokeWidth || 0),
            r.totalWidth = n + (this.opentypeStrokeWidth || 0)),
            this.lastDrawnData = {
                paths: d,
                x: t,
                y: i,
                strokeWidth: this.opentypeStrokeWidth
            },
            r
        }
        ,
        window._getFontSizeOpentype = function() {
            return this.trueFontSize || 1 * this.font.match(/\d+/)[0]
        }
        ,
        window._getFontFamilyOpentype = function() {
            var e = this.font.match(/(\s*\d+(\.\d{1,50})?)px (.*)/);
            return e ? e[e.length - 1] : ""
        }
        ;
        const s = new RegExp("\\s$","gi");
        window._measureTextOpentype = function(e, t, i, n) {
            var o = _getFontFamilyOpentype.call(this)
              , a = !!Font.hasFont(o) && Font.resolve(_getFontFamilyOpentype.call(this));
            let l = !0;
            if (!a)
                return l = !1,
                this._measureText ? this._measureText.call(this, e) : this.measureText.call(this, e);
            "undefined" === typeof t && (t = !1),
            this.lineSpacing = this.lineSpacing || 1,
            this.lineSpacing < 0 && (lineSpacing = .01);
            const c = _getFontSizeOpentype.call(this);
            var d = 0
              , u = -99999999
              , p = -99999999
              , h = 99999999
              , m = 99999999
              , g = 0
              , f = 0
              , v = 0
              , b = 0
              , y = 1 / a.unitsPerEm * c
              , w = a.fontHeight * y * this.lineSpacing
              , C = a.totalAscender * y
              , x = a.totalDescender * y
              , S = 0
              , P = 0;
            if ((this.opentypeStrokeWidth || 0) > 0) {
                var k = e[0]
                  , _ = e[e.length - 1];
                k && _ && (S = r(k, a, c, this.strokeRenderingCanvas, this.opentypeStrokeWidth || 0, t, n, this.ligatures, "left"),
                P = r(_, a, c, this.strokeRenderingCanvas, this.opentypeStrokeWidth || 0, t, n, this.ligatures, "right"))
            }
            a.forEachGlyph(e, 0, 0, c, {
                kerning: t,
                tracking: n,
                features: {
                    liga: this.ligatures,
                    rlig: this.ligatures
                }
            }, (function(e, t, i, n) {
                var o = 1 / (e.path.unitsPerEm || a.unitsPerEm) * n
                  , r = e.path;
                if (r.commands.length > 0 && o) {
                    var s = e.getMetrics();
                    "space" !== e.name && 32 !== e.unicode || 0 !== s.xMax || 0 !== s.xMin || 0 !== s.yMax || 0 !== s.yMin ? (u = Math.max(s.xMax * o + t, u),
                    h = Math.min(s.xMin * o + t, h),
                    p = Math.max(s.yMax * o + i, p),
                    m = Math.min(s.yMin * o + i, m),
                    0 == d && (v = s.leftSideBearing * o),
                    b = s.rightSideBearing * o,
                    g = Math.max(g, e.descent * o),
                    f = Math.max(f, e.ascent * o)) : (u = Math.max(e.advanceWidth * o + t, u),
                    h = Math.min(t, h),
                    p = Math.max(i, p),
                    m = Math.min(i, m))
                } else
                    o ? (u = Math.max(e.advanceWidth * o + t, u),
                    h = Math.min(t, h),
                    p = Math.max(i, p),
                    m = Math.min(i, m)) : (u = Math.max(t, u),
                    h = Math.min(t, h),
                    p = Math.max(i, p),
                    m = Math.min(i, m));
                ++d
            }
            )),
            e || (u = p = h = m = 0);
            var A, T = u - h, E = p - m;
            0 == T && (T = 1),
            0 == E && (E = 1),
            a.forEachGlyph(e + " ", 0, 0, c, {
                kerning: t,
                tracking: n,
                features: {
                    liga: this.ligatures,
                    rlig: this.ligatures
                }
            }, (function(e, t, i) {
                A = t
            }
            ));
            var O = T + S + P;
            return i && e.length > 1 && null == s.exec(e) && (A = T = i - S - P),
            T += S + P,
            A += S + P,
            {
                width: A,
                height: E + (this.opentypeStrokeWidth || 0),
                heightNoStroke: E,
                totalWidth: T,
                totalWidthNoJustify: O,
                minY: m,
                maxY: p,
                minX: h,
                maxX: u,
                fontHeight: w,
                fontAscender: C,
                fontDescender: x,
                descent: g,
                ascent: f,
                leftSideBearing: v,
                rightSideBearing: b,
                leftStrokeWidth: S,
                rightStrokeWidth: P,
                isOpenTypeMetrics: l
            }
        }
        ;
        const l = ["maxWidth", "maxHeight", "text", "fontSize", "fontFamily", "fontWeight", "fontStyle", "minFontSize", "maxFontSize", "tracking", "ligatures", "lineSpacing", "textAlign", "multiline", "opentypeStrokeWidth"];
        let c = {}
          , d = {};
        fabric.OpentypeIText = fabric.util.createClass(fabric.Object, {
            type: "opentype-itext",
            _dimensionAffectingProps: l,
            cacheProperties: fabric.Object.prototype.cacheProperties.concat(l, "opentypeStroke", "fillPattern"),
            width: 1,
            height: 1,
            maxWidth: 1,
            maxHeight: 1,
            minFontSize: 1,
            maxFontSize: 1,
            text: "",
            fontFamily: "Arial",
            fontSize: 1,
            multiline: !1,
            tracking: 0,
            lineSpacing: 1,
            ligatures: !0,
            _ligaturesNotSupported: !1,
            flatCharHeightCache: {},
            lineHeight: 1.16,
            _fontSizeMult: 1,
            _fontSizeFraction: 0,
            _textData: null,
            _fillPatternNeedsUpdate: !0,
            __fillPatternImage: null,
            __fillPattern: null,
            _lastDrawnData: {},
            opentypeStrokeWidth: 0,
            opentypeStroke: "#000000",
            strokeRenderingCanvas: null,
            CACHE_FONT_SIZE: 200,
            initialize: function(e, t) {
                this.callSuper("initialize", t),
                this.text = e,
                t.version = t.version || fabric.BoundedText.prototype.version,
                this.strokeRenderingCanvas = fabric.util.createCanvasElement(),
                this._setWidthHeight()
            },
            _measureTextOpenType: function(e, t, i, n, o) {
                try {
                    return {
                        metric: window._measureTextOpentype.call(e, t, i, n, o),
                        disableLigatures: !1
                    }
                } catch (error) {
                    if (!this._ligaturesNotSupported && error && error.message.indexOf("is not yet supported") > -1)
                        return this._ligaturesNotSupported = !0,
                        console.warn("Disabling ligatures for font " + this.fontFamily),
                        e.ligatures = !1,
                        {
                            metric: window._measureTextOpentype.call(e, t, i, n, o),
                            disableLigatures: !0
                        };
                    throw error
                }
            },
            _splitTextIntoLines: function(e, t, i, n) {
                const o = e.split(" ")
                  , r = [];
                let a = o[0];
                for (let s = 1; s < o.length; s++) {
                    const e = o[s]
                      , l = this._getTextMetrics(a + " " + e, t)
                      , c = n / this.CACHE_FONT_SIZE;
                    l.textWidth * c < i ? a += " " + e : (r.push(a),
                    a = e)
                }
                return r.push(a),
                r.join("\n")
            },
            _getCtxCacheKey: function(e, t, i) {
                return `${e.font}:${e.lineSpacing}:${e.opentypeStrokeWidth}:${t}:${!!i}`
            },
            _joinWordsMetrics: function(e, t, i, o, r) {
                const a = {
                    width: 0,
                    totalWidth: 0,
                    height: fabric.util.array.max(t, "height") + r,
                    heightNoStroke: fabric.util.array.max(t, "heightNoStroke"),
                    minY: fabric.util.array.min(t, "minY"),
                    maxY: fabric.util.array.max(t, "maxY"),
                    totalWidthNoJustify: 0,
                    fontHeight: t[0].fontHeight,
                    fontAscender: t[0].fontAscender,
                    fontDescender: t[0].fontDescender,
                    descent: fabric.util.array.max(t, "descent"),
                    ascent: fabric.util.array.max(t, "ascent"),
                    leftSideBearing: t[0].leftSideBearing,
                    rightSideBearing: t[t.length - 1].rightSideBearing,
                    leftStrokeWidth: n(e[0]) ? 0 : r / 2,
                    rightStrokeWidth: n(e[e.length - 1]) ? 0 : r / 2
                };
                for (let s = 0; s < e.length; s++) {
                    const r = e[s]
                      , l = t[s];
                    if (a.width += l.width,
                    a.totalWidth += l.totalWidth,
                    n(r)) {
                        const r = t[s - 1]
                          , l = t[s + 1]
                          , c = e[s - 1];
                        let d = (r ? r.rightSideBearing : 0) + (l ? l.leftSideBearing : 0);
                        d += (0 === s || n(c) ? 1 : 2) * (i / 1e3) * o,
                        a.totalWidth += d,
                        a.width += d
                    }
                }
                return a.totalWidthNoJustify = a.totalWidth,
                a
            },
            _getTextMetrics: function(e, t) {
                const i = e.replace(/\r\n/g, "\n").split("\n")
                  , n = this.getMeasuringContext();
                n.opentypeStrokeWidth = 0;
                const r = this._getCtxCacheKey(n, t, n.ligatures);
                c[r] || (c[r] = {}),
                d[r] && (n.ligatures = !1,
                this._ligaturesNotSupported = !0);
                const a = [];
                for (const h of i) {
                    const e = o(h)
                      , i = [];
                    for (const o of e)
                        if (c[r][o])
                            i.push(c[r][o]);
                        else {
                            const {metric: e, disableLigatures: a} = this._measureTextOpenType(n, o, !0, null, t);
                            d[r] = a,
                            a && (n.ligatures = !1),
                            e && e.isOpenTypeMetrics && (c[r][o] = e),
                            i.push(e)
                        }
                    const s = this._joinWordsMetrics(e, i, t, this.CACHE_FONT_SIZE, this.opentypeStrokeWidth);
                    a.push(s)
                }
                let s = 0;
                for (const o of a)
                    s += o.fontHeight;
                let l = fabric.util.array.max(a, "totalWidth")
                  , u = a.some(e=>e.leftStrokeWidth > 0) ? this.opentypeStrokeWidth / 2 : 0
                  , p = a.some(e=>e.rightStrokeWidth > 0) ? this.opentypeStrokeWidth / 2 : 0;
                return {
                    lineMetrics: a,
                    textLines: i,
                    textWidth: l,
                    textHeight: s,
                    leftStrokeWidth: u,
                    rightStrokeWidth: p
                }
            },
            _getBoundedTextMetrics: function(e, t, i, n) {
                let {lineMetrics: o, textLines: r, textWidth: a, textHeight: s, leftStrokeWidth: l, rightStrokeWidth: c} = this._getTextMetrics(e, t);
                const d = (i - l - c) / a
                  , u = n / s;
                let p = Math.min(d, u)
                  , h = p * this.CACHE_FONT_SIZE;
                if (h > this.maxFontSize)
                    p *= this.maxFontSize / h,
                    h = this.maxFontSize;
                else if (h < this.minFontSize) {
                    let d = e
                      , u = 0
                      , m = 0
                      , g = 0;
                    do {
                        let f = !0;
                        if (this.multiline && 1 === u) {
                            let o = this._splitTextIntoLines(e, t, i - this.opentypeStrokeWidth, this.minFontSize)
                              , r = ""
                              , a = 1
                              , s = 1;
                            do {
                                const e = o.lastIndexOf("\n");
                                if (!(e > -1))
                                    break;
                                r = o.slice(e + 1),
                                o = o.slice(0, e);
                                const l = this._getTextMetrics(o, t);
                                s = (i - l.leftStrokeWidth - l.rightStrokeWidth) / l.textWidth,
                                a = n / l.textHeight
                            } while (Math.min(a, s) * this.CACHE_FONT_SIZE < this.minFontSize && o);
                            e = o,
                            r ? e += "\n" + r : f = !1
                        }
                        u > 0 && f && (e = e.slice(0, e.length - 1)),
                        this.multiline ? (h = this.minFontSize,
                        d = this._splitTextIntoLines(e, t, i - this.opentypeStrokeWidth, h)) : d = e;
                        const v = this._getTextMetrics(d, t);
                        o = v.lineMetrics,
                        r = v.textLines,
                        a = v.textWidth,
                        s = v.textHeight,
                        l = v.leftStrokeWidth,
                        c = v.rightStrokeWidth,
                        g = (i - l - c) / a,
                        m = n / s,
                        p = Math.min(m, g),
                        h = p * this.CACHE_FONT_SIZE,
                        ++u
                    } while (h < this.minFontSize && e.length);
                    h > this.maxFontSize && (p = this.maxFontSize / this.CACHE_FONT_SIZE,
                    h = p * this.CACHE_FONT_SIZE)
                }
                for (const m of o)
                    for (const e in m)
                        "leftStrokeWidth" !== e && "rightStrokeWidth" !== e && (m[e] = m[e] * p);
                for (const m of o)
                    m.totalWidth += m.leftStrokeWidth + m.rightStrokeWidth,
                    m.totalWidthNoJustify += m.leftStrokeWidth + m.rightStrokeWidth;
                return {
                    fontSize: h,
                    textLines: r,
                    metrics: o,
                    textWidth: a * p + l + c,
                    textHeight: s * p + this.opentypeStrokeWidth
                }
            },
            getMeasuringContext: function() {
                fabric._measuringContext || (fabric._measuringContext = this.canvas && this.canvas.contextCache || fabric.util.createCanvasElement().getContext("2d"));
                const e = fabric._measuringContext;
                return e.lineSpacing = this.lineSpacing,
                e.ligatures = !this._ligaturesNotSupported && this.ligatures,
                e.font = fabric.Text.prototype._getFontDeclaration.call(this, {
                    fontFamily: this.fontFamily,
                    fontSize: this.CACHE_FONT_SIZE,
                    fontWeight: this.fontWeight,
                    fontStyle: this.fontStyle
                }, !0),
                e.trueFontSize = this.CACHE_FONT_SIZE,
                e.strokeRenderingCanvas = this.strokeRenderingCanvas,
                e
            },
            _setWidthHeight: function() {
                this._textData = this._getBoundedTextMetrics(this.text, this.tracking, this.maxWidth, this.maxHeight),
                this.width = "justify" === this.textAlign ? this.maxWidth : this._textData.textWidth,
                this.height = this._textData.textHeight,
                this.fontSize = this._textData.fontSize
            },
            _set: function(e, t) {
                return "fontFamily" === e ? (this.flatCharHeightCache = {},
                this._ligaturesNotSupported = !1) : "fillPattern" === e && (this._fillPatternNeedsUpdate = !0),
                this.callSuper("_set", e, t),
                this._dimensionAffectingProps.indexOf(e) > -1 && this._setWidthHeight(),
                this
            },
            getTextPaths: function(e=!1) {
                const t = (e,t=0,i=0)=>{
                    for (var n = 0; n < e.length; ++n)
                        for (var o = e[n], r = o.offsetX + t, a = o.offsetY + i, s = 0; s < o.commands.length; s += 1) {
                            var l = o.commands[s];
                            "M" === l.type || "L" === l.type ? (l.x += r,
                            l.y += a) : "C" === l.type ? (l.x += r,
                            l.y += a,
                            l.x1 += r,
                            l.y1 += a,
                            l.x2 += r,
                            l.y2 += a) : "Q" === l.type && (l.x += r,
                            l.y += a,
                            l.x1 += r,
                            l.y1 += a)
                        }
                    return e
                }
                  , i = this.maxWidth
                  , n = this.maxHeight
                  , o = [];
                if (this._lastDrawnData && Object.keys(this._lastDrawnData).length) {
                    const r = Object.keys(this._lastDrawnData);
                    for (let a = 0; a < r.length; a++) {
                        const s = r[a]
                          , l = this._lastDrawnData[s];
                        let c = -l.x + (i - this.width) / 2 - (-l.x - this.width / 2);
                        "left" === this.textAlign ? c -= (i - this.width) / 2 : "right" === this.textAlign && (c += (i - this.width) / 2);
                        const d = l.y + (n - this.height) / 2 - (l.y - this.height / 2)
                          , u = t(l.paths, c, d);
                        for (let t = 0; t < u.length; t++) {
                            const i = u[t];
                            o.push(e ? i.toSVG(8) : i.toPathData(8))
                        }
                    }
                    return {
                        paths: o,
                        strokeWidth: this._lastDrawnData[0].strokeWidth,
                        width: i,
                        height: n
                    }
                }
                return null
            },
            _renderBackground: function(e) {
                let t = {
                    x: e.canvas.width,
                    y: e.canvas.height
                };
                e.clearRect(-t.x / 2, -t.y / 2, t.x, t.y),
                this.backgroundColor && (t = this._getNonTransformedDimensions(),
                e.fillStyle = this.backgroundColor,
                e.fillRect(-t.x / 2, -t.y / 2, t.x, t.y),
                this._removeShadow(e))
            },
            _render: function(e) {
                if (e.strokeRenderingCanvas = this.strokeRenderingCanvas,
                this._fillPatternNeedsUpdate && this.fillPattern) {
                    this._fillPatternNeedsUpdate = !1,
                    this._fillPatternImage = this.fillPattern;
                    const e = this.getMeasuringContext();
                    if (this._fillPattern = e.createPattern(this.fillPattern.source, this.fillPattern.repeat || "repeat"),
                    !this._fillPattern) {
                        console.warn("Pattern was null, recreating");
                        let t = 0;
                        const i = setInterval(()=>{
                            this._fillPattern = e.createPattern(this.fillPattern.source, this.fillPattern.repeat || "repeat"),
                            this._fillPattern ? clearInterval(i) : ++t > 10 && (clearInterval(i),
                            console.error("Failed to create pattern"))
                        }
                        , 50)
                    }
                }
                this._renderTextCommon(e)
            },
            getFlatCharacterHeight: function() {
                const e = "x"
                  , t = this.getMeasuringContext()
                  , i = this.fontSize / this.CACHE_FONT_SIZE;
                let n = 0;
                if (this.flatCharHeightCache[e] && this.flatCharHeightCache[e].font === t.font && this.flatCharHeightCache[e].strokeWidth === t.opentypeStrokeWidth && this.textAlign === this.flatCharHeightCache[e].textAlign)
                    n = this.flatCharHeightCache[e].height;
                else {
                    const {metric: i} = this._measureTextOpenType(t, e, !0, null, this.tracking);
                    this.flatCharHeightCache[e] = {},
                    this.flatCharHeightCache[e].font = t.font,
                    this.flatCharHeightCache[e].strokeWidth = t.opentypeStrokeWidth,
                    this.flatCharHeightCache[e].textAlign = this.textAlign,
                    this.flatCharHeightCache[e].height = i.heightNoStroke,
                    n = i.heightNoStroke
                }
                return n *= i,
                n
            },
            _renderTextCommon: function(e) {
                let t;
                this._lastDrawnData = {};
                const {textLines: i, metrics: n, textHeight: o} = this._textData;
                e.opentypeStroke = this.opentypeStroke,
                e.opentypeStrokeWidth = this.opentypeStrokeWidth,
                e.lineSpacing = this.lineSpacing,
                e.ligatures = !this._ligaturesNotSupported && this.ligatures,
                e.font = fabric.Text.prototype._getFontDeclaration.call(this, {
                    fontFamily: this.fontFamily,
                    fontSize: this.fontSize,
                    fontWeight: this.fontWeight,
                    fontStyle: this.fontStyle
                }, !1),
                e.trueFontSize = this.fontSize,
                e._fillPattern = this._fillPattern,
                e._fillPatternImage = this._fillPatternImage;
                let r = 0
                  , a = 0
                  , s = [];
                1 === i.length && "justify" !== this.textAlign ? (t = n[0],
                a = -this.width / 2) : a = -this.width / 2;
                const l = o
                  , c = 1 === n.length ? this.getFlatCharacterHeight() : n[0].maxY + n[0].fontHeight * (n.length - 1)
                  , d = (l - c) / 2
                  , u = l / 2 - d - n[0].fontHeight * (n.length - 1);
                for (let p = 0, h = i.length; p < h; p++) {
                    let o = 0;
                    1 === i.length && "justify" !== this.textAlign || (t = n[p]),
                    "center" === this.textAlign && (o = (this.width - t.totalWidth) / 2),
                    "right" === this.textAlign && (o = this.width - t.totalWidth),
                    o += t.leftStrokeWidth;
                    const l = t.fontHeight;
                    s[p] = l,
                    p > 0 && (r += s[p - 1]),
                    this._renderTextLine(e, i[p], "justify" === this.textAlign, a + o - t.leftSideBearing, r + u - this.opentypeStrokeWidth / 2, p, t)
                }
            },
            _renderTextLine: function(e, t, i, n, o, r, a) {
                return e.save(),
                e.lineMetrics = a,
                info = window._fillTextOpentype.call(e, t, n, o, i ? this.maxWidth : null, this.tracking),
                this._lastDrawnData[r] = Object.assign({}, e.lastDrawnData, {
                    width: this.width,
                    height: this.height
                }),
                e.lineMetrics = null,
                e.restore(),
                info
            }
        })
    },
    ff7e: function(e, t, i) {
        e.exports = i.p + "img/list.5c0e5789.svg?x-request=html"
    }
});
